,Id,CreationDate,DeletionDate,Body,LastEditDate,LastActivityDate,Title,Tags,ClosedDate,CommunityOwnedDate,ContentLicense,opencv,matlab,emgucv,scikit-image,ffmpeg
26,8723606,2012-01-04 07:49:18,,"<p>I use Qt &amp; OpenCV to record video and QAudioInput to record audio into wav format. I want to combine them into one video file. How can I accomplish this? I have researched so much but I can't seem to find a command to accomplish this.</p>

<p>I use both Windows and Mac.</p>
",2013-01-18 01:48:35,2013-01-18 01:48:35,FFMPEG command to combine a WAV file and a video file?,<windows><qt><opencv><ffmpeg><osx-snow-leopard>,,,CC BY-SA 3.0,True,False,False,False,True
39,8724002,2012-01-04 08:32:22,,"<p>I try to record a Video with the OpenCV Framework an would like to save that into an Matroska(mkv) Container together with some additional data streams.</p>

<p>First I thought using FFmpeg is the way that.
But while looking into the OpenCV Sourcecode and searching in the web I found GStreamer.</p>

<p>Because the documentation in GStreamer is much better than the FFmpeg documentation I would prefer using this Framework.</p>

<p>In my understanding GStreamer is primarily used for Streaming, but could also rncode and mux video data.</p>

<p>Is there any disadvantage when using GStreamer instead of FFmpeg?</p>

<p>Thanks in advance
Horst</p>
",,2020-09-29 15:32:00,GStreamer vs FFmpeg,<opencv><ffmpeg><gstreamer>,,,CC BY-SA 3.0,True,False,False,False,True
93,8771334,2012-01-07 16:50:39,,"<p>I am trying to install the library Open-CV working on on Ubuntu 11.04.</p>

<p>I followed all instructions found in the <a href=""http://opencv.willowgarage.com/wiki/InstallGuide_Linux"" rel=""nofollow"">InstallationGuide</a>.</p>

<p>However after installing with success I realized that I hadn't <code>FFMPEG</code> support because in my configuration file <code>FFMPEG</code> was disabled:</p>

<pre><code>Video I/O: 
--     DC1394 1.x:                 NO 
--     DC1394 2.x:                 YES 
--     FFMPEG:                     NO 
--       codec:                    YES 
--       format:                   YES 
--       util:                     YES 
--       swscale:                  NO 
--       gentoo-style:             YES 
--     GStreamer:                  YES 
--     UniCap:                     NO 
--     PvAPI:                      NO 
--     V4L/V4L2:                   Using libv4l 
--     Xine:                       NO
</code></pre>

<p>So I tried to rebuild everything after installing FFMEPG as decribed <a href=""http://ubuntuforums.org/showthread.php?t=786095"" rel=""nofollow"">here</a>.</p>

<p>After configuring installation with the instruction</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON ../OpenCV-2.3.1
</code></pre>

<p>I ran the make command getting this error:</p>

<pre><code>make[2]: *** [bin/opencv_test_calib3d] Error 1
make[1]: *** [modules/calib3d/CMakeFiles/opencv_test_calib3d.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>This is the point of compilation where the error is coming out:</p>

<pre><code>Linking CXX executable ../../bin/opencv_test_calib3d
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_analysis_headerout'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_out_samplerate'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_disable_reservoir'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_encode_buffer'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vaUnmapBuffer'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vaDestroyBuffer'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_comment_clear'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_param_default'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_param_apply_profile'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_brate'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_encoder_headers'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `faacEncGetCurrentConfiguration'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_analysis_blockout'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_info_clear'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_analysis_buffer'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_comment_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vaCreateBuffer'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_bWriteVbrTag'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `faacEncSetConfiguration'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_encode_ctl'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `D_IF_decode'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `faacEncGetDecoderSpecificInfo'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_block_clear'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_close'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_encoder_encode'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_VBR'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `Encoder_Interface_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_analysis'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_get_framesize'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `faacEncOpen'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_encode_packetout'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_quality'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `Decoder_Interface_exit'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_encode_alloc'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_encode_setup_vbr'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_info_clear'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_in_samplerate'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_encoder_reconfig'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_param_apply_fastfirstpass'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_VBR_quality'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_mode'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `D_IF_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_set_num_channels'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `faacEncEncode'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_encode_setup_managed'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `Encoder_Interface_exit'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `Decoder_Interface_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vaRenderPicture'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_encode_ctl'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_info_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_analysis_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_encoder_delayed_frames'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_param_parse'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_encode_free'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `D_IF_exit'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_dsp_clear'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `Decoder_Interface_Decode'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vaMapBuffer'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_block_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_bit_depth'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_picture_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_encoder_close'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_encoder_open_120'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `faacEncClose'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vaEndPicture'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_encode_flush'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_encode_buffer_interleaved'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_comment_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_comment_clear'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_init_params'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `x264_param_default_preset'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_encode_setup_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_bitrate_addblock'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_comment_add_tag'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_encode_flushheader'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `lame_encode_buffer_int'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `th_encode_ycbcr_in'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_bitrate_flushpacket'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_analysis_wrote'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vorbis_info_init'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `Encoder_Interface_Encode'
../../lib/libopencv_highgui.so.2.3.1: undefined reference to `vaBeginPicture'
collect2: ld returned 1 exit status
</code></pre>

<p>can anybody please tell me what's the problem with installation process I'm following?</p>

<p>Why is there this library referentiation error?</p>
",2013-12-24 13:09:03,2013-12-24 13:09:03,Error in installing Open-CV with ffmpeg,<c><opencv><ffmpeg><makefile><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
169,8823320,2012-01-11 16:58:05,,"<p>This is somewhat of a follow up to a question posted earlier last month.
In porting my work, to the work computer, I'm experiencing some new convolution problem.</p>

<p>So, my kernel is 30x30 size and now OpenCV complains:</p>

<pre><code>Assertion failed (templ.cols &lt;= 17 &amp;&amp; templ.rows &lt;= 17) in convolve, file /home/jeffrey/opencv/src/modules/gpu/src/imgproc.cpp, line 1677
terminate called after throwing an instance of 'cv::Exception'
</code></pre>

<p>So far this is the only noticeable problem I'm getting with the port so far.. </p>

<p>Is this new, is this normal?</p>

<p>i'm also getting 2 errors which are most likely unrelated, but worth mentioning </p>

<pre><code>[swscaler @ 0x9422b00]No accelerated colorspace conversion found.
</code></pre>

<p>This is likely ffmpeg error</p>

<p>but i'm also getting an error stating OpenGL version unsupported</p>

<p>Could this be the culprit?</p>
",2012-01-11 21:42:49,2012-01-12 20:18:02,OpenCV convolution kernel size,<c++><opencv><gpu>,,,CC BY-SA 3.0,True,False,False,False,True
189,8864467,2012-01-14 18:46:26,,"<p>I have read many, many threads about streaming images over IP in <strong>OpenCV 2.3.1</strong>, but I still cannot get my program to work.</p>

<p>I downloaded <strong>IP Webcam for Android</strong> from <a href=""https://market.android.com/details?id=com.pas.webcam&amp;hl=en"" rel=""noreferrer"">https://market.android.com/details?id=com.pas.webcam&amp;hl=en</a>, and recently learned OpenCV to retrieve images from my Android phone camera.</p>

<p>Its built-in manual said that the image from the phone camera can be located at <a href=""http://the.phone.ip.address:8080/shot.jpg"" rel=""noreferrer"">http://the.phone.ip.address:8080/shot.jpg</a>. I have opened it from browser several times and it always looks fine. I also built OpenCV manually, with <strong>FFmpeg</strong> support.</p>

<p>So far I've tried</p>

<pre><code>CvCapture* webcam = cvCaptureFromFile(""http://192.168.1.220:8080/shot.jpg"");
</code></pre>

<p>but it returns NULL and outputs</p>

<pre><code>[image2 @ 0xd701e0]Could not find codec parameters (Video: mjpeg, yuv420p)
</code></pre>

<p>I also tried replacing http with rtsp, but it still doesn't work. I also tried to replace the url with some other image url (one direct link to random image from Google Images, and one from localhost) and it always kills with a segfault.</p>

<p>Here's my full source</p>

<pre><code>#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
#include &lt;cv.h&gt;
#include &lt;highgui.h&gt;

int main(int argc, char* argv[])
{ 
  CvCapture* webcam = cvCaptureFromFile(""http://192.168.1.220:8080/shot.jpg"");
  if(!webcam)
    {
      fprintf(stderr, ""cannot open webcam\n"");
      return 1;
    }

  IplImage* img = cvQueryFrame(webcam);
  if(!img)
    {
      fprintf(stderr, ""cannot get image\n"");
      return 1;
    }

  cvNamedWindow(""test"", CV_WINDOW_AUTOSIZE);
  cvShowImage(""test"", img);
  cvWaitKey(0);
  cvReleaseImage(&amp;img);
  /**/ cvReleaseCapture(&amp;webcam); /**/
  cvDestroyWindow(""test"");
  return 0;
}
</code></pre>

<p>Can OpenCV really read images over IP, or am I missing something?</p>
",,2014-02-26 14:43:58,"c, opencv - accessing camera JPG image over ip",<c><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
220,8868540,2012-01-15 08:49:08,,"<p>I'm programming in QT for android device and need to use openCV for capture from camera. I already used Qt creator and linked openCV and used camera, but in Qt for android (necessitas) when build program, show this errors:</p>

<pre><code>C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_highgui.a(cap_images.o): In function `CvCapture_Images::close()':
    cap_images.cpp:(.text._ZN16CvCapture_Images5closeEv+0x1c): undefined reference to `cvReleaseImage'
    C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_highgui.a(cap_images.o): In function `CvCapture_Images::grabFrame()':
    cap_images.cpp:(.text._ZN16CvCapture_Images9grabFrameEv+0x1e): undefined reference to `cvReleaseImage'
    C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_highgui.a(cap_ffmpeg.o): In function `CvCapture_FFMPEG_proxy::retrieveFrame(int)':
    cap_ffmpeg.cpp:(.text._ZN22CvCapture_FFMPEG_proxy13retrieveFrameEi[CvCapture_FFMPEG_proxy::retrieveFrame(int)]+0x50): undefined reference to `cvInitImageHeader'
    cap_ffmpeg.cpp:(.text._ZN22CvCapture_FFMPEG_proxy13retrieveFrameEi[CvCapture_FFMPEG_proxy::retrieveFrame(int)]+0x5a): undefined reference to `cvSetData'
    C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_highgui.a(cap_ffmpeg.o): In function `CvVideoWriter_FFMPEG_proxy::writeFrame(_IplImage const*)':
    cap_ffmpeg.cpp:(.text._ZN26CvVideoWriter_FFMPEG_proxy10writeFrameEPK9_IplImage[CvVideoWriter_FFMPEG_proxy::writeFrame(_IplImage const*)]+0x5e): undefined reference to `cv::Exception::Exception(int, std::string const&amp;, std::string const&amp;, std::string const&amp;, int)'
    cap_ffmpeg.cpp:(.text._ZN26CvVideoWriter_FFMPEG_proxy10writeFrameEPK9_IplImage[CvVideoWriter_FFMPEG_proxy::writeFrame(_IplImage const*)]+0x64): undefined reference to `cv::error(cv::Exception const&amp;)'
    cap_ffmpeg.cpp:(.text._ZN26CvVideoWriter_FFMPEG_proxy10writeFrameEPK9_IplImage[CvVideoWriter_FFMPEG_proxy::writeFrame(_IplImage const*)]+0x6a): undefined reference to `cv::Exception::~Exception()'
    cap_ffmpeg.cpp:(.text._ZN26CvVideoWriter_FFMPEG_proxy10writeFrameEPK9_IplImage[CvVideoWriter_FFMPEG_proxy::writeFrame(_IplImage const*)]+0x11c): undefined reference to `cv::Exception::~Exception()'
C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_highgui.a(grfmt_tiff.o): In function `cv::TiffEncoder::newEncoder() const':
grfmt_tiff.cpp:(.text._ZNK2cv11TiffEncoder10newEncoderEv+0x16): undefined reference to `cv::fastMalloc(unsigned int)'
C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_highgui.a(grfmt_tiff.o): In function `cv::TiffDecoder::newDecoder() const':
grfmt_tiff.cpp:(.text._ZNK2cv11TiffDecoder10newDecoderEv+0x16): undefined reference to `cv::fastMalloc(unsigned int)'
C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_highgui.a(grfmt_tiff.o): In function `cv::TiffDecoder::~TiffDecoder()':
grfmt_tiff.cpp:(.text._ZN2cv11TiffDecoderD1Ev+0x48): undefined reference to `cv::fastFree(void*)'
grfmt_tiff.cpp:(.text._ZN2cv11TiffDecoderD1Ev+0x6e): undefined reference to `cv::Mat::deallocate()'
        .
        .
        .
</code></pre>

<p>first I download latest version of openCV and build it and then use libs. also in </p>

<p>project.pro</p>

<p>add this lines:</p>

<pre><code>INCLUDEPATH += ""C:\OpenCV2.3.1\include\opencv"" 
LIBS +=""C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_androidcamera.a"" \
""C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_calib3d.a"" \
""C:/OpenCV2.3.1/libs/armeabi-v7a/libopencv_calib3d_pch_dephelp.a"" \ .
...
</code></pre>

<p>can necessitas support openCV? why show this errors?</p>

<p>sorry for my English. </p>
",2012-01-15 10:29:14,2012-04-02 06:28:16,error in necessitas while use openCV libs,<android><qt><opencv><qt4>,,,CC BY-SA 3.0,True,True,False,False,True
269,8904127,2012-01-18 01:40:45,,"<p>I am trying to use the Qt new functions described here:
<a href=""http://opencv.willowgarage.com/documentation/cpp/qt_new_functions.html#cv-createbutton"" rel=""nofollow noreferrer"">http://opencv.willowgarage.com/documentation/cpp/qt_new_functions.html#cv-createbutton</a></p>

<p>And I also found this topic on SO:
<a href=""https://stackoverflow.com/questions/4458668/opencv-2-2-createbutton-lnk-2019-error-in-visual-studio-2010"">openCV 2.2 createButton LNK 2019 error in Visual Studio 2010</a>
but compiling with QT didn't work.</p>

<p>Anyway, according to my searches it seems to be a linking problem. My doubt is that I already compiled OpenCV (without QT) but I can use the createTrackbar normally.</p>

<p>I tried using the createButton as this:</p>

<pre><code>cv::createButton(""buttonCanny"",    buttonCallBackCanny,NULL,CV_RADIOBOX,true);
</code></pre>

<p>But I get this error:</p>

<blockquote>
  <p>undefined reference to `cv::createButton(std::string const&amp;, void
  (<em>)(int, void</em>), void*, int, bool)'</p>
</blockquote>

<p>I tried the cvCreateButton but I get the same error.</p>

<p>I have this setup
C/C++ Build -> Settings -> Tool Settings -> MingGW C++ Linker -> Libraries (all the .dll from compiled OpenCV)</p>

<ul>
<li>libopencv_calib3d230 </li>
<li>opencv_ffmpeg </li>
<li>libopencv_contrib230</li>
<li>libopencv_core230 </li>
<li>libopencv_features2d230 </li>
<li>libopencv_flann230</li>
<li>libopencv_gpu230 </li>
<li>libopencv_highgui230 </li>
<li>libopencv_imgproc230</li>
<li>libopencv_legacy230 </li>
<li>libopencv_ml230 </li>
<li>libopencv_objdetect230</li>
<li>libopencv_video230</li>
</ul>

<p>C/C++ Build -> Settings -> Tool Settings -> MingGW C++ Linker -> Search Path (""C:\opencvbin\bin"" where the Dll are)</p>

<p>C/C++ Build -> Settings -> Tool Settings -> GCC C++ Compiler -> Includes
""C:\OpenCV2.3\build\include""</p>

<p>Any suggestions?</p>

<p>Thank you!</p>
",2017-05-23 12:03:15,2012-05-06 05:12:56,OpenCV 2.3 - undefined reference to cvCreateButton - Eclipse,<c++><qt><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
328,14756767,2013-02-07 17:03:33,,"<p>I am trying to read avi video and write it again as it is without any change using openCV 2.4.0 on MAC 10.6.8 </p>

<p>My videos is grayscale with frame_rate = 25 and Codec = 827737670 which is FFV1 (I guess)</p>

<p>The problem is .... 
when I read and write the video as it is .... I see many changes in size and in color ... 
After 3 or 4 times of writing I can see the video start to be (Pink) color !!!</p>

<p>I am not sure what is the problem !!! </p>

<p>this is my code for the people who interest </p>

<p>Appreciate your help in advance :D </p>

<p>Seereen</p>

<p>Note : I have on my computer FFMPEG V 0.11 (I do not know if this important)    </p>

<pre><code>{    

int main (int argc, char * const argv[]) {
    char name[50];

    if (argc==1)
    {
        printf(""\nEnter the name of the video:"");
        scanf(""%s"",name); 

    } else if (argc == 2)
        strcpy(name, argv[1]);

    else 
    {
        printf(""To run this program you should enter the name of the program at least, or you can enter the name of the program then the file name"");
        return 0; 
    }

    cvNamedWindow( ""Read the video"", CV_WINDOW_AUTOSIZE );

    // GET video
    CvCapture* capture = cvCreateFileCapture( name );
    if (!capture ) 
    {
        printf( ""Unable to read input video."" );
        return 0;
    }

    double fps = cvGetCaptureProperty( capture,CV_CAP_PROP_FPS);
     printf( ""fps %f "",fps );
    int codec = cvGetCaptureProperty( capture,CV_CAP_PROP_FOURCC);
    printf( ""codec %d "",codec );
    // Read frame
    IplImage* frame = cvQueryFrame( capture );
    // INIT the video writer
    CvVideoWriter *writer = cvCreateVideoWriter( ""x7.avi"", codec, fps, cvGetSize(frame),1);
    while(1) 
    {
        cvWriteFrame( writer, frame );
        cvShowImage( ""Read the video"", frame );
        // READ next frame
        frame = cvQueryFrame( capture );
        if( !frame ) 
            break;
        char c = cvWaitKey(33);
        if( c == 27 ) 
            break;
    }

    // CLEAN everything
    cvReleaseImage( &amp;frame );
    cvReleaseCapture( &amp;capture );
    cvReleaseVideoWriter( &amp;writer );
    cvDestroyWindow( ""Read the video"" );    
    return 0;}

   } 
</code></pre>
",2013-02-07 17:25:57,2013-04-13 03:09:09,read/write avi video on MAC using openCV,<c><macos><video><opencv><grayscale>,,,CC BY-SA 3.0,True,False,False,False,True
333,13799586,2012-12-10 10:58:39,,"<p>I started working on a new computer a tried to set everything as it used to be on my old one. Unfortunately switching to 64bit Windows made everything quite difficult.</p>

<p>With the current setup I can only open raw I420 videos converted with memcoder, but I can't open DivX/XVID videos, that I used to on my old PC. I tried ffdshow and K-Lite codec pack. Opening the videos in gspot shows that the codecs are indeed installed.</p>

<p>I've searched for solution all over the Internet, but I couldn't find the solution. I've tried copying the ffmpeg dll into the Python27 folder.</p>

<p>The environment is 64bits Windows 7 Pro</p>

<p><strong>EDIT:</strong></p>

<p>I tried saving a video using OpenCV:</p>

<p>I passed -1 to the cv2.VideoWriter function to get the codec selection dialog. The dialog dosn't show the ffdshow codecs.</p>
",2012-12-10 15:42:45,2014-04-16 06:59:35,Open DivX/XVID videos in OpenCV Python,<python><opencv><ffmpeg><codec>,,,CC BY-SA 3.0,True,False,False,False,True
429,10900849,2012-06-05 16:09:09,,"<p>I have a series of images that change relatively little during the day, but suffer from severe over and underexposure sometimes.  There's nothing I can do in the way of fixing the loss of details, however I want to make it so that one from to the next is not so jolting.  In other words, I'd like to normalize brightness / color levels the sequence of images so that it feels more consistent from one from to the next.  Ultimately this sequence is being encoded to a video and therefore why this is important to me.</p>

<p>How can I normalize these values for a series of a few hundred frames via ImageMagick or some other means?</p>
",,2012-06-05 19:03:21,Normalization of a sequence of images via ImageMagick or other means?,<image><image-processing><ffmpeg><imagemagick><video-processing>,,,CC BY-SA 3.0,False,False,False,False,True
461,13811121,2012-12-10 23:31:44,,"<p>I'm new to OpenCV and trying to record simple video with ffmpeg, but size is 0kb everytime... I got success with Cinepak codec, but video is recorded fast, or I set fps to 4 and cwWaitKey(20).. Here is the code what I'm trying..</p>

<pre><code>    cvNamedWindow(""Webcam"", CV_WINDOW_AUTOSIZE);
    CvCapture *cap; cap = cvCreateCameraCapture(0);
    IplImage *img; img = cvQueryFrame(cap);
    CvVideoWriter *writer;
    double fps = cvGetCaptureProperty(cap, CV_CAP_PROP_FPS);
    int camWidth = (int)cvGetCaptureProperty(cap, CV_CAP_PROP_FRAME_WIDTH);
    int camHeight = (int)cvGetCaptureProperty(cap, CV_CAP_PROP_FRAME_HEIGHT);
    CvSize size = cvSize(camWidth, camHeight);
    writer = cvCreateVideoWriter(""record.avi"", CV_FOURCC('M','J','P','G'), fps, size);

    while(cvQueryFrame(cap))
    {
        img = cvRetrieveFrame(cap);
        cvWriteFrame(writer, img);
        cvShowImage(""Webcam"", img);
        cvWaitKey(20);
    }
</code></pre>

<p>//release stuff here.</p>

<p>Can someone tell me what I'm doing wrong? Thank you.</p>

<p>P.S I tried also other FOURCCs but still same result, file is 0 kbytes, nothing is written there.. help :(
FOURCCs tried: XVID, MP4V, FVFW, MPEG, MPG1/2, WM1/2.</p>

<p>P.P.S Using Windows 7 x64, installed both ffmpeg x86 and x64 versions.</p>
",2012-12-10 23:44:35,2012-12-11 10:58:31,opencv and ffmpeg 0 kbyte file,<c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
731,13834399,2012-12-12 06:54:50,,"<p>I am currently working on a project that involves reading mp4 video files.
The problem I encountered is that it using Python 2.7 (32 bit), OpenCV 2.4.3 (cv2.pyd) in a Windows 7 machine.</p>

<p>The code snippet is as follows:</p>

<pre><code>try:
        video = cv2.VideoCapture(""video.mp4"")
except:
        print ""Could not open video file""
        raise
print video.grab()
</code></pre>

<p>""<code>video.grab()</code>"" always returns false: meaning it doesn't read the file ""<code>video.mp4</code>""
But when we try this:</p>

<pre><code>try:
        video = cv2.VideoCapture(""video.avi"")
except:
        print ""Could not open video file""
        raise
print video.grab()
</code></pre>

<p>""<code>video.grab()</code>"" returns true: meaning it is able to read ""<code>.avi</code>"" files.</p>

<p>Another is we have tried this same snippet on Linux and Mac and it seems to work fine, meaning it is able to read both mp4 files and avi files.</p>

<p>This problem is similar to <a href=""http://answers.opencv.org/question/2463/video-capture-issue-in-python/"" rel=""noreferrer"">this problem</a> and <a href=""http://answers.opencv.org/question/1965/cv2videocapture-cannot-read-from-file/"" rel=""noreferrer"">this problem</a>. Both still don't have a clear and workable answer.</p>

<p>I would appreciate any help or workaround aside from just using Linux or Mac for programming this as I need this to work on all three systems. </p>
",,2017-10-24 13:35:54,"Cannot open "".mp4"" video files using OpenCV 2.4.3, Python 2.7 in Windows 7 machine",<python><windows><opencv><ffmpeg><mp4>,,,CC BY-SA 3.0,True,False,False,False,True
905,15770205,2013-04-02 17:15:45,,"<p>I am attempting to use javacv/ffmpeg to compress video on an Android device prior to upload. I am using this code:</p>

<pre><code>FrameGrabber grabber = new FFmpegFrameGrabber(inputFile.getAbsolutePath()); 
grabber.start();
FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(outputFile.getAbsolutePath(), 
   grabber.getImageWidth(), grabber.getImageHeight(), 
   grabber.getAudioChannels()); 

recorder.setVideoCodec(com.googlecode.javacv.cpp.avcodec.AV_CODEC_ID_MPEG4);
recorder.setAudioCodec(com.googlecode.javacv.cpp.avcodec.AV_CODEC_ID_PCM_S16LE);
recorder.setPixelFormat(com.googlecode.javacv.cpp.avutil.AV_PIX_FMT_YUV420P);

/* Unclear if I need these lines or not */
// recorder.setFrameRate(grabber.getFrameRate()); 
// recorder.setSampleRate(grabber.getSampleRate()); 
// recorder.setFormat(""mp4"");
/* End unclear lines */

recorder.start();

Frame frame; 
int totalFrames = grabber.getLengthInFrames();
for (int i = 0; i &lt; totalFrames; i++) {
  frame = grabber.grabFrame();
  if (frame == null) break;
  recorder.record(frame);
}

recorder.stop();
grabber.stop();
</code></pre>

<p>This code crashes 100% of the time at FFmpegFrameGrabber line 584, which is the line: </p>

<pre><code>frame.samples = samples_buf.position(0).limit(data_size / av_get_bytes_per_sample(samples_frame.format()));
</code></pre>

<p>This is because samples_buf is null, because samples_frame.format() does not appear to match any of the cases (AV_SAMPLE_FMT_U8, AV_SAMPLE_FMT_S16, AV_SAMPLE_FMT_S32, AV_SAMPLE_FMT_FLT, AV_SAMPLE_FMT_DBL). </p>

<p>I attempted to avoid this crash by using the grab() method instead of the grabFrame() method, because the grab() method skips audio processing. However, the video I end up with does not play back when I extract it off the device and attempt playback in a web browser, for example.</p>

<p>I have tried numerous iterations of this code, including <a href=""https://code.google.com/p/javacv/issues/detail?id=160#c93"" rel=""nofollow"">this code</a>, all to no avail, all crashing because of line above.</p>

<p>Can anyone advise the shortest working path to compressing a video using javacv/ffmpeg on Android?</p>

<p>Thanks!</p>
",,2013-04-02 17:15:45,FFmpegFrameGrabber crashes 100% of time attempting to compress video on Android,<android><video><encoding><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
986,12900696,2012-10-15 17:15:58,,"<p>I would like to capture a MJPEG stream using C++. Which options do I have? I have tried OpenCV with FFMPEG support but icvCreateFileCapture_FFMPEG_p is always returning null (after a few seconds of timeout). May I program a HTTP client by myself?</p>

<p>Regards,</p>
",,2012-10-16 15:13:28,Capturing video from a MJPEG stream using C++,<c++><c><opencv><ffmpeg><mjpeg>,,,CC BY-SA 3.0,True,False,False,False,True
1006,15774893,2013-04-02 21:38:12,,"<p>I have installed OpenCV 2.4.3, and used cmake to make sure that CUDA is enabled.</p>

<p>so, I did:
    cmake WITH_CUDA .</p>

<p>and I got the following:</p>

<pre><code>-- CUDA detected: 5.0
-- CUDA NVCC target flags: -gencode;arch=compute_11,code=sm_11;-gencode
m_13;-gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=
pute_20,code=compute_20
-- Could NOT find PythonInterp (missing:  PYTHON_EXECUTABLE) (Required
--
-- General configuration for OpenCV 2.4.3 =============================
--
--   Platform:
--     Host:                        Windows 6.1 x86
--     CMake:                       2.8.8
--     CMake generator:             Visual Studio 10
--     CMake build tool:            C:/PROGRA~2/MICROS~2.0/Common7/IDE/
--     MSVC:
--
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                cl
--     C++ flags (Release):         /DWIN32 /D_WINDOWS /W4  /GR /EHs  /
_SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /M
--     C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4  /GR /EHs  /
_SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /M
--     C Compiler:                  cl
--     C flags (Release):           /DWIN32 /D_WINDOWS /W3   /D _CRT_SE
RE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP8  /MD /O2 /Ob
--     C flags (Debug):             /DWIN32 /D_WINDOWS /W3   /D _CRT_SE
RE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP8  /D_DEBUG /M
--     Linker flags (Release):      /STACK:10000000 /machine:X86   /INC
--     Linker flags (Debug):        /STACK:10000000 /machine:X86   /deb
--     Precompiled headers:         YES
--
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features
gpu stitching ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java ocl python
--
--   GUI:
--     QT 4.x:                      NO
--     Win32 UI:                    YES
--     OpenGL support:              NO
--
--   Media I/O:
--     ZLib:                        build (ver 1.2.7)
--     JPEG:                        build (ver 62)
--     PNG:                         build (ver 1.5.12)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--
--   Video I/O:
--     FFMPEG:                      YES (prebuilt binaries)
--       codec:                     YES (ver 53.61.100)
--       format:                    YES (ver 53.32.100)
--       util:                      YES (ver 51.35.100)
--       swscale:                   YES (ver 2.1.100)
--       gentoo-style:              YES
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     DirectShow:                  YES
--     XIMEA:                       NO
--
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     NO
--     Use C=:                      NO
--     Use Cuda:                    YES (ver 5.0)
--     Use OpenCL:                  NO
--     Use Eigen:                   NO
--
--   NVIDIA CUDA
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     NVIDIA GPU arch:             11 12 13 20 21 30
--     NVIDIA PTX archs:            20
--     Use fast math:               NO
--
--   Python:
--     Interpreter:                 NO
--
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
--
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    NO
--
--   Install path:                  C:/opencv/install
--
--   cvconfig.h is in:              C:/opencv
-- -----------------------------------------------------------------
</code></pre>

<p>So, apparently, CUDA is detected okay.</p>

<p>I also build this stitching program:
<a href=""https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/stitching.cpp?rev=6683"" rel=""nofollow"">https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/stitching.cpp?rev=6683</a></p>

<p>And, it works, and I can see that it stitches images fine.</p>

<p>However, whether I use WITH_CUDA or not, I don't see a performance difference !</p>

<p>And when I checked for this: gpu::getCudaEnabledDeviceCount()
It returns zero!!! which I believe indicates that it is not using CUDA!</p>

<p>What I am missing? how should I use CUDA with this example? (I tried in both debug/release configuration)</p>

<p>Do I need to build something special for this code to start using CUDA?
Thanks, 
--Rudy</p>
",2019-04-13 14:49:36,2019-04-13 14:49:36,OpenCV with CUDA not working (VC++ 2010),<opencv><visual-studio-2010>,,,CC BY-SA 3.0,True,False,False,False,True
1271,14840521,2013-02-12 19:46:48,,"<p>While using FFmpegFrameRecorder from JavaCV the JVM crashes with the following message :</p>

<pre><code>#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x00000000699d6a64, pid=4076, tid=308
#
# JRE version: 7.0_13-b20
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.7-b01 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [avformat-54.dll+0xd6a64]  av_read_play+0x4
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# C:\Users\Sagar Jadhav\Documents\NetBeansWorkspace\OpenCV\hs_err_pid4076.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
Java Result: 1
</code></pre>

<hr>

<p>The code is as follows :</p>

<pre><code>package com.opencv.windows;

import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FFmpegFrameGrabber;
import com.googlecode.javacv.FFmpegFrameRecorder;
import com.googlecode.javacv.OpenCVFrameGrabber;
import com.googlecode.javacv.cpp.opencv_core;

public class VideoRecorderDemo
{
    OpenCVFrameGrabber grabber;
    FFmpegFrameRecorder recorder;
    CanvasFrame canvasFrame;

    VideoRecorderDemo() 
    {
        grabber = new OpenCVFrameGrabber(""c:\\sample.mp4"");
        recorder = new FFmpegFrameRecorder(""c:\\sample1.mp4"", 2);
        canvasFrame = new CanvasFrame(""Video Recorder Demo"");      
        canvasFrame.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);

        try
        {
            grabber.start();

            opencv_core.IplImage image;
            while((canvasFrame.isVisible()) &amp;&amp; (image = grabber.grab()) != null)
                canvasFrame.showImage(image);
        }
        catch(Exception e)
        {
            System.out.println(""Error : "" + e.getMessage());
        }

        init();
        startRecording();
        stopRecording();
    }

    void init()
    {
        try
        {
            grabber.start();
            recorder.start();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    void startRecording()
    {
        try
        {
            opencv_core.IplImage image;
            while((canvasFrame.isVisible()) &amp;&amp; (image = grabber.grab()) != null)
            {   
                recorder.record(image);
                canvasFrame.showImage(image);
            }
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    void stopRecording()
    {
        try
        {
            grabber.stop();
            recorder.stop();
            canvasFrame.dispose();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    public static void main(String args[])
    {
        new VideoRecorderDemo();
    }
}
</code></pre>

<p>I am using OpenCV 2.4.3 libs and the ffmpeg libs provided from zeronoe (ffmpeg-20130209-git-969039e-win64-shared)</p>

<p>Thanks </p>
",,2013-02-22 20:20:35,FFmpegFrameRecorder Issue,<java-native-interface><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
1278,14840835,2013-02-12 20:06:10,,"<p>I want to install OpenCV 2.1.0 (on Ubuntu 11.10), but after make (my steps befor make: <a href=""http://www.doc.ic.ac.uk/~strasdat/rss2010videos/INSTALL.txt"" rel=""nofollow"">http://www.doc.ic.ac.uk/~strasdat/rss2010videos/INSTALL.txt</a>) i get:</p>

<pre><code>[ 45%] Built target opencv_lapack
[ 45%] Built target cxcore_pch_dephelp
[ 45%] Built target pch_Generate_cxcore
[ 45%] Built target flann
[ 47%] Built target zlib
[ 50%] Built target cxcore
[ 50%] Built target cv_pch_dephelp
[ 51%] Built target pch_Generate_cv
[ 61%] Built target cv
[ 61%] Built target highgui_pch_dephelp
[ 61%] Built target pch_Generate_highgui
[ 61%] Building CXX object src/highgui/CMakeFiles/highgui.dir/cvcap_ffmpeg.o
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual void CvCapture_FFMPEG::close()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:403:9: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:403:31: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘bool CvCapture_FFMPEG::reopen()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:432:5: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:432:27: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1687) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:435:52: error: ‘av_open_input_file’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:436:5: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:436:27: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:443:5: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:443:28: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual bool CvCapture_FFMPEG::open(const char*)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:468:63: error: ‘av_open_input_file’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:473:11: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:473:33: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1511) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:488:13: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:488:36: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual bool CvCapture_FFMPEG::grabFrame()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:566:54: error: ‘avcodec_decode_video’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In function ‘const char* icvFFMPEGErrStr(int)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:819:10: error: ‘AVERROR_NUMEXPECTED’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:823:10: error: ‘AVERROR_NOFMT’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:825:10: error: ‘AVERROR_IO’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:827:10: error: ‘AVERROR_NOMEM’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In function ‘AVStream* icv_add_video_stream_FFMPEG(AVFormatContext*, AVCodecID, int, int, int, double, int)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:899:7: warning: ‘AVStream* av_new_stream(AVFormatContext*, int)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1711) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:899:26: warning: ‘AVStream* av_new_stream(AVFormatContext*, int)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1711) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In function ‘int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1011:22: error: ‘PKT_FLAG_KEY’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1019:20: warning: ‘int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4388) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1019:72: warning: ‘int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4388) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1031:30: error: ‘PKT_FLAG_KEY’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual void CvVideoWriter_FFMPEG::close()’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1195:20: error: ‘url_fclose’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual bool CvVideoWriter_FFMPEG::open(const char*, int, double, CvSize, bool)’:
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1228:41: error: ‘guess_format’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1251:31: error: ‘av_alloc_format_context’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1292:35: error: ‘av_set_parameters’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1296:35: error: ‘dump_format’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1321:15: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1321:36: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3681) [-Wdeprecated-declarations]
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1358:42: error: ‘URL_WRONLY’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1358:52: error: ‘url_fopen’ was not declared in this scope
.../OpenCV-2.1.0/src/highgui/cvcap_ffmpeg.cpp:1364:25: error: ‘av_write_header’ was not declared in this scope
make[2]: *** [src/highgui/CMakeFiles/highgui.dir/cvcap_ffmpeg.o] Chyba 1
make[1]: *** [src/highgui/CMakeFiles/highgui.dir/all] Chyba 2
make: *** [all] Chyba 2
</code></pre>

<p>I added to cvcap_ffmpeg.cpp file this:</p>

<pre><code>#ifndef UINT64_C
#define UINT64_C(c) (c ## ULL)
#endif

#if LIBAVCODEC_VERSION_MAJOR &lt; 53
#define CodecType AVMediaType

#define CODEC_TYPE_UNKNOWN    AVMEDIA_TYPE_UNKNOWN
#define CODEC_TYPE_VIDEO      AVMEDIA_TYPE_VIDEO
#define CODEC_TYPE_AUDIO      AVMEDIA_TYPE_AUDIO
#define CODEC_TYPE_DATA       AVMEDIA_TYPE_DATA
#define CODEC_TYPE_SUBTITLE   AVMEDIA_TYPE_SUBTITLE
#define CODEC_TYPE_ATTACHMENT AVMEDIA_TYPE_ATTACHMENT
#define CODEC_TYPE_NB         AVMEDIA_TYPE_NB
#endif 
</code></pre>

<p>It solved few problems before.</p>

<p>I tried to install ffmpeg like here -> <a href=""https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide"" rel=""nofollow"">https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide</a>, but it is without change.
Can someone help me with these errors?</p>

<p>Thank</p>
",2013-02-12 20:16:21,2013-03-22 13:52:29,openCV 2.1.0 install + ffmpeg + error,<ubuntu><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
1282,9998195,2012-04-03 17:17:47,,"<p>How can I find the differences between frames when I'm running video on OpenCV? I need to do a loop that checks the changes from frame to frame and displays the result in another window?
Can I  do it in the loop that i attach here? Or is there another way to do it? </p>

<pre><code>while( key != 'x' )  
{  
   frame = cvQueryFrame( capture );
   cvCvtColor(frame, gray, CV_RGB2GRAY);

   //gray_frame = cvQueryFrame( capture );

   //cvCvtColor(frame, gray_frame, CV_BGR2GRAY);

   if(key==27)
        break;

   cvShowImage( ""video"",frame );
   cvShowImage( ""grayvideo"",gray );

   key = cvWaitKey( 1000 / fps );  
}  
cvDestroyWindow( ""video"" );  
cvDestroyWindow( ""grayvideo"" ); 
cvReleaseCapture( &amp;capture );  

return 0;
</code></pre>

<hr>

<p>i get this error on the command window:Compiler did not align stack variables. Libavcodec has been miscompiled
and may be very slow or crash. This is not a bug in libavcodec,
but in the compiler. You may try recompiling using gcc >= 4.2.
Do not report crashes to FFmpeg developers.
OpenCV Error: Assertion failed (src1.size() == dst.size() &amp;&amp; src1.type() == dst.
type()) in unknown function, file ........\ocv\opencv\src\cxcore\cxarithm.cpp
, line 1563</p>

<p>what is wrong maby the maby the size of depth?
how can i fix it? or maby something wrong with the code?
thanks a lot for your help</p>
",2012-10-06 12:50:37,2014-01-15 15:56:13,How to find the differences between frames using OpenCV?,<opencv>,,,CC BY-SA 3.0,True,False,False,False,True
1305,15803421,2013-04-04 05:48:32,,"<p>I hate to sound like a n00b but I have been trying to figure this out for several hours now and could really use some help. I have successfully been able to use FFmpeg and OpenCV in my Android app by using javacv.jar and javacpp.jar provided <a href=""https://code.google.com/p/javacv/downloads/detail?name=javacv-0.4-cppjars.zip&amp;can=2&amp;q="" rel=""nofollow"">here</a>. This has been working great, but there has been some changes to <a href=""https://code.google.com/p/javacv/source/detail?r=87516e8715d40c73e9e0e7ea65da70e345aa3498"" rel=""nofollow"">javacv</a> and <a href=""https://code.google.com/p/javacpp/source/detail?r=3934c45285d7de75c7c827b3a104cbe89658d6aa"" rel=""nofollow"">javacpp</a> and I need to rebuild these for my app. I have checked out both of these repositories to my home directory. I also have opencv-2.4.4 in my home directory. I was able to compile javacpp and get a jar file by running ""mvn install"" in the javacpp directory. When I try to do this in my javacv directory, I get this error:</p>

<pre><code>[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building JavaCV
[INFO]    task-segment: [install]
[INFO] ------------------------------------------------------------------------
[INFO] [dependency:properties {execution: properties}]
[INFO] [dependency:copy-dependencies {execution: copy-dependencies}]
[INFO] javacpp-0.4.jar already exists in destination.
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 9 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [exec:exec {execution: javacpp}]
Generating source file:     /home/marwfair/javacv/target/classes/com/googlecode/javacv/cpp/jnicvkernels.cpp
Building library file: /home/marwfair/javacv/target/classes/com/googlecode/javacv/cpp/linux- x86_64/libjnicvkernels.so
g++ -I/usr/lib/jvm/java-7-openjdk-amd64/include -I/usr/lib/jvm/java-7-openjdk-amd64/include/linux  -I/usr/local/include /home/marwfair/javacv/target/classes/com/googlecode/javacv/cpp/jnicvkernels.cpp  -msse3 -ffast-math -Wl,-rpath,$ORIGIN/ -march=x86-64 -m64 -Wall -O3 -fPIC -shared -s -o   /home/marwfair/javacv/target/classes/com/googlecode/javacv/cpp/linux-x86_64/libjnicvkernels.so - L/usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/jamvm -Wl,-rpath,/usr/lib/jvm/java-7-openjdk- amd64/jre/lib/amd64/jamvm -ljvm 
In file included from   /home/marwfair/javacv/target/classes/com/googlecode/javacv/cpp/jnicvkernels.cpp:58:0:
/home/marwfair/javacv/target/classes/com/googlecode/javacv/cpp/cvkernels.h:22:33: fatal error:   opencv2/core/core_c.h: No such file or directory
compilation terminated.
</code></pre>

<p>I have read the <a href=""https://code.google.com/p/javacpp/#Instructions_for_Android"" rel=""nofollow"">docs</a> for javacpp for Android and the <a href=""https://code.google.com/p/javacv/"" rel=""nofollow"">docs</a> for javacv. I am running Ubuntu and am pretty new to Maven. Any help would be greatly appreciated. I feel like I am really missing some key points.</p>
",,2013-04-10 03:09:13,Rebuild javacv.jar for Android,<android><javacv><javacpp>,,,CC BY-SA 3.0,True,False,False,False,True
1408,12939015,2012-10-17 16:32:41,,"<p>I'm trying to build project that has dependency to OpenCV. I installed Opencv using macports and when I try to build project, cmake gives the following output:</p>

<pre><code>CMake Error at CMakeLists.txt:47 (FIND_PACKAGE):
  By not providing ""FindOpenCV.cmake"" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by ""OpenCV"", but
  CMake did not find one.

  Could not find a package configuration file provided by ""OpenCV"" with any
  of the following names:

    OpenCVConfig.cmake
    opencv-config.cmake

  Add the installation prefix of ""OpenCV"" to CMAKE_PREFIX_PATH or set
  ""OpenCV_DIR"" to a directory containing one of the above files.  If ""OpenCV""
  provides a separate development package or SDK, be sure it has been
  installed.
</code></pre>

<p>I searched a little bit about this problem and added the following env. variables to my <code>$HOME/.profile</code> file</p>

<pre><code>export DYLD_LIBRARY_PATH=/opt/local/lib:$DYLD_LIBRARY_PATH
export CMAKE_PREFIX_PATH=/opt/local
</code></pre>

<p>without success. I checked and I have all opencv files istalled in /opt/local/lib and /opt/local/include/opencv directories. There is also  <code>OpenCVConfig.cmake</code> in the following path:</p>

<p><code>/opt/local/lib/cmake/OpenCVConfig.cmake</code></p>

<p>How to make cmake know the path where opencv is installed? Previously I've build OpenCV on my own using cmake and installed  into /usr/local and then it worked fine without any other fix. However I had some problems with ffmpeg and right now I switched to using macports.</p>
",,2018-12-05 14:30:55,Compiling using cmake with dependencies installed using macport,<opencv><compilation><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
1434,9009673,2012-01-25 20:20:06,,"<p>I have thousands of small videos in HDTV quality. All with green chroma key.
I need to change green colour for a static image (company logos).</p>

<p>There are several softwares that can change chroma key, but they are only one by one file.
This will take years to be completed.</p>

<p>Is there a software (script) that I can make this automatic?</p>
",,2012-01-25 23:53:24,Chroma key software (script),<opencv><ffmpeg><chromakey>,,,CC BY-SA 3.0,True,False,False,False,True
1440,14854461,2013-02-13 13:14:59,,"<p>I want to read and show a video using opencv. I've recorded with Direct-show, the Video has UYVY (4:2:2) codec, since opencv can't read that format, I want to convert the codec to an RGB color model, I readed about ffmpeg and I want to know if it's possible to get this done with it ? if not if you a suggestion I'll be thankful.</p>
",2013-02-19 15:50:29,2013-02-19 15:50:29,converting a UYVY FFmpeg,<c++><opencv><ffmpeg><directshow><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
1453,15816299,2013-04-04 16:09:52,,"<p>I know there are other questions dealing with FFmpeg usage in OpenCV, but most of them appear to be outdated.</p>

<p>By opening up the makefiles in CMake, I can verify that I've got the <code>WITH_FFMPEG</code> flag on. My output folder for the OpenCV build contains a <code>bin</code> folder, within which are <code>Debug</code> and <code>Release</code> folders, each containing a copy of a .dll file entitled <code>opencv_ffmpeg244.dll</code>. I can step into the source code of OpenCV when I create a VideoWriter and verify that the function pointers to the .dll get filled correctly. That much appears to be working.</p>

<p>If I use the FOURCC code of CV_FOURCC_PROMPT, the following codecs <strong>work properly</strong>:</p>

<ul>
<li>Microsoft Video 1</li>
<li>Intel IYUV codec</li>
<li>Logitech Video (I420)</li>
<li>Cinepak Codec by Radius</li>
<li>Full Frames (Uncompressed)</li>
</ul>

<p>The following codecs <strong>do not work properly</strong> (ie. produce a 0kb video file):</p>

<ul>
<li>Microsoft RLE</li>
</ul>

<p>If my understanding is correct, using FFMPEG should allow for encoding video using a whole bunch of new codecs (x264, DIVX, XVID, and so on). However, none of these appear in the prompt. Manually setting them by their FOURCC codes using the macro <code>CV_FOURCC(...)</code> also doesn't work. For instance, using this: <code>CV_FOURCC('X','2','6','4')</code> produces the message:</p>

<p><code>Could not find encoder for codec id 28: Encoder not found</code></p>

<p>and makes a video file of size 0kb.</p>

<p>Using this: <code>CV_FOURCC('X','V','I','D')</code> produces no error message, and makes a video file of 6kb that will not play in Windows Media Player or VLC.</p>

<p>I tried manually downloaded the Xvid codec from Xvid.org. Once that was installed, it appeared under the VFW selection in the prompt, and the encoding worked properly. So it's close to a solution, but if I try to set the FOURCC code directly, it still fails as above! I have to pick it from the prompt every time. Isn't FFmpeg supposed to include a whole bunch of codecs? If so, why am I manually downloading the codec instead of using the one built into FFmpeg?</p>

<p>What am I missing here? Is there a way to check that FFMPEG is ""enabled""? It seems like the only codecs available in the prompt are VFW codecs, not the FFMPEG ones. The <code>.dll</code> has been built and is sitting in the same folder as the executable, but it appears it's not being used in any way. </p>

<p>Lots of related questions here. Hoping to find somebody knowledgeable about the FFmpeg implementation in OpenCV and with some knowledge of how all of these pieces fit together.</p>
",,2015-12-22 11:25:12,Using OpenCV 2.4.4 with FFmpeg in Windows,<windows><opencv><ffmpeg><codec>,,,CC BY-SA 3.0,True,False,False,False,True
1584,12952624,2012-10-18 10:32:00,,"<p>I am working on a Video analytics application where I have to decode an RTSP stream to give IplImage frames which are then fed into my analytics pipeline.
Now, the OpenCV VideoCapture structure allows me to extract frames from an RTSP stream(i think it uses ffmpeg to do so) but the performance is not so great. It needs to work in real time.</p>

<p>I also went ahead and wrote my own ffmpeg decoder. But just like OpenCv, performance with RTSP streams is not good. Lots of frames are dropped. However, decoding from a local file works fine.I am still working on refining the code though.</p>

<p>What I need help with is this. First, can I use hardware accelerated decoding here to improve performance? My app is supposed to be cross platform, so I might need to use Directx VA(windows) and VAAPI(linux).If yes,then is there any place where I can learn how to implement hardware acceleration in code especially for ffmpeg decoding of h264?</p>
",,2020-07-17 02:37:48,"Hardware Accelerated h264 decoding using ffmpeg, OpenCV",<opencv><ffmpeg><h.264><hardware-acceleration><decoder>,,,CC BY-SA 3.0,True,False,False,False,True
1630,10027517,2012-04-05 11:14:36,,"<p>hey i tried to do subtraction between current frame to previous, (the code attached ) the code running but i get errors and gray window without result the errors i got on command prompt:</p>

<p>Compiler did not align stack variables. Libavcodec has been miscompiled and may be very slow or crash. This is not a bug in libavcodec, but in the compiler. You may try recompiling using gcc >= 4.2. Do not report crashes to FFmpeg developers. OpenCV Error: Assertion failed (src1.size() == dst.size() &amp;&amp; src1.type() == dst. type()) in unknown function, file ........\ocv\opencv\src\cxcore\cxarithm.cpp , line 1563.</p>

<p>someone have an idea? please your help!! thank you</p>

<pre><code>int main()  
{  


int key = 0; 




 CvCapture* capture = cvCaptureFromAVI( ""macroblock.mpg"" ); 
 IplImage* frame = cvQueryFrame( capture );
 IplImage* currframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,1);
 IplImage* destframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,1);

    if ( !capture ) 

{  
    fprintf( stderr, ""Cannot open AVI!\n"" );  
    return 1;  
    }

  int fps = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );

  cvNamedWindow( ""dest"", CV_WINDOW_AUTOSIZE );

  while( key != 'x' )
      {
          frame = cvQueryFrame( capture );
     currframe = cvCloneImage( frame );// copy frame to current
     frame = cvQueryFrame( capture );// grab frame
   cvSub(frame,currframe,destframe);// subtraction between the last frame to cur

          if(key==27 )break;
          cvShowImage( ""dest"",destframe);
           key = cvWaitKey( 1000 / fps );
           }  
       cvDestroyWindow( ""dest"" );
       cvReleaseCapture( &amp;capture );
       return 0;
</code></pre>

<p>}</p>
",2012-06-01 07:49:29,2012-06-01 07:49:29,subtraction frames opencv,<opencv><background-subtraction>,,,CC BY-SA 3.0,True,False,False,False,True
1708,14878133,2013-02-14 15:22:43,,"<p>My ultimate goal is to get meaningful snapshots from MP4 videos that are either 30 min or 1 hour long. ""Meaningful"" is a bit ambitious, so I have simplified my requirements.</p>

<p>The image should be crisp - non-overlapping, and ideally not blurry. Initially, I thought getting a keyframe would work, but I had no idea that keyframes could have overlapping images embedded in them like this:<img src=""https://i.stack.imgur.com/Pxafo.jpg"" alt=""enter image description here""></p>

<p>Of course, some keyframe images look like this and those are much better:</p>

<p><img src=""https://i.stack.imgur.com/qjghg.jpg"" alt=""enter image description here""></p>

<p>I was wondering if someone might have source code to:</p>

<p>Take a sequence of say 10-15 continuous keyframes (jpg or png) and identify the best keyframe from all of them.</p>

<p>This must happen entirely programmatically. I found this paper: <a href=""http://research.microsoft.com/pubs/68802/blur_determination_compressed.pdf"" rel=""nofollow noreferrer"">http://research.microsoft.com/pubs/68802/blur_determination_compressed.pdf</a></p>

<p>and felt that I could ""rank"" a few images based on the above paper, but then I was dissuaded by this link: <a href=""https://stackoverflow.com/questions/4470107/extracting-dct-coefficients-from-encoded-images-and-video"">Extracting DCT coefficients from encoded images and video</a> given that my source video is an MP4. Of course, this confuses me because the input into the system is just a sequence of jpg images.</p>

<p>Another link that is interesting is:</p>

<p><a href=""https://stackoverflow.com/questions/5180327/detection-of-blur-in-images-video-sequences/5180984#5180984"">Detection of Blur in Images/Video sequences</a></p>

<p>However, I am not sure if this will work for ""overlapping"" images.</p>
",2019-11-16 03:31:43,2019-11-16 03:31:43,Programmatically get non-overlapping images from MP4,<image-processing><ffmpeg><imagemagick>,,,CC BY-SA 4.0,False,False,False,False,True
1815,14888665,2013-02-15 05:15:40,,"<p>Can anybody please tell me in what format the video data is saved in opencv, after decoding it by ffmpeg. I mean if it is saved as a matrix then is it 8bit/pixel kind of thing? If anybody can provide some documents or link explaining in details will be a great help. I also tried to google but couldn't find something related.</p>

<p>Thanks.</p>
",,2013-02-15 07:23:48,video data in opencv,<c++><c><opencv><video-capture>,,,CC BY-SA 3.0,True,False,False,False,True
1836,11024843,2012-06-13 23:34:36,,"<p>I am writing a RightScript to install OpenCV-2.3.1 on a linux server. 
I am using FFMPEG package: ffmpeg-0.7-rc1</p>

<p>I am doing exactly whatever I did while installing it manually on the server, but am getting some errors when I try booting the box using the rightscripts. OpenCV installs and works fine when built manually through bash. </p>

<p>The errors I am getting are:</p>

<pre><code>In file included from /OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg.cpp:45:
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'void CvCapture_FFMPEG::close()':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:451: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:451: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'bool CvCapture_FFMPEG::reopen()':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:483: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:483: warning: 'void av_close_input_file(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1533)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:486: error: 'av_open_input_file' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:487: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:487: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:494: error: 'avcodec_thread_init' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:497: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:497: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'bool CvCapture_FFMPEG::open(const char*)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:524: error: 'av_open_input_file' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:529: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:529: warning: 'int av_find_stream_info(AVFormatContext*)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1357)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:541: error: 'avcodec_thread_init' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:550: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:550: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In function 'AVStream* icv_add_video_stream_FFMPEG(AVFormatContext*, CodecID, int, int, int, double, int)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:999: warning: 'AVStream* av_new_stream(AVFormatContext*, int)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1557)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:999: warning: 'AVStream* av_new_stream(AVFormatContext*, int)' is deprecated (declared at /usr/local/include/libavformat/avformat.h:1557)
In file included from /OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg.cpp:45:
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In function 'int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1121: warning: 'int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4077)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1121: warning: 'int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4077)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'void CvVideoWriter_FFMPEG::close()':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1298: error: 'url_fclose' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'bool CvVideoWriter_FFMPEG::open(const char*, int, double, int, int, bool)':
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1411: error: 'av_set_parameters' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1415: error: 'dump_format' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442: warning: 'int avcodec_open(AVCodecContext*, AVCodec*)' is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3380)
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1479: error: 'URL_WRONLY' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1479: error: 'url_fopen' was not declared in this scope
/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1485: error: 'av_write_header' was not declared in this scope
20:09:04: make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.o] Error 1
20:09:04: make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
20:09:04: make: *** [all] Error 2
20:09:04: cd: 23: can't cd to /root/OpenCV-2.3.1/samples/c
20:09:04: chmod: cannot access `build_all.sh': No such file or directory
20:09:04: /var/cache/rightscale/right_scripts/right_scripts_cookbook/recipes/CVScripts___Install_OpenCV: 25: ./build_all.sh: not found
*ERROR&gt; Chef converge failed
*ERROR&gt; An external command returned an error during the execution of Chef:
</code></pre>

<p>I did a google search and I understand that some of the FFMPEG functions are deprecated now. I have tried installing the latest FFMPEG package as well, and I am getting the same errors. Also, I am wondering why I don't get these errors when I install it manually on the server via bash, and only when I install using Rightscripts.</p>
",,2015-06-02 10:01:28,Errors while installing OpenCV and FFMPEG through Rightscripts,<linux><ubuntu><opencv><ffmpeg><rightscale>,,,CC BY-SA 3.0,True,False,False,False,True
1927,10056122,2012-04-07 16:18:19,,"<p>hey i tried to made a histogram that shows frames substraction, the code is running but i got gray window without result.
the message on the command window is:
Compiler did not align stack variables. Libavcodec has been miscompiled
and may be very slow or crash. This is not a bug in libavcodec,
but in the compiler. You may try recompiling using gcc >= 4.2.
Do not report crashes to FFmpeg developers.
OpenCV Error: Assertion failed (images[j].channels() == 1) in unknown function,
file ........\ocv\opencv\src\cv\cvhistogram.cpp, line 137</p>

<p>here is the code someone have an idea?thanks for help.....</p>

<pre><code>int main()  
{  


    int key = 0; 




     CvCapture* capture = cvCaptureFromAVI( ""macroblock.mpg"" ); 
     IplImage* frame = cvQueryFrame( capture );
     IplImage* currframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,3);
     IplImage* destframe = cvCreateImage(cvGetSize(frame),IPL_DEPTH_8U,3);
   IplImage* imgHistogram = 0;
       CvHistogram* hist;



        if ( !capture ) 

    {  
        fprintf( stderr, ""Cannot open AVI!\n"" );  
        return 1;  
        }

      int fps = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );

      cvNamedWindow( ""dest"", CV_WINDOW_AUTOSIZE );
      cvNamedWindow( ""imgHistogram"", CV_WINDOW_AUTOSIZE );

      while( key != 'x' )
          {
              frame = cvQueryFrame( capture );
        currframe = cvCloneImage( frame );
         frame = cvQueryFrame( capture );



              cvSub(frame,currframe,destframe);

               int bins = 256;
            int hsize[] = {bins};
            float max_value = 0, min_value = 0;
            float value;
            int normalized;
             float xranges[] = {0, 256};
            float* ranges[] = {xranges};
          IplImage* planes[] = {destframe};

    hist = cvCreateHist(1, hsize, CV_HIST_ARRAY, ranges,1);
    cvCalcHist(planes, hist, 0, NULL);
    cvGetMinMaxHistValue(hist, &amp;min_value, &amp;max_value);
  //  printf(""Minimum Histogram Value: %f, Maximum Histogram Value: %f\n"", min_value, max_value);
  imgHistogram = cvCreateImage(cvSize(bins, 50),IPL_DEPTH_8U,3);
    cvRectangle(imgHistogram, cvPoint(0,0), cvPoint(256,50), CV_RGB(255,255,255),-1);

      for(int i=0; i &lt; bins; i++){
        value = cvQueryHistValue_1D(hist, i);
        normalized = cvRound(value*50/max_value);
        cvLine(imgHistogram,cvPoint(i,50), cvPoint(i,50-normalized), CV_RGB(0,0,0));

      }



              if(key==27 )break;
              cvShowImage( ""dest"",destframe);
              cvShowImage( ""imgHistogram"",imgHistogram);

               key = cvWaitKey( 1000 / 10 );
               }  
           cvDestroyWindow( ""dest"" );
           cvReleaseCapture( &amp;capture );
           return 0;
}
</code></pre>
",,2013-01-14 14:12:49,histogram on opencv,<opencv>,,,CC BY-SA 3.0,True,False,False,False,True
2009,11035500,2012-06-14 14:40:34,,"<p>I am trying to build OpenCV 2.4.1 with OpenGL support, and it keeps faling. I have OpenGL installed in my Ubuntu 11.04, libs are under /usr/lib/libGL.so as usual. I know my OpenGL installation is correct because I have C++ OpenGL projects that compile, link and run OK.</p>

<p>I run the cmake command as follows, because I want both CUDA and OpenGL support. </p>

<pre><code>/data/OpenCV-2.4.1/build $ cmake -D WITH_OPENGL=ON -D CMAKE_BUILD_TYPE=RELEASE -D WITH_CUDA=ON -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda/ -D BUILD_EXAMPLES=ON -D WITH_TBB=ON ..
</code></pre>

<p>This is the output I get from this, telling me CUDA was properly detected, but OpenGL wasn't</p>

<pre><code>-- General configuration for OpenCV 2.4.1 =====================================
-- 
--   Platform:
--     Host:                        Linux 2.6.35-32-generic x86_64
--     CMake:                       2.8.8
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++ (ver 4.4.4)
--     C++ flags (Release):         -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -O3 -DNDEBUG   -DNDEBUG
--     C++ flags (Debug):           -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     C Compiler:                  /usr/bin/gcc
--     C flags (Release):           -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -Wall -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     Linker flags (Release):      
--     Linker flags (Debug):        
-- 
--   OpenCV modules:
--     To be built:                 calib3d contrib core features2d flann gpu highgui imgproc legacy ml nonfree objdetect photo python stitching ts video videostab
--     Disabled:                    -
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java
-- 
--   GUI: 
--     QT 4.x:                      NO
--     GTK+ 2.x:                    YES (ver 2.22.0)
--     GThread :                    YES (ver 2.26.1)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib64/libz.so (ver 1.2.3.4)
--     JPEG:                        /usr/lib64/libjpeg.so (ver 62)
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.44)
--     TIFF:                        /usr/lib64/libtiff.so (ver 42 - 3.9.4)
--     JPEG 2000:                   /usr/lib64/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib64/libImath.so /usr/lib64/libIlmImf.so /usr/lib64/libIex.so /usr/lib64/libHalf.so /usr/lib64/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.23.100)
--       format:                    YES (ver 54.6.100)
--       util:                      YES (ver 51.54.100)
--       swscale:                   YES (ver 2.1.100)
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 0.10.30)
--       app:                       YES (ver 0.10.30)
--       video:                     YES (ver 0.10.30)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l (ver 0.8.8)
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     YES (ver 3.0 interface 5000)
--     Use Cuda:                    YES (ver 4.2)
--     Use Eigen:                   YES (ver 2.0.15)
-- 
--   NVIDIA CUDA:                   (ver 4.2)
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     NVIDIA GPU arch:             11 12 13 20 21 30
--     NVIDIA PTX archs:            11 12 13 20 21 30
--     NVIDIA GPU features:         11 12 13 20 20 30 20
-- 
--   Python:
--     Interpreter:                 /usr/bin/python (ver 2.6.6)
--     Libraries:                   /usr/lib64/libpython2.6.so (ver 2.6.6)
--     numpy:                       /usr/local/lib/python2.6/dist-packages/numpy/core/include (ver 2.0.0.dev-27befc8)
--     packages path:               lib/python2.6/dist-packages
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/local/texlive/2011/bin/x86_64-linux/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /data/OpenCV-2.4.1/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /data/OpenCV-2.4.1/build
</code></pre>

<p>Any guess what is missing?</p>
",2012-06-14 14:53:37,2018-06-14 19:32:49,Trying to build OpenCV 2.4.1 with OpenGL support,<opengl><opencv><compilation><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
2279,14925664,2013-02-17 20:22:51,,"<p>I'm trying to compile OpenCV libs with TBB support for <a href=""http://www.hardkernel.com/renewal_2011/products/prdt_info.php"" rel=""nofollow"">odroid U2</a> (with Quad core ARM Cortex-A9 MPCore). I have no problem with compile current OpenCV (from github) without TBB. And also I have no problem with compiling TBB libs fron sources - <a href=""http://threadingbuildingblocks.org/sites/default/files/software_releases/source/tbb41_20130116oss_src.tgz"" rel=""nofollow"">tbb41_20130116oss_src.tgz</a> and I have successfully builded TBB libs:</p>

<pre><code>root@odroid:~/src/tbb41_20130116oss/build/linux_armv7l_gcc_cc4.6_libc2.15_kernel3.0.63_release# ls
arena.d                    concurrent_queue.o      frontend.d           libtbbmalloc.so.2        proxy.d               scheduler.o           task_v2.d                   tbb_thread.d
arena.o                    concurrent_queue_v2.d   frontend.o           libtbbmalloc_proxy.so    proxy.o               semaphore.d           task_v2.o                   tbb_thread.o
backend.d                  concurrent_queue_v2.o   governor.d           libtbbmalloc_proxy.so.2  queuing_mutex.d       semaphore.o           tbb.def                     tbbmalloc.d
backend.o                  concurrent_vector.d     governor.o           market.d                 queuing_mutex.o       spin_mutex.d          tbb_function_replacement.d  tbbmalloc.def
backref.d                  concurrent_vector.o     itt_notify.d         market.o                 queuing_rw_mutex.d    spin_mutex.o          tbb_function_replacement.o  tbbmalloc.o
backref.o                  concurrent_vector_v2.d  itt_notify.o         mutex.d                  queuing_rw_mutex.o    spin_rw_mutex.d       tbb_main.d                  tbbmallocproxy.def
cache_aligned_allocator.d  concurrent_vector_v2.o  itt_notify_malloc.d  mutex.o                  reader_writer_lock.d  spin_rw_mutex.o       tbb_main.o                  tbbvars.csh
cache_aligned_allocator.o  condition_variable.d    itt_notify_malloc.o  observer_proxy.d         reader_writer_lock.o  spin_rw_mutex_v2.d    tbb_misc.d                  tbbvars.sh
concurrent_hash_map.d      condition_variable.o    large_objects.d      observer_proxy.o         recursive_mutex.d     spin_rw_mutex_v2.o    tbb_misc.o                  version_string.ver
concurrent_hash_map.o      critical_section.d      large_objects.o      pipeline.d               recursive_mutex.o     task.d                tbb_misc_ex.d
concurrent_monitor.d       critical_section.o      libtbb.so            pipeline.o               rml_tbb.d             task.o                tbb_misc_ex.o
concurrent_monitor.o       dynamic_link.d          libtbb.so.2          private_server.d         rml_tbb.o             task_group_context.d  tbb_statistics.d
concurrent_queue.d         dynamic_link.o          libtbbmalloc.so      private_server.o         scheduler.d           task_group_context.o  tbb_statistics.o
root@odroid:~/src/tbb41_20130116oss/build/linux_armv7l_gcc_cc4.6_libc2.15_kernel3.0.63_release#
</code></pre>

<p>I can compile my own programm with g++ using this TBB libs, but I can't configure OpenCV to see this TBB libs:</p>

<pre><code>root@odroid:~/src/work/opencv/release# cmake -D CMAKE_BUILD_TYPE=RELEASE -D  WITH_TBB=ON -D CMAKE_INSTALL_PREFIX=/usr/local ..
-- Detected version of GNU GCC: 46 (406)
-- Found OpenEXR: /usr/lib/libIlmImf.so
-- checking for module 'gstreamer-app-0.10'
--   package 'gstreamer-app-0.10' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'tbb'
--   package 'tbb' not found
[...]
</code></pre>

<p>could you explain how I can do this? Thank you!</p>
",2014-02-14 14:00:30,2014-02-14 14:00:30,"OpenCV configure with TBB for ARM (Ubuntu, 3.0.63)",<opencv><arm><tbb><odroid>,,,CC BY-SA 3.0,True,False,False,False,True
2439,11073589,2012-06-17 18:02:56,,"<p>I am trying to setup OpenCV v2.4.1 with FFMPEG v0.11 support on Scientific Linux SL release 5.0 (Boron), and I am running into a problem with a missing file that seems completely undocumented. The error I am getting is as follows:</p>

<pre><code>-- Install configuration: ""Release""

-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv/cv.h
-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv/cxmisc.h
-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv/cvwimage.h
-- Up-to-date: /home/s18/s1138832/OpenCV/include/opencv2/opencv.hpp
CMake Error at modules/core/cmake_install.cmake:63 (FILE):
file INSTALL cannot find file
  ""/home/s18/s1138832/OpenCV/lib/libopencv_core.so.2.4.1"" to install.
Call Stack (most recent call first):
  modules/cmake_install.cmake:57 (INCLUDE)
  cmake_install.cmake:56 (INCLUDE)
</code></pre>

<p>I honestly don't know where to begin troubleshooting this at this point. I successfully installed without ffmpeg a few days ago, but now I can't even install with ffmpeg support set to off.</p>

<p>The files that link to the missing library are:</p>

<pre><code>lrwxrwxrwx 1 s1138832 s18      21 Jun 17 18:26 libopencv_core.so -&gt;    libopencv_core.so.2.4
lrwxrwxrwx 1 s1138832 s18      23 Jun 17 18:26 libopencv_core.so.2.4 -&gt; libopencv_core.so.2.4.1
</code></pre>

<p>Any advice or prods in the right direction would be much appreciated. I would also be happy to provide more info on whatever interesting details I may have omitted. </p>

<p>UPDATES: This website seems to have the same error, but I can't read it and translations patchy - <a href=""http://www.opencv.org.cn/forum/viewtopic.php?f=1&amp;t=15664"" rel=""nofollow"">http://www.opencv.org.cn/forum/viewtopic.php?f=1&amp;t=15664</a> ( <a href=""http://translate.google.com/translate?sl=auto&amp;tl=en&amp;js=n&amp;prev=_t&amp;hl=en&amp;ie=UTF-8&amp;layout=2&amp;eotf=1&amp;u=http%3A%2F%2Fwww.opencv.org.cn%2Fforum%2Fviewtopic.php%3Ff%3D1%26t%3D15664&amp;act=url"" rel=""nofollow"">http://translate.google.com/translate?sl=auto&amp;tl=en&amp;js=n&amp;prev=_t&amp;hl=en&amp;ie=UTF-8&amp;layout=2&amp;eotf=1&amp;u=http%3A%2F%2Fwww.opencv.org.cn%2Fforum%2Fviewtopic.php%3Ff%3D1%26t%3D15664&amp;act=url</a> )</p>

<p>libopencv_core.so.2.4.1 exists after ""make"", but ""make install"" deletes it somehow. I copied it and added it again, but it didn't change anything</p>
",2012-06-18 11:39:55,2017-12-08 13:19:51,OpenCV libopencv_core.so.2.4.1 File Not Found,<opencv><ffmpeg><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
2482,14943995,2013-02-18 19:37:23,,"<p>I have videos which are grayscale (x-ray) ... 
the problem is when I read and write the videos the pixel value change !!! 
I print the pixel values as a gray and as BGR and I got values in all of them ... 
I read the video then I write it using openCV then I re print the pixel value and I see different in the pixel values !!! </p>

<p>I am using openCV 2.4.3 with FFMPEG 0.11 on MAC 10.6.8 </p>

<p>why the pixel value changed ? ... how can I read and write the video without changing the pixel value? 
BTW: the original videos has been written in windows using FFMPEG with YUV240 pixel format ! </p>

<p>Thanks in Advance :D</p>
",2013-02-28 19:30:33,2013-04-13 03:14:19,pixel value changed after rewrite the video,<video><opencv><colors><osx-snow-leopard><pixel>,,,CC BY-SA 3.0,True,False,False,False,True
2533,15904443,2013-04-09 14:17:51,,"<p>This may seem like an issue related to a special version of OpenCV. However, when I have searched nearly everywhere and specially StackOverFlow, no reasonable answer was found.</p>

<p>I am trying to load a video file with ffmpeg in OpenCV using VideoCapture handle. The file is loaded if it is the tree.avi sample movie in the OpenCV samples directory, but every other avi file leads to the following error:</p>

<blockquote>
  <p>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:526)</p>
</blockquote>

<p>The hpp file seems to be the file where the error is detected and is not the file containing the error. I can only assume that ffmpeg is not compatible with OpenCV and either I should start looking for another library to open video files or I should assume that OpenCV works only for its own samples. If anyone has any idea, please share. Should I use another library to open all different kinds of files, formats with encodings instead of OpenCV or not?</p>
",2013-04-09 14:30:04,2013-07-22 08:08:31,OpenCV Video Capture Not Loading Files,<c++><opencv><computer-vision><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
2586,14954852,2013-02-19 10:09:51,,"<p>I'm a complete newbie to C. I'm from PHP background, but it so happens that the code that I wrote in PHP needs to be converted to C. It was Java at first, but now the requirement is C.</p>

<p>After going through some tutorials, I got the basics of C and coded the following to run <code>ffmpeg.exe</code> from within a c program</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main()
{

    char *app = ""D:\\ffmpeg\\bin\\ffmpeg.exe -i"";
    char *input = "" D:\\video.mpg"";
    char *output = "" D:\\frames\\image%d.jpg"";
    char *param = "" -r 10"";
    char str[300];    
    snprintf(str, sizeof str, ""%s%s%s%s"", app, input, param, output);
    // str contains ""D:\ffmpeg\bin\ffmpeg.exe -i D:\video.mpg -r 10 D:\frames""\image%d.jpg
    system(str); // &lt;-- working fine, frames are being extracted
    /*
        do something here to store each extracted frame in an array
        so that the array contains image1.jpg, image2.jpg, image3.jpg...and so on
    */
    getch();
    return 0;
}
</code></pre>

<p>On compiling and running the program, I'm getting the frames in the output folder as expected. The issue is I want to store each frame name inside an array as it gets extracted. So far, I haven't been able to come across a similar issue and so I decided to create a new thread for it. I'm hoping this is possible and would appreciate a nudge in the right direction.</p>
",2013-02-19 10:38:35,2013-02-19 10:38:35,Store extracted frame name inside an array - ffmpeg,<c><arrays><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
2787,14975443,2013-02-20 08:38:36,,"<p>I build opencv with ffmpeg support and this is a snippet of my code to read a video and iterate through the frames. </p>

<pre><code>if (argc != 3) {
    std::cout&lt;&lt;""Usage: exe input_video_filename skip_frames \n""&lt;&lt;std::endl;
    return 0;
}
char* video_fn = argv[1];
int skip_frames = atoi(argv[2]);
VideoCapture cap;
if(!cap.open(video_fn))
{
    std::cout&lt;&lt;""error reading video""&lt;&lt;video_fn&lt;&lt;std::endl;
    return -1;
}
Mat frame,gray;
int i = 0;
double score = 0;
vector&lt;double&gt; scores;
while(true)
{
    if(!**cap.retrieve(frame)**)
    {
        std::cout&lt;&lt;""error retrieve frame""&lt;&lt;std::endl;
        break;
    }
    if(i%skip_frames)
    {
        cvtColor(frame,gray,CV_BGR2GRAY);
        double sc = compute_cpbdm(gray);
        std::cout&lt;&lt;sc&lt;&lt;std::endl;
        scores.push_back(sc);
    }

}
</code></pre>

<p>The program succeed to read the video at line cap.open(video_fn) but fail to retrieve frame from VideoCapture at the line if(!cap.retrieve(frame)). I tried with mp4 and avi but it always fails.Does anyone encountered similar problem? How to solve it? Many thanks!</p>
",,2013-02-20 11:06:56,Why opencv can open video but failed to retrieve frame from it?,<video><opencv><ffmpeg><video-streaming><computer-vision>,,,CC BY-SA 3.0,True,False,False,False,True
2869,9141817,2012-02-04 15:08:24,,"<p><strong>Preface</strong>.
I wrote a small application in C that plays a video file with OpenCV library.
My Development machine is Ubuntu 10.04, but the customer's OS is OpenSuse 12.1
I've built OpenCV 2.1 by using cmake-gui and ensured that all required libraries were present (like described here <a href=""http://www.shiffman.net/2011/01/23/how-to-build-opencv-static-libraries-mac-os-x/"" rel=""nofollow"">http://www.shiffman.net/2011/01/23/how-to-build-opencv-static-libraries-mac-os-x/</a>)
I've build my application with cmake-gui too (as described here <a href=""http://opencv.willowgarage.com/wiki/Getting_started"" rel=""nofollow"">http://opencv.willowgarage.com/wiki/Getting_started</a>)</p>

<p><strong>Problem</strong>.
It works fine on my computer. However, on the customer's machine I get ""error loading shared libraries..."". When I run ""ldd video_player"", it cannot find libavformat.so.52, libavcodec.so.52 and libstdc++.so.6. Is there a way to include these libraries with the player so that everything works out of the box?</p>

<p><strong>Epilogue</strong>. I'm guessing there is a simple solution for that. However, having a strong background in Java and PHP, I'm a total newbie in C and the deadline is approaching quite fast. I tried to accomplish this task using ffmpeg, but it gave a lot of nightmares, so I just stick to OpenCV to make it work asap.</p>

<p>Thanks in advance!</p>
",,2012-02-04 15:13:11,How to compile OpenCV application with static libraries,<c><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
3043,14994213,2013-02-21 03:49:09,,"<p>My opencv program success to read mp4 video files but failed to read some rmvb files and it gives the following error:</p>

<pre><code>[rm @ 0x821f80] Invalid stream index 2 for index at pos 974024349
video has 300480frames
[rv40 @ 0xbac8a0] Internal error, picture buffer overflow
Aborted (core dumped)
</code></pre>

<p>Is this a bug of opencv?Anyone encounted similar problem?Thanks for any helps!</p>

<p><strong>EDIT：</strong>
I found my FFMPEG indeed support rmvb using <code>ffmpeg -codecs | grep RealVideo</code>.But why this still fails?</p>
",2013-03-12 02:21:55,2013-03-12 02:21:55,Why opencv failed to read a rmvb video?,<video><opencv><ffmpeg><video-streaming>,,,CC BY-SA 3.0,True,False,False,False,True
3083,15958593,2013-04-11 20:48:57,,"<p>When i run my program in opencv c++ visual studio 2010 the program run but i show the following error's , What this error want to install further more ?</p>

<pre><code>'WK01.exe': Loaded 'C:\Users\Sheikh\Documents\Visual Studio 2010\Projects\WK01\Debug\WK01.exe', Symbols loaded.
'WK01.exe': Loaded 'C:\Windows\System32\ntdll.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Program Files\Alwil Software\Avast5\snxhk.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\kernel32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\KernelBase.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\opencv_core244d.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msvcp100d.dll', Symbols loaded.
'WK01.exe': Loaded 'C:\Windows\System32\msvcr100d.dll', Symbols loaded.
'WK01.exe': Loaded 'C:\Windows\System32\opencv_highgui244d.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\user32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\gdi32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\lpk.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\usp10.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msvcrt.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\ole32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\rpcrt4.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\oleaut32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\advapi32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\sechost.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514_none_ec83dffa859149af\comctl32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\avifil32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\winmm.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msacm32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msvfw32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\shell32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\shlwapi.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\avicap32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\version.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\imm32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\msctf.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\opencv_ffmpeg244.dll', Binary was not built with debug information.
'WK01.exe': Loaded 'C:\Windows\System32\wsock32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\ws2_32.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\nsi.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\cryptbase.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\uxtheme.dll', Cannot find or open the PDB file
'WK01.exe': Loaded 'C:\Windows\System32\dwmapi.dll', Cannot find or open the PDB file
The program '[4156] WK01.exe: Native' has exited with code 0 (0x0).
</code></pre>
",,2013-04-12 05:10:10,VS 2010 showing error but run the program,<visual-studio-2010><visual-c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
3317,12131252,2012-08-26 15:16:28,,"<p>I am using opencv, but it is very pick with video types that it will open. I have version 2.4 of opencv and it apparently has ffmpeg support built in, though it does not open any movie files correctly, obj.grab() returns false and retrieve(frame,0) return NULL. So it seems to me that FFmpeg is not working correctly, is there something I need to do to turn it on, from internet searches people seem to suggest that from 2.4 onward it is a non-issue(though apparently not). Any help, all the other threads seem to just aout stop short of the answer for me. </p>

<p>(windows 7, Visual studio 2010, opencv 2.4) </p>
",,2012-08-26 22:25:42,ffmpeg in opencv 2.4,<video><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
3440,13112168,2012-10-28 19:19:43,,"<p>I know there has already been a bunch of questions similar to this, but unfortunately none of them could help. So, here's the problem (I'm quite new to OpenCV).</p>

<p>Trying to simply open and show an AVI file. The file exists and the path to it is correct.</p>

<pre><code>int main( int argc, char** argv )
{
    VideoCapture cap;

    if(!cap.open(argv[1]))
    {
        printf(""Failed to open %s\n"", argv[1]);
        return -1;
    }

    namedWindow(""Video output"", 1);

    for(;;)
    {
        Mat curFrame;

        cap &gt;&gt; curFrame;

        imshow(""Video output\n"", curFrame);

        if(waitKey(30) &gt;= 0)
            break;
    }

    return 0;
}
</code></pre>

<p>No errors appear, open() returns false.</p>

<p>I have previously converted the file with mencode. Here is the information about the file:</p>

<pre><code>boris@boris-ubuntu:~$ ffmpeg -i out.avi 
ffmpeg version 0.8.3-4:0.8.3-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav developers
  built on Jun 12 2012 16:37:58 with gcc 4.6.3
*** THIS PROGRAM IS DEPRECATED ***
This program is only provided for compatibility and will be removed in a future release. Please use avconv instead.
Input #0, avi, from 'out.avi':
  Metadata:
    encoder         : MEncoder svn r34540 (Ubuntu), built with gcc-4.6
  Duration: 00:00:01.00, start: 0.000000, bitrate: 265458 kb/s
    Stream #0.0: Video: rawvideo, yuv420p, 1280x720, PAR 1:1 DAR 16:9, 24 tbr, 24 tbn, 24 tbc
At least one output file must be specified
</code></pre>

<p>As far as I can understand, the video format yuv420p, which is supported by OpenCV. </p>

<p>Any suggestions?</p>

<p>Thanks!</p>
",,2012-10-29 20:33:37,OpenCV fails to read AVI file,<c++><video><opencv><avi>,,,CC BY-SA 3.0,True,True,False,False,True
3472,15031183,2013-02-22 18:52:03,,"<p>After reading <a href=""http://en.wikipedia.org/wiki/Raw_image_format"" rel=""nofollow noreferrer"">Wikipedia page</a> of Raw image format which is the digital negative of any image.</p>

<blockquote>
  <p>To be viewed or printed, the output from a camera's image sensor has
  to be processed, that is, converted to a photographic rendering of the
  scene, and then stored in a standard raster graphics format such as
  JPEG. This processing, whether done in-camera or later in a raw-file
  converter, involves a number of operations, typically including</p>
</blockquote>

<p>I have some .raw files grabbed from my Logitech c920 using <a href=""http://linuxtv.org/downloads/v4l-dvb-apis/capture-example.html"" rel=""nofollow noreferrer"">v4l2 example</a> but when I display the image it looks like this:
<img src=""https://i.stack.imgur.com/a41a3.png"" alt=""raw frame file""> a raw image where in other frames I can see my shadow</p>

<p>Does anyone knows how to process such files to see the complete frame ?</p>

<p><a href=""https://docs.google.com/file/d/0B-IBanqetxwNNzJYMVk0bEk1Nms/edit?usp=sharing"" rel=""nofollow noreferrer"">Here is a link to the original .raw file</a></p>
",2013-02-22 21:13:17,2013-02-23 04:19:53,Processing .Raw images using ffmpeg or OpenCV,<c><opencv><image-processing><ffmpeg><v4l2>,,,CC BY-SA 3.0,True,False,False,False,True
3513,13119271,2012-10-29 09:55:07,,"<p>I am using OpenCV and FFMPEG to capture frames from a network camera using RTSP. The point is that OpenCV successfully loads the FFMPEG .dll but icvCreateFileCapture_FFMPEG_p returns false in the following code of cap_ffmpeg.cpp:</p>

<pre><code>virtual bool open( const char* filename )
{
    close();

    icvInitFFMPEG();
    if( !icvCreateFileCapture_FFMPEG_p )
        return false;
    ffmpegCapture = icvCreateFileCapture_FFMPEG_p( filename );
    return ffmpegCapture != 0;
}
</code></pre>
",2012-10-29 10:14:44,2012-10-29 10:38:55,Error while capturing video via RTSP from a network camera using OpenCV and FFMPEG,<opencv><ffmpeg><rtsp>,,,CC BY-SA 3.0,True,False,False,False,True
3703,13131024,2012-10-29 23:14:08,,"<p>I am trying to build an app using opencv and pygame. These two libs have been installed with macports. I also installed py2app in the macports python.
I am running a simple py2app script</p>

<pre><code>from setuptools import setup

setup(
    app = [
        '/full/path/to/my_script.py',
    ],
    options={
        ""py2app"":{
            'argv_emulation': True, 
        }
    },
    setup_requires=['py2app']
)
</code></pre>

<p>Unfortunately, py2app fails with the following error :""ValueError: New Mach-O header is too large to relocate""</p>

<p>Is it possible to make an app bundle with opencv and macports?</p>

<p>Thanks for your help</p>

<p>Update:</p>

<p>Here is the answer of ronaldoussoren whoi is the py2app developper:</p>

<blockquote>
  <p>Shared libraries on OSX contain an absolute path to their location,
  and likewise all used libraries are also mentioned using an absolute
  path. Py2app uses macholib to rewrite those mentions to relative paths
  starting with '@executable_path'. For libraries that are located in
  /opt/local the new path requires more space than the old one, hence
  the error message. One way to ensure that there is enough space is the
  linker flag ""headerpad_max_install_names"". I don't know how to tell
  darwinports to add this flag when building opencv.</p>
</blockquote>

<p>Please also note that I've a similar issue with pyinstaller.</p>

<p>I've tried to modify the opencv Portfile without any changes. I don't really know where to add this linker flag.</p>

<p>Any idea how to fix it?</p>

<p>Update: Here is my Portfile</p>

<pre><code># -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id: Portfile 99165 2012-10-28 22:56:03Z jeremyhu@macports.org $

PortSystem                      1.0
PortGroup                       cmake 1.0

name                            opencv
version                         2.4.2
revision                        2
categories                      graphics science
license                         BSD
platforms                       darwin
maintainers                     nomaintainer

description                     Intel(R) Open Source Computer Vision Library

long_description                opencv is a library that is mainly aimed at real time \
                                computer vision. Some example areas would be \
                                Human-Computer Interaction (HCI), Object Identification, \
                                Segmentation and Recognition, Face Recognition, Gesture \
                                Recognition, Motion Tracking, Ego Motion, Motion \
                                Understanding, Structure From Motion (SFM), and Mobile \
                                Robotics.

homepage                        http://opencv.willowgarage.com/wiki/
master_sites                    sourceforge:project/opencvlibrary/opencv-unix/${version}
use_bzip2                       yes
distname                        OpenCV-${version}

checksums                       rmd160  496964503629b0ff4432fbdd276837ab3f134411 \
                                sha256  690023811e03e21df996291392fcf78e43e42ef557b9307503c74c74b4272c28

depends_build-append            port:pkgconfig

depends_lib-append              port:zlib \
                                path:lib/libavcodec.dylib:ffmpeg \
                                port:libpng \
                                port:tiff \
                                port:jasper \
                                port:jpeg \
                                port:bzip2 \
                                port:openexr \
                                port:ilmbase \
                                port:eigen3

patchfiles                      patch-fix_dirname_case.diff \
                                patch-install_name.diff

configure.args-append           -DBUILD_NEW_PYTHON_SUPPORT=OFF \
                                -DBUILD_EXAMPLES=ON \
                                -DINSTALL_C_EXAMPLES=ON \
                                -DBZIP2_LIBRARIES=${prefix}/lib/libbz2.dylib \
                                -DZLIB_LIBRARY=${prefix}/lib/libz.dylib \
                                -DWITH_OPENEXR=ON \
                                -DWITH_1394=OFF \
                                -DWITH_EIGEN=ON \
                                -DEIGEN_INCLUDE_PATH=${prefix}/include/eigen3 \
                                -DBUILD_JASPER=OFF \
                                -DBUILD_JPEG=OFF \
                                -DBUILD_PNG=OFF \
                                -DBUILD_TIFF=OFF \
                                -DBUILD_ZLIB=OFF
configure.ldflags-append        ""-Wl,-headerpad_max_install_names""

# gcc-4.0 exits with a bus error
if {${configure.compiler} == ""gcc-4.0""} {
    configure.compiler gcc-4.2
    if {![file executable ${configure.cc}]} {
        depends_build-append port:apple-gcc42
        depends_skip_archcheck-append apple-gcc42
        configure.compiler apple-gcc-4.2
    }
}

platform darwin {
    if {${os.major} &lt;= 9} {
        # Video Decode Acceleration Framework is not available
        patchfiles-append       patch-highgui_CMakeLists.txt.diff
    }
}

post-destroot {
    xinstall -d ${destroot}${prefix}/lib/cmake
    move ${destroot}${prefix}/share/OpenCV/OpenCVConfig-version.cmake \
        ${destroot}${prefix}/share/OpenCV/OpenCVConfig.cmake \
        ${destroot}${prefix}/lib/cmake/
}

variant dc1394 description {Use libdc1394 for FireWire camera. Breaks compatibility with Apple iSight FireWire camera.} {
    depends_lib-append          port:libdc1394
    configure.args-delete       -DWITH_1394=OFF
    configure.args-append       -DWITH_1394=ON \
                                -DHAVE_1394=ON
}

variant qt4 description {Use qt4 backend for graphical interface.} {
    PortGroup                   qt4 1.0
    configure.args-append       -DWITH_QT=ON
}

variant python26 conflicts python27 description {Add Python 2.6 bindings} {
    depends_lib-append          port:python26 \
                                port:py26-numpy
    configure.args-delete       -DBUILD_NEW_PYTHON_SUPPORT=OFF
    configure.args-append       -DINSTALL_PYTHON_EXAMPLES=ON \
                                -DBUILD_NEW_PYTHON_SUPPORT=ON \
                                -DPYTHON_EXECUTABLE=${prefix}/bin/python2.6 \
                                -DPYTHON_LIBRARY=${prefix}/lib/libpython2.6.dylib \
                                -DPYTHON_INCLUDE_DIR=${frameworks_dir}/Python.framework/Versions/2.6/Headers \
                                -DPYTHON_PACKAGES_PATH=${frameworks_dir}/Python.framework/Versions/2.6/lib/python2.6/site-packages
}

variant python27 conflicts python26 description {Add Python 2.7 bindings} {
    depends_lib-append          port:python27 \
                                port:py27-numpy
    configure.args-delete       -DBUILD_NEW_PYTHON_SUPPORT=OFF
    configure.args-append       -DINSTALL_PYTHON_EXAMPLES=ON \
                                -DBUILD_NEW_PYTHON_SUPPORT=ON \
                                -DPYTHON_EXECUTABLE=${prefix}/bin/python2.7 \
                                -DPYTHON_LIBRARY=${prefix}/lib/libpython2.7.dylib \
                                -DPYTHON_INCLUDE_DIR=${frameworks_dir}/Python.framework/Versions/2.7/Headers \
                                -DPYTHON_PACKAGES_PATH=${frameworks_dir}/Python.framework/Versions/2.7/lib/python2.7/site-packages
    configure.ldflags-append    ""-Wl,-headerpad_max_install_names""
}

variant tbb description {Use Intel TBB} {
    depends_lib-append          port:tbb
    configure.args-append       -DWITH_TBB=ON \
                                -DHAVE_TBB=ON \
                                -DTBB_INCLUDE_DIRS=${prefix}/include \
                                -DOPENCV_LINKER_LIBS=""-ltbb -ltbbmalloc""
}

livecheck.type                  sourceforge
livecheck.name                  opencvlibrary
livecheck.regex                 /OpenCV-(\[0-9a-z.\]+)${extract.suffix}
</code></pre>

<hr>

<p>Update : The macport team worked on the problem but unfortunately their fix don't solve my problem. See <a href=""http://trac.macports.org/ticket/36841"" rel=""nofollow"">http://trac.macports.org/ticket/36841</a></p>
",2013-01-24 19:50:35,2013-02-23 13:07:42,py2app error for opencv/macports app. How to compile opencv with headerpad_max_install_names flag?,<python><macos><opencv><macports><py2app>,,,CC BY-SA 3.0,True,False,False,False,True
3778,13137218,2012-10-30 10:38:07,,"<p>How can I dump a raw h264 from a network camera into a MP4 or AVI file? I am retrieving the H264 packets from a network camera.</p>

<p>Thanks,</p>
",,2012-12-06 13:25:27,h264 to MP4 file container in C++,<opencv><ffmpeg><h.264><mp4><avi>,,,CC BY-SA 3.0,True,False,False,False,True
3848,12175707,2012-08-29 10:18:42,,"<p>I have openCV 2.3 and I am using Visual Studio 2010.</p>

<pre><code>    ...
VideoCapture cap;
cap.open(""Video.avi"");
if( !cap.isOpened() )
{

    puts(""***Could not initialize capturing...***\n"");
    system(""Pause"");
    return 0;
} ...
</code></pre>

<p>This is a code snippet of the while program.
I added a system command in order to hold the output window. I got no errors while building the project but when I began debugging, the output window had this output :</p>

<pre><code>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:477)
***Could not initialize capturing...***

Press any key to continue . . .
</code></pre>

<p>I checked this directory, the file is available but then why is it that it doesn't open ?
I even have the opencv_ffmpeg.dll in the bin folder with its path added to System Paths.
Still I get this same error ....
I even checked first 3 pages of google search I did but could not find an answer. 
So please help!</p>

<hr>

<p>The error which I mentioned is because, there has been an error in opening the .avi file ...
This is the part of code in cap_ffmpeg_impl.hpp -</p>

<pre><code>int err = av_open_input_file(&amp;ic, _filename, NULL, 0, NULL);
if (err &lt; 0) {
    CV_WARN(""Error opening file""); //Error part
    goto exit_func;
}
</code></pre>

<p>This file is available at D:\OpenCV2.3\opencv\modules\highgui\src. When I make any changes in this file, they do not reflect on the output window and when I removed this file, even then it did not give any error!:O 
I am not able to understand what is happening ....??</p>
",2012-08-31 04:17:28,2013-03-30 11:01:57,Unknown reason of an error while debugging an Opencv project using opencv2 functions,<visual-studio-2010><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
3860,10225403,2012-04-19 09:39:34,,"<p>Currently I am using this command to extract the images:</p>
<pre><code>ffmpeg -i input.mp4 output_%03d.jpeg
</code></pre>
<p>But how can I improve the JPEG image quality?</p>
",2020-09-24 22:23:01,2020-09-24 22:23:01,How can I extract a good quality JPEG image from a video file with ffmpeg?,<video><ffmpeg><graphics><computer-vision>,,,CC BY-SA 4.0,False,False,False,False,True
3910,11204914,2012-06-26 10:00:22,,"<p>I'm from a mechE background, so I might be missing something completely trivial. I installed openCV2.4.1 on my mac (OS X 10.7 Lion) using <a href=""http://www.shiffman.net/2011/01/23/how-to-build-opencv-static-libraries-mac-os-x/"" rel=""nofollow"">this</a>, using Unix makefiles. Every goes correctly with <code>make</code> and <code>sudo make install</code>, all the .dylib files are in the <em>lib</em> folder, but I can't find the header files (""cv.h"" etc.) anywhere. The <em>include</em> folder has only cmake_install.cmake, Makefile files, and <em>CMakeFiles</em> folder.</p>

<p>I had openCV 2.3.1 installed via homebrew before, and the headers were all in the include, so I had to add that path to XCode in <strong>Library Search Paths</strong>. Now I'm not sure how to use the library without it...?</p>

<p><em>EDIT</em></p>

<p>I'm using the CMake 2.8.4 GUI. There it specifies ""Where is the source code"" and ""Where to build the binaries"". I'm looking in the folder I specified for ""where to build the binaries"". Now that you mentioned it, I checked the source code folder and found the headers, but of course there are no .dylib files there....</p>

<p>Anyhow, I ran CMake again (to another binaries folder, but should be otherwise the same output) to get the output, here it is:</p>

<pre><code>The CXX compiler identification is Clang
The C compiler identification is GNU
Check for working CXX compiler: /usr/bin/c++
Check for working CXX compiler: /usr/bin/c++ -- works
Detecting CXX compiler ABI info
Detecting CXX compiler ABI info - done
Checking whether C compiler has -isysroot
Checking whether C compiler has -isysroot - yes
Checking whether C compiler supports OSX deployment target flag
Checking whether C compiler supports OSX deployment target flag - yes
Check for working C compiler: /usr/bin/gcc
Check for working C compiler: /usr/bin/gcc -- works
Detecting C compiler ABI info
Detecting C compiler ABI info - done
Extracting svn version, please wait...
SVNVERSION: exported
Looking for sys/types.h
Looking for sys/types.h - found
Looking for stdint.h
Looking for stdint.h - found
Looking for stddef.h
Looking for stddef.h - found
Check size of off64_t
Check size of off64_t - failed
Looking for fseeko
Looking for fseeko - found
Looking for unistd.h
Looking for unistd.h - found
Looking for assert.h
Looking for assert.h - found
Looking for fcntl.h
Looking for fcntl.h - found
Looking for io.h
Looking for io.h - not found
Looking for jbg_newlen
Looking for jbg_newlen - not found
Looking for mmap
Looking for mmap - found
Looking for search.h
Looking for search.h - found
Looking for string.h
Looking for string.h - found
Looking for unistd.h
Looking for unistd.h - found
checking for module 'libdc1394-2'
  package 'libdc1394-2' not found
checking for module 'libdc1394'
  package 'libdc1394' not found
checking for module 'libavcodec'
  package 'libavcodec' not found
checking for module 'libavformat'
  package 'libavformat' not found
checking for module 'libavutil'
  package 'libavutil' not found
checking for module 'libswscale'
  package 'libswscale' not found
Looking for libavformat/avformat.h
Looking for libavformat/avformat.h - not found
Looking for ffmpeg/avformat.h
Looking for ffmpeg/avformat.h - not found
CUDA_TOOLKIT_ROOT_DIR not found or specified
Could NOT find CUDA (missing:  CUDA_TOOLKIT_ROOT_DIR CUDA_NVCC_EXECUTABLE CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (Required is at least version ""4.1"")
Found PythonInterp: /usr/bin/python2.7 (Required is at least version ""2.0"")
Found PythonLibs: /usr/lib/libpython2.7.dylib (Required is at least version ""2.7.1"")

General configuration for OpenCV 2.4.1 =====================================

  Platform:
    Host:                        Darwin 11.4.0 i386
    CMake:                       2.8.4
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/make
    Configuration:               Release

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                /usr/bin/c++
    C++ flags (Release):         -O3 -DNDEBUG  
    C++ flags (Debug):           -g 
    C Compiler:                  /usr/bin/gcc
    C flags (Release):           -O3 -DNDEBUG 
    C flags (Debug):             -g 
    Linker flags (Release):
    Linker flags (Debug):

  OpenCV modules:
    To be built:                 calib3d contrib core features2d flann gpu highgui imgproc legacy ml nonfree objdetect photo python stitching ts video videostab
    Disabled:                    -
    Disabled by dependency:      -
    Unavailable:                 androidcamera java

  GUI: 
    QT 4.x:                      NO
    Cocoa:                       YES
    OpenGL support:              NO

  Media I/O: 
    ZLib:                        build (ver 1.2.6)
    JPEG:                        build (ver 62)
    PNG:                         build (ver 1.5.9)
    TIFF:                        build (ver 42)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     NO

  Video I/O:
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      NO
      codec:                     NO
      format:                    NO
      util:                      NO
      swscale:                   NO
      gentoo-style:              NO
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    QuickTime:                   NO
    QTKit:                       YES

  Other third-party libraries:
    Use IPP:                     NO
    Use TBB:                     NO
    Use Cuda:                    NO
    Use Eigen:                   NO

  Python:
    Interpreter:                 /usr/bin/python2.7 (ver 2.7.1)
    Libraries:                   /usr/lib/libpython2.7.dylib
    numpy:                       /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include (ver 1.5.1)
    packages path:               lib/python2.7/site-packages

  Documentation:
    Build Documentation:         NO
    Sphinx:                      NO
    PdfLaTeX compiler:           NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    Examples:                    NO

  Install path:                  /usr/local

  cvconfig.h is in:              /Users/steveheim/Documents/opencvtest
-----------------------------------------------------------------

Configuring done
</code></pre>
",2012-06-26 11:17:28,2012-06-26 12:05:31,where are headers when building openCV 2.4.1 with CMake on OS X?,<xcode><opencv><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
4095,14125758,2013-01-02 16:44:32,,"<p>I'm using <code>FFmpegFrameRecorder</code> to get the video input from my webcam and record it into a video file. The problem is that I'm building my application using a few different demo source codes that I found and I use properties some of which are not completely clear to me.</p>

<p>First, here is my code snippet : </p>

<pre><code>FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(FILENAME,  grabber.getImageWidth(),grabber.getImageHeight());

        recorder.setVideoCodec(13);
        recorder.setFormat(""mp4"");
        recorder.setPixelFormat(avutil.PIX_FMT_YUV420P);
        recorder.setFrameRate(30);
        recorder.setVideoBitrate(10 * 1024 * 1024);

        recorder.start();
</code></pre>

<ul>
<li><strong>setVideoCodec(13)</strong> - What is the meaning of this <code>(13)</code> how can I understand what actual codec stands behind any number?</li>
<li><strong>setPixelFormat</strong> - Just get this, don't know what it's doing in general</li>
<li><strong>setFrameRate(30)</strong> - I think this should be pretty clear but still what is the logic behind what frame rate we choose (isn't the high the better?)</li>
<li><strong>setVideoBitrate(10*1024*1024)</strong> - again almost no idea what this does and what's the logic behind the numbers?</li>
</ul>

<p>At the end I just want to mention one last problem that I get recording video like this. If the actual length of the video is let's say 20secs. When I play the video file created from the program it runs significantly faster. Can't tell if it's exactly 2 times faster than it should be but in general if I record a 20sec video then it's played for about 10secs. What may cause this and how can I fix it?</p>
",,2014-12-29 02:00:43,JavaCV FFmpegFrameRecorder properties explanation needed,<ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
4152,14128144,2013-01-02 19:43:12,,"<p>I built a test driver for encoding a series of images I have captured.  I am using libx264 and based my driver off of this guy's answer:</p>

<p><a href=""https://stackoverflow.com/questions/2940671/how-does-one-encode-a-series-of-images-into-h264-using-the-x264-c-api"">StackOverflow link</a></p>

<p>In my case I am starting out by reading in a JPG image and converting to YUV and passing that same frame over and over in a loop to the x264 encoder.</p>

<p>My expectation was that since the frame is the same that the output from the encoder would be very small and constant.  </p>

<p>Instead I find that the NAL payload is varied from a few bytes to a few KB and also varies highly depending on the frame rate I specify in the encoder parameters.</p>

<p>Obviously I don't understand video encoding.  Why does the output size vary so much?</p>

<pre><code>int main() 
{
  Image image(WIDTH, HEIGHT);
  image.FromJpeg(""frame-1.jpg"");

  unsigned char *data = image.GetRGB();

  x264_param_t param;

  x264_param_default_preset(&amp;param, ""fast"", ""zerolatency"");
  param.i_threads = 1;
  param.i_width = WIDTH;
  param.i_height = HEIGHT;
  param.i_fps_num = FPS;
  param.i_fps_den = 1;

  // Intra refres:
  param.i_keyint_max = FPS;
  param.b_intra_refresh = 1;

  //Rate control:
  param.rc.i_rc_method = X264_RC_CRF;
  param.rc.f_rf_constant = FPS-5;
  param.rc.f_rf_constant_max = FPS+5;

  //For streaming:
  param.b_repeat_headers = 1;
  param.b_annexb = 1;

  x264_param_apply_profile(&amp;param, ""baseline"");

  // initialize the encoder
  x264_t* encoder = x264_encoder_open(&amp;param);
  x264_picture_t pic_in, pic_out;
  x264_picture_alloc(&amp;pic_in, X264_CSP_I420, WIDTH, HEIGHT);
  // X264 expects YUV420P data use libswscale 
  // (from ffmpeg) to convert images to the right format
  struct SwsContext* convertCtx =
        sws_getContext(WIDTH, HEIGHT, PIX_FMT_RGB24, WIDTH, HEIGHT,
                       PIX_FMT_YUV420P, SWS_FAST_BILINEAR,
                       NULL, NULL, NULL);

  // encoding is as simple as this then, for each frame do:
  // data is a pointer to your RGB structure
  int srcstride = WIDTH*3; //RGB stride is just 3*width
  sws_scale(convertCtx, &amp;data, &amp;srcstride, 0, HEIGHT,
            pic_in.img.plane, pic_in.img.i_stride);
  x264_nal_t* nals;
  int i_nals;
  int frame_size =
        x264_encoder_encode(encoder, &amp;nals, &amp;i_nals, &amp;pic_in, &amp;pic_out);

  int max_loop=15;
  int this_loop=1;

  while (frame_size &gt;= 0 &amp;&amp; --max_loop)
  {
      cout &lt;&lt; ""------------"" &lt;&lt; this_loop++ &lt;&lt; ""-----------------\n"";
      cout &lt;&lt; ""Frame size = "" &lt;&lt; frame_size &lt;&lt; endl;
      cout &lt;&lt; ""output has "" &lt;&lt; pic_out.img.i_csp &lt;&lt; "" colorspace\n"";
      cout &lt;&lt; ""output has "" &lt;&lt; pic_out.img.i_plane &lt;&lt; "" # img planes\n"";

      cout &lt;&lt; ""i_nals = "" &lt;&lt; i_nals &lt;&lt; endl;
      for (int n=0; n&lt;i_nals; n++)
        cout &lt;&lt; ""nal["" &lt;&lt; n &lt;&lt; ""] payload size = ""
             &lt;&lt; nals[n].i_payload &lt;&lt; endl;



      // clean this input frame and grab another
      x264_picture_clean(&amp;pic_in);
      x264_picture_alloc(&amp;pic_in, X264_CSP_I420, WIDTH, HEIGHT);
      sws_scale(convertCtx, &amp;data, &amp;srcstride, 0, HEIGHT,
                pic_in.img.plane, pic_in.img.i_stride);


      frame_size=
        x264_encoder_encode(encoder, &amp;nals, &amp;i_nals, &amp;pic_in, &amp;pic_out);
  }

  delete [] data;
  return 0;
}
</code></pre>

<p>My original JPG image that I'm reading in is 320x240 and is roughly 9KB on disk.  The output from running that same image in through the encoder looks like this:</p>

<pre><code>x264 [warning]: ref &gt; 1 + intra-refresh is not supported
x264 [info]: using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
x264 [info]: profile Constrained Baseline, level 1.3 
------------1-----------------
Frame size = 17412
output has 3 colorspace
output has 2 # img planes
i_nals = 4 
nal[0] payload size = 26
nal[1] payload size = 8 
nal[2] payload size = 610 
nal[3] payload size = 16768
------------2-----------------
Frame size = 11
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 11
------------3-----------------
Frame size = 11
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 11
------------4-----------------
Frame size = 16
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 16
------------5-----------------
Frame size = 104 
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 104 
------------6-----------------
Frame size = 973 
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 973
------------7-----------------
Frame size = 4576
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 4576
------------8-----------------
Frame size = 4040
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 4040
------------9-----------------
Frame size = 3917
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 3917
------------10-----------------
Frame size = 3799
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 3799
------------11-----------------
Frame size = 2454
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 2454
------------12-----------------
Frame size = 1641
output has 3 colorspace
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 1641
------------13-----------------
Frame size = 1121
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 1121
------------14-----------------
Frame size = 247
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 247
</code></pre>

<p>If I set FPS to 10 instead of 30 then the output size changes dramatically:</p>

<pre><code>x264 [warning]: ref &gt; 1 + intra-refresh is not supported
x264 [info]: using cpu capabilities: MMX2 SSE2Fast SSSE3 FastShuffle SSE4.2 AVX
x264 [info]: profile Constrained Baseline, level 1.1 
------------1-----------------
Frame size = 60120
output has 3 colorspace
output has 2 # img planes
i_nals = 4 
nal[0] payload size = 25
nal[1] payload size = 9 
nal[2] payload size = 609 
nal[3] payload size = 59477
------------2-----------------
Frame size = 10
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 10
------------3-----------------
Frame size = 151 
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 151 
------------4-----------------
Frame size = 2329
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 2329
------------5-----------------
Frame size = 1466
output has 3 colorspace
output has 2 # img planes
i_nals = 1 
nal[0] payload size = 1466
------------6-----------------
Frame size = 539 
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 539
------------7-----------------
Frame size = 311
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 311
------------8-----------------
Frame size = 291
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 291
------------9-----------------
Frame size = 302
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 302
------------10-----------------
Frame size = 287
output has 3 colorspace
output has 2 # img planes
i_nals = 1
nal[0] payload size = 287
------------11-----------------
Frame size = 11937
output has 3 colorspace
output has 2 # img planes
i_nals = 4
nal[0] payload size = 25
nal[1] payload size = 9
nal[2] payload size = 9
nal[3] payload size = 11894
</code></pre>

<p>Can you enlighten me?</p>
",2017-05-23 11:50:31,2015-02-26 15:51:27,Confused about x264 and encoding video frames,<image-processing><video-streaming><h.264><libavcodec><libx264>,,,CC BY-SA 3.0,False,False,False,False,True
4172,9257160,2012-02-13 07:56:36,,"<p>I've compiled ffmpeg with libx264 using configure options given at <a href=""http://ubuntuforums.org/showthread.php?t=786095"" rel=""nofollow"" title=""HOWTO: Install and use the latest FFmpeg and x264"">1</a>.</p>

<p>This results in the following codecs being available in ffmpeg:  </p>

<pre><code>$ ffmpeg -codecs | grep ""264\|flv""
ffmpeg version 0.10 Copyright (c) 2000-2012 the FFmpeg developers
built on Feb 10 2012 13:54:15 with gcc 4.6.1
configuration: --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab
libavutil      51. 34.101 / 51. 34.101
libavcodec     53. 60.100 / 53. 60.100
libavformat    53. 31.100 / 53. 31.100
libavdevice    53.  4.100 / 53.  4.100
libavfilter     2. 60.100 /  2. 60.100
libswscale      2.  1.100 /  2.  1.100
libswresample   0.  6.100 /  0.  6.100
libpostproc    52.  0.100 / 52.  0.100
DEVSD  flv             Flash Video (FLV) / Sorenson Spark / Sorenson H.263
D V D  h264            H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10
D V D  h264_vdpau      H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (VDPAU acceleration)
EV    libx264         libx264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10
EV    libx264rgb      libx264 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 RGB
</code></pre>

<p>After this, I compiled opencv. Here is partial cmake result:  </p>

<pre><code>--   Video I/O:
--     DC1394 1.x:                 NO
--     DC1394 2.x:                 NO
--     FFMPEG:                     YES
--       codec:                    YES
--       format:                   YES
--       util:                     YES
--       swscale:                  YES
--       gentoo-style:             YES
--     GStreamer:                  YES
--     UniCap:                     NO
--     PvAPI:                      NO
--     V4L/V4L2:                   /1
--     Xine:                       NO
</code></pre>

<p>Now, using opencv's VideoWriter, I tried to encode into flv with the following FOURCC codes:<br>
FLV1, X264</p>

<p>While the FLV1 results in a video file not playable by flash player, but playabe by vlc; X264 produces no results at all.<br>
Here is the console output for X264, resulting in a 0 byte file.  </p>

<p>Output #0, flv, to 'd.flv':
    Stream #0.0: Video: <strong>[0][0][0][0] / 0x0000</strong>, yuv420p, 320x240, q=2-31, 4915 kb/s, 90k tbn, 24 tbc</p>

<p>Do you see anything amiss or incorrect?<br>
thanks,</p>
",2012-02-13 08:04:54,2012-02-13 08:04:54,"Use opencv to encode into flv, playable by flash player",<flash><opencv><ffmpeg><video-encoding><x264>,,,CC BY-SA 3.0,True,False,False,False,True
4199,11232941,2012-06-27 18:41:32,,"<p>This question is related to a previous question I asked <a href=""https://stackoverflow.com/questions/11194713/open-and-read-avi-files-with-opencv-ubuntu"">here</a>.</p>

<p>I read on the Willow Garage website dedicated to OpenCV that we do not have to take care of ffmpeg while installing OpenCV since version 1.2.x. <a href=""http://opencv.willowgarage.com/wiki/FFMPEG"" rel=""nofollow noreferrer"">Here it is</a>.</p>

<p>However, some <a href=""https://stackoverflow.com/questions/7075180/how-to-compile-opencv-2-3-with-ffmpeg-support-with-visual-studio-2010"">questions</a> asked here on Stackoverflow suggest the contrary.</p>

<p>So, what should I do ? Do I have to recompile OpenCV and do some special operation related to ffmpeg to get it to, finally, open avi file on my Linux system ?</p>
",2017-05-23 12:04:41,2012-06-28 02:48:46,Open avi file with OpenCV : ffmpeg?,<opencv><ffmpeg><codec>,,,CC BY-SA 3.0,True,False,False,False,True
4331,9268842,2012-02-13 22:13:38,,"<p>Let's say I have 10 images and I want to combine those images in a video like a slideshow. </p>

<p>For example I want to show each image for 5 seconds and then continue with next image for another 5 seconds. </p>

<p>If it's possible, it will be perfect to include music and some descriptive text too.</p>

<p>Is there a sample code for this may be with ffmpeg library ?</p>
",2015-10-07 15:34:11,2017-09-05 09:51:20,How to create videos from images with php?,<php><image-processing><ffmpeg><video-processing>,,,CC BY-SA 3.0,False,False,False,False,True
4457,9280653,2012-02-14 16:39:17,,"<p>I have a problem with writing a toy example video using opencv2.3.1 VideoWriter, here is how I do it:</p>

<pre><code>writer = cv2.VideoWriter('test1.avi',cv.CV_FOURCC('P','I','M','1'),25,(640,480))
for i in range(1000):
    x = np.random.randint(10,size=(480,640)).astype('uint8')
    writer.write(x)
#del writer (with or without tested)
</code></pre>

<p>I tried every possible combination resulting with a 0 bytes file if the extension was mpg, and 5.5kb if it was avi. I should say that some pointed out that I should build the ffmpeg library from source and not apt-get it. Well I did that on a fresh machine based on the help of this site  <a href=""http://vinayhacks.blogspot.com/2011/11/installing-opencv-231-with-ffmpeg-on-64.html"" rel=""noreferrer"">http://vinayhacks.blogspot.com/2011/11/installing-opencv-231-with-ffmpeg-on-64.html</a>. which also presented an error while compiling opencv(the error was related to ffmpeg). Now I am really out of ideas, How to  generate a video using OPENCV?</p>

<p>Thanks in advance</p>
",2012-02-14 16:46:13,2015-07-08 12:34:44,Writing numpy arrays using cv2 VideoWriter,<python><opencv><numpy><ffmpeg><x264>,,,CC BY-SA 3.0,True,False,False,False,True
4462,14155461,2013-01-04 10:35:49,,"<p>i am using opencv for android in my project. But when i called method cvCreateFileCapture(), it always return NULL. I know this method needs codecs when working in Windows or Linux, So what can i do when i port this method to Android?  Is FFMPEG working?  How can i build opencv4android that using FFMPEG to decode the input video file? Thanks.</p>

<p>these are my codes:</p>

<pre><code>//Retrieve data from Java, and construct needed structures or instances
char* filePath = (char*)env-&gt;GetStringUTFChars(aviPath, false);

int result=-1;

LOGD(filePath);

CvCapture* pCvCapture = cvCreateFileCapture( filePath );
    //pCvCpature always NULL
if( NULL == pCvCapture)
{
    result = -100;
}
else
{
    cvReleaseCapture( &amp;pCvCapture );
    result = 100;
}

env-&gt;ReleaseStringUTFChars(aviPath, filePath);

return (jint)result;
</code></pre>
",2013-02-15 12:21:40,2013-02-15 12:21:40,opencv4android cvcapturefromfile() return NULL,<android><opencv><ffmpeg>,2013-02-23 02:43:36,,CC BY-SA 3.0,True,False,False,False,True
4581,13216373,2012-11-04 05:41:25,,"<p>1) I get this errors while handling two logitech c310 cameras with OpenCV(updated Kubuntu Linux)</p>

<p>VIDIOC_STREAMON: No space left on device</p>

<p>Whole error log is as below</p>

<pre><code>**IDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument**
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
**libv4l2: error turning on stream: No space left on device**
**VIDIOC_STREAMON: No space left on device**
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /home/rjdp/Computer_Vision/0_Installers/OpenCV-2.4.2/modules/core/src/array.cpp, line 2482
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/rjdp/Computer_Vision/0_Installers/OpenCV-2.4.2/modules/core/src/array.cpp:2482: error: (-206) Unrecognized or unsupported array type in function cvGetMat
</code></pre>

<p>2) It happens only when Handling two cameras, Even at default low res 640x480. I still tried to lower resolution in code to 320x240 which also did not work.</p>

<p>3) I searched in lot of other posts here &amp; on other sites. Which told me there is not enough USB cam bandwidth available. So I tried to plug one cam in front USB &amp; one in the back side which also failed :(</p>

<p>My Question is : </p>

<blockquote>
  <p><strong>Is it possible to solve this issue of bandwith/memory &amp; run two or
  more cameras together on opencv 2.4.2 ??</strong> OpenCV uses <strong>ffmpeg</strong> to handle I/O so can i tell my camera hardware with some ffmpeg command to take input stream with <strong>compressed MPEG mode</strong> instead of bandwidth consuming normal mode.</p>
</blockquote>

<p>CODE IS AS BELOW : </p>

<pre><code>#include ""opencv2/opencv.hpp""
#include &lt;stdio.h&gt;
using namespace cv;

int main(int, char**)
{
    VideoCapture cap01(0); // open the default camera
    cap01.set(CV_CAP_PROP_FRAME_WIDTH,320);
    cap01.set(CV_CAP_PROP_FRAME_HEIGHT,240);
    //sleep(1);
    if(!cap01.isOpened())  // check if we succeeded
        return -1;
    namedWindow(""Camera01"",1);

    VideoCapture cap02(1); // open the default camera
    cap02.set(CV_CAP_PROP_FRAME_WIDTH,320);
    cap02.set(CV_CAP_PROP_FRAME_HEIGHT,240);
   if(!cap02.isOpened())  // check if we succeeded
        return -1;
    namedWindow(""Camera02"",1);

    for(;;)
    {
        Mat frame, frame_1;
        //Mat frame02;
        cap02 &gt;&gt; frame;
        imshow(""Camera01"", frame);
        if(waitKey(30) &gt;= 0) break;
        Mat frame_1;
        cap02 &gt;&gt; frame_1; 
        imshow(""Camera02"", frame_1);
        if(waitKey(30) &gt;= 0) break;
    }

    return 0;
}
</code></pre>
",,2013-01-19 11:50:20,OpenCV Multi-camera handling issue,<c++><linux><opencv><ffmpeg><kubuntu>,,,CC BY-SA 3.0,True,True,False,False,True
4583,11267693,2012-06-29 19:17:26,,"<p>Can anyone recommend a really fast API, ideally NEON-optimized for doing YUV to RGB conversion at runtime on the iPhone <em>using the CPU</em>? The accelerate framework's vImage doesn't provide anything suitable, sadly, and using vDSP, converting to floats and back seems suboptimal and almost as much work as writing NEON myself. </p>

<p>I know how to use the GPU for this via a shader, and in fact already do so for displaying my main video plane. Unfortunately, I also need to create and save RGBA textures of subregions of the display at runtime. Most of the good answers to this question involve shaders, but I don't want to use the GPU for that additional work, because: </p>

<p>(1) Although I could use RenderTextures and my YUV shader to convert and cache the regions, I don't want to add any more synchronization/complexity to the app. (I already pass textures from a CVTextureCache to Unity3D... I'm switching state from OpenGL behind Unity3D's back in many cases already and don't want to do any more debugging...)</p>

<p>(2) More practically I am writing a game, and don't have any GPU to spare (as games generally don't - I've given more presentations about how to get things off the GPU in the last few years than how to put things on it...) </p>

<p>(3) On the iPad, I have a spare core sitting there doing nothing.</p>

<p>Whilst there are many libraries out there that will do YUV to RGBA, I'd love to save the time of writing my own NEON version. Right now I'm using OpenCV's implementation like this: </p>

<pre><code>cv::cvtColor(avFoundationYUVCaptureMat, BGRAInputImage, CV_YUV420sp2BGRA, 4);
</code></pre>

<p>which is correct, but end-of-days slow.</p>

<p>If anyone has previously looked at other implementations (CoreImage? FFMpeg?) and can recommend one I'd be hugely grateful.</p>

<p>Thanks,
Alex.</p>
",2012-06-29 20:57:50,2012-10-03 12:41:39,Fastest YUV420P to RGBA conversion on iOS using the CPU,<iphone><ios><opencv><core-image><accelerate-framework>,,,CC BY-SA 3.0,True,False,False,False,True
4756,9307824,2012-02-16 08:27:44,,"<p>Here is the tutorial I followed:<a href=""http://thebitbangtheory.wordpress.com/2011/10/23/how-to-install-opencv-2-3-1-in-ubuntu-11-10-oneiric-ocelot-with-python-support/"" rel=""nofollow"">http://thebitbangtheory.wordpress.com/2011/10/23/how-to-install-opencv-2-3-1-in-ubuntu-11-10-oneiric-ocelot-with-python-support/</a><br>
I think the problem is ffmpeg, the version I used is 0.8.10, and I installed it in /usr and enabled share, but when I complied opencv,the output was full of</p>

<blockquote>
  <p>./../lib/libopencv_highgui.so.2.3.1: undefined reference to <code>av_codec_get_id'
  ../../lib/libopencv_highgui.so.2.3.1: undefined reference to</code>av_seek_frame'<br>
  ../../lib/libopencv_highgui.so.2.3.1: undefined reference to `avpicture_get_size  </p>
</blockquote>
",2012-02-16 11:25:37,2012-02-17 06:21:34,compile opencv2.3.1 in ubuntu 11.10,<opencv><ffmpeg><undefined-reference>,,,CC BY-SA 3.0,True,False,False,False,True
4775,10307004,2012-04-24 22:37:48,,"<p>I download OpenCV (OpenCV-2.3.1-win-superpack.exe) and use it on python 2.6.</p>

<p>I use the <code>find_obj.py</code> from the <code>OpenCV\samples\python</code> dir.</p>

<p>All is magic but even if I use a try except block to wraps the code if the code raise an error OpenCV prints the error.</p>

<blockquote>
  <p>OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or
  unsupported array type) in unknown function, file
  ......\OpenCV-2.3.1\modules\core\src\array.cpp, line 2482</p>
</blockquote>

<p>So how can I disable OpenCV warnings message.</p>

<p>EDIT:</p>

<p>this is the code:</p>

<pre><code>import numpy as np
import cv2
from functools import partial

help_message = '''SURF image match 

USAGE: findobj.py [ &lt;image1&gt; &lt;image2&gt; ]
'''

FLANN_INDEX_KDTREE = 1  # bug: flann enums are missing

flann_params = dict(algorithm = FLANN_INDEX_KDTREE, trees = 4)

def anorm(a):
    return np.sqrt( anorm2(a) )

def match_bruteforce(desc1, desc2, r_threshold = 0.75):
    res = []
    for i in xrange(len(desc1)):
        dist = anorm( desc2 - desc1[i] )
        n1, n2 = dist.argsort()[:2]
        r = dist[n1] / dist[n2]
        if r &lt; r_threshold:
            res.append((i, n1))
    return np.array(res)


def match_flann(desc1, desc2, r_threshold = 0.6):
    flann = cv2.flann_Index(desc2, flann_params)
    idx2, dist = flann.knnSearch(desc1, 2, params = {}) # bug: need to provide empty dict
    mask = dist[:,0] / dist[:,1] &lt; r_threshold
    idx1 = np.arange(len(desc1))
    pairs = np.int32( zip(idx1, idx2[:,0]) )
    return pairs[mask]


def draw_match(img1, img2, p1, p2, status = None, H = None):
    h1, w1 = img1.shape[:2]
    h2, w2 = img2.shape[:2]
    vis = np.zeros((max(h1, h2), w1+w2), np.uint8)
    vis[:h1, :w1] = img1
    vis[:h2, w1:w1+w2] = img2
    vis = cv2.cvtColor(vis, cv2.COLOR_GRAY2BGR)

    if H is not None:
        corners = np.float32([[0, 0], [w1, 0], [w1, h1], [0, h1]])
        corners = np.int32( cv2.perspectiveTransform(corners.reshape(1, -1, 2), H).reshape(-1, 2) + (w1, 0) )
        cv2.polylines(vis, [corners], True, (255, 255, 255))

    if status is None:
        status = np.ones(len(p1), np.bool_)
    green = (0, 255, 0)
    red = (0, 0, 255)
    for (x1, y1), (x2, y2), inlier in zip(np.int32(p1), np.int32(p2), status):
        col = [red, green][inlier]
        if inlier:
            cv2.line(vis, (x1, y1), (x2+w1, y2), col)
            cv2.circle(vis, (x1, y1), 2, col, -1)
            cv2.circle(vis, (x2+w1, y2), 2, col, -1)
        else:
            r = 2
            thickness = 3
            cv2.line(vis, (x1-r, y1-r), (x1+r, y1+r), col, thickness)
            cv2.line(vis, (x1-r, y1+r), (x1+r, y1-r), col, thickness)
            cv2.line(vis, (x2+w1-r, y2-r), (x2+w1+r, y2+r), col, thickness)
            cv2.line(vis, (x2+w1-r, y2+r), (x2+w1+r, y2-r), col, thickness)
    return vis


def search(fn1, fn2):
    try:        
        img1 = cv2.imread(fn1, 0)
        img2 = cv2.imread(fn2, 0)

        surf = cv2.SURF(1000)
        kp1, desc1 = surf.detect(img1, None, False)
        kp2, desc2 = surf.detect(img2, None, False)
        desc1.shape = (-1, surf.descriptorSize())
        desc2.shape = (-1, surf.descriptorSize())

        def match_and_draw(match, r_threshold):
            try:
                m = match(desc1, desc2, r_threshold)
                matched_p1 = np.array([kp1[i].pt for i, j in m])
                matched_p2 = np.array([kp2[j].pt for i, j in m])
                H, status = cv2.findHomography(matched_p1, matched_p2, cv2.RANSAC, 5.0)
                vis = draw_match(img1, img2, matched_p1, matched_p2, status, H)
                return vis
            except:
                pass

        vis_brute = match_and_draw( match_bruteforce, .9 )
        #vis_flann = match_and_draw( match_flann, 0.6 ) # flann tends to find more distant second # neighbours, so r_threshold is decreased
        if vis_brute != None:
            cv2.imshow('find_obj SURF', vis_brute)
            #cv2.imshow('find_obj SURF flann', vis_flann)
            return True
        else:
            return False
    except:
        return False


print search('obj.png', 'pass.png')
print search('obj.png', 'fail.png')
</code></pre>

<p>it search a image (obj.png) in a bigger image, if the search success all is ok, but if fail it always prints the error.</p>

<p>EDIT2</p>

<p>This is the dll list</p>

<pre><code>C:\Python26\Lib\site-packages&gt;dir opencv*
 Volume in drive C has no label.
 Volume Serial Number is BE63-8A7C

 Directory of C:\Python26\Lib\site-packages

08/17/2011  08:27 AM           743,936 opencv_calib3d231.dll
08/17/2011  08:27 AM           547,328 opencv_contrib231.dll
08/17/2011  08:26 AM         6,595,072 opencv_core231.dll
08/17/2011  08:27 AM           878,080 opencv_features2d231.dll
08/17/2011  08:28 AM         7,417,192 opencv_ffmpeg.dll
08/17/2011  08:26 AM           395,264 opencv_flann231.dll
08/17/2011  08:27 AM           221,184 opencv_gpu231.dll
08/17/2011  08:27 AM           891,904 opencv_highgui231.dll
08/17/2011  08:26 AM         1,648,128 opencv_imgproc231.dll
08/17/2011  08:27 AM           761,856 opencv_legacy231.dll
08/17/2011  08:26 AM           451,584 opencv_ml231.dll
08/17/2011  08:27 AM           903,168 opencv_objdetect231.dll
08/17/2011  08:51 AM               335 opencv_python-2.3.1-py2.6.egg-info
08/17/2011  08:26 AM           566,272 opencv_ts231.dll
08/17/2011  08:27 AM           288,768 opencv_video231.dll
              15 File(s)     22,310,071 bytes
               0 Dir(s)  37,611,061,248 bytes free
</code></pre>
",2012-04-24 23:13:57,2012-04-24 23:13:57,Disable opencv warnings in python,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
5010,12279833,2012-09-05 10:52:15,,"<p>I have a problem using VideoCapture class with OpenCV 2.4.2 under windows XP 32bits.
It doesn't open any file or camera and fixing it's being a pain.
Im using visual studio 2010 but i have also tried the code in QTcreator with the same result.</p>

<p>The testing code is the following: </p>

<pre><code>#include ""opencv/cv.h""
#include ""opencv/highgui.h""
#include &lt;iostream&gt;
#include &lt;string&gt; 
#include &lt;iomanip&gt; 
#include &lt;sstream&gt; 

using namespace cv;
using namespace std;

int main()
{
    const char* videoPath = ""C:/video/"";
    string videoName = string(videoPath) + ""avi.avi"";
    VideoCapture cap(videoName);

    if(!cap.isOpened()) 
    {
        std::cout&lt;&lt;""Fail""&lt;&lt;std::endl;
        return -3;
    }
    return 0; 
}
</code></pre>

<p>The output is always '-3'.
Qt Creator shows a 
    warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:361)</p>

<p>I debugged it and the problem appears in the first line of:</p>

<pre><code>CvCapture* cvCreateFileCapture_FFMPEG_proxy(const char * filename)
{
    CvCapture_FFMPEG_proxy* result = new CvCapture_FFMPEG_proxy;
    if( result-&gt;open( filename ))
        return result;
    delete result;
#if defined WIN32 || defined _WIN32
    return cvCreateFileCapture_VFW(filename);
#else
    return 0;
#endif
}
</code></pre>

<p>in the cap_ffmpeg.cpp internal file.</p>

<p>I have tested the same code in a mac under snow leopard and it works. No surprises here since it must be a library issue.
I have opened the avi file with the same path route using the c-function cvCapture easy and fast.
I got all the dlls of 'C:\opencv\opencv\build\x86\vc10\bin'
included in mi debug file. I got the tbb.dll and all the 'C:\opencv\opencv\3rdparty\ffmpeg' content included too.</p>

<p>This is drving me crazy so any help would be appreciated.</p>

<p>Thanks in advance.</p>
",2012-09-05 11:07:11,2019-01-10 18:09:24,VideoCapture OpenCV 2.4.2 error in windows,<opencv>,,,CC BY-SA 3.0,True,False,False,False,True
5045,11307353,2012-07-03 08:41:24,,"<p>I'm trying to capture images from an IP camera in real time. The stream works perfectly well in VLC, but OpenCV's <code>cvQueryFrame()</code> seems to jumble and corrupt the incoming images to the point of no recognition. </p>

<p>Again, capturing from file works fine, but not a live stream. In case it makes a difference, I'm using an rtsp connection URL; I've also tried this with two different camera models (different brands), and the problem remains.</p>

<p>Besides, the (I'm assuming) codec is outputting several errors of the following kind: 
<code>Error at MB: 1746</code> and <code>concealing 6000 DC, 6000 AC, 6000 MV errors</code>.</p>

<p>What can I do?</p>

<p><strong>Update:</strong> The first error in the sequence is always <code>cannot parallelize deblocking type 1, decoding such frames in sequential order</code></p>

<p><strong>Update 2:</strong> Alright, it seems that OpenCV/FFMPEG has an issue with rtsp/h264 streams. I've tried the <strong>Qt Phonon</strong> library, which also doesn't work, and I've given the <strong>Live555</strong> library a quick overview. This last appears to work, in the sense that everyone says it does, and the application example (OpenRTSP) in fact plays my stream well. However, to be quite honest, getting to grips with the Live555 code seems like a lengthy affair which I can hardly afford right now. Barring any other alternative, I guess I'll have to go that route. </p>

<p>Is there any other solution that comes to mind? </p>

<p><strong>Update 3:</strong> I got the test RTSP client from the Live555 code to work, so I know how to extract h264 frame information from a stream, but now I need to recombine that frame information into actual displayable frames, which doesn't seem like something straightforward! Anyone familiar with Live555 know how to do this? Thanks.</p>
",2012-07-20 08:53:53,2013-02-06 20:17:37,OpenCV/FFMpeg image capture problems,<c++><video><opencv><codec><live555>,,,CC BY-SA 3.0,True,False,False,False,True
5078,11310744,2012-07-03 12:17:09,,"<p>I like to stream the web cam pictures wich are captured by opencv. I think about a solution with ffmpeg and live555 (poorly they are not document so well). My problems are:</p>

<ol>
<li><p>How can convert the captured images to a H264 format so the picures/second match. If it is in a loop I get more than 25 pictures/sekond and the video is to fast.</p></li>
<li><p>How can i directly stream the converted H264 stream over the network via rtp / rtps or similar.</p></li>
</ol>

<p>Thanks for your help!</p>
",,2015-08-28 13:56:24,OpenCV stream captured CAM with H264 (mp4) codec,<opencv><stream><ffmpeg><live555>,,,CC BY-SA 3.0,True,False,False,False,True
5227,10342682,2012-04-26 23:11:07,,"<p>I would really appreciate your help with an installation error. I've been trying to figure this out for days and can't find the answer online. Also, I need to use the EMGUCV wrapper for my work, and cannot use OpenCVsharp or other .net wrappers for opencv.</p>

<p>I am using OSX 10.6.8, I have installed mono/cmake and have followed the instructions in the <a href=""http://www.emgu.com/wiki/index.php/Download_And_Installation#OSX"" rel=""nofollow"">wiki</a> for the trunk version. I execute the following command, but the package fails to configure. I don't know how to interpret the output. Have also asked on the EmguCV forum, but not getting a lot of views there.</p>

<p>Thanks,
Rishi</p>

<pre><code>cmake -DCMAKE_OSX_ARCHITECTURES=i386 -DBUILD_NEW_PYTHON_SUPPORT:BOOL=FALSE -DBUILD_PERF_TESTS=FALSE -DBUILD_TESTS:BOOL=FALSE -DBUILD_DOCS:BOOL=FALSE -DBUILD_JPEG=TRUE -DBUILD_PNG=TRUE -DBUILD_TIFF=TRUE .


-- Found csc: /usr/bin/gmcs
-- Found gacutil: /usr/bin/gacutil
-- Found al: /usr/bin/al
-- Found resgen: /usr/bin/resgen
-- Extracting Emgu CV svn version, please wait...
-- Emgu CV SVN VERSION: 1661
-- Building 32bit library
-- Detected version of GNU GCC: 42 (402)
-- Extracting svn version, please wait...
-- SVNVERSION: svn:8208
-- Could NOT find Jasper (missing: JASPER_LIBRARIES JASPER_INCLUDE_DIR) 
-- checking for module 'libavcodec'
-- package 'libavcodec' not found
-- checking for module 'libavformat'
-- package 'libavformat' not found
-- checking for module 'libavutil'
-- package 'libavutil' not found
-- checking for module 'libswscale'
-- package 'libswscale' not found
-- checking for module 'libdc1394-2'
-- package 'libdc1394-2' not found
-- checking for module 'libdc1394'
-- package 'libdc1394' not found
-- CUDA detected: 4.1
-- CUDA NVCC target flags: -gencode;arch=compute_11,code=sm_11;-gencode;arch=compute_12,code=sm_12;-gencode;arch=compute_13,code=sm_13;-gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=sm_21;-gencode;arch=compute_20,code=compute_20
-- 
-- General configuration for OpenCV 2.4.0 =====================================
-- Version control: svn:8208
-- 
-- Platform:
-- Host: Darwin 10.8.0 i386
-- CMake: 2.8.8
-- CMake generator: Unix Makefiles
-- CMake build tool: /usr/bin/make
-- 
-- C/C++:
-- Built as dynamic libs?: YES
-- C++ Compiler: /usr/bin/c++ (ver 4.2.1)
-- C++ flags (Release): -Wall -pthread -O3 -DNDEBUG -fomit-frame-pointer -msse -msse2 -DNDEBUG
-- C++ flags (Debug): -Wall -pthread -g -O0 -DDEBUG -D_DEBUG -ggdb3
-- C Compiler: /usr/bin/gcc
-- C flags (Release): -Wall -pthread -O3 -DNDEBUG -fomit-frame-pointer -msse -msse2 -DNDEBUG
-- C flags (Debug): -Wall -pthread -g -O0 -DDEBUG -D_DEBUG -ggdb3
-- Linker flags (Release): 
-- Linker flags (Debug): 
-- 
-- OpenCV modules:
-- To be built: calib3d contrib core features2d flann gpu highgui imgproc legacy ml nonfree objdetect photo stitching ts video videostab
-- Disabled by user: python
-- Disabled by dependency: -
-- Unavailable: androidcamera java
-- 
-- GUI: 
-- Cocoa: YES
-- OpenGL support: NO
-- 
-- Media I/O: 
-- ZLib: /usr/lib/libz.dylib (ver 1.2.3)
-- JPEG: libjpeg (ver 62)
-- PNG: build (ver 1.5.9)
-- TIFF: build (ver 42)
-- JPEG 2000: build (ver 1.900.1)
-- OpenEXR: NO
-- OpenNI: NO
-- OpenNI PrimeSensor Modules: NO
-- 
-- Video I/O: QTKit
-- FFMPEG: NO
-- codec: NO
-- format: NO
-- util: NO
-- swscale: NO
-- gentoo-style: NO
-- 
-- Other third-party libraries:
-- Use IPP: NO
-- Use TBB: NO
-- Use Cuda: YES (ver 4.1)
-- Use Eigen: NO
-- Use Clp: NO
-- 
-- NVIDIA CUDA:
-- Use CUFFT: YES
-- Use CUBLAS: NO
-- NVIDIA GPU arch: 11 12 13 20 21
-- NVIDIA PTX archs: 11 12 13 20 21
-- NVIDIA GPU features: 11 12 13 20 20 20
-- 
-- Python:
-- Interpreter: /Library/Frameworks/EPD64.framework/Versions/Current/bin/python (ver 2.7.2)
-- 
-- Tests and samples:
-- Tests: NO
-- Performance tests: NO
-- Examples: NO
-- 
-- Install path: /usr/local
-- 
-- cvconfig.h is in: /Users/rawatenator/emgucv
-- -----------------------------------------------------------------
-- 
CMake Warning at opencv/CMakeLists.txt:973 (message):
The source directory is the same as binary directory. ""make clean"" may
damage the source tree


-- WITH CVBLOB: ON
-- Could NOT find TIFF (missing: TIFF_LIBRARY) (found version ""3.8.2"")
-- CVEXTERN: ZLIB found.
-- Skipping GEOTIFF
-- CPACK_GENERATOR: Bundle
CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
CUDA_nvcuvid_LIBRARY (ADVANCED)
linked by target ""opencv_gpu"" in directory /Users/rawatenator/emgucv/opencv/modules/gpu
</code></pre>
",,2012-11-02 08:25:26,Building EmguCV on OSX Snow Leopard,<mono><emgucv>,,,CC BY-SA 3.0,True,False,True,False,True
5322,10354000,2012-04-27 16:02:22,,"<p>I using python 2.7 and openCV 2.3.1 (win 7).
I trying open video file:</p>

<pre><code>stream = cv.VideoCapture(""test1.avi"")
if stream.isOpened() == False:
print ""Cannot open input video!""
exit()
</code></pre>

<p>But I have warning:</p>

<pre><code>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl_v2.hpp:394)
</code></pre>

<p>If use video camera (<code>stream = cv.VideoCapture(0)</code>), this code works.
Any ideas as to what I'm doing wrong?
Thanks a lot to all! </p>
",,2016-10-15 06:35:50,Opening video with openCV +python,<python><opencv><video-capture>,,,CC BY-SA 3.0,True,False,False,False,True
5348,11333698,2012-07-04 18:05:29,,"<p>EDIT: Upgrading to OpenCV 2.4.2 and FFMPEG 0.11.1 seems to have solved all the errors and connection problems, but it still hasn't solved the slow-down of frame rate.</p>

<p>I am using the default OpenCV package in Ubuntu 12.04 which I believe is 2.3.1. I am connecting to a Foscam FI8910W which streams MJPEG. I have seen where people have said that the best way is to use opencv+libjpeg+curl since <a href=""http://opencv-users.1802565.n2.nabble.com/Integration-of-Gstreamer-with-Opencv-code-td7196046.html"" rel=""nofollow"">it is faster than the gstreamer solution</a>. However, I can occasionally (50% of the time) connect to the camera from OpenCV as it is built and get a video stream. This stream starts out at around 30 fps for about 1 s but then slows down to 5-10 fps. The project I am working on will require having 6 of cameras preferably running at 15-30 fps (faster is better).</p>

<p>Here are my questions:</p>

<ol>
<li>Is this a problem that is fixed in 2.4.2 and I should just
upgrade? </li>
<li>If not, any ideas why I get a short burst and then it
slows down?</li>
<li>Is the best solution still to use curl+libjpeg?</li>
<li>I see lots of people who say that solutions have been posted, but
very few actual links to posts with solutions. Having all the actual
solutions (both curl and gstreamer) referenced in one place would be
very handy as per <a href=""http://opencv-users.1802565.n2.nabble.com/IP-camera-solution-td7345005.html"" rel=""nofollow"">http://opencv-users.1802565.n2.nabble.com/IP-camera-solution-td7345005.html</a>.</li>
</ol>

<p>Here is my code:</p>

<pre><code>  VideoCapture cap;
  cap.open(""http://10.10.1.10/videostream.asf?user=test&amp;pwd=1234&amp;resolution=32"");
  Mat frame;
  cap &gt;&gt; frame;
  wr.open(""test.avi"", CV_FOURCC('P','I','M','1'), 29.92, frame.size(), true);
  if(!wr.isOpened())
  {
    cout &lt;&lt; ""Video writer open failed"" &lt;&lt; endl;
    return(-1);
  }
  Mat dst = Mat::zeros(frame.rows + HEADER_HEIGHT, frame.cols, CV_8UC3);
  Mat roi(dst, Rect(0, HEADER_HEIGHT-1, frame.cols, frame.rows));
  Mat head(dst, Rect(0,0,frame.cols, HEADER_HEIGHT));
  Mat zhead = Mat::zeros(head.rows, head.cols, CV_8UC3);
  namedWindow(""test"", 1);
  time_t tnow;
  tm *tS;
  double t1 = (double)getTickCount();
  double t2;
  for(int i = 0; i&gt;-1 ; i++) // infinite loop
  {
    cap &gt;&gt; frame;
    if(!frame.data)
      break;
    tnow = time(0);
    tS = localtime(&amp;tnow);
    frame.copyTo(roi);
    std::ostringstream L1, L2;
    L1 &lt;&lt; tS-&gt;tm_year+1900 &lt;&lt; "" "" &lt;&lt; coutPrep &lt;&lt; tS-&gt;tm_mon+1 &lt;&lt; "" "";
    L1 &lt;&lt; coutPrep &lt;&lt; tS-&gt;tm_mday &lt;&lt; "" "";
    L1 &lt;&lt; coutPrep &lt;&lt; tS-&gt;tm_hour;
    L1 &lt;&lt; "":"" &lt;&lt; coutPrep &lt;&lt; tS-&gt;tm_min &lt;&lt; "":"" &lt;&lt; coutPrep &lt;&lt; tS-&gt;tm_sec;
    actValueStr = L1.str();
    zhead.copyTo(head);
    putText(dst, actValueStr, Point(0,HEADER_HEIGHT/2), fontFace, fontScale, Scalar(0,255,0), fontThickness, 8);
    L2 &lt;&lt; ""Frame: "" &lt;&lt; i;
    t2 = (double)getTickCount();
    L2 &lt;&lt; ""  "" &lt;&lt; (t2 - t1)/getTickFrequency()*1000. &lt;&lt; "" ms"";
    t1 = (double)getTickCount();
    actValueStr = L2.str();
    putText(dst, actValueStr, Point(0,HEADER_HEIGHT), fontFace, fontScale, Scalar(0,255,0), fontThickness, 8);
    imshow(""test"", dst);
    wr &lt;&lt; dst; // write frame to file
    cout &lt;&lt; ""Frame: "" &lt;&lt; i &lt;&lt; endl;
    if(waitKey(30) &gt;= 0)
      break;
  }
</code></pre>

<p>Here are the errors listed when it runs correctly:</p>

<pre><code>Opening 10.10.1.10
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
[asf @ 0x701de0] max_analyze_duration reached
[asf @ 0x701de0] Estimating duration from bitrate, this may be inaccurate
[asf @ 0x701de0] ignoring invalid packet_obj_size (21084 656 21720 21740)
[asf @ 0x701de0] freeing incomplete packet size 21720, new 21696
[asf @ 0x701de0] ff asf bad header 0  at:1029744
[asf @ 0x701de0] ff asf skip 678 (unknown stream)
[asf @ 0x701de0] ff asf bad header 45  at:1030589
[asf @ 0x701de0] packet_obj_size invalid
[asf @ 0x701de0] ff asf bad header 29  at:1049378
[asf @ 0x701de0] packet_obj_size invalid
[asf @ 0x701de0] freeing incomplete packet size 21820, new 21684
[asf @ 0x701de0] freeing incomplete packet size 21684, new 21836
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
Using network protocols without global network initialization. Please use avformat_network_init(), this will become mandatory later.
[asf @ 0x701de0] Estimating duration from bitrate, this may be inaccurate
Successfully opened network camera
[swscaler @ 0x8cf400] No accelerated colorspace conversion found from yuv422p to bgr24.
Output #0, avi, to 'test.avi':
Stream #0.0: Video: mpeg1video (hq), yuv420p, 640x480, q=2-31, 19660 kb/s, 90k tbn, 29.97 tbc
[swscaler @ 0x9d25c0] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 0
[swscaler @ 0xa89f20] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 1
[swscaler @ 0x7f7840] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 2
[swscaler @ 0xb9e6c0] No accelerated colorspace conversion found from yuv422p to bgr24.
Frame: 3
</code></pre>

<p>Sometimes it hangs after the first <code>Estimating duration from bitrate</code> statement</p>
",2012-07-17 02:28:43,2016-09-23 17:40:48,OpenCV network (IP) camera frames per second slow after initial burst,<c++><opencv><ubuntu-12.04><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
5382,10360690,2012-04-28 04:51:34,,"<p>Is there a way to configure OpenCV to output runtime ""errors"" which seem they should be errors but are not reported at all?</p>

<p>For example, I had built OpenCV incorrectly so using some functionality (such as cvwriteframe) would simply not work - no runtime errors or anything, just no functionality. cvWriteFrame could be called with no print/error messages (even though it did not work). This was incredibly difficult and frustrating to trace since there is no console output, no compile error, no linker error, just no functionality.</p>

<p>Is there a way to configure the library when building to give feedback or something when this happens? My specific problem was caused by not properly linking to ffmpeg when I built OpenCV but <strong>nothing</strong> in building or running my app would ever have hinted at this being the root cause.</p>

<p>I am hoping, against hope, there is a way to do this, but nothing I've found indicates OpenCV will give the output I'm looking for though :(</p>
",,2012-09-14 15:58:15,"OpenCV Runtime ""Errors"" Not Shown",<c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
5502,14251290,2013-01-10 05:21:27,,"<p>At this moment I worked on recognition forms. It's perfect with camera of my computer, but now I would like test with a camera on network. I use JavaCV (OpenCV apply to Java).</p>

<p>This is my code:</p>

<pre><code>public static void main(String[] args) throws Exception {

    OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(""http://192.168.1.210:5500/snapshot.cgi?user=admin&amp;pwd=123456""); 
    grabber.setFormat(""mjpeg"");
    grabber.start();
    for (int k=0; k&lt;20000; k++){
        System.out.print(k);
    }
    IplImage frame = grabber.grab();
    CanvasFrame canvasFrame = new CanvasFrame(""Camera"");
    canvasFrame.setCanvasSize(frame.width(), frame.height());
    while (canvasFrame.isVisible() &amp;&amp; (frame = grabber.grab()) != null) {
        canvasFrame.showImage(frame);
    }
    grabber.stop();
    canvasFrame.dispose();
    System.exit(0);
}
</code></pre>

<p>And i  have a error but i don't understand.</p>

<blockquote>
  <p>Exception in thread ""main""
  com.googlecode.javacv.FrameGrabber$Exception: cvCreateFileCapture()
  Error: Could not create camera capture.   at
  com.googlecode.javacv.OpenCVFrameGrabber.start(OpenCVFrameGrabber.java:171)
    at Test.FrameRecorderTest.main(FrameRecorderTest.java:12) warning:
  Could not find codec parameters
  (../../modules/highgui/src/cap_ffmpeg_impl.hpp:375)</p>
</blockquote>

<p>in starting i thought it was my address for take my picture of camera but i tested in Mozilla/IE and i can have the image. So i think the address is OK. And if i change my adress by a video it's ok.
I think... Maybe it's because i take picture of my camera and not a video.. i think... If it's this how i can choose between video and picture ?</p>

<hr>

<p>UPDATE: I now changed my method and now it's ok. I think that it was because I took a picture with a code for a video. </p>

<pre><code>package Test;

import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import javax.imageio.ImageIO;
import com.googlecode.javacv.CanvasFrame;
public class TestconnectionCamera {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        CanvasFrame CamWindow = new CanvasFrame(""Camera"");

        String Cam1Jpeg_url = ""http://192.168.1.210:5500/snapshot.cgi?user=admin&amp;pwd=123456"";
        URL url = new URL(Cam1Jpeg_url);

        while(true){
        InputStream is = url.openStream();
        BufferedImage image = ImageIO.read(is);
        CamWindow.showImage(image);
        is.close();
        }
    }
}
</code></pre>
",2013-10-21 20:19:15,2013-10-21 20:19:15,cvCreateFileCapture() Error: Could not create camera capture with JavaCV,<camera><ip><javacv><pattern-recognition>,,,CC BY-SA 3.0,True,False,False,False,True
5620,9387392,2012-02-22 00:19:48,,"<p>So I'm trying to write a video using the openCV videoWriter as such:</p>

<pre><code>writer=cv.CreateVideoWriter(path+""test_output.avi"",-1,fps,(W,H),1)
</code></pre>

<p>So instead of supplying the FOURCC I supplied -1 in order to see what codecs I have available.
Result was Microsoft RLE, Microsoft Video 1, Intel YUV, and Uncompressed. </p>

<p>The reason is that when configuring openCV using CMAKE for Visual Studio 10 x64, this is what I have in the video i/o:
 Video I/O:                    DirectShow</p>

<p>Is there a way to switch this to FFMPEG? I know the ffmpeg dll is present in \3dparty\ffmpeg.
I looked for Cmake FFMPEG flags but found none whatsoever. The weird thing is in the CmakeLists.txt in the opencv root under the video section:</p>

<pre><code>if(UNIX AND NOT APPLE)
&lt;FFMPEG stuff&gt;
elseif(WIN32)
    status(""  Video I/O:""        HAVE_VIDEOINPUT     THEN DirectShow ELSE NO)
endif()
</code></pre>

<p>So it seems to me that opencv automatically switched to DirectShow and gives no choice of using FFMpeg.
Or rather can one upgrade Driectshow to support other formats such as Divx or h264?
Any ideas?</p>
",,2012-05-02 20:38:10,how can I use the openCV FFMPEG video I/O rather than the DirectShow one in Windows?,<opencv><ffmpeg><cmake><directshow>,,,CC BY-SA 3.0,True,False,False,False,True
5786,9399906,2012-02-22 17:29:37,,"<p>I have several videos that I am trying to process using OpenCV and Qt 4.7.4 on Mac OS 10.6.8 (Snow Leopard). If I create a  <code>cv::VideoCapture</code> object and then query for the frame rate related to such video, what I get back is the TBR and not FPS. </p>

<p>For instance if use <code>ffprobe Video1.mp4</code> what I get is:</p>

<pre><code>&gt;&gt; ffprobe Video1.mp4      
ffprobe version 0.7.8, Copyright (c) 2007-2011 the FFmpeg developers
built on Nov 24 2011 14:31:00 with gcc 4.2.1 (Apple Inc. build 5666) (dot 3)
configuration: --prefix=/opt/local --enable-gpl --enable-postproc --enable-swscale --   
enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-
libdirac --enable-libschroedinger --enable-libopenjpeg --enable-libxvid --enable-libx264 
--enable-libvpx --enable-libspeex --mandir=/opt/local/share/man --enable-shared --
enable-pthreads --cc=/usr/bin/gcc-4.2 --arch=x86_64 --enable-yasm
libavutil    50. 43. 0 / 50. 43. 0
libavcodec   52.123. 0 / 52.123. 0
libavformat  52.111. 0 / 52.111. 0
libavdevice  52.  5. 0 / 52.  5. 0
libavfilter   1. 80. 0 /  1. 80. 0
libswscale    0. 14. 1 /  0. 14. 1
libpostproc  51.  2. 0 / 51.  2. 0

Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'Video1.mp4':
Metadata:
major_brand     : isom
minor_version   : 0
compatible_brands: mp41avc1qt  
creation_time   : 2012-01-09 23:09:43
encoder         : vlc 1.1.3 stream output
encoder-eng     : vlc 1.1.3 stream output
Duration: 00:10:10.22, start: 0.000000, bitrate: 800 kb/s
Stream #0.0(eng): Video: h264 (Baseline), yuvj420p, 704x480 [PAR 10:11 DAR 4:3], 798 
kb/s, 27.71 fps, 1001 tbr, 1001 tbn, 2002 tbc
Metadata:
  creation_time   : 2012-01-09 23:09:43
</code></pre>

<p>Which correctly reports FPS = 27.71 and TBR = 1001. Nevertheless if I use the following OpenCV code to query for the FPS:</p>

<pre><code>QString filename = QFileDialog::getOpenFileName(this,
                                        ""Open Video"",
                                        ""Video Files (*.mp4, *.mpg)"");

capture.release();
capture.open(filename.toAscii().data());

if (!capture.isOpened()){
    qDebug() &lt;&lt;""Error when opening the video!"";
    return;
}


qDebug() &lt;&lt; ""Frame Rate:"" &lt;&lt; capture.get(CV_CAP_PROP_FPS);
qDebug() &lt;&lt; ""Num of Frames:"" &lt;&lt; capture.get(CV_CAP_PROP_FRAME_COUNT);
qDebug() &lt;&lt; ""OpenCV Version"" &lt;&lt; CV_VERSION;
</code></pre>

<p>The output I get is:</p>

<pre><code>Frame Rate: 1001 
Num of Frames: 610832 
OpenCV Version 2.3.1 
</code></pre>

<p>Which reports the TBR instead of the FPS. This behavior is consistent when I try to open different videos. </p>

<p>I checked OpenCV's <a href=""http://code.opencv.org/projects/opencv/issues"" rel=""nofollow noreferrer"">bug tracker</a> and I also found <a href=""https://stackoverflow.com/questions/4352939/opencv-doesnt-report-accurate-frame-rate-count"">this</a> stack overflow question to be a similar but not quite the same problem, so I am at a loss to what to do next. Any hint or idea is most welcome since I've tried lots of things and seem to be getting nowhere.</p>
",2017-05-23 12:20:03,2012-02-22 18:12:02,OpenCV Reporting TBR instead of FPS when using capture.get(CV_CAP_PROP_FPS),<c++><qt><opencv><ffmpeg><osx-snow-leopard>,,,CC BY-SA 3.0,True,False,False,False,True
5903,15244758,2013-03-06 10:27:25,,"<p>I want to extract information of a video file to get the count of its I/P/B frames. How to do it in ffmpeg? Or should I programming using libavformat and libavcodec to do it? Many thanks!</p>
",,2013-04-06 19:42:52,How to get number of I/P/B frames of a video file?,<video><opencv><ffmpeg><libavcodec><libavformat>,,,CC BY-SA 3.0,True,False,False,False,True
6067,15254397,2013-03-06 17:49:03,,"<p>I've a BeagleBone running <a href=""https://en.wikipedia.org/wiki/%C3%85ngstr%C3%B6m_distribution"" rel=""nofollow noreferrer"">Ångström Linux</a> 3.2.28, and I'm trying to capture a frame from my camera.</p>

<p>So I plug in my USB webcam, and check <code>/dev</code> to ensure it shows up.</p>

<p>It does, as <code>video0</code> (bottom right). I know this is correct, because it disappears after I've unplugged the camera.</p>

<p><img src=""https://i.stack.imgur.com/RkzdQ.png"" alt="" (bo""></p>

<p>So now I fire up Python and run the following:</p>

<pre><code>root@beaglebone:/dev# python
Python 2.7.2 (default, Sep 11 2012, 16:15:43)
[GCC 4.5.4 20120305 (prerelease)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import cv
&gt;&gt;&gt; capture=cv.CaptureFromCAM(-1)
&gt;&gt;&gt; img=cv.QueryFrame(capture)
&gt;&gt;&gt; type(capture)
&lt;type 'cv2.Capture'&gt;
&gt;&gt;&gt; type(img)
&lt;type 'NoneType'&gt;
</code></pre>

<p>As you can see, I am able to create the capture object sufficiently, but I am unable to pull a frame from it. I have also tried this with different (or no) integer arguments for the camera ID (the <code>-1</code> in the code above) to no avail.</p>

<p>For reference, running the same code on my laptop in <a href=""http://en.wikipedia.org/wiki/IPython"" rel=""nofollow noreferrer"">IPython</a> looks like this:</p>

<pre><code>In [1]: import cv
In [2]: capture=cv.CaptureFromCAM(-1)
In [3]: img=cv.QueryFrame(capture)
In [4]: type(capture)
Out[4]: cv2.Capture
In [5]: type(img)
Out[5]: cv2.cv.iplimage
</code></pre>

<p>You can see that here I am indeed capturing an image. I am not sure exactly where to go from here.</p>

<p>UPDATE:</p>

<p>I've played around a bit with <a href=""http://en.wikipedia.org/wiki/FFmpeg"" rel=""nofollow noreferrer"">FFmpeg</a> and am able to get the camera to respond (that is, its light goes on) by issuing the following command:</p>

<pre><code>root@beaglebone:/# ffmpeg -f video4linux2 -i /dev/video0
</code></pre>

<p>Which is interesting because <a href=""http://opencv.willowgarage.com/documentation/python/highgui_reading_and_writing_images_and_video.html?highlight=capturefromcam#capturefromcam"" rel=""nofollow noreferrer"">apparently</a> <code>CaptureFromCAM</code> uses the V4L interface... I am not sure where to go from here.</p>
",2015-01-22 22:04:52,2015-01-22 22:12:56,Getting BeagleBone to capture a still frame using OpenCV,<linux><opencv><beagleboard><angstrom-linux><video4linux>,,,CC BY-SA 3.0,True,False,False,False,True
6101,9429342,2012-02-24 10:41:50,,"<p>My goal is to proceed on audio and video of mpeg-2 file independently, and to keep synchronicity on both flows. Duration of video is about 1 or 2 minutes maximum.</p>

<ol>
<li><p>First, following this <a href=""https://stackoverflow.com/questions/8187745/audio-output-with-video-processing-with-opencv"">post</a> ""opencv for reading videos (and do the process),ffmpeg for audio , and SDL used to play both"" sounds perfect. I have done some modification on the code considering recent ffmpeg naming changes. Compilation with cmake on 64-bits machine is fine. I get an error ""Unsupported codec [3]"" when opening codec.
The code is following.</p></li>
<li><p>Second, I looking for code dealing with synchronicity on both flows.</p></li>
</ol>

<hr>

<pre><code>#include ""opencv/highgui.h""
#include ""opencv/cv.h""

#ifndef INT64_C
#define INT64_C(c) (c ## LL)
#define UINT64_C(c) (c ## ULL)
#endif

extern ""C""{
#include &lt;SDL/SDL.h&gt;
#include &lt;SDL/SDL_thread.h&gt;
#include &lt;libavcodec/avcodec.h&gt;
#include &lt;libavformat/avformat.h&gt;
}

#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;malloc.h&gt;

using namespace cv;

#define SDL_AUDIO_BUFFER_SIZE 1024

typedef struct PacketQueue
{
   AVPacketList *first_pkt, *last_pkt;
   int nb_packets;
   int size;
   SDL_mutex *mutex;
   SDL_cond *cond;
} PacketQueue;
PacketQueue audioq;

int audioStream = -1;
int videoStream = -1;
int quit = 0;

SDL_Surface* screen = NULL;
SDL_Surface* surface = NULL;

AVFormatContext* pFormatCtx = NULL;
AVCodecContext* aCodecCtx = NULL;
AVCodecContext* pCodecCtx = NULL;

void show_frame(IplImage* img){
   if (!screen){
      screen = SDL_SetVideoMode(img-&gt;width, img-&gt;height, 0, 0);
      if (!screen){
         fprintf(stderr, ""SDL: could not set video mode - exiting\n"");
         exit(1);
      }
   }
   // Assuming IplImage packed as BGR 24bits
   SDL_Surface* surface = SDL_CreateRGBSurfaceFrom((void*)img-&gt;imageData,
                                                   img-&gt;width,
                                                   img-&gt;height,
                                                   img-&gt;depth * img-&gt;nChannels,
                                                   img-&gt;widthStep,
                                                   0xff0000, 0x00ff00, 0x0000ff, 0
                                                  );

   SDL_BlitSurface(surface, 0, screen, 0);
   SDL_Flip(screen);
}

void packet_queue_init(PacketQueue *q){
   memset(q, 0, sizeof(PacketQueue));
   q-&gt;mutex = SDL_CreateMutex();
   q-&gt;cond = SDL_CreateCond();
}

int packet_queue_put(PacketQueue *q, AVPacket *pkt){
   AVPacketList *pkt1;
   if (av_dup_packet(pkt) &lt; 0){
      return -1;
   }

   pkt1 = (AVPacketList*) av_malloc(sizeof(AVPacketList));
   //pkt1 = (AVPacketList*) malloc(sizeof(AVPacketList));
   if (!pkt1) return -1;
   pkt1-&gt;pkt = *pkt;
   pkt1-&gt;next = NULL;

   SDL_LockMutex(q-&gt;mutex);

   if (!q-&gt;last_pkt)
      q-&gt;first_pkt = pkt1;
   else
      q-&gt;last_pkt-&gt;next = pkt1;

   q-&gt;last_pkt = pkt1;
   q-&gt;nb_packets++;
   q-&gt;size += pkt1-&gt;pkt.size;
   SDL_CondSignal(q-&gt;cond);

   SDL_UnlockMutex(q-&gt;mutex);
   return 0;
}

static int packet_queue_get(PacketQueue *q, AVPacket *pkt, int block){
   AVPacketList *pkt1;
   int ret;

   SDL_LockMutex(q-&gt;mutex);
   for (;;){
      if( quit){
         ret = -1;
         break;
      }

      pkt1 = q-&gt;first_pkt;
      if (pkt1){
         q-&gt;first_pkt = pkt1-&gt;next;
         if (!q-&gt;first_pkt)
            q-&gt;last_pkt = NULL;

         q-&gt;nb_packets--;
         q-&gt;size -= pkt1-&gt;pkt.size;
         *pkt = pkt1-&gt;pkt;
         av_free(pkt1);
         //free(pkt1);
         ret = 1;
         break;
      }

      else if (!block){
         ret = 0;
         break;
      }
      else{
         SDL_CondWait(q-&gt;cond, q-&gt;mutex);
      }
   }

   SDL_UnlockMutex(q-&gt;mutex);
   return ret;
}

int audio_decode_frame(AVCodecContext *aCodecCtx, uint8_t *audio_buf, int buf_size){
   static AVPacket pkt;
   static uint8_t *audio_pkt_data = NULL;
   static int audio_pkt_size = 0;

   int len1, data_size;

   for (;;){
      while (audio_pkt_size &gt; 0){
         data_size = buf_size;
         len1 = avcodec_decode_audio3(aCodecCtx, (int16_t*)audio_buf, &amp;data_size, &amp;pkt);
         if (len1 &lt; 0){
            // if error, skip frame
            audio_pkt_size = 0;
            break;
         }
         audio_pkt_data += len1;
         audio_pkt_size -= len1;
         if (data_size &lt;= 0){
            // No data yet, get more frames
            continue;
         }
         // We have data, return it and come back for more later
         return data_size;
     }

     if (pkt.data)
        av_free_packet(&amp;pkt);
     if (quit) return -1;
     if (packet_queue_get(&amp;audioq, &amp;pkt, 1) &lt; 0) return -1;
     audio_pkt_data = pkt.data;
     audio_pkt_size = pkt.size;
  }
}

void audio_callback(void *userdata, Uint8 *stream, int len){
  AVCodecContext *aCodecCtx = (AVCodecContext *)userdata;
  int len1, audio_size;

  static uint8_t audio_buf[(AVCODEC_MAX_AUDIO_FRAME_SIZE * 3) / 2];
  static unsigned int audio_buf_size = 0;
  static unsigned int audio_buf_index = 0;

  while (len &gt; 0){
     if (audio_buf_index &gt;= audio_buf_size){
        // We have already sent all our data; get more
        audio_size = audio_decode_frame(aCodecCtx, audio_buf, sizeof(audio_buf));
        if(audio_size &lt; 0){
           // If error, output silence
           audio_buf_size = 1024; // arbitrary?
           memset(audio_buf, 0, audio_buf_size);
        }
        else{
           audio_buf_size = audio_size;
        }
        audio_buf_index = 0;
    }

    len1 = audio_buf_size - audio_buf_index;
    if (len1 &gt; len)
       len1 = len;
    memcpy(stream, (uint8_t *)audio_buf + audio_buf_index, len1);
    len -= len1;
    stream += len1;
    audio_buf_index += len1;
  }
}

     void setup_ffmpeg(char* filename)
     {
        if (avformat_open_input(&amp;pFormatCtx, filename, NULL, NULL) != 0){
           fprintf(stderr, ""FFmpeg failed to open file %s!\n"", filename);
           exit(-1);
        }

        if (av_find_stream_info(pFormatCtx) &lt; 0){
           fprintf(stderr, ""FFmpeg failed to retrieve stream info!\n"");
           exit(-1);
        }

        // Dump information about file onto standard error
        av_dump_format(pFormatCtx, 0, filename, 0);

        // Find the first video stream
        int i = 0;
        for (i; i &lt; pFormatCtx-&gt;nb_streams; i++){
           if (pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type == AVMEDIA_TYPE_VIDEO &amp;&amp; videoStream &lt; 0){
              videoStream = i;
           }

           if (pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type == AVMEDIA_TYPE_VIDEO &amp;&amp; audioStream &lt; 0){
              audioStream = i;
           }
        }

        if (videoStream == -1){
           fprintf(stderr, ""No video stream found in %s!\n"", filename);
           exit(-1);
        }

        if (audioStream == -1){
           fprintf(stderr, ""No audio stream found in %s!\n"", filename);
           exit(-1);
        }

        // Get a pointer to the codec context for the audio stream
        aCodecCtx = pFormatCtx-&gt;streams[audioStream]-&gt;codec;

        // Set audio settings from codec info
        SDL_AudioSpec wanted_spec;
        wanted_spec.freq = aCodecCtx-&gt;sample_rate;
        wanted_spec.format = AUDIO_S16SYS;
        wanted_spec.channels = aCodecCtx-&gt;channels;
        wanted_spec.silence = 0;
        wanted_spec.samples = SDL_AUDIO_BUFFER_SIZE;
        wanted_spec.callback = audio_callback;
        wanted_spec.userdata = aCodecCtx;

        SDL_AudioSpec spec;
        if (SDL_OpenAudio(&amp;wanted_spec, &amp;spec) &lt; 0){
           fprintf(stderr, ""SDL_OpenAudio: %s\n"", SDL_GetError());
           exit(-1);
        }

        AVCodec* aCodec = avcodec_find_decoder(aCodecCtx-&gt;codec_id);
        if (!aCodec){
           fprintf(stderr, ""Unsupported codec [1]!\n"");
           exit(-1);
        }
        avcodec_open(aCodecCtx, aCodec);

        // audio_st = pFormatCtx-&gt;streams[index]
        packet_queue_init(&amp;audioq);
        SDL_PauseAudio(0);

        // Get a pointer to the codec context for the video stream
        pCodecCtx = pFormatCtx-&gt;streams[videoStream]-&gt;codec;

        // Find the decoder for the video stream
        AVCodec* pCodec = avcodec_find_decoder(pCodecCtx-&gt;codec_id);
        if (pCodec == NULL){
           fprintf(stderr, ""Unsupported codec [2]!\n"");
           exit(-1); // Codec not found
        }

        // Open codec
        if (avcodec_open(pCodecCtx, pCodec) &lt; 0){
           fprintf(stderr, ""Unsupported codec [3]!\n"");
           exit(-1); // Could not open codec
        }
     }


     int main(int argc, char* argv[])
     {
        if (argc &lt; 2){
            std::cout &lt;&lt; ""Usage: "" &lt;&lt; argv[0] &lt;&lt; "" &lt;video&gt;"" &lt;&lt; std::endl;
            return -1;
        }

        av_register_all();

        // Init SDL
        if (SDL_Init(SDL_INIT_VIDEO | SDL_INIT_AUDIO | SDL_INIT_TIMER))
        {
           fprintf(stderr, ""Could not initialize SDL - %s\n"", SDL_GetError());
           return -1;
        }

        // Init ffmpeg and setup some SDL stuff related to Audio
        setup_ffmpeg(argv[1]);

        VideoCapture cap(argv[1]);
        if (!cap.isOpened()){
           std::cout &lt;&lt; ""Failed to load file!"" &lt;&lt; std::endl;
           return -1;
        }

        AVPacket packet;
        while (av_read_frame(pFormatCtx, &amp;packet) &gt;= 0)
        {
           if (packet.stream_index == videoStream)
           {
              // Actually this is were SYNC between audio/video would happen.
              // Right now I assume that every VIDEO packet contains an entire video frame, and that's not true. A video frame can be made by multiple packets!
              // But for the time being, assume 1 video frame == 1 video packet,
              // so instead of reading the frame through ffmpeg, I read it through OpenCV.

              Mat frame;
              cap &gt;&gt; frame; // get a new frame from camera

              // do some processing on the frame, either as a Mat or as IplImage.
              // For educational purposes, applying a lame grayscale conversion
              IplImage ipl_frame = frame;
              for (int i = 0; i &lt; ipl_frame.width * ipl_frame.height * ipl_frame.nChannels; i += ipl_frame.nChannels)
              {
                 ipl_frame.imageData[i] = (ipl_frame.imageData[i] + ipl_frame.imageData[i+1] + ipl_frame.imageData[i+2])/3;   //B
                 ipl_frame.imageData[i+1] = (ipl_frame.imageData[i] + ipl_frame.imageData[i+1] + ipl_frame.imageData[i+2])/3; //G
                 ipl_frame.imageData[i+2] = (ipl_frame.imageData[i] + ipl_frame.imageData[i+1] + ipl_frame.imageData[i+2])/3; //R
              }

              // Display it on SDL window
              show_frame(&amp;ipl_frame);

              av_free_packet(&amp;packet);
           }
           else if (packet.stream_index == audioStream)
           {
              packet_queue_put(&amp;audioq, &amp;packet);
           }
           else
           {
              av_free_packet(&amp;packet);
           }

           SDL_Event event;
           SDL_PollEvent(&amp;event);
           switch (event.type)
           {
           case SDL_QUIT:
              SDL_FreeSurface(surface);
              SDL_Quit();
              break;

           default:
              break;
           }
        }

        // the camera will be deinitialized automatically in VideoCapture destructor

        // Close the codec
        avcodec_close(pCodecCtx);

        // Close the video file
        av_close_input_file(pFormatCtx);

        return 0;
     }
</code></pre>
",2017-05-23 11:52:33,2013-05-06 16:17:58,"Decode audio and video and process both streams -- ffmpeg, sdl, opencv",<c++><opencv><ffmpeg><sdl>,,,CC BY-SA 3.0,True,True,False,False,True
6265,9444208,2012-02-25 12:58:24,,"<p>Following my other <a href=""https://stackoverflow.com/questions/9429342/decode-audio-and-video-and-process-both-streams-ffmpeg-sdl-opencv"">post</a>, I am wondernig if it is possible to do some process like MFCC extraction on the decoded audio packets. The code I use decode audio and video from mpeg-2 file using ffmpeg. Process on video is done using opencv as this library permits to grab frames on by one. I need to process the corresponding audio samples in the same time.</p>

<p>Thanks. </p>
",2017-05-23 12:03:33,2018-10-14 00:36:59,Process audio packets decoded with ffmpeg,<c++><audio><opencv><ffmpeg><htk>,,,CC BY-SA 3.0,True,False,False,False,True
6386,15288668,2013-03-08 07:15:39,,"<p>I am having pretty much the exact problem that was described here:</p>

<p><a href=""https://stackoverflow.com/questions/12279833/videocapture-opencv-2-4-2-error-in-windows"">VideoCapture OpenCV 2.4.2 error in windows</a></p>

<p>None of the suggestions provided were helpful, so I thought I would ask again. I am using Visual Studio 2010 Express on Windows 7, but I have also tried Visual Studio 2008 Professional with exactly the same result. I am able to compile and when I run the application, all the DLLs I expect are being loaded (there are no DLLs from other versions of OpenCV being inadvertently loaded). Are there any other things I can do to debug this? I am using a Creative Live! cam socialize HD AF. I think other people have been able to get this camera to work with OpenCV. When I run the following code:</p>

<pre><code>#include ""opencv2/opencv.hpp""
#include &lt;iostream&gt;
using namespace cv;
using namespace std;

int main(int, char**)
{
    VideoCapture cap(""0""); // open the default camera
    if(!cap.isOpened())  // check if we succeeded
       {
     cout &lt;&lt; ""Error opening camera!"";
     getchar();
     return -1;
 }
    // the camera will be deinitialized automatically in VideoCapture destructor
    return 0;
}
</code></pre>

<p>I always get the following message:</p>

<p>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:365)
Error opening camera!</p>

<p>I would very much appreciate any advice. Thanks!</p>
",2017-05-23 10:32:02,2013-03-08 07:15:39,Video problems with OpenCV 2.4.3,<opencv><video-capture>,,,CC BY-SA 3.0,True,False,False,False,True
6495,10456727,2012-05-04 22:06:48,,"<p>I just installed OpenCV 2.4 from source on Ubuntu 12.04. I'm trying to use a Python script to write the first frame of a video to a PNG image, but I'm getting some bizarre results. Here's the code:</p>

<pre><code>import numpy as np
import cv
import cv2
import sys

video = cv.CaptureFromFile(sys.argv[1])
frame = cv.QueryFrame(video)
proxy = cv.CreateImage(cv.GetSize(frame), 8, 1)
cv.CvtColor(frame, proxy, cv.CV_BGR2GRAY)
a = np.asarray(cv.GetMat(proxy))
cv2.imwrite('image.png', a)
</code></pre>

<p>Problem is, the image comes out looking like this:</p>

<p><img src=""https://i.stack.imgur.com/4q4l7.png"" alt=""half complete something or other""></p>

<p>These are AVI files and otherwise seem to be fine. Any ideas?</p>

<p><b>Edit #1:</b> Apologies, here is the ffmpeg version information:</p>

<pre><code>ffmpeg version 0.10.2-4:0.10.2-0ubuntu0jon1
built on Mar 18 2012 09:59:38 with gcc 4.6.3
configuration: --extra-version='4:0.10.2-0ubuntu0jon1' --arch=amd64 --prefix=/usr --libdir=/usr/lib/x86_64-linux-gnu --disable-stripping --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --enable-libvpx --enable-runtime-cpudetect --enable-libfreetype --enable-vaapi --enable-frei0r --enable-gpl --enable-postproc --enable-x11grab --enable-librtmp --enable-libvo-aacenc --enable-version3 --enable-libvo-amrwbenc --enable-version3 --enable-libdc1394 --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
libavutil      51. 35.100 / 51. 35.100
libavcodec     53. 61.100 / 53. 61.100
libavformat    53. 32.100 / 53. 32.100
libavdevice    53.  4.100 / 53.  4.100
libavfilter     2. 61.100 /  2. 61.100
libswscale      2.  1.100 /  2.  1.100
libswresample   0.  6.100 /  0.  6.100
libpostproc    52.  0.100 / 52.  0.100
</code></pre>

<p><b>Edit #2:</b> In my own troubleshooting, I upgraded ffmpeg from the default 12.04 ubuntu version to the one you see in Edit #1 above. This seems to have changed things a little bit: the video which generated the frame in this question now seems to work fine, but larger videos still present with corrupted bottom halves (or bottom thirds, or fourths). Even larger videos actually segfault entirely. I'm not really sure what to make of this, other than--yet again--faulty or missing codecs. It segfaults right on the <code>QueryFrame</code> step.</p>

<p><b>Edit #3:</b> I changed the code to make exclusive use of the cv2 interface (as per a link in one of the comments below). Now, <code>video.retrieve()</code> always returns <code>False</code> and no image is written.</p>

<p><b>Edit #4:</b> I ran the following command on the video before using the new cv2 interface to read the video frames:</p>

<pre><code>ffmpeg -sameq -i normal.avi p_normal.avi
</code></pre>

<p>The output of the command looked ok except for this one line following the initialization of ffmpeg and its description of the input:</p>

<blockquote>
  <p>Incompatible pixel format 'pal8' for codec 'mpeg4', auto-selecting
  format 'yuv420p'</p>
</blockquote>

<p>Here's the full output of the command:</p>

<pre><code>Input #0, avi, from 'normal.avi':
  Duration: 00:01:37.60, start: 0.000000, bitrate: 1312 kb/s
    Stream #0:0: Video: rawvideo, pal8, 128x256, 5 tbr, 5 tbn, 5 tbc
Incompatible pixel format 'pal8' for codec 'mpeg4', auto-selecting format 'yuv420p'
[buffer @ 0x11a0f80] w:128 h:256 pixfmt:pal8 tb:1/1000000 sar:0/1 sws_param:
[buffersink @ 0x11a1380] auto-inserting filter 'auto-inserted scale 0' between the filter 'src' and the filter 'out'
[scale @ 0x1197da0] w:128 h:256 fmt:pal8 -&gt; w:128 h:256 fmt:yuv420p flags:0x4
Output #0, avi, to 'p_normal.avi':
  Metadata:
    ISFT            : Lavf53.32.100
    Stream #0:0: Video: mpeg4 (FMP4 / 0x34504D46), yuv420p, 128x256, q=2-31, 200 kb/s, 5 tbn, 5 tbc
Stream mapping:
  Stream #0:0 -&gt; #0:0 (rawvideo -&gt; mpeg4)
Press [q] to stop, [?] for help
frame=  488 fps=  0 q=0.0 Lsize=    1497kB time=00:01:37.60 bitrate= 125.6kbits/s    
video:1480kB audio:0kB global headers:0kB muxing overhead 1.165352%
</code></pre>

<p>Most importantly, the Python OpenCV code to read the frame (using the cv2 interface) still returns False (same behavior as before).</p>

<p><b>Edit #5:</b> I have so far followed the instructions <a href=""https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide"" rel=""nofollow noreferrer"">found here</a> for installing ffmpeg and its dependencies from source, and that went smoothly. Without reinstalling OpenCV from source, I am still encountering the same problem as before where <code>video.retrieve()</code> returns False. In attempting to recompile OpenCV 2.4 from source, I am getting the following error during compilation:</p>

<pre><code>Linking CXX shared library ../../lib/libopencv_highgui.so
/usr/bin/ld: /usr/local/lib/libavcodec.a(avpacket.o): relocation R_X86_64_32S against `av_destruct_packet' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavcodec.a: could not read symbols: Bad value
</code></pre>

<p>If I recompile x264, libvpx, and ffmpeg with the <code>--enable-pic</code> flag, OpenCV compilation still fails, this time with (<code>kdbwin.o</code>, <code>.rodata</code>) instead of (<code>avpacket.o</code>, <code>av_destruct_packet</code>) respectively in the snippet above.</p>

<p><b>Edit #6:</b> Fixed the above error by adding <code>--enable-shared</code> to the configuration options of libvpx and ffmpeg. OpenCV recompiled and built successfully, and ffmpeg worked just fine. Sadly, after running the previous command (<code>ffmpeg -sameq -i normal.avi p_normal.avi</code>), my script <i>still</i> couldn't retrieve any frames; the flag returned was still False. Any further ideas?</p>

<p><b>Edit #7:</b> Here's the latest script I'm using.</p>

<pre><code>import numpy as np
import cv2
import sys

video = cv2.VideoCapture(sys.argv[1])
flag, frame = video.retrieve()
if not flag:
  print 'Error'
  quit()
proxy = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
cv2.imwrite('image.png', proxy)
</code></pre>

<p><b>Edit #8:</b> Got it! Here's what the code should be:</p>

<pre><code>import numpy as np
import cv2
import sys

video = cv2.VideoCapture(sys.argv[1])
if video.grab():
  flag, frame = video.retrieve()
  if not flag:
    print 'Error'
    quit()
  proxy = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
  cv2.imwrite('image.png', proxy)
</code></pre>
",2012-05-07 23:41:46,2012-05-07 23:41:46,Python OpenCV 2.4 writes half-complete PNG video frames,<python><video><opencv><video-processing>,,2012-05-07 18:58:21,CC BY-SA 3.0,True,False,False,False,True
6519,15299691,2013-03-08 17:18:45,,"<p>I was trying to deploy a simple Qt Opencv Application, the following is the code:</p>

<p>Qt: .pro file:</p>

<pre><code>QT       += core gui
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets
TARGET = opencvVideoTest
TEMPLATE = app

SOURCES += main.cpp\
    mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui

INCLUDEPATH = -I/usr/local/include

LIBS += -lm -lopencv_core -lopencv_highgui -lopencv_imgproc
</code></pre>

<p>Mainwindow.cpp:</p>

<pre><code>#include ""mainwindow.h""
#include ""ui_mainwindow.h""
#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv/cv.h&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;opencv2/imgproc/imgproc.hpp&gt;


MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui-&gt;setupUi(this);

    cv::Mat img;

   cv::VideoCapture cap(""BMWM5.avi"");

   if(cap.isOpened()){

   for(;;){
       cap.read(img);
       cv::resize(img,img,cv::Size(604,480));
       cv::imshow(""Opencv"", img);
       cv::waitKey(33);
   }
   }
   else{

   }


}

MainWindow::~MainWindow()
{
    delete ui;
}
</code></pre>

<p>The above snippet works fine on the development machine, which by the has Opencv 2.4.3, ffmpeg 1.1.2 &amp; Qt 5.0.1. This what happens when I try to deploy, running the otool before using macdeployqt and the output:</p>

<pre><code>&gt;   /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current
 version 169.3.0)   /usr/local/opt/opencv/lib/libopencv_core.2.4.3.dylib
 (compatibility version 2.4.0, current version 2.4.3)
 &gt;  /usr/local/opt/opencv/lib/libopencv_highgui.2.4.3.dylib
 (compatibility version 2.4.0, current version 2.4.3)
&gt;   /usr/local/opt/opencv/lib/libopencv_imgproc.2.4.3.dylib
   (compatibility version 2.4.0, current version 2.4.3)
&gt;   /usr/local/Qt5.0.1/5.0.1/clang_64/lib/QtWidgets.framework/Versions/5/QtWidgets
  (compatibility version 5.0.0, current version 5.0.1)
&gt;   /usr/local/Qt5.0.1/5.0.1/clang_64/lib/QtGui.framework/Versions/5/QtGui
  (compatibility version 5.0.0, current version 5.0.1)
&gt;   /usr/local/Qt5.0.1/5.0.1/clang_64/lib/QtCore.framework/Versions/5/QtCore
  (compatibility version 5.0.0, current version 5.0.1)
&gt;   /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
  (compatibility version 1.0.0, current version 1.0.0)
&gt;   /System/Library/Frameworks/AGL.framework/Versions/A/AGL
  (compatibility version 1.0.0, current version 1.0.0)
&gt;   /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current
  version 56.0.0)
</code></pre>

<p>otool after macdeployqt output:</p>

<blockquote>
<pre><code>/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
    @executable_path/../Frameworks/libopencv_core.2.4.3.dylib (compatibility version 2.4.0, current version 2.4.3)
  @executable_path/../Frameworks/libopencv_highgui.2.4.3.dylib (compatibility version 2.4.0, current version 2.4.3)
  @executable_path/../Frameworks/libopencv_imgproc.2.4.3.dylib (compatibility version 2.4.0, current version 2.4.3)
  @executable_path/../Frameworks/QtWidgets.framework/Versions/5/QtWidgets
</code></pre>
  
  <p>(compatibility version 5.0.0, current version 5.0.1)
        @executable_path/../Frameworks/QtGui.framework/Versions/5/QtGui (compatibility version 5.0.0, current version 5.0.1)
        @executable_path/../Frameworks/QtCore.framework/Versions/5/QtCore (compatibility version 5.0.0, current version 5.0.1)
        /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL (compatibility version 1.0.0, current version 1.0.0)
        /System/Library/Frameworks/AGL.framework/Versions/A/AGL (compatibility version 1.0.0, current version 1.0.0)
        /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 56.0.0)</p>
</blockquote>

<p>But after deploying it, when I try and run the app on the user's machine it crashes, no error reported either, the exact samething used to happen in Windows but when I copied the opencv_ffmpeg.dll into the exe folder it worked fine. I tried to use the same logic here and failed, then I manually addded each lib files of all the ffmpeg and its dependency into the project folder and still failed. Any other solution, please help? I'm a newbie to mac dpeloyment. Am i missing or overlooked something?</p>
",2013-03-08 18:22:22,2013-03-08 18:22:22,"Opencv ffmpeg: Video capture (""Filename.avi"") crashes on a non development machine - MAC 10.8.2",<qt><opencv><deployment><ffmpeg><video-capture>,,,CC BY-SA 3.0,True,True,False,False,True
6675,12422953,2012-09-14 10:46:19,,"<p>I've got a problem with the cvCaptureFromFile function. It always returns NULL. I've done some research on the internet and I've added PATH to ffmpeg's ""bin"" directory.<br>
 But it's still the same. So I've tried to open the desired file with <code>ffplay.exe</code>. It returns an error which says ""Invalid data found when processing an input"". It is a ""mjpg"" file, which should be played with ffmpeg. Then I tried the same with some ""mpg"" file.<br>
Now the message is ""no such file or directory"" which is not true, because the file is in the place. What else should I do?
The files all right with Media-Player and VLC player.
Please help!</p>
",2012-09-14 10:51:53,2012-09-14 10:51:53,"cvCaptureFromFile always returns NULL, Visual Studio 2005",<opencv><ffmpeg><mjpeg>,,,CC BY-SA 3.0,True,False,False,False,True
6676,12423231,2012-09-14 11:03:47,,"<p>Could it be that there is a bug in <strong>OpenCV2.4 highgui</strong> for capturing frames from video in windows?</p>

<p>I installed both the precompiled libraries, the ones compiled by me, I can compile everything perfectly and I can run my programs if </p>

<p>they are image based. The problem is only for <strong>videos</strong>. OpenCV crashes in this function always:</p>

<pre><code> virtual IplImage* retrieveFrame(int)
    {
        unsigned char* data = 0;
        int step=0, width=0, height=0, cn=0;

        if(!ffmpegCapture ||
           !icvRetrieveFrame_FFMPEG_p(ffmpegCapture,&amp;data,&amp;step,&amp;width,&amp;height,&amp;cn)) &lt;-------CRASHES HERE
           return 0;
        cvInitImageHeader(&amp;frame, cvSize(width, height), 8, cn);
        cvSetData(&amp;frame, data, step);
        return &amp;frame;
    }
</code></pre>

<p>This is inside the class <strong>cap_ffmpeg.cpp</strong> and is called by <strong>VideoCapture</strong>.</p>

<p>I tried versions 2.4.2 and 2.4.9. My programes were working finde with opencv2</p>

<hr>

<p><strong>More information</strong></p>

<ul>
<li><p>Windows 7</p></li>
<li><p>Build the projects with cmake (important as it could be that cmake is not building/finding the right codecs)</p></li>
<li><p>VisualStudio 9 2008</p></li>
<li><p>OpenCV 2.4.2</p></li>
</ul>

<p><strong>EDIT</strong></p>

<p>It looks like it is actually a <a href=""http://code.opencv.org/issues/2115"">bug</a>, so, how can I solve this problem and change my code to be able to read avi files?</p>
",2012-09-14 11:37:14,2013-09-23 10:46:43,Possible bug in OpenCV2.4 capturing frames from video,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
6679,14350813,2013-01-16 03:13:41,,"<p>I am able to compile OpenCV on my Mac without gstreamer.</p>

<p>The problem is, gstreamer doesn't seem to be picked up by <code>cmake</code>, even though I have the following libraries installed via Macports:</p>

<pre><code>    ffmpeg-devel                   @20121205       multimedia/ffmpeg-devel
    ...
    gst-ffmpeg                     @0.10.13        gnome/gst-ffmpeg
    gst-plugins-bad                @0.10.23        gnome/gst-plugins-bad
    gst-plugins-base               @0.10.36        gnome/gst-plugins-base
    gst-plugins-gl                 @0.10.3         gnome/gst-plugins-gl
    gst-plugins-good               @0.10.31        gnome/gst-plugins-good
    gst-plugins-math               @0.1.0          science/gst-plugins-math
    gstreamer                      @0.10.36        gnome/gstreamer
</code></pre>

<p>My cmake generate log looks like this (most omitted):</p>

<pre><code>    --   Video I/O:
    --     DC1394 1.x:                  NO
    --     DC1394 2.x:                  YES (ver 2.1.3)
    --     FFMPEG:                      YES
    --       codec:                     YES (ver Unknown)
    --       format:                    YES (ver Unknown)
    --       util:                      YES (ver Unknown)
    --       swscale:                   YES (ver Unknown)
    --       gentoo-style:              YES
    --     OpenNI:                      NO
    --     OpenNI PrimeSensor Modules:  NO
    --     PvAPI:                       NO
    --     GigEVisionSDK:               NO
    --     QuickTime:                   NO
    --     QTKit:                       YES
</code></pre>

<p>As you can see, <code>gstreamer</code> doesn't exist on the generated logs.  </p>

<p>I am trying to use OpenCV for an Apexis IP Camera, which serves the video feed via HTTP.  With Gstreamer, I am able to build on Ubuntu 12.10 Server edition---and the IP Camera works---but I would prefer to be able to have a GUI session on my Mac.</p>

<p>Any insights are welcome.</p>
",,2018-10-31 02:40:23,Compile OpenCV 2.4.3-rc with gstreamer on Mac OS X 10.8,<macos><opencv><compilation><gstreamer><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
6714,11444926,2012-07-12 04:16:28,,"<p>I recently installed OpenCV 2.4.2 in Ubuntu 12.04. </p>

<pre><code>cap = VideoCapture(0)
</code></pre>

<p>is working. but I can't grab frames from some video source.</p>

<pre><code>cap = VideoCapture(""input.avi"")
img = cap.read() 
</code></pre>

<p>gives me a numpy with all zero elements.</p>

<p>I have also installed ffmpeg 0.11, Latest snapshot of x264, v4l-0.8.8 (All are latest stable versions)</p>

<pre><code>cmake -D WITH_QT=ON -D WITH_FFMPEG=ON -D WITH_OPENGL=ON -D WITH_TBB=ON -D BUILD_EXAMPLES=OFF WITH_V4L=ON .. 
make
sudo make install
</code></pre>

<p>When I do cmake, I get this</p>

<blockquote>
  <p>-- Detected version of GNU GCC: 46 (406)<br>
  -- Found OpenEXR: /usr/lib/libIlmImf.so<br>
  -- Looking for linux/videodev.h<br>
  -- Looking for linux/videodev.h - not found<br>
  -- Looking for linux/videodev2.h<br>
  -- Looking for linux/videodev2.h - found<br>
  -- Looking for libavformat/avformat.h<br>
  -- Looking for libavformat/avformat.h - found<br>
  -- Looking for ffmpeg/avformat.h<br>
  -- Looking for ffmpeg/avformat.h - not found<br>
  -- checking for module 'tbb'<br>
  --   package 'tbb' not found  </p>
</blockquote>

<p>And</p>

<pre><code>--   Video I/O:  
--     DC1394 1.x:                  NO  
--     DC1394 2.x:                  YES (ver 2.2.0)  
--     FFMPEG:                      YES  
--       codec:                     YES (ver 54.23.100)  
--       format:                    YES (ver 54.6.100)  
--       util:                      YES (ver 51.54.100)  
--       swscale:                   YES (ver 2.1.100)  
--       gentoo-style:              YES  
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)  
--       app:                       YES (ver 0.10.36)  
--       video:                     YES (ver 0.10.36)  
--     OpenNI:                      NO  
--     OpenNI PrimeSensor Modules:  NO  
--     PvAPI:                       NO  
--     UniCap:                      NO  
--     UniCap ucil:                 NO  
--     V4L/V4L2:                    Using libv4l (ver 0.8.8)  
--     XIMEA:                       NO  
--     Xine:                        NO
</code></pre>

<p>I looked for videodev.h, etc</p>

<ul>
<li>/usr/include/linux/videodev2.h exists  </li>
<li>/usr/include/libavformat/avformat.h exists  </li>
<li>/usr/local/include/libavformat/avformat.h exists  </li>
</ul>

<p>But I couldn't find <code>ffmpeg/avformat.h</code></p>

<p>What's the problem here?</p>
",2013-09-08 18:52:21,2016-05-31 11:15:29,VideoCapture is not working in OpenCV 2.4.2,<opencv><ffmpeg><video-capture><video-codecs>,,,CC BY-SA 3.0,True,False,False,False,True
6720,12427928,2012-09-14 15:51:04,,"<p>I cannot seem to configure OpenCV to link to a non-/usr/lib set of <code>FFMPEG</code> libraries.</p>

<p>My LD_LIBRARY_PATH contains a direct link to the folder for the custom install of FFMPEG:</p>

<p><code>LD_LIBRARY_PATH=/pathto/ffmpeg-0.10.2/lib</code></p>

<p>Additionally, I've configured pkgconfig as:</p>

<p><code>PKG_CONFIG_PATH=/samepathto/ffmpeg-0.10.2/lib/pkgconfig/</code></p>

<p>Within CMake however I cannot find any setting for path to FFMPEG - either in basic or custom. The only setting related to FFMPEG appears to be <code>WITH_FFMPEG</code> type setting (set to ON).</p>

<p>I can build OpenCV but it seems to link to the system libraries for libavcodec - this causes a conflict as the system libraries are version .52 and the version in my install of <code>FFMPEG</code> are .53. Linking an app on a machine without the same system libraries seems to NOT link to my custom install of OpenCV (specifically the libavcodec) because of this (I'm installing these libraries on a shared network folder).</p>

<p>I am not sure if my problem is with building and linking to the wrong version of FFMPEG or if it is something with my environment after building (and then linking to the wrong ffmpeg).</p>

<p>I am building on Linux, Redhat 6, OpenCV 2.3.1.</p>
",,2020-02-28 00:46:57,Configure and Build OpenCV to Custom FFMPEG Install,<linux><opencv><linker><ffmpeg><shared-libraries>,,,CC BY-SA 3.0,True,False,False,False,True
6749,9484108,2012-02-28 14:49:43,,"<p>I am using Kinect camera capture images and compress them to video and save the video into the disk(python opencv). How can I stream and display it at another location? Because the video is made at real-time and I also need to display and stream it in real time.</p>
",,2012-02-28 16:42:35,streaming camera captured video to another location,<python><video><opencv><streaming><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
6757,15320267,2013-03-10 08:14:53,,"<p>I have installed OpenCV using the instructions in <a href=""https://help.ubuntu.com/community/OpenCV"" rel=""noreferrer"">https://help.ubuntu.com/community/OpenCV</a></p>

<pre><code>$ sudo su
$ sudo apt-get install build-essential
$ sudo apt-get install libavformat-dev
$ sudo apt-get install ffmpeg
$ sudo apt-get install libcv2.3 libcvaux2.3 libhighgui2.3 python-opencv opencv-doc libcv-dev libcvaux-dev libhighgui-dev
</code></pre>

<p>now when i execute ""pkg-config --cflags --libs opencv"" i get this error:</p>

<pre><code>Package opencv was not found in the pkg-config search path.
Perhaps you should add the directory containing `opencv.pc'
to the PKG_CONFIG_PATH environment variable
No package 'opencv' found
</code></pre>

<p>how can I resolve this problem?</p>

<p><strong>-------UPDATE-------</strong></p>

<p>OK, I figured out how to solve the problem...</p>

<p>I made a file named ""opencv.pc"" and copied it to ""/usr/local/lib/pkgconfig""
Then i added these two lines to "".bashrc"":</p>

<pre><code>PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig
export PKG_CONFIG_PATH
</code></pre>

<p>that's it! everything is OK now.</p>

<p>the contents of the file are:</p>

<pre><code>prefix=/usr
exec_prefix=${prefix}
includedir=${prefix}/include
libdir=${exec_prefix}/lib

Name: opencv
Description: The opencv library
Version: 2.x.x
Cflags: -I${includedir}/opencv -I${includedir}/opencv2
Libs: -L${libdir} -lopencv_calib3d -lopencv_imgproc -lopencv_contrib -lopencv_legacy -lopencv_core -lopencv_ml -lopencv_features2d -lopencv_objdetect -lopencv_flann -lopencv_video -lopencv_highgui
</code></pre>

<p><strong>UPDATE - 2014</strong></p>

<p>it seems that the ubuntu community has completed the documentation on installing openCV, all you have to do now is to download the installation script from <a href=""https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/opencv_latest.sh"" rel=""noreferrer"">https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/opencv_latest.sh</a> and execute it.</p>
",2019-02-06 04:40:41,2020-07-01 11:36:51,Package opencv was not found in the pkg-config search path,<opencv><apt-get><pkg-config>,,,CC BY-SA 4.0,True,False,False,False,True
6873,16286778,2013-04-29 19:34:30,,"<p>I've got a basic understanding of the format of YUV420p data.  I understand it's in planes and that the Y data is basically black &amp; white luma and should be width*height pixels in length.</p>

<p>The U and V planes I believe to be width*height/4 in size for each plane.</p>

<p>So with all that knowledge, I'm trying to scale a yuv420p imag using libswscale.  The output image is gray, like I'm missing the U and V planes.</p>

<p>Here's what I'm doing:</p>

<pre><code>  int src_stride[3] = {0, 0, 0};
  src_stride[0] = mInputWidth;
  src_stride[1] = mInputWidth / 4;
  src_stride[2] = mInputWidth / 4;


  const uint8_t *input_planes[3];
  input_planes[0] = input.GetData(); // returns pointer to image data
  input_planes[1] = input_planes[0] + (mInputWidth * mInputHeight);
  input_planes[2] = input_planes[0] + (mInputWidth * mInputHeight) + (mInputWidth * mInputHeight / 4); 


  int scale_rc = sws_scale(mSwsEncodeContext, input_planes,
                       src_stride, 0, mInputHeight, mEncodeAvFrame-&gt;data,
                       mEncodeAvFrame-&gt;linesize);
</code></pre>

<p>Any idea if I'm botching the src_stride or the input_planes?  </p>
",,2013-05-03 16:17:22,Scaling YUV420P with libswscale - getting gray image out,<image-processing><ffmpeg><yuv><libavcodec>,,,CC BY-SA 3.0,False,False,False,False,True
6904,9497259,2012-02-29 10:18:47,,"<p>I am trying to use sws_scale to transform an image from RGB to YUV420P. The code I use in C++ is the following:</p>

<pre><code>SwsContext *swscontext = sws_getContext(current_width,
                                        current_height,
                                        PIX_FMT_RGB24,
                                        current_width,
                                        current_height,
                                        PIX_FMT_YUV420P,
                                        SWS_FAST_BILINEAR,
                                        NULL,
                                        NULL,
                                        NULL);
const int srcstride[3] = {current_width * 3, 0, 0};
BYTE *data_pos[3] = {data, NULL, NULL};
BYTE *dest[3] = {yuv,
                yuv + current_width * current_height,
                yuv + (current_width * current_height) 
                    + ((current_width * current_height) / 2)};
const int dststride[3] = {current_width, current_width / 2, current_width / 2};
sws_scale(swscontext, data_pos, srcstride, 0, current_height,
          dest, dststride);
</code></pre>

<p>The Y and U planes are encoded properly but the V plane is completely written with the value <code>0x80</code> I wonder if I am doing anything wrong.</p>
",2012-02-29 10:24:02,2012-03-01 12:52:34,ffmpeg: sws_scale returning wrong values in plane V during RGB to YUV420 conversion,<c++><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
6945,11469281,2012-07-13 11:07:03,,"<p>I am trying to jump to a specific frame by setting the <code>CV_CAP_PROP_POS_FRAMES</code> property and then reading the frame like this:</p>

<pre><code>cvSetCaptureProperty( input_video, CV_CAP_PROP_POS_FRAMES, current_frame );
frame = cvQueryFrame( input_video );
</code></pre>

<p>The problem I am facing is that, OpenCV 2.1 returns the same frame for the 12 consecutive values of <code>current_frame</code> whereas I want to read each individual frame, not just the key frames. Can anyone please tell me what's wrong?</p>

<hr>

<p>I did some research and found out that the problem is caused by the decompression algorithm.</p>

<p>The MPEG-like algorithms (including HD, et all) do not compress each frame separately, but save a keyframe from time to time, and then only the differences between the last frame and subsequent frames.</p>

<p>The problem you reported is caused by the fact that, when you select a frame, the decoder (ffmpeg, likely) automatically advances to the next keyframe.</p>

<p>So, is there a way around this? I don't want only key frames but each individual frame.</p>
",2017-05-25 15:26:53,2017-05-25 15:26:53,Getting individual frames using CV_CAP_PROP_POS_FRAMES in cvSetCaptureProperty,<c><opencv><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
6964,16295224,2013-04-30 08:16:56,,"<p>I've followed the readme file included with the cppjars zip file from javacv, I'm able to successfully build the libraries but when i run my app with the new .so files i get a java.lang.UnsatisfiedLinkError yet all the .so files exist in the armeabi folder.
the line of code where this exception is triggered looks like this </p>

<pre><code>yuvIplimage = IplImage.create(imageWidth, imageHeight, IPL_DEPTH_8U, 2);
</code></pre>

<p>and the exception is this</p>

<pre><code>04-29 15:40:46.610: E/AndroidRuntime(23057): FATAL EXCEPTION: main
04-29 15:40:46.610: E/AndroidRuntime(23057): java.lang.ExceptionInInitializerError
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.sample.Stream.initRecorder(Stream.java:84)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.sample.Stream.onCreate(Stream.java:77)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.app.Activity.performCreate(Activity.java:4469)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.os.Looper.loop(Looper.java:137)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at android.app.ActivityThread.main(ActivityThread.java:4507)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at java.lang.reflect.Method.invokeNative(Native Method)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at java.lang.reflect.Method.invoke(Method.java:511)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at dalvik.system.NativeStart.main(Native Method)
04-29 15:40:46.610: E/AndroidRuntime(23057): Caused by: java.lang.ExceptionInInitializerError
04-29 15:40:46.610: E/AndroidRuntime(23057):    at java.lang.Class.classForName(Native Method)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at java.lang.Class.forName(Class.java:217)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.googlecode.javacpp.Loader.load(Loader.java:338)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.googlecode.javacpp.Loader.load(Loader.java:319)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.googlecode.javacv.cpp.opencv_core$CvArr.&lt;clinit&gt;(opencv_core.java:163)
04-29 15:40:46.610: E/AndroidRuntime(23057):    ... 16 more
04-29 15:40:46.610: E/AndroidRuntime(23057): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1965]:   108 could not load needed library 'libopencv_core.so' for 'libjniopencv_core.so' (find_library[1200]:   108 'libopencv_core.so' failed to load previously)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at java.lang.Runtime.loadLibrary(Runtime.java:370)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at java.lang.System.loadLibrary(System.java:535)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:448)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.googlecode.javacpp.Loader.load(Loader.java:372)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.googlecode.javacpp.Loader.load(Loader.java:319)
04-29 15:40:46.610: E/AndroidRuntime(23057):    at com.googlecode.javacv.cpp.opencv_core.&lt;clinit&gt;(opencv_core.java:136)
04-29 15:40:46.610: E/AndroidRuntime(23057):    ... 21 more
</code></pre>

<p>I've met all the requirements needed i.e, java SE 6, OpenCV 2.4.5, FFmpeg 1.2, Android NDK r8e. The OS is Ubuntu 11.10.</p>

<p>I don't think the code is the problem because it works well when i use the bundled libraries from javacv but experience issues when i rebuild the libs to include x264.</p>

<p>What am i doing wrong? I've tried both the 64 and 32 bit versions of the NDK but same problem persists.</p>
",,2013-04-30 08:16:56,Rebuilding opencv and ffmpeg with x264 results in java.lang.UnsatisfiedLinkError,<android><opencv><ffmpeg><javacv><x264>,,,CC BY-SA 3.0,True,False,False,False,True
7001,14377619,2013-01-17 11:02:07,,"<p>I have used the following commands to install OpenCV 2.4.3 on my Linux Ubunbtu 12.04 </p>

<pre><code>cmake -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=OFF -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D OPENCV_BUILD_3RDPARTY_LIBS=ON -D WITH_FFMPEG=ON -D WITH_GTK=ON -D WITH_OPENEXR=ON -D WITH_OPENNI=ON -D WITH_PNG=ON -D WITH_TBB=ON -D WITH_XINE=ON -D WITH_GSTREAMER=ON .
</code></pre>

<p>followed bythe make command.
During the make, I get the following error.</p>

<pre><code>Linking CXX shared library ../../lib/libopencv_highgui.so
/usr/bin/ld: /usr/local/lib/libavcodec.a(avpacket.o): relocation R_X86_64_32S against     
`av_destruct_packet' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavcodec.a: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[2]: *** [lib/libopencv_highgui.so.2.4.0] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I have updated linux. I am unable to figure out the error. Please help.</p>
",,2013-01-17 11:12:09,Error while installing OpenCV,<linux><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
7046,15345648,2013-03-11 18:15:16,,"<p>I am trying to process a .raw image file captured using vrl2, it's a h264 encoded image with yuv422 color space from a Logitech c920 webcam, <a href=""http://www.cybercom.net/~dcoffin/dcraw/"" rel=""nofollow noreferrer"">dcraw</a> is not working for me however from my <a href=""https://stackoverflow.com/questions/15031183/processing-raw-images-using-ffmpeg-or-opencv"">previous question</a> this command is working fine with low performance (a 32kb jpg image however using opencv capture I get a 900kb image for the same 640x480 resolution):</p>

<blockquote>
  <p>ffmpeg -f rawvideo -s 640x480 -pix_fmt yuyv422 -i frame-1.raw
  frame-1.jpg</p>
</blockquote>

<p>I need a code written in C or the ffmpeg api/OpenCV etc .. to do the same as this command,I don't want to use QProcess in Qt(I am working on a server using Qt where I am trying to send the raw file from a Raspberry PI to the server and process it their), dcraw output is a corrupted image.</p>
",2017-05-23 10:32:04,2013-03-11 23:50:05,processing .raw file image with ffmpeg api or C code,<c><qt><image-processing><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
7111,11483738,2012-07-14 12:26:58,,"<p>I'm working with lots of camera's which capture in BG bayer pattern natively.</p>

<p>Now, every time I record some data, I save it to the disk in the raw bayer pattern, in an avi container. The problem is, that this really adds up after a while. After one year of research, I have close to 4TB of data...</p>

<p>So I'm looking for a lossless codec to compress this data. I know I could use libx264 (with --qp 0), or huffYUV, dirac or jpeg2000, but they all assume you have RGB or YUV data. It's easy enough to convert the bayered data to RGB, and then compress it, but it kind of defeats the purpose of compression if you first triple the data. This would also mean that the demoasicing artefacts introduced by debayering would also be in my source data, which is also not too great. It would be nice to have a codec that can work on the bayered data directly.</p>

<p>Even more nice would be that the solution would involve a codec that is already supported by gstreamer (or ffmpeg), since that's what I am already using.</p>
",2012-07-14 18:04:13,2016-08-21 10:22:00,Lossless codec for bayer data,<opencv><ffmpeg><gstreamer><codec><lossless-compression>,,,CC BY-SA 3.0,True,False,False,False,True
7185,11487504,2012-07-14 21:28:56,,"<p>is  there a option in JavaCV to capture 1080p videos from images?
If i use the <code>FFmpegFrameRecorde</code>, i only find 480p.</p>

<p>Or is there a alternate library for Java?
I want to use it to create a video from kind of pictures (with zooming and rotating effects)</p>

<p>greetings</p>

<p>//EDIT</p>

<p>Okay,
now i've tested a very simple code:
</p>

<pre><code>    FrameRecorder  recorder = FFmpegFrameRecorder.createDefault(""out.avi"", 1920, 1080);
    recorder.start();
    recorder.record(iplImage);
    recorder.stop();
</code></pre>

<p>and it's works! But the file is very large (10sec around 300MB...)</p>

<p>Now i want to add a codec like xvid. I've get the following eyxception:</p>

<pre><code>com.googlecode.javacv.FrameRecorder$Exception: codec not found
</code></pre>

<p>But i've installed the xvid paket. Must i add the codec in a special folder like the ffmpeg bin?</p>
",2012-07-15 01:25:01,2012-11-20 14:58:10,Create 1080p videos with javacv and ffmpeg or alternate lib,<opencv><ffmpeg><video-capture><video-processing><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
7187,11488799,2012-07-15 01:56:48,,"<p>I'm having some problems while trying to compile 64 bit OpenCV libraries. This is what I've done so far:</p>

<ol>
<li>Got the source code using svn</li>
<li>In the <code>opencv</code> I have <code>mkdir build</code> then <code>cd build</code></li>
<li><code>cmake -G ""Unix Makefiles"" -D CMAKE_OSX_ARCHITECTURES=x86_64 -D CMAKE_C_FLAGS=-m64 -D CMAKE_CXX_FLAGS=-m64 ..</code></li>
</ol>

<p>This then leaves me with the output (below), which worries me because a number of packages are not found. I have tried disabling the <code>WITH_CUDA</code> flag as suggest in this post <a href=""https://stackoverflow.com/questions/10342682/building-emgucv-on-osx-snow-leopard"">Building EmguCV on OSX Snow Leopard</a> but it doesn't seem to help.</p>

<pre><code>-- Extracting svn version, please wait...
-- SVNVERSION:  svn:9029
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named sphinx
-- 
-- General configuration for OpenCV 2.4.9 =====================================
-- Version control:                 svn:9029
-- 
--   Platform:
--     Host:                        Darwin 11.4.0 i386
--     CMake:                       2.8.8
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++
--     C++ flags (Release):         -m64   -O3 -DNDEBUG 
--     C++ flags (Debug):           -m64   -g 
--     C Compiler:                  /usr/bin/gcc
--     C flags (Release):           -m64   -O3 -DNDEBUG 
--     C flags (Debug):             -m64   -g 
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         NO
-- 
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree legacy gpu photo python stitching ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java
-- 
--   GUI: 
--     QT 4.x:                      NO
--     Cocoa:                       YES
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        build (ver 1.2.6)
--     JPEG:                        build (ver 62)
--     PNG:                         build (ver 1.5.9)
--     TIFF:                        build (ver 42 - 4.0.1)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     QuickTime:                   NO
--     QTKit:                       YES
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     NO
--     Use Cuda:                    NO
--     Use Eigen:                   NO
--     Use Clp:                     NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python (ver 2.7.1)
--     Libraries:                   /usr/lib/libpython2.7.dylib (ver 2.7.1)
--     numpy:                       /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include (ver 1.5.1)
--     packages path:               lib/python2.7/site-packages
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/texbin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/build
</code></pre>

<p>If I then try <code>make -j8</code> I get something that starts off like this and goes on fo a while:</p>

<pre><code>[  0%] [  0%] [  0%] [  1%] [  1%] [  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/adler32.c.o
Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/compress.c.o
Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/crc32.c.o
Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngerror.c.o
Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/png.c.o
Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/deflate.c.o
[  1%] [  1%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_cm.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapimin.c.o
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngerror.c:19:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:45:20: error: stdlib.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:127,
                 from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngerror.c:19:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:442:26: error: setjmp.h: No such file or directory
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:450:24: error: time.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.c:14:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:45:20: error: stdlib.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/pngpriv.h:127,
                 from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.c:14:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:442:26: error: setjmp.h: No such file or directory
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/libpng/png.h:450:24: error: time.h: No such file or directory
In file included from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/zlib/zlib.h:34,
                 from /Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/3rdparty/zlib/compress.c:9:
/Users/Dash/Documents/SmartServices/AirLink/ProjectGhost/myOpencv/trunk/opencv/build/3rdparty/zlib/zconf.h:403:48: error: sys/types.h: No such file or directory
</code></pre>

<p><strong>INSTRUCTIONS</strong></p>

<ol>
<li>Download the zip from <a href=""https://github.com/Itseez/opencv"" rel=""nofollow noreferrer"">https://github.com/Itseez/opencv</a></li>
<li>When you unzip it you should be left with a folder called 'opencv-master', cd into it.</li>
<li>mkdir build</li>
<li>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON ..</li>
<li>make</li>
<li>sudo make install</li>
</ol>
",2017-05-23 12:04:43,2013-04-22 14:17:20,Compiling OpenCV Source Code for 64 bit (Mac),<opencv><64-bit>,,,CC BY-SA 3.0,True,False,True,False,True
7381,11503997,2012-07-16 12:09:03,,"<p>I am using blob tracker, but have a timecode on video files. I want to overlay a black box over it, therefore preventing the timecode interfering with the tracker.</p>
",2017-11-02 13:05:28,2017-11-02 13:05:28,Put a black box image over existing video using ffmpeg,<windows><opencv><ffmpeg><blob>,,,CC BY-SA 3.0,True,False,False,False,True
7406,11507675,2012-07-16 15:39:48,,"<p>i'm working with Opencv, trying to copy some frame that captured from web camera. when copying the frame, i'm getting segmentation fault in <code>__memcpy_ssse3()</code>, line 160 or 1675. </p>

<p>gdb shows:</p>

<blockquote>
  <p>0  __memmove_ssse3 () at
  ../sysdeps/i386/i686/multiarch/memcpy-ssse3.S:1675</p>
  
  <p>1  0xb75ec6d0 in cv::Mat::copyTo (this=0xbfca3450, _dst=...) at
  /home/david/opencv/OpenCV-2.4.2/modules/core/src/copy.cpp:181</p>
  
  <p>2  0xb75984f6 in cv::Mat::Mat (this=0xbfca358c, img=0xb1300c90,
  copyData=true) at
  /home/david/opencv/OpenCV-2.4.2/modules/core/src/matrix.cpp:510</p>
</blockquote>

<p>The function that calls it is <code>cv::MAt::Mat(IplImg *I, bool copy)</code>.</p>

<p>When I'm opening USB camera or file, everything is perfect, but when trying to read the video stream from webcam, via IP, it crashes after a minute.</p>

<p>I'v try to build ffmpeg and opencv without ssse3 support, and my application compiled with <code>-mno-seee3</code> flag too. </p>

<p>Opencv vesion is 2.4.2, but the problem exists in 2.3.1 too.
ffmpeg version is 11.1, same problem in 8.X.
gcc version is 4.6.3, Ubuntu's branch. 
The processor is Intel core2.</p>

<p>Any hints?</p>
",2013-01-14 16:41:27,2013-01-14 16:41:27,__memcpy_ssse3() segmentation fault,<c++><opencv><segmentation-fault>,,,CC BY-SA 3.0,True,True,False,False,True
7409,11508251,2012-07-16 16:10:47,,"<p>I'm working on project where I need to retrieve frame from IP camera every second (or two) and process it some way.
After initialization of capture with</p>

<pre><code>CvCapture* capture = cvCaptureFromFile(ipSource);
</code></pre>

<p>I'm getting the frames from a loop where I introduce one (or two) second(s) delay - </p>

<pre><code>frame = cvQueryFrame(capture);
</code></pre>

<p>Problem - I only get consecutive frames (from buffer I suppose), not the frame in moment I try to get it.
What should I do to get frame in the moment I want to?</p>
",2012-07-16 16:30:18,2012-07-16 16:30:18,grab non consecutive frame from IP camera,<c><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
7479,9547742,2012-03-03 16:36:46,,"<p>I am trying to compile OpenCV with cmake but I keep getting the following errors. </p>

<pre><code>[ 73%] Building CXX object src/highgui/CMakeFiles/highgui.dir/cvcap_ffmpeg.o
In file included from /usr/include/libavutil/avutil.h:81:0,
from /usr/include/libavcodec/avcodec.h:30,
from /usr/include/libavformat/avformat.h:56,
from /vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp:97:
/usr/include/libavutil/common.h: In function ‘int32_t av_clipl_int32(int64_t)’:
/usr/include/libavutil/common.h:154:47: error: ‘UINT64_C’ was not declared in this scope
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp: In       member function ‘virtual bool CvCapture_FFMPEG::grabFrame()’:
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp:546:9:   warning: ‘int avcodec_decode_video(AVCodecContext*, AVFrame*, int*, const uint8_t*, int)’ is   deprecated (declared at /usr/include/libavcodec/avcodec.h:3452)
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp:548:54:     warning: ‘int avcodec_decode_video(AVCodecContext*, AVFrame*, int*, const uint8_t*, int)’ is deprecated (declared at /usr/include/libavcodec/avcodec.h:3452)
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp: In member function ‘virtual bool CvVideoWriter_FFMPEG::open(const char*, int, double, CvSize, bool)’:
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp:1199:8: warning: ‘AVOutputFormat* guess_format(const char*, const char*, const char*)’ is deprecated (declared at /usr/include/libavformat/avformat.h:787)
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp:1199:41: warning: ‘AVOutputFormat* guess_format(const char*, const char*, const char*)’ is deprecated (declared at /usr/include/libavformat/avformat.h:787)
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp:1213:7: warning: ‘AVFormatContext* av_alloc_format_context()’ is deprecated (declared at    /usr/include/libavformat/avformat.h:947)
/vol/cruk/Packages/irtk_ubuntu1104/vdm108/OpenCV200w/src/highgui/cvcap_ffmpeg.cpp:1213:31: warning: ‘AVFormatContext* av_alloc_format_context()’ is deprecated (declared at /usr/include/libavformat/avformat.h:947)
make[2]: *** [src/highgui/CMakeFiles/highgui.dir/cvcap_ffmpeg.o] Error 1
make[1]: *** [src/highgui/CMakeFiles/highgui.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I have no idea as to why its doing this. I would really appreciate any advice.</p>
",2012-03-03 17:49:59,2012-03-03 18:20:41,how to Compile OpenCV in Linux 11.04,<linux><opencv><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
7541,11516988,2012-07-17 06:18:11,,"<p>I am working an Android project which is based on Javacv .I have follwed the instructions which has been given in the project Readme.txt files . Placed all the .so files in libs/armeabi folder. and have used the following lines to convert the images to movie . 
But got following log. </p>

<p>*<em>Logcat *</em></p>

<pre><code>07-16 16:38:32.790: D/dalvikvm(27175): No JNI_OnLoad found in /data/data/com.javacv.ffmpeg/lib/libavutil.so 0x44e8db60, skipping init
07-16 16:38:32.800: W/dalvikvm(27175): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcom/googlecode/javacv/cpp/avutil;.&lt;clinit&gt;
07-16 16:38:32.800: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/avcodec;.&lt;clinit&gt;
07-16 16:38:32.800: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/avformat;.&lt;clinit&gt;
07-16 16:38:33.160: D/dalvikvm(27175): Trying to load lib /data/data/com.javacv.ffmpeg/lib/libopencv_core.so 0x44e8db60
07-16 16:38:33.160: I/dalvikvm(27175): Unable to dlopen(/data/data/com.javacv.ffmpeg/lib/libopencv_core.so): Cannot load library: get_lib_extents[759]:  1196 - /data/data/com.javacv.ffmpeg/lib/libopencv_core.so is not a valid ELF object
07-16 16:38:33.170: W/dalvikvm(27175): Exception Ljava/lang/UnsatisfiedLinkError; thrown during Lcom/googlecode/javacv/cpp/opencv_core;.&lt;clinit&gt;
07-16 16:38:33.170: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/opencv_imgproc;.&lt;clinit&gt;
07-16 16:38:33.170: W/dalvikvm(27175): Exception Ljava/lang/ExceptionInInitializerError; thrown during Lcom/googlecode/javacv/cpp/opencv_highgui;.&lt;clinit&gt;
07-16 16:38:33.170: D/AndroidRuntime(27175): Shutting down VM
07-16 16:38:33.170: W/dalvikvm(27175): threadid=1: thread exiting with uncaught exception (group=0x400207c8)
07-16 16:38:33.190: E/AndroidRuntime(27175): FATAL EXCEPTION: main
07-16 16:38:33.190: E/AndroidRuntime(27175): java.lang.ExceptionInInitializerError
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.javacv.ffmpeg.ZT_FFMPEG_JAVACVActivity.onCreate(ZT_FFMPEG_JAVACVActivity.java:19)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.os.Looper.loop(Looper.java:123)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at android.app.ActivityThread.main(ActivityThread.java:4627)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.reflect.Method.invokeNative(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.reflect.Method.invoke(Method.java:521)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at dalvik.system.NativeStart.main(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175): Caused by: java.lang.ExceptionInInitializerError
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.classForName(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.forName(Class.java:235)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:334)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacv.cpp.opencv_highgui.&lt;clinit&gt;(opencv_highgui.java:91)
07-16 16:38:33.190: E/AndroidRuntime(27175):    ... 14 more
07-16 16:38:33.190: E/AndroidRuntime(27175): Caused by: java.lang.ExceptionInInitializerError
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.classForName(Native Method)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Class.forName(Class.java:235)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:334)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacv.cpp.opencv_imgproc.&lt;clinit&gt;(opencv_imgproc.java:96)
07-16 16:38:33.190: E/AndroidRuntime(27175):    ... 18 more
07-16 16:38:33.190: E/AndroidRuntime(27175): Caused by: java.lang.UnsatisfiedLinkError: Library jniopencv_core not found
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.Runtime.loadLibrary(Runtime.java:461)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at java.lang.System.loadLibrary(System.java:557)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:444)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:368)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacpp.Loader.load(Loader.java:315)
07-16 16:38:33.190: E/AndroidRuntime(27175):    at com.googlecode.javacv.cpp.opencv_core.&lt;clinit&gt;(opencv_core.java:131)
07-16 16:38:33.190: E/AndroidRuntime(27175):    ... 22 more
</code></pre>

<p><strong>My source code</strong> </p>

<pre><code>package com.javacv.ffmpeg;
import static com.googlecode.javacv.cpp.opencv_highgui.cvLoadImage;
import java.io.File;
import java.util.ArrayList;
import static com.googlecode.javacv.cpp.opencv_highgui.CvVideoWriter;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.provider.MediaStore.Images;
import android.util.Log;
import com.googlecode.javacpp.annotation.ByPtrPtr;
import com.googlecode.javacpp.annotation.ByVal;
import com.googlecode.javacv.cpp.opencv_core;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
public class ZT_FFMPEG_JAVACVActivity extends Activity {

    com.googlecode.javacv.FFmpegFrameRecorder recorder ;
    private String TAG=""kljadf"";
    private IplImage colorImage;
    private IplImage image_small;
    private File[] file;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);


    //========== have used previously to convert the single image to movie =========
        /*opencv_core.IplImage image = cvLoadImage(""/mnt/sdcard/image.jpg""); 


        com.googlecode.javacv.FFmpegFrameRecorder recorder = new com.googlecode.javacv.FFmpegFrameRecorder(""/mnt/sdcard/test.3gp"",256,256);
        try {
            recorder.setCodecID(5);
            recorder.setFormat(""3gp"");
            recorder.setPixelFormat(0);
            recorder.start();
            for (int i=0;i&lt;10;i++)
              {
                recorder.record(image);
              }
            recorder.stop();
           }
        catch (Exception e){
            e.printStackTrace();
          }*/
</code></pre>

<p>//========== have used previously to convert the single image to movie =========</p>

<pre><code>       ArrayList&lt;File&gt;iamges=new ArrayList&lt;File&gt;();

       iamges.add(new File(""mnt/sdcard/image""));
       iamges.add(new File(""mnt/sdcard/image.png""));

       File[]  file=iamges.toArray(new File[iamges.size()]);
       file=iamges.toArray(new File[iamges.size()]);
       writeMovie(file,""Rajesh.mp4"");
    }
</code></pre>

<p>@SuppressLint(""ParserError"")
        public void writeMovie(File[] files, String name) { </p>

<pre><code>        double fps = 30;            
        int sas =com.googlecode.javacv.cpp.opencv_highgui.CV_FOURCC('U', '2', '6', '3');

        CvVideoWriter writer = com.googlecode.javacv.cpp.opencv_highgui.cvCreateVideoWriter(name,sas, fps, new com.googlecode.javacv.cpp.opencv_core.CvSize(640,480), -1); //CV_LOAD_IMAGE_UNCHANGED values is -1 
        if (writer == null) { 
                Log.e(TAG, ""Can not create Writer!""); 
        } 
        for (File list:files) { 
            colorImage = cvLoadImage(list.toString(), 1); //CV_LOAD_IMAGE_COLOR =value for this=1 sp replaced by 1  
            if (colorImage == null) { 
                    Log.e(TAG, ""Color Image is NULL!""); 
            } 
            image_small = opencv_core.cvCreateImage(opencv_core.cvSize(640, 480), colorImage.depth(), 4); //colorImage.nChannels()=4 as per jar file

            //or whatever color depth/channel number you need... 
            if (image_small == null) { 
                    Log.e(TAG, ""Image Small is NULL!""); 
            } 
            com.googlecode.javacv.cpp.opencv_imgproc.cvResize(colorImage, image_small, 1);  //CV_INTER_LINEAR==1 
            if (writer != null) { 
                    cvWriteFrame(writer, image_small); 
            } else { 
                    Log.e(TAG, ""Can not write frame, No writer!""); 
            } 
            opencv_core.cvReleaseImage(colorImage); 
            opencv_core.cvReleaseImage(image_small); 
        } 
        cvReleaseVideoWriter(writer); 
        finish(); 
} 

    public static native void cvReleaseVideoWriter(@ByPtrPtr CvVideoWriter paramCvVideoWriter);
    public static native int cvWriteFrame(CvVideoWriter paramCvVideoWriter, opencv_core.IplImage paramIplImage);
    public static native CvVideoWriter cvCreateVideoWriter(String paramString, int paramInt1, double paramDouble, @ByVal opencv_core.CvSize paramCvSize, int paramInt2);
</code></pre>

<p>**</p>

<p>Placed all the .so files in both libs/armeabi and libs/armeabi_v7 folder . 
Please help me fix this issue.</p>

<p>Thanks . </p>
",2012-07-17 06:46:00,2012-07-19 13:35:20,Android Jni .so files ExceptionInInitializerError and UnsatisfiedLinkError: Library jniopencv_core not found,<android><opencv><java-native-interface>,,,CC BY-SA 3.0,True,False,False,False,True
7558,15388715,2013-03-13 14:54:33,,"<p>My steps for installing OpenCV on my Machine (MBP, 15"", 2.5 GHz i7, 16GB RAM, AMD Radeon HD 6770M, 128GB SSD)</p>

<ol>
<li>i install git command line tools</li>
<li>latest macports version installed</li>
<li>cmake installed with <code>$ sudo port install cmake</code></li>
<li>clone repo of opencv  <code>$ git clone git://code.opencv.org/opencv.git</code></li>
<li><p>after repo is on my machine, I changed to this directory and make a new directory</p>

<p><code>$ cd opencv $ mkdir build  $ cd build</code></p></li>
<li><p>then I run <code>$ cmake -G “Unix Makefiles” ../</code></p></li>
<li><p>after that I get </p>

<p>`-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libv4l1'
--   package 'libv4l1' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - not found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Could NOT find PythonLibs: Found unsuitable version ""2.7.2"", but required is exact version ""2.7.3"" (found /usr/lib/libpython2.7.dylib)
Traceback (most recent call last):
  File """", line 1, in 
ImportError: No module named numpy.distutils</p>

<h2>-- Found apache ant 1.8.2: /usr/bin/ant</h2>

<p>-- General configuration for OpenCV 2.4.9 =====================================</p>

<h2>--   Version control:               2.4.4-642-g061dd7e</h2>

<p>--   Platform:
--     Host:                        Darwin 12.2.0 i386
--     CMake:                       2.8.10
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make</p>

<h2>--     Configuration:               Release</h2>

<p>--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.2.0)
--     C++ flags (Release):         -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     Linker flags (Release):<br>
--     Linker flags (Debug):        </p>

<h2>--     Precompiled headers:         NO</h2>

<p>--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree photo legacy gpu java softcascade stitching ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -</p>

<h2>--     Unavailable:                 androidcamera ocl python</h2>

<p>--   GUI: 
--     QT 4.x:                      NO
--     Cocoa:                       YES</p>

<h2>--     OpenGL support:              NO</h2>

<p>--   Media I/O: 
--     ZLib:                        build (ver 1.2.7)
--     JPEG:                        build (ver 90)
--     WEBP:                        build (ver 0.2.1)
--     PNG:                         build (ver 1.5.12)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)</p>

<h2>--     OpenEXR:                     build (ver 1.7.1)</h2>

<p>--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      YES
--       codec:                     YES (ver Unknown)
--       format:                    YES (ver Unknown)
--       util:                      YES (ver Unknown)
--       swscale:                   YES (ver Unknown)
--       gentoo-style:              YES
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     QuickTime:                   NO
--     QTKit:                       YES</p>

<h2>--     V4L/V4L2:                    NO/NO</h2>

<p>--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      YES
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO</p>

<h2>--     Use OpenCL:                  NO</h2>

<p>--   Python:</p>

<h2>--     Interpreter:                 /opt/local/bin/python2 (ver 2.7.3)</h2>

<p>--   Java:
--     ant:                         /usr/bin/ant (ver 1.8.2)
--     JNI:                         /System/Library/Frameworks/JavaVM.framework/Headers /System/Library/Frameworks/JavaVM.framework/Headers /System/Library/Frameworks/JavaVM.framework/Headers</p>

<h2>--     Java tests:                  YES</h2>

<p>--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO</p>

<h2>--     PdfLaTeX compiler:           NO</h2>

<p>--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES</p>

<h2>--     C/C++ Examples:              NO</h2>

<h2>--   Install path:                  /usr/local</h2>

<p>--   cvconfig.h is in:              /Users/miralemcebic/Desktop/ocv/opencv/build</p>

<h2>-- -----------------------------------------------------------------</h2>

<p>-- Configuring done
-- Generating done
-- Build files have been written to: /Users/miralemcebic/Desktop/ocv/opencv/build`</p></li>
<li><p>than I run <code>$ cmake -G “Unix Makefiles” ../</code></p></li>
<li><p>Now here comes the errors and of the end by 30% I get this </p>

<p><code>ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [lib/libopencv_highgui.2.4.9.dylib] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
</code></p></li>
</ol>

<p>What is here the Problem? I also have Python 2.7 and Python >3  </p>

<p>Can anybody help me by this issue?  </p>
",,2013-03-13 14:56:45,Install OpenCV on Mac OS X Lion (10.8.2) with Xcode 4.6,<c++><xcode><opencv><compilation><cmake>,2013-03-13 18:23:39,,CC BY-SA 3.0,True,False,False,False,True
7677,10553994,2012-05-11 15:06:44,,"<p>I want to use BRIEF and ORB in OpenCV and in order to use SSE4.2 (to speed up matching) in OpenCV, we need to compile OpenCV with gcc 4.3 or above and SSE4.2 option enabled.</p>

<p>I have no problem compiling OpenCV with gcc4.2.1 which is the default version in my Mac OS X 10.6.8.</p>

<p>Then, I have tried using Macports to install gcc4.3, 4.4, 4.5, 4.6, 4.7, 4.8 and switched gcc to the new one. I first tried installing OpenCV with default settings like instruction in OpenCV website. But I couldn't compile the code like when I used gcc4.2.1. Please note that, no problem with gcc4.2.1. Problems happen with gcc4.3 or above.</p>

<p>Could you please give me an advice where the problems come from? It seems that the errors come from compiler compatibility. </p>

<p>Some errors are:</p>

<pre><code>OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm: In function 'void cvDestroyAllWindows()':
OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm:198:21: error: expected ';' before 'in'
OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm:198:21: error: 'in' was not declared in this scope
OpenCV-2.4.0/modules/highgui/src/window_cocoa.mm:198:24: error: expected ';' before 'list'


In file included from /opt/local/include/libavformat/avformat.h:42:0,
                 from OpenCV-2.4.0/modules/highgui/src/ffmpeg_codecs.hpp:78,
                 from OpenCV-2.4.0/modules/highgui/src/cap_ffmpeg_impl.hpp:56,
                 from OpenCV-2.4.0/modules/highgui/src/cap_ffmpeg.cpp:45:
/opt/local/include/libavcodec/avcodec.h:554:1: internal compiler error: Segmentation fault
Please submit a full bug report,
</code></pre>
",2012-05-11 17:24:10,2014-07-31 14:59:43,OpenCV compilation error with gcc 4.3 or above in MAC OS X,<macos><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
7679,12503368,2012-09-19 21:44:55,,"<p>I have a webcam video recorder program built with python, opencv and ffmpeg</p>

<p>It works ok except that the color of the video is more blue than the reality. The problem seems to come from color format of images. </p>

<p>It seems that OpenCv is giving BGR images and ffmpeg+libx264 is expecting YUV420p. I've read that YUV420p correspond to YCbCr.</p>

<p>opencv has no conversion from BGR to YCbCr. It only has a conversion to YCrCb.</p>

<p>I have made some searchs and tried different alternatives to try converting opencv image to something that could be ok for ffmpeg+libx264. None is working. At this point, I am a bit lost and I would appreciate any pointer that could help me to fix this color issue.</p>
",2014-12-19 14:19:48,2019-05-01 14:05:21,Making a video with opencv and ffmpeg. How to find the right color format?,<python><opencv><image-processing><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
7821,16365549,2013-05-03 18:39:18,,"<p>I have mac, os x 10.8.3</p>

<p>I used to have macports installed, I deleted it and trying to install opencv using Homebrew.</p>

<p>I installed lame, ffmpeg. Changed $PATH. The error is still the same: </p>

<pre><code>Nellys-MacBook-Pro:~ nellysmitt$ brew install opencv
==&gt; Downloading http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/
Already downloaded: /Library/Caches/Homebrew/opencv-2.4.5.tar.gz
==&gt; cmake -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/opencv/2.4.5 -DCMAKE_BUILD_TY
==&gt; make
[ 38%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_tiff.cpp.o
Linking CXX shared library ../../lib/libopencv_video.dylib
[ 38%] Built target opencv_video
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2

READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting
</code></pre>

<p>Brew doctor was ok before installing ffmpeg. NOw it tells:</p>

<pre><code>Nellys-MacBook-Pro:~ nellysmitt$ brew doctor
Warning: Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
    /usr/local/lib/libavcodec.52.108.0.dylib
    /usr/local/lib/libavcore.0.16.1.dylib
    /usr/local/lib/libavdevice.52.2.3.dylib
    /usr/local/lib/libavfilter.1.74.0.dylib
    /usr/local/lib/libavformat.52.93.0.dylib
    /usr/local/lib/libavutil.50.36.0.dylib
    /usr/local/lib/libmp3lame.0.dylib
    /usr/local/lib/libswscale.0.12.0.dylib

Warning: Unbrewed .la files were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .la files:
    /usr/local/lib/libmp3lame.la

Warning: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
    /usr/local/lib/pkgconfig/libavcodec.pc
    /usr/local/lib/pkgconfig/libavcore.pc
    /usr/local/lib/pkgconfig/libavdevice.pc
    /usr/local/lib/pkgconfig/libavfilter.pc
    /usr/local/lib/pkgconfig/libavformat.pc
    /usr/local/lib/pkgconfig/libavutil.pc
    /usr/local/lib/pkgconfig/libswscale.pc

Warning: Unbrewed static libraries were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected static libraries:
    /usr/local/lib/libavcodec.a
    /usr/local/lib/libavcore.a
    /usr/local/lib/libavdevice.a
    /usr/local/lib/libavfilter.a
    /usr/local/lib/libavformat.a
    /usr/local/lib/libavutil.a
    /usr/local/lib/libmp3lame.a
    /usr/local/lib/libswscale.a
</code></pre>

<p>But the ERROR is the SAME for the last 24 hours. I'm mad and desperate. Don't know how to install this damn OpenCV. </p>
",,2013-10-23 02:19:20,Trying to install opencv using homebrew. ERROR: modules/highgui/CMakeFiles/opencv_highgui.dir/all Error 2,<macos><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
7928,16374633,2013-05-04 13:07:20,,"<p>As title, I am not able to read video using VideoCapture in python with the following code:</p>

<pre><code>v = 'C:\\test.mp4'
import cv2
cap = cv2.VideoCapture(v)
if cap.isOpened():
  print ""Finally""
else:
  print ""BOOM""
</code></pre>

<p>BOOM is always being printed. <em>sigh</em></p>

<p>Whereas in VS11, the following code works:</p>

<pre><code>#include ""stdafx.h""

#include &lt;opencv2\highgui\highgui.hpp&gt;
#include &lt;iostream&gt;

using namespace cv;
using namespace std;

int main(int argc, char* argv[])
{
    string v = ""C:\\test.mp4"";
    VideoCapture cap;
    cap.open(v);
    if (cap.isOpened()) {
        cout &lt;&lt; ""Yes!"" &lt;&lt; endl;
    } else {
        cout &lt;&lt; ""BOOM"" &lt;&lt; endl;
    }

    return 0;
}
</code></pre>

<p>I do realize there's a number solution in SO, but nothing works for me.
I have the following dlls in C:\Python27 and C:\Python27\DLLs, as well as in PATH</p>

<ul>
<li>opencv_ffmpeg.dll</li>
<li>opencv_ffmpeg_64.dll</li>
<li>opencv_ffmpeg_245_64.dll</li>
<li>opencv_ffmpeg_245.dll</li>
</ul>

<p>I have no more idea what have not done.</p>

<p>Please help me. Thank you very much.</p>
",,2013-05-07 02:46:59,OpenCV VideoCapture cannot read video in Python but able in VS11,<python><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
8121,15435988,2013-03-15 15:19:14,,"<p>I'm writing a Python program using OpenCV, but I cannot capture images from v4l2 cameras.</p>

<p>I tried with both a PS2 EyeToy and Droidcam (Android virtual webcam), which are both using v4l2, and none of them work: cv.CaptureFromCAM(0) only returns None.</p>

<p>I can use both webcams in other programs (tried VLC and Kamerka).</p>

<p>I guess that OpenCV supports v4l only, not v4l2.</p>

<p>How can I solve this problem? Does a v4l2->v4l converter exist?</p>

<p>EDIT: I read that cv.CaptureFromFile uses ffmpeg to decode video files. Is it possible to manually specify a format, so I can use ffmpeg's <code>video4linux2</code> demuxer?</p>
",2013-03-15 15:50:05,2020-03-06 18:25:00,Does OpenCV support v4l2?,<opencv><v4l2>,,,CC BY-SA 3.0,True,False,False,False,True
8189,9604731,2012-03-07 15:53:18,,"<p>I'm writing a program using ffmpeg and OpenCV. for installing ffmpeg I have ran sudo apt-get install ffmpeg, and for opencv make &amp; sudo make install.
Now I have made a project and need to tell eclipse where the headers and lib files are. So where are they?</p>

<p>Thanks,
Nahum</p>
",,2012-03-07 20:47:36,"OpenCV, ffmpeg and eclipse on linux",<linux><eclipse><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
8268,10605363,2012-05-15 16:49:57,,"<p>In the institute we use Scientific Linux 5 on the cluster and I need to deploy an app that uses a modern OpenCV distribution (2.3.1 or 2.4.0). I don't have root privileges on the cluster.</p>

<p>Essentially, how do I package all the dynamic binary dependencies of ffmpeg (and hopefully x264), opencv so that I can xcopy-deploy my app?</p>

<p>I have a working installation of OpenCV 2.3.1 on Ubuntu. If there was a way to controllably load the executable and copy along all the dynamic dependencies, I could use it.</p>

<p>Thanks,
Vadim</p>
",2012-05-15 17:04:43,2013-12-25 06:38:05,OpenCV binary deployment (Linux),<opencv><ffmpeg><x264>,,,CC BY-SA 3.0,True,False,False,False,True
8269,10607149,2012-05-15 19:01:26,,"<p>I am using JavaCV and it's FFmpegFrameGrabber in my project. It loads and player files OK, when I launch the project from Eclipse, but shows either a black screen or a still 1st frame when I run a compiled project. Sometimes comming with this error:</p>

<pre><code>Input #0, avi, from 'C:/path/Start_Cut.avi':
Duration: 00:00:20.03, start: 0.000000, bitrate: 26002 kb/s
Stream #0.0: Video: mpeg4, yuv420p, 1920x1080, 30 tbr, 30 tbn, 30 tbc
Cannot allocate memory. com.googlecode.javacv.FrameGrabber$Exception: Cannot initialize the conversion c ontext.
            at com.googlecode.javacv.FFmpegFrameGrabber.start(FFmpegFrameGrabber.jav a:280)
</code></pre>

<p>and sometimes with</p>

<pre><code>[mpeg4 @ 6A95DF20] Invalid and inefficient vfw-avi packed B frames detected
Input #0, avi, from 'C:/path/Start_Cut.avi':
  Duration: 00:00:20.03, start: 0.000000, bitrate: 26002 kb/s
    Stream #0.0: Video: mpeg4, yuv420p, 1920x1080 [PAR 1:1 DAR 16:9], 25 tbr, 30
 tbn, 25 tbc
</code></pre>

<p>does anyone has a clue on this?</p>

<p><strong>UPDATE:</strong></p>

<p>I have been able to narrow down the problem. For some reason, FFmpegFrameGrabber returns <code>null</code> upn calling the <code>grab()</code> method. Why does it work in Eclipse and does not work in standalone build? All libraries are included and I suppose, it would come up with an error if they did not.</p>
",2012-05-15 19:44:39,2012-05-17 07:37:21,JavaCV - strange black screen when playing a file with FFmpegFrameGrabber,<opencv><ffmpeg><video-streaming><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
8481,12574923,2012-09-25 01:03:04,,"<p>I'm starting to play with Opencv. I am using the python bindings for opencv2 on Linux. I wrote a quick test program but it seems to hang indefinitely.</p>

<pre><code>import cv2

weblink = ""http://continuous-video-stream-here""
cv2.namedWindow(""video"")

vid = cv2.VideoCapture(weblink)
key = -1

while (key &lt; 0):
    success, img = vid.read()
    cv2.imshow(""video"", img)
</code></pre>

<p>But it hangs on this output:</p>

<pre><code>(video:14388): GStreamer-CRITICAL **: gst_caps_unref: assertion `caps != NULL' failed
</code></pre>

<p>I have also tried reading from urllib2:</p>

<pre><code>vid = cv2.VideoCapture(urllib2.urlopen(weblink).read())
</code></pre>

<p>But that didn't work either.</p>

<p>I am using Opencv 2.4.2, ffmpeg-0.11.2</p>

<p><em>EDIT</em>: The video feed uses realplayer to display the video over http in the browser. </p>
",2012-09-25 05:07:43,2012-09-25 18:05:56,How to view video stream in OpenCV2 python,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
8496,11598462,2012-07-22 07:23:54,,"<p>I am trying to write video using opencv. It is important for me to do this precisely - so it has to be a lossless codec. I am working with OpenCV 2.4.1 on Ubuntu 12.04</p>

<p>Previously, I was using the fourcc code 0. This gave me the exact result I wanted, and I was able to recover the images perfectly.</p>

<p>I am not sure what happened, but as of a recent update (around Jul 20th 2012), something went wrong and I am no longer able to write files with this fourcc code. I really don't remember what it was, but it could have come from doing an update, removing some software from my software center, and some other things I did during general cleaning...</p>

<p>When I check an older file with mediainfo (http://www.fourcc.org/identifier/) I see the following result:</p>

<pre><code>Complete name                            : oldsample.avi
Format                                   : AVI
Format/Info                              : Audio Video Interleave
Format profile                           : OpenDML
File size                                : 1.07 GiB
Duration                                 : 41s 467ms
Overall bit rate                         : 221 Mbps
Writing application                      : Lavf53.5.0
Video
ID                                       : 0
Format                                   : RGB
Codec ID                                 : 0x00000000
Codec ID/Info                            : Basic Windows bitmap format. 1, 4 and 8 bpp     versions are palettised. 16, 24 and 32bpp contain raw RGB samples
Duration                                 : 41s 467ms
Bit rate                                 : 221 Mbps
Width                                    : 640 pixels
Height                                   : 4294966 816 pixels
Display aspect ratio                     : 0.000
Frame rate                               : 30.000 fps
Bit depth                                : 8 bits
Stream size                              : 1.07 GiB (100%)
</code></pre>

<p>Now, I see that when I write using the 0 fourcc codec, the program actually defaults to the i420 codec. Here is the output from one of the files I try to write now:</p>

<pre><code>Complete name                            : newsample.avi
Format                                   : AVI
Format/Info                              : Audio Video Interleave
File size                                : 73.0 MiB
Duration                                 : 5s 533ms
Overall bit rate                         : 111 Mbps
Writing application                      : Lavf54.6.100
Video
ID                                       : 0
Format                                   : YUV
Codec ID                                 : I420
Codec ID/Info                            : 8 bit Y plane followed by 8 bit 2x2 subsampled U and V planes.
Duration                                 : 5s 533ms
Bit rate                                 : 111 Mbps
Width                                    : 640 pixels
Height                                   : 480 pixels
Display aspect ratio                     : 4:3
Frame rate                               : 30.000 fps
Compression mode                         : Lossless
Bits/(Pixel*Frame)                       : 12.000
Stream size                              : 72.9 MiB (100%)
</code></pre>

<p>This format, and other formats I try to use (like huffyuv HFYU), do not work for me because I end up with effects like this <a href=""http://imgur.com/a/0OC4y"">http://imgur.com/a/0OC4y</a> - you see the bright artifacts coming in due to what I assume is either lossy compression or chroma subsampling in the case of HFYU which is supposed to be lossless. What you are looking at is the red channel from one of my videos. The perceptual effect is negligible when you look at all 3 channels simultaneously but it is essential that I reconstruct the images exactly.</p>

<p>Furthermore, while I am able to play my old files in media players like vlc, I suddenly find them to be completely incompatible with opencv. When I try to open the older files with a videocapture, the open step works fine, but trying to do a read operation results in a segfault. Furthermore, When I try to write with either:</p>

<pre><code>CV_FOURCC(0,0,0,0)
0
</code></pre>

<p>Opencv defaults to I420 for some reason.</p>

<p>Next, I tried using some alternate codecs. 'DIB ' seems like something that should work for me, and on the opencv website (http://opencv.willowgarage.com/wiki/VideoCodecs) it is listed as a 'recommended' codec. However, trying to use this results in the following message:</p>

<pre><code>OpenCV-2.4.1/modules/highgui/src/cap_gstreamer.cpp:483: error: (-210) Gstreamer Opencv backend doesn't support this codec acutally. in function CvVideoWriter_GStreamer::open

Aborted (core dumped)
</code></pre>

<p>I checked the opencv source for this codec, and stumbled across the following:</p>

<pre><code>cd OpenCV-2.4.1/modules
grep -i -r ""CV_FOURCC"" ./*
...
./highgui/src/cap_qt.cpp:    /*if( fourcc == CV_FOURCC( 'D', 'I', 'B', ' ' ))
./highgui/include/opencv2/highgui/highgui_c.h:#define CV_FOURCC_DEFAULT CV_FOURCC('I', 'Y', 'U', 'V') /* Use default codec for specified filename (Linux only) */
</code></pre>

<p>I tried installing qt4 and reconfiguring with the WITH_QT flag, but that did not change anything. I also tried uncommenting that part of the code and reinstalling opencv, but that also did not work.</p>

<p>My ultimate goal is for any way to efficiently store and retrieve a video stream with 16 bits for every pixel (like 32float would work fine, and then it wouldn't need to be perfect). Right now I am unpacking the 16 bits into the red and green channels, which is why I need it to be perfect - since an error of 1 in the red channel is multiplied by 256 in the final result. I am not having success with any of the fourcc codes available to me.</p>
",2012-07-22 07:33:20,2018-02-28 09:24:59,Lossless avi encoding on linux,<opencv><ffmpeg><gstreamer><codec><fourcc>,,,CC BY-SA 3.0,True,False,False,False,True
8516,15472769,2013-03-18 08:53:11,,"<p>I can embed OpenCV .DLLs and build my program in Visual Studio 2010, Debug mode, x64 platform using OpenCV 2.4.4 static libraries from C:\opencv244\build\x64\vc10\staticlib.</p>

<p>I use VideoCapture to load a video file and play it. Everything works fine when I open an uncompressed video file; But when I open a compressed video file (e.g. xvid), VideoCapture fails and can not load and open the video file. In this case if I put OpenCV .dll files near my program's .exe file, VideoCapture will work for the compressed video files too. But I have embedded OpenCV .dlls in the .exe file and I assume it has to be able to work fine without having OpenCV .dlls. Could you please let me know how can I resolve this issue? </p>

<p>Update:
Just now I noticed this issue will be resolved by only including opencv_ffmpeg244_64.dll near the program's .exe file. Other OpenCV .dlls will not be required to be present. So now the question will be: Is there any way to embed ""opencv_ffmpeg244_64.dll"" in the program's .exe file? (Albeith this one is not a big deal after all).</p>
",2013-03-18 09:24:38,2013-03-18 09:24:38,OpenCV VideoCapture fails to load compressed video files when building with staticlib,<opencv><video><capture>,,,CC BY-SA 3.0,True,False,False,False,True
8563,11605163,2012-07-23 00:32:33,,"<p>Tried numerous times to compile this correctly but apparently I'm doing something wrong.</p>

<p>I have the latest SVN checkout of both OpenCV and OpenCVSharp. I use CMake to build my solution for OpenCV (Using the x64 Visual Studio 2010 configuration) then compile it in Visual C++ Express 2010.</p>

<p>After that I go on to making a build for OpenCVSharp using Cmake again, but I get an error saying I'm messing OpenCV dll's.</p>

<p>Additionally when I first open OpenCV in VC++, I get a warning saying it doesn't support solution folder. Not sure if that makes a difference here.</p>

<p><strong>Compile environment:</strong> Windows 7 x64</p>

<p><strong>Cmake (OpenCV Build Log)</strong></p>

<pre><code>Found Windows SDK v7.1: C:\Program Files\Microsoft SDKs\Windows\v7.1\
Could NOT find Qt4 (missing:  QT_QMAKE_EXECUTABLE QT_MOC_EXECUTABLE QT_RCC_EXECUTABLE QT_UIC_EXECUTABLE QT_INCLUDE_DIR QT_LIBRARY_DIR QT_QTCORE_LIBRARY) 
CUDA_TOOLKIT_ROOT_DIR not found or specified
Could NOT find CUDA (missing:  CUDA_TOOLKIT_ROOT_DIR CUDA_NVCC_EXECUTABLE CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (Required is at least version ""4.1"")
Could NOT find PythonInterp (missing:  PYTHON_EXECUTABLE) (Required is at least version ""2.0"")

General configuration for OpenCV 2.4.9 =====================================

  Platform:
    Host:                        Windows 6.1 x86
    CMake:                       2.8.8
    CMake generator:             Visual Studio 10 Win64
    CMake build tool:            C:/Windows/Microsoft.NET/Framework/v4.0.30319/MSBuild.exe
    MSVC:                        1600

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                cl
    C++ flags (Release):         /DWIN32 /D_WINDOWS /W4  /EHa /GR  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /wd4251 /MP4  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4  /EHa /GR  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /wd4251 /MP4  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 
    C Compiler:                  cl
    C flags (Release):           /DWIN32 /D_WINDOWS /W3   /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi    /MP4  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C flags (Debug):             /DWIN32 /D_WINDOWS /W3   /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi    /MP4  /D_DEBUG /MDd /Zi  /Ob0 /Od /RTC1 
    Linker flags (Release):      /STACK:10000000 /machine:x64   /INCREMENTAL:NO  /debug
    Linker flags (Debug):        /STACK:10000000 /machine:x64   /debug /INCREMENTAL 
    Precompiled headers:         YES

  OpenCV modules:
    To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree legacy gpu photo stitching ts videostab
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 androidcamera java ocl python

  GUI: 
    QT 4.x:                      NO
    Win32 UI:                    YES
    OpenGL support:              NO

  Media I/O: 
    ZLib:                        build (ver 1.2.6)
    JPEG:                        build (ver 62)
    PNG:                         build (ver 1.5.9)
    TIFF:                        build (ver 42 - 4.0.1)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     NO

  Video I/O:
    FFMPEG:                      YES (prebuilt binaries)
      codec:                     YES (ver 53.61.100)
      format:                    YES (ver 53.32.100)
      util:                      YES (ver 51.35.100)
      swscale:                   YES (ver 2.1.100)
      gentoo-style:              YES
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    DirectShow:                  YES
    XIMEA:                       NO

  Other third-party libraries:
    Use IPP:                     NO
    Use TBB:                     NO
    Use Cuda:                    NO
    Use OpenCL:                  NO
    Use Eigen:                   NO
    Use Clp:                     NO

  Python:
    Interpreter:                 NO

  Documentation:
    Build Documentation:         NO
    Sphinx:                      NO
    PdfLaTeX compiler:           NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    Examples:                    NO

  Install path:                  C:/SourceCode/Makes/OpenCV/install

  cvconfig.h is in:              C:/SourceCode/Makes/OpenCV
-----------------------------------------------------------------

Configuring done
Generating done
</code></pre>

<p><strong>Visual C++ Express 2010 (OpenCV Compilation Log)</strong>
*<em>Note: Was too big to post the whole thing.</em>*</p>

<pre><code>Visual C++ Express (2010)

1&gt;------ Build started: Project: ZERO_CHECK, Configuration: Debug x64 ------
1&gt;  Checking Build System
...
...
59&gt;  Build all projects
61&gt;------ Skipped Build: Project: INSTALL, Configuration: Debug x64 ------
61&gt;Project not selected to build for this solution configuration 
========== Build: 55 succeeded, 0 failed, 0 up-to-date, 6 skipped ==========
</code></pre>

<p><strong>CMakes output when i try to build OpenCVSharp:</strong></p>

<pre><code>Found Windows SDK v7.1: C:\Program Files\Microsoft SDKs\Windows\v7.1\
Check for working C compiler using: Visual Studio 10 Win64
Check for working C compiler using: Visual Studio 10 Win64 -- works
Detecting C compiler ABI info
Detecting C compiler ABI info - done
Check for working CXX compiler using: Visual Studio 10 Win64
Check for working CXX compiler using: Visual Studio 10 Win64 -- works
Detecting CXX compiler ABI info
Detecting CXX compiler ABI info - done
CMake Error at cmake/Modules/FindOpenCV.cmake:96 (message):
  !!!No OpenCV library found!!!
Call Stack (most recent call first):
  OpenCvSharpExtern/CMakeLists.txt:17 (find_package)


Configuring incomplete, errors occurred!
</code></pre>
",2012-07-23 00:45:22,2013-03-02 00:23:22,OpenCV & OpenCVSharp Setup,<opencv>,,,CC BY-SA 3.0,True,False,False,False,True
8688,9653369,2012-03-11 07:56:50,,"<p>I'm trying to compile <a href=""http://goppodu.wordpress.com/2010/02/21/ffmpeg-with-opencv/"" rel=""nofollow"">this example</a></p>

<p>on Ubunto. This is the compile command:</p>

<pre><code>    g++ video.cpp -o video `pkg-config --cflags opencv` `pkg-config --libs opencv` -lpthread -lavutil -lavformat -lavcodec -lz
</code></pre>

<p>and this is the errors I'm getting:</p>

<pre><code>     /usr/local/include/libavutil/common.h:173:47: error: ‘UINT64_C’ was not declared in this scope
     video.cpp: In member function ‘int FFread::init(char*)’:
     video.cpp:24:56: error: ‘av_open_input_file’ was not declared in this scope
     video.cpp:28:5: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated      (declared at /usr/local/include/libavformat/avformat.h:1266) [-Wdeprecated-declarations]
     video.cpp:28:35: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1266) [-Wdeprecated-declarations]
     video.cpp:32:36: error: ‘dump_format’ was not declared in this scope
     video.cpp:37:48: error: ‘CODEC_TYPE_VIDEO’ was not declared in this scope
</code></pre>

<p>Please advise.
Thanks,
Nahum</p>
",2012-05-01 22:05:02,2012-05-01 22:05:02,Errors While Compiling ffmpeg and opencv,<ubuntu><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
8733,12599454,2012-09-26 10:15:31,,"<p>I'm trying to play a video using <code>opencv</code> (the video is an avi file stored on the disk). However, the program stops execution on the following line in <code>cap_ffmppeg.cpp</code>:</p>

<pre><code>if(!ffmpegCapture ||
   !icvRetrieveFrame_FFMPEG_p(ffmpegCapture,&amp;data,&amp;step,&amp;width,&amp;height,&amp;cn))
   return 0;
</code></pre>

<p>The error is: <code>Access violation reading location</code>... so a seg fault is occurring the first time <code>capture &gt;&gt; frame</code> is run.</p>

<p>Here is the program:</p>

<pre><code>#include&lt;iostream&gt;
#include&lt;fstream&gt;
#include&lt;cv.h&gt;
#include&lt;highgui.h&gt;
#include&lt;opencv2/nonfree/features2d.hpp&gt;
using namespace std;
using namespace cv;


int main(int argc, char *argv[])
{
    if (argc &lt;= 1)
    {
        printf(""Usage: %s video\n"", argv[0]);
        return -1;
    }

    VideoCapture capture(argv[1]);


    if(!capture.isOpened())
    {
        printf(""Failed to open the video\n"");
        return -1;
    }

    for(;;)
    {
        Mat frame;
        capture &gt;&gt; frame; // get a new frame from camera
    }

    return 0;
}
</code></pre>

<p>Any idea what I'm doing wrong?</p>
",2012-09-26 10:23:22,2013-09-23 10:38:23,How to play a video using opencv?,<c++><opencv><computer-vision>,,,CC BY-SA 3.0,True,True,False,False,True
8812,15497242,2013-03-19 10:43:37,,"<p>This question may sound a little bit complex or ambiguous, but I'll try to make it as clear as I can. I have done lots of Googling and spent lots of time but didn't find anything relevant for windows.</p>
<p>I want to play two videos on a single screen. One as full screen in background and one on top of it in a small window or small width/height in the right corner. Then I want an output which consists of both videos playing together on a single screen.</p>
<p>So basically one video overlays another and then I want that streamed as output so the user can play that stream later.</p>
<p>I am not asking you to write the whole code, just tell me what to do or how to do it or which tool or third party SDK I have to use to make it happen.</p>
<p><strong>update</strong>:
Tried a lots of solution.</p>
<p>1.<code>Xuggler</code>- doesn't support <code>Android</code>.</p>
<p>2.<code>JavaCV</code> or <code>JJMPEG</code>- not able to find any tutorial which suggested how to do it?</p>
<p>Now looking for FFMPEG- searched for a long time but not able to find any tutorial which suggest the coding way to do it. I found command line way to how to fix it.
So can anyone suggest or point the tutorial of FFMPEG or tell any other way to</p>
",2020-06-20 09:12:55,2014-12-15 09:08:47,Display two videos together then output as a merged video on a single screen,<android><ffmpeg><javacv><xuggler><android-videoview>,,,CC BY-SA 3.0,False,False,False,False,True
8815,16450102,2013-05-08 21:00:02,,"<p>It had to happen, I'm stuck in the last phase of my project, when I want to use my code which works like a charm on my webcam, on an IP camera. The URL works perfectly in my browser, but nothing comes out with OpenCV... 
Here is my code:</p>

<pre><code>#include &lt;opencv/highgui.h&gt;

using namespace cv;

int main(int argc, char *argv[])
{
    Mat frame;
    namedWindow(""video"", 1);
    VideoCapture cap(""http://192.168.1.99:99/videostream.cgi?resolution=32&amp;rate=0&amp;user=admin&amp;pwd=password&amp;.mjpg"");
    while ( cap.isOpened() )
    {
        cap &gt;&gt; frame;
        if(frame.empty()) break;

        imshow(""video"", frame);
        if(waitKey(30) &gt;= 0) break;
    }

    return 0;
}
</code></pre>

<p>And the compiler settings :</p>

<pre><code>//Added to the .pro file of QtCreator
INCLUDEPATH += C:\\OpenCV243\\release\\include
LIBS += -LC:\\OpenCV243\\release\\lib \
    -lopencv_core243.dll \
    -lopencv_highgui243.dll
</code></pre>

<p>I've tested opening a .avi file with the same code and it works... But a public IP camera URL like <code>http://66.184.211.231/mjpg/video.mjpg</code> doesn't ! What's the matter then ?</p>

<p>Removed by edit: I had considered FFMPEG to be an issue, but v2.4.3. has built-in FFMPEG support and .avi files work although I don't have any FFMPEG library installed (care to explain?) </p>

<p>Thanks in advance,</p>

<p>Regards,
Mister Mystère</p>
",2013-05-08 22:28:05,2013-05-08 23:38:18,cv::VideoCapture works for webcams but not IP cameras?,<opencv>,,,CC BY-SA 3.0,True,True,False,False,True
8913,13576501,2012-11-27 02:27:49,,"<p>I've written (on Ubuntu host) a simple OpenCV Application (opening the videostream from Logitech Webcam Pro 9000) in Qt Creator. After fixing problems (CMake didn't find it) with ffmepeg, x264, gstreamer etc. (found on <a href=""http://www.ozbotz.org/opencv-installation/"" rel=""nofollow"">http://www.ozbotz.org/opencv-installation/</a>) the application works.  </p>

<p>Now I want to cross-compile OpenCV with CMake for Pandaboard (Ubuntu), to use it in combination with the cross-compiled Qt Application (like on host). 
After pressing the configure button I get this output.
<a href=""http://depositfiles.com/files/se4r3bhrh"" rel=""nofollow"">http://depositfiles.com/files/se4r3bhrh</a> </p>

<p>Besides the problem, I don't know exactly how to write the ""toolchain file for cross-compiling"" and/or to ""Specify Options for cross-compiling"" in CMake, I'm afraid to fix the problems with ffmpeg etc. (like on the host)?
I have a good HOWTO (from ozbotz) for host, but how to handle it for cross-compiling for Pandaboard ?</p>

<p>Does anyone has experience/ideas with these problems ?</p>
",2012-11-27 02:56:21,2013-06-23 11:08:25,Cross-compiling OpenCV with CMake for Pandaboard Ubuntu,<opencv><cmake><pandaboard>,,,CC BY-SA 3.0,True,False,False,False,True
8924,16455345,2013-05-09 05:57:32,,"<p>i am using VIVOTEK IP camera. I am trying to interface it with OPENCV. internet explorer shows fine video at this url, after entering username and password.</p>

<p>the code is given below</p>

<pre><code>const std::string videoStreamAddress =""http://192.168.100.128/main.html"";

//i have also tried ""http://username:pasword@192.168.100.128/main.html"" but the same
//result 
//and also tried """"http://192.168.100.128"" i.e without ""main.html""

if(!vcap.open(videoStreamAddress))
{

    std::cout &lt;&lt; ""Error opening video stream or file"" &lt;&lt; std::endl;


    }
</code></pre>

<p>I got the following error </p>

<pre><code> warning: Error openong file &lt;../../modules/highgui/src/cap_ffmpeg_impl.hpp:529&gt;
 Error opening video stream or file 
</code></pre>

<p>what can be the problem?</p>
",2013-05-09 06:02:43,2013-12-19 08:35:46,IP Camera with opencv: error ffmpeg,<opencv><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
8932,11636766,2012-07-24 18:08:14,,"<p>I'm streaming H264 content from an IP camera using the VideoCapture from OpenCV (compiled with ffmpeg support). </p>

<p>So far things work ok, but every once in a while I get decoding errors (from ffmpeg I presume):</p>

<pre><code>[h264 @ 0x103006400] mb_type 137 in I slice too large at 26 10
[h264 @ 0x103006400] error while decoding MB 26 10
[h264 @ 0x103006400] negative number of zero coeffs at 25 5
[h264 @ 0x103006400] error while decoding MB 25 5
[h264 @ 0x103006400] cbp too large (421) at 35 13
[h264 @ 0x103006400] error while decoding MB 35 13
[h264 @ 0x103006400] mb_type 121 in P slice too large at 20 3
[h264 @ 0x103006400] error decoding MB 20 3
</code></pre>

<p>These messages show up in the console. Is there any clean way to listen to these ? I'd like to skip processing the glitchy frames.</p>

<p>Any hints/tips ?</p>
",,2018-06-21 09:07:31,How to deal with cv::VideoCapture decode errors?,<opencv><ffmpeg><h.264><decoding><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
8988,13583217,2012-11-27 11:28:18,,"<p>I'm trying to make use of JavaCV for android. I would like to create a video stream composed of screenshots. I found out that I can write a file using FFmpegFrameRecorder, but I can't write to a stream, array, buffer, or anything else, other than a file.</p>

<p>Next thing is that I found a piece of code featuring custom FrameRecorder using 'avio_alloc_context' and read/write/seek callbacks. Unfortunately it's only a snippet and it's in C++. 'avio_alloc_context' method on android takes Read_packet, Read_packet and Seek callbacks, so I cannot pass a Write_packet callback. Moreover, right after 'avio_alloc_context' call, I get 'finalize' called on all objects passed to 'avio_alloc_context'.</p>

<pre><code>final VideoOutputStream videoOutputStream = new VideoOutputStream(stream);

Read_packet read_packet = new Read_packet() {
    @Override
    public int call(Pointer arg0, BytePointer arg1, int arg2) {
        VideoOutputStream videoStream = (VideoOutputStream) arg0;
        try {
            videoStream.write(arg1.getStringBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }
        return arg2;
    }
};

AVIOContext pb = avio_alloc_context(new MBytePointer(av_malloc(video_outbuf_size)), video_outbuf_size, 1,videoOutputStream, null, read_packet, null);

oc.pb(pb);
</code></pre>

<p>Using the above code nothing crashes nor reports errors. I just keep getting empty files.</p>

<p>My question is - does anyone of you guys managed to get it working? Do you know a correct way to initialize custom reading/writing in FrameRecorder/Grabber in JavaCV?</p>
",,2013-07-04 08:41:09,Read/write to stream with JavaCV,<android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
9104,16473145,2013-05-10 00:05:22,,"<p>I have a large set of pre-generated thumbnails and videos. <strong>What is the easiest way to figure out the specific time in the video of the associated thumbnail?</strong></p>

<p>I'd imagine that I would have to use something to loop through all the frames in a video to find a match. What libraries should I use? Something like OpenCV maybe? ffmpeg?</p>

<p>Python is preferred but not required.</p>
",,2013-05-10 13:13:09,Finding the time of a thumbnail in a video,<python><opencv><video><ffmpeg><video-thumbnails>,,,CC BY-SA 3.0,True,False,False,False,True
9187,14559034,2013-01-28 09:31:17,,"<p>this is my project situation: I compiled ffmpeg in windows using <a href=""https://stackoverflow.com/questions/10665039/does-anyone-find-this-useful-compiling-ffmpeg-on-windows-with-cywin-and-ndk-r"">this tutorial</a> and I imported the ffmpeg folder (with inside libffmpeg.so file) generated inside my android project (under jni folder). 
In my project I have a jni_part.cpp where I inserted my jni function to operate with opencv.
In my Android.mk I'm using the code below to import opencv and compile the jni_part.cpp</p>

<pre><code>include $(CLEAR_VARS)
include ../../sdk/native/jni/OpenCV.mk
LOCAL_MODULE    := mixed_sample
LOCAL_SRC_FILES := jni_part.cpp
LOCAL_LDLIBS +=  -llog -ldl 
LOCAL_SHARED_LIBRARY := ffmpeg-prebuilt
include $(BUILD_SHARED_LIBRARY)
</code></pre>

<p>But what code I should use to import also ffmpeg? I tried to use this code:</p>

<pre><code>include $(CLEAR_VARS)
LOCAL_MODULE := ffmpeg-prebuilt
LOCAL_SRC_FILES := ffmpeg-0.8/android/armv7-a/libffmpeg.so
LOCAL_EXPORT_C_INCLUDES := ffmpeg-0.8/android/armv7-a/include/
LOCAL_EXPORT_LDLIBS := ffmpeg-0.8/android/armv7-a/libffmpeg.so
LOCAL_PRELINK_MODULE := true
include $(PREBUILT_SHARED_LIBRARY)
</code></pre>

<p>but if from my jni_part.cpp code I try to  include some ffmpeg files/libraries <code>""#include &lt;libavutil/avstring.h&gt;""</code> I get this error:</p>

<pre><code>**** Build of configuration Default for project OpenCV Tutorial 4 - Mix Java+Native OpenCV ****

C:\android-ndk-r8c\ndk-build.cmd 
Prebuilt       : libffmpeg.so &lt;= jni/ffmpeg-0.8/android/armv7-a/
Install        : libffmpeg.so =&gt; libs/armeabi-v7a/libffmpeg.so
""Compile++ thumb : mixed_sample &lt;= jni_part.cpp
jni/jni_part.cpp:24:32: fatal error: libavutil/avstring.h: No such file or directory
compilation terminated.
make: *** [obj/local/armeabi-v7a/objs/mixed_sample/jni_part.o] Error 1

**** Build Finished ****
</code></pre>

<p>Someone could help me please? I need to do this to include ffmpeg codec with the hope to use the function cvCaptureFromAVi...
Thanks in advance</p>
",2017-05-23 12:05:40,2013-01-28 10:20:41,Android.mk: how to include ffmpeg and Opencv,<android><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
9245,9693344,2012-03-13 22:43:20,,"<blockquote>
  <p><strong>Possible Duplicate:</strong><br>
  <a href=""https://stackoverflow.com/questions/9307824/compile-opencv2-3-1-in-ubuntu-11-10"">compile opencv2.3.1 in ubuntu 11.10</a>  </p>
</blockquote>



<p>How do you prepare your environment so you can properly compile OpenCV 2.3.1 on Ubuntu 11.10?</p>

<p>I'm following the OpenCV <a href=""http://opencv.willowgarage.com/wiki/InstallGuide"" rel=""nofollow noreferrer"">install guide</a>, but it's instructions are frustratingly complex.</p>

<p>However, I've distilled it into the following script:</p>

<pre><code>sudo apt-get install --yes cmake libjpeg62 libjpeg62-dev libtiff4 libtiff4-dev libjasper1 libjasper-dev libpng12-0 libpng12-dev libavformat-dev libswscale-dev openexr zlibc zlib1g zlib1g-dev python2.7-dev libgtk-3-dev gcc g++ libtbb-dev
cd /tmp
wget --output-document=OpenCV-2.3.1a.tar.bz2 http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.3.1/OpenCV-2.3.1a.tar.bz2/download?use_mirror=iweb
tar -xvjf OpenCV-2.3.1a.tar.bz2
cd OpenCV-2.3.1
mkdir release
cd release
time cmake -D WITH_TBB=ON -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON ..
time make
</code></pre>

<p>Everything runs succesfully, except of course for <code>make</code> which exits with the error:</p>

<pre><code>/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1339:41: error: ‘guess_format’ was not declared in this scope
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1367:31: error: ‘av_alloc_format_context’ was not declared in this scope
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1411:9: warning: ‘int av_set_parameters(AVFormatContext*, AVFormatParameters*)’ is deprecated (declared at /usr/include/libavformat/avformat.h:1363) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1411:35: warning: ‘int av_set_parameters(AVFormatContext*, AVFormatParameters*)’ is deprecated (declared at /usr/include/libavformat/avformat.h:1363) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1415:5: warning: ‘void dump_format(AVFormatContext*, int, const char*, int)’ is deprecated (declared at /usr/include/libavformat/avformat.h:1485) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1415:35: warning: ‘void dump_format(AVFormatContext*, int, const char*, int)’ is deprecated (declared at /usr/include/libavformat/avformat.h:1485) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442:15: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/include/libavcodec/avcodec.h:3650) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442:36: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/include/libavcodec/avcodec.h:3650) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1479:13: warning: ‘int url_fopen(AVIOContext**, const char*, int)’ is deprecated (declared at /usr/include/libavformat/avio.h:278) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1479:52: warning: ‘int url_fopen(AVIOContext**, const char*, int)’ is deprecated (declared at /usr/include/libavformat/avio.h:278) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1485:5: warning: ‘int av_write_header(AVFormatContext*)’ is deprecated (declared at /usr/include/libavformat/avformat.h:1421) [-Wdeprecated-declarations]
/tmp/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1485:25: warning: ‘int av_write_header(AVFormatContext*)’ is deprecated (declared at /usr/include/libavformat/avformat.h:1421) [-Wdeprecated-declarations]
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.o] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>How do I resolve this error?</p>
",2017-05-23 12:11:25,2012-03-14 16:09:34,How to resolve OpenCV 2.3.1 compilation error on Ubuntu 11.10 due to FFmpeg,<opencv><ffmpeg>,2012-03-14 12:38:13,,CC BY-SA 3.0,True,False,False,False,True
9285,14566470,2013-01-28 16:23:51,,"<p>We have a QT application that renders programmatically generated QPixmaps one by one to the display and we would like to save this output to a video file.</p>

<p>I know that in the past people have recommended using ffmpeg or opencv with Qt to do this.  In Qt 5, however, the new QtMultimedia module seems to expose some of this type of functionality.</p>

<p>It is now possible, for example, to save video from a camera source in Qt 5 by using the QMediaRecorder as described in <a href=""http://doc.qt.io/qt-5/qmediarecorder.html#details"" rel=""nofollow noreferrer"">http://doc.qt.io/qt-5/qmediarecorder.html#details</a>.</p>

<p>With this new functionality, is there any way to use Qt 5 to save our programmatically generated video, or am I still better off using a third party library?</p>
",2018-04-29 12:35:33,2018-08-02 12:52:33,Create Video Programmatically with Qt 5.0,<c++><qt><opencv><ffmpeg>,2018-08-02 14:34:51,,CC BY-SA 3.0,True,False,False,False,True
9296,11664218,2012-07-26 07:12:26,,"<p>I've just updated my Mac to Mountain Lion and XCode to ver4.4</p>

<p>Several issues which revolve around unable to resolve #include  cropped up. So I decided to remove and reinstall both my python and opencv libs using Homebrew.</p>

<p>However after installing Python, I met errors while installing opencv using home-brew.</p>

<p>Does anyone know how to resolve this issue ?
Attached is the output log from running </p>

<pre><code>brew install -v opencv

/usr/bin/env python -c import numpy
==&gt; Downloading http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.2/OpenCV-2.4.2.tar.bz2
Already downloaded: /Library/Caches/Homebrew/opencv-2.4.2.tar.bz2
/usr/bin/tar xf /Library/Caches/Homebrew/opencv-2.4.2.tar.bz2
==&gt; cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/opencv/2.4.2 -DCMAKE_BUILD_TYPE=None -DCMAKE_FIND_FRAMEWORK=LAST -Wno-dev -DPYTHON_LIBRARY='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python' -DPYTHON_INCLUDE_DIR='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Headers' -DPYTHON_PACKAGES_PATH='/usr/local/Cellar/opencv/2.4.2/lib/python2.7/site-packages'
cmake . -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/opencv/2.4.2 -DCMAKE_BUILD_TYPE=None -DCMAKE_FIND_FRAMEWORK=LAST -Wno-dev -DPYTHON_LIBRARY='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python' -DPYTHON_INCLUDE_DIR='/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Headers' -DPYTHON_PACKAGES_PATH='/usr/local/Cellar/opencv/2.4.2/lib/python2.7/site-packages'
-- The CXX compiler identification is Clang 4.0.0
-- The C compiler identification is Clang 4.0.0
-- Check for working CXX compiler: /usr/bin/clang++
-- Check for working CXX compiler: /usr/bin/clang++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working C compiler: /usr/bin/clang
-- Check for working C compiler: /usr/bin/clang -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Extracting svn version, please wait...
-- SVNVERSION: exported
-- Looking for fseeko
-- Looking for fseeko - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of off64_t
-- Check size of off64_t - failed
-- Performing Test HAVE_C_WNO_ATTRIBUTES
-- Performing Test HAVE_C_WNO_ATTRIBUTES - Success
-- Performing Test HAVE_C_WNO_STRICT_PROTOTYPES
-- Performing Test HAVE_C_WNO_STRICT_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS - Success
-- Looking for assert.h
-- Looking for assert.h - found
-- Looking for fcntl.h
-- Looking for fcntl.h - found
-- Looking for io.h
-- Looking for io.h - not found
-- Looking for jbg_newlen
-- Looking for jbg_newlen - not found
-- Looking for mmap
-- Looking for mmap - found
-- Looking for search.h
-- Looking for search.h - found
-- Looking for string.h
-- Looking for string.h - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE - Success
-- Performing Test HAVE_C_WNO_UNDEF
-- Performing Test HAVE_C_WNO_UNDEF - Success
-- Performing Test HAVE_C_WNO_UNUSED
-- Performing Test HAVE_C_WNO_UNUSED - Success
-- Performing Test HAVE_C_WNO_SIGN_COMPARE
-- Performing Test HAVE_C_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_C_WNO_CAST_ALIGN
-- Performing Test HAVE_C_WNO_CAST_ALIGN - Success
-- Performing Test HAVE_C_WNO_SHADOW
-- Performing Test HAVE_C_WNO_SHADOW - Success
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Success
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST - Success
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST - Success
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION - Success
-- Performing Test HAVE_C_WNO_UNINITIALIZED
-- Performing Test HAVE_C_WNO_UNINITIALIZED - Success
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Found CUDA: /usr/local/cuda (found suitable version ""4.1"", required is ""4.1"") 
-- CUDA detected: 4.1
-- CUDA NVCC target flags: -gencode;arch=compute_11,code=sm_11;-gencode;arch=compute_12,code=sm_12;-gencode;arch=compute_13,code=sm_13;-gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=sm_21;-gencode;arch=compute_20,code=compute_20
-- Found PythonInterp: /usr/local/bin/python2 (found suitable version ""2.7.3"", required is ""2.0"") 
-- Found PythonLibs: /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python (found suitable version ""2.7.3"", required is ""2.7.3"") 
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named sphinx
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
-- 
-- General configuration for OpenCV 2.4.2 =====================================
-- 
--   Platform:
--     Host:                        Darwin 12.0.0 i386
--     CMake:                       2.8.8
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               None
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/clang++
--     C++ flags (Release):         -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -O3 -DNDEBUG 
--     C++ flags (Debug):           -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -g 
--     C Compiler:                  /usr/bin/clang
--     C flags (Release):           -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -O3 -DNDEBUG 
--     C flags (Debug):             -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8    -g 
--     Linker flags (Release):      -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib
--     Linker flags (Debug):        -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib
--     Precompiled headers:         NO
-- 
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree gpu legacy photo python stitching ts videostab
--     Disabled:                    -
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java world
-- 
--   GUI: 
--     QT 4.x:                      NO
--     Cocoa:                       YES
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        build (ver 1.2.6)
--     JPEG:                        build (ver 62)
--     PNG:                         build (ver 1.5.9)
--     TIFF:                        build (ver 42 - 4.0.1)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     QuickTime:                   NO
--     QTKit:                       YES
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use TBB:                     NO
--     Use Cuda:                    YES (ver 4.1)
--     Use Eigen:                   NO
-- 
--   NVIDIA CUDA:                   (ver 4.1)
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     NVIDIA GPU arch:             11 12 13 20 21
--     NVIDIA PTX archs:            11 12 13 20 21
--     NVIDIA GPU features:         11 12 13 20 20 20
-- 
--   Python:
--     Interpreter:                 /usr/local/bin/python2 (ver 2.7.3)
--     Libraries:                   /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/Python (ver 2.7.3)
--     numpy:                       /Library/Python/2.7/site-packages/numpy/core/include (ver 1.6.2)
--     packages path:               /usr/local/Cellar/opencv/2.4.2/lib/python2.7/site-packages
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/texbin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     Examples:                    NO
-- 
--   Install path:                  /usr/local/Cellar/opencv/2.4.2
-- 
--   cvconfig.h is in:              /tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2
-- -----------------------------------------------------------------
-- 
CMake Warning at CMakeLists.txt:785 (message):
  The source directory is the same as binary directory.  ""make clean"" may
  damage the source tree


-- Configuring done
-- Generating done
-- Build files have been written to: /tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2
==&gt; make
make 
Scanning dependencies of target zlib
Scanning dependencies of target libjpeg
[  0%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/adler32.c.o
[  0%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapimin.c.o
[  0%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/compress.c.o
[  0%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcapistd.c.o
[  0%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/crc32.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jccoefct.c.o
[  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/deflate.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jccolor.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcdctmgr.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jchuff.c.o
[  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzclose.c.o
[  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzlib.c.o
[  1%] [  1%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzread.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcinit.c.o
[  1%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmainct.c.o
[  2%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/gzwrite.c.o
[  2%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmarker.c.o
[  2%] [  2%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inflate.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcmaster.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcomapi.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcparam.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcphuff.c.o
[  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/infback.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcprepct.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jcsample.c.o
[  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inftrees.c.o
[  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/inffast.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jctrans.c.o
[  3%] [  3%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/trees.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdapimin.c.o
[  3%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdapistd.c.o
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdatadst.c.o
[  4%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/uncompr.c.o
[  4%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdatasrc.c.o
[  5%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/zutil.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdcoefct.c.o
Linking C static library ../lib/libzlib.a
[  5%] Built target zlib
Scanning dependencies of target libjasper
[  5%] [  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdcolor.c.o
Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_cm.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jddctmgr.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdhuff.c.o
[  5%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_debug.c.o
[  5%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_getopt.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdinput.c.o
[  5%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_icc.c.o
[  5%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmainct.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmarker.c.o
[  6%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_iccdata.c.o
[  6%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_image.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmaster.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdmerge.c.o
[  6%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdphuff.c.o
[  6%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_init.c.o
[  6%] [  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdpostct.c.o
Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_malloc.c.o
[  7%] [  7%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_seq.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdsample.c.o
[  7%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jdtrans.c.o
[  7%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_stream.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jerror.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctflt.c.o
[  8%] [  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_string.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctfst.c.o
[  8%] [  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_tmr.c.o
Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jfdctint.c.o
[  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_tvp.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctflt.c.o
[  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jas_version.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctfst.c.o
[  8%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jp2_cod.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctint.c.o
[  8%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jidctred.c.o
[  9%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jp2_dec.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jmemansi.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jp2_enc.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jmemmgr.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_bs.c.o
[ 10%] [ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jquant1.c.o
Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_cs.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jquant2.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_dec.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/jutils.c.o
[ 10%] Building C object 3rdparty/libjpeg/CMakeFiles/libjpeg.dir/transupp.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_enc.c.o
Linking C static library ../lib/liblibjpeg.a
[ 10%] Built target libjpeg
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_math.c.o
[ 10%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mct.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mqcod.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mqdec.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_mqenc.c.o
Scanning dependencies of target libpng
[ 11%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/png.c.o
[ 11%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_qmfb.c.o
[ 11%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngerror.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngget.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngmem.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngpread.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t1cod.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t1dec.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngread.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngrio.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngrtran.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t1enc.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngrutil.c.o
[ 12%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t2cod.c.o
[ 12%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngset.c.o
[ 13%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t2dec.c.o
[ 13%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_t2enc.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngtest.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngtrans.c.o
[ 14%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_tagtree.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwio.c.o
[ 14%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_tsfb.c.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwrite.c.o
[ 14%] Building C object 3rdparty/libjasper/CMakeFiles/libjasper.dir/jpc_util.c.o
Linking C static library ../lib/liblibjasper.a
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwtran.c.o
[ 14%] Built target libjasper
[ 14%] Building NVCC (Device) object modules/core/CMakeFiles/cuda_compile.dir/src/cuda/./cuda_compile_generated_matrix_operations.cu.o
[ 14%] Building C object 3rdparty/libpng/CMakeFiles/libpng.dir/pngwutil.c.o
/tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2/modules/core/src/cuda/matrix_operations.cu:0: error: bad value (native) for -march= switch
/tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2/modules/core/src/cuda/matrix_operations.cu:0: error: bad value (native) for -mtune= switch
CMake Error at cuda_compile_generated_matrix_operations.cu.o.cmake:200 (message):
  Error generating
  /tmp/homebrew-opencv-2.4.2-3DWY/OpenCV-2.4.2/modules/core/CMakeFiles/cuda_compile.dir/src/cuda/./cuda_compile_generated_matrix_operations.cu.o


make[2]: *** [modules/core/CMakeFiles/cuda_compile.dir/src/cuda/./cuda_compile_generated_matrix_operations.cu.o] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_core.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
Linking C static library ../lib/liblibpng.a
[ 14%] Built target libpng
make: *** [all] Error 2
==&gt; Exit Status: 2
https://github.com/mxcl/master/blob/master/Library/Formula/opencv.rb#L70
==&gt; Build Environment
HOMEBREW_VERSION: 0.9.2
HEAD: 92393f1526b443e86b78629fae795eb4d8e3a6a5
CPU: dual-core 64-bit penryn
OS X: 10.8-x86_64
Xcode: 4.4
CLT: 4.4.0.0.1.1249367152
X11: 2.7.2 @ /opt/X11
CC: /usr/bin/clang
CXX: /usr/bin/clang++ =&gt; /usr/bin/clang
LD: /usr/bin/clang
CFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8
CXXFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8
CPPFLAGS: -I/usr/local/Cellar/gettext/0.18.1.1/include -isystem /usr/local/include
LDFLAGS: -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib
MACOSX_DEPLOYMENT_TARGET: 10.8
MAKEFLAGS: -j2
Error: Failed executing: make (opencv.rb:70)
These existing issues may help you:
    https://github.com/mxcl/homebrew/issues/13603
Otherwise, this may help you fix or report the issue:
    https://github.com/mxcl/homebrew/wiki/bug-fixing-checklist
</code></pre>
",,2012-08-12 16:43:05,Unable to install opencv using brew?,<opencv><homebrew><osx-mountain-lion><xcode4.4>,,,CC BY-SA 3.0,True,False,False,False,True
9469,9717960,2012-03-15 10:34:14,,"<p>I'm trying to install opencv using MacPort. i try:</p>

<pre><code>sudo port selfupdate
sudo port install opencv
</code></pre>

<p>and i retrieve:</p>

<pre><code>---&gt;  Computing dependencies for opencv
---&gt;  Dependencies to be installed: dirac cppunit autoconf help2man p5.12-locale-gettext m4 automake libtool faac faad2 ffmpeg XviD apple-gcc42 gcc_select gmake lame libogg libsdl xorg-libXext pkgconfig glib2 xorg-libX11 xorg-bigreqsproto xorg-inputproto xorg-kbproto xorg-libXau xorg-xproto xorg-libXdmcp xorg-libxcb python27 db46 libedit python_select sqlite3 python27 xorg-libpthread-stubs xorg-xcb-proto libxml2 xorg-util-macros xorg-xcmiscproto xorg-xextproto xorg-xf86bigfontproto xorg-xtrans xorg-libXrandr xorg-randrproto xrender xorg-renderproto libtheora libvorbis libvpx yasm openjpeg jbigkit lcms2 jpeg tiff libpng schroedinger orc speex texi2html x264 jasper liboil
---&gt;  Configuring p5.12-locale-gettext
Error: Target org.macports.configure returned: configure failure: shell command failed (see log for details)
Error: Failed to install p5.12-locale-gettext
Log for p5.12-locale-gettext is at: /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_perl_p5-locale-gettext/p5.12-locale-gettext/main.log
Error: The following dependencies were not installed: dirac cppunit autoconf help2man p5.12-locale-gettext m4 automake libtool faac faad2 ffmpeg XviD apple-gcc42 gcc_select gmake lame libogg libsdl xorg-libXext pkgconfig glib2 xorg-libX11 xorg-bigreqsproto xorg-inputproto xorg-kbproto xorg-libXau xorg-xproto xorg-libXdmcp xorg-libxcb python27 db46 libedit python_select sqlite3 python27 xorg-libpthread-stubs xorg-xcb-proto libxml2 xorg-util-macros xorg-xcmiscproto xorg-xextproto xorg-xf86bigfontproto xorg-xtrans xorg-libXrandr xorg-randrproto xrender xorg-renderproto libtheora libvorbis libvpx yasm openjpeg jbigkit lcms2 jpeg tiff libpng schroedinger orc speex texi2html x264 jasper liboil
Error: Status 1 encountered during processing.
To report a bug, see &lt;http://guide.macports.org/#project.tickets&gt;
</code></pre>

<p>what could be the error? how can i resolve it?</p>
",,2012-03-15 21:56:57,Unable to install opencv On Mac OSX 10.7.3 with XCode 4.2 using MacPort,<opencv><macports>,,,CC BY-SA 3.0,True,False,False,False,True
9478,16505450,2013-05-12 08:17:49,,"<p>I am trying to open .avi file in opencv. When I run the code I do not get any error but the video does not play. I searched around and I guess it requires ffmpeg to be installed. So I installed it using
    sudo apt-get install libavformat-dev libavcodec-dev libavfilter-dev libswscale-dev 
It still does not work. Maybe the compiler needs to know where to find ffmpeg. I am using gcc compiler.
Thanks. </p>

<p>@Paul R: I have just copied the code from the Learning Opencv textbook, so wasn't including it. The code:</p>

<pre><code>#include&lt;stdio.h&gt;
#include&lt;highgui.h&gt;
int main( int argc, char** argv ) {
cvNamedWindow( ""Example2"", CV_WINDOW_AUTOSIZE );
CvCapture* capture = cvCreateFileCapture( argv[1] );
IplImage* frame;
while(1) {
    printf(""Inside"");
    frame = cvQueryFrame( capture );
    if( !frame ) break;
    cvShowImage( ""Example2"", frame );
    char c = cvWaitKey(33);
    if( c == 27 ) break;
}
cvReleaseCapture( &amp;capture );
cvDestroyWindow( ""Example2"" );
</code></pre>

<p>}</p>

<p>@praks411: </p>

<pre><code>printf(""%s"",argv[1]);
CvCapture* capture = cvCreateFileCapture( argv[1] );
if(!capture)
{   
        printf(""failed\n"");
    return -1; 
}
</code></pre>

<p>It prints the argument correctly and the capture fails.</p>
",2013-05-12 09:45:45,2013-05-12 16:21:08,Cannot open videos in Opencv,<opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
9550,14588391,2013-01-29 17:13:34,,"<p>Could someone tell me where I'm doing wrong? These are the steps that I have followed:</p>
<ol>
<li><p>Downloaded the adt-bundle-windows from android developer website</p>
</li>
<li><p>Created a new project and a libs/armeabi folder</p>
</li>
<li><p>Extract all the *.so files from javacv-android-arm.jar, opencv-2.4.3-android-arm.zip, and ffmpeg-1.0-android-arm.zip directly into the newly created &quot;libs/armeabi&quot; folder, without creating any new subdirectories.</p>
<p>(A part that I don't understand is <em>&quot;Extract all the *.so files from javacv-android-arm.jar&quot;</em>, I simply inserted the javacv-android-arm.jar file inside libs/armeabi folder)</p>
</li>
<li><p>Navigated to Project &gt; Properties &gt; Java Build Path &gt; Libraries and click &quot;Add JARs...&quot;.</p>
</li>
<li><p>Selected both javacpp.jar and javacv.jar from the newly created &quot;libs&quot; folder.</p>
</li>
</ol>
<p>After that I have downloaded OpenCV2.4.3 from <a href=""http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.3/OpenCV-2.4.3.exe/download"" rel=""nofollow noreferrer"">here</a> and ffmpeg from <a href=""http://ffmpeg.zeranoe.com/builds/win64/shared/ffmpeg-20121029-git-11d695d-win64-shared.7z"" rel=""nofollow noreferrer"">here</a> and extracted the files on my C:/ root.
Finally after setting my system path...,</p>
<pre><code>C:\opencv\build\x64\vc10\bin;C:\ffmpeg-64\bin;C:\Program Files\Java\jdk1.7.0_10\bin
</code></pre>
<p>...if I try to use simply FrameGrabber in my Android application...</p>
<pre><code>import com.googlecode.javacv.FFmpegFrameGrabber;
import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.*;
import com.googlecode.javacv.cpp.*;
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_calib3d.*;
import static com.googlecode.javacv.cpp.opencv_objdetect.*;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        
        FFmpegFrameGrabber i = new FFmpegFrameGrabber(&quot;/mnt/sdcard/SinglePerson.avi&quot;); 
    }
</code></pre>
<p>...I get the following errors:</p>
<pre><code>01-29 17:59:26.976: E/AndroidRuntime(30656): FATAL EXCEPTION: main
01-29 17:59:26.976: E/AndroidRuntime(30656): java.lang.NoClassDefFoundError: com.googlecode.javacv.FFmpegFrameGrabber
01-29 17:59:26.976: E/AndroidRuntime(30656):    at com.example.xxxxxxxxx.MainActivity.onCreate(MainActivity.java:23)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.Activity.performCreate(Activity.java:4465)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.os.Looper.loop(Looper.java:137)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at android.app.ActivityThread.main(ActivityThread.java:4424)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at java.lang.reflect.Method.invokeNative(Native Method)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at java.lang.reflect.Method.invoke(Method.java:511)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-29 17:59:26.976: E/AndroidRuntime(30656):    at dalvik.system.NativeStart.main(Native Method)
</code></pre>
<p>Someone can help me please?</p>
",2020-06-20 09:12:55,2016-10-09 19:17:39,How to install JavaCV on Android and use FrameGrabber,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
9808,12690888,2012-10-02 13:10:03,,"<p>I have some device which streams h264 video in following format: top half of picture is even lines of video, and bottom half of picture is odd lines of video. So the question is - how can I play this video in normal visibility, using standart players, ffplay for example.
I know about ""tinterlace:merge"" plugin in ffmpeg, but it combines video from two pictures following one by one. So my task is make a correct video from single frame.
Regards,
   Alexey.</p>
",,2012-10-03 08:24:38,"How to play interlaced video, where even lines at top half of picture, and odd lines at bottom half?",<image-processing><ffmpeg><h.264><interlacing>,,,CC BY-SA 3.0,False,False,False,False,True
9818,13654789,2012-11-30 23:46:27,,"<p>I have colored jpeg images of <code>OpenCV::Mat</code> type and I create from them video using <code>avcodec</code>. The video that I get is upside-down, black &amp; white and each row of each frame is shifted and I got diagonal line. What could be the reason for such output?
Follow <a href=""https://picasaweb.google.com/lh/photo/ZNQeoPw8YFBa-iFpzuYi4dMTjNZETYmyPJy0liipFm0?feat=directlink"" rel=""nofollow"">this</a> link to watch the video I get using avcodec.
I'm using <code>acpicture_fill</code> function to create <code>avFrame</code> from <code>cv::Mat</code> frame!</p>

<p>P.S.
Each cv::Mat cvFrame has  width=810, height=610, step=2432
I noticed that avFrame (that is filled by acpicture_fill) has <code>linesize[0]=2430</code>
I tried manually setting <code>avFrame-&gt;linesizep0]=2432</code> and not 2430 but it still didn't helped.</p>

<p><strong>======== CODE =========================================================</strong></p>

<pre><code>AVCodec *encoder = avcodec_find_encoder(AV_CODEC_ID_H264);
AVStream *outStream = avformat_new_stream(outContainer, encoder);
avcodec_get_context_defaults3(outStream-&gt;codec, encoder);

outStream-&gt;codec-&gt;pix_fmt = AV_PIX_FMT_YUV420P;
outStream-&gt;codec-&gt;width = 810;
outStream-&gt;codec-&gt;height = 610;
//...

SwsContext *swsCtx = sws_getContext(outStream-&gt;codec-&gt;width, outStream-&gt;codec-&gt;height, PIX_FMT_RGB24,
                                    outStream-&gt;codec-&gt;width, outStream-&gt;codec-&gt;height,  outStream-&gt;codec-&gt;pix_fmt, SWS_BICUBIC, NULL, NULL, NULL);

for (uint i=0; i &lt; frameNums; i++)
{
    // get frame at location I using OpenCV
    cv::Mat cvFrame;
    myReader.getFrame(cvFrame, i); 
    cv::Size frameSize = cvFrame.size();    
    //Each cv::Mat cvFrame has  width=810, height=610, step=2432


1.  // create AVPicture from cv::Mat frame
2.  avpicture_fill((AVPicture*)avFrame, cvFrame.data, PIX_FMT_RGB24, outStream-&gt;codec-&gt;width, outStream-&gt;codec-&gt;height);
3avFrame-&gt;width = frameSize.width;
4.  avFrame-&gt;height = frameSize.height;

    // rescale to outStream format
    sws_scale(swsCtx, avFrame-&gt;data, avFrame-&gt;linesize, 0, outStream-&gt;codec-&gt;height, avFrameRescaledFrame-&gt;data, avFrameRescaledFrame -&gt;linesize);
encoderRescaledFrame-&gt;pts=i;
avFrameRescaledFrame-&gt;width = frameSize.width;
    avFrameRescaledFrame-&gt;height = frameSize.height;

av_init_packet(&amp;avEncodedPacket);
    avEncodedPacket.data = NULL;
    avEncodedPacket.size = 0;

    // encode rescaled frame
    if(avcodec_encode_video2(outStream-&gt;codec, &amp;avEncodedPacket, avFrameRescaledFrame, &amp;got_frame) &lt; 0) exit(1);
    if(got_frame)
    {
        if (avEncodedPacket.pts != AV_NOPTS_VALUE)
            avEncodedPacket.pts =  av_rescale_q(avEncodedPacket.pts, outStream-&gt;codec-&gt;time_base, outStream-&gt;time_base);
        if (avEncodedPacket.dts != AV_NOPTS_VALUE)
            avEncodedPacket.dts = av_rescale_q(avEncodedPacket.dts, outStream-&gt;codec-&gt;time_base, outStream-&gt;time_base);

        // outContainer is ""mp4""
        av_write_frame(outContainer, &amp; avEncodedPacket);

        av_free_packet(&amp;encodedPacket);
    }
}
</code></pre>

<p><strong>UPDATED</strong></p>

<p>As @Alex suggested I changed the lines 1-4 with the code below</p>

<pre><code>int width = frameSize.width, height = frameSize.height; 
avpicture_alloc((AVPicture*)avFrame, AV_PIX_FMT_RGB24, outStream-&gt;codec-&gt;width, outStream-&gt;codec-&gt;height);
for (int h = 0; h &lt; height; h++)
{
     memcpy(&amp;(avFrame-&gt;data[0][h*avFrame-&gt;linesize[0]]), &amp;(cvFrame.data[h*cvFrame.step]), width*3);
}
</code></pre>

<p>The video (<a href=""https://picasaweb.google.com/103161760482140400348/2December201202#5817342583034854274"" rel=""nofollow"">here</a>) I get now is almost perfect. It's NOT upside-down, NOT black &amp; white, BUT it seems that one of the RGB components is missing. Every brown/red colors became blue (in original images it should be vice-verse).
What could be the problem? Could rescaling(<code>sws_scale</code>) to <code>AV_PIX_FMT_YUV420P</code> format causes this?</p>
",2014-02-03 06:49:06,2015-07-23 13:05:49,How to create video using avcodec from jpeg images of type OpenCV::Mat?,<c++><opencv><video><ffmpeg><libavcodec>,,,CC BY-SA 3.0,True,True,False,False,True
10001,9763894,2012-03-19 01:19:04,,"<p>Yes, this is yet another OpenCV question. I'm using OpenSUSE 12.1 and have some problems working with a webcam. In a word, it doesn't work. </p>

<p><strong>OpenCV cmake output:</strong><br></p>

<pre>
--   Video I/O:
--     DC1394 1.x:                 NO
--     DC1394 2.x:                 YES
--     FFMPEG:                     YES
--       codec:                    YES
--       format:                   YES
--       util:                     YES
--       swscale:                  YES
--       gentoo-style:             YES
--     GStreamer:                  NO
--     UniCap:                     NO
--     PvAPI:                      NO
--     V4L/V4L2:                   /1
--     Xine:                       NO
</pre>

<p><b>lsusb | grep Camera</b><br>
Bus 001 Device 002: ID 0ac8:c302 Z-Star Microelectronics Corp. Vega USB 2.0 Camera</p>

<p><b>commands' sequence</b><br>
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local .<br>
make &amp;&amp; make install </p>

<p>So, OpenCV seems to be properly installed with all ffmpeg dependencies. But nope:<br></p>

<pre>

    IplImage *img;
    char ch;

    int c;

    CvCapture* capture = NULL;
    if ((capture = cvCaptureFromCAM(CV_CAP_ANY)) == NULL)
    {
        printf(""Cannot init camera\n"");
        return 0;
    }
</pre>

<p>""Cannot init camera"" message. </p>

<p>I'm quite new to Linux programming, so I'm sure there's something I've missed. btw I've tried all the instructions I could find with no results. </p>
",2012-03-19 16:30:44,2012-04-20 05:05:41,OpenCV cvCaptureFromCAM returns NULL,<c><linux><opencv><webcam>,,,CC BY-SA 3.0,True,False,False,False,True
10048,12713971,2012-10-03 17:45:06,,"<p>this is the code i'm using to resize a video in android with JavaCV and ffmpeg - </p>

<pre><code>FFmpegFrameGrabber grabber = new FmpegFrameGrabber(""/sdcard/DCIM/100MEDIA/VIDEO0066.mp4""); 
        grabber.start();

        int w = (int)grabber.getImageWidth()/2;
        int h = (int)grabber.getImageHeight()/2;        

        if (w%2 != 0) w=w-1;
        if (h%2 != 0) h=h-1;

        FrameRecorder recorder = new FFmpegFrameRecorder(""/sdcard/DCIM/output.mov"", w, h ,grabber.getAudioChannels());

        recorder.setVideoCodec(avcodec.CODEC_ID_MPEG4);
        recorder.setPixelFormat(avutil.PIX_FMT_YUV420P);
        recorder.setAudioCodec(avcodec.CODEC_ID_PCM_S16LE); 
        recorder.start(); 

        Frame frame = null;
        while ((frame = grabber.grabFrame()) != null)
        {
            IplImage source = frame.image;
            if (source!=null)
            {
            IplImage destination = cvCreateImage(cvSize(w , h), source.depth(), source.nChannels() );
            cvResize(source, destination);
            frame.image = destination;
            recorder.record(frame);

            }
        }
</code></pre>

<p>If i use the original width and height than the video is with sound, but when i use w/2 and h/2 the output file is without sound.
Please advise.</p>
",,2012-10-03 17:45:06,no sound in FrameRecorder / FFmpegFrameRecorder output file,<android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
10176,14646961,2013-02-01 13:04:48,,"<p>I realize this question might be closed with the ""not enough research"". However I did spent like 2 days googling for it and didn't find a conclusive answer.</p>

<p>Well I have an application that spawns a window, not written in c++. This application can have a c-interface with dlls. Now I wish to use the power of OpenCV, so I started on a dll to extend. Ss passing image data from/to the application is near impossible (only capable of passing c-strings &amp; double values directly - using the hard drive for drawing is slowing down too much for real time image manipulation).</p>

<p>I am looking into letting opencv draw the image data directly - onto the window. I can gain the window handle easily, so would it then be possible to let openCV draw their data ""over"" the other window - or better into the other window?
Is this even possible with any library (FFMPEG, or something else)?</p>
",,2013-02-01 18:05:45,Is it possible to draw in another window (Using Opencv/ffmpeg,<c++><winapi><opencv><dll>,,,CC BY-SA 3.0,True,False,False,False,True
10237,16573408,2013-05-15 19:27:33,,"<p>i want compile opencv for QT. i use this tutorial</p>

<p><a href=""http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml"" rel=""nofollow noreferrer"">http://www.laganiere.name/opencvCookbook/chap1s1_2.shtml</a></p>

<p>in step 8 i have this error:</p>

<pre><code>C:\opencv_bin1&gt;mingw32-make 
[  0%] Building C object 3rdparty/zlib/CMakeFiles/zlib.dir/adler32.c.obj 
'C:\Users\' is not recognized as an internal or external command,   
  operable program or batch file. 
 3rdparty\zlib\CMakeFiles\zlib.dir\build.make:53: recipe for target
 '3rdparty/zlib/CMakeFiles/zlib.dir/adler32.c.obj' failed                                     mingw32-make[2]: *** [3rdparty/zlib/CMakeFiles/zlib.dir/adler32.c.obj] Error 1  CMakeFiles\Makefile2:269: recipe for target '3rdparty/zlib/CMakeFiles/zlib.dir/all' failed                                                                      mingw32-make[1]: *** [3rdparty/zlib/CMakeFiles/zlib.dir/all] Error 2            makefile:112: recipe for target 'all' failed                                    mingw32-make: *** [all] Error 2    
</code></pre>

<p>i think it is from path variable but i don't see mistake in it.
any idea?</p>

<pre><code>EDIT
</code></pre>

<p>when i use make instead of mingw32-make :
<img src=""https://i.stack.imgur.com/RFAAD.jpg"" alt=""enter image description here""></p>

<pre><code>path variables:
</code></pre>

<p>user variables:</p>

<pre><code>C:\opencv\build\x64\vc10\bin\;C:\opencv\build\common\tbb\intel64\vc10\;C:\ffmpeg\bin;C:\op    
ncv\build\x64\vc10\bin\;c:\Program Files\Microsoft Visual Studio    
10.0\Common7\Tools\;C:\jom\jom.exe\;C:\Windows\System32\;C:\Program Files (x86)\CMake  
2.6\bin\;C:\Qt\Qt5.0.1\5.0.1\mingw47_32\bin\;C:\Qt\Qt5.0.1\Tools\MinGW\bin\;
</code></pre>

<p>system variables:</p>

<pre><code>    C:\Borland\Delphi7\Bin;C:\Borland\Delphi7\Projects\Bpl\;C:\Inprise\vbroker\bin;C:\Qt\Qt5.0.
1\5.0.1\mingw47_32\bin;C:\Qt\Qt5.0.1\Tools\MinGW\bin;C:\Program Files (x86)\CMake 
2.8\bin\;C:\Windows\System32\;
</code></pre>

<p>i download msys and add it's bin folder to path. Now when i enter in opencv directory and type make it wrote:</p>

<pre><code>C:\opencv_Bin&gt;make   
 Microsoft Windows [Version 6.2.9200]  
(c) 2012 Microsoft Corporation. All rights reserved. 
</code></pre>
",2013-05-16 05:08:15,2013-05-16 05:08:15,C:\Users\' is not recognized as an internal or external command compiling opencv for QT,<windows><qt><opencv><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
10245,14650665,2013-02-01 16:24:28,,"<p>I'm using FrameGrabber to load a video from sdcard and perform some image processing operation. I followed the tutorial at <a href=""http://code.google.com/p/javacv/"" rel=""nofollow"">JavaCV site</a> to load javacc and ffmpeg.
Currently, to run the application, I'm using my tablet (Asus TF 101G with Android version 4.0.3) connected to my pc and it works fine. But if I try to run the same application in another device (e.g. Nexus with Android 4.1.2) I get these errors:</p>

<pre><code>02-01 16:51:54.687: E/AndroidRuntime(2839): FATAL EXCEPTION: main
02-01 16:51:54.687: E/AndroidRuntime(2839): java.lang.ExceptionInInitializerError
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacv.FFmpegFrameGrabber.&lt;init&gt;(FFmpegFrameGrabber.java:104)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.example.com.uniud.avires.MainActivity.onCreate(MainActivity.java:92)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.Activity.performCreate(Activity.java:5008)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.os.Looper.loop(Looper.java:137)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.reflect.Method.invokeNative(Native Method)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.reflect.Method.invoke(Method.java:511)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at dalvik.system.NativeStart.main(Native Method)
02-01 16:51:54.687: E/AndroidRuntime(2839): Caused by: java.lang.ExceptionInInitializerError
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.Class.classForName(Native Method)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.Class.forName(Class.java:217)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.load(Loader.java:338)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacv.cpp.avcodec.&lt;clinit&gt;(avcodec.java:86)
02-01 16:51:54.687: E/AndroidRuntime(2839):     ... 16 more
02-01 16:51:54.687: E/AndroidRuntime(2839): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1891]: 26325 could not load needed library 'libavutil.so' for 'libjniavutil.so' (load_library[1093]: Library 'libavutil.so' not found)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.Runtime.load(Runtime.java:340)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at java.lang.System.load(System.java:521)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:422)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.load(Loader.java:372)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacpp.Loader.load(Loader.java:319)
02-01 16:51:54.687: E/AndroidRuntime(2839):     at com.googlecode.javacv.cpp.avutil.&lt;clinit&gt;(avutil.java:75)
02-01 16:51:54.687: E/AndroidRuntime(2839):     ... 20 more
</code></pre>

<p>Any suggestion please?</p>

<p>I want to attach also my <strong>Android.mk</strong> file</p>

<pre><code>LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
OPENCV_LIB_TYPE:=STATIC
include C:/Users/Marco/Desktop/new_ADT/adt-bundle-windows-x86_64/OpenCV-2.4.3.2-android-sdk/sdk/native/jni/OpenCV.mk
OPENCV_INSTALL_MODULES:=on
#OPENCV_CAMERA_MODULES:=on
LOCAL_MODULE    := udmodule
LOCAL_SRC_FILES := udjni.cpp
LOCAL_LDLIBS +=  -llog -ldl
include $(BUILD_SHARED_LIBRARY)
</code></pre>

<p>and my <strong>Apllication.mk</strong> file</p>

<pre><code>APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi armeabi-v7a 
#APP_ABI := all
APP_PLATFORM := android-8
</code></pre>

<p>Any suggestion?
Thanks </p>

<p>Also I tried to change the application.mk file in this way but with no results:</p>

<pre><code>APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi
LOCAL_CFLAGS += -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -mfpu=neon
LOCAL_LDLIBS += -Wl,--fix-cortex-a8
APP_PLATFORM := android-8
</code></pre>
",2013-02-05 21:14:51,2013-11-19 11:09:34,Error FFmpeg in Android,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
10248,14654275,2013-02-01 20:14:53,,"<p>I am trying get JavaCV working for android in order to gain the use of the FFMPEG library. I'm following the setup instructions for android from the JavaCV <a href=""http://code.google.com/p/javacv/"" rel=""nofollow noreferrer"" title=""JavaCV website"">website</a> which I've copied below:</p>
<blockquote>
<p>Eclipse (Android 2.2 or newer):
Follow the instructions on this page: <a href=""http://developer.android.com/training/basics/firstapp/"" rel=""nofollow noreferrer"">http://developer.android.com/training/basics/firstapp/</a>
Go to File &gt; New &gt; Folder, select your project as parent folder, type &quot;libs/armeabi&quot; as Folder name, and click Finish.
Copy javacpp.jar and javacv.jar into the newly created &quot;libs&quot; folder.
Extract all the *.so files from javacv-android-arm.jar, opencv-2.4.3-android-arm.zip, and ffmpeg-1.0-android-arm.zip directly into the newly created &quot;libs/armeabi&quot; folder, without creating any new subdirectories.
Navigate to Project &gt; Properties &gt; Java Build Path &gt; Libraries and click &quot;Add JARs...&quot;.
Select both javacpp.jar and javacv.jar from the newly created &quot;libs&quot; folder.</p>
</blockquote>
<p>I am trying to use the FFmpegFrameGrabber class in my code. When I run, I get this error from logcat:</p>
<blockquote>
<p>02-01 14:40:35.550: W/dalvikvm(11583): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/googlecode/javacv/cpp/avutil;</p>
<p>02-01 14:40:35.550: W/dalvikvm(11583): Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Lcom/googlecode/javacv/cpp/avcodec;</p>
<p>02-01 14:40:35.550: D/AndroidRuntime(11583): Shutting down VM</p>
<p>02-01 14:40:35.550: W/dalvikvm(11583): threadid=1: thread exiting with uncaught exception (group=0x40015560)</p>
</blockquote>
<p>This led me to believe that my android app can't find avutil.so and avcodec.so, which I placed in the libs/armeabi folder. However, when I unzipped the APK eclipse generated, both so files were present.</p>
<p>Any ideas as to the cause of this problem?</p>
",2020-06-20 09:12:55,2016-05-25 06:28:07,UnsatisfiedLinkError with JavaCV Android,<android><eclipse><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
10267,16574959,2013-05-15 21:04:46,,"<p>I'm having some difficulties trying to use OpenCV with visual studio 2008 (Professional Edition). I believe I've done everything necessary to run a OpenCV sample, but it crashes due to a run-time error. This is driving me insane, I hope someone can help.</p>

<p>But first things first.</p>

<h2>My Installation Procedure</h2>

<ol>
<li><p>Downloaded <a href=""http://ufpr.dl.sourceforge.net/project/opencvlibrary/opencv-win/2.4.5/OpenCV-2.4.5.exe"" rel=""nofollow noreferrer"">OpenCV 2.4.5</a> from sourcefourge.net.</p></li>
<li><p>When prompted, I chose ""Z:\Games instalados\OpenCV"" as my ""Extract to"" option in the .exe downloaded from the above link.</p></li>
<li><p>Went to ""Control Panel"" -> ""System"" -> ""Advanced System Settings"", then clicked on the ""Environment Variables"" in the ""Advanced"" tab. In the ""System Variables"" box I highlighted ""Path"" and clicked on ""Edit..."". In the new window I added to the end of the text in ""Variable Value"" my installation directory with a "";"" before it, namely "";Z:\Games instalados\OpenCV\opencv\build\x86\vc11\bin"" (without the double quotes). Here's a screenshot: <img src=""https://s10.postimg.org/wsxj8h9i1/environment_variables.jpg"" alt=""screenshot"">.</p></li>
<li>Created a new project in Visual Studio 2008: File -> New -> Project..., chose ""Other Languages"" -> ""Visual C++ -> ""Win32"" as the project type; ""Win32 Console Application"" as the template. <img src=""https://s3.postimg.org/gf9x22omr/newproject.jpg"" alt=""new project""> Clicked ""next"" in the new window, then chose ""Console Application"", ""Empty Project"" and then ""Finish"". <img src=""https://s10.postimg.org/9jpmv87dl/app_type.jpg"" alt=""new window""></li>
<li>In the ""Solution Explorer"", right-clicked my program and chose ""Properties"". Then ""Configuration Properties"" -> ""C/C++"" -> ""General"", and on Additional Include Directories I've added: 

<ul>
<li>Z:\Games instalados\OpenCV\opencv\build\include</li>
<li>Z:\Games instalados\OpenCV\opencv\build\include\opencv</li>
<li>Z:\Games instalados\OpenCV\opencv\build\include\opencv2
""<img src=""https://s23.postimg.org/6yad3hvbf/additional_include_directories.jpg"" alt=""Additional Include""></li>
</ul></li>
<li>Now in ""Configuration Properties"" -> ""C/C++"" -> ""Linker"" -> ""General"", in the ""Additional Library Directories"" I've added ""Z:\Games instalados\OpenCV\opencv\build\x86\vc11\lib"". <img src=""https://s9.postimg.org/gc7xzh1db/additional_library.jpg"" alt=""Additional Library""></li>
<li>Now in ""Configuration Properties"" -> ""C/C++"" -> ""Linker"" -> ""Input"", in the ""Additional Dependencies"" I've added:

<ul>
<li>opencv_calib3d245.lib</li>
<li>opencv_contrib245.lib</li>
<li>opencv_core245.lib</li>
<li>opencv_features2d245.lib</li>
<li>opencv_flann245.lib</li>
<li>opencv_gpu245.lib</li>
<li>opencv_highgui245.lib</li>
<li>opencv_imgproc245.lib</li>
<li>opencv_legacy245.lib</li>
<li>opencv_ml245.lib</li>
<li>opencv_nonfree245.lib</li>
<li>opencv_objdetect245.lib</li>
<li>opencv_photo245.lib</li>
<li>opencv_stitching245.lib</li>
<li>opencv_superres245.lib</li>
<li>opencv_ts245.lib</li>
<li>opencv_video245.lib</li>
<li>opencv_videostab245.lib</li>
<li>opencv_calib3d245d.lib</li>
<li>opencv_contrib245d.lib</li>
<li>opencv_core245d.lib</li>
<li>opencv_features2d245d.lib</li>
<li>opencv_flann245d.lib</li>
<li>opencv_gpu245d.lib</li>
<li>opencv_highgui245d.lib</li>
<li>opencv_imgproc245d.lib</li>
<li>opencv_legacy245d.lib</li>
<li>opencv_ml245d.lib</li>
<li>opencv_nonfree245d.lib</li>
<li>opencv_objdetect245d.lib</li>
<li>opencv_photo245d.lib</li>
<li>opencv_stitching245d.lib</li>
<li>opencv_superres245d.lib</li>
<li>opencv_ts245d.lib</li>
<li>opencv_video245d.lib</li>
<li>opencv_videostab245d.lib
(Please note that I didn't added ""opencv_ffmpeg245.lib"", despite what the screenshot shows).
<img src=""https://s23.postimg.org/3ygy31juz/additional_dependencies.jpg"" alt=""Additional Dependencies""></li>
</ul></li>
<li>Right-clicked ""Source Files"" -> ""Add"" -> ""Existing Item"" and added the ""Z:\Games instalados\OpenCV\opencv\samples\cpp\cout_mat.cpp"" file.
<img src=""https://s3.postimg.org/5pwot6trn/added_cout.jpg"" alt=""Added cout_mat""></li>
</ol>

<h2>The Problem</h2>

<ol>
<li>Built the project, no problems here, ""Build succeeded"".</li>
<li>""Debug"" -> ""Start Debugging"". The following appears:
<a href=""http://s8.postimg.org/wdkubk5o3/the_error.jpg"" rel=""nofollow noreferrer"">The error http://s8.postimg.org/wdkubk5o3/the_error.jpg</a>
Full size image for the error: <a href=""http://s8.postimg.org/wdkubk5o3/the_error.jpg"" rel=""nofollow noreferrer"">http://s8.postimg.org/wdkubk5o3/the_error.jpg</a></li>
</ol>

<p>I've also tried with the hough lines sample, but it didn't worked as well (even with the image in the same folder as the .exe imread() wouldn't find the image).</p>

<p>Any help would be greatly appreciated.</p>

<p>If I've not made some of the installation steps clear enough, please post a comment.</p>

<h2>Reason this question is suited for stackoverflow.com</h2>

<p>I've detailed a full installation procedure (from scratch) for the latest release of OpenCV to be used with Visual Studio 2008. If anyone solves this question we will have a complete, working tutorial for anyone having the same necessity (use latest OpenCV with visual studio 2008), and possibly (because of the depth in the installation procedure) a general guide for installing the latest OpenCV with most Visual Studio versions (not just the 2008, since the tutorial wouldn't change much, and the reader could easily adapt it). </p>
",2017-02-08 14:41:27,2013-05-17 19:03:56,Installation of OpenCV 2.4.5 on Visual Studio 2008,<c++><visual-studio><visual-studio-2008><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
10312,16580633,2013-05-16 06:41:57,,"<p>I am using OpenCV on an embedded target board (FriendlyARM mini6410, processor arm 1176 running linux kernel 2.6.38).
I compiled OpenCV 2.4.4 library using toolchain provided for the board, found in the ftp (pls see the <a href=""http://www.friendlyarm.net/downloads"" rel=""nofollow noreferrer"">website</a> of FriendlyARM). I disabled GTK, ffmpeg and enable v4l. The library is compiled successfully.</p>

<p>Then I write code:</p>

<pre><code>#include &lt;opencv.hpp&gt;
#include &lt;highgui/highgui.hpp&gt;
#include &lt;imgproc/imgproc.hpp&gt;
#include &lt;iostream&gt;
#include &lt;stdio.h&gt;

using namespace cv;
using namespace std;

int main()
{
    int i;
    cout &lt;&lt; ""initialise"" &lt;&lt; endl;
    IplImage* img=0;
    cout &lt;&lt; ""capturing ..."" &lt;&lt; endl;
    CvCapture* capture = cvCaptureFromCAM(2);
    cout &lt;&lt; ""get here"" &lt;&lt; endl;
    if(!capture){
        cout &lt;&lt; ""not capture"" &lt;&lt; endl;
        return -1;
    }
    cout &lt;&lt; ""captured"" &lt;&lt; endl;
    img=cvQueryFrame(capture);

   IplImage* img1 = cvCreateImage(cvGetSize(img),8,3);
   // cvCvtColor(img,img1,CV_RGB2GRAY);
   cvCopy(img, img1);
   cvSaveImage(""cam_snap.jpg"",img1);
   cvReleaseImage( &amp;img1 );
   cvReleaseImage( &amp;img );
   cvReleaseCapture( &amp;capture );
   cout &lt;&lt; ""exit"" &lt;&lt; endl;

   return 0;
}
</code></pre>

<p>The code is built successfully. I run the .elf executable in the target board, connected to camera (PS3 eye), but the resulting image looks like a broken television (noise-like):</p>

<p><img src=""https://i.stack.imgur.com/E163g.jpg"" alt=""noise like image""></p>

<p>While in my host, the resulting image is as expected (scene in front of camera). Can you provide me suggestion as to what went wrong or where should I start on debugging?</p>
",,2013-05-16 15:22:08,OpenCV Capture from Camera Results in Noisy-like Image,<opencv><image-processing><cross-compiling><image-capture><v4l>,,,CC BY-SA 3.0,True,False,False,False,True
10644,9815902,2012-03-22 03:09:41,,"<p>I'm working on using PIL to average the pixel intensities over a subarea of a video.  What I want to do is:</p>

<p>-Use ffmpeg to turn the video into several frames<br>
-Use PIL to choose a window in each frame (this is the step I'd like help with)<br>
-Do some sort of analysis on that window in each frame, and aggregate the data (like, say, average color vs. time)<br></p>

<p>I'm at quite a loss as to how to do the middle step -- does anyone have suggestions?</p>
",2012-03-22 03:59:16,2012-03-24 19:59:18,Using PIL to analyze a video frame by frame,<python><image-processing><python-imaging-library>,,,CC BY-SA 3.0,False,False,False,False,True
10703,15662827,2013-03-27 15:32:13,,"<p>I am using OpenCV with ffmpeg on a mac to write video. I've been able to successfully write .avi files using the codec/fourcc code, FMP4. I would like to write .mp4 files, however. When I try to write an .mp4 file using fourcc FMP4 I get this error:</p>

<pre><code>[mp4 @ 0x100b4ec00] Tag FMP4/0x34504d46 incompatible with output codec id '13' ( [0][0][0])
</code></pre>

<p>When I use AVC1 I get the following error:</p>

<pre><code>[libx264 @ 0x104003000] broken ffmpeg default settings detected
[libx264 @ 0x104003000] use an encoding preset (e.g. -vpre medium)
[libx264 @ 0x104003000] preset usage: -vpre &lt;speed&gt; -vpre &lt;profile&gt;
[libx264 @ 0x104003000] speed presets are listed in x264 --help
[libx264 @ 0x104003000] profile is optional; x264 defaults to high
Could not open codec 'libx264': Unspecified error
</code></pre>

<p>Does anyone here know the right codec to use with OpenCV and ffmpeg to write to an MP4 container on the Mac? </p>

<p>If AVC1 is the right codec, how do I install ffmpeg + OpenCV correctly? I did</p>

<pre><code>brew install gpac
brew install ffmpeg
brew install opencv
</code></pre>

<p>The call I am using to open the videowriter:</p>

<pre><code>fourcc = cv2.cv.CV_FOURCC('A', 'V', 'C', '1')   
video_out = cv2.VideoWriter(
    filename=output_filename,
    fourcc=fourcc,
    fps=video_fps,
    frameSize=(video_width,video_height),
    isColor=1)
</code></pre>

<p>When I run <code>x264 --help</code> I get</p>

<pre><code>% x264 --help
x264 core:125
Syntax: x264 [options] -o outfile infile

Infile can be raw (in which case resolution is required),
  or YUV4MPEG (*.y4m),
  or Avisynth if compiled with support (no).
  or libav* formats if compiled with lavf support (no) or ffms support (no).
Outfile type is selected by filename:
 .264 -&gt; Raw bytestream
 .mkv -&gt; Matroska
 .flv -&gt; Flash Video
 .mp4 -&gt; MP4 if compiled with GPAC support (no)
Output bit depth: 8 (configured at compile time)

Options:

  -h, --help                  List basic options
      --longhelp              List more options
      --fullhelp              List all options

Example usage:

      Constant quality mode:
            x264 --crf 24 -o &lt;output&gt; &lt;input&gt;

      Two-pass with a bitrate of 1000kbps:
            x264 --pass 1 --bitrate 1000 -o &lt;output&gt; &lt;input&gt;
            x264 --pass 2 --bitrate 1000 -o &lt;output&gt; &lt;input&gt;

      Lossless:
            x264 --qp 0 -o &lt;output&gt; &lt;input&gt;

      Maximum PSNR at the cost of speed and visual quality:
            x264 --preset placebo --tune psnr -o &lt;output&gt; &lt;input&gt;

      Constant bitrate at 1000kbps with a 2 second-buffer:
            x264 --vbv-bufsize 2000 --bitrate 1000 -o &lt;output&gt; &lt;input&gt;

Presets:

      --profile &lt;string&gt;      Force the limits of an H.264 profile
                                  Overrides all settings.
                                  - baseline,main,high,high10,high422,high444
      --preset &lt;string&gt;       Use a preset to select encoding settings [medium]
                                  Overridden by user settings.
                                  - ultrafast,superfast,veryfast,faster,fast
                                  - medium,slow,slower,veryslow,placebo
      --tune &lt;string&gt;         Tune the settings for a particular type of source
                              or situation
                                  Overridden by user settings.
                                  Multiple tunings are separated by commas.
                                  Only one psy tuning can be used at a time.
                                  - psy tunings: film,animation,grain,
                                                 stillimage,psnr,ssim
                                  - other tunings: fastdecode,zerolatency

Frame-type options:

  -I, --keyint &lt;integer or ""infinite""&gt; Maximum GOP size [250]
      --tff                   Enable interlaced mode (top field first)
      --bff                   Enable interlaced mode (bottom field first)
      --pulldown &lt;string&gt;     Use soft pulldown to change frame rate
                                  - none, 22, 32, 64, double, triple, euro (requires cfr input)

Ratecontrol:

  -B, --bitrate &lt;integer&gt;     Set bitrate (kbit/s)
      --crf &lt;float&gt;           Quality-based VBR (0-51) [23.0]
      --vbv-maxrate &lt;integer&gt; Max local bitrate (kbit/s) [0]
      --vbv-bufsize &lt;integer&gt; Set size of the VBV buffer (kbit) [0]
  -p, --pass &lt;integer&gt;        Enable multipass ratecontrol
                                  - 1: First pass, creates stats file
                                  - 2: Last pass, does not overwrite stats file

Input/Output:

  -o, --output &lt;string&gt;       Specify output file
      --sar width:height      Specify Sample Aspect Ratio
      --fps &lt;float|rational&gt;  Specify framerate
      --seek &lt;integer&gt;        First frame to encode
      --frames &lt;integer&gt;      Maximum number of frames to encode
      --level &lt;string&gt;        Specify level (as defined by Annex A)
      --quiet                 Quiet Mode

Filtering:

      --vf, --video-filter &lt;filter0&gt;/&lt;filter1&gt;/... Apply video filtering to the input file

      Filter options may be specified in &lt;filter&gt;:&lt;option&gt;=&lt;value&gt; format.

      Available filters:
      crop:left,top,right,bottom
      select_every:step,offset1[,...]
</code></pre>

<p>Thanks,
-s</p>
",2013-03-28 17:38:22,2015-01-13 17:53:39,Writing an MP4 file on the Mac with OpenCV ffmpeg,<macos><opencv><ffmpeg><fourcc>,,,CC BY-SA 3.0,True,False,False,False,True
10798,11800552,2012-08-03 17:32:50,,"<p>I am making an iphone-app with Xcode 4.3.3 and OpenCV 2.4</p>

<p>I used that ""cvCreateFileCapture(""simtom.mp4"")"" to get frame from '.mp4' file but unfortunately, cvCreateFileCapture() always returns ""NULL"".</p>

<p>What is the problem?</p>

<p>Here is my source code.</p>

<pre><code> CvCapture *m_pMusicVideo;     

 m_pMusicVideo = cvCreateFileCapture(""simtom.mp4"");
</code></pre>
",2012-08-03 23:38:58,2012-08-03 23:38:58,"cvCreateFileCapture always returns ""NULL""",<ios><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
10853,12785697,2012-10-08 16:30:50,,"<p>I have been trying to install OpenCv 2.4.2 with cuda enabled on visual studio 9 2008.</p>

<p>These are the below specs:</p>

<p>OpenCv version: 2.4.2<br/>
OS: Windows 7 64 bit<br/>
Cmake version: 2.8.9<br/>
Graphics card: NVIDIA GeForce GTX 550 Ti<br/>
Cuda version: 4.2<br/></p>

<p>I downloaded the opencv from <a href=""http://sourceforge.net/projects/opencvlibrary/files/opencv-win/2.4.2/OpenCV-2.4.2.exe/download"" rel=""nofollow"">OpenCV</a> and have followed all the instructions correctly.<br/></p>

<p>This is the result of the CMake configuration:</p>

<blockquote>
  <p>GUI:<br/> QT 4.x: NO   Win32 UI: YES<br/>  OpenGL support: NO<br/><br>
  Media I/O:<br/>  ZLib: build (ver 1.2.6)<br/>   JPEG: build (ver
        62)<br/>  PNG: build (ver 1.5.9)<br/>  TIFF: build (ver 42 -
        4.0.1)<br/>  JPEG 2000: build (ver 1.900.1)<br/>  OpenEXR: NO <br/>
         Video I/O:<br/> FFMPEG: YES (prebuilt binaries)<br/> codec: YES(ver 53.61.100<br/> format: YES (ver 53.32.100<br/> util: YES(ver
  51.35.100)<br/> swscale: YES (ver 2.1.100)<br/> gentoo-style:YES<br/> OpenNI: NO <br/> OpenNI PrimeSensor Modules: NO<br/> PvAPI: NO <br/>
  DirectShow: YES<br/> XIMEA: NO<br/></p>
  
  <p>Other third-party libraries Use IPP: NO <br/>  Use TBB: NO <br/> Use
  Cuda: YES (ver 4.2) <br/>  Use Eigen: NO<br/> <br/> </p>
  
  <p>NVIDIA CUDA: (ver 4.2) <br/>  Use CUFFT: YES <br/>  Use CUBLAS: NO
  <br/>  NVIDIA GPU arch: 11 12 13 20 21 30 <br/>  NVIDIA PTX archs: 11
  12 13 20 21 30 <br/> NVIDIA GPU features: 11 12 13 20 20 30 20<br/><br>
         Python: <br/> Interpreter: NO <br/>
         Documentation: <br/>  Build Documentation: NO <br/>  Sphinx: NO <br/> PdfLaTeX compiler: NO <br/>  Tests and samples:<br/> Tests:
  YES<br/> Performance tests: YES <br/> Examples: NO<br/> 
        Install path: C:/opencv/Builds/install<br/> cvconfig.h is in: C:/opencv/Builds<br/> 
  -----------------------------------------------------------------<br/>
         Configuring done<br/>  Generating done<br/></p>
</blockquote>

<p>Now if i Build the solution the build fails and it gives me an error. These are a few errors from a lot of them:<br/></p>

<blockquote>
  <p>Error 8 fatal error LNK1104: cannot open file
  '....\lib\Debug\opencv_gpu242d.lib' opencv_stitching<br/>  Error 9
  fatal error LNK1104: cannot open file
  '....\lib\Debug\opencv_gpu242d.lib' opencv_videostab<br/> Error 10
  fatal error LNK1104: cannot open file
  '....\lib\Debug\opencv_gpu242d.lib' opencv_test_stitching<br/>  Error
  13 fatal error LNK1104: cannot open file
  '....\lib\Debug\opencv_gpu242d.lib' opencv_perf_stitching<br/></p>
</blockquote>

<p>Please help me with this.</p>

<p>Thanks in advance,<br/>Shilpa</p>
",2012-10-08 17:45:14,2012-10-15 14:05:05,Install OpenCv 2.4.2 with Cuda on Visual studio 9 2008: errors in build,<visual-studio><opencv><cuda>,,,CC BY-SA 3.0,True,False,False,False,True
10865,10826745,2012-05-31 02:33:02,,"<p>I am trying to fill sample data for a AVFrame initialized with RGB24 format.
I use following code snippet to populate RGB data.
But in the encoded video,I can only see grayscale strip covering only 1/3 of the videoframe.
This code snippet suppose to fill only Red color.
Any tips what Im doing wrong here ?</p>

<pre><code>AVFrame *targetFrame=.....
int height=imageHeight();
int width=imageWidth();


  for(y=0;y&lt;encoder.getVideoParams().height ;y++){   
       for(x=0;x&lt; encoder.getVideoParams().width;x++){


   targetFrame-&gt;data[0][(y* width)+x]=(x%255); //R  
   targetFrame-&gt;data[0][(y* width)+x+1]=0;     //G
   targetFrame-&gt;data[0][(y* width)+x+2]=0;     //B


  }
   }
</code></pre>
",,2012-05-31 02:45:42,libav: Filling AVFrame with RGB24 sample data?,<c><image-processing><ffmpeg><libavcodec><libav>,,,CC BY-SA 3.0,False,False,False,False,True
10998,11814486,2012-08-05 06:39:18,,"<p>So I'm using JavaCV and trying to capture frames as images from an mp4 file. I keep getting an EXCEPTION_ACCESS_VIOLATION when I try to save the images and have not been able to find a solution anywhere. OpenCV, JavaCV, and Java are all the same bitness (64). I also have 64bit visual c++ installed. Here is the code I am using any idea what is causing this or what an alternative solution would be. Thanks for your help in advance.</p>

<pre><code>      public class VideoTest {

        public static void main(final String args[]) {
            VideoTest vt = new VideoTest();
            IplImage[] images = vt.extractVideoFrames(""video.mp4"");
            int i = 1;
            //Save images
            for(IplImage image : images) {
                /* Exception_ACCESS_VIOLATION occurs here */
                cvSaveImage(Integer.toString(i) + "".jpg"", image);
                i++;
            }
        }

        /* Extract at least 30 frames from the video at even intervals */
        private IplImage[] extractVideoFrames(String videoName) {
            FrameGrabber grabber = new FFmpegFrameGrabber(videoName);
            try {
                grabber.start();
            } catch (com.googlecode.javacv.FrameGrabber.Exception e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            double frameLength = grabber.getLengthInFrames();
            int increment = (int) Math.ceil(frameLength / 30);
            if (frameLength &lt; 30) {
                System.err.println(""Not enough frames"");
            }

            IplImage[] faceImgArr = new IplImage[30];

            /* Ensure we don't go past end of video and get at least 30 frames */
            for (int i = 0, j = 0; i &lt; frameLength &amp;&amp; j &lt;= 30; i += increment, j++) {
                try {
                    if ((grabber.getFrameNumber() % increment) == 0) {
                        faceImgArr[j] = grabber.grab();
                    } else {
                        grabber.grabFrame();
                    }
                } catch (Exception e) {
                    System.err.println(""Error grabbing frame"");
                }
            }

            return faceImgArr;
        }

    }

Error Message:
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000066de1630, pid=1328, tid=7016
#
# JRE version: 6.0_32-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.7-b02 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [opencv_ffmpeg242_64.dll+0x5a1630]
#
# An error report file with more information is saved as:
# C:\Users\name\workspace\Video\hs_err_pid1328.log
#


Snippet from log:
Stack: [0x0000000002900000,0x0000000002a00000],  sp=0x00000000029fec30,  free space=1019k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [opencv_ffmpeg242_64.dll+0x5a1630]  cvWriteFrame_FFMPEG+0x59e2b0

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.googlecode.javacv.cpp.opencv_highgui.cvCreateFileCapture(Ljava/lang/String;)Lcom/googlecode/javacv/cpp/opencv_highgui$CvCapture;+0
j  com.googlecode.javacv.OpenCVFrameGrabber.start()V+22
j  main.recognition.VideoTest.extractVideoFrames(Ljava/lang/String;)[Lcom/googlecode/javacv/cpp/opencv_core$IplImage;+10
j  main.recognition.VideoTest.main([Ljava/lang/String;)V+11
v  ~StubRoutines::call_stub
</code></pre>
",,2012-11-01 14:46:40,JavaCV EXCEPTION_ACCESS_VIOLATION when saving image,<java><opencv><video-processing><image-recognition><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
11018,13760053,2012-12-07 09:15:08,,"<p>For my application i created video from set of images by using javacv/opencv in android.but that video plays with out sound.so i want to add my recorded audio(mp3 file) to that generated video how can i achieve it?</p>

<p>This is my code which is used to get video from images,</p>

<pre><code>                String path =SCREENSHOT_FOLDER2; 

            File folder = new File(path);


                listOfFiles = folder.listFiles();  
                if(listOfFiles.length&gt;0)
                {









              iplimage = new opencv_core.IplImage[listOfFiles.length];


               for (int j = 0; j &lt; listOfFiles.length; j++) {

                 String files="""";       

               if (listOfFiles[j].isFile()) 
               {
               files = listOfFiles[j].getName();

                 }   


                String[] tokens = files.split(""\\.(?=[^\\.]+$)"");
               String name=tokens[0]; 

                System.out.println("" j "" + name);




              iplimage[j]=cvLoadImage(""/mnt/sdcard/images/""+name+"".png"");


               }

            } 



                File videopath = new File(SCREENSHOT_FOLDER3);
                videopath.mkdirs();
                 FFmpegFrameRecord recorder = new          
                    FFmpegFrameRecord(SCREENSHOT_FOLDER3+
                  ""video""+System.currentTimeMillis()+"".mp4"",320,480);

                 try {
                     recorder.setCodecID(CODEC_ID_MPEG4); //CODEC_ID_MPEG4                            
                     //CODEC_ID_MPEG1VIDEO
                     recorder.setBitrate(sampleVideoBitRate);
                     recorder.setFrameRate(10);                     
                     recorder.setPixelFormat(PIX_FMT_YUV420P); //PIX_FMT_YUV420P


                     recorder.start();

                     int x = 0;
                     int y = 0;
                    for (int i=0;i&lt; 300 &amp;&amp; x&lt;iplimage.length;i++)

                       {

                         recorder.record(image[x]);

                        if (i&gt;(y+10)) {
                            y=y+1;
                            x++;
                        }

                        }
                     recorder.stop();
                    }
                 catch (Exception e){
                     e.printStackTrace();
                   }
</code></pre>

<p>now how to integrate audio file(.mp3) file in this code.</p>
",2012-12-07 09:33:47,2016-05-11 12:23:19,how to integrate audio with video in android using javacv/opencv?,<android><audio><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
11110,9854384,2012-03-24 18:35:28,,"<p>I am working on a program to detect the tips of a probing device and analyze the color change during probing. The input/output mechanisms are more or less in place. What I need now is the actual meat of the thing: detecting the tips.</p>

<p>In the images below, the tips are at the center of the crosses. I thought of applying BFS to the images after some threshold'ing but was then stuck and didn't know how to proceed. I then turned to OpenCV after reading that it offers feature detection in images. However, I am overwhelmed by the vast amount of concepts and techniques utilized here and again, clueless about how to proceed.</p>

<p>Am I looking at it the right way? Can you give me some pointers?</p>

<p><img src=""https://i.stack.imgur.com/ciNBs.jpg"" alt=""Colored Image"">
Image extracted from short video</p>

<p><img src=""https://i.stack.imgur.com/3EndA.png"" alt=""Binary image with threshold set at 95"">
Binary version with threshold set at 95</p>
",,2013-12-21 00:08:52,Detecting crosses in an image,<c><image-processing><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
11113,9858388,2012-03-25 06:42:50,,"<p>I am trying to convert an RGB frame, which is taken from OpenGL glReadPixels(), to a YUV frame, and write the YUV frame to a file (.yuv). Later on I would like to write it to a named_pipe as an input for FFMPEG, but as for now I just want to write it to a file and view the image result using a YUV Image Viewer. So just disregard the ""writing to pipe"" for now. </p>

<p>After running my code, I encountered the following errors:  </p>

<ol>
<li><p>The number of frames shown in the YUV Image Viewer software is always 1/3 of the number of frames I declared in my program. When I declare fps as 10, I could only view 3 frames. When I declared fps as 30, I could only view 10 frames. However when I view the file in Text Editor, I could see that I have the correct amount of word ""FRAME"" printed in the file.
This is the example output that I got: <a href=""http://www.bobdanani.net/image.yuv"" rel=""nofollow"">http://www.bobdanani.net/image.yuv</a></p></li>
<li><p>I could not see the correct image, but just some distorted green, blue, yellow, and black pixels.</p></li>
</ol>

<p>I read about YUV format from <a href=""http://wiki.multimedia.cx/index.php?title=YUV4MPEG2"" rel=""nofollow"">http://wiki.multimedia.cx/index.php?title=YUV4MPEG2</a> and <a href=""http://www.fourcc.org/fccyvrgb.php#mikes_answer"" rel=""nofollow"">http://www.fourcc.org/fccyvrgb.php#mikes_answer</a> and <a href=""http://kylecordes.com/2007/pipe-ffmpeg"" rel=""nofollow"">http://kylecordes.com/2007/pipe-ffmpeg</a></p>

<p>Here is what I have tried so far. I know that this conversion approach is quite in-efficient, and I can optimize it later. Now I just want to get this naive approach to work and have the image shown properly.</p>

<pre><code>int frameCounter = 1; 
int windowWidth = 0, windowHeight = 0;
unsigned char *yuvBuffer;
unsigned long bufferLength = 0;
unsigned long frameLength = 0;
int fps = 10;

void display(void) {

    /* clear the color buffers */
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    /* DRAW some OPENGL animation, i.e. cube, sphere, etc 
     .......
     .......
    */

    glutSwapBuffers();

    if ((frameCounter % fps) == 1){
        bufferLength = 0;
        windowWidth = glutGet(GLUT_WINDOW_WIDTH);
        windowHeight = glutGet (GLUT_WINDOW_HEIGHT);
        frameLength = (long) (windowWidth * windowHeight * 1.5 * fps) + 100; // YUV 420 length (width*height*1.5) + header length
        yuvBuffer = new unsigned char[frameLength];
        write_yuv_frame_header();
    }

    write_yuv_frame();

    frameCounter = (frameCounter % fps) + 1;

    if ( (frameCounter % fps) == 1){
        snprintf(filename, 100, ""out/image-%d.yuv"", seq_num);
        ofstream out(filename, ios::out | ios::binary); 
        if(!out) { 
            cout &lt;&lt; ""Cannot open file.\n""; 
        } 

        out.write (reinterpret_cast&lt;char*&gt; (yuvBuffer), bufferLength);
        out.close();
        bufferLength = 0;
        delete[] yuvBuffer;
    }
}


void write_yuv_frame_header (){
    char *yuvHeader = new char[100];
    sprintf (yuvHeader, ""YUV4MPEG2 W%d H%d F%d:1 Ip A0:0 C420mpeg2 XYSCSS=420MPEG2\n"", windowWidth, windowHeight, fps);
    memcpy ((char*)yuvBuffer + bufferLength, yuvHeader, strlen(yuvHeader));
    bufferLength += strlen (yuvHeader);
    delete (yuvHeader);
}

void write_yuv_frame() {
    int width = glutGet(GLUT_WINDOW_WIDTH);
    int height = glutGet(GLUT_WINDOW_HEIGHT);
    memcpy ((void*) (yuvBuffer+bufferLength), (void*) ""FRAME\n"", 6);
    bufferLength +=6;

    long length = windowWidth * windowHeight;
    long yuv420FrameLength = (float)length * 1.5;
    long lengthRGB = length * 3;
    unsigned char *rgb      = (unsigned char *) malloc(lengthRGB * sizeof(unsigned char));
    unsigned char *yuvdest  = (unsigned char *) malloc(yuv420FrameLength * sizeof(unsigned char));
    glReadPixels(0, 0, windowWidth, windowHeight, GL_RGB, GL_UNSIGNED_BYTE, rgb);

    int r, g, b, y, u, v, ypos, upos, vpos;

    for (int j = 0; j &lt;  windowHeight; ++j){
        for (int i = 0; i &lt; windowWidth; ++i){
            r = (int)rgb[(j * windowWidth + i) * 3 + 0];
            g = (int)rgb[(j * windowWidth + i) * 3 + 1];
            b = (int)rgb[(j * windowWidth + i) * 3 + 2];

            y = (int)(r *  0.257 + g *  0.504 + b *  0.098) + 16;
            u = (int)(r *  0.439 + g * -0.368 + b *  -0.071) + 128;
            v = (int)(r *  -0.148 + g * -0.291 + b * 0.439 + 128);

            ypos = j * windowWidth + i;
            upos = (j/2) * (windowWidth/2) + i/2 + length;
            vpos = (j/2) * (windowWidth/2) + i/2 + length + length/4;

            yuvdest[ypos] = y;
            yuvdest[upos] = u;
            yuvdest[vpos] = v;            
        } 
    }

    memcpy ((void*) (yuvBuffer + bufferLength), (void*)yuvdest, yuv420FrameLength);
    bufferLength += yuv420FrameLength;
    free (yuvdest);   
    free (rgb);
}
</code></pre>

<p>This is just the very basic approach, and I can optimize the conversion algorithm later.
Can anyone tell me what is wrong in my approach? My guess is that one of the issues is with the outstream.write() call, because I converted the unsigned char* data to char* data that it may lose data precision. But if I don't cast it to char* I will get a compile error. However this doesn't explain why the output frames are corrupted (only account to 1/3 of the number of total frames). </p>
",2012-03-25 13:57:38,2014-09-10 09:10:13,Issue with writing YUV image frame in C/C++,<c++><image-processing><file-io><rgb><yuv>,,,CC BY-SA 3.0,False,False,False,False,True
11162,13770376,2012-12-07 20:18:26,,"<p>So, I'm developing a custom video player for Android but I need to play more than the android supported video files <code>(mp4, 3gp...), like wmv, avi, flv.</code></p>

<p>At this time I do already convert any video type to .mp4 and I'm able to play them after recoding, but I have no idea how can I play those <code>wmv</code>, <code>avi</code> files without recoding them to <code>mp4</code> video formats.</p>

<p>Is there any way I can play any video on Android without recoding them?
<code>JavaCV</code> + <code>FFmpeg</code> library already working, just don't know how to do that.</p>

<p>By the way, heres the code that I'm using to recode videos:</p>

<pre><code>public static void convert(File file) {

    FFmpegFrameGrabber frameGrabber =
            new FFmpegFrameGrabber(file.getAbsolutePath());

    IplImage captured_frame = null;

    FrameRecorder recorder = null;
    recorder = new FFmpegFrameRecorder(""/mnt/sdcard/external_sd/videosteste/primeiroteste.mp4"", 300, 300);
    recorder.setVideoCodec(13);
    recorder.setFrameRate(30);
    recorder.setFormat(""mp4"");
    try {
        recorder.start();
        frameGrabber.start();
        while (true) {
            try {
                captured_frame = frameGrabber.grab();

                if (captured_frame == null) {
                    System.out.println(""!!! Failed cvQueryFrame"");
                    break;
                }
                recorder.record(captured_frame);
            } catch (Exception e) {
            }
        }
        recorder.stop();
        recorder.release();
    } catch (Exception e) {
        e.printStackTrace();
    }
}
</code></pre>
",2019-06-15 11:50:18,2020-07-13 20:03:50,Playing a video with JavaCV and FFmpeg,<android><video><ffmpeg><android-videoview><javacv>,,,CC BY-SA 4.0,False,False,False,False,True
11215,9866922,2012-03-26 05:14:55,,"<p>I have an array of rgb data generated from glReadPixels().<br>
Note that RGB data is pixel packed (r1,g1,b1,r2,g2,b2,...).  </p>

<p>How can I quickly write a YUV video frame using OpenCV or another C++ library, so that I can stream them to FFMPEG? Converting RGB pixel to YUV pixel is not a problem, as there are many conversion formula available online. However writing the YUV frame is the main problem for me. I have been trying to write the YUV video frame since the last few days and were not successful in doing that.   </p>

<p>This is one of my other question about writing YUV frame and the issues that I encountered: <a href=""https://stackoverflow.com/questions/9858388/need-help-writing-yuv-image-frame-in-c-c"">Issue with writing YUV image frame in C/C++</a>
I don't know what is wrong with my current approach in writing the YUV frame to a file.</p>

<p>So right now I may want to use existing library (if any), that accepts an RGB data, and convert them to YUV and write the YUV frame directly to a file or to a pipe. Of course it would be much better if I can fix my existing program to write the YUV frame, but you know, there is also a deadline in every software development project, so time is also a priority for me and my project team members.</p>
",2017-05-23 10:34:36,2012-03-26 17:29:41,How to write YUV 420 video frames from RGB data using OpenCV or other image processing library?,<c++><image-processing><opencv><yuv>,,,CC BY-SA 3.0,True,False,False,False,True
11284,11827356,2012-08-06 11:26:31,,"<p>We're trying to replicate the functionality of this command line <strong>ffmpeg</strong> directive using the <strong>FFMpeg c api</strong> through <strong>JNI</strong> calls on Android. </p>

<pre><code>ffmpeg -ss 2 -t 120 -vcodec copy -acodec copy -i input.file output.file
</code></pre>

<p>Basically, given a start and end time, we wish to <em>copy</em> (not re-encode) a small(er) segment of video from the larger (input) video source. </p>

<p>We've been using the wonderful JavaCv wrapper to openCv and FFMpeg, but we just cannot figure out how to do this simple bit of work. We've been scouring the ffmpeg.c and related sources and while I now understand that it switches to stream_copy and remuxing rather than re-encoding when the codec is specified as <em>copy</em> I cannot for the life of me identify what series of method calls to make to replicate this through the C api. Does anyone have an example JNI file for doing this ? Or are there rockstar C types that can explain how I get from that command line to api calls? We've spent the better part of two weeks working on this (we're not native C guys) and we're at the point where we just need to ship some code. Any example code, especially JNI code or method call maps etc. would be greatly appreciated!</p>
",2012-08-06 13:05:03,2012-08-06 15:54:11,Trim / Cut video on Android using FFMpeg's Copy,<android><opencv><ffmpeg><java-native-interface>,,,CC BY-SA 3.0,True,False,False,False,True
11286,14741889,2013-02-07 01:10:47,,"<p>My team and I are working on a project with OpenCV (v. 2.4.2) and QT(v. 4.8.4).  We are developing in QtCreator. It is a cross-platform project that will be primarily looking for movement in video files.  </p>

<p>On the Mac OSX, the video file will open properly using the normal cv::VideoCapture object and interface and we can run our program successfully.  However, on Windows, the file would not open, just throwing this error on the QtCreator terminal when the program exits:  </p>

<pre><code>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:361)
</code></pre>

<p>However, when we set QtCreator to 'Release' build mode instead of 'Debug', the program opens the file as it should.</p>

<p>My teammate and I have done extensive research on this error and found no real solutions.
We have tried installing codecs, moving the opencv_ffmpeg.dll file to the working directory of the .exe, and modifying the path with the location of the opencv_ffmpeg.dll (as well as the location of the ffmpeg library.)  We have also made sure that our video is valid, as well as the file path (the same video works on a MacOS, and the video file will actually play in Windows through Qt's Phonon module).</p>

<p>Similar questions:  </p>

<p><a href=""https://stackoverflow.com/questions/12279833/videocapture-opencv-2-4-2-error-in-windows"">VideoCapture OpenCV 2.4.2 error in windows</a></p>

<p><a href=""https://stackoverflow.com/questions/6670515/problem-with-videocapture-in-opencv-2-3"">Problem with VideoCapture in OpenCV 2.3</a></p>

<p>Any ideas about what could be causing this issue?</p>
",2017-05-23 10:32:00,2013-02-11 20:56:18,Windows OpenCV VideoCapture Will Not Open Video File,<file><qt><video><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
11513,10878336,2012-06-04 08:24:37,,"<p>I want to create video from image sequence (on android) by this code:</p>

<pre><code>    opencv_core.IplImage image = cvLoadImage(""/sdcard/mytest/testimage.jpg"");
    FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(""/sdcard/mytest/test.3gp"",256,256);
    try {
        recorder.setCodecID( CODEC_ID_H263);
        recorder.setFormat(""3gp"");
        recorder.setPixelFormat(  PIX_FMT_YUV420P);
        recorder.start();
        for (int i=0;i&lt;10;i++)
          {
            recorder.record(image);
          }
        recorder.stop();
       }
    catch (Exception e){
        e.printStackTrace();
      }
</code></pre>

<p>But instead of my image I have got green screen. What I have to change in my code?</p>

<p>And how I can add audio to my video?</p>
",2012-06-04 09:53:13,2012-06-04 20:30:38,to create video from image sequence on android,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
11579,9902009,2012-03-28 06:08:58,,"<p>My system is Ubuntu 11.10.</p>

<p>I've been following this guide somewhat:
<a href=""http://www.ozbotz.org/opencv-installation/"" rel=""nofollow"">http://www.ozbotz.org/opencv-installation/</a></p>

<p>I also fixed some errors stated here (since I installed the latest ffmpeg 0.10.2):
<a href=""http://code.opencv.org/issues/1605"" rel=""nofollow"">http://code.opencv.org/issues/1605</a></p>

<p>However, when I try to do a make, I get 3 errors all based on fixes that I did from above issues link. In particular:</p>

<pre><code>cap_ffmpeg_impl.hpp:1485:32: error: ‘av_format_write_header’ was not declared in this scope

cap_ffmpeg_impl.hpp:524:64: error: too many arguments to function ‘int avformat_open_input(AVFormatContext**, const char*, AVInputFormat*, AVDictionary**)’

cap_ffmpeg_impl.hpp:486:53: error: too many arguments to function ‘int avformat_open_input(AVFormatContext**, const char*, AVInputFormat*, AVDictionary**)’
</code></pre>

<p>Here is my cmake:</p>

<pre><code>blanket@comp:~/Downloads/OpenCV-2.3.1/build$ cmake ..
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detected version of GNU GCC: 46 (406)
-- checking for module 'gtk+-2.0'
--   found gtk+-2.0, version 2.24.6
-- checking for module 'gthread-2.0'
--   found gthread-2.0, version 2.30.0
-- checking for module 'gstreamer-base-0.10'
--   found gstreamer-base-0.10, version 0.10.35
-- checking for module 'gstreamer-app-0.10'
--   found gstreamer-app-0.10, version 0.10.35
-- checking for module 'gstreamer-video-0.10'
--   found gstreamer-video-0.10, version 0.10.35
-- checking for module 'libavcodec'
--   found libavcodec, version 54.12.100
-- checking for module 'libavformat'
--   found libavformat, version 54.3.100
-- checking for module 'libavutil'
--   found libavutil, version 51.44.100
-- checking for module 'libswscale'
--   found libswscale, version 2.1.100
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- Found ZLIB: /usr/lib/i386-linux-gnu/libz.so (found version ""1.2.3.4"")
-- Found PNG: /usr/lib/i386-linux-gnu/libpng.so 
-- Looking for /usr/include/png.h
-- Looking for /usr/include/png.h - found
-- Looking for /usr/include/libpng/png.h
-- Looking for /usr/include/libpng/png.h - found
-- Found TIFF: /usr/lib/i386-linux-gnu/libtiff.so 
-- Found JPEG: /usr/lib/i386-linux-gnu/libjpeg.so 
-- Found Jasper: /usr/lib/i386-linux-gnu/libjasper.so 
-- Looking for alloca.h
-- Looking for alloca.h - found
-- Looking for alloca
-- Looking for alloca - not found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Looking for pthread.h
-- Looking for pthread.h - found
-- checking for module 'libv4l1'
--   found libv4l1, version 0.8.6
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Found PythonInterp: /usr/bin/python2.7 
-- Could NOT find PythonLibs (missing:  PYTHON_INCLUDE_DIRS) 
--     Use NumPy headers from: /usr/lib/pymodules/python2.7/numpy/core/include
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named sphinx
CUDA_TOOLKIT_ROOT_DIR not found or specified
-- Could NOT find CUDA (missing:  CUDA_TOOLKIT_ROOT_DIR CUDA_NVCC_EXECUTABLE CUDA_INCLUDE_DIRS CUDA_CUDART_LIBRARY) (Required is at least version ""4.0"")
-- Parsing 'cvconfig.h.cmake'
-- 
-- General configuration for opencv 2.3.1 =====================================
-- 
--     Built as dynamic libs?:     YES
--     Compiler:                   /usr/bin/c++
--     C++ flags (Release):          -Wall -pthread -march=i686 -ffunction-sections  -O3 -DNDEBUG  -fomit-frame-pointer -msse -msse2 -mfpmath=387 -DNDEBUG 
--     C++ flags (Debug):            -Wall -pthread -march=i686 -ffunction-sections  -g  -O0 -DDEBUG -D_DEBUG -ggdb3 
--     Linker flags (Release):      
--     Linker flags (Debug):        
-- 
--   GUI: 
--     GTK+ 2.x:                   YES
--     GThread:                    YES
-- 
--   Media I/O: 
--     ZLib:                       YES
--     JPEG:                       TRUE
--     PNG:                        TRUE
--     TIFF:                       TRUE
--     JPEG 2000:                  TRUE
--     OpenEXR:                    NO
--     OpenNI:                     NO
--     OpenNI PrimeSensor Modules: NO
--     XIMEA:                      NO
-- 
--   Video I/O:
--     DC1394 1.x:                 NO
--     DC1394 2.x:                 NO
--     FFMPEG:                     YES
--       codec:                    YES
--       format:                   YES
--       util:                     YES
--       swscale:                  YES
--       gentoo-style:             YES
--     GStreamer:                  YES
--     UniCap:                     NO
--     PvAPI:                      NO
--     V4L/V4L2:                   Using libv4l
--     Xine:                       NO
-- 
--   Other third-party libraries:
--     Use IPP:                    NO
--     Use TBB:                    NO
--     Use ThreadingFramework:     NO
--     Use Cuda:                   NO
--     Use Eigen:                  NO
-- 
--   Interfaces:
--     Python:                     YES
--     Python interpreter:         /usr/bin/python2.7 -B (ver 2.7)
--     Python numpy:               YES
--     Java:                       NO
-- 
--   Documentation:
--     Sphinx:                     NO
--     PdfLaTeX compiler:          NO
--     Build Documentation:        NO
-- 
--   Tests and samples:
--     Tests:                      YES
--     Examples:                   NO
-- 
--   Install path:                 /usr/local
-- 
--   cvconfig.h is in:             /home/blanket/Downloads/OpenCV-2.3.1/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/blanket/Downloads/OpenCV-2.3.1/build
</code></pre>

<p>Here are my make errors:</p>

<pre><code>[ 21%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.o
In file included from /home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg.cpp:45:0:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘void CvCapture_FFMPEG::close()’:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:451:9: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1517) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:451:31: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1517) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘bool CvCapture_FFMPEG::reopen()’:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:483:5: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1517) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:483:27: warning: ‘void av_close_input_file(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1517) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:486:53: error: too many arguments to function ‘int avformat_open_input(AVFormatContext**, const char*, AVInputFormat*, AVDictionary**)’
/usr/local/include/libavformat/avformat.h:1319:5: note: declared here
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:487:5: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1341) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:487:27: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1341) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:497:5: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3722) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:497:28: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3722) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘bool CvCapture_FFMPEG::open(const char*)’:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:524:64: error: too many arguments to function ‘int avformat_open_input(AVFormatContext**, const char*, AVInputFormat*, AVDictionary**)’
/usr/local/include/libavformat/avformat.h:1319:5: note: declared here
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:529:11: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1341) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:529:33: warning: ‘int av_find_stream_info(AVFormatContext*)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1341) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:550:13: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3722) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:550:36: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3722) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In function ‘AVStream* icv_add_video_stream_FFMPEG(AVFormatContext*, CodecID, int, int, int, double, int)’:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:999:7: warning: ‘AVStream* av_new_stream(AVFormatContext*, int)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1541) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:999:26: warning: ‘AVStream* av_new_stream(AVFormatContext*, int)’ is deprecated (declared at /usr/local/include/libavformat/avformat.h:1541) [-Wdeprecated-declarations]
In file included from /home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg.cpp:45:0:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In function ‘int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)’:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1121:20: warning: ‘int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4042) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1121:72: warning: ‘int avcodec_encode_video(AVCodecContext*, uint8_t*, int, const AVFrame*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:4042) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘bool CvVideoWriter_FFMPEG::open(const char*, int, double, int, int, bool)’:
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442:15: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3722) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1442:36: warning: ‘int avcodec_open(AVCodecContext*, AVCodec*)’ is deprecated (declared at /usr/local/include/libavcodec/avcodec.h:3722) [-Wdeprecated-declarations]
/home/blanket/Downloads/OpenCV-2.3.1/modules/highgui/src/cap_ffmpeg_impl.hpp:1485:32: error: ‘av_format_write_header’ was not declared in this scope
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.o] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
</code></pre>
",,2012-03-28 12:42:36,opencv installation errors when trying to make,<ubuntu><opencv><installation>,,,CC BY-SA 3.0,True,False,False,False,True
11588,19754316,2013-11-03 15:02:13,,"<p>I'm trying to compile OpenCV library with MinGW in Linux for Windows using cmake-gui. I use toolchain file for cross-compilation Toolchain-mingw.cmake</p>

<pre><code>SET(CMAKE_SYSTEM_NAME Windows)
SET(CMAKE_C_COMPILER x86_64-w64-mingw32-gcc)
SET(CMAKE_CXX_COMPILER x86_64-w64-mingw32-g++)
SET(CMAKE_RC_COMPILER x86_64-w64-mingw32-windres)
SET(CMAKE_FIND_ROOT_PATH  /usr/x86_64-w64-mingw32  )
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
</code></pre>

<p>When I try to configure, there are a lot of errors and I have no idea how to solve it</p>

<pre><code>CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeDetermineSystem.cmake:172    (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:61 (project)


The CXX compiler identification is GNU 4.8.0
CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeDetermineCXXCompiler.cmake:167 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:61 (project)


The C compiler identification is GNU 4.8.0
CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeDetermineCCompiler.cmake:171 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:61 (project)


CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeDetermineRCCompiler.cmake:65 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
/usr/local/share/cmake-2.8/Modules/Platform/Windows-GNU.cmake:64 (enable_language)
/usr/local/share/cmake-2.8/Modules/Platform/Windows-GNU-CXX.cmake:1 (include)
/usr/local/share/cmake-2.8/Modules/CMakeCXXInformation.cmake:56 (include)
CMakeLists.txt:61 (project)


Check for working CXX compiler: /usr/bin/x86_64-w64-mingw32-g++
Check for working CXX compiler: /usr/bin/x86_64-w64-mingw32-g++ -- works
Detecting CXX compiler ABI info
CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeDetermineCompilerABI.cmake:31 (try_compile):
Cannot copy output executable

'/media/data/distr/opencv-2.4.6.1/release4/CMakeFiles/CMakeTmp/cmTryCompileExec3943396232.exe'

to destination specified by COPY_FILE:

'/media/data/distr/opencv-2.4.6.1/release4/CMakeFiles/2.8.10.2/CMakeDetermineCompilerABI_CXX.bin'

Call Stack (most recent call first):
/usr/local/share/cmake-2.8/Modules/CMakeTestCXXCompiler.cmake:68 (CMAKE_DETERMINE_COMPILER_ABI)
CMakeLists.txt:61 (project)


Detecting CXX compiler ABI info - done
CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeTestCXXCompiler.cmake:71 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:61 (project)


Check for working C compiler: /usr/bin/x86_64-w64-mingw32-gcc
Check for working C compiler: /usr/bin/x86_64-w64-mingw32-gcc -- works
Detecting C compiler ABI info
CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeDetermineCompilerABI.cmake:31 (try_compile):
Cannot copy output executable

'/media/data/distr/opencv-2.4.6.1/release4/CMakeFiles/CMakeTmp/cmTryCompileExec2142254710.exe'

to destination specified by COPY_FILE:

'/media/data/distr/opencv-2.4.6.1/release4/CMakeFiles/2.8.10.2/CMakeDetermineCompilerABI_C.bin'

Call Stack (most recent call first):
/usr/local/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:75 (CMAKE_DETERMINE_COMPILER_ABI)
CMakeLists.txt:61 (project)


Detecting C compiler ABI info - done
CMake Error at /usr/local/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:78 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:61 (project)


Detected version of GNU GCC: 48 (408)
CMake Error at cmake/OpenCVVersion.cmake:19 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:229 (include)


Performing Test HAVE_CXX_FSIGNED_CHAR
Performing Test HAVE_CXX_FSIGNED_CHAR - Success
Performing Test HAVE_C_FSIGNED_CHAR
Performing Test HAVE_C_FSIGNED_CHAR - Success
Performing Test HAVE_CXX_MSTACKREALIGN
Performing Test HAVE_CXX_MSTACKREALIGN - Success
Performing Test HAVE_C_MSTACKREALIGN
Performing Test HAVE_C_MSTACKREALIGN - Success
Performing Test HAVE_CXX_W
Performing Test HAVE_CXX_W - Success
Performing Test HAVE_C_W
Performing Test HAVE_C_W - Success
Performing Test HAVE_CXX_WALL
Performing Test HAVE_CXX_WALL - Success
Performing Test HAVE_C_WALL
Performing Test HAVE_C_WALL - Success
Performing Test HAVE_CXX_WERROR_RETURN_TYPE
Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
Performing Test HAVE_C_WERROR_RETURN_TYPE
Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
Performing Test HAVE_CXX_WERROR_ADDRESS
Performing Test HAVE_CXX_WERROR_ADDRESS - Success
Performing Test HAVE_C_WERROR_ADDRESS
Performing Test HAVE_C_WERROR_ADDRESS - Success
Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
Performing Test HAVE_C_WERROR_SEQUENCE_POINT
Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
Performing Test HAVE_CXX_WFORMAT
Performing Test HAVE_CXX_WFORMAT - Success
Performing Test HAVE_C_WFORMAT
Performing Test HAVE_C_WFORMAT - Success
Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
Performing Test HAVE_C_WERROR_FORMAT_SECURITY
Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
Performing Test HAVE_CXX_WMISSING_DECLARATIONS
Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
Performing Test HAVE_C_WMISSING_DECLARATIONS
Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
Performing Test HAVE_CXX_WMISSING_PROTOTYPES
Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
Performing Test HAVE_C_WMISSING_PROTOTYPES
Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
Performing Test HAVE_C_WSTRICT_PROTOTYPES
Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
Performing Test HAVE_CXX_WUNDEF
Performing Test HAVE_CXX_WUNDEF - Success
Performing Test HAVE_C_WUNDEF
Performing Test HAVE_C_WUNDEF - Success
Performing Test HAVE_CXX_WINIT_SELF
Performing Test HAVE_CXX_WINIT_SELF - Success
Performing Test HAVE_C_WINIT_SELF
Performing Test HAVE_C_WINIT_SELF - Success
Performing Test HAVE_CXX_WPOINTER_ARITH
Performing Test HAVE_CXX_WPOINTER_ARITH - Success
Performing Test HAVE_C_WPOINTER_ARITH
Performing Test HAVE_C_WPOINTER_ARITH - Success
Performing Test HAVE_CXX_WSHADOW
Performing Test HAVE_CXX_WSHADOW - Success
Performing Test HAVE_C_WSHADOW
Performing Test HAVE_C_WSHADOW - Success
Performing Test HAVE_CXX_WSIGN_PROMO
Performing Test HAVE_CXX_WSIGN_PROMO - Success
Performing Test HAVE_C_WSIGN_PROMO
Performing Test HAVE_C_WSIGN_PROMO - Failed
Performing Test HAVE_CXX_WNO_NARROWING
Performing Test HAVE_CXX_WNO_NARROWING - Success
Performing Test HAVE_C_WNO_NARROWING
Performing Test HAVE_C_WNO_NARROWING - Success
Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success
Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
Performing Test HAVE_CXX_WNO_LONG_LONG
Performing Test HAVE_CXX_WNO_LONG_LONG - Success
Performing Test HAVE_C_WNO_LONG_LONG
Performing Test HAVE_C_WNO_LONG_LONG - Success
Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
Performing Test HAVE_C_FOMIT_FRAME_POINTER
Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
Performing Test HAVE_CXX_MSSE
Performing Test HAVE_CXX_MSSE - Success
Performing Test HAVE_C_MSSE
Performing Test HAVE_C_MSSE - Success
Performing Test HAVE_CXX_MSSE2
Performing Test HAVE_CXX_MSSE2 - Success
Performing Test HAVE_C_MSSE2
Performing Test HAVE_C_MSSE2 - Success
Performing Test HAVE_CXX_FFUNCTION_SECTIONS
Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success
Performing Test HAVE_C_FFUNCTION_SECTIONS
Performing Test HAVE_C_FFUNCTION_SECTIONS - Success
Looking for fseeko
Looking for fseeko - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
3rdparty/zlib/CMakeLists.txt:24 (check_include_file)


Looking for unistd.h
Looking for unistd.h - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
/usr/local/share/cmake-2.8/Modules/CheckTypeSize.cmake:168 (check_include_file)
3rdparty/zlib/CMakeLists.txt:34 (check_type_size)


Looking for sys/types.h
Looking for sys/types.h - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
/usr/local/share/cmake-2.8/Modules/CheckTypeSize.cmake:169 (check_include_file)
3rdparty/zlib/CMakeLists.txt:34 (check_type_size)


Looking for stdint.h
Looking for stdint.h - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
/usr/local/share/cmake-2.8/Modules/CheckTypeSize.cmake:170 (check_include_file)
3rdparty/zlib/CMakeLists.txt:34 (check_type_size)


Looking for stddef.h
Looking for stddef.h - found
Check size of off64_t
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckTypeSize.cmake:91 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
/usr/local/share/cmake-2.8/Modules/CheckTypeSize.cmake:177 (__check_type_size_impl)
3rdparty/zlib/CMakeLists.txt:34 (check_type_size)


CMake Error at 3rdparty/zlib/CMakeLists.txt:39 (configure_file):
configure_file Problem configuring file


Performing Test HAVE_C_WNO_ATTRIBUTES
Performing Test HAVE_C_WNO_ATTRIBUTES - Success
Performing Test HAVE_C_WNO_STRICT_PROTOTYPES
Performing Test HAVE_C_WNO_STRICT_PROTOTYPES - Success
Performing Test HAVE_C_WNO_MISSING_PROTOTYPES
Performing Test HAVE_C_WNO_MISSING_PROTOTYPES - Success
Performing Test HAVE_C_WNO_MISSING_DECLARATIONS
Performing Test HAVE_C_WNO_MISSING_DECLARATIONS - Success
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
3rdparty/libtiff/CMakeLists.txt:10 (check_include_file)


Looking for assert.h
Looking for assert.h - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
3rdparty/libtiff/CMakeLists.txt:11 (check_include_file)


Looking for fcntl.h
Looking for fcntl.h - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
3rdparty/libtiff/CMakeLists.txt:12 (check_include_file)


Looking for io.h
Looking for io.h - found
Looking for jbg_newlen
Looking for jbg_newlen - not found
Looking for mmap
Looking for mmap - not found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
3rdparty/libtiff/CMakeLists.txt:15 (check_include_file)


Looking for search.h
Looking for search.h - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
3rdparty/libtiff/CMakeLists.txt:16 (check_include_file)


Looking for string.h
Looking for string.h - found
CMake Error at /usr/local/share/cmake-2.8/Modules/CheckIncludeFile.cmake:40 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
3rdparty/libtiff/CMakeLists.txt:18 (check_include_file)


Looking for unistd.h
Looking for unistd.h - found
CMake Error at 3rdparty/libtiff/CMakeLists.txt:24 (configure_file):
configure_file Problem configuring file


Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE
Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE - Success
Performing Test HAVE_C_WNO_UNDEF
Performing Test HAVE_C_WNO_UNDEF - Success
Performing Test HAVE_C_WNO_UNUSED
Performing Test HAVE_C_WNO_UNUSED - Success
Performing Test HAVE_C_WNO_SIGN_COMPARE
Performing Test HAVE_C_WNO_SIGN_COMPARE - Success
Performing Test HAVE_C_WNO_CAST_ALIGN
Performing Test HAVE_C_WNO_CAST_ALIGN - Success
Performing Test HAVE_C_WNO_SHADOW
Performing Test HAVE_C_WNO_SHADOW - Success
Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Success
Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST
Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST - Success
Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST
Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST - Success
Performing Test HAVE_C_WNO_UNUSED_PARAMETER
Performing Test HAVE_C_WNO_UNUSED_PARAMETER - Success
Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION
Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION - Success
Performing Test HAVE_C_WNO_UNINITIALIZED
Performing Test HAVE_C_WNO_UNINITIALIZED - Success
Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER
Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER - Success
CMake Error at 3rdparty/openexr/CMakeLists.txt:14 (configure_file):
configure_file Problem configuring file


CMake Error at 3rdparty/openexr/CMakeLists.txt:16 (configure_file):
configure_file Problem configuring file


Performing Test HAVE_CXX_WNO_SHADOW
Performing Test HAVE_CXX_WNO_SHADOW - Success
Performing Test HAVE_CXX_WNO_UNUSED
Performing Test HAVE_CXX_WNO_UNUSED - Success
Performing Test HAVE_CXX_WNO_SIGN_COMPARE
Performing Test HAVE_CXX_WNO_SIGN_COMPARE - Success
Performing Test HAVE_CXX_WNO_UNDEF
Performing Test HAVE_CXX_WNO_UNDEF - Success
Performing Test HAVE_CXX_WNO_UNINITIALIZED
Performing Test HAVE_CXX_WNO_UNINITIALIZED - Success
Performing Test HAVE_CXX_WNO_SWITCH
Performing Test HAVE_CXX_WNO_SWITCH - Success
Performing Test HAVE_CXX_WNO_PARENTHESES
Performing Test HAVE_CXX_WNO_PARENTHESES - Success
Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS
Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS - Success
Performing Test HAVE_CXX_WNO_EXTRA
Performing Test HAVE_CXX_WNO_EXTRA - Success
CMake Error at cmake/OpenCVFindLibsGUI.cmake:8 (TRY_COMPILE):
Failed to open

/CMakeFiles/CMakeTmp/CMakeFiles/CMakeTmp/CMakeLists.txt

Нет такого файла или каталога
Call Stack (most recent call first):
CMakeLists.txt:397 (include)


CMake Error at cmake/OpenCVFindLibsVideo.cmake:7 (TRY_COMPILE):
Failed to open

/CMakeFiles/CMakeTmp/CMakeFiles/CMakeTmp/CMakeLists.txt

Нет такого файла или каталога
Call Stack (most recent call first):
CMakeLists.txt:398 (include)


CUDA compilation is disabled (due to only Visual Studio compiler supported on your platform).
Found PythonInterp: /usr/bin/python2 (found suitable version ""2.7.4"", minimum required is ""2.0"") 
Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (Required is exact version ""2.7.4"")
Could NOT find JNI (missing:  JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) 
Could NOT find OPENCL (missing:  OPENCL_LIBRARY OPENCL_INCLUDE_DIR) 
CMake Error at cmake/OpenCVExtraTargets.cmake:4 (CONFIGURE_FILE):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:446 (include)


Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
CMake Error at cmake/OpenCVGenHeaders.cmake:12 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:493 (include)


CMake Error at cmake/OpenCVGenHeaders.cmake:35 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:493 (include)


CMake Error at cmake/OpenCVGenPkgconfig.cmake:71 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:496 (include)


CMake Error at cmake/OpenCVGenConfig.cmake:122 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:502 (include)


CMake Error at cmake/OpenCVGenConfig.cmake:124 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:502 (include)


CMake Error at cmake/OpenCVGenConfig.cmake:145 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:502 (include)


CMake Error at cmake/OpenCVGenConfig.cmake:146 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:502 (include)


CMake Error at cmake/OpenCVGenConfig.cmake:178 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:502 (include)


CMake Error at cmake/OpenCVGenConfig.cmake:179 (configure_file):
configure_file Problem configuring file
Call Stack (most recent call first):
CMakeLists.txt:502 (include)



General configuration for OpenCV 2.4.6.1 =====================================
Version control:               unknown

Platform:
Host:                        Linux 3.8.7-1-ARCH x86_64
Target:                      Windows
CMake:                       2.8.10.2
CMake generator:             Unix Makefiles
CMake build tool:            /usr/bin/make
Configuration:               Release

C/C++:
Built as dynamic libs?:      YES
C++ Compiler:                /usr/bin/x86_64-w64-mingw32-g++  (ver 4.8.0)
C++ flags (Release):         -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
C++ flags (Debug):           -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
C Compiler:                  /usr/bin/x86_64-w64-mingw32-gcc
C flags (Release):           -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
C flags (Debug):             -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
Linker flags (Release):      
Linker flags (Debug):        
Precompiled headers:         YES

OpenCV modules:
To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib photo legacy gpu nonfree stitching superres ts videostab
Disabled:                    world
Disabled by dependency:      -
Unavailable:                 androidcamera java ocl python

GUI: 
QT:                          NO
Win32 UI:                    NO
OpenGL support:              NO

Media I/O: 
ZLib:                        build (ver 1.2.7)
JPEG:                        build (ver 62)
PNG:                         build (ver 1.5.12)
TIFF:                        build (ver 42 - 4.0.2)
JPEG 2000:                   build (ver 1.900.1)
OpenEXR:                     build (ver 1.7.1)

Video I/O:
Video for Windows:           NO
DC1394 1.x:                  NO
DC1394 2.x:                  NO
FFMPEG:                      YES (prebuilt binaries)
codec:                     YES (ver 53.61.100)
format:                    YES (ver 53.32.100)
util:                      YES (ver 51.35.100)
swscale:                   YES (ver 2.1.100)
gentoo-style:              YES
OpenNI:                      NO
OpenNI PrimeSensor Modules:  NO
PvAPI:                       NO
GigEVisionSDK:               NO
DirectShow:                  YES
Media Foundation:            NO
XIMEA:                       NO

Other third-party libraries:
Use IPP:                     NO
Use Eigen:                   NO
Use TBB:                     NO
Use OpenMP:                  NO
Use GCD                      NO
Use Concurrency              NO
Use C=:                      NO
Use Cuda:                    NO
Use OpenCL:                  NO

Python:
Interpreter:                 /usr/bin/python2 (ver 2.7.4)

Java:
ant:                         NO
JNI:                         NO
Java tests:                  NO

Documentation:
Build Documentation:         NO
Sphinx:                      NO
PdfLaTeX compiler:           /usr/bin/pdflatex

Tests and samples:
Tests:                       YES
Performance tests:           YES
C/C++ Examples:              NO

Install path:                  /media/data/distr/opencv-2.4.6.1/release4/install

cvconfig.h is in:              /media/data/distr/opencv-2.4.6.1/release4
-----------------------------------------------------------------

Configuring incomplete, errors occurred!
</code></pre>
",,2017-07-07 07:03:34,Cross-compiling OpenCV with MinGW using CMake(in Linux for Windows),<opencv><cmake><mingw><cross-compiling>,,,CC BY-SA 3.0,True,False,False,False,True
11609,18583611,2013-09-03 03:24:51,,"<p>I am attempting to build OpenCV 2.3.1 on a 64 bit OSX Mountain Lion machine and can't get past a particular set of ""use of undeclared identifier"" make errors. I have attempted to build both the taz.gz file and source from Git with the same errors.</p>

<p>Has anyone successfully built 2.3.1 on a OSX Mountain Lion machine? If so, how did you get past the following errors:</p>

<blockquote>
  <p>opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:486:5: error: 
  use of undeclared identifier 'av_open_input_file' av_open_input_file(&amp;ic, filename, NULL, 0, NULL);</p>
  
  <p>opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:494:5: error: 
  use of undeclared identifier 'avcodec_thread_init'avcodec_thread_init(enc, get_number_of_cpus());</p>
  
  <p>opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:524:15: error: 
        use of undeclared identifier 'av_open_input_file'
      int err = av_open_input_file(&amp;ic, _filename, NULL, 0, NULL);</p>
  
  <p>opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:541:9: error: 
        use of undeclared identifier 'avcodec_thread_init'
          avcodec_thread_init(enc, get_number_of_cpus());</p>
</blockquote>

<p>As of now I see a couple of options. I could switch to Ubuntu which appears to have an easier build process or I could fix the highgui code.</p>

<p>If you have previous experience building this version I would appreciate the help.</p>
",,2013-09-03 03:24:51,OpenCV 2.3.1 make highgui errors,<c++><macos><opencv><makefile><highgui>,,,CC BY-SA 3.0,True,False,False,False,True
11711,18591289,2013-09-03 11:35:55,,"<p>I have avi file that contains uncompressed gray video data. I need to extract frames from it. The size of file is 22 Gb.</p>

<p>How do i do that?</p>

<p>I have already tried ffmpeg, but it gives me ""could not find codec parameters for video stream"" message  - because there is no codec at work, just frames.</p>

<p>Since Opencv just uses ffmpeg to read video, that rules out opencv as well.</p>

<p>The only path that seems to be left is to try and dig into the raw data, but i do not know how.</p>

<p>Edit: this is the code i use to read from the file with opencv. The failure occurs inside the second if. Running ffmpeg binary on the file also fails with the message above (could not find codec aprameters etc)</p>

<pre><code>/* register all formats and codecs */
av_register_all();

/* open input file, and allocate format context */
if (avformat_open_input(&amp;fmt_ctx, src_filename, NULL, NULL) &lt; 0) {
    fprintf(stderr, ""Could not open source file %s\n"", src_filename);
    ret = 1;
    goto end;
}
fmt_ctx-&gt;seek2any = true;
/* retrieve stream information */
int res = avformat_find_stream_info(fmt_ctx, NULL);
if (res &lt; 0) {
    fprintf(stderr, ""Could not find stream information\n"");
    ret = 1;
    goto end;
}
</code></pre>

<p>Edit:</p>

<p>Here is sample code i have tried to make the extraction: <a href=""http://pastebin.com/ZMRQHkY5"" rel=""nofollow"">pastebin</a>. The result i get is an unchanging buffer after every call to AVIStreamRead.</p>
",2013-09-03 13:58:37,2013-09-03 16:36:13,How to read YUV8 data from avi file?,<c++><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
11782,23225738,2014-04-22 16:54:57,,"<p>There are two sides to my app, on one side I'm using C++ in order to read the frames from a camera using Pleora's EBUS SDK. When this stream is first received, before I convert the buffer to an image, I am able to read the stream 16 bits at a time in order to perform some calculations for each pixel, i.e. there exists a 16 bit chunk of data for each pixel.</p>

<p>Now the second half is a Django web app where I am also presented this video output, this time via an ffmpeg, nginx, hls stream. When the user clicks on the video I want to be able to take the current frame and the coordinates of their click and perform the same calculation as I do above in the C++ portion.</p>

<p>Right now I use an html5 canvas to capture the frame and I use <code>canvas.toDataURL()</code> in order to convert the frame into a base64 encoded image, I then pass the base64 image, the coordinates, and the dimensions of the frame to python via AJAX.</p>

<p>In python I am trying to manipulate this base64 encoded image in such a way as to get 16 bits per pixel. At the moment I do the following:</p>

<pre><code>pos = json.loads(request.GET['pos'])
str_frame = json.loads(request.GET['frame'])
dimensions = json.loads(request.GET['dimensions'])

pixel_index = (dimensions['width'] * pos['y']) + pos['x'] + 1

b64decoded_frame = base64.b64decode(str_frame.encode('utf-8'))
</code></pre>

<p>However, there are far fewer indexes in the <code>b64decoded_frame</code> then there are pixels in the image and the integer values aren't nearly as high as expected. I have checked and the image is intact as I am able to save it as a png.</p>

<p>To summarize, how do I convert a base64 image into a serialized binary stream where each pixel is represented by 16 bits.</p>

<p><strong>UPDATE</strong></p>

<p>I forgot to mention that I'm using python3.2</p>

<p>And after some more research I <em>think</em> that what I'm trying to do it get the mono16 value of a given pixel. I don't know for sure if that is what I want to do but if anyone could explain how to either convert an image to mono16 or a pixel to mono16 I could explore that and see if it is in fact the solution.</p>
",2014-04-23 20:03:29,2014-12-23 13:32:03,Convert Image to binary stream,<python><django><image><image-processing><python-imaging-library>,,,CC BY-SA 3.0,False,False,False,False,True
11784,19770482,2013-11-04 14:58:36,,"<p>I am trying to compile opencv 2.4.6.1 on Centos 5.10. However, whenever I add WITH_OPENGL=ON, I am unable to compile it.</p>

<p>My cmake line:</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local/opencv-2.4.6.1-test -D CMAKE_CXX_COMPILER=/usr/local/gcc-4.8.1/bin/g++ -D CMAKE_C_COMPILER=/usr/local/gcc-4.8.1/bin/gcc -D BUILD_opencv_python=OFF -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-5.5/ -D WITH_FFMPEG=YES -D BUILD_EXAMPLES=ON -D WITH_TBB=ON -D TBB_INCLUDE_DIRS=/opt/intel.2013.0.028/tbb/include/ -D TBB_LIB_DIR=/opt/intel.2013.0.028/tbb/lib/intel64/ -D WITH_IPP=ON -D ENABLE_PROFILING=ON -D WITH_OPENGL=ON  ..
</code></pre>

<p>I also have the following environment variables set:</p>

<pre><code>export IPPROOT=/opt/intel.2013.0.028/ipp/
export PKG_CONFIG_PATH=/usr/local/ffmpeg-2.0.2/lib/pkgconfig
</code></pre>

<p>This results in:</p>

<pre><code>-- The CXX compiler identification is GNU
-- The C compiler identification is GNU
-- Check for working CXX compiler: /usr/local/gcc-4.8.1/bin/g++
-- Check for working CXX compiler: /usr/local/gcc-4.8.1/bin/g++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working C compiler: /usr/local/gcc-4.8.1/bin/gcc
-- Check for working C compiler: /usr/local/gcc-4.8.1/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detected version of GNU GCC: 48 (408)
-- Performing Test HAVE_CXX_FSIGNED_CHAR
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Success
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Success
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Success
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Success
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_CXX_WERROR_ADDRESS
-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success
-- Performing Test HAVE_C_WERROR_ADDRESS
-- Performing Test HAVE_C_WERROR_ADDRESS - Success
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_CXX_WFORMAT
-- Performing Test HAVE_CXX_WFORMAT - Success
-- Performing Test HAVE_C_WFORMAT
-- Performing Test HAVE_C_WFORMAT - Success
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WMISSING_DECLARATIONS
-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
-- Performing Test HAVE_C_WMISSING_PROTOTYPES
-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WUNDEF
-- Performing Test HAVE_CXX_WUNDEF - Success
-- Performing Test HAVE_C_WUNDEF
-- Performing Test HAVE_C_WUNDEF - Success
-- Performing Test HAVE_CXX_WINIT_SELF
-- Performing Test HAVE_CXX_WINIT_SELF - Success
-- Performing Test HAVE_C_WINIT_SELF
-- Performing Test HAVE_C_WINIT_SELF - Success
-- Performing Test HAVE_CXX_WPOINTER_ARITH
-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success
-- Performing Test HAVE_C_WPOINTER_ARITH
-- Performing Test HAVE_C_WPOINTER_ARITH - Success
-- Performing Test HAVE_CXX_WSHADOW
-- Performing Test HAVE_CXX_WSHADOW - Success
-- Performing Test HAVE_C_WSHADOW
-- Performing Test HAVE_C_WSHADOW - Success
-- Performing Test HAVE_CXX_WSIGN_PROMO
-- Performing Test HAVE_CXX_WSIGN_PROMO - Success
-- Performing Test HAVE_C_WSIGN_PROMO
-- Performing Test HAVE_C_WSIGN_PROMO - Failed
-- Performing Test HAVE_CXX_WNO_NARROWING
-- Performing Test HAVE_CXX_WNO_NARROWING - Success
-- Performing Test HAVE_C_WNO_NARROWING
-- Performing Test HAVE_C_WNO_NARROWING - Success
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_CXX_WNO_LONG_LONG
-- Performing Test HAVE_CXX_WNO_LONG_LONG - Success
-- Performing Test HAVE_C_WNO_LONG_LONG
-- Performing Test HAVE_C_WNO_LONG_LONG - Success
-- Performing Test HAVE_CXX_PTHREAD
-- Performing Test HAVE_CXX_PTHREAD - Success
-- Performing Test HAVE_C_PTHREAD
-- Performing Test HAVE_C_PTHREAD - Success
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_CXX_MSSE
-- Performing Test HAVE_CXX_MSSE - Success
-- Performing Test HAVE_C_MSSE
-- Performing Test HAVE_C_MSSE - Success
-- Performing Test HAVE_CXX_MSSE2
-- Performing Test HAVE_CXX_MSSE2 - Success
-- Performing Test HAVE_C_MSSE2
-- Performing Test HAVE_C_MSSE2 - Success
-- Performing Test HAVE_CXX_MSSE3
-- Performing Test HAVE_CXX_MSSE3 - Success
-- Performing Test HAVE_C_MSSE3
-- Performing Test HAVE_C_MSSE3 - Success
-- Performing Test HAVE_CXX_PG_G
-- Performing Test HAVE_CXX_PG_G - Failed
-- Performing Test HAVE_C_PG_G
-- Performing Test HAVE_C_PG_G - Failed
-- Looking for alloca.h
-- Looking for alloca.h - found
-- Looking for alloca
-- Looking for alloca - not found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Found ZLIB: /lib64/libz.so (found version ""1.2.3"")
-- Found TIFF: /usr/lib64/libtiff.so 
-- Found JPEG: /usr/lib64/libjpeg.so 
-- Could NOT find Jasper (missing:  JASPER_LIBRARY JASPER_INCLUDE_DIR) 
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION - Success
-- Performing Test HAVE_C_WNO_UNINITIALIZED
-- Performing Test HAVE_C_WNO_UNINITIALIZED - Success
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER - Success
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WNO_UNUSED
-- Performing Test HAVE_C_WNO_UNUSED - Success
-- Performing Test HAVE_C_WNO_SHADOW
-- Performing Test HAVE_C_WNO_SHADOW - Success
-- Performing Test HAVE_C_WNO_SIGN_COMPARE
-- Performing Test HAVE_C_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_C_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_C_WNO_UNUSED_PARAMETER - Success
-- Found PNG: /usr/lib64/libpng.so 
-- Looking for /usr/include/png.h
-- Looking for /usr/include/png.h - found
-- Looking for /usr/include/libpng/png.h
-- Looking for /usr/include/libpng/png.h - not found
-- Looking for semaphore.h
-- Looking for semaphore.h - found
-- Performing Test HAVE_CXX_WNO_SHADOW
-- Performing Test HAVE_CXX_WNO_SHADOW - Success
-- Performing Test HAVE_CXX_WNO_UNUSED
-- Performing Test HAVE_CXX_WNO_UNUSED - Success
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED - Success
-- Performing Test HAVE_CXX_WNO_SWITCH
-- Performing Test HAVE_CXX_WNO_SWITCH - Success
-- Performing Test HAVE_CXX_WNO_PARENTHESES
-- Performing Test HAVE_CXX_WNO_PARENTHESES - Success
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS - Success
-- Performing Test HAVE_CXX_WNO_EXTRA
-- Performing Test HAVE_CXX_WNO_EXTRA - Success
-- checking for module 'gtk+-2.0'
--   found gtk+-2.0, version 2.10.4
-- checking for module 'gthread-2.0'
--   found gthread-2.0, version 2.12.3
-- checking for module 'gtkglext-1.0'
--   found gtkglext-1.0, version 1.0.6
-- Looking for XOpenDisplay in /usr/lib64/libX11.so;/usr/lib64/libXext.so
-- Looking for XOpenDisplay in /usr/lib64/libX11.so;/usr/lib64/libXext.so - found
-- Looking for gethostbyname
-- Looking for gethostbyname - found
-- Looking for connect
-- Looking for connect - found
-- Looking for remove
-- Looking for remove - found
-- Looking for shmat
-- Looking for shmat - found
-- Looking for IceConnectionNumber in ICE
-- Looking for IceConnectionNumber in ICE - found
-- Found X11: /usr/lib64/libX11.so
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libv4l1'
--   package 'libv4l1' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - not found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   found libavcodec, version 55.18.102
-- checking for module 'libavformat'
--   found libavformat, version 55.12.100
-- checking for module 'libavutil'
--   found libavutil, version 52.38.100
-- checking for module 'libswscale'
--   found libswscale, version 2.3.100
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'tbb'
--   package 'tbb' not found
-- found IPP: 7.1.1 [7.1.1]
-- at: /opt/intel.2013.0.028/ipp
-- IPP libs: libippvm_l.a;libippcc_l.a;libippcv_l.a;libippi_l.a;libipps_l.a;libippcore_l.a
-- IPP libs: libippvm_l.a;libippcc_l.a;libippcv_l.a;libippi_l.a;libipps_l.a;libippcore_l.a
-- CUDA detected: 5.5
-- CUDA NVCC target flags: -gencode;arch=compute_11,code=sm_11;-gencode;arch=compute_12,code=sm_12;-gencode;arch=compute_13,code=sm_13;-gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=sm_21;-gencode;arch=compute_30,code=sm_30;-gencode;arch=compute_20,code=compute_20;-gencode;arch=compute_30,code=compute_30
-- Found PythonInterp: /usr/local/bin/python (found suitable version ""2.6.4"", required is ""2.0"")
-- Found PythonLibs: /usr/local/lib/python2.6/config/libpython2.6.a (Required is at least version ""2.6.4"")
-- Could NOT find JNI (missing:  JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) 
-- Could NOT find OPENCL (missing:  OPENCL_LIBRARY OPENCL_INCLUDE_DIR) 
-- Performing Test HAVE_CXX_WNO_UNUSED_BUT_SET_VARIABLE
-- Performing Test HAVE_CXX_WNO_UNUSED_BUT_SET_VARIABLE - Success
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
-- 
-- General configuration for OpenCV 2.4.6.1 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 2.6.18-308.11.1.el5 x86_64
--     CMake:                       2.8.6
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/gmake
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/local/gcc-4.8.1/bin/g++  (ver 4.8.1)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread  -msse -msse2 -msse3 -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread  -msse -msse2 -msse3 -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     C Compiler:                  /usr/local/gcc-4.8.1/bin/gcc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread  -msse -msse2 -msse3 -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread  -msse -msse2 -msse3 -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib photo legacy gpu nonfree stitching superres ts videostab
--     Disabled:                    python world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera java ocl
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.10.4)
--     GThread :                    YES (ver 2.12.3)
--     GtkGlExt:                    YES (ver 1.0.6)
--     OpenGL support:              YES (/usr/lib64/libGLU.so /usr/lib64/libGL.so /usr/lib64/libSM.so /usr/lib64/libICE.so /usr/lib64/libX11.so /usr/lib64/libXext.so)
-- 
--   Media I/O: 
--     ZLib:                        /lib64/libz.so (ver 1.2.3)
--     JPEG:                        /usr/lib64/libjpeg.so (ver 62)
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.10)
--     TIFF:                        /usr/lib64/libtiff.so (ver 42 - 3.8.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      YES
--       codec:                     YES (ver 55.18.102)
--       format:                    YES (ver 55.12.100)
--       util:                      YES (ver 52.38.100)
--       swscale:                   YES (ver 2.3.100)
--       gentoo-style:              YES
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/NO
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     7.1.1 [7.1.1]
--          at:                     /opt/intel.2013.0.028/ipp
--     Use Eigen:                   NO
--     Use TBB:                     YES (ver 4.1 interface 6101)
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    YES (ver 5.5)
--     Use OpenCL:                  NO
-- 
--   NVIDIA CUDA
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     USE NVCUVID:                 NO
--     NVIDIA GPU arch:             11 12 13 20 21 30
--     NVIDIA PTX archs:            20 30
--     Use fast math:               NO
-- 
--   Python:
--     Interpreter:                 /usr/local/bin/python (ver 2.6.4)
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java tests:                  NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/bin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
-- 
--   Install path:                  /usr/local/opencv-2.4.6.1-test
-- 
--   cvconfig.h is in:              /usr/local/src/opencv-2.4.6.1/release
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /usr/local/src/opencv-2.4.6.1/release
</code></pre>

<p>This is the error I get when I try to build it:</p>

<pre><code>Building CXX object modules/core/CMakeFiles/opencv_core.dir/src/copy.cpp.o
/usr/local/src/opencv-2.4.6.1/modules/core/src/gl_core_3_1.cpp: In function ‘void* IntGetProcAddress(const char*)’:
/usr/local/src/opencv-2.4.6.1/modules/core/src/gl_core_3_1.cpp:131:88: error: ‘glXGetProcAddressARB’ was not declared in this scope
         #define CV_GL_GET_PROC_ADDRESS(name) glXGetProcAddressARB((const GLubyte*) name)
                                                                                        ^
/usr/local/src/opencv-2.4.6.1/modules/core/src/gl_core_3_1.cpp:136:31: note: in expansion of macro ‘CV_GL_GET_PROC_ADDRESS’
         void* func =  (void*) CV_GL_GET_PROC_ADDRESS(name);
                               ^
make[2]: *** [modules/core/CMakeFiles/opencv_core.dir/src/gl_core_3_1.cpp.o] Error 1
</code></pre>

<p>Here is the results of rpm -qa | grep gl</p>

<pre><code>libglade2-2.6.0-2
glade2-2.12.1-6.el5
freeglut-devel-2.4.0-7.1.el5
dbus-glib-0.73-11.el5_9
glx-utils-6.5.1-7.11.el5_9
glib-1.2.10-20.el5
dbus-glib-0.73-11.el5_9
glibc-devel-2.5-118.el5_10.2
gtkglext-devel-1.0.6-1.el5.rf
glibc-common-2.5-118.el5_10.2
glib-devel-1.2.10-20.el5
NetworkManager-glib-0.7.0-13.el5
xscreensaver-gl-extras-5.04-1.el5.centos
libglade2-devel-2.6.0-2
glibc-devel-2.5-118.el5_10.2
gtkglext-1.0.6-1.el5.rf
compat-glibc-headers-2.3.4-2.26
compat-glibc-2.3.4-2.26
freeglut-2.4.0-7.1.el5
glib-devel-1.2.10-20.el5
NetworkManager-glib-0.7.0-13.el5
glib2-devel-2.12.3-4.el5_3.1
glibc-2.5-118.el5_10.2
xscreensaver-gl-base-5.04-1.el5.centos
gtkglext-devel-1.0.6-1.el5.rf
avahi-glib-0.6.16-10.el5_6
glib2-2.12.3-4.el5_3.1
glib2-devel-2.12.3-4.el5_3.1
libglade2-devel-2.6.0-2
freeglut-devel-2.4.0-7.1.el5
glibc-2.5-118.el5_10.2
glib-1.2.10-20.el5
gtkglext-1.0.6-1.el5.rf
avahi-glib-0.6.16-10.el5_6
glib2-2.12.3-4.el5_3.1
compat-glibc-2.3.4-2.26
dbus-glib-devel-0.73-11.el5_9
xscreensaver-gl-extras-gss-5.04-1.el5.centos
glibc-headers-2.5-118.el5_10.2
glibc-utils-2.5-118.el5_10.2
libglade2-2.6.0-2
pygtk2-libglade-2.10.1-12.el5
freeglut-2.4.0-7.1.el5
dbus-glib-devel-0.73-11.el5_9
</code></pre>

<p>I believe I must be missing a library or something. Any ideas?</p>
",2013-11-04 14:59:50,2013-11-12 20:02:09,Compiling OpenCV with OpenGL,<opengl><opencv><centos5>,,,CC BY-SA 3.0,True,False,False,False,True
11798,17669327,2013-07-16 06:16:49,,"<p>I have the following piece of code in opencv to read an mp4 file:</p>

<pre><code>    CvCapture *capture =cvCreateFileCapture(""DemoRecording.mp4"");
    if(!capture){
        cout&lt;&lt;endl&lt;&lt;""Capture from file error""&lt;&lt;endl;
        return;
    }
    CvSize sz =cvSize((int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH), (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT));
    CvVideoWriter *writer =cvCreateVideoWriter(""DemoRecording.avi"", CV_FOURCC('L','A','G','S'), (int) cvGetCaptureProperty(capture, CV_CAP_PROP_FPS), sz);
    IplImage *frame =cvCreateImage(sz, 8, 3);
    while(1){
        // Read Frames  
    }
    cvReleaseVideoWriter(&amp;writer);
    cvReleaseCapture(&amp;capture);
</code></pre>

<p>However, I am unable to read the mp4 file. This file is encoded using H. 264. I have the following details of the file displayed by ffmpeg:</p>

<pre><code>fplay version N-42347-g299387e Copyright (c) 2003-2012 the FFmpeg developers
  built on Jul  8 2012 15:44:54 with gcc 4.7.1
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-runtime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libass --enable-libcelt --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-libnut --enable-libopenjpeg --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libutvideo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --enable-zlib
  libavutil      51. 64.100 / 51. 64.100
  libavcodec     54. 33.100 / 54. 33.100
  libavformat    54. 15.102 / 54. 15.102
  libavdevice    54.  1.100 / 54.  1.100
  libavfilter     3.  1.100 /  3.  1.100
  libswscale      2.  1.100 /  2.  1.100
  libswresample   0. 15.100 /  0. 15.100
  libpostproc    52.  0.100 / 52.  0.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'DemoRecording.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2avc1mp41
    encoder         : Lavf53.31.100
  Duration: 00:00:16.23, start: 0.000000, bitrate: 819 kb/s
    Stream #0:0(und): Video: h264 (Main) (avc1 / 0x31637661), yuv420p, 540x720, 816 kb/s, 21.19 fps, 30 tbr, 600 tbn, 1200 tbc
    Metadata:
      handler_name    : VideoHandler
Frame changed from size:0x0 to size:540x720
[ffplay_buffer @ 04149040] w:540 h:720 pixfmt:yuv420p tb:1/600 fr:0/1 sar:0/1 sws_param:
[ffplay_buffersink @ 04ca69c0] No opaque field provided
</code></pre>

<p>I have the updated k-lite codec pack installed on my machine. I have ffmpeg as well. Softwares like premiere pro which use libavcodec vfw for decoding mp4 files are able to playback the file.</p>

<p>However, openCV isn't able to read the file. Any help on this issue is highly appreciated.</p>
",,2014-05-11 03:34:23,cvCreateFileCapture() unable to read h 264 encoded mp4 file,<opencv><video><h.264><decoder>,,,CC BY-SA 3.0,True,False,False,False,True
11959,16728711,2013-05-24 06:15:18,,"<p>I could get YUV images from Camera for 20 frames per second, i want to play it as live streaming on JSP page.</p>

<p>I have done some research about JMF/FFMpeg, maybe they could work with J2SE(Swing),but seems hard to work on web application(Tomcat+JSP pages).</p>

<p>Any suggestion will be appreciated!</p>
",2013-05-24 09:50:14,2013-05-30 05:23:03,How to Play YUV sequence of images with JSP,<java><ffmpeg><video-streaming><javacv><yuv>,,,CC BY-SA 3.0,False,False,False,False,True
12012,20963057,2014-01-07 02:45:23,,"<p>I am trying to open an AVI file using OpenCV, Here is the code line which i used to read the video file.</p>

<pre><code>CvCapture* capture = cvCaptureFromAVI(video_file_name);
</code></pre>

<p>But it returns a cvCapture ponter which points to an address of 0x00000000 (hence an invalid pointer)</p>

<p>Can this be a codec related issue? missing ffmpeg?</p>
",,2014-01-07 06:17:37,unable to read an AVI file in OpenCV,<opencv><computer-vision><video-capture><video-processing><avi>,,,CC BY-SA 3.0,True,False,False,False,True
12071,23250518,2014-04-23 16:44:08,,"<p>I have a video dataset of people speaking out digit numbers from 0-9 randomly. My goal is train a neural network on audio/visual patterns of speech. </p>

<p>To achieve my goal I first had to dissect this video into small little videos where each video contains a person speaking exactly one digit at a time.</p>

<p>Once I had my individual videos, I extracted exactly 10 fps for each second in the video and ended up with sequential images of the video. I did this using the famous command line tool ffmpeg.</p>

<p>I then used opencv to extract the region of interest (ROI), in this case the mouth. I later did some research and found out that for me to model the dynamic speech information I had to apply what is called a ""Temporal Derivative"" on these images.</p>

<p>Moreover, during my extraction of images from the video I have also extracted audio information in the form of raw spectrograms. I also intend to do Temporal Derivation on the spectrogram as well to preserve the dynamic change of frequency as time progresses.</p>

<p>I have read about Temporal/Time Derivatives and found that simply it is the derivative of a function as time changes.</p>

<p>I wonder how would I apply this on my images and spectrograms using Python, and if there are any available Python libraries out there that could manipulate image matrices to do derivation over time. </p>
",2014-04-24 07:00:17,2014-04-24 07:00:17,Applying Temporal Derivatives on Audio and Video,<python-2.7><opencv><audio><video><neural-network>,,,CC BY-SA 3.0,True,False,False,False,True
12273,20984403,2014-01-07 23:52:07,,"<p>My application generates a set images named sequentially. Eg. img1, img2, img3, ...</p>

<p>I am looking for ways to convert these images into a movie. So far, I found these options, each with a major disadvantage :</p>

<ul>
<li>ffmpeg - can do the job over command line interface. But I need the utility to be an application, not a command line interface. (Can it be made into an exe?)</li>
<li>matlab - don't have matlab installed, cost is a concern</li>
<li>Flash - don't know how it's done</li>
<li>C++ - No standard library approach, looks complicated through Windows API</li>
</ul>

<p>Ideally, the utility will be an executable when launched will read all the sequentially named images in its root and generate a video (any format - .avi, .wmv, etc)</p>
",,2014-01-10 10:04:41,Simple videomaker from images,<c++><visual-c++><video><image-processing>,,,CC BY-SA 3.0,False,True,False,False,True
12475,19834202,2013-11-07 11:00:05,,"<p>Here is my link format to HTTP stream(user, password and address was changed to dummy):</p>

<pre><code>http://username:password@192.168.0.104:8093/axis-cgi/mjpg/video.cgi
</code></pre>

<p>This stream works perfectly in <strong>VLC</strong>. However, I <strong>can't</strong> open it using OpenCV library.</p>

<p>Here is my code:</p>

<pre><code>#include &lt;iostream&gt;
#include ""opencv2/opencv.hpp""

using namespace std;
using namespace cv;

int main()
{
    VideoCapture cap;
    const string videoStreamAddress = ""http://username:password@192.168.0.104:8093/axis-cgi/mjpg/video.cgi"";
    cap.open(videoStreamAddress);
    if (!cap.isOpened())
    {
        cout &lt;&lt; endl &lt;&lt; ""Videostream not found !"" &lt;&lt; endl;
        system(""pause"");
        return 0;
    }

    Mat frame;

    while(1)
    {
        cap &gt;&gt; frame;
        if (frame.empty())
            break;

        imshow(""IPcamera"", frame);

        int c = waitKey(1);
        if (c == 27)
        {
            break;
        }
    }

    waitKey(0);
    return 0;
}
</code></pre>

<p>This gives me an error:</p>

<pre><code>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:529)
</code></pre>

<p>which points to:</p>

<pre><code>bool CvCapture_FFMPEG::open( const char* _filename )
{
    unsigned i;
    bool valid = false;

    close();

#if LIBAVFORMAT_BUILD &gt;= CALC_FFMPEG_VERSION(52, 111, 0)
    int err = avformat_open_input(&amp;ic, _filename, NULL, NULL);
#else
    int err = av_open_input_file(&amp;ic, _filename, NULL, 0, NULL);
#endif

    if (err &lt; 0)
    {
        CV_WARN(""Error opening file"");
        goto exit_func;
    }
...
</code></pre>

<p>What could be a problem?</p>
",,2013-11-14 11:39:43,Can't open HTTP stream: Error opening file (../cap_ffmpeg_impl.hpp:529),<c++><opencv><video-streaming>,,,CC BY-SA 3.0,True,True,False,False,True
12511,23283189,2014-04-25 02:31:36,,"<p>I am new to OpenCV, and I want write Mat images into video using VideoWriter on Ubuntu 12.04. But when constructing VideoWriter, errors came out. </p>

<p>It seems that OpenCV invoke ffmpeg API using default parameters and ffmpeg invoke x264 using its default parameters. Then these setting is broken for libx264. Thus the ""Could not open codec 'libx264'"" error. </p>

<p>Anyone has ideas to solve this problem?</p>

<p>More specifically:</p>

<ol>
<li>anyone knows where and how OpenCV invoke ffmpeg API?</li>
<li>how to change ffmpeg default settings using code, hopefull, can be easily embeded into OpenCV?</li>
<li>will changes of default in ffmpeg be carried to libx264?</li>
</ol>

<p><strong>Errors:</strong></p>

<pre><code>1. Uising CV_FOURCC('H', '2', '6', '4')
[libx264 @ 0x255de40] broken ffmpeg default settings detected
[libx264 @ 0x255de40] use an encoding preset (e.g. -vpre medium)
[libx264 @ 0x255de40] preset usage: -vpre &lt;speed&gt; -vpre &lt;profile&gt;
[libx264 @ 0x255de40] speed presets are listed in x264 --help
[libx264 @ 0x255de40] profile is optional; x264 defaults to high
Could not open codec 'libx264': Unspecified error

2. Using FOURCC = -1 to invoke user customized codec
OpenCV Error: Unsupported format or combination of formats (Gstreamer Opencv 
backend doesn't support this codec acutally.) in CvVideoWriter_GStreamer::open, 
file /home/XXX/Downloads/opencv-2.4.8/modules/highgui/src/cap_gstreamer.cpp, 
line 505 terminate called after throwing an instance of 'cv::Exception'
what():  /home/XXX/Downloads/opencv-2.4.8/modules/highgui/src/cap_gstreamer.cpp:
505: error: (-210) Gstreamer Opencv backend doesn't support this codec acutally.
in function CvVideoWriter_GStreamer::open
</code></pre>

<p><strong>Codes:</strong> </p>

<pre><code>int main(int argc, char *argv[])
{
    VideoWriter outputVideo;
    bool fourcc_on = true; //switch on / off different error
    if (fourcc_on)
        outputVideo.open(""outVideo.avi"", CV_FOURCC('H', '2', '6', '4'), 25, Size(100, 100), true);
    else
        outputVideo.open(""outVideo.avi"", -1, 25, Size(100, 100), true);

    if (!outputVideo.isOpened())
    {
        cout  &lt;&lt; ""Could not open the output video for write"" &lt;&lt; endl;
        return -1;
    }
    return 0;
}
</code></pre>

<p><strong>OpenCV Configuration:</strong></p>

<pre><code>-- Detected version of GNU GCC: 46 (406)
-- Found OpenEXR: /usr/lib/libIlmImf.so
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Could NOT find JNI (missing:  JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) 
-- 
-- General configuration for OpenCV 2.4.8 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.8.0-38-generic x86_64
--     CMake:                       2.8.7
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.6)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/gcc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib python stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda java
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.24.10)
--     GThread :                    YES (ver 2.32.4)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/x86_64-linux-gnu/libz.so (ver 1.2.3.4)
--     JPEG:                        /usr/lib/x86_64-linux-gnu/libjpeg.so (ver )
--     PNG:                         /usr/lib/x86_64-linux-gnu/libpng.so (ver 1.2.46)
--     TIFF:                        /usr/lib/x86_64-linux-gnu/libtiff.so (ver 42 - 3.9.5)
--     JPEG 2000:                   /usr/lib/x86_64-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/libImath.so /usr/lib/libIlmImf.so /usr/lib/libIex.so /usr/lib/libHalf.so /usr/lib/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.0)
--     FFMPEG:                      YES
--       codec:                     YES (ver 55.58.105)
--       format:                    YES (ver 55.37.101)
--       util:                      YES (ver 52.78.100)
--       swscale:                   YES (ver 2.6.100)
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)
--       app:                       YES (ver 0.10.36)
--       video:                     YES (ver 0.10.36)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l (ver 1.0.1)
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/shixudongleo/Downloads/opencv-2.4.8/3rdparty/include/opencl/1.2
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python (ver 2.7.3)
--     Libraries:                   /usr/lib/libpython2.7.so
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.6.1)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java tests:                  NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/bin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/shixudongleo/Downloads/opencv-2.4.8/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/XXX/Downloads/opencv-2.4.8/build
</code></pre>

<p><strong>FFMPEG</strong></p>

<p>ffmpeg is enable to support OpenCV and libx264 is enabled when compiling ffmpeg.
By using ffmpeg command line, libx264 is running normally. </p>

<pre><code>$ ffmpeg -i test.avi -vcodec libx264 test.mp4
ffmpeg -i test.avi -vcodec libx264 test.mp4 &gt; ~/Downloads/ffmpeg_log.txt
ffmpeg version 2.2.git Copyright (c) 2000-2014 the FFmpeg developers
  built on Apr 24 2014 16:39:51 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
  configuration: --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab --enable-shared --enable-pic
  libavutil      52. 78.100 / 52. 78.100
  libavcodec     55. 58.105 / 55. 58.105
  libavformat    55. 37.101 / 55. 37.101
  libavdevice    55. 13.100 / 55. 13.100
  libavfilter     4.  4.100 /  4.  4.100
  libswscale      2.  6.100 /  2.  6.100
  libswresample   0. 18.100 /  0. 18.100
  libpostproc    52.  3.100 / 52.  3.100
Input #0, avi, from 'test.avi':
  Duration: 00:00:03.73, start: 0.000000, bitrate: 1757 kb/s
    Stream #0:0: Video: msvideo1 (CRAM / 0x4D415243), rgb555le, 320x240, 1781 kb/s, 15 tbr, 15 tbn, 15 tbc
    Metadata:
      title           : julius.avi Video #1
File 'test.mp4' already exists. Overwrite ? [y/N] y
No pixel format specified, yuv444p for H.264 encoding chosen.
Use -pix_fmt yuv420p for compatibility with outdated media players.
[libx264 @ 0x25d08e0] using cpu capabilities: none!
[libx264 @ 0x25d08e0] profile High 4:4:4 Predictive, level 1.2, 4:4:4 8-bit
[libx264 @ 0x25d08e0] 264 - core 142 - H.264/MPEG-4 AVC codec - Copyleft 2003-2014 - http://www.videolan.org/x264.html - options: cabac=1 ref=3 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=7 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=4 threads=12 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=2 keyint=250 keyint_min=15 scenecut=40 intra_refresh=0 rc_lookahead=40 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00
Output #0, mp4, to 'test.mp4':
  Metadata:
    encoder         : Lavf55.37.101
    Stream #0:0: Video: h264 (libx264) ([33][0][0][0] / 0x0021), yuv444p, 320x240, q=-1--1, 15360 tbn, 15 tbc
    Metadata:
      title           : julius.avi Video #1
Stream mapping:
  Stream #0:0 -&gt; #0:0 (msvideo1 -&gt; libx264)
Press [q] to stop, [?] for help
frame=   56 fps=0.0 q=-1.0 Lsize=     321kB time=00:00:03.60 bitrate= 731.0kbits/s    
video:320kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.409949%
[libx264 @ 0x25d08e0] frame I:3     Avg QP:15.36  size:  7975
[libx264 @ 0x25d08e0] frame P:38    Avg QP:26.05  size:  6230
[libx264 @ 0x25d08e0] frame B:15    Avg QP:28.25  size:  4418
[libx264 @ 0x25d08e0] consecutive B-frames: 46.4% 53.6%  0.0%  0.0%
[libx264 @ 0x25d08e0] mb I  I16..4:  1.4% 72.8% 25.8%
[libx264 @ 0x25d08e0] mb P  I16..4:  1.6%  5.7% 15.1%  P16..4:  7.6%  6.3%  7.4%  0.0%  0.0%    skip:56.3%
[libx264 @ 0x25d08e0] mb B  I16..4:  0.2%  1.0%  2.0%  B16..8: 13.3%  7.8%  8.7%  direct: 8.3%  skip:58.8%  L0:34.9% L1:36.6% BI:28.5%
[libx264 @ 0x25d08e0] 8x8 transform intra:37.7% inter:2.3%
[libx264 @ 0x25d08e0] coded y,u,v intra: 52.1% 42.1% 30.1% inter: 19.6% 9.2% 5.2%
[libx264 @ 0x25d08e0] i16 v,h,dc,p: 56% 17% 24%  2%
[libx264 @ 0x25d08e0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 10% 16% 68%  1%  1%  1%  1%  1%  1%
[libx264 @ 0x25d08e0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 19% 18% 28%  5%  6%  5%  7%  5%  6%
[libx264 @ 0x25d08e0] Weighted P-Frames: Y:31.6% UV:21.1%
[libx264 @ 0x25d08e0] ref P L0: 70.5%  9.0% 12.1%  6.5%  2.0%
[libx264 @ 0x25d08e0] ref B L0: 91.3%  8.7%
[libx264 @ 0x25d08e0] kb/s:700.56
</code></pre>
",2014-04-25 04:13:57,2020-08-19 00:06:30,"OpenCV VideoWriter using ffmpeg with ""Could not open codec 'libx264'"" Error",<opencv><ffmpeg><ubuntu-12.04><h.264><libx264>,,,CC BY-SA 3.0,True,True,False,False,True
12551,22143802,2014-03-03 10:09:32,,"<pre><code>import cv2
capture = cv2.VideoCapture(""slow.avi"")
while not capture.isOpened():
  capture = cv2.VideoCapture(""slow.avi"")
  cv2.waitKey(1000)
  print ""Wait for the header""
</code></pre>

<p>I tried a lot of different video files(flv,wmv) but I couldn't open any video file.I followed <a href=""https://stackoverflow.com/a/11703998"">https://stackoverflow.com/a/11703998</a>  directions and copied files in OpenCV\sources\3rdparty\ffmpeg  directory to C:\Python27\ directory but not working </p>
",2017-05-23 11:57:48,2014-03-03 10:09:32,VideoCapture not working in Python (Win 8.1 64 bit),<python><opencv><ffmpeg><windows-8.1>,,,CC BY-SA 3.0,True,False,False,False,True
12555,23287813,2014-04-25 08:19:31,,"<p>Now I use sws_scale to convert an avframe to iplimage, then use opencv to do some operations to the image, then convert the iplimage to avframe, but the image seems becoming more purple than the origin image. This is my code </p>

<pre><code>int av2ipl(AVFrame *src, IplImage *dst, int height, int width)
{ 
    struct SwsContext *swscontext = sws_getContext(width, height, PIX_FMT_YUV420P, dst-&gt;width, dst-&gt;height, PIX_FMT_BGR24, SWS_BILINEAR, 0, 0, 0); 
    if (swscontext == 0) 
        return 0; 
    int linesize[4] = {dst-&gt;widthStep, 0, 0, 0 }; 
    sws_scale(swscontext, src-&gt;data, src-&gt;linesize, 0, height, (uint8_t **) &amp; (dst-&gt;imageData), linesize); 
    return 1; 
}

int ipl2av(IplImage* src, AVFrame* dst, int height, int width)
{
    struct SwsContext *swscontext = sws_getContext(width, height, PIX_FMT_BGR24,     width, height, PIX_FMT_YUV420P, SWS_BILINEAR, 0, 0, 0); 
    if(swscontext == 0)
        return 0;
    int linesize[4] = {src-&gt;widthStep, 0, 0, 0};
    sws_scale(swscontext, (uint8_t **) &amp; (src-&gt;imageData), linesize, 0, height, dst-       &gt;data, dst-&gt;linesize);
    return 1;
}
</code></pre>

<p>Is there any wrong in the code?</p>
",,2014-08-07 03:12:28,The convertion between iplimage and avframe,<opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
12608,19845208,2013-11-07 19:46:14,,"<p>I'm trying to use the openCV library with anaconda (Python) , i am able to import the cv2 package but nothing has been able to access a .mp4 file so far. It's an issue with the ffmpeg thing which i have no idea about. I cannot post code right now since I'm using my phone. But if anyone can give me a Linux script or a tutorial that can help me work with openCV on python to be able to analyze mp4 videos with h264 encoding , that would be great </p>
",,2017-12-06 02:44:04,Installing openCV with anaconda on ubuntu,<python><opencv><ffmpeg><anaconda>,,,CC BY-SA 3.0,True,False,False,False,True
12828,18689534,2013-09-08 23:08:03,,"<p>I'm creating mjpeg stream from image files using ffmpeg and write it to ffserver's feed:</p>

<pre><code>sudo ffmpeg -loop 1 -i fon.jpeg -vcodec mjpeg -f mjpeg http://localhost:8090/feed1.ffm

ffmpeg version 2.0 Copyright (c) 2000-2013 the FFmpeg developers
built on Aug 19 2013 23:10:58 with gcc 4.7 (Debian 4.7.2-5)
configuration: 
libavutil      52. 38.100 / 52. 38.100
libavcodec     55. 18.102 / 55. 18.102
libavformat    55. 12.100 / 55. 12.100
libavdevice    55.  3.100 / 55.  3.100
libavfilter     3. 79.101 /  3. 79.101
libswscale      2.  3.100 /  2.  3.100
libswresample   0. 17.102 /  0. 17.102
Input #0, image2, from 'fon.jpeg':
Duration: 00:00:00.04, start: 0.000000, bitrate: N/A
Stream #0:0: Video: mjpeg, yuvj420p, 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 25 tbn, 25 tbc
Output #0, mjpeg, to 'http://localhost:8090/feed1.ffm':
Metadata:
encoder         : Lavf55.12.100
Stream #0:0: Video: mjpeg, yuvj420p, 1280x720 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 90k tbn, 25 tbc
Stream mapping:
Stream #0:0 -&gt; #0:0 (mjpeg -&gt; mjpeg)
Press [q] to stop, [?] for help
</code></pre>

<p>ffserver is configured as</p>

<pre><code>Port 8090
RTSPPort 8594
BindAddress 0.0.0.0
MaxClients 100
MaxBandwidth 20000
NoDaemon
&lt;Feed feed.ffm&gt;
File /tmp/feed.ffm
FileMaxSize 3M
&lt;/Feed&gt;
&lt;Stream test.rtsp&gt;
Feed feed.ffm
Format rtsp
VideoCodec mjpeg
VideoFrameRate 30
VideoBufferSize 80000
VideoBitRate 200
VideoQMin 1
VideoQMax 5
VideoSize 1280x720
PreRoll 1
Noaudio
&lt;/Stream&gt;
&lt;Stream test.swf&gt;
Feed feed.ffm
Format swf
VideoCodec flv
VideoFrameRate 30
VideoBufferSize 50000
VideoBitRate 100
VideoQMin 1
VideoQMax 5
VideoSize 1280x720
PreRoll 0
Noaudio
&lt;/Stream&gt;
</code></pre>

<p>Then I'm trying to retrieve the rtsp stream from the ffserver:</p>

<pre><code>ffplay http://localhost:8090/test.rtsp -loglevel debug
avplay version 0.8.5-6:0.8.5-1, Copyright (c) 2003-2012 the Libav developers
built on Jan 13 2013 12:05:48 with gcc 4.7.2
configuration: --arch=amd64 --enable-pthreads --enable-runtime-cpudetect --extra-         version='6:0.8.5-1' --libdir=/usr/lib/x86_64-linux-gnu --prefix=/usr --enable-bzlib --enable-libdc1394 --enable-libdirac --enable-libfreetype --enable-frei0r --enable-gnutls --enable-libgsm --enable-libmp3lame --enable-librtmp --enable-libopencv --enable-libopenjpeg --enable-libpulse --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-vaapi --enable-vdpau --enable-libvorbis --enable-libvpx --enable-zlib --enable-gpl --enable-postproc --enable-swscale --enable-libcdio --enable-x11grab --enable-libx264 --enable-libxvid --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
</code></pre>

<p>avutil      configuration: --arch=amd64 --enable-pthreads --enable-runtime-cpudetect --extra-version='6:0.8.4-1' --libdir=/usr/lib/x86_64-linux-gnu --prefix=/usr --enable-bzlib --enable-libdc1394 --enable-libdirac --enable-libfreetype --enable-frei0r --enable-gnutls --enable-libgsm --enable-libmp3lame --enable-librtmp --enable-libopencv --enable-libopenjpeg --enable-libpulse --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-vaapi --enable-vdpau --enable-libvorbis --enable-libvpx --enable-zlib --enable-gpl --enable-postproc --enable-swscale --enable-libcdio --enable-x11grab --enable-libx264 --enable-libxvid --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
  avcodec     configuration: --arch=amd64 --enable-pthreads --enable-runtime-cpudetect --extra-version='6:0.8.4-1' --libdir=/usr/lib/x86_64-linux-gnu --prefix=/usr --enable-bzlib --enable-libdc1394 --enable-libdirac --enable-libfreetype --enable-frei0r --enable-gnutls --enable-libgsm --enable-libmp3lame --enable-librtmp --enable-libopencv --enable-libopenjpeg --enable-libpulse --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-vaapi --enable-vdpau --enable-libvorbis --enable-libvpx --enable-zlib --enable-gpl --enable-postproc --enable-swscale --enable-libcdio --enable-x11grab --enable-libx264 --enable-libxvid --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
  avformat    configuration: --arch=amd64 --enable-pthreads --enable-runtime-cpudetect --extra-version='6:0.8.4-1' --libdir=/usr/lib/x86_64-linux-gnu --prefix=/usr --enable-bzlib --enable-libdc1394 --enable-libdirac --enable-libfreetype --enable-frei0r --enable-gnutls --enable-libgsm --enable-libmp3lame --enable-librtmp --enable-libopencv --enable-libopenjpeg --enable-libpulse --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-vaapi --enable-vdpau --enable-libvorbis --enable-libvpx --enable-zlib --enable-gpl --enable-postproc --enable-swscale --enable-libcdio --enable-x11grab --enable-libx264 --enable-libxvid --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
  swscale     configuration: --arch=amd64 --enable-pthreads --enable-runtime-cpudetect --extra-version='6:0.8.4-1' --libdir=/usr/lib/x86_64-linux-gnu --prefix=/usr --enable-bzlib --enable-libdc1394 --enable-libdirac --enable-libfreetype --enable-frei0r --enable-gnutls --enable-libgsm --enable-libmp3lame --enable-librtmp --enable-libopencv --enable-libopenjpeg --enable-libpulse --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-vaapi --enable-vdpau --enable-libvorbis --enable-libvpx --enable-zlib --enable-gpl --enable-postproc --enable-swscale --enable-libcdio --enable-x11grab --enable-libx264 --enable-libxvid --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static
  postproc    configuration: --arch=amd64 --enable-pthreads --enable-runtime-cpudetect --extra-version='6:0.8.4-1' --libdir=/usr/lib/x86_64-linux-gnu --prefix=/usr --enable-bzlib --enable-libdc1394 --enable-libdirac --enable-libfreetype --enable-frei0r --enable-gnutls --enable-libgsm --enable-libmp3lame --enable-librtmp --enable-libopencv --enable-libopenjpeg --enable-libpulse --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-vaapi --enable-vdpau --enable-libvorbis --enable-libvpx --enable-zlib --enable-gpl --enable-postproc --enable-swscale --enable-libcdio --enable-x11grab --enable-libx264 --enable-libxvid --shlibdir=/usr/lib/x86_64-linux-gnu --enable-shared --disable-static</p>

<pre><code> libavutil    51. 22. 1 / 51. 22. 1
 libavcodec   53. 35. 0 / 53. 35. 0
 libavformat  53. 21. 1 / 53. 21. 0
 libavdevice  53.  2. 0 / 53.  2. 0
 libavfilter   2. 15. 0 /  2. 15. 0
 libswscale    2.  1. 0 /  2.  1. 0
 libpostproc  52.  0. 0 / 52.  0. 0
 http://localhost:8090/test.rtsp: Invalid data found when processing input
</code></pre>

<p>So, what is wrong in this streaming example, if I have no problem when I substitute streams to the files?</p>

<p>I create a mjpeg file using the same parameters 9i.e. file is an output insteadof stream)</p>

<pre><code>sudo ffmpeg -loop 1 -i fon.jpeg -vcodec mjpeg -f mjpeg test.mjpg
ffmpeg version 2.0 Copyright (c) 2000-2013 the FFmpeg developers
built on Aug 19 2013 23:10:58 with gcc 4.7 (Debian 4.7.2-5)
configuration: 
libavutil      52. 38.100 / 52. 38.100
libavcodec     55. 18.102 / 55. 18.102
libavformat    55. 12.100 / 55. 12.100
libavdevice    55.  3.100 / 55.  3.100
libavfilter     3. 79.101 /  3. 79.101
libswscale      2.  3.100 /  2.  3.100
libswresample   0. 17.102 /  0. 17.102
Input #0, image2, from 'fon.jpeg':
Duration: 00:00:00.04, start: 0.000000, bitrate: N/A
Stream #0:0: Video: mjpeg, yuvj420p, 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 25 tbn, 25 tbc
Output #0, mjpeg, to 'test.mjpg':
Metadata:
encoder         : Lavf55.12.100
Stream #0:0: Video: mjpeg, yuvj420p, 1280x720 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 90k tbn, 25 tbc
Stream mapping:
Stream #0:0 -&gt; #0:0 (mjpeg -&gt; mjpeg)
Press [q] to stop, [?] for help
frame=   36 fps=0.0 q=0.0 size=     888kB time=00:00:01.36 bitrate=5349.2kbits/sframe=   78 fps= 76 q=0.0 size=    1711kB time=00:00:03.04 bitrate=4609.9kbits/sframe=  120 fps= 78 q=0.0 size=    2533kB time=00:00:04.72 bitrate=4396.9kbits/sframe=  161 fps= 79 q=0.0 size=    3336kB time=00:00:06.36 bitrate=4297.5kbits/sframe=  202 fps= 79 q=0.0 size=    4139kB       
time=00:00:08.00 bitrate=4238.8kbits/sframe=  243 fps= 79 q=0.0 size=    4943kB  
time=00:00:09.64 bitrate=4200.1kbits/sframe=  282 fps= 79 q=0.0 size=    5706kB 
time=00:00:11.20 bitrate=4173.9kbits/sframe=  321 fps= 79 q=0.0 size=    6470kB  
time=00:00:12.76 bitrate=4154.0kbits/sframe=  358 fps= 78 q=0.0 size=    7195kB 
time=00:00:14.24 bitrate=4139.2kbits/sframe=  397 fps= 68 q=0.0 size=    7959kB 
time=00:00:15.80 bitrate=4126.6kbits/s    
[1]+  Stopped sudo ffmpeg -loop 1 -i fon.jpeg -vcodec mjpeg -f mjpeg test.mjpg
</code></pre>

<p>And then I playback this mjpeg file with ffplay. The play back is correct, I see no errors or exceptions.</p>

<pre><code>ffplay test.mjpg
avplay version 0.8.5-6:0.8.5-1, Copyright (c) 2003-2012 the Libav developers
built on Jan 13 2013 12:05:48 with gcc 4.7.2
[mjpeg @ 0x7fc3680008c0] max_analyze_duration reached
[mjpeg @ 0x7fc3680008c0] Estimating duration from bitrate, this may be inaccurate
Input #0, mjpeg, from 'test.mjpg':
Duration: N/A, bitrate: N/A
Stream #0.0: Video: mjpeg, yuvj420p, 1280x720 [PAR 1:1 DAR 16:9], 25 fps, 25 tbr, 1200k tbn, 1200k tbc
[avsink @ 0x7fc360001020] auto-inserting filter 'auto-inserted scaler 0' between the filter 'src' and the filter 'out'
[scale @ 0x7fc360001700] w:1280 h:720 fmt:yuvj420p -&gt; w:1280 h:720 fmt:yuv420p flags:0x4
27.99 A-V:  0.000 s:0.0 aq=    0KB vq=    0KB sq=    0B f=0/0   0/0
</code></pre>

<p>So, what is the configuration issue for ffserver, or may be it is a bug of the ffserver?</p>

<p>UPD. I have realized, that i fed file1.ffm instead of file.ffm; that caused some ffserver problem:</p>

<pre><code> Mon Sep  9 11:43:20 2013 [ffm @ 0x2110000]Format ffm probed with size=2048 and score=101
 Mon Sep  9 11:43:20 2013 Deleting feed file 'feed1.ffm' as stream counts differ (1 != 2)
 Mon Sep  9 11:43:20 2013 [AVIOContext @ 0x210d660]Statistics: 4096 bytes read, 0 seeks
 Mon Sep  9 11:43:20 2013 [AVIOContext @ 0x210a9a0]Statistics: 0 seeks, 1 writeouts
 Mon Sep  9 11:43:20 2013 FFserver started.
 Mon Sep  9 11:44:18 2013 File '/feed1.ffm' not found
 Mon Sep  9 11:44:18 2013 127.0.0.1 - - [POST] ""/feed1.ffm HTTP/1.1"" 404 149
</code></pre>

<p>After i set a correct feed, i got another exception on ffmpeg side:</p>

<pre><code>sudo ffmpeg -loop 1 -i fon.jpeg -vcodec mjpeg -f mjpeg http://localhost:8090/feed.ffm
ffmpeg version 2.0 Copyright (c) 2000-2013 the FFmpeg developers
built on Aug 19 2013 23:10:58 with gcc 4.7 (Debian 4.7.2-5)
configuration: 
libavutil      52. 38.100 / 52. 38.100
libavcodec     55. 18.102 / 55. 18.102
libavformat    55. 12.100 / 55. 12.100
libavdevice    55.  3.100 / 55.  3.100
libavfilter     3. 79.101 /  3. 79.101
libswscale      2.  3.100 /  2.  3.100
libswresample   0. 17.102 /  0. 17.102
Input #0, image2, from 'fon.jpeg':
Duration: 00:00:00.04, start: 0.000000, bitrate: N/A
Stream #0:0: Video: mjpeg, yuvj420p, 1280x720 [SAR 1:1 DAR 16:9], 25 fps, 25 tbr, 25 tbn, 25 tbc
Output #0, mjpeg, to 'http://localhost:8090/feed.ffm':
Metadata:
encoder         : Lavf55.12.100
Stream #0:0: Video: mjpeg, yuvj420p, 1280x720 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 90k tbn, 25 tbc
Stream mapping:
Stream #0:0 -&gt; #0:0 (mjpeg -&gt; mjpeg)
Press [q] to stop, [?] for help
av_interleaved_write_frame(): Connection reset by peer
</code></pre>

<p>While ffserver shows no error at all:</p>

<pre><code>sudo ffserver -f  /etc/ffserver3.conf
ffserver version 2.0 Copyright (c) 2000-2013 the FFmpeg developers
built on Aug 19 2013 23:10:58 with gcc 4.7 (Debian 4.7.2-5)
configuration: 
libavutil      52. 38.100 / 52. 38.100
libavcodec     55. 18.102 / 55. 18.102
libavformat    55. 12.100 / 55. 12.100
libavdevice    55.  3.100 / 55.  3.100
libavfilter     3. 79.101 /  3. 79.101
libswscale      2.  3.100 /  2.  3.100
libswresample   0. 17.102 /  0. 17.102
Mon Sep  9 12:08:19 2013 FFserver started.
Mon Sep  9 12:08:40 2013 127.0.0.1 - - [POST] ""/feed.ffm HTTP/1.1"" 200 4096
Mon Sep  9 12:12:28 2013 127.0.0.1 - - [GET] ""/ HTTP/1.1"" 200 1847
</code></pre>

<p>So, what is the problem now?</p>
",2013-09-09 08:30:34,2016-12-31 15:18:51,"av_interleaved_write_frame(): Connection reset by peer mjpeg : What is wrong with mjpeg stream, ffserver and ffplay?",<image-processing><ffmpeg><ffserver>,,,CC BY-SA 3.0,False,False,False,False,True
12930,18698509,2013-09-09 12:43:58,,"<p>I am using JavaCV to capture the video from my web camera using FrameRecorder.</p>

<p>I am working to create a library utility class that would provide the webCam video as an 'avi' video InputStream, here I am unable to do so as the FrameRecorder does not provide any such facility, all it takes is a file name and persists the video on the filesystem.
What should I do to generate a java InputStream from FrameRecorder?</p>

<p>Following is the sample code for reference :</p>

<pre><code>FrameGrabber frameGrabber = FrameGrabber.createDefault(1);
frameGrabber.start();
IplImage grabbedImage = frameGrabber.grab();
int width = grabbedImage.width();
int height = grabbedImage.height();

FrameRecorder frameRecorder = new FFmpegFrameRecorder(""c:\\output.avi"", width, height);
frameRecorder.setAudioChannels(frameGrabber.getAudioChannels());
frameRecorder.start();        

int i = 0;
while ((grabbedImage = frameGrabber.grab()) != null &amp;&amp; i &lt;= 500) {
    frameRecorder.record(grabbedImage);
    i++;
}

frameRecorder.stop();
frameGrabber.stop();
</code></pre>

<p>I am open to any other alternatives too ...</p>

<p>thanks in advance</p>

<p>Ashish</p>
",2013-09-09 12:49:06,2013-09-17 22:11:12,Unable to create java InputStream from javaCV FrameRecorder Class,<java><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
12939,17764641,2013-07-20 17:15:03,,"<p>I'm using JavaCV on Android, and I'm following along with this sample activity. 
<a href=""https://code.google.com/p/javacv/source/browse/samples/RecordActivity.java"" rel=""nofollow"">https://code.google.com/p/javacv/source/browse/samples/RecordActivity.java</a></p>

<p>However the line that i'm having trouble with is</p>

<pre><code> recorder.record( ShortBuffer.wrap(audioData, 0, bufferReadResult). );
</code></pre>

<p>But i'm getting exceptions for that line as it is expecting a Buffer[].  However reading into Buffer and ShortBuffer, I'm not sure why it wont take it.</p>

<p>Declarations for record()</p>

<pre><code>public void record(com.googlecode.javacv.cpp.opencv_core.IplImage image) throws com.googlecode.javacv.FrameRecorder.Exception { /* compiled code */ }

public void record(com.googlecode.javacv.cpp.opencv_core.IplImage image, int pixelFormat) throws com.googlecode.javacv.FrameRecorder.Exception { /* compiled code */ }

public void record(java.nio.Buffer[] samples) throws com.googlecode.javacv.FrameRecorder.Exception { /* compiled code */ }
</code></pre>

<p>This is my first time using the Buffer classes, so I'm a bit confused how they work.</p>
",,2013-07-20 18:39:22,How to convert ShortBuffer to Buffer[]?,<java><android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
12974,17766381,2013-07-20 20:26:45,,"<p>I'm using JavaCV libraries on Android, and I've been able to get the sample Recording activity working somewhat, however it is not writing to disk on my SD card. </p>

<p>Code: <a href=""https://gist.github.com/ilopez/6046287"" rel=""nofollow noreferrer"">https://gist.github.com/ilopez/6046287</a>
Log: <a href=""https://gist.github.com/ilopez/6046289"" rel=""nofollow noreferrer"">https://gist.github.com/ilopez/6046289</a><br>
Manifest: <a href=""https://gist.github.com/ilopez/6046296"" rel=""nofollow noreferrer"">https://gist.github.com/ilopez/6046296</a></p>

<p>Unlike <a href=""https://stackoverflow.com/questions/13469372/save-video-using-ffmpegframerecorder-android"">save video using ffmpegframerecorder android</a> question, there is no fatal exception.  Just nothing is written to the sdcard.  </p>

<p>I have tried the following filenames</p>

<p>/mnt/sdcard/test.flv  - no IO Exception
/sdcard/test.flv - no IO Exception
/idontexist/sdcard/test.flv - IO Exception</p>

<p>I have also tried to place a file in the sdcard folder, nothing saved.</p>

<p>I am confirming the files existence by hooking it up to my computer and viewing the SCH-I535/Card directory.</p>

<p>I also modified the source a bit per my previous question: <a href=""https://stackoverflow.com/questions/17764641/how-to-convert-shortbuffer-to-buffer"">How to convert ShortBuffer to Buffer[]?</a></p>
",2017-05-23 12:03:29,2013-07-23 00:28:10,JavaCV FFmpegFrameRecorder not saving / writing to disk,<java><android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
12999,23320584,2014-04-27 07:28:18,,"<p>Good Day,</p>

<p>I have written an application that uses the V4L2 driver to capture H264 Raw frames from a C920. The bytes are output into stdout, and can be piped to a file or any program</p>

<p>What I am trying to do is this:</p>

<blockquote>
  <p>./capture | ffmpeg -f h264 -i - -b 500000 -vcodec copy out.mp4</p>
</blockquote>

<p>The idea is to capture a raw video and convert it to an mp4 file on the fly. It works perfectly, however, the bit rate compression is never applied. It ends up with a file the same size as the raw file (since the camera outputs a compressed h264 file but in raw frames already)</p>

<p>However, if I was to do this instead</p>

<blockquote>
  <p>./cature > input.raw</p>
</blockquote>

<pre><code>ffmpeg -i out.mp4 -b 500000 output.mp4
</code></pre>

<p>Now, it compresses the file down to a reasonable size. Is there a reason for this? My only current solution right now is to use an alternative like gstreamer (which has issues with h264) or to figure out the ffmpeg API and see if I can add some code to make it do compression on the frames on the fly.</p>
",,2014-04-27 19:03:45,FFMPEG compression - Piping vs File,<opencv><video><ffmpeg><video-capture>,2014-04-29 08:19:48,,CC BY-SA 3.0,True,False,False,False,True
13159,19889181,2013-11-10 11:30:57,,"<p>I'm making something like black box in raspberry pi.</p>

<p>I set OpenCV 2.4.3 and many video libraries.
( I referred this site - <a href=""https://stackoverflow.com/questions/14424325/opencv-cannot-acces-my-webcam"">Opencv cannot acces my webcam</a> )</p>

<p>And I compiled this sample code.</p>

<pre><code>#include &lt;stdio.h&gt;
#include ""opencv/cv.h""
#include ""opencv/highgui.h""
#include ""opencv/cxcore.h""

int main(void){
    CvCapture* capture = cvCaptureFromCAM(0);
    cvNameWindow(""video"", 1);

    double fps = cvGetCaptureProperty(capture, CV_CAP_PROP_FPS);
    CvSize frame_size = cvSize((int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH), (int)cvGetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT));
    CvVideoWriter* writer = cvCreateVideoWriter(""out.avi"", -1, fps, frame_size, 1);

    IpImage* frame;
    while(1){
        frame = cvQueryFrame(capture);
        cvShowImage(""video"", frame);
        if(cvWaitKey(38) == 27){
            break;
        }
    }

    cvReleaseVideoWriter(&amp;writer);
    cvReleaseCapture(&amp;capture);
    cvDestroyWindow(""video"");

    return 0;
}
</code></pre>

<p>This code compiled successfully.</p>

<p>But when i run this process, there are some error.</p>

<pre><code>OpenCV Error: Unsupported format or combination of formats (Gstreamer Opencv backend doesn't support this codec acutally.) in CvVideoWriter_GStreamer::open, file /home/pi/OpenCV-2.4.3/modules/highgui/src/cap_gstreamer.cpp, line 479
terminate called after throwing an instance of 'cv::Exception'
what(): /home/pi/OpenCV-2.4.3/modules/highgui/src/cap_gstreamer.cpp:479: error: (-210) Gstreamer Opencv backend doesn't support this codec acutally. in function CvVideoWriter_GStreamer::open

Aborted
</code></pre>

<p>So, i changed codec part in 'cvCreateVideoWriter' instead of -1.
I tried many types of codec like 'CV_FOURCC('M','J','P','G')'  and so on..</p>

<p>but I cannot fix this problem.</p>

<p>How can i solve this problem? Please help me..</p>
",2017-05-23 11:50:32,2013-11-10 12:45:42,OpenCV - CvVideoWriter codec error in raspbian,<c><opencv><ffmpeg><webcam><gstreamer>,,,CC BY-SA 3.0,True,False,False,False,True
13322,23345286,2014-04-28 15:37:13,,"<p>I have a GoPro Hero 3+ (Black) which is connected to a video capture card (AverMedia Game Broadcaster HD). I simply want to get the video stream in OpenCV. With a Logitech Webcam there are no problems. The used code is below.</p>

<pre><code>VideoCapture cap;
cap.open(0);

waitKey(300);

//cap.set(CV_CAP_PROP_FRAME_WIDTH, 1280);
//cap.set(CV_CAP_PROP_FRAME_HEIGHT, 720);

if (cap.isOpened()){
    cout &lt;&lt; ""Cam identified"" &lt;&lt; endl;
}

namedWindow(""dst"", 1);

while (1){

Mat frame;

if (!cap.read(frame)) {
    std::cout &lt;&lt; ""Unable to read frame from video stream"" &lt;&lt; std::endl;
    continue;
}

imshow(""dst"", frame);

[...]

}
</code></pre>

<p>With the GoPro the following happens: OpenCV is able to open the VideoCapture (""Cam identified"") but can't read any frames (just a gray screen and the output: ""Unable to read frame from video stream""). I also checked this with frame.empty();.</p>

<p>I know that the video capture card works correct because Unity opens a WebCamTexture with the GoPro stream without any issues. I read about codec problems in OpenCv and so I already tried to compile OpenCV with FFMPEG support. Now the recorded MP4-Videos of the GoPro can be displayed but the stream still doesn't work.</p>

<p>I use OpenCV 2.48, Windows 7 and Visual Studio 2013.</p>

<hr>

<p>EDIT: Here is the code of libVLC solution:</p>

<pre><code>struct ctx
{
uint8_t* pixeldata;
std::mutex imagemutex;
};

static void display(void *data, void *id);
static void unlock(void *data, void *id, void *const *p_pixels);
static void *lock(void *data, void **p_pixels);

struct ctx ctx;

libvlc_instance_t *inst;
libvlc_media_player_t *mp;
libvlc_media_t *m;

int main(int argc, char* argv[])
{
    ctx.pixeldata = new uint8_t[1280 * 720 * 3];

    char const *vlc_argv[] =
    {
        ""-vvv"",
        ""--no-audio"", /* skip any audio track */
        ""--no-xlib"", /* tell VLC to not use Xlib */
    };

    int vlc_argc = sizeof(vlc_argv) / sizeof(*vlc_argv);
    inst = libvlc_new(vlc_argc, vlc_argv);

    const char *options[] =
    {
        "":dshow-vdev=AVerMedia HD Capture"",
        "":dshow-adev=none"",
        //"":dshow-size=1280x720"",
        "":dshow-fps=24"",
        "":dshow-chroma=YUY2"",
        "":dshow-video-input=1"",
        "":dshow-video-output=1"",
        "":dshow-aspect-ratio=16\:9"",
        "":live-caching=80"",
        NULL
    };

    m = libvlc_media_new_location(inst, ""dshow://"");
    for (const char **opt = options; *opt; opt++)
        libvlc_media_add_option(m, *opt);

    mp = libvlc_media_player_new_from_media(m);
    libvlc_media_release(m);
    libvlc_video_set_callbacks(mp, lock, unlock, display, &amp;ctx);
    libvlc_video_set_format(mp, ""RV24"", 1280, 720, 1280 * 3);
    libvlc_media_player_play(mp);

    namedWindow(""all"", 1);

    Mat frame(720, 1280, CV_8UC3);

    while (1){

        ctx.imagemutex.lock();
        memcpy(gesamt.data, ctx.pixeldata, 1280 * 720 * sizeof(uint8_t) * 3);
        ctx.imagemutex.unlock();

        imshow(""all"", gesamt);

        if (waitKey(30) == 27) //wait for 'esc' key press for 30ms. If 'esc' key is pressed, break loop
        {
            cout &lt;&lt; ""esc key is pressed by user"" &lt;&lt; endl;
            break;
        }

    }

    libvlc_media_player_stop(mp);
    libvlc_media_player_release(mp);
    libvlc_release(inst);
    delete[] ctx.pixeldata;

    return 0;
}

void display(void *data, void *id){
    (void)data;
    assert(id == NULL);
}

void unlock(void *data, void *id, void *const *p_pixels){
    struct ctx *ctx = (struct ctx*)data;
    ctx-&gt;imagemutex.unlock();
    assert(id == NULL);
}

void *lock(void *data, void **p_pixels){
    struct ctx *ctx = (struct ctx*)data;
    ctx-&gt;imagemutex.lock();
    *p_pixels = ctx-&gt;pixeldata;
    return NULL;
}
</code></pre>
",2014-05-19 13:13:10,2014-05-19 13:13:10,OpenCV and GoPro - empty frames in VideoCapture stream,<c++><opencv><ffmpeg><video-capture><gopro>,,,CC BY-SA 3.0,True,True,False,False,True
13333,21065983,2014-01-11 18:11:36,,"<p>Good day!</p>

<p>I create programm for server, which should generate a video clip of the photos. The user sends photos to the server and the server generates a video with animation and sound track from this photos. I use ffmpeg for creation video, but how to create animation?. I need different (difficult) animation: transitions (fade in, fade out, scroll), zooming, animations numbers etc.</p>

<p>This <a href=""http://www.instagram.com/p/igEizakDw9/"" rel=""nofollow"">example</a> explains what I need.</p>

<p>Thanks</p>
",,2014-01-13 03:07:34,How to generate video from photos with animation on server?,<animation><video><image-processing><ffmpeg><multimedia>,,,CC BY-SA 3.0,False,False,False,False,True
13455,24470506,2014-06-28 20:06:51,,"<p>i try to read .avi or .mpeg video file using VideoCapture class of OpenCV2.4.8 in C++ using QtCreator and CMake 2.8.12.1.
Before built OpenCV, i download FFMPEG static version and put them into Program Files directory, i add their path into enviroments variable PATH, then i download K Lite Codec Pack Full, install it and only then i built OpenCV with CMAKE and mingw provide by Qt. After installation i add to PATH the right path of built OpenCV. 
The stream from webcam works fine, but the stream from a video file doesn't work. I tried on Windows 7 32bit and Windows 8 64bit.
Here is the code</p>

<pre><code>#include &lt;opencv2/imgproc/imgproc.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;opencv2/core/core.hpp&gt;
#include ""opencv2/opencv.hpp""
cv::Mat img;
cv::VideoCapture cap(""Prova.avi"");
std::cerr &lt;&lt; cap.isOpened() &lt;&lt; std::endl;
while(cap.read(img)){
    cv::imshow(""Opencv"", img);
    cv::waitKey(33);
}
</code></pre>

<p>The same code works on Ubuntu 12.04 with the same version of OpenCV and with the ffmpeg build by myself.
What is wrong?</p>
",,2014-10-03 05:28:29,OpenCV VideoCapture not read any video File in Windows 7 32bit,<c++><opencv><ffmpeg><video-capture>,,,CC BY-SA 3.0,True,True,False,False,True
13540,24478215,2014-06-29 16:54:03,,"<p>Firstly, I've installed ffmpeg using</p>

<pre><code>sudo port install ffmpeg
</code></pre>

<p>on my Macbook OSX 10.9 and XCode 5.1. I've done the same for OpenCV</p>

<pre><code>sudo port install opencv
</code></pre>

<p>and I got face detect working using this SO <a href=""https://stackoverflow.com/a/19712385/849791"">answer</a>. However, when trying to open a video file in the source code folder using VideoCapture I get the error ""WARNING: Couldn't read movie file Alireza_Day1_001.avi"". Has anyone faced the same issue? (FYI VideoCapture from my webcam is working fine, but tried opening a .mov and .avi file without luck) Any help is much appreciated! </p>
",2017-05-23 11:52:09,2014-06-29 16:54:03,OpenCV OSX Mavericks video codec issue,<opencv><ffmpeg><osx-mavericks>,,,CC BY-SA 3.0,True,False,False,False,True
13557,16858574,2013-05-31 13:34:45,,"<p>Before a couple days ago I had never used OpenCV or done any video processing.  I've been asked to computationally overlay a video based upon some user inputs and build a new video with the overlays incorporated for download in AVI format.  Essentially, the goal is to have a form that takes as input 3 images (icon, screenshot #1, screenshot #1) and 3 text inputs and overlays the original video with them.  Here is a <a href=""http://www.youtube.com/watch?v=bDMrr3KMOzA"" rel=""nofollow"">link to the video</a>.  When the video is running you'll notice the icon in the center of the iPhone at the beginning is stretched and pulled.  I've been iteratively testing OpenCV methods by breakding down the video frame by frame and doing stuff to each one, then rebuilding (obviously this is probably the only way to successfully rebuild a video with OpenCV with edits, but anyway).  <a href=""https://www.youtube.com/watch?v=rzJ1WAWUfEc"" rel=""nofollow"">this</a> video is one I overlayed a colored circle that moves back and forth with.</p>

<pre><code># the method I've been using
import cv2 as cv
import numpy as np
cap = cv.VideoCapture('the_vid.avi')
flag, frame = cap.read()
width = np.size(frame,1)
height = np.size(frame,0)
writer = cv.VideoWriter('output.avi', cv.VideoWriter_fourcc('I','4','2','0'), fps=35, (width,height), 1)

while True:
    flag, frame = cap.read()
    if flag == 0:
        break
    x = width/2
    y = height/2
    # add a line or circle or something
                    origin radius
    cv.circle(frame, (x,y), 20, (0,0,255), -1)
    # write our new frame
    writer.write(frame)
</code></pre>

<p>Now we've got an output of this very large uncompressed AVI file which can be compressed using ffmpeg</p>

<pre><code>ffmpeg -i output.avi -vcodec msmpeg4v2 compressed_output.avi
</code></pre>

<p>Ok, so that's the method I've been using to rebuild this video, and from that method I'm not seeing it possible to take a static image and stretch it around like is shown in the first 90 frames or so.  The only other possibility I saw was maybe doing something like below.  If you can tell me if there is even a way to implement this pseudo-code that would be awesome, I'm thinking it will be extremely difficult:</p>

<pre><code># example for the first image and first few seconds of video only

first_image = cv.imread('user_uploaded_icon.png')
flag, first_frame = cap.read()

# section of the frame that contains the original icon
the_section = algorithm_to_get_array_of_original_icon_in_first_frame(first_frame)
rows, cols = the_section.shape

# somehow find the array within the first image that is the same size as the_section
# containing JUST the icon
icon = array_of_icon(first_image)

# build a blank image with the size of the original icon in the current frame

blank_image = np.zeros((rows,cols,3),np.uint8)

for i in xrange(row):
    for j in xrange(col):
        blank_image[i,j] = icon[i,j]
</code></pre>

<p>What seems like it might not work about this is the fact that the_section in the first_frame will be stretched to different dimensions than the static image...so I'm not sure if there is ANY viable way to handle this.  I appreciate all the time saving help in advance.</p>
",2013-05-31 13:39:56,2013-05-31 13:39:56,Video Manipulation,<python><opencv><numpy><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
13603,19924111,2013-11-12 08:20:36,,"<p>I have a problem to load a videofile. I am using Visual Studio 2010 and OpenCV 2.4.6.</p>

<p>Sometimes it loads video properly and sometimes it won't, although it is the <strong>same file</strong> and the <strong>same code</strong> (Nothing has changed). So basically, one day it works and the next day does not. I noticed some strange behavior <a href=""https://stackoverflow.com/questions/18307057/opencv-wont-open-some-videos-of-many-videos-of-the-same-format"">BEFORE</a>.</p>

<p>When I run the code I get <strong>Unhandled exception</strong></p>

<hr>

<p><img src=""https://i.stack.imgur.com/AbU27.png"" alt=""enter image description here""></p>

<hr>

<p>and then <strong>No source available</strong></p>

<hr>

<p><img src=""https://i.stack.imgur.com/GjVjj.png"" alt=""enter image description here""></p>

<hr>

<p>A few weeks ago I wasn't able to open a video in one of my project. The problem was that if I opened a project from pinned Start menu than the video couldn't be loaded.</p>

<p><img src=""https://i.stack.imgur.com/jPx4U.png"" alt=""enter image description here""></p>

<p><strong>BUT</strong> when I opened a solution right from a directory than video was loaded properly. I couldn't believe so I tried this more times. </p>

<p>However, in either case it does not work this time.</p>

<p>ALso, I tried to run Visual Studio as admin. Nothing.</p>

<p>What could be a problem here?</p>
",2017-05-23 10:31:42,2013-11-12 08:20:36,OpenCV won't open the same videofile as opened before,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
13672,16871109,2013-06-01 09:15:23,,"<p>So I'm writing a color detection application using an AR Drone. The drone sends my python/opencv socket server an image from its camera in YUV420p format.</p>

<p>What I do to access the image as an opencv IPLImage is the following (and yes this is inefficient but I didn't / don't want to have to write new conversion tools myself):</p>

<ol>
<li>Save the yuv image to a file (some_image.yuv)</li>
<li>subprocess.call(<em>insert ffmpeg call here</em>)</li>
<li>Read the resultant file (bmp, png, it doesn't matter) back in using cv.LoadImage</li>
</ol>

<p>My problem right now is a very noticable color shift. I'm waving a red felt sheet in these pictures. The first one shows a heavy yellow tint. The second isn't as bad but is very rare -- mostly when I have the red sheet it's heavily tinted.</p>

<ul>
<li>Tinted image: <a href=""http://i.stack.imgur.com/BQikM.png"" rel=""nofollow"">http://i.stack.imgur.com/BQikM.png</a></li>
<li>Less-tinted image: <a href=""http://i.stack.imgur.com/ezHyy.png"" rel=""nofollow"">http://i.stack.imgur.com/ezHyy.png</a></li>
</ul>

<p>I'm wondering both of these things:</p>

<ol>
<li>if there's either a better way to do this</li>
<li>If the color tinting issue can be resolved</li>
</ol>

<p>My ffmpeg conversion line looks something like</p>

<pre><code>ffmpeg -s 640x480 -vcodec rawvideo -f rawvideo -pix_fmt yuv420p -i image.yuv -vcodec bmp -f image2 output.bmp
</code></pre>

<p>I've also tried:</p>

<pre><code>ffmpeg -f rawvideo -s 640x480 -pix_fmt yuv420p -vf colormatrix=bt709:bt601 -i image.yuv -f image -vcodec png output.png
</code></pre>

<p>The color shift is always there, unfortunately!</p>

<p>The color shift is my big problem right now as I later convert the image to HSV and use thresholding to choose a color range that works for me.</p>
",,2013-06-01 20:48:22,"YUV420p to other formats, color shift problems",<python><opencv><image-processing><ffmpeg><yuv>,,,CC BY-SA 3.0,True,False,False,False,True
13707,19934437,2013-11-12 16:22:45,,"<p>I want to save a video with opencv with lossless compresion so I don't lose any details of the frames. Everything works with the xvid codec but offcourse this is not a lossless compression so I found that the x264 codec is suitable. However it doesn't work, I tried the following sample code but while running I get the following error: ""could not find encoder for codec id 28: encoder not found.""</p>

<pre><code>cv::VideoWriter makeVideo;
makeVideo.open(""makevideo//newVideo.mp4"", CV_FOURCC('X','2','6','4'), 30, cv::Size(1600,1200), true);
cv::Mat image = imread(""makevideo//frames//111.png"");

for(int i = 0; i &lt; 200; i++)
    makeVideo &lt;&lt; image;

makeVideo.release();
</code></pre>

<p>I found that for this to work, I need to have ffmpeg support. I'm currently using opencv2.4.6 and in this discussion (<a href=""https://stackoverflow.com/questions/9387392/how-can-i-use-the-opencv-ffmpeg-video-i-o-rather-than-the-directshow-one-in-wind"">how can I use the openCV FFMPEG video I/O rather than the DirectShow one in Windows?</a>) someone mentioned that in opencv2.4 ffmpeg is automatically included. But its not working....</p>

<p>Here (<a href=""https://stackoverflow.com/questions/7075180/how-to-compile-opencv-2-3-with-ffmpeg-support-with-visual-studio-2010"">How to compile OpenCV 2.3 with ffmpeg support with Visual Studio 2010</a>) I found how to compile opencv and ffmpeg yourself on windows. I followed all the steps sucessfully but still I get the same error....</p>
",2019-04-09 22:00:23,2019-06-18 08:25:19,OpenCV videowriter H264 codec (ffmpeg),<windows><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
13708,19934833,2013-11-12 16:39:43,,"<p>I am trying to open a third party video file into OpenCV with python.
My camera (plotwatcher camera trap) shoots in a silly proprietary format. The extension is unique (.tlv) but i can play the file in VLC, and using ffmpeg i can see the following encoding:</p>

<pre><code>C:\Users\Ben&gt;ffmpeg -i C:/Users/Ben/Documents/OpenCV_HummingbirdsMotion/PlotwatcherTest.tlv

ffmpeg version N-58037-g355cea8 Copyright (c) 2000-2013 the FFmpeg developers
built on Nov 11 2013 18:01:42 with gcc 4.8.2 (GCC)
configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-av
isynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enab
le-iconv --enable-libass --enable-libbluray --enable-libcaca --enable-libfreetyp
e --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --ena
ble-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-l
ibopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libsp
eex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-aa
cenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavp
ack --enable-libx264 --enable-libxavs --enable-libxvid --enable-zlib
libavutil      52. 52.100 / 52. 52.100
libavcodec     55. 41.100 / 55. 41.100
libavformat    55. 21.100 / 55. 21.100
libavdevice    55.  5.100 / 55.  5.100
libavfilter     3. 90.102 /  3. 90.102
libswscale      2.  5.101 /  2.  5.101
libswresample   0. 17.104 /  0. 17.104
libpostproc    52.  3.100 / 52.  3.100
Input #0, avi, from 'C:/Users/Ben/Documents/OpenCV_HummingbirdsMotion/Plotwatche
rTest.tlv':
Duration: 00:00:05.00, start: 0.000000, bitrate: 14608 kb/s
Stream #0:0: Video: mjpeg (MJPG / 0x47504A4D), yuvj420p(pc), 1280x720, 10 tb
r, 10 tbn, 10 tbc
</code></pre>

<p>From this i can see file is encoded into mjpeg format.</p>

<p>How can i open this file in open cv?</p>

<pre><code>import cv2
#import cv2.cv as cv
import numpy as np
cap = cv2.VideoCapture(""C:/Users/Ben/Documents/OpenCV_HummingbirdsMotion/PlotwatcherTest.mjpg"")
ret, frame = cap.read()
#show first image
cv2.imshow('my window',frame)
cv2.waitKey(0)
cv2.destroyWindow('my window')
</code></pre>

<p>I can see nothing has been loaded. When i try to view the first frame i get the error:</p>

<pre><code>File ""C:\Users\Ben\Documents\OpenCV_HummingbirdsMotion\Test.py"", line 21, in &lt;module&gt;
cv2.imshow('my window',frame)
error: ..\..\..\..\opencv\modules\highgui\src\window.cpp:261: error: (-215)
size.width&gt;0        &amp;&amp; size.height&gt;0
</code></pre>

<p>I've tried leaving the native .tlv, mjpeg and mjpg, and .MJPG endings following the conceptual idea found here: <a href=""https://stackoverflow.com/questions/18077652/mjpeg-stream-fails-to-open-in-opencv-2-4"">MJPEG stream fails to open in OpenCV 2.4</a></p>

<p>i appreciate all help!</p>
",2017-05-23 12:12:40,2013-11-14 16:04:25,Opening file with unknown extension (Mjpeg?) in OpenCV python,<python><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
13749,21100386,2014-01-13 20:06:30,,"<p><strong>Hello guys,</strong></p>

<p>Here is my code:</p>

<pre><code>Display display = ((WindowManager)
            ctx.getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay();

    screenWidth = display.getWidth();
    screenHeight = display.getHeight();

    Log.w(LOG_TAG, ""init recorder"");
    Log.i(LOG_TAG, ""ffmpeg_url: "" + file);
    recorder = new FFmpegFrameRecorder(file, imageWidth,
            imageHeight, 1);
    recorder.setFormat(""flv"");
    recorder.setSampleRate(AudioRateInHz);
    recorder.setFrameRate(frameRate);

    audioRecordRunnable = new AudioRecordRunnable();
    audioThread = new Thread(audioRecordRunnable);
</code></pre>

<p>When i'm trying to run it on my Android activity, i got this exception:</p>

<blockquote>
  <p>Caused by: java.lang.UnsatisfiedLinkError: Couldn't load jniavformat from loader dalvik.system.PathClassLoader[dexPath=/data/app/xx.app.android-2.apk,libraryPath=/data/app-lib/xx.app.android-2]: findLibrary returned null</p>
</blockquote>

<p>The line of the exception shows me that it's occurred on this line: </p>

<p><code>new FFmpegFrameRecorder(file, imageWidth, imageHeight, 1);</code></p>

<p>Any ideas what this exception means?</p>
",,2014-01-14 08:09:48,Android FFmpegFrameRecorder crashing,<android><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
13880,19947423,2013-11-13 07:03:11,,"<p>I couldn't build opencv with cuda support on Mavericks:
When using cmake -G ""Unix Makefiles"" -DWITH_CUDA=ON ..</p>

<p>i got error:
 -- Configuring incomplete, errors occurred!</p>

<p>Any workaround on this?
(Similar error when using macport too)</p>

<p>CMakeError.log</p>

<pre><code>Determining size of off64_t failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec3929617441/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec3929617441.dir/build.make CMakeFiles/cmTryCompileExec3929617441.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec3929617441.dir/OFF64_T.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3  -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec3929617441.dir/OFF64_T.c.o   -c /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:19:12: error: use of undeclared identifier 'off64_t'; did you mean 'off_t'?
  ('0' + ((SIZE / 10000)%10)),
           ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:17:22: note: expanded from macro 'SIZE'
#define SIZE (sizeof(off64_t))
                     ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:20:12: error: use of undeclared identifier 'off64_t'; did you mean 'off_t'?
  ('0' + ((SIZE / 1000)%10)),
           ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:17:22: note: expanded from macro 'SIZE'
#define SIZE (sizeof(off64_t))
                     ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:21:12: error: use of undeclared identifier 'off64_t'; did you mean 'off_t'?
  ('0' + ((SIZE / 100)%10)),
           ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:17:22: note: expanded from macro 'SIZE'
#define SIZE (sizeof(off64_t))
                     ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:22:12: error: use of undeclared identifier 'off64_t'; did you mean 'off_t'?
  ('0' + ((SIZE / 10)%10)),
           ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:17:22: note: expanded from macro 'SIZE'
#define SIZE (sizeof(off64_t))
                     ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:23:12: error: use of undeclared identifier 'off64_t'; did you mean 'off_t'?
  ('0' +  (SIZE    % 10)),
           ^
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:17:22: note: expanded from macro 'SIZE'
#define SIZE (sizeof(off64_t))
                     ^
5 errors generated.
gmake[1]: *** [CMakeFiles/cmTryCompileExec3929617441.dir/OFF64_T.c.o] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec3929617441/fast] Error 2

/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CheckTypeSize/OFF64_T.c:
#include &lt;sys/types.h&gt;
#include &lt;stdint.h&gt;
#include &lt;stddef.h&gt;


#undef KEY
#if defined(__i386)
# define KEY '_','_','i','3','8','6'
#elif defined(__x86_64)
# define KEY '_','_','x','8','6','_','6','4'
#elif defined(__ppc__)
# define KEY '_','_','p','p','c','_','_'
#elif defined(__ppc64__)
# define KEY '_','_','p','p','c','6','4','_','_'
#endif

#define SIZE (sizeof(off64_t))
char info_size[] =  {'I', 'N', 'F', 'O', ':', 's','i','z','e','[',
  ('0' + ((SIZE / 10000)%10)),
  ('0' + ((SIZE / 1000)%10)),
  ('0' + ((SIZE / 100)%10)),
  ('0' + ((SIZE / 10)%10)),
  ('0' +  (SIZE    % 10)),
  ']',
#ifdef KEY
  ' ','k','e','y','[', KEY, ']',
#endif
  '\0'};

#ifdef __CLASSIC_C__
int main(argc, argv) int argc; char *argv[];
#else
int main(int argc, char *argv[])
#endif
{
  int require = 0;
  require += info_size[argc];
  (void)argv;
  return require;
}


Determining if the include file io.h exists failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec647810530/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec647810530.dir/build.make CMakeFiles/cmTryCompileExec647810530.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec647810530.dir/CheckIncludeFile.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3  -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec647810530.dir/CheckIncludeFile.c.o   -c /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c:1:10: fatal error: 'io.h' file not found
#include &lt;io.h&gt;
         ^
1 error generated.
gmake[1]: *** [CMakeFiles/cmTryCompileExec647810530.dir/CheckIncludeFile.c.o] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec647810530/fast] Error 2


Determining if the function jbg_newlen exists failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec4172827471/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec4172827471.dir/build.make CMakeFiles/cmTryCompileExec4172827471.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec4172827471.dir/CheckFunctionExists.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -DCHECK_FUNCTION_EXISTS=jbg_newlen -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec4172827471.dir/CheckFunctionExists.c.o   -c /opt/local/share/cmake-2.8/Modules/CheckFunctionExists.c
Linking C executable cmTryCompileExec4172827471
/opt/local/bin/cmake -E cmake_link_script CMakeFiles/cmTryCompileExec4172827471.dir/link.txt --verbose=1
/usr/bin/cc     -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -DCHECK_FUNCTION_EXISTS=jbg_newlen -O3 -DNDEBUG -Wl,-search_paths_first -Wl,-headerpad_max_install_names   CMakeFiles/cmTryCompileExec4172827471.dir/CheckFunctionExists.c.o  -o cmTryCompileExec4172827471  
Undefined symbols for architecture x86_64:
  ""_jbg_newlen"", referenced from:
      _main in CheckFunctionExists.c.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
gmake[1]: *** [cmTryCompileExec4172827471] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec4172827471/fast] Error 2


Determining if the include file linux/videodev.h exists failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec70111243/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec70111243.dir/build.make CMakeFiles/cmTryCompileExec70111243.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec70111243.dir/CheckIncludeFile.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3  -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec70111243.dir/CheckIncludeFile.c.o   -c /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c:1:10: fatal error: 'linux/videodev.h' file not found
#include &lt;linux/videodev.h&gt;
         ^
1 error generated.
gmake[1]: *** [CMakeFiles/cmTryCompileExec70111243.dir/CheckIncludeFile.c.o] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec70111243/fast] Error 2


Determining if the include file linux/videodev2.h exists failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec661389614/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec661389614.dir/build.make CMakeFiles/cmTryCompileExec661389614.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec661389614.dir/CheckIncludeFile.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3  -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec661389614.dir/CheckIncludeFile.c.o   -c /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c:1:10: fatal error: 'linux/videodev2.h' file not found
#include &lt;linux/videodev2.h&gt;
         ^
1 error generated.
gmake[1]: *** [CMakeFiles/cmTryCompileExec661389614.dir/CheckIncludeFile.c.o] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec661389614/fast] Error 2


Determining if the include file sys/videoio.h exists failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec741892054/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec741892054.dir/build.make CMakeFiles/cmTryCompileExec741892054.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec741892054.dir/CheckIncludeFile.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3  -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec741892054.dir/CheckIncludeFile.c.o   -c /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c:1:10: fatal error: 'sys/videoio.h' file not found
#include &lt;sys/videoio.h&gt;
         ^
1 error generated.
gmake[1]: *** [CMakeFiles/cmTryCompileExec741892054.dir/CheckIncludeFile.c.o] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec741892054/fast] Error 2


Determining if the include file libavformat/avformat.h exists failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec2161613468/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec2161613468.dir/build.make CMakeFiles/cmTryCompileExec2161613468.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec2161613468.dir/CheckIncludeFile.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3  -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec2161613468.dir/CheckIncludeFile.c.o   -c /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c:1:10: fatal error: 'libavformat/avformat.h' file not found
#include &lt;libavformat/avformat.h&gt;
         ^
1 error generated.
gmake[1]: *** [CMakeFiles/cmTryCompileExec2161613468.dir/CheckIncludeFile.c.o] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec2161613468/fast] Error 2


Determining if the include file ffmpeg/avformat.h exists failed with the following output:
Change Dir: /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp

Run Build Command:/opt/local/bin/gmake ""cmTryCompileExec188285781/fast""
/opt/local/bin/gmake -f CMakeFiles/cmTryCompileExec188285781.dir/build.make CMakeFiles/cmTryCompileExec188285781.dir/build
gmake[1]: Entering directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
/opt/local/bin/cmake -E cmake_progress_report /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CMakeFiles 1
Building C object CMakeFiles/cmTryCompileExec188285781.dir/CheckIncludeFile.c.o
/usr/bin/cc   -fsigned-char -W -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3  -O3 -DNDEBUG   -o CMakeFiles/cmTryCompileExec188285781.dir/CheckIncludeFile.c.o   -c /Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c
/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp/CheckIncludeFile.c:1:10: fatal error: 'ffmpeg/avformat.h' file not found
#include &lt;ffmpeg/avformat.h&gt;
         ^
1 error generated.
gmake[1]: *** [CMakeFiles/cmTryCompileExec188285781.dir/CheckIncludeFile.c.o] Error 1
gmake[1]: Leaving directory `/Users/caominhvu/Downloads/opencv-2.4.7/build/CMakeFiles/CMakeTmp'
gmake: *** [cmTryCompileExec188285781/fast] Error 2
</code></pre>
",2013-11-13 13:49:35,2017-08-30 18:14:31,OpenCV 2.4.7 build on MacOS (Maverick + Xcode 5.01 + CUDA 5.5),<xcode><macos><opencv><cuda><osx-mavericks>,,,CC BY-SA 3.0,True,False,False,False,True
14020,22255975,2014-03-07 16:52:31,,"<p>I'm struggling with this for 2 days now and don't get it to work.</p>

<p><strong>What I've done so far:</strong></p>

<ul>
<li><p>built opencv 2.4.8 from source on Ubuntu 12.04 LTS
--> OpenCV projects compile and run on ubuntu</p></li>
<li><p>built opencv 2.4.8 from source on the Raspberry Pi Raspian
--> OpenCV projects compile and run on the Raspberry Pi</p></li>
<li><p>built a cross compiler for the Raspberry Pi with crosstools-ng (<a href=""http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/"" rel=""noreferrer"">http://www.bootc.net/archives/2012/05/26/how-to-build-a-cross-compiler-for-your-raspberry-pi/</a>)
--> c++ programs built on Ubuntu with the crosscompiler run on the Raspberry Pi</p></li>
</ul>

<hr>

<p><strong>What are my problems:</strong></p>

<p>
<li> OpenCV programs don't compile with the cross compiler </li></p>

<pre><code>|2|fatal error: opencv2/highgui/highgui.hpp: No such file or directory|
</code></pre>

<p><li> I think I need to cross compile OpenCV as well on ubuntu. From my cross compiler I also have a toolchain</li>  </p>

<pre><code># this one is important
SET(CMAKE_SYSTEM_NAME Linux)
#this one not so much
SET(CMAKE_SYSTEM_VERSION 1)

# specify the cross compiler
SET(CMAKE_C_COMPILER
/home/christian/Programming/x-tools/arm-unknown-linux-gnueabi/bin/arm-unknown-linux-gnueabi-gcc)

SET(CMAKE_CXX_COMPILER
/home/christian/Programming/x-tools/arm-unknown-linux-gnueabi/bin/arm-unknown-linux-gnueabi-g++)

# where is the target environment
SET(CMAKE_FIND_ROOT_PATH
/home/christian/Programming/x-tools/arm-unknown-linux-gnueabi)

# search for programs in the build host directories
SET(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
# for libraries and headers in the target directories
SET(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
SET(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
</code></pre>

<p>with this toolchain I tried to cross compile OpenCV with this command:</p>

<pre><code>cmake -DCMAKE_TOOLCHAIN_FILE=../Toolchain-RaspberryPi.cmake ../
</code></pre>

<p>After the make command it compiles until 27%. There it stops with this error</p>

<pre><code>[ 27%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o
In file included from /home/christian/Downloads/opencv-2.4.8/modules/highgui/src/cap_ffmpeg_impl.hpp:60:0,
                 from /home/christian/Downloads/opencv-2.4.8/modules/highgui/src/cap_ffmpeg.cpp:45:
/home/christian/Downloads/opencv-2.4.8/modules/highgui/src/ffmpeg_codecs.hpp:81:36: fatal error: libavformat/avformat.h: No such file or directory
   #include &lt;libavformat/avformat.h&gt;
                                    ^
compilation terminated.
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p><li> I tried to copy the OpenCV headers and libs compiled on the Raspberry Pi to my ubuntu computer and link them. I get loads of errors while compiling</li></p>

<pre><code>||=== RPi_Cross_CV, Debug ===|
||warning: libz.so.1, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_core.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libjpeg.so.8, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libpng12.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libtiff.so.4, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libjasper.so.1, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgtk-x11-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgdk-x11-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libatk-1.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgio-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libpangoft2-1.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libpangocairo-1.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgdk_pixbuf-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libcairo.so.2, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libpango-1.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libfreetype.so.6, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libfontconfig.so.1, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgobject-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libglib-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgthread-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgstbase-0.10.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgstreamer-0.10.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libgmodule-2.0.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libxml2.so.2, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libdc1394.so.22, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libv4l1.so.0, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libavcodec.so.53, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libavformat.so.53, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libavutil.so.51, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
||warning: libswscale.so.2, needed by ../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8, not found (try using -rpath or -rpath-link)|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `TIFFSetWarningHandler@LIBTIFF_3.9'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `png_read_info@PNG12_0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `g_time_val_add'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jas_image_writecmpt'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_widget_queue_draw'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `av_guess_codec@LIBAVFORMAT_53'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `av_rescale_q@LIBAVUTIL_51'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jpeg_std_error@LIBJPEG_8.0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jas_cmprof_destroy'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `png_get_tRNS@PNG12_0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `g_return_if_fail_warning'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `dc1394_camera_enumerate'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `dc1394_capture_stop'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `compress'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `dc1394_get_image_size_from_video_mode'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `g_timeout_add'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `png_set_packing@PNG12_0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `v4l2_munmap'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `dc1394_feature_whitebalance_get_value'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_type_new'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jas_image_destroy'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `avcodec_close@LIBAVCODEC_53'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `sws_getCachedContext@LIBSWSCALE_2'|
../../../../Programming/x-tools/usr-local/lib/libopencv_core.so.2.4.8||undefined reference to `gzeof'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_style_attach'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_widget_get_type'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_window_resize'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `g_cond_broadcast'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `dc1394_video_get_supported_framerates'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jpeg_read_header@LIBJPEG_8.0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `avio_open@LIBAVFORMAT_53'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `TIFFReadEncodedTile@LIBTIFF_3.9'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `uncompress'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `g_type_check_instance_cast'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `g_usleep'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `avcodec_find_decoder@LIBAVCODEC_53'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `g_get_current_time'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jpeg_set_defaults@LIBJPEG_8.0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `dc1394_video_get_mode'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jpeg_start_compress@LIBJPEG_8.0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `av_free_packet@LIBAVCODEC_53'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_window_set_geometry_hints'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_signal_connect_full'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gdk_draw_rgb_image'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_widget_queue_resize'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `dc1394_video_set_mode'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jas_stream_close'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jpeg_set_quality@LIBJPEG_8.0'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `jas_image_readcmpt'|
../../../../Programming/x-tools/usr-local/lib/libopencv_highgui.so.2.4.8||undefined reference to `gtk_disable_setlocale'|
||More errors follow but not being shown.|
||Edit the max errors limit in compiler options...|
||=== Build finished: 50 errors, 29 warnings ===|
</code></pre>

<hr>

<p><strong>So my question is:</strong></p>

<p>How can I get a crosscompiler on ubuntu to work with opencv? I just want to compile on ubuntu, copy the program on the Pi and run it there.</p>

<p>Thanks a lot</p>
",2014-03-07 20:47:35,2017-07-17 12:50:03,Cross compile opencv project on Ubuntu for Raspberry Pi,<c++><opencv><ubuntu><raspberry-pi><cross-compiling>,,,CC BY-SA 3.0,True,False,False,False,True
14109,21129648,2014-01-15 05:19:36,,"<p>I've written this in C++ (VS2012) using the OpenCV library (2.4.6).</p>

<pre><code>#include &lt;opencv2\opencv.hpp&gt;
#include &lt;opencv2\highgui\highgui.hpp&gt;    
int main(){
    Mat image;
    VideoCapture cap;
    cap.open(""test.avi"");
    if(!cap.isOpened()){
        cout&lt;&lt; ""Capture not open \n"";
        cin.get();
    }
    cvNamedWindow(""Video Output"");
    while(1){
        cap &gt;&gt; image;
        imshow(""Video Output"",image);
        waitKey(30);
    }
}
</code></pre>

<p>Running it, the video capture fails to open.
test.avi is located in the same directory as the executable, and running it ind Debug/Release/outside the IDE makes no difference.
The OpenCv DLLs and the video file are here: <a href=""https://www.dropbox.com/sh/16c04d97iw90gtk/88fQ4BLbfl#/"" rel=""noreferrer"">https://www.dropbox.com/sh/16c04d97iw90gtk/88fQ4BLbfl#/</a>
What could I be doing wrong?</p>

<p>EDIT: As seen in questions on the OpenCV Q&amp;A site, I've copied the opencv_ffmpeg DLL to the folder with my executable. Now it only works outside the IDE (VS2012)</p>
",2014-01-16 04:39:57,2014-10-30 10:04:53,OpenCV Video capture from file won't open successfully,<c++><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
14270,19978921,2013-11-14 13:27:56,,"<p>I have integrated this Javacv for concatenating 2 videos this code works find when i was using 2 videos recorded from rear camera,but when i record 1 video with front cameara and another with rear camera then another half video is rotated upside down
Is there any specific settings while recording from front camera,</p>

<p>I have used this library from github
<a href=""https://github.com/sourab-sharma/TouchToRecord"" rel=""nofollow"">https://github.com/sourab-sharma/TouchToRecord</a></p>

<p>Here is the recording file 
<a href=""https://github.com/sourab-sharma/TouchToRecord/blob/master/JavaCvVideoRecorder/src/com/javacv/recorder/FFmpegRecorderActivity.java"" rel=""nofollow"">Video Recording</a></p>

<p>Please give me some solution on this</p>

<p>Thanks</p>
",,2013-11-14 13:27:56,Video Concatnation using javacv,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
14405,23430567,2014-05-02 14:29:12,,"<p>I have a HQ video of one second</p>

<p>Some information of this video is as below</p>

<pre><code>Dimensions : 1920 x 1080    
Codec : H.264    
Framerate : 30 frames per second    
Size : 684.7 kB (6,84,673 bytes)
Bitrates : 5458 kbps
</code></pre>

<p>I have extracted frames from video</p>

<pre><code>ffmpeg -i f1.mp4 f%d.jpg
</code></pre>

<p>All images are of <strong>1920 x 1020 pixels</strong> by default 30 frames are generated (f7_1.jpg, f7_2.jpg,.....,f7_30.jpg) </p>

<p>I have added some texts and objects to these images (without changing dimensions of any image, all 30 images are still of <strong>1920 x 1020 pixels</strong>)</p>

<p>Now I am trying to merge all these images to create single video (of 1 second)</p>

<p>I referred <a href=""https://ffmpeg.org/ffmpeg.html#See-Also"" rel=""nofollow"">this</a> official document, I have run below command</p>

<pre><code>ffmpeg -f image2 -i f7_%d.jpg -r 30 -b:v 5458k foo_5458_2.mp4
</code></pre>

<p>Video created is also of one second, thing is its bit rates are higher then the original one. New video has <strong>6091 kbps</strong> bit rates, while I expect are <strong>5458 kbps</strong> only. </p>

<p>Because of higher bits, its gets finish very quickly compare to original video in video player.</p>

<p>Is there any thing  I missing ?? </p>

<p>And I don't know what is exact meaning and job of <code>-f image2</code> option, when I run command without this option, I am getting same video.</p>
",,2014-05-02 14:43:35,setting bit rates in creating video from images in ffmpeg not working,<video><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
14568,17892342,2013-07-26 23:00:19,,"<p>I'm trying to read a RTSP stream using ffmpeg by way of <a href=""https://code.google.com/p/javacv/"" rel=""nofollow"">javacv</a>. I'm able to view the fist 15 seconds or so before I get a segfault on the call to sws_scale. Does this mean I've ran out of memory? If so, any idea what I'm doing wrong?</p>

<pre><code>    av_register_all();
    avcodec.avcodec_register_all();
    avformat_network_init();
    AVFormatContext avFormatContext = avformat.avformat_alloc_context();

    if(0 != avformat_open_input(avFormatContext, ""rtsp://192.168.0.107:7654/lov2.ffm"", null, null)){
        throw new RuntimeException(""avformat_open_input failed"");
    }

    if(avformat_find_stream_info(avFormatContext, null) &lt; 0){
        throw new RuntimeException(""avformat_find_stream_info failed"");
    }

    int video_stream_index = 0;

    //search video stream
    for(int i = 0; i &lt; avFormatContext.nb_streams(); i++){
        if(avFormatContext.streams(i).codec().codec_type() == AVMEDIA_TYPE_VIDEO){
            video_stream_index = i;
        }
    }
    Log.d(TAG, ""checkpoint 3"");
    AVPacket packet = new AVPacket();
    av_init_packet(packet);

    AVStream stream = new AVStream();
    int cnt = 0;

    //start reading packets from stream and write them to file
    av_read_play(avFormatContext);//play RTSP
    AVCodecContext avCodecContext = avFormatContext.streams(video_stream_index).codec();
    AVCodec codec = avcodec_find_decoder(avCodecContext.codec_id());

    if (codec == null){
        throw new RuntimeException(""codec not found"");
    }

    if (avcodec_open2(avCodecContext, codec, null) &lt; 0){
        throw new RuntimeException(""could not open codec"");
    }

    SwsContext img_convert_ctx = new SwsContext();
    img_convert_ctx = swscale.sws_getCachedContext(
            img_convert_ctx,
            avCodecContext.width(), avCodecContext.height(), 
            avCodecContext.pix_fmt(), avCodecContext.width(), avCodecContext.height(),
            PIX_FMT_RGB24, SWS_BICUBIC, null, null, null
    );

    int size = avpicture_get_size(PIX_FMT_YUV420P, avCodecContext.width(), avCodecContext.height());
    BytePointer picture_buf = new BytePointer(av_malloc(size));
    AVFrame frame = avcodec_alloc_frame();
    AVFrame picrgb = avcodec_alloc_frame();

    int size2 = avpicture_get_size(avutil.PIX_FMT_RGB24, avCodecContext.width(), avCodecContext.height());
    BytePointer picture_buf2 = new BytePointer(av_malloc(size2));

    avpicture_fill(frame, picture_buf, PIX_FMT_YUV420P, avCodecContext.width(), avCodecContext.height());
    avpicture_fill(picrgb, picture_buf2, avutil.PIX_FMT_RGB24, avCodecContext.width(), avCodecContext.height());
    Log.d(TAG, String.format(""h: %d,  w: %d; h: %d w: %d"", avCodecContext.width(), avCodecContext.height(), avCodecContext.height(), frame.width()));
    Log.d(TAG, ""checkpoint 6"");
    Bitmap bmp = Bitmap.createBitmap(avCodecContext.width(), avCodecContext.height(), Bitmap.Config.RGB_565);
    while(av_read_frame(avFormatContext, packet) &gt;= 0){

        if(packet.size() &gt; 0 &amp;&amp; packet.stream_index() == video_stream_index){//packet is video
            int[] gotFrame = new int[]{0};
            int len = avcodec_decode_video2(avCodecContext, frame, gotFrame, packet);
            if(gotFrame[0] &gt; 0){
                swscale.sws_scale(
                        img_convert_ctx, 
                        frame.data(0), frame.linesize(), 
                        0, avCodecContext.height(), 
                        picrgb.data(0), picrgb.linesize());
                bmp.copyPixelsFromBuffer(picture_buf2.asByteBuffer());
                videoView.drawFrame(bmp);
            }
        }
        av_free_packet(packet);
        av_init_packet(packet);
    }
    av_free(frame);
    av_free(picrgb);
    av_free(picture_buf);
    av_free(picture_buf2);

    av_read_pause(avFormatContext);
</code></pre>

<p>Stack trace:</p>

<pre><code> F/libc    ( 7460): Fatal signal 11 (SIGSEGV) at 0x76100005 (code=1), thread 7474 (Thread-13601)
E/Sensors (  720): accelHandler 0.201182 0.180824 10.950029
I/DEBUG   ( 6409): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   ( 6409): Build fingerprint: 'Verizon/d2vzw/d2vzw:4.1.2/JZO54K/I535VRBMB1:user/release-keys'
I/DEBUG   ( 6409): pid: 7460, tid: 7474, name: Thread-13601  &gt;&gt;&gt; com.example.javacv.stream.test2 &lt;&lt;&lt;
I/DEBUG   ( 6409): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 76100005
I/DEBUG   ( 6409):     r0 57995360  r1 594f3c30  r2 59349200  r3 59349020
I/DEBUG   ( 6409):     r4 59349020  r5 76100005  r6 00000060  r7 594f3cf0
I/DEBUG   ( 6409):     r8 59349200  r9 59349020  sl 000001e0  fp 76100005
I/DEBUG   ( 6409):     ip 594f3cf0  sp 5e08bb08  lr 59308bec  pc 593103b8  cpsr 00000010
</code></pre>

<p>FAQ:</p>

<ul>
<li>Why not use MediaPlayer?</li>
</ul>

<p>MediaPlayer forces ~2 seconds of latency on the stream, I really need &lt;100ms.</p>
",2013-07-27 18:57:49,2013-07-27 18:57:49,Segfault after 15 seconds while reading a RTSP stream with ffmpeg in Android,<android><video><ffmpeg><javacv><javacpp>,,,CC BY-SA 3.0,False,False,False,False,True
14642,18835941,2013-09-16 19:37:51,,"<p>I am using mac os x 1.7.5 with python 2.7.5_1 and opencv 2.4.4_0 installed via macports. I seem to have all the latest dependent ports. </p>

<p>In my code, the <code>cv2.Videowriter()</code> is successfully created and opened which produces a 6kb .avi file but <code>videoFile.write(img0)</code> doesn't write anything into that file. I really am not able to figure out why the video stream isn't written to the file. Any insights? </p>

<p>My code is as follows:</p>

<pre><code>import cv2
import cv

cv2.namedWindow(""Original"")

cap0 = cv2.VideoCapture(0) 

codec = cv.CV_FOURCC('D','I','V','X')
print codec

videoFile = cv2.VideoWriter();
videoFile.open('video.avi', codec, 25, (640, 480),1)

key = -1
while(key &lt; 0):
    success0, img0 = cap0.read()

    cv2.imshow(""Original"", img0)

    videoFile.write(img0)

    key = cv2.waitKey(1)
cv2.destroyAllWindows()
</code></pre>

<p>I've tried these codecs and none of them worked: I420, AVC1, YUV1, PIM1, MJPG, MP42, MP4V, DIV3, DIVX, XVID, IUYV,FFV1, FLV1, U263, H264, ZLIB </p>

<p>I've also gone through all the <a href=""http://opencv.willowgarage.com/wiki/QuickTimeCodecs"" rel=""nofollow noreferrer"">quick time codecs mentioned here</a></p>

<p>Using ZLIB codec I get the error: </p>

<pre><code>[zlib @ 0x7fb0d130a000] Specified pixel format yuv420p is invalid or not supported
</code></pre>

<p>Using H264 codec I get an error:</p>

<pre><code>[libx264 @ 0x7fe423869600] broken ffmpeg default settings detected
[libx264 @ 0x7fe423869600] use an encoding preset (e.g. -vpre medium)
[libx264 @ 0x7fe423869600] preset usage: -vpre &lt;speed&gt; -vpre &lt;profile&gt;
[libx264 @ 0x7fe423869600] speed presets are listed in x264 --help
[libx264 @ 0x7fe423869600] profile is optional; x264 defaults to high
</code></pre>

<p>I didn't understand what the above errors meant. I tried reinstalling ffmpeg to the latest version (1.2.2_0+gpl2) but my script still doesn't work. All the other codecs did not give any error. </p>

<p>I've even tried the file extensions of .mpg and .mkv with the above codecs. Sometimes I would get an error saying that the codec was not suitable for the file extension but when I didn't get error I would simply get the unreadable video file of a minuscule size. </p>

<p>Any help is much appreciated. </p>

<p>ps: I've already gone through the following SO questions which didn't solve my issue: </p>

<ul>
<li><a href=""https://stackoverflow.com/questions/16045654/using-opencv2-write-streaming-video-in-python"">using opencv2 write streaming video in python</a> </li>
<li><a href=""https://stackoverflow.com/questions/5426637/writing-video-with-opencv-python-mac"">Writing video with OpenCV + Python + Mac</a></li>
<li><a href=""https://stackoverflow.com/questions/11066689/create-an-avi-video-with-opencv-and-python-on-a-mac?rq=1"">Create an avi video with opencv and python on a mac</a></li>
<li><a href=""https://stackoverflow.com/questions/13268740/python-opencv-cant-write-a-video-avi-to-file?rq=1"">Python OpenCV, can&#39;t write a video (.avi) to file</a></li>
<li><a href=""https://stackoverflow.com/questions/1136989/creating-avi-files-in-opencv/1137034#1137034"">Creating AVI files in OpenCV</a></li>
<li><a href=""https://stackoverflow.com/questions/14756767/read-write-avi-video-on-mac-using-opencv?rq=1"">read/write avi video on MAC using openCV</a></li>
<li><a href=""https://stackoverflow.com/questions/10456727/python-opencv-2-4-writes-half-complete-png-video-frames"">Python OpenCV 2.4 writes half-complete PNG video frames</a></li>
</ul>
",2017-05-23 12:07:19,2014-05-30 17:22:09,Unable to write video using python and opencv2 on mac os x,<python><macos><opencv><video>,,,CC BY-SA 3.0,True,False,False,False,True
14926,18855200,2013-09-17 16:34:43,,"<p>I want to know if ffmpeg port from javacv supports audio sample rate change, and if so, I would need some guidelines for changing FFmpegFrameRecorder.java to support it.</p>
",,2013-11-29 19:08:47,How to modify FFmpegFrameRecorder.java in javacv to support audio sample rate change?,<android><audio><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
15145,22342732,2014-03-12 05:27:39,,"<p>I'm using <code>FFmpegFrameRecorder</code> for video broadcast.Problem is audio comes faster than video frame.I'm using following code but unable to produce complete video there is problem in audio video timestamp.</p>

<p><strong>Java Code:</strong></p>

<pre><code>import static com.googlecode.javacv.cpp.opencv_core.IPL_DEPTH_8U;

import java.io.IOException;
import java.nio.ShortBuffer;

import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.PowerManager;
import android.util.Log;
import android.view.KeyEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.LinearLayout;

import com.googlecode.javacv.FFmpegFrameRecorder;
import com.googlecode.javacv.cpp.opencv_core.IplImage;

public class MainActivity extends Activity implements OnClickListener {

    private final static String LOG_TAG = ""MainActivity"";

    private PowerManager.WakeLock mWakeLock;

    private String ffmpeg_link = """";

    private volatile FFmpegFrameRecorder recorder;
    boolean recording = false;
    long startTime = 0;

    private int sampleAudioRateInHz = 16000;
    private int imageWidth = 320;
    private int imageHeight = 240;
    private int frameRate = 24;

    private Thread audioThread;
    volatile boolean runAudioThread = true;
    private AudioRecord audioRecord;
    private AudioRecordRunnable audioRecordRunnable;

    private CameraView cameraView;
    private IplImage yuvIplimage = null;

    private Button recordButton;
    private LinearLayout mainLayout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        setContentView(R.layout.activity_main);

        initLayout();
        initRecorder();
    }

    @Override
    protected void onResume() {
        super.onResume();

        if (mWakeLock == null) {
            PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
            mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK,
                    LOG_TAG);
            mWakeLock.acquire();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();

        if (mWakeLock != null) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        recording = false;
    }

    private void initLayout() {

        mainLayout = (LinearLayout) this.findViewById(R.id.record_layout);

        recordButton = (Button) findViewById(R.id.recorder_control);
        recordButton.setText(""Start"");
        recordButton.setOnClickListener(this);

        cameraView = new CameraView(this);

        LinearLayout.LayoutParams layoutParam = new LinearLayout.LayoutParams(
                LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        mainLayout.addView(cameraView, layoutParam);
        Log.v(LOG_TAG, ""added cameraView to mainLayout"");
    }

    private void initRecorder() {
        Log.w(LOG_TAG, ""initRecorder"");

        if (yuvIplimage == null) {
            // Recreated after frame size is set in surface change method
            yuvIplimage = IplImage.create(imageWidth, imageHeight,
                    IPL_DEPTH_8U, 2);
            // yuvIplimage = IplImage.create(imageWidth, imageHeight,
            // IPL_DEPTH_32S, 2);

            Log.v(LOG_TAG, ""IplImage.create"");
        }

        recorder = new FFmpegFrameRecorder(ffmpeg_link, imageWidth,
                imageHeight, 1);
        Log.v(LOG_TAG, ""FFmpegFrameRecorder: "" + ffmpeg_link + "" imageWidth: ""
                + imageWidth + "" imageHeight "" + imageHeight);

        recorder.setFormat(""flv"");
        Log.v(LOG_TAG, ""recorder.setFormat(\""flv\"")"");

        recorder.setSampleRate(sampleAudioRateInHz);
        Log.v(LOG_TAG, ""recorder.setSampleRate(sampleAudioRateInHz)"");

        // re-set in the surface changed method as well
        recorder.setFrameRate(frameRate);
        Log.v(LOG_TAG, ""recorder.setFrameRate(frameRate)"");

        // Create audio recording thread
        audioRecordRunnable = new AudioRecordRunnable();
        audioThread = new Thread(audioRecordRunnable);
    }

    // Start the capture
    public void startRecording() {
        try {
            recorder.start();
            startTime = System.currentTimeMillis();
            recording = true;
            audioThread.start();
        } catch (FFmpegFrameRecorder.Exception e) {
            e.printStackTrace();
        }
    }

    public void stopRecording() {
        // This should stop the audio thread from running
        runAudioThread = false;

        if (recorder != null &amp;&amp; recording) {
            recording = false;
            Log.v(LOG_TAG,
                    ""Finishing recording, calling stop and release on recorder"");
            try {
                recorder.stop();
                recorder.release();
            } catch (FFmpegFrameRecorder.Exception e) {
                e.printStackTrace();
            }
            recorder = null;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // Quit when back button is pushed
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if (recording) {
                stopRecording();
            }
            finish();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public void onClick(View v) {
        if (!recording) {
            startRecording();
            Log.w(LOG_TAG, ""Start Button Pushed"");
            recordButton.setText(""Stop"");
        } else {
            stopRecording();
            Log.w(LOG_TAG, ""Stop Button Pushed"");
            recordButton.setText(""Start"");
        }
    }

    // ---------------------------------------------
    // audio thread, gets and encodes audio data
    // ---------------------------------------------
    class AudioRecordRunnable implements Runnable {

        @Override
        public void run() {
            // Set the thread priority
            android.os.Process
                    .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

            // Audio
            int bufferSize;
            short[] audioData;
            int bufferReadResult;

            bufferSize = AudioRecord.getMinBufferSize(sampleAudioRateInHz,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT);
            audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC,
                    sampleAudioRateInHz,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, bufferSize);

            audioData = new short[bufferSize];

            Log.d(LOG_TAG, ""audioRecord.startRecording()"");
            audioRecord.startRecording();

            // Audio Capture/Encoding Loop
            while (runAudioThread) {
                // Read from audioRecord
                bufferReadResult = audioRecord.read(audioData, 0,
                        audioData.length);
                if (bufferReadResult &gt; 0) {
                    // Log.v(LOG_TAG,""audioRecord bufferReadResult: "" +
                    // bufferReadResult);

                    // Changes in this variable may not be picked up despite it
                    // being ""volatile""
                    if (recording) {
                        try {
                            // Write to FFmpegFrameRecorder
                            recorder.record(ShortBuffer.wrap(audioData, 0,
                                    bufferReadResult));
                        } catch (FFmpegFrameRecorder.Exception e) {
                            Log.v(LOG_TAG, e.getMessage());
                            e.printStackTrace();
                        }
                    }
                }
            }
            Log.v(LOG_TAG, ""AudioThread Finished"");

            /* Capture/Encoding finished, release recorder */
            if (audioRecord != null) {
                audioRecord.stop();
                audioRecord.release();
                audioRecord = null;
                Log.v(LOG_TAG, ""audioRecord released"");
            }
        }
    }

    class CameraView extends SurfaceView implements SurfaceHolder.Callback,
            PreviewCallback {

        private boolean previewRunning = false;

        private SurfaceHolder holder;
        private Camera camera;

        private byte[] previewBuffer;

        long videoTimestamp = 0;

        Bitmap bitmap;
        Canvas canvas;

        public CameraView(Context _context) {
            super(_context);

            holder = this.getHolder();
            holder.addCallback(this);
            holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            camera = Camera.open();

            try {
                camera.setPreviewDisplay(holder);
                camera.setPreviewCallback(this);

                Camera.Parameters currentParams = camera.getParameters();
                Log.v(LOG_TAG,
                        ""Preview Framerate: ""
                                + currentParams.getPreviewFrameRate());
                Log.v(LOG_TAG,
                        ""Preview imageWidth: ""
                                + currentParams.getPreviewSize().width
                                + "" imageHeight: ""
                                + currentParams.getPreviewSize().height);

                // Use these values
                imageWidth = currentParams.getPreviewSize().width;
                imageHeight = currentParams.getPreviewSize().height;
                frameRate = currentParams.getPreviewFrameRate();

                bitmap = Bitmap.createBitmap(imageWidth, imageHeight,
                        Bitmap.Config.ALPHA_8);

                /*
                 * Log.v(LOG_TAG,""Creating previewBuffer size: "" + imageWidth *
                 * imageHeight *
                 * ImageFormat.getBitsPerPixel(currentParams.getPreviewFormat
                 * ())/8); previewBuffer = new byte[imageWidth * imageHeight *
                 * ImageFormat
                 * .getBitsPerPixel(currentParams.getPreviewFormat())/8];
                 * camera.addCallbackBuffer(previewBuffer);
                 * camera.setPreviewCallbackWithBuffer(this);
                 */

                camera.startPreview();
                previewRunning = true;
            } catch (IOException e) {
                Log.v(LOG_TAG, e.getMessage());
                e.printStackTrace();
            }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width,
                int height) {
            Log.v(LOG_TAG, ""Surface Changed: width "" + width + "" height: ""
                    + height);

            // We would do this if we want to reset the camera parameters
            /*
             * if (!recording) { if (previewRunning){ camera.stopPreview(); }
             * 
             * try { //Camera.Parameters cameraParameters =
             * camera.getParameters(); //p.setPreviewSize(imageWidth,
             * imageHeight); //p.setPreviewFrameRate(frameRate);
             * //camera.setParameters(cameraParameters);
             * 
             * camera.setPreviewDisplay(holder); camera.startPreview();
             * previewRunning = true; } catch (IOException e) {
             * Log.e(LOG_TAG,e.getMessage()); e.printStackTrace(); } }
             */

            // Get the current parameters
            Camera.Parameters currentParams = camera.getParameters();
            Log.v(LOG_TAG,
                    ""Preview Framerate: "" + currentParams.getPreviewFrameRate());
            Log.v(LOG_TAG,
                    ""Preview imageWidth: ""
                            + currentParams.getPreviewSize().width
                            + "" imageHeight: ""
                            + currentParams.getPreviewSize().height);

            // Use these values
            imageWidth = currentParams.getPreviewSize().width;
            imageHeight = currentParams.getPreviewSize().height;
            frameRate = currentParams.getPreviewFrameRate();

            // Create the yuvIplimage if needed
            yuvIplimage = IplImage.create(imageWidth, imageHeight,
                    IPL_DEPTH_8U, 1);
            // yuvIplimage = IplImage.create(imageWidth, imageHeight,
            // IPL_DEPTH_32S, 2);
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            try {
                camera.setPreviewCallback(null);

                previewRunning = false;
                camera.release();

            } catch (RuntimeException e) {
                Log.v(LOG_TAG, e.getMessage());
                e.printStackTrace();
            }
        }

        @Override
        public void onPreviewFrame(byte[] data, Camera camera) {

            if (yuvIplimage != null &amp;&amp; recording) {
                videoTimestamp = 1000 * (System.currentTimeMillis() - startTime);

                // Put the camera preview frame right into the yuvIplimage
                // object
                System.out.println(""value of data============="" + data);
                yuvIplimage.getByteBuffer().put(data);

                // FAQ about IplImage:
                // - For custom raw processing of data, getByteBuffer() returns
                // an NIO direct
                // buffer wrapped around the memory pointed by imageData, and
                // under Android we can
                // also use that Buffer with Bitmap.copyPixelsFromBuffer() and
                // copyPixelsToBuffer().
                // - To get a BufferedImage from an IplImage, we may call
                // getBufferedImage().
                // - The createFrom() factory method can construct an IplImage
                // from a BufferedImage.
                // - There are also a few copy*() methods for
                // BufferedImage&lt;-&gt;IplImage data transfers.

                // Let's try it..
                // This works but only on transparency
                // Need to find the right Bitmap and IplImage matching types

                /*
                 * bitmap.copyPixelsFromBuffer(yuvIplimage.getByteBuffer());
                 * //bitmap.setPixel(10,10,Color.MAGENTA);
                 * 
                 * canvas = new Canvas(bitmap); Paint paint = new Paint();
                 * paint.setColor(Color.GREEN); float leftx = 20; float topy =
                 * 20; float rightx = 50; float bottomy = 100; RectF rectangle =
                 * new RectF(leftx,topy,rightx,bottomy);
                 * canvas.drawRect(rectangle, paint);
                 * 
                 * bitmap.copyPixelsToBuffer(yuvIplimage.getByteBuffer());
                 */
                // Log.v(LOG_TAG,""Writing Frame"");

                try {

                    // Get the correct time
                    recorder.setTimestamp(videoTimestamp);

                    // Record the image into FFmpegFrameRecorder
                    recorder.record(yuvIplimage);

                } catch (FFmpegFrameRecorder.Exception e) {
                    Log.v(LOG_TAG, e.getMessage());
                    e.printStackTrace();
                }
            }
        }
    }
}
</code></pre>

<p><strong>Manifest</strong></p>

<pre><code>&lt;manifest xmlns:android=""http://schemas.android.com/apk/res/android""
    package=""com.example.javacv.stream.test2""
    android:versionCode=""1""
    android:versionName=""1.0"" &gt;

    &lt;uses-sdk
        android:minSdkVersion=""8""
        android:targetSdkVersion=""15"" /&gt;

    &lt;uses-permission android:name=""android.permission.INTERNET"" /&gt;
    &lt;uses-permission android:name=""android.permission.CAMERA"" /&gt;
    &lt;uses-permission android:name=""android.permission.WAKE_LOCK"" /&gt;
    &lt;uses-permission android:name=""android.permission.RECORD_AUDIO"" /&gt;
    &lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE"" /&gt;

    &lt;application
        android:icon=""@drawable/ic_launcher""
        android:label=""@string/app_name""
        android:theme=""@style/AppTheme"" &gt;
        &lt;activity
            android:name=""com.example.javacv.stream.test2.MainActivity""
            android:label=""@string/title_activity_main"" &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=""android.intent.action.MAIN"" /&gt;

                &lt;category android:name=""android.intent.category.LAUNCHER"" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;
</code></pre>
",2014-07-18 12:50:07,2014-07-18 12:50:07,FFmpegFrameRecorder videoBroadcasting audio comes faster than video frame in 3G Network,<android><javacv><video-recording>,,,CC BY-SA 3.0,True,False,False,False,True
15224,16999650,2013-06-08 12:44:40,,"<p>Build opencv static libs with:</p>

<pre><code>BUILD_SHARED_LIBS = OFF
build_opencv_core = ON
build_opencv_imgproc = ON
build_opencv_highgui = ON

WITH_FFMPEG = ON
WITH_PNG = ON
WITH_JASPER = ON
WITH_TIFF = ON
WITH_OPENEXR = ON
</code></pre>

<p>and other OFF</p>

<p>Libraries build is good</p>

<p>And now, I create new Qt project</p>

<pre><code>INCLUDEPATH += -I/usr/local/include
LIBS += -L/usr/local/lib -lopencv_core -lopencv_imgproc -lopencv_highgui
</code></pre>

<p>In main.cpp</p>

<pre><code>#include &lt;QCoreApplication&gt;
#include ""opencv2/core/core.hpp""
#include ""opencv2/highgui/highgui.hpp""

int main(int argc,char** argv)
{
QCoreApplication a(argc,argv);
CvCapture* capture = cvCaptureFromCam(0);

return a.exec();
}
</code></pre>

<p>But when I build my project I get next error:</p>

<pre><code>Undefined symbols for architecture i386:
""_cvCreateCameraCapture"", referenced from:
_main in main.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
Undefined symbols for architecture x86_64:
""_cvCreateCameraCapture"", referenced from:
_main in main.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
lipo: can't open input file: /var/folders/ff/wbcdn98j5nx617_p5vpzq1cm0000gn/T//ccqFaXgY.out (No such file or directory)
make: *** [TestCamera] Error 1
</code></pre>

<p>-</p>

<pre><code>lipo -info /usr/local/lib/libopencv_highgui.a
Architectures in the fat file: /usr/local/lib/libopencv_highgui.a are: i386 x86_64
</code></pre>
",,2013-06-10 12:39:46,Building OpenCV Mac OS X 10.8 (static),<macos><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
15367,24620663,2014-07-07 22:03:08,,"<p>I am trying to use OpenCV (python bindings) to connect to a UDP multicast and recover individual received frames for post-processing. </p>

<p>I can connect to my multicast via VLC, and VLC displays the broadcast with no issues at all. VLC reports that the codec it uses for decoding is H264 - MPEG-4 AVC (part 10).</p>

<p>When I try to decode using OpenCV, I do see my video stream, but many frames appear fragmented. The frames appear as if the last line of pixels just got repeated to fill in the rest of the image (sometimes 75% or more of the whole image). OpenCV reports decoding errors (error while decoding MB ...., bytestream ).</p>

<p>Is there any way to force OpenCV to use whatever codec VLC is using? I tried to specify the specific codec to use in my code for OpenCV but it seems to have no effect. </p>

<p>The code I am using is below:</p>

<pre><code>import numpy as np
import cv2
from cv2 import cv

cap = cv2.VideoCapture()
cap.set(cv.CV_CAP_PROP_FOURCC, cv.CV_FOURCC('A','V','C','1')) 
cwi=cap.open(r'myurlandport')

counter = 0

while(cap.isOpened()):

    ret, frame = cap.read()


    counter += 1

    if counter % 30 == 0:
        cv2.imshow('frame', frame)
        if cv2.waitKey(1) &amp; 0xFF == ord('q'):
            break

cap.release()
cv2.destroyAllWindows()
</code></pre>
",,2015-04-15 08:34:43,Can OpenCV decode H264 - MPEG-4 AVC (part 10),<python><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
15402,17015079,2013-06-09 23:11:33,,"<p>I'm looking for some hints.  I've got my Pi running OpenCV, but I'm about to take on a project which will need several IP cameras, all piping video to OpenCV.  I'm curious if it's possible to use the Pi+webcam in place of an IP camera?</p>

<p>I was attempting this by using Gstreamer on the Pi to pipe the video to a desktop PC, where I would use Python and OpenCV to process the images, then ship back answers to the Pi.  The Pi is connected to actuators, so the described setup would save me the purchase of a few ip cams.  </p>

<p>I've setup ffmpeg to capture the video and stream it, I just can't seem to find an appropriate Gstreamer pipe to get it pulled up in OpenCV on the Desktop.</p>

<p>I hope this is clear.</p>
",,2018-06-19 06:12:24,Piping video from Raspberry Pi to Desktop running OpenCV,<opencv><gstreamer><raspberry-pi>,,,CC BY-SA 3.0,True,False,False,False,True
15415,21236125,2014-01-20 14:08:34,,"<p>Here the output of the <code>ffmpeg</code> command:</p>

<pre><code>ffmpeg version git-2014-01-20-4014b40 Copyright (c) 2000-2014 the FFmpeg developers
built on Jan 20 2014 14:18:13 with gcc 4.8 (Ubuntu/Linaro 4.8.1-10ubuntu9)
configuration: --extra-libs=-ldl --enable-gpl --enable-libass --enable-libfdk-aac --    enable-libmp3lame --enable-libopus --enable-libtheora --enable-libvorbis --enable-libvpx --  enable-libx264 --enable-nonfree --enable-x11grab
libavutil      52. 63.100 / 52. 63.100
libavcodec     55. 48.101 / 55. 48.101
libavformat    55. 25.100 / 55. 25.100
libavdevice    55.  5.102 / 55.  5.102
libavfilter     4.  1.100 /  4.  1.100
libswscale      2.  5.101 /  2.  5.101
libswresample   0. 17.104 /  0. 17.104
libpostproc    52.  3.100 / 52.  3.100
Hyper fast Audio and Video encoder
usage: ffmpeg [options] [[infile options] -i infile]... {[outfile options] outfile}...
</code></pre>

<p>When running CmakeLists.txt for Opencv 2.4.8 installation:</p>

<pre><code>cmake -DCMAKE_BUILD_TYPE=RELEASE -DCMAKE_INSTALL_PREFIX=/usr/local -DBUILD_NEW_PYTHON_SUPPORT=ON -DWITH_TBB=ON -DWITH_V4L=ON -DWITH_QT=ON -DWITH_OPENGL=ON -DWITH_EIGEN=ON -DWITH_OPENEXR=ON ..
</code></pre>

<p>I get:</p>

<pre><code>--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 53.35.0)
--       format:                    YES (ver 53.21.1)
--       util:                      YES (ver 51.22.1)
--       swscale:                   YES (ver 2.1.0)
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)
--       app:                       YES (ver 0.10.36)
--       video:                     YES (ver 0.10.36)
</code></pre>

<p><strong>My question</strong>: Why opencv didn't link with the lastest libavutil, libavcodec, etc ...</p>
",2018-12-15 05:12:21,2018-12-15 05:12:21,opencv cmake didn't find latest ffmpeg libs,<opencv><linker><ffmpeg><cmake>,,,CC BY-SA 4.0,True,False,False,False,True
15440,17967278,2013-07-31 09:57:48,,"<p>I am looking for WIN32 program to copy part of the large 1920x1080px 4:2:0 .YUV file (cca. 43GB) into smaller .YUV files. All of the programs I have used, i.e. YUV players, can only copy/save 1 frame at the time. What is the easiest/appropriate method to cut YUV raw data to smaller YUV videos(images)? SOmething similar to ffmpeg command:</p>

<pre><code>ffmpeg -ss [start_seconds] -t [duration_seconds] -i [input_file] [outputfile]
</code></pre>
",2018-04-12 18:28:34,2018-05-04 12:21:03,Extract some YUV frames from large YUV file,<image-processing><video-capture><video-processing><yuv>,,,CC BY-SA 3.0,False,False,False,False,True
15489,18907933,2013-09-20 02:25:41,,"<p>I am using opencv2.4.6.1 on Ubuntu 12.04 LTS. I am new to opencv and have been trying to understand the sample programs in the opencv docs. I am trying to work on a project which takes a picture from a USB webcam (Kinamax Night Vision Camera) and do some image processing on it. I came across a sample code that is shown below:</p>

<pre><code>#include ""cv.h"" 
#include ""highgui.h"" 
#include &lt;stdio.h&gt;  
// A Simple Camera Capture Framework 
int main() 
{
CvCapture* capture = cvCaptureFromCAM( CV_CAP_ANY );
if ( !capture ) {
 fprintf( stderr, ""ERROR: capture is NULL \n"" );
 getchar();
 return -1;
}
// Create a window in which the captured images will be presented
cvNamedWindow( ""mywindow"", CV_WINDOW_AUTOSIZE );
// Show the image captured from the camera in the window and repeat
while ( 1 ) {
 // Get one frame
 IplImage* frame = cvQueryFrame( capture );
 if ( !frame ) {
   fprintf( stderr, ""ERROR: frame is null...\n"" );
   getchar();
   break;
 }
 cvShowImage( ""mywindow"", frame );
 // Do not release the frame!
 //If ESC key pressed, Key=0x10001B under OpenCV 0.9.7(linux version),
 //remove higher bits using AND operator
 if ( (cvWaitKey(10) &amp; 255) == 27 ) break;
}
// Release the capture device housekeeping
cvReleaseCapture( &amp;capture );
cvDestroyWindow( ""mywindow"" );
return 0;
}
</code></pre>

<p>On compiling using:</p>

<pre><code>g++ trycam.c -o trycam `--cflags --libs opencv`
</code></pre>

<p>It gives no errors.
When I try to run it using : ./trycam Nothing shows up! Literally Nothing.</p>

<p>On searching google and some other posts in the stackoverflow community, I tried updating the libraries and install other dependencies like ffmpeg,GTK, Gstreamer,etc. I understand that the webcam I have connected via USB is not supported as per the list of webcams supported by linux opencv in the link <a href=""http://opencv.willowgarage.com/wiki/Welcome/OS"" rel=""nofollow"">here</a>. Even my default webcam that is in my HP Pavilion dv6000 is not opening. </p>

<p>Is there a way I could get around this? Kindly help me out. </p>
",,2013-09-20 02:25:41,How to open webcam in opencv2.4.6.1 on ubuntu12.04?,<c++><opencv><ffmpeg><ubuntu-12.04><webcam>,,,CC BY-SA 3.0,True,False,False,False,True
15540,20082242,2013-11-19 21:18:07,,"<p>I have the problem which is described <a href=""http://answers.opencv.org/question/14257/peculiarity-with-videowriter-codec-selection/"" rel=""nofollow"">here</a>.</p>

<p>The extension i have already set correct.
What i have done regarding the suggestet Points on the link:</p>

<p>Point 1: I have looked in  my cmake file and ffmpeg, libavutil etc is all chosen.</p>

<p>Point 2: I thought all files are installed automatically in usr/src if you don't change it, isn't it?</p>

<p>Point 3: It is a new installation. But btw. how can i deinstall the lib?</p>

<p>Point 4: Shouldn't be the problem.</p>

<p>Thx in advance</p>

<p>Further infos:
Opensuse 12.3
Opencv-2.4.3
Qt4 Environment</p>

<p>C++ Commands used last:</p>

<pre><code>VW.open(vsm, CV_FOURCC('F','L','V','1'), 25, vidImg.size(),!(vidImg.channels() == 1));
</code></pre>

<p>Filename in vsm: /home/Ingeborg/DA/videos/IMG-2013-11-19-22-3-5.avi</p>
",,2013-11-21 18:26:44,Crash with opencv video intitialisation,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
15544,21247402,2014-01-21 01:19:59,,"<p>I have a very simple program for Emgu CV calling:</p>

<pre><code>        Capture mMovie = new Capture(""movie.mp4"");
        Image&lt;Bgr, byte&gt; img = mMovie.QueryFrame();
</code></pre>

<p>The problem is, that I get an exception for MP4 loading.</p>

<p><code>'System.NullPointerReference' occurs in Emgu.CV.dll</code>, and the application is unable to create <code>capture</code> from movie.mp4 file.</p>

<p>I've read that adding file - <code>opencv_ffmpeg242.dll</code> - into x86 (or x64) folder helps, I've done so and I still get an error. Anyone has experience with this? Why is this happening, when I have the opencv_ffmpeg library there?</p>

<p>Note that video was created using <code>ffmpeg</code> library and I'm able to play it in different players that use <code>ffmpeg</code>.</p>
",2014-01-21 05:27:20,2014-02-24 20:16:54,EmguCV and MP4 files,<c#><opencv><video><ffmpeg><emgucv>,,,CC BY-SA 3.0,True,False,True,False,True
15604,23529620,2014-05-07 22:30:39,,"<hr>

<p>A bit of context; this program was built originally to work with USB cameras - but because of the setup between where the cameras needs to be and where the computer is it makes more sense to switch to cameras run over a network. Now I'm trying to convert the program to accomplish this, but my efforts thus far have met with poor results. I've also asked this same question over on the <a href=""http://answers.opencv.org/question/33170/opencv-and-network-cameras/"" rel=""nofollow noreferrer"">OpenCV forums</a>. Help me spy on my neighbors! (This is with their permission, of course!) :D</p>

<hr>

<p>I'm using:</p>

<ul>
<li>OpenCV v2.4.6.0</li>
<li>C++</li>
<li>D-Link Cloud Camera 7100 (Installer is DCS-7010L, according to the instructions.)</li>
</ul>

<hr>

<p>I am trying to access the DLink camera's video feed through OpenCV.</p>

<p>I can access the camera through it's IP address with a browser without any issues. Unfourtunately; my program is less cooperative. When attempting to access the camera the program gives the OpenCV-generated error:</p>

<blockquote>
  <p>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:529)</p>
</blockquote>

<p>This error occurs with just about everything I try that doesn't somehow generate <em>more</em> problems.</p>

<p>For reference - the code in OpenCV's cap_ffmpeg_impl.hpp around line 529 is as follows:</p>

<pre><code>522    bool CvCapture_FFMPEG::open( const char* _filename )
523    {
524        unsigned i;
525        bool valid = false;
526
527        close();
528
529    #if LIBAVFORMAT_BUILD &gt;= CALC_FFMPEG_VERSION(52, 111, 0)
530        int err = avformat_open_input(&amp;ic, _filename, NULL, NULL);
531    #else
532        int err = av_open_input_file(&amp;ic, _filename, NULL, 0, NULL);
533    #endif
...
616    }
</code></pre>

<p>...for which I have no idea what I'm looking at. It seems to be looking for the ffmpeg version - but I've already installed the latest ffmpeg on that computer, so that shouldn't be the issue.</p>

<p>This is the edited down version I tried to use as per Sebastian Schmitz's recommendation:</p>

<pre><code> 1    #include &lt;fstream&gt;                            // File input/output
 2    #include &lt;iostream&gt;                           // cout / cin / etc
 3    #include &lt;windows.h&gt;                      // Windows API stuff
 4    #include &lt;stdio.h&gt;                            // More input/output stuff
 5    #include &lt;string&gt;                         // ""Strings"" of characters strung together to form words and stuff
 6    #include &lt;cstring&gt;                            // ""Strings"" of characters strung together to form words and stuff
 7    #include &lt;streambuf&gt;                      // For buffering load files
 8    #include &lt;array&gt;                          // Functions for working with arrays
 9    #include &lt;opencv2/imgproc/imgproc.hpp&gt;        // Image Processor
10    #include &lt;opencv2/core/core.hpp&gt;          // Basic OpenCV structures (cv::Mat, Scalar)
11    #include &lt;opencv2/highgui/highgui.hpp&gt;        // OpenCV window I/O
12    #include ""opencv2/calib3d/calib3d.hpp""
13    #include ""opencv2/features2d/features2d.hpp""
14    #include ""opencv2/opencv.hpp""
15    #include ""resource.h""                     // Included for linking the .rc file
16    #include &lt;conio.h&gt;                            // For sleep()
17    #include &lt;chrono&gt;                         // To get start-time of program.
18    #include &lt;algorithm&gt;                      // For looking at whole sets.
19
20    #ifdef __BORLANDC__
21      #pragma argsused
22    #endif
23
24    using namespace std;                      // Standard operations. Needed for most basic functions.
25    using namespace std::chrono;              // Chrono operations. Needed getting starting time of program.
26    using namespace cv;                           // OpenCV operations. Needed for most OpenCV functions.
27
28    string videoFeedAddress = """";
29    VideoCapture videoFeedIP = NULL;
30    Mat clickPointStorage; //Artifact from original program.
31
32    void displayCameraViewTest()
33    {
34      VideoCapture cv_cap_IP;
35      Mat color_img_IP;
36      int capture;
37      IplImage* color_img;
38      cv_cap_IP.open(videoFeedAddress);
39      Sleep(100);
40      if(!cv_cap_IP.isOpened())
41      {
42          cout &lt;&lt; ""Video Error: Video input will not work.\n"";
43          cvDestroyWindow(""Camera View"");
44          return;
45      }
46      clickPointStorage.create(color_img_IP.rows, color_img_IP.cols, CV_8UC3);
47      clickPointStorage.setTo(Scalar(0, 0, 0));
48      cvNamedWindow(""Camera View"", 0); // create window
49      IplImage* IplClickPointStorage = new IplImage(clickPointStorage);
50      IplImage* Ipl_IP_Img;
51      
52      for(;;)
53      {
54          cv_cap_IP.read(color_img_IP);
55          IplClickPointStorage = new IplImage(clickPointStorage);
56          Ipl_IP_Img = new IplImage(color_img_IP);
57          cvAdd(Ipl_IP_Img, IplClickPointStorage, color_img);
58          cvShowImage(""Camera View"", color_img); // show frame
59          capture = cvWaitKey(10); // wait 10 ms or for key stroke
60          if(capture == 27 || capture == 13 || capture == 32){break;} // if ESC, Return, or space; close window.
61      }
62      cv_cap_IP.release();
63      delete Ipl_IP_Img;
64      delete IplClickPointStorage;
65      cvDestroyWindow(""Camera View"");
66      return;
67    }
68    
69    int main()
70    {
71      while(1)
72      {
73          cout &lt;&lt; ""Please Enter Video-Feed Address: "";
74          cin &gt;&gt; videoFeedAddress;
75          if(videoFeedAddress == ""exit""){return 0;}
76          cout &lt;&lt; ""\nvideoFeedAddress: "" &lt;&lt; videoFeedAddress &lt;&lt; endl;
77          displayCameraViewTest();
78          if(cvWaitKey(10) == 27){return 0;}
79      }
80      return 0;
81    }
</code></pre>

<p>Using added 'cout's I was able to narrow it down to line 38: ""cv_cap_IP.open(videoFeedAddress);""</p>

<p>No value I enter for the videoFeedAddress variable seems to get a different result. I found <a href=""http://www.ispyconnect.com/man.aspx?n=dlink"" rel=""nofollow noreferrer"">THIS</a> site that lists a number of possible addresses to connect to it. Since there exists no 7100 anywhere in the list &amp; considering that the install is labeled ""DCS-7010L"" I used the addresses found next to the DCS-7010L listings. When trying to access the camera most of them can be reached through the browser, confirming that they reach the camera - but they don't seem to affect the outcome when I use them in the videoFeedAddress variable.</p>

<p>I've tried many of them both with and without username:password, the port number (554), and variations on ?.mjpg (the format) at the end.</p>

<p>I searched around and came across a number of different ""possible"" answers - but none of them seem to work for me. Some of them did give me the idea for including the above username:password, etc stuff, but it doesn't seem to be making a difference. Of course, the number of possible combinations is certainly rather large- so I certainly have not tried all of them (more direction here would be appreciated). Here are some of the links I found:</p>

<ol>
<li><a href=""https://stackoverflow.com/questions/16455345/ip-camera-with-opencv-error-ffmpeg"">This</a> is one of the first configurations my code was in. No dice.</li>
<li><a href=""https://stackoverflow.com/questions/8246710/opencv-ffmpeg-error"">This</a> one is talking about files - not cameras. It also mentions codecs - but I wouldn't be able to watch it in a web browser if that were the problem, right? (Correct me if I'm wrong here...)</li>
<li><a href=""https://stackoverflow.com/questions/21773850/error-opening-file-home-vaibhav-opencv-modules-highgui-src-cap-ffmpeg-impl-hpp"">This</a> one has the wrong error code/points to the wrong line of code!</li>
<li><a href=""http://answers.opencv.org/question/133/how-do-i-access-an-ip-camera/"" rel=""nofollow noreferrer"">This</a> one mentions compiling OpenCV with ffmpeg support - but I believe 2.4.6.0 already comes with that all set and ready! Otherwise it's not that different from what I've already tried.</li>
<li>Now <a href=""https://stackoverflow.com/questions/19834202/cant-open-http-stream-error-opening-file-cap-ffmpeg-impl-hpp529"">THIS</a> one appears to be very similar to what I have, but the only proposed solution doesn't really help as I had already located a list of connections. I do not believe this is a duplicate, because as per <a href=""https://meta.stackoverflow.com/questions/253924/what-to-do-when-the-question-you-want-to-ask-is-a-duplicate"">THIS</a> meta discussion I had a lot more information and so didn't feel comfortable taking over someone else's question - especially if I end up needing to add <em>even more</em> information later.</li>
</ol>

<p>Thank you for reading this far. I realize that I am asking a somewhat specific question - although I would appreciate any advice you can think of regarding OpenCV &amp; network cameras or even related topics. </p>

<hr>

<blockquote>
  <p><strong><em>TLDR:</em></strong> Network Camera and OpenCV are not cooperating. I'm unsure if
  it's the address I'm using to direct the program to the camera or the
  command I'm using - but no adjustment I make seems to improve the
  result beyond what I've already done! Now my neighbors will go unwatched!</p>
</blockquote>
",2017-05-23 11:54:02,2014-05-16 15:26:53,OpenCV and Network Cameras -or- How to spy on the neighbors?,<c++><opencv><camera><ffmpeg><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
15622,24640460,2014-07-08 19:43:15,,"<p>I am using a Logitech C920 webcam with the beaglebone black running debian. I have successfully written an OpenCV python script that allows me get video from the camera and track objects. Unfortunately, the resolution, FPS, and overall video quality are poor using this method. I have found the proper code that allows me to utilize the webcam's H264 feature outside of OpenCV.</p>

<p>I've been trying to figure out how to pipe the output from ffmpeg INTO openCV so that I can utilize the camera's H264 capabilities as my video input for my OpenCV script. My commands look like this:</p>

<blockquote>
  <p>./capture -F -o -c0|avconv -re -i - -vcodec copy -f  rtp rtp://192.168.7.1:1234/|python camera.py</p>
</blockquote>

<p>The first part of the pipe is using the linux v4l2 program that allows me to utilize my camera's H264 capabilities. The output from that is then fed to ffmpeg and then streamed to RTP. I want to retrieve the RTP stream in my OpenCV script but I haven't had success in getting it to work. Would I initialize something like the following in my script:</p>

<blockquote>
  <p>capture = VideoCapture(""rtp://192.168.7.1:1234/"")</p>
</blockquote>

<p>Please let me know if I am even going about this the right way. Is there a way to capture the stream directly from ffmpeg instead of streaming to RTP? Any suggestions are greatly appreciated. Thank you!</p>
",,2014-07-08 19:43:15,Pipe streaming video from FFMPEG into OpenCV,<python><opencv><video><ffmpeg><rtp>,,,CC BY-SA 3.0,True,False,False,False,True
15701,20096307,2013-11-20 12:42:34,,"<p>For creating video from sequence of images in android I used javacv 0.6 library, but I meet problem:
It normally works on htc Sensation(Android 4.0.1, Processor type armv7) and htc Desire(Android 2.3.3, Processor type arm7) phones, but it doesn't work on htc Wildfire
(Android 2.3.5,Processor type armv6) phone particularly it fails in this part of code</p>

<pre><code>FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(videoFilePath,       
TalkingPhotoConstants.VIDEO_FRAME_WIDTH,TalkingPhotoConstants.VIDEO_FRAME_HEIGHT);
</code></pre>

<p>in the attached code.</p>

<pre><code>public class MovieCreator extends AsyncTask&lt;String, Void, Boolean&gt; {

private opencv_core.IplImage[] iplimage;
private String audioFilePath;


private ProgressDialog progressDialog;
private Context context;
private List&lt;TalkFrame&gt; frames;

public MovieCreator(Context context, opencv_core.IplImage[] images, String audioFilePath,           
List&lt;TalkFrame&gt; frames) {
    this.context = context;
    this.iplimage = images;
    this.audioFilePath = audioFilePath;
    this.frames = frames;

}

private String createMovie() {

    String videoName = TalkingPhotoConstants.TMP_VIDEO_NAME;
    String path = TalkingPhotoConstants.RESOURCES_TMP_FOLDER;
    String videoFilePath = path + videoName;
    String finalVideoName = TalkingPhotoConstants.FINAL_VIDEO_NAME + 
    System.currentTimeMillis() + "".mp4"";
    String finalVideoPath = TalkingPhotoConstants.RESOURCES_FOLDER + finalVideoName;

    try {

        FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(videoFilePath, 
        TalkingPhotoConstants.VIDEO_FRAME_WIDTH,TalkingPhotoConstants.VIDEO_FRAME_HEIGHT);


        //int frameCount = iplimage.length;
        int frameCount = frames.size();
        recorder.setAudioCodec(AV_CODEC_ID_AMR_NB);
        recorder.setVideoCodec(AV_CODEC_ID_MPEG4);

        recorder.setVideoBitrate(120000);
        recorder.setFrameRate(TalkingPhotoConstants.VIDEO_FRAME_RATE);

        recorder.setPixelFormat(AV_PIX_FMT_YUV420P);
        recorder.setFormat(""mp4"");

        recorder.start();


        for (int i = 0; i &lt; frameCount; i++) {
            TalkFrame currentFrame = frames.get(i);
            long duration = currentFrame.getDuration();
            opencv_core.IplImage iplImage = cvLoadImage(currentFrame.getImageName());

            for (int j = 0; j &lt; TalkingPhotoConstants.VIDEO_FRAME_RATE * duration; j++) {
                recorder.record(iplImage);

            }

        }

        recorder.stop();

        mergeAudioAndVideo(videoFilePath, audioFilePath, finalVideoPath);

    } catch (Exception e) {
        Log.e(""problem"", ""problem"", e);
        finalVideoName = """";
    }
    return finalVideoName;
}

private boolean mergeAudioAndVideo(String videoPath, String audioPath, String outPut)  
throws Exception {
    boolean isCreated = true;
    File file = new File(videoPath);
    if (!file.exists()) {
        return false;
    }


    FrameGrabber videoGrabber = new FFmpegFrameGrabber(videoPath);
    FrameGrabber audioGrabber = new FFmpegFrameGrabber(audioPath);

    videoGrabber.start();
    audioGrabber.start();
    FrameRecorder recorder = new FFmpegFrameRecorder(outPut,
            videoGrabber.getImageWidth(), videoGrabber.getImageHeight(),
            audioGrabber.getAudioChannels());


    recorder.setFrameRate(videoGrabber.getFrameRate());
    recorder.start();
    Frame videoFrame = null, audioFrame = null;
    while ((audioFrame = audioGrabber.grabFrame()) != null) {
        videoFrame = videoGrabber.grabFrame();
        if (videoFrame != null) {
            recorder.record(videoFrame);
        }
        recorder.record(audioFrame);

    }
    recorder.stop();
    videoGrabber.stop();
    audioGrabber.stop();
    return isCreated;
}

@Override
protected Boolean doInBackground(String... params) {
    String fileName = createMovie();
    boolean result = fileName.isEmpty();
    if (!result) {
        VideoDAO videoDAO = new VideoDAO(context);
        videoDAO.open();
        videoDAO.createVideo(fileName);
        videoDAO.close();
    }
    //Utils.cleanTmpDir();
    return result;
}

@Override
protected void onPreExecute() {
    progressDialog = new ProgressDialog(context);
    progressDialog.setTitle(""Processing..."");
    progressDialog.setMessage(""Please wait."");
    progressDialog.setCancelable(false);
    progressDialog.setIndeterminate(true);
    progressDialog.show();
}

@Override
protected void onPostExecute(Boolean result) {
    if (progressDialog != null) {
        progressDialog.dismiss();

    }
}
</code></pre>

<p>}</p>

<p>There is no exception.</p>

<p>1.how can i fix it?</p>

<p>2.I have a version that problem is connected with device's processor type.</p>

<p>If I'm right how can I solve it?</p>

<p>Thanks in advance.</p>
",2014-06-09 12:16:45,2016-01-07 17:32:43,creating video from sequence of images javacv,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
15916,23556382,2014-05-09 04:02:31,,"<p>I want to be able to create an application that can read and publish an RTMP stream.</p>

<p>Using OpenCV i could read rtp due to it's ffmpeg backend.</p>

<p><a href=""https://stackoverflow.com/questions/7574554/stream-video-from-ffmpeg-and-capture-with-opencv"">Stream video from ffmpeg and capture with OpenCV</a></p>

<p>C++ RTMP is another possibility, but this is an RTMP server so it mainly requests and sends files. Although open source, i am unsure how to build or integrate this into a Visual Studio application in such a way as to make the function calls available to my project.</p>

<p>OTher sources indicate that OpenCV's RTSP isn't great.</p>

<p><a href=""http://workingwithcomputervision.blogspot.co.nz/2012/06/issues-with-opencv-and-rtsp.html"" rel=""nofollow noreferrer"">http://workingwithcomputervision.blogspot.co.nz/2012/06/issues-with-opencv-and-rtsp.html</a></p>

<p>How can you run a streaming server, such as RTMP C++ and get the raw data out. OpenCV can encode and decode image data for streaming, but how can you link the two?</p>

<p>Could a C++ application pipe a stream together? How could i interface with that stream to send it more images? Also, for receiving images?</p>

<p>Regards,</p>
",2017-05-23 12:31:05,2014-05-28 21:38:13,OpenCV and RTMP,<c++><opencv><ffmpeg><rtmp>,,,CC BY-SA 3.0,True,False,False,False,True
15956,17063695,2013-06-12 10:55:06,,"<p>I have a desktop and laptop running OpenCV 2.4.3 on x64 architectures one on Win 7 and the other on Win 8 both running VS 2012 x64. I've compiled OpenCV on both computers. The desktop running Win 7 displays a video output perfectly while my laptop running the same code Win 8 shows just a grey screen. The rest of the computer vision functions works fine on the laptop. I have to note here that I've installed all video libraries (FFMpeg etc) on both computers quite similarly. Is there something different to be done on my Win 8 machine to show videos?</p>

<p>I tested out the basic video test for PSNR in the samples file and even that fails!</p>
",,2013-06-14 01:31:50,OpenCV 2.4.3 displays video as grey window,<opencv><video><visual-studio-2012>,,,CC BY-SA 3.0,True,False,False,False,True
15960,20117901,2013-11-21 10:08:36,,"<p>I am trying to capture a video  from a file on BeagleBoard-xm with ubuntu-12.04 with Kernel version 3.6.8-x4, but when run the program which is exactly same &amp; working fine onto my host machine (pc) which is also ubuntu-12.04 in code i am trying to catch orange colour (spark  is taking place in a machine &amp; trying to capture it in a frame).
Code is given Below:</p>

<pre><code>#include&lt;cv.h&gt;
#include&lt;opencv2/highgui/highgui.hpp&gt;

//Input-Output
#include&lt;stdio.h&gt;

#include&lt;iostream&gt;

//Blob Library Headers
#include&lt;cvblob.h&gt; 
//Definitions
#define h 240
#define w 320
//NameSpaces
using namespace cv;
using namespace cvb;
using namespace std;


int main()
{
 int count=1;
 //Structure to get feed from CAM
 char *buffer;
 buffer=(char *) malloc(100);
  //CvCapture* capture=cvCreateCameraCapture(0);
 //CvCapture* capture = cvCaptureFromFile(""/home/ubuntu/movie.avi""); //recording of spark
 CvCapture* capture = cvCaptureFromFile(""/home/ubuntu/20130521053652.avi""); //recording of spark

  //capture image from video

  //Mat fra, edges;
  //capture &gt;&gt; fra;

  //Structure to hold blobs

   CvBlobs blobs;

   //Windows

   //Image Variables
   IplImage *frame=cvCreateImage(cvSize(w,h),8,3);   //Original Image
      IplImage *hsvframe=cvCreateImage(cvSize(w,h),8,3);//Image in HSV color space
     IplImage *labelImg=cvCreateImage(cvSize(w,h),IPL_DEPTH_LABEL,1);//Image Variable for blobs
      IplImage *threshy=cvCreateImage(cvSize(w,h),8,1); //Threshold image of yellow color

      IplImage* fra = NULL;

       //Getting the screen information

       //int screenx = GetSystemMetrics(SM_CXSCREEN);
       //int screeny = GetSystemMetrics(SM_CYSCREEN);
        fra = cvQueryFrame(capture);
       //imwrite(""test.jpg"", fra);
         cvSaveImage(""test.png"", frame);
        //system(""ffmpeg -ss 19 -i 20130521053652.avi -vframes 1 -f image2 tst.jpg"");
        while(1)
        {
        //Getting the current frame
        IplImage *fram=cvQueryFrame(capture);
          //If failed to get break the loop
           if(!fram) 
          break;
         //Resizing the capture
         cvResize(fram,frame,CV_INTER_LINEAR );

         //Flipping the frame

         cvFlip(frame,frame,1);

        //Changing the color space

         cvCvtColor(frame,hsvframe,CV_BGR2HSV);                                                                                       
        cvInRangeS(hsvframe,cvScalar(0,41,133),cvScalar(22,150,255),threshy);     
        cvSmooth(threshy,threshy,CV_MEDIAN,7,7);

        //Finding the blobs
        unsigned int result=cvLabel(threshy,labelImg,blobs);
        if(result &gt; 0)
       {
          printf(""\n/*==Sparks==*/"");
        }
           //Rendering the blobs
        cvRenderBlobs(labelImg,blobs,frame,frame);
        //Filtering the blobs
       cvFilterByArea(blobs,60,500);
         for (CvBlobs::const_iterator it=blobs.begin(); it!=blobs.end(); ++it)
         {
         double moment10 = it-&gt;second-&gt;m10;
         double moment01 = it-&gt;second-&gt;m01;
          double area = it-&gt;second-&gt;area;
           //Variable for holding position
              int x1;
              int y1;
              //Calculating the current position
             x1 = moment10/area;
            y1 = moment01/area;
           if(result &gt; 0)
           {
         //count++;
         //fra = NULL;
         fra = cvQueryFrame(capture);
        sprintf(buffer,""spark_image-%d.png"",count) ;
        //imwrite(""tet.jpg"", fra);
          cvSaveImage(buffer, frame);
          count++;

          }

           //Mapping to the screen coordinates
         //int x=(int)(x1*screenx/w);
       //int y=(int)(y1*screeny/h);

        //Printing the position information
       //cout&lt;&lt;""X: ""&lt;&lt;x&lt;&lt;"" Y: ""&lt;&lt;y&lt;&lt;endl;
        }

      //Showing the images
      //system(""ffmpeg -ss 19 -i 20130521053652.avi -vframes 1 -f image2 t?st.jpg"");
      //img = imread(""MyPic.JPG"", CV_LOAD_IMAGE_UNCHANGED); //read the image data in the file ""MyPic.JPG"" and store it in 'img'

    //frame &gt;&gt;  save_img;

     /*==&gt; show images*/

    //cvShowImage(""Live"",frame);

    char c=cvWaitKey(33);
      if(c==27)
     break;
    }

       //Cleanup

     //free the memory
       free(buffer);

         cvReleaseCapture(&amp;capture);
         cvDestroyAllWindows();

            }
</code></pre>

<p>and compiled on BeagleBone with </p>

<p><code>gcc track.cpp -o track 'pkgconfig opencv cvblob --libs --cflags'</code></p>

<p>its returning an Executable as <code>track</code>. Whenever we execute this one its not giving any error instead its Display this 
<code>[avi @ 0x13cb940] non-interleaved AVI</code> &amp; getting hanged for Long time (No response till we cancelled ).</p>
",,2013-11-21 10:08:36,opencv (Non Interleaved AVI) captured from File on BeagleBoard,<c++><opencv><ubuntu><avi><beagleboard>,,,CC BY-SA 3.0,True,True,False,False,True
15975,21282745,2014-01-22 12:17:42,,"<p>how can I load bitmap into FFmpegFrameRecorder? My old code loaded it from SD card and now I wish to put id directly. I use javacv.</p>

<pre><code>FFmpegFrameRecorder recorder = new  FFmpegFrameRecorder(Environment.getExternalStorageDirectory().getPath()+ ""/MyApp/Media/test-ffmep.mp4"", w, h);
public void offerEncoder(Bitmap input) 
{
    recorder.record(opencv_highgui.cvLoadImage(input));
    //recorder.record(opencv_highgui.cvLoadImage(""/sdcard/MyApp/Media/"" + input + "".bmp"")); //input was string
}
</code></pre>
",,2014-05-15 11:16:34,Load bitmap into FFmpegFrameRecorder,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
16125,24678635,2014-07-10 14:03:06,,"<p>I'm new with python and I want to do is receive UDP stream (streaming from VLC, H264) and make any modifications to the video and display it (Python 2.7).</p>

<p>I used openCV (openCV 2.4.9) and I can receive video frames and also modify it. Now I need to do is create a video file using these frames and display it and I don't need to save both frames and the video.</p>

<p>I tried <em>FFMPEG,FFPLAY</em> and it works on saved video frames.</p>

<p>I appreciate that if you can point out the steps or any other alternatives.</p>

<p>First of all sorry about my explanation early. Here is what I've tried:</p>

<ol>
<li><p>Receive UDP video stream.</p></li>
<li><p>Modify the video stream: I used openCV and get video frames from stream and modified them it working.</p>

<pre><code>cap = cv2.VideoCapture(""udp://224.1.1.1:1234"")
while(cap.isOpened()):
    success, image = cap.read()
    ...
    cv2.imwrite(""./frames/frame%d.jpeg"" %count, image)
    count += 1
</code></pre></li>
<li><p>Create video and display: I tried FFMPEG and FFPLAY</p>

<pre><code>command1 = 'ffmpeg -i ./frames/frame%d.jpeg -c:v libx264 -vf fps=23.97 -pix_fmt yuv420p -f rawvideo -'
command2 = 'ffplay -'

pipe1 = sp.Popen(command1,stdout=sp.PIPE)  
pipe2 = sp.Popen(command2,stdin=pipe1.stdout)
</code></pre></li>
</ol>

<p>These steps working but I cannot save frames or video file physically. I need to do is after step 2 direcly pass video frames to FFMPEG, FFPLAY to play without saving them in frames folder.</p>
",2020-03-17 18:49:26,2020-03-17 18:49:26,Python Video Manipulation,<python><opencv><video><ffmpeg>,,,CC BY-SA 4.0,True,False,False,False,True
16146,20133988,2013-11-21 23:21:17,,"<p>I followed <a href=""http://opencvpython.blogspot.co.at/2012/05/install-opencv-in-windows-for-python.html"" rel=""nofollow"">these</a> instructions to install opencv for python (i.e. copying the pyd file into site-packages). It works fine, except opencv cannot open any video files I try to open:</p>

<pre><code>capture = cv2.VideoCapture(""some_file.avi"") 
capture.isOpened() # False
</code></pre>

<p>I tried videos with h264 and mpeg2 encodings without success. Windows 7 x64, 32bit Python 2.7.5 and opencv 2.4.7. So that presumably means that opencv cannot find the right codecs, but I made sure that <code>opencv_ffmpeg247.dll</code> is in the path.</p>
",,2013-11-25 00:19:45,opencv codecs under Windows,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
16210,21303668,2014-01-23 09:05:23,,"<p>I am using javacv for adding FFmpeg to my android projecst. The only import I use are: </p>

<pre><code>import com.googlecode.javacv.FFmpegFrameRecorder;
import com.googlecode.javacv.FrameRecorder.Exception;
import com.googlecode.javacv.cpp.opencv_core.IplImage;
</code></pre>

<p>But I have huge list of so files that I added to my projects that just add weight to my projects. I do not know witch files are neede and witch redundant:</p>

<pre><code>libavcodec.so
libavdevice.so
libavfilter.so
libavformat.so
libavutil.so
libjniARToolKitPlus.so
libjniavcodec.so
libjniavdevice.so
libjniavfilter.so
libjniavformat.so
libjniavutil.so
libjnicvkernels.so
libjniopencv_calib3d.so
libjniopencv_contrib.so
libjniopencv_core.so
libjniopencv_features2d.so
libjniopencv_flann.so
libjniopencv_highgui.so
libjniopencv_imgproc.so
libjniopencv_legacy.so
libjniopencv_ml.so
libjniopencv_nonfree.so
libjniopencv_objdetect.so
libjniopencv_photo.so
libjniopencv_stitching.so
libjniopencv_video.so
libjniopencv_videostab.so
libjnipostproc.so
libjniswresample.so
libjniswscale.so
libopencv_calib3d.so
libopencv_contrib.so
libopencv_core.so
libopencv_features2d.so
libopencv_flann.so
libopencv_gpu.so
libopencv_highgui.so
libopencv_imgproc.so
libopencv_info.so
libopencv_legacy.so
libopencv_ml.so
libopencv_nonfree.so
libopencv_objdetect.so
libopencv_photo.so
libopencv_stitching.so
libopencv_video.so
libopencv_videostab.so
libpostproc.so
libswresample.so
libswscale.so
libtbb.so
</code></pre>
",,2014-01-23 09:05:23,Android javacv FFmpeg redundant so files,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
16256,20143022,2013-11-22 10:49:27,,"<p>I'm fighting with new version of OpenCV 2.4.7 for almost one week (prev. used 2.4.2). My motivation for the new setup is the fact that I run into problems using the Videowriter for uncompressed grayscale videos (<a href=""http://answers.opencv.org/question/3603/videowriter-videocapture-and-uncompressed-avi/"" rel=""nofollow"">http://answers.opencv.org/question/3603/videowriter-videocapture-and-uncompressed-avi/</a>). In <a href=""https://github.com/Itseez/opencv/pull/1516"" rel=""nofollow"">https://github.com/Itseez/opencv/pull/1516</a> ""akarsakov"" is recommending to build OpenCV without vfw support and open uncompressed video through ffmpeg. That's what I tried to do. I followed basically the instructions mentioned in this video: <a href=""http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_install/windows_install.html"" rel=""nofollow"">http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_install/windows_install.html</a></p>

<p>I had successfully build opencv with Qt 5.1.1 (<a href=""http://answers.opencv.org/question/24184/how-to-compile-opencv-247-with-qt-and-ffmpeg/"" rel=""nofollow"">http://answers.opencv.org/question/24184/how-to-compile-opencv-247-with-qt-and-ffmpeg/</a>). But I'm not able to get the VideoWriter &amp; VideoCapture work for me. So what I did:</p>

<ol>
<li><p>I downloaded the newest ffmpeg build from <a href=""http://ffmpeg.zeranoe.com/builds/"" rel=""nofollow"">http://ffmpeg.zeranoe.com/builds/</a></p></li>
<li><p>I generated the vs2010 project disabling VfW and enabling ffmpeg instead:</p>

<pre><code>Video I/O:

Video for Windows:           NO
DC1394 1.x:                  NO
DC1394 2.x:                  NO
FFMPEG:                      YES (prebuilt binaries)
  codec:                     YES (ver 55.18.102)
  format:                    YES (ver 55.12.100)
  util:                      YES (ver 52.38.100)
  swscale:                   YES (ver 2.3.100)
  gentoo-style:              YES
  OpenNI:                    NO
OpenNI PrimeSensor Modules:  NO
PvAPI:                       NO
GigEVisionSDK:               NO
DirectShow:                  YES
Media Foundation:            NO
XIMEA:                       NO
</code></pre></li>
<li><p>I added the include directories and libs for ffmpeg to the highgui module.</p></li>
</ol>

<p>I was not able to compile OpenCV without any errors but the behaviour what I see is not what I expect:</p>

<ol>
<li>Build OpenCV 2.4.7 without VfW -> VideoWriter.open () returns always false!</li>
<li>Build OpenCV 2.4.7 with VfW -> VideoWriter.open () returns true for the time, calling a release() and an open() on the same object returns always a false.</li>
<li>With or without ffmpeg -> An VideoCapture.open () gives a error message asking for libiconv-2dll!</li>
</ol>

<p>Does some had the same problems and is able to point me to my mistake?</p>

<p>Thank you in advance.
cheers </p>
",,2013-11-24 17:16:26,OpenCV 2.4.7 with FFMpeg support build with VS 2010 (x86),<c++><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
16279,18037569,2013-08-03 21:39:26,,"<p>Ok. So here goes. I am currently trying to add and use a dynamic library called OpenCV into a Xcode project of mine. I first installed MacPorts using the .pkg. Then I opened Terminal and ran ""sudo port install opencv"". MacPorts then installed all sorts of dependencies (FFMPEG/etc) and then installed OpenCV into the ""/opt/local/lib"" folder for the .dylib files and into ""/opt/local/include"" folder for the header files. Then I opened Xcode and opened command line utility application project. I added a group to my project and then added all the .dylib files inside of it (I think these are called references to the dynamic libraries, but I am not sure - I am a total beginner - I learned C++, my first programming language, merely a week ago""). After that, I clicked on my project file thing inside of Xcode and went to Build Settings and then changed the ""Header Search Paths"" under the ""Search Paths"" tab to the /include folder I mentioned previously. The Library Search Path was already set to the /lib folder since I added the .dylib files already (I think that's what happened - not sure). Anyways, then I copied and pasted the following sample code from the opencv website into my main.cpp file just to test whether or not my library works.</p>

<p>//******************************Sample Code ************************************************</p>

<pre><code>#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;iostream&gt;

using namespace cv;
using namespace std;

int main( int argc, char** argv ) {
if( argc != 2) {
    cout &lt;&lt;"" Usage: display_image ImageToLoadAndDisplay"" &lt;&lt; endl;
    return -1; }
Mat image;
image = imread(argv[1], CV_LOAD_IMAGE_GRAYSCALE);
if(! image.data ) {
    // Read the file
    // Check for invalid input
    cout &lt;&lt;  ""Could not open or find the image"" &lt;&lt; std::endl ;
    return -1; }
namedWindow( ""Display window"", CV_WINDOW_NORMAL );// Create a window for display.
imshow( ""Display window"", image ); // Show our image inside it.
waitKey(0); // Wait for a keystroke in the window
return 0; }
</code></pre>

<p>//********************END OF SAMPLE FILE CODE **********************************************</p>

<p>After I did all that and before I hit run, I think it is important to note that Xcode did not complain that it couldn't find my header files, and also it didn't complain about any syntax errors with the new functions the library should've added. In short, there were no errors highlighted on the main.cpp file. All the errors, however, started showing up after I hit the Run button inside of Xcode. Here are all the errors that it generated:</p>

<p>**************Errors from Xcode after I hit Run*********************************************</p>

<p>Stupid Stack Overflow won't let me post images, so here is the link to the error photo:
<img src=""https://i.stack.imgur.com/jbkuf.jpg"" alt=""enter image description here""></p>

<p>*****************END OF BLOCK***************************************************************
So, yeah, I have no clue what I am doing at this point and am totally lost. Did I not follow the correct steps in adding a dynamic library to my project? Oh, and I forgot what it was, but I somehow got Xcode to ignore those semantic issues (I cannot remember how I did this or if that was what I did), but once the semantic issues are ignore, the only error that remains seems to be something related to a ""Mach-O Linker Error"" which says something on the lines of: ""undefined symbols....architecture/etc"" and then says that the undefined symbol was one of the library functions that I was calling in my main.cpp file. But that error no longer occurs since I deleted everything and started again. So now the only errors I get are the ones from the picture. So PLEASE HELP!!!! I am absolutely lost and I have been researching for weeks now, but I think the issue with me there is that I have no clue what I am looking for or what question I should be asking. The steps I listed above is only what I have done. Any insight will be much appreciated. THANKS IN ADVANCE!!!!!!</p>

<p>____________EDIT___________________
So I repeated the above steps again, but this time I get this error:
Ld /Users/Yash/Library/Developer/Xcode/DerivedData/OpenCVOptTEST-adchdkiefzmijfhahwtzcfqarzkw/Build/Products/Debug/OpenCVOptTEST normal x86_64
    cd ""/Users/Yash/Coding Folder/OpenCVOptTEST""
    setenv MACOSX_DEPLOYMENT_TARGET 10.8
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/Yash/Library/Developer/Xcode/DerivedData/OpenCVOptTEST-adchdkiefzmijfhahwtzcfqarzkw/Build/Products/Debug -L/opt/local/lib -F/Users/Yash/Library/Developer/Xcode/DerivedData/OpenCVOptTEST-adchdkiefzmijfhahwtzcfqarzkw/Build/Products/Debug -filelist /Users/Yash/Library/Developer/Xcode/DerivedData/OpenCVOptTEST-adchdkiefzmijfhahwtzcfqarzkw/Build/Intermediates/OpenCVOptTEST.build/Debug/OpenCVOptTEST.build/Objects-normal/x86_64/OpenCVOptTEST.LinkFileList -mmacosx-version-min=10.8 -stdlib=libc++ -lopencv_calib3d.2.4.6 -lopencv_contrib.2.4.6 -lopencv_core.2.4.6 -lopencv_features2d.2.4.6 -lopencv_flann.2.4.6 -lopencv_gpu.2.4.6 -lopencv_highgui.2.4.6 -lopencv_imgproc.2.4.6 -lopencv_legacy.2.4.6 -lopencv_ml.2.4.6 -lopencv_nonfree.2.4.6 -lopencv_objdetect.2.4.6 -lopencv_photo.2.4.6 -lopencv_stitching.2.4.6 -lopencv_superres.2.4.6 -lopencv_ts.2.4.6 -lopencv_video.2.4.6 -lopencv_videostab.2.4.6 -o /Users/Yash/Library/Developer/Xcode/DerivedData/OpenCVOptTEST-adchdkiefzmijfhahwtzcfqarzkw/Build/Products/Debug/OpenCVOptTEST</p>

<p>Undefined symbols for architecture x86_64:
  ""cv::namedWindow(std::__1::basic_string, std::__1::allocator > const&amp;, int)"", referenced from:
      _main in main.o
  ""cv::imread(std::__1::basic_string, std::__1::allocator > const&amp;, int)"", referenced from:
      _main in main.o
  ""cv::imshow(std::__1::basic_string, std::__1::allocator > const&amp;, cv::_InputArray const&amp;)"", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)</p>

<hr>
",2013-08-04 17:34:04,2013-08-24 01:20:55,Adding and Using Dynamic Libraries with Xcode,<xcode><opencv><linker><mach-o><dynamic-library>,,,CC BY-SA 3.0,True,True,False,False,True
16281,24692093,2014-07-11 07:17:50,,"<p>I have installed opencv using the following commands: 
git clone <a href=""https://github.com/jayrambhia/Install-OpenCV.git"" rel=""nofollow noreferrer"">https://github.com/jayrambhia/Install-OpenCV.git</a></p>

<pre><code>cd Install-OpenCV/
./dependencies.sh
./opencv_latest.sh
</code></pre>

<p>this gave me the following message: </p>

<pre><code>Package ffmpeg is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source
</code></pre>

<p>Deciding that this may or may not matter I went on into codeblock and created a default opencv template project.</p>

<pre><code>#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/imgproc/imgproc.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;

using namespace cv;

int main(int argc, char *argv[])
{
    Mat img = imread(""lena.jpg"", CV_LOAD_IMAGE_COLOR);
    if(img.empty())
       return -1;
    namedWindow( ""lena"", CV_WINDOW_AUTOSIZE );
    imshow(""lena"", img);
    waitKey(0);
    return 0;
}
</code></pre>

<p>This showed no errors but on compile gave me the following errors: </p>

<pre><code>AR: 9 undfined reference to 'cv::imread(std::string const&amp;,int)'
AR: 12 undfined reference to 'cv::na(std::string const&amp;,int)'
AR: 13 undfined reference to 'cv::InputArray::_InputArray(cv::Mat const&amp;)'
AR: 13 undfined reference to 'cv::imshow(std::string const&amp;, cv::InputArray(const&amp;)'
AR: 14 undfined reference to 'cv::waitKey(int)'
usr/include/opencv... 278 undfined reference to 'cv::fastFree(void*)'
usr/include/opencv... 367 undfined reference to 'cv::Mat::deallocate()'
</code></pre>

<p>running the getlatest under sudo instead gave me the following exchange: </p>

<pre><code>sudo ./opencv_latest.sh
... some normal looking stuff...
./opencv_latest.sh: 7: ./opencv_install.sh: [[: not found
./opencv_latest.sh: 11: ./opencv_install.sh: [[: not found
./opencv_latest.sh: 15: ./opencv_install.sh: [[: not found
--- Installing OpenCV 2.4.9
--- Installing Dependencies
./opencv_latest.sh: 27: ./opencv_install.sh: source: not found
</code></pre>

<p>Attempting to do what they did here: <a href=""http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation"" rel=""nofollow noreferrer"">http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation</a> 
gave me the following result: </p>

<pre><code>Prg1@KILLBOX:/usr/include/opencv2/release$ cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/include/opencv2
CMake Error: The source directory ""/usr/include/opencv2/release/CMAKE_INSTALL_PREFIX=/usr/include/opencv2"" does not exist.
Specify --help for usage, or press the help button on the CMake GUI.
</code></pre>

<p>Here are picks of my linker and compiler settings: 
<img src=""https://i.stack.imgur.com/XQ9vp.png"" alt=""compiler"">
<img src=""https://i.stack.imgur.com/bBfXE.png"" alt=""linker""></p>

<p>So anybody know what I'm doing wrong this is on ubuntu 14.04 LTS and codeblocks</p>

<p>edit: 
using ldconfig -p | grep opencv
gave me a mountain of opencv files that should mean it's installed right, right?  So it the problem with the linker and compiler? Note that linker settings in the compiler settings (not the search directories) show the opencv libs as being empty so which one is it?
By the way clicking on the error messages in codeblocks (the once inside the opencv lib) does in fact bring up pieces of the opencv lib which look like the proper lines of code to be at that position (as in they contain functions that the log shows as missing)</p>
",2014-07-11 08:52:57,2014-07-11 08:52:57,opencv undfined something wrong with my library?,<c++><opencv><ubuntu><codeblocks>,2014-07-12 02:45:36,,CC BY-SA 3.0,True,True,False,False,True
16285,17090332,2013-06-13 14:57:04,,"<p>I try to capture video from a file one frame at a specific time or at a certain interval to put it in a string.
I managed to capture images (as jpeg) with opencv and ffmpeg but the problem is that it takes time. I try to send these catches almost in real time between each captured image but there is a slowdown
Currently, between each image in ffmpeg and opencv for each capture, there is 1/2 seconds, which is quite slow.</p>

<p>I have two problems, I do not know how to speed up the capture with opencv (or ffmpeg) and I arrivge in with opencv to the timecode of the frame was captured.</p>

<p>I come with ffmpeg capture a choiced frequency but not with OpenCV.</p>

<p>Would you know how to capture images with OpenCV video of all the X milliseconds or any other capture solutions fast enough?</p>
",,2014-11-05 09:21:22,Quick capture of a specific frame,<opencv><video><ffmpeg><capture>,,,CC BY-SA 3.0,True,False,False,False,True
16386,22443311,2014-03-16 21:32:33,,"<p>I just installed <code>OpenCV 2.4.7</code> with <code>OpenNI</code> and primesense Sensor as it can be seen in the following build information.</p>

<p>I have problems grabbing from a <code>VideoCapture</code> object. For instance, if I run the openni_capture example, I get ""Can not grab images."" but I get info about the depth and RGB cameras, so I think I'm getting the <code>VideoCapture</code> object properly opened, but by the time it tries to grab an image, the grab function returns 0.</p>

<p>I am using an Asus Xtion Pro Live and OpenNI and Sensor are working properly since I am able to run examples such as NiViewer.</p>

<p>I would appreciate some help with this problem.</p>

<p>Thank you!</p>

<pre><code>General configuration for OpenCV 2.4.7 =====================================
  Version control:               unknown

  Platform:
    Host:                        Linux 3.5.0-47-generic x86_64
    CMake:                       2.8.9
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/make
    Configuration:               Release

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                /usr/bin/c++  (ver 4.7.2)
    C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
    C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
    C Compiler:                  /usr/bin/gcc
    C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
    C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG -ggdb3
    Linker flags (Release):      
    Linker flags (Debug):        
    Precompiled headers:         YES

  OpenCV modules:
    To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib java python stitching superres ts videostab
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 androidcamera

  GUI: 
    QT:                          NO
    GTK+ 2.x:                    YES (ver 2.24.13)
    GThread :                    YES (ver 2.34.1)
    GtkGlExt:                    NO
    OpenGL support:              NO

  Media I/O: 
    ZLib:                        /usr/lib/x86_64-linux-gnu/libz.so (ver 1.2.7)
    JPEG:                        libjpeg (ver 62)
    PNG:                         /usr/lib/x86_64-linux-gnu/libpng.so (ver 1.2.49)
    TIFF:                        /usr/lib/x86_64-linux-gnu/libtiff.so (ver 42 - 4.0.2)
    JPEG 2000:                   /usr/lib/x86_64-linux-gnu/libjasper.so (ver 1.900.1)
    OpenEXR:                     build (ver 1.7.1)

  Video I/O:
    DC1394 1.x:                  NO
    DC1394 2.x:                  YES (ver 2.2.0)
    FFMPEG:                      YES
      codec:                     YES (ver 53.35.0)
      format:                    YES (ver 53.21.1)
      util:                      YES (ver 51.22.2)
      swscale:                   YES (ver 2.1.0)
      gentoo-style:              YES
    GStreamer:                   
      base:                      YES (ver 0.10.36)
      app:                       YES (ver 0.10.36)
      video:                     YES (ver 0.10.36)
    OpenNI:                      YES (ver 1.5.7, build 10)
    OpenNI PrimeSensor Modules:  YES (/usr/lib/libXnCore.so)
    PvAPI:                       NO
    GigEVisionSDK:               NO
    UniCap:                      NO
    UniCap ucil:                 NO
    V4L/V4L2:                    Using libv4l (ver 0.8.8)
    XIMEA:                       NO
    Xine:                        NO

  Other third-party libraries:
    Use IPP:                     NO
    Use Eigen:                   YES (ver 3.0.93)
    Use TBB:                     NO
    Use OpenMP:                  NO
    Use GCD                      NO
    Use Concurrency              NO
    Use C=:                      NO
    Use Cuda:                    NO
    Use OpenCL:                  YES

  OpenCL:
    Version:                     dynamic
    Include path:                /home/xxx/imageproc/opencv-2.4.7/3rdparty/include/opencl/1.2
    Use AMD FFT:                 NO
    Use AMD BLAS:                NO

  Python:
    Interpreter:                 /usr/bin/python2 (ver 2.7.3)
    Libraries:                   /usr/lib/libpython2.7.so (ver 2.7.3)
    numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.6.2)
    packages path:               lib/python2.7/dist-packages

  Java:
    ant:                         /usr/bin/ant (ver 1.8.2)
    JNI:                         /usr/lib/jvm/java-6-openjdk/include /usr/lib/jvm/java-6-openjdk/include /usr/lib/jvm/java-6-openjdk/include
    Java tests:                  YES

  Documentation:
    Build Documentation:         NO
    Sphinx:                      NO
    PdfLaTeX compiler:           /usr/bin/pdflatex

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    C/C++ Examples:              YES

  Install path:                  /usr/local

  cvconfig.h is in:              /home/xxx/imageproc/opencv-2.4.7/release
</code></pre>

<p>I instantiate the videocapture and try to grab an image as follows:</p>

<pre><code>VideoCapture capture;

capture.open(CV_CAP_OPENNI);

if ( !capture.isOpened() )
{
    cout &lt;&lt; ""Error opening capture"" &lt;&lt; endl;
    return -1;
}


if( !capture.grab() )
{
    cout &lt;&lt; ""Can not grab image"" &lt;&lt; endl;
}
</code></pre>
",2014-03-17 15:40:39,2015-03-13 21:58:11,Can not grab image from VideoCapture OpenCV with Asus Xtion Pro Live,<c++><opencv><openni><primesense>,,,CC BY-SA 3.0,True,False,False,False,True
16435,24705101,2014-07-11 19:26:05,,"<p>I'm trying to use OpenCV's cv2 python bindings on an Amazon server running Ubuntu 14.04 and I can't seem to get VideoCapture to work properly.</p>

<p>I tried opening the default capture as follows:</p>

<pre><code>import cv2
cap = cv2.VideoCapture(0)
cap.isOpened() #Returns false
</code></pre>

<p>I tested this on my local machine and it was true as expected, so there is something wrong with my open CV configuration. I've tried a variety of things:</p>

<ul>
<li>Using an actual filepath that I confirmed points to an .mp4 file</li>
<li>Using -1 and 1 in place of 0 on the second line</li>
<li>Installing ffmpeg (from a ppa as it isn't available by default on Ubuntu 14.04) and rebuilding OpenCV</li>
<li>Removing my OpenCV directory entirely and rebuilding using the script <a href=""https://help.ubuntu.com/community/OpenCV"" rel=""noreferrer"">here</a></li>
<li>Verifying and reinstalling various other libraries including x264, gstreamer, and gtk</li>
</ul>

<p>I'm kind of out of ideas at this point. Any ideas of what could be going wrong?</p>

<p>Edit: OpenCV version is 2.4.9.</p>
",,2019-10-23 03:37:27,OpenCV VideoCapture Not Opening,<python><opencv><ubuntu-14.04>,,,CC BY-SA 3.0,True,False,False,False,True
16482,23601621,2014-05-12 05:28:03,,"<p>I am trying to open a video file (.MOV,.AVI or .MP4) using OpenCV on linux. So that I can extract specific frames as images on the disc and do image processing. I have also installed ffmpeg on linux.</p>

<p>My code snippet is :</p>

<pre><code>CvCapture* capture = cvCreateFileCapture(""sample.avi"");

    if(!capture)  // check if we succeeded
        printf(""Video failed to open\n"");
    else
        printf(""Video opened\n"");
</code></pre>

<p>I cannot open an avi file. Can anyone guide me:</p>

<ol>
<li>Why I cannot open AVI video file using OpenCV?</li>
<li>I was reading somewhere that OpenCV can only handle .avi files. So, what I will do with other movie formats?</li>
</ol>

<p>Any help will be really appreciated . . </p>
",,2014-05-12 23:10:49,cannot open video using opencv on linux,<image><opencv><image-processing><ffmpeg><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
16488,21324785,2014-01-24 04:56:42,,"<p>The code given below is for accessing an Axis IP camera using OpenCV. On running the program it first displays ""Error in opening cap_ffmpeg_impl..."" and then it displays <strong>Camera not found.</strong></p>

<pre><code>#include &lt;opencv\cv.h&gt;
#include &lt;opencv2\highgui\highgui.hpp&gt;
#include &lt;opencv2\imgproc\imgproc.hpp&gt;
#include &lt;iostream&gt;
#include &lt;stdio.h&gt;

using namespace std;
using namespace cv;

int main()
{
    Mat frame;
    namedWindow(""video"", 1);
    VideoCapture cap(""http://IPADDRESS/video.mjpg"");
    if(!cap.isOpened())
    {
        cout&lt;&lt;""Camera not found""&lt;&lt;endl;
        getchar();
        return -1;
    }
    while ( cap.isOpened() )
    {
        cap &gt;&gt; frame;
        if(frame.empty()) break;

        imshow(""video"", frame);
        if(waitKey(30) &gt;= 0) break;
    }   
    return 0;
}
</code></pre>

<p>Where am I going wrong?</p>
",2016-06-10 00:44:26,2018-03-16 10:31:58,IP Camera access using OpenCV,<c++><opencv><video-streaming><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
16707,23620388,2014-05-12 23:08:50,,"<p>I know the title is a bit vague but I'm not sure how else to describe it. </p>

<p>CentOS with ffmpeg + OpenCV 2.4.9. I'm working on a simple motion detection system which uses a stream from an IP camera (h264). </p>

<p>Once in a while the stream hiccups and throws in a ""bad frame"" (see pic-bad.png link below). The problem is, these frames vary largely from the previous frames and causes a ""motion"" event to get triggered even though no actual motion occured.</p>

<p>The pictures below will explain the problem.</p>

<p>Good frame (motion captured):</p>

<p><img src=""https://i.stack.imgur.com/SQpEC.png"" alt=""Good Frame""></p>

<p>Bad frame (no motion, just a broken frame):</p>

<p><img src=""https://i.stack.imgur.com/gsBO1.png"" alt=""Bad Frame""></p>

<p>The bad frame gets caught randomly. I guess I can make a bad frame detector by analyzing (looping) through the pixels going down from a certain position to see if they are all the same, but I'm wondering if there is any other, more efficient, ""by the book"" approach to detecting these types of bad frames and just skipping over them.</p>

<p>Thank You!</p>

<p>EDIT UPDATE:</p>

<p>The frame is grabbed using a C++ motion detection program via <code>cvQueryFrame(camera);</code> so I do not directly interface with ffmpeg, OpenCV does it on the backend. I'm using the latest version of ffmpeg compiled from git source. All of the libraries are also up to date (h264, etc, all downloaded and compiled yesterday). The data is coming from an RTSP stream (ffserver). I've tested over multiple cameras (dahua 1 - 3 MP models) and the frame glitch is pretty persistent across all of them, although it doesn't happen continuously, just once on a while (ex: once every 10 minutes). </p>
",2014-05-13 15:35:11,2014-05-14 01:23:02,Detect bad frames in OpenCV 2.4.9,<c++><opencv><ffmpeg><motion>,,,CC BY-SA 3.0,True,False,False,False,True
16732,23622617,2014-05-13 04:05:43,,"<p>Hi I want to stream a <strong>WebRTC</strong> (<strong>MediaStream</strong>) video to a <strong>WebSocket</strong> (<strong>Twisted</strong>+<strong>Autobahn</strong>) and process the stream for <strong>OpenCV</strong> object detection and send it back to the client via <strong>FFServer</strong> (<strong>FFMPeg</strong>)?</p>

<p>I have try using only WebRTC, WebSocket and OpenCV, but the streaming is not real-time.</p>
",,2014-07-18 12:12:29,How to stream WebRTC to WebSocket?,<opencv><websocket><webrtc><autobahn><ffserver>,,,CC BY-SA 3.0,True,False,False,False,True
17036,22497540,2014-03-19 06:00:47,,"<p>Here is my problem,
I have implemented a server side application using Red5, which sends H.264 encoded live stream, on client side the stream is received as byte[]<br>
In order to decode it on Android client side i have followed the <strong>Javacv-FFmpeg</strong> library. The code for decoding is as follows  </p>

<pre><code>public Frame decodeVideo(byte[] data,long timestamp){
           frame.image = null;
           frame.samples = null;
           avcodec.av_init_packet(pkt);
           BytePointer video_data = new BytePointer(data);
           avcodec.AVCodec codec = avcodec.avcodec_find_decoder(codec_id);
           video_c = null;
           video_c = avcodec.avcodec_alloc_context3(codec);
           video_c.width(320);
           video_c.height(240);
           video_c.pix_fmt(0);
           video_c.flags2(video_c.flags2()|avcodec.CODEC_FLAG2_CHUNKS);
           avcodec.avcodec_open2(video_c, codec, null))
           picture = avcodec.avcodec_alloc_frame()
           pkt.data(video_data);
           pkt.size(data.length);
           int len = avcodec.avcodec_decode_video2(video_c, picture, got_frame, pkt);
           if ((len &gt;= 0) &amp;&amp; ( got_frame[0] != 0)) {
             ....
              process the decoded frame into **IPLImage of Javacv** and render it with **Imageview** of Android
           }
} 
</code></pre>

<p>Data received from server is as follows<br>
Few Frames having following pattern<br>
<strong>17 01 00 00 00 00 00 00 02 09 10 00 00 00 0F 06 00 01 C0 01 07 09 08 04 9A 00 00 03 00 80 00 00 16 EF 65 88 80 07 00 05 6C 98 90 00</strong>...  </p>

<p>Many frames having following pattern<br>
<strong>27 01 00 00 00 00 00 00 02 09 30 00 00 00 0C 06 01 07 09 08 05 9A 00 00 03 00 80 00 00 0D 77 41 9A 02 04 15 B5 06 20 E3 11 E2 3C 46</strong> ....</p>

<p>With H.264 codec for decoder, decoder outputs length >0 but got_frames=0 always.<br>
With MPEG1 codec, decoder outputs length >0 and got_frames>0 but the output image is green or distorted.  </p>

<p>However following FFmpegFrameGrabber code of javacv i can decode the local files( H.264 encoded ) with similar code as above.  </p>

<p>I wonder what details i am missing, and header related data manipulation or setting codec appropriate for decoder.  </p>

<p>Any suggestion, help appreciated.<br>
Thanks in advance.</p>
",2014-03-19 06:07:31,2015-03-26 09:19:53,"Javacv: Decoding H.264 ""live"" stream coming from red5 server on android device",<android><ffmpeg><red5><javacv><live-streaming>,,,CC BY-SA 3.0,False,False,False,False,True
17051,19039032,2013-09-26 21:28:24,,"<p>I have a VS2012 project working with Qt, OpenCV, Boost and some other libraries.</p>

<p>I installed Qt 5.1.1 for Windows 64-bit (VS 2012, OpenGL) to C:/Qt directory and configure VS project with work shared Qt DLL's. VS can run the project Debug and Release mode with no error.</p>

<p>But I can't run exe from directory. There's a deployment error. To make it work, I tried to put all DLL's to directory, contains these DLL's;</p>

<pre><code>A2Engine.exe
cryptopp.dll
D3DCompiler_43.dll
gpsvc.dll
icudt51.dll
icuin51.dll
icuuc51.dll
IEShims.dll
libcurl.dll
libeay32.dll
libEGL.dll
libGLESv2.dll
libmySQL.dll
msvcp110.dll
msvcr110.dll
mysqlcppconn.dll
opencv_calib3d245.dll
opencv_contrib245.dll
opencv_core245.dll
opencv_features2d245.dll
opencv_ffmpeg245_64.dll
opencv_flann245.dll
opencv_gpu245.dll
opencv_highgui245.dll
opencv_imgproc245.dll
opencv_legacy245.dll
opencv_ml245.dll
opencv_nonfree245.dll
opencv_objdetect245.dll
opencv_photo245.dll
opencv_stitching245.dll
opencv_superres245.dll
opencv_ts245.dll
opencv_video245.dll
opencv_videostab245.dll
pthreadGC2.dll
pthreadGCE2.dll
pthreadVC2.dll
pthreadVCE2.dll
pthreadVSE2.dll
qminimal.dll
qoffscreen.dll
Qt5Core.dll
Qt5Gui.dll
Qt5Multimedia.dll
Qt5MultimediaWidgets.dll
Qt5Network.dll
Qt5OpenGL.dll
Qt5PrintSupport.dll
Qt5Qml.dll
Qt5Quick.dll
Qt5Sensors.dll
Qt5Sql.dll
Qt5V8.dll
Qt5WebKit.dll
Qt5WebKitWidgets.dll
Qt5Widgets.dll
qwindows.dll
ssleay32.dll
sysntfy.dll
tbb.dll
platforms/qminimal.dll
platforms/qoffscreen.dll
platforms/qwindows.dll
</code></pre>

<p>When I double click exe, nothing happens. Also dependency walker can't find any problem.</p>

<p>Any ideas?</p>
",2013-09-27 03:39:45,2013-09-27 03:39:45,Qt VS2012 Project Windows Deployment won't work,<c++><qt><opencv><visual-studio-2012>,,,CC BY-SA 3.0,True,False,False,False,True
17286,18121086,2013-08-08 08:14:26,,"<p>Could someone explain to me why OpenCV fails to open an .avi file with C++ API, but instead it opens it with C API ?</p>

<p>Here are the two code snippets:</p>

<p><strong>C++:</strong></p>

<pre><code>Mat source;
VideoCapture stream(""Video.avi"");

if (!stream.isOpened()){
    std::cout &lt;&lt; ""Stream cannot be opened"" &lt;&lt; std::endl;
    return -1;
}
while(1)

    if(!stream.read(source)) {
        std::cout &lt;&lt; ""Error reading video frame"" &lt;&lt; endl;
    }

imshow(""Source"", source);
</code></pre>

<p>This fails to open Video.avi, and ""Error reading video frame"" is printed time after time. ffmpeg.dll is in the path and I have also installed ffdshow.</p>

<p><strong>C:</strong></p>

<pre><code>CvCapture* stream = cvCreateFileCapture( ""Video.avi"" );
IplImage* source;
while(1) {
    source = cvQueryFrame( stream );
    if( !source ) printf(""\n Problem"");
    Mat src(source);
    imshow(""source"", src);
    if(waitKey(1) &gt;= 0) break;
}
</code></pre>

<p>This opens Video.avi with no problem.</p>

<p>Thanks for your help !</p>

<p>PS. Maybe it's worth mentioning that Video.avi itself was created using OpenCV.</p>
",,2013-08-08 08:38:56,"OpenCV : .avi file doesn't open with C++ API, opens with C",<opencv><video><load><avi>,,,CC BY-SA 3.0,True,True,False,False,True
17326,18122724,2013-08-08 09:41:14,,"<p>I had previously used OpenCV 2.4.5 with some certain configs and packages on Ubuntu 12.04.1 but had issues upgrading to OpenCV 2.4.6.1 on Ubuntu 12.04.2</p>

<p>I would like to share some ideas (a compilation of noteworthy information gathered from several sources including SO, ubuntu.org, asklinux.org and many other; and of course by trying several procedures)</p>

<p>Below is what eventually got me through.</p>

<p>NOTE: ensure you uninstall any previous installation of OpenCV, FFMpeg and other dependencies previously installed.</p>

<h1>STEP 1 (install ffmpeg and dependencies)</h1>

<hr>

<pre><code># goto http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/
# download the latest stable opencv such as 2.4.6.1 (http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.5/opencv-2.4.5.1.tar.gz/download) to current directory (such as home or ~/Document)
# cd /opt
# tar -xvf &lt;path-to-download-folder&gt;/OpenCV-2.4.6.1.tar.gz
# cd OpenCV-2.4.6.1
# create a foler under current dir (following previous step, this should be &lt;opencv-dir&gt;), called prepare
# cd prepare
# Copy the following script to gedit and save as install.sh to current dir, this should be &lt;opencv-dir&gt;/prepare
# Check corresponding url used in the script for latest versions of the package and replace as required
# Open terminal and navigate to location used above
# sudo chmod +x install.sh
# ./install
</code></pre>

<hr>

<pre><code>echo ""Removing any pre-installed ffmpeg, x264, and other dependencies (not all the previously installed dependecies)""
sudo apt-get remove ffmpeg x264 libx264-dev libvpx-dev librtmp0 librtmp-dev libopencv-dev
sudo apt-get update

arch=$(uname -m)
if [ ""$arch"" == ""i686"" -o ""$arch"" == ""i386"" -o ""$arch"" == ""i486"" -o ""$arch"" == ""i586"" ]; then
flag=0
else
flag=1
fi

echo ""Installing Dependenices""
sudo apt-get install autoconf automake make g++ curl cmake bzip2 python unzip \
  build-essential checkinstall git git-core libass-dev libgpac-dev \
  libsdl1.2-dev libtheora-dev libtool libva-dev libvdpau-dev libvorbis-dev libx11-dev \
  libxext-dev libxfixes-dev pkg-config texi2html zlib1g-dev

echo ""downloading yasm (assembler used by x264 and FFmpeg)""
# use git or tarball (not both)
wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz
tar xzvf yasm-1.2.0.tar.gz
cd yasm-1.2.0

echo ""installing yasm""
./configure
make
sudo make install
cd ..

echo 'READ NOTE BELOW which was extracted from http://wiki.serviio.org/doku.php?id=build_ffmpeg_linux'
echo 'New version of x264 contains by default support of OpenCL. If not installed or without sense (example Ubuntu 12.04LTS on VMWare) add to configure additional option --disable-opencl. Without this option ffmpeg could not be configured (ERROR: libx264 not found).'

echo ""downloading x264 (H.264 video encoder)""
# use git or tarball (not both)
# git clone http://repo.or.cz/r/x264.git or
git clone git://git.videolan.org/x264.git
cd x264
# wget ftp://ftp.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-20130801-2245-stable.tar.bz2
# tar -xvjf x264-snapshot-20130801-2245-stable.tar.bz2
# cd x264-snapshot-20130801-2245-stable/

echo ""Installing x264""
if [ $flag -eq 0 ]; then
./configure --enable-static --disable-opencl
else
./configure --enable-shared --enable-pic --disable-opencl
fi
make
sudo make install
cd ..

echo ""downloading fdk-aac (AAC audio encoder)""
# use git or tarball (not both)
git clone --depth 1 git://github.com/mstorsjo/fdk-aac.git
cd fdk-aac

echo ""installing fdk-aac""
autoreconf -fiv
./configure --disable-shared
make
sudo make install
cd ..

echo ""installing libmp3lame-dev (MP3 audio encoder.)""
sudo apt-get install libmp3lame-dev

echo ""downloading libopus (Opus audio decoder and encoder.)""
wget http://downloads.xiph.org/releases/opus/opus-1.0.3.tar.gz
tar xzvf opus-1.0.3.tar.gz
cd opus-1.0.3

echo ""installing libopus""
./configure --disable-shared
make
sudo make install
cd ..

echo ""downloading libvpx VP8/VP9 video encoder and decoder)""
# use git or tarball (not both)
git clone --depth 1 http://git.chromium.org/webm/libvpx.git
cd libvpx
# wget http://webm.googlecode.com/files/libvpx-v1.1.0.tar.bz2 (this seems not to be update, but can still be used if the fedoraproject link below is not available))
# wget http://pkgs.fedoraproject.org/repo/pkgs/libvpx/libvpx-v1.2.0.tar.bz2/400d7c940c5f9d394893d42ae5f463e6/libvpx-v1.2.0.tar.bz2
# tar xvjf libvpx-v1.2.0.tar.bz2
# cd libvpx-v1.2.0

echo ""installing libvpx""
./configure --disable-examples
make
sudo make install
cd ..

sudo ldconfig

echo ""downloading ffmpeg""
# git clone http://repo.or.cz/r/ffmpeg.git
git clone git://source.ffmpeg.org/ffmpeg.git
cd ffmpeg/
# wget http://ffmpeg.org/releases/ffmpeg-2.0.tar.bz2
# tar -xvjf ffmpeg-2.0.tar.bz2
# cd ffmpeg-2.0/

echo ""installing ffmpeg"" 
if [ $flag -eq 0 ]; then
./configure --enable-gpl --enable-libass --enable-libfdk-aac --enable-libopus --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab --enable-libvpx
else
./configure --enable-gpl --enable-libass --enable-libfdk-aac --enable-libopus --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab --enable-libvpx --enable-shared
fi

make
sudo make install
hash -r

cd .. # move up one level to prepare folder
cd .. # move up one level to opencv folder

echo ""Checking to see if you're using your new ffmpeg""
ffmpeg 2&gt;&amp;1 | head -n1

sudo ldconfig
</code></pre>

<h1>STEP 2 (Install OpenCV and necessary packages)</h1>

<pre><code>echo ""Installing Dependenices""    
sudo apt-get install libtiff4-dev libjpeg-dev libjasper-dev

echo ""installing Video I/O libraries, support for Firewire video cameras and video streaming libraries""
sudo apt-get install libav-tools libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev libxine-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev v4l-utils v4l-conf

echo ""installing the Python development environment and the Python Numerical library""
sudo apt-get install python-dev python-numpy

echo ""installing the parallel code processing library (the Intel tbb library)""
sudo apt-get install libtbb-dev

echo ""installing the Qt dev library""
sudo apt-get install libqt4-dev libgtk2.0-dev

echo ""installing other dependencies (if need be it would upgrade current version of the packages)""
sudo apt-get install patch subversion ruby librtmp0 librtmp-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libvpx-dev libxvidcore-dev

echo installing optional packages""
sudo apt-get install libdc1394-utils libdc1394-22-dev libdc1394-22 libjpeg-dev libpng-dev libtiff-dev libjasper-dev
</code></pre>

<h1>STEP 3 (run ldconfig)</h1>

<pre><code># Open a new terminal window
# Open /etc/ld.so.conf and check, 
# if the paths ""/usr/lib"" and ""/usr/local/lib"" including the quote exist in the file. If not, add them manually or by
    sudo echo ""/usr/local/lib"" &gt;&gt; /etc/ld.so.conf
    sudo echo ""/usr/lib"" &gt;&gt; /etc/ld.so.conf
# execute the following
    sudo ldconfig
</code></pre>

<h1>STEP 4a (Build &amp; Install for OS Usage)</h1>

<pre><code># still ensure you haven't close the new terminal window open in STEP 3
# execute the following
mkdir os_build
cd os_build
cmake -DCMAKE_BUILD_TYPE=RELEASE -DCMAKE_INSTALL_PREFIX=/usr/local -DBUILD_NEW_PYTHON_SUPPORT=ON -DINSTALL_PYTHON_EXAMPLES=ON -DWITH_TBB=ON -DWITH_V4L=ON -DINSTALL_C_EXAMPLES=ON -DBUILD_EXAMPLES=ON -DWITH_QT=ON -DWITH_OPENGL=ON -DWITH_OPENCL=ON -DWITH_EIGEN=ON -DWITH_OPENEXR=ON ..

    make
    sudo make install

# add the following to user environment variable ~/.bashrc
    export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:/usr/local/lib
    export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:/usr/local/lib/pkgconfig
# execute the following
    sudo ldconfig
# start to use and enjoy opencv, it should have been install into any of these locations
#   /usr/local/include/opencv2, /usr/local/include/opencv, /usr/include/opencv, /usr/include/opencv2, /usr/local/share/opencv
#   /usr/local/share/OpenCV, /usr/share/opencv, /usr/share/OpenCV, /usr/local/bin/opencv*, /usr/local/lib/libopencv*
</code></pre>

<h1>STEP 4b (Build for Java Usage): OPTIONAL</h1>

<pre><code># still ensure you haven't close the new terminal window open in STEP 4
# execute the following
    cd ..
    mkdir java_build
    cd java_build
    cmake -DCMAKE_BUILD_TYPE=RELEASE -DBUILD_SHARED_LIBS=OFF -DINSTALL_PYTHON_EXAMPLES=ON -DWITH_TBB=ON -DWITH_V4L=ON -DINSTALL_C_EXAMPLES=ON -DBUILD_EXAMPLES=ON -DWITH_QT=ON -DWITH_OPENGL=ON -DWITH_OPENCL=ON -DWITH_EIGEN=ON -DWITH_OPENEXR=ON ..

    make

# You can check the ""java_build/bin"" directory to locate the jar and libopencv_java.so file for your development
# As stated in the docs, the Java bindings dynamic library is all-sufficient, i.e. doesn’t depend on other OpenCV libs, but includes all the OpenCV code inside
</code></pre>

<h1>STEP 5 (install v4l: Note: installing v4l-utils after opencv installation works for Ubuntu 12.04.2 &amp; OpenCV 2.4.6.1)</h1>

<pre><code># still ensure you haven't close the new terminal window open in STEP 3
# goto http://www.linuxtv.org/downloads/v4l-utils
# download the latest v4l such as v4l-utils-0.9.5.tar.bz2
# copy the downloaded file to the current terminal dir (following previous step, this should be &lt;opencv-dir&gt;/prepare)
# execute the following
    tar -xvjf v4l-utils-0.9.5.tar.bz2
    cd v4l-utils-0.9.5/
    ./configure
    make
    sudo make install
    cd ..
    cd .. # (to go to &lt;opencv-dir&gt;)
    sudo ldconfig
</code></pre>

<h1>Worth Noting</h1>

<pre><code># To check the path where opencv &amp; other lib files are stored, do:


pkg-config --cflags opencv

    (output will come as)
    -I/usr/include/opencv



pkg-config --libs opencv

    (output will come as)
    -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ --ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann

# The above paths are needed to compile your opencv programs, as given in the next illustration.

# write a simple C program to test, by saving below program in a file named DisplayImage.c

#include &lt;stdio.h&gt;
    #include &lt;opencv2/highgui/highgui.hpp&gt;

    int main(int argc, char *argv[]) {
        IplImage* img=0; /* pointer to an image */
        printf(""Hello\n"");

        if(argv[1] != 0)
            img = cvLoadImage(argv[1], 0); // 1 for color
        else
            printf(""Enter filename\n"");

        if(img != 0) {
            cvNamedWindow(""Display"", CV_WINDOW_AUTOSIZE); // create a window
            cvShowImage(""Display"", img); // show image in window
            cvWaitKey(0); // wait until user hits a key
            cvDestroyWindow(""Display"");
        }
        else
            printf(""File not found\n"");

        return 0;
    }

# write a simple C++ program to test, by saving below program in a file named DisplayImage.cpp

#include &lt;stdio.h&gt;
#include &lt;opencv2/opencv.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;

using namespace cv;

int main( int argc, char** argv )
{
  Mat image;
  image = imread( argv[1], 1 );

  if( argc != 2 || !image.data )
    {
      printf( ""No image data \n"" );
      return -1;
    }

  namedWindow( ""Display Image"", CV_WINDOW_AUTOSIZE );
  imshow( ""Display Image"", image );

  waitKey(0);

  return 0;
}

# To compile &amp; run :



g++ &lt;filename: e.g. DisplayImage.c or DisplayImage.cpp&gt; `pkg-config --cflags --libs opencv` &amp;&amp; ./a.out img

or



g++ -I/usr/include/opencv -I/usr/local/include -lopencv_core -lopencv_highgui -lopencv_ml -lopencv_imgproc -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann -lopencv_nonfree &lt;filename: e.g. DisplayImage.c or DisplayImage.cpp&gt; &amp;&amp; ./a.out img

where “img” is the name of any image with extension within the same folder .
You should be able to see “Hello” and the image in a different window.

If this runs, Congrats! now you can run any C/C++ program with opencv lib.


# Now lets simplify the above big command by making a shortcut for it:
go to your local home directory(cd /home/) and open the .bashrc file using gedit(the file will be hidden). Append the following to the file:



alias gcv=""g++ -I/usr/include/opencv -I/usr/local/include -lopencv_core -lopencv_highgui -lopencv_ml -lopencv_imgproc -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann -lopencv_nonfree""

and save. Close the terminal and open it again.(as this process requires relogin of the terminal)

# Now, go to directory containing a sample program &amp; do



gcv &lt;filename: e.g. DisplayImage.c or DisplayImage.cpp&gt; &amp;&amp; ./a.out

or



gcv &lt;filename: e.g. DisplayImage.c or DisplayImage.cpp&gt;
    ./a.out input_img.jpg
</code></pre>

<p>As you can see the commands now become similar to $cc filename.c, $./a.out which are used normally for compiling and executing C/C++ programs.</p>

<hr>

<p>Some ways to check whether all lib files are installed-</p>

<pre><code>apt-cache search opencv
</code></pre>

<p>returns:</p>

<pre><code>libcv-dev - Translation package for libcv-dev
libcv2.3 - computer vision library - libcv* translation package
libcvaux-dev - Translation package for libcvaux-dev
libcvaux2.3 - computer vision library - libcvaux translation package
libhighgui-dev - Translation package for libhighgui-dev
libhighgui2.3 - computer vision library - libhighgui translation package
libopencv-calib3d-dev - development files for libopencv-calib3d
libopencv-calib3d2.3 - computer vision Camera Calibration library
libopencv-contrib-dev - development files for libopencv-contrib
libopencv-contrib2.3 - computer vision contrib library
libopencv-core-dev - development files for libopencv-core
libopencv-core2.3 - computer vision core library
libopencv-dev - development files for opencv
libopencv-features2d-dev - development files for libopencv-features2d
libopencv-features2d2.3 - computer vision Feature Detection and Descriptor Extraction library
libopencv-flann-dev - development files for libopencv-flann
libopencv-flann2.3 - computer vision Clustering and Search in Multi-Dimensional spaces library
libopencv-gpu-dev - development files for libopencv-gpu
libopencv-gpu2.3 - computer vision GPU Processing library
libopencv-highgui-dev - development files for libopencv-highgui
libopencv-highgui2.3 - computer vision High-level GUI and Media I/O library
libopencv-imgproc-dev - development files for libopencv-imgproc
libopencv-imgproc2.3 - computer vision Image Processing library
libopencv-legacy-dev - development files for libopencv-legacy
libopencv-legacy2.3 - computer vision legacy library
libopencv-ml-dev - development files for libopencv-ml
libopencv-ml2.3 - computer vision Machine Learning library
libopencv-objdetect-dev - development files for libopencv-objdetect
libopencv-objdetect2.3 - computer vision Object Detection library
libopencv-video-dev - development files for libopencv-video
libopencv-video2.3 - computer vision Video analysis library
opencv-doc - OpenCV documentation and examples
python-opencv - Python bindings for the computer vision library
</code></pre>
",2016-05-30 00:30:44,2016-05-30 00:30:44,Setting/Installing up OpenCV 2.4.6.1+ on Ubuntu 12.04.02,<opencv><ffmpeg><installation><ubuntu-12.04>,,,CC BY-SA 3.0,True,True,False,False,True
17353,23671306,2014-05-15 07:00:17,,"<p>I am writing an Android application which records video for a specified amount of time. Everything works fine if I record using the smartphone's back camera. The app has a feature to pause/record feature like in Vine app. The issue comes when recording using the device's front camera. The video surface frame looks fine when storing/playing the video the video is upside down. There is a lot of things discussed about this issue everywhere. But I didn't find any solution that WORKS. </p>

<p>Have a look at the code and image mentioned below. </p>

<p>Here is the original image taken from front camera. I have turned it upside down for a better view.</p>

<p><img src=""https://i.stack.imgur.com/Hhh0l.png"" alt=""enter image description here""></p>

<p>Here is what I actually get after rotation:</p>

<p><img src=""https://i.stack.imgur.com/tD33Y.png"" alt=""enter image description here""></p>

<p>Method:</p>

<pre><code>     IplImage copy = cvCloneImage(image);
     IplImage rotatedImage = cvCreateImage(cvGetSize(copy), copy.depth(), copy.nChannels());
     //Define Rotational Matrix
     CvMat mapMatrix = cvCreateMat(2, 3, CV_32FC1);

     //Define Mid Point
     CvPoint2D32f centerPoint = new CvPoint2D32f();
     centerPoint.x(copy.width() / 2);
     centerPoint.y(copy.height() / 2);

     //Get Rotational Matrix
     cv2DRotationMatrix(centerPoint, angle, 1.0, mapMatrix);

     //Rotate the Image
     cvWarpAffine(copy, rotatedImage, mapMatrix, CV_INTER_CUBIC + CV_WARP_FILL_OUTLIERS, cvScalarAll(170));
     cvReleaseImage(copy);
     cvReleaseMat(mapMatrix);
</code></pre>

<p>I have tried doing </p>

<pre><code>     double angleTemp = angle;

     angleTemp= ((angleTemp / 90)%4)*90;       
     final int number = (int) Math.abs(angleTemp/90);

     for(int i = 0; i != number; ++i){            
         cvTranspose(rotatedImage, rotatedImage);
         cvFlip(rotatedImage, rotatedImage, 0);           
     }
</code></pre>

<p>Ends up in throwing exception saying that source and destination doesn't match with number of columns and rows.</p>

<p><strong>Update:</strong></p>

<p>Video is recorded in this way.</p>

<pre><code>IplImage newImage = null;
if(cameraSelection == CameraInfo.CAMERA_FACING_FRONT){
    newImage = videoRecorder.rotate(yuvIplImage, 180);
    videoRecorder.record(newImage);
}
else
    videoRecorder.record(yuvIplImage);  
</code></pre>

<p>Rotation is done in this way:</p>

<pre><code>    IplImage img = IplImage.create(image.height(), image.width(),
            image.depth(), image.nChannels());

    for (int i = 0; i &lt; 180; i++) {
        cvTranspose(image, img);
        cvFlip(img, img, 0);
    }
</code></pre>

<p>Can anyone point out what is wrong here if you have experienced this before?</p>
",2014-05-15 10:14:10,2015-02-26 10:23:03,Issue with image rotation using JavaCV library,<java><android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
17399,18126732,2013-08-08 13:00:31,,"<p>I'm trying to build OpenCV with CMake but when I build it, some stuff goes wrong and I have no idea what to do to fix it.</p>

<p>So the question basically is: How do I fix it?</p>

<pre><code>user@BEL-PC:~/opencv/build$ cmake -DBUILD_SHARED_LIBS=OFF ..
-- The CXX compiler identification is unknown
-- The C compiler identification is GNU
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Performing Test HAVE_CXX_FSIGNED_CHAR
CMake Error at /usr/share/cmake-2.8/Modules/CMakeCXXInformation.cmake:37 (GET_FILENAME_COMPONENT):
  get_filename_component called with incorrect number of arguments
Call Stack (most recent call first):
  CMakeLists.txt:2 (PROJECT)


CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
CMake Error: Internal CMake error, TryCompile configure of cmake failed
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Failed
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Could NOT find ZLIB (missing:  ZLIB_LIBRARY ZLIB_INCLUDE_DIR) 
-- Looking for fseeko
-- Looking for fseeko - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of off64_t
-- Check size of off64_t - failed
-- Could NOT find TIFF (missing:  TIFF_LIBRARY TIFF_INCLUDE_DIR) 
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Looking for assert.h
-- Looking for assert.h - found
-- Looking for fcntl.h
-- Looking for fcntl.h - found
-- Looking for io.h
-- Looking for io.h - not found
-- Looking for jbg_newlen
-- Looking for jbg_newlen - not found
-- Looking for mmap
-- Looking for mmap - found
-- Looking for search.h
-- Looking for search.h - found
-- Looking for string.h
-- Looking for string.h - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Could NOT find JPEG (missing:  JPEG_LIBRARY JPEG_INCLUDE_DIR) 
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Found JPEG: libjpeg 
-- Could NOT find Jasper (missing:  JASPER_LIBRARY JASPER_INCLUDE_DIR) 
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Found ZLIB: zlib (found version ""1.2.7"")
-- Could NOT find PNG (missing:  PNG_LIBRARY PNG_PNG_INCLUDE_DIR) 
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Looking for semaphore.h
-- Looking for semaphore.h - found
-- checking for module 'gtk+-2.0'
--   package 'gtk+-2.0' not found
-- checking for module 'gthread-2.0'
--   package 'gthread-2.0' not found
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libv4l1'
--   package 'libv4l1' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
CMake Error at /usr/share/cmake-2.8/Modules/CMakeCXXInformation.cmake:37 (GET_FILENAME_COMPONENT):
  get_filename_component called with incorrect number of arguments
Call Stack (most recent call first):
  CMakeLists.txt:2 (PROJECT)


CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
CMake Error: Internal CMake error, TryCompile configure of cmake failed
-- Found PythonInterp: /usr/bin/python (found suitable version ""2.7.3"", required is ""2.0"")
-- Could NOT find PythonLibs (missing:  PYTHON_INCLUDE_DIRS) (Required is at least version ""2.7.3"")
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named numpy.distutils
-- Found apache ant 1.8.2: /usr/bin/ant
-- Found JNI: /usr/lib/jvm/java-6-openjdk/jre/lib/amd64/libjawt.so 
-- Could NOT find OPENCL (missing:  OPENCL_LIBRARY OPENCL_INCLUDE_DIR) 
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- 
-- General configuration for OpenCV 2.4.6.1 =====================================
--   Version control:               2.4.6.1-176-g1c55096
-- 
--   Platform:
--     Host:                        Linux 3.5.0-37-generic x86_64
--     CMake:                       2.8.7
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      NO
--     C++ Compiler:                CMAKE_CXX_COMPILER-NOTFOUND
--     C++ flags (Release):         
--     C++ flags (Debug):           
--     C Compiler:                  /usr/bin/gcc
--     C flags (Release):           -fsigned-char -O3 -DNDEBUG 
--     C flags (Debug):             -fsigned-char -g 
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         NO
-- 
--   OpenCV modules:
--     To be built:                 core imgproc flann highgui features2d calib3d ml video objdetect contrib photo legacy gpu nonfree java stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera ocl python
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    NO
--     GThread :                    NO
--     GtkGlExt:                    NO
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        zlib (ver 1.2.7)
--     JPEG:                        libjpeg (ver 62)
--     PNG:                         build (ver 1.5.12)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/YES
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python (ver 2.7.3)
-- 
--   Java:
--     ant:                         /usr/bin/ant (ver 1.8.2)
--     JNI:                         /usr/lib/jvm/jdk1.7.0_21/include /usr/lib/jvm/jdk1.7.0_21/include/linux /usr/lib/jvm/jdk1.7.0_21/include
--     Java tests:                  YES
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/user/opencv/build
-- -----------------------------------------------------------------
-- 
-- Configuring incomplete, errors occurred!
</code></pre>
",,2013-08-08 13:29:32,CMake fails when building OpenCV (Ubuntu),<linux><opencv><ubuntu><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
17407,19070333,2013-09-28 18:33:34,,"<p>I am currently trying to save the animation made in <code>openGL</code> to a video file. I have tried using <code>openCV</code>'s <code>videowriter</code> but to no advantage. I have successfully been able to generate a snapshot and save it as <code>bmp</code> using the <code>SDL</code> library. If I save all snapshots and then generate the video using <code>ffmpeg</code>, that is like collecting 4 GB worth of images. Not practical.
How can I write video frames directly during rendering?
Here the code i use to take snapshots when I require:</p>

<pre><code>void snapshot(){
SDL_Surface* snap = SDL_CreateRGBSurface(SDL_SWSURFACE,WIDTH,HEIGHT,24, 0x000000FF, 0x0000FF00, 0x00FF0000, 0);
char * pixels = new char [3 *WIDTH * HEIGHT];
glReadPixels(0, 0,WIDTH, HEIGHT, GL_RGB, GL_UNSIGNED_BYTE, pixels);

for (int i = 0 ; i &lt;HEIGHT ; i++)
    std::memcpy( ((char *) snap-&gt;pixels) + snap-&gt;pitch * i, pixels + 3 * WIDTH * (HEIGHT-i - 1), WIDTH*3 );

delete [] pixels;
SDL_SaveBMP(snap, ""snapshot.bmp"");
SDL_FreeSurface(snap);
}
</code></pre>

<p>I need the video output. I have discovered that <code>ffmpeg</code> can be used to create videos from C++ code but have not been able to figure out the process. Please help!</p>

<p><strong>EDIT</strong> : I have tried using <code>openCV</code> <code>CvVideoWriter</code> class but the program crashes (""<code>segmentation fault</code>"") the moment it is declared.Compilation shows no errors ofcourse. Any suggestions to that?</p>

<p><strong>SOLUTION FOR PYTHON USERS</strong> (Requires <code>Python2.7</code>,<code>python-imaging</code>,<code>python-opengl</code>,<code>python-opencv</code>, codecs of format you want to write to, I am on <code>Ubuntu 14.04 64-bit</code>): </p>

<pre><code>def snap():
    pixels=[]
    screenshot = glReadPixels(0,0,W,H,GL_RGBA,GL_UNSIGNED_BYTE)
    snapshot = Image.frombuffer(""RGBA"",W,H),screenshot,""raw"",""RGBA"",0,0)
    snapshot.save(os.path.dirname(videoPath) + ""/temp.jpg"")
    load = cv2.cv.LoadImage(os.path.dirname(videoPath) + ""/temp.jpg"")
    cv2.cv.WriteFrame(videoWriter,load)
</code></pre>

<p>Here <code>W</code> and <code>H</code> are the window dimensions (width,height). What is happening is I am using PIL to convert the raw pixels read from the <code>glReadPixels</code> command into a <code>JPEG</code> image. I am loading that JPEG into the <code>openCV</code> image and writing to the videowriter. I was having certain issues by directly using the PIL image into the videowriter (which would save millions of clock cycles of <code>I/O</code>), but right now I am not working on that. <code>Image</code> is a <code>PIL</code> module <code>cv2</code> is a <code>python-opencv</code> module.</p>
",2014-05-19 18:20:55,2018-11-03 16:23:54,Saving the openGL context as a video output,<c++><opengl><opencv><ffmpeg><sdl>,,,CC BY-SA 3.0,True,False,False,False,True
17472,17189643,2013-06-19 11:09:32,,"<p>I need to <strong>join/merge/concatenate</strong> more than two different video files (Eg :3gp, mp4 ) in android platform <strong>and need to store them as mp4 file.</strong></p>

<p>So far from my analysis, I’ve seen people referring FFMPEG for these purposes. </p>

<p>Is <strong>FFMPEG</strong> available for android? Or any other alternative packages available for video concatenation ? </p>

<p>Can FFMPEG concatenate two different kinds of Video files?(Eg: <strong>Combination</strong> of mp4 and 3gp)</p>

<p>Update: Can <strong>OpenGL</strong> be helpful for merging more than two videos along with audio?</p>
",2013-06-19 12:52:49,2013-06-19 13:31:05,Video Concatenation or Merging,<android><opencv><opengl-es><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
17496,23683960,2014-05-15 16:32:22,,"<p>I want to be able to take a video recorded with an Android device and encode it to a new Resolution and Frame Rate using my app. The purpose is to upload a much smaller version of the original video (in size), since this will be videos 30 min long or more.</p>

<p>So far, I've read of people saying FFmpeg is they way to go. However, the documentation seems to be lacking.</p>

<p>I have also considered using http opencv <a href=""http://opencv.org/platforms/android.html"" rel=""nofollow"">http://opencv.org/platforms/android.html</a></p>

<p>Considering I need to manipulate the video resolution and frame rate, which tool do you think can do such things better? Are there any other technologies to consider?</p>

<p>An important question is, since this will be long videos, is it reasonable to do the encoding in an android device (Consider power resources, time, etc.)</p>

<p>Thanks in advance!</p>
",,2017-02-24 09:07:31,Android video encoding with fr and resolution manipulation,<android><opencv><video><encoding><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
17528,19082839,2013-09-29 20:20:31,,"<p>I'm using OpenCV python to capture a video. 
This is my code</p>

<pre><code>import cv2

cap = cv2.VideoCapture(""vid.mp4"")
while True:
    flag, frame =  cap.read()

    if not flag:
        cv2.imshow('video', frame)

    if cv2.waitKey(10) == 27:
        break
</code></pre>

<p>When a frame is not ready it produces an error like this</p>

<p><img src=""https://i.stack.imgur.com/JzAux.png"" alt=""enter image description here""></p>

<p>or</p>

<pre><code>Truncating packet of size 2916 to 1536
[h264 @ 0x7ffa4180be00] AVC: nal size 2912
[h264 @ 0x7ffa4180be00] AVC: nal size 2912
[h264 @ 0x7ffa4180be00] no frame!

[mov,mp4,m4a,3gp,3g2,mj2 @ 0x7ffa41803000] stream 0, offset 0x14565: partial file
</code></pre>

<p>I wanted to find a way to hide this error! I guess that this error is being produced by <code>ffmpeg</code>. Is there any way to hide or disable it?</p>

<p>This error is produced when I call <code>cap.read()</code>. And I also tried to wrap it with <code>try ... except ...</code> but it doesn't work because it doesn't throw any exceptions.</p>
",,2019-12-20 13:50:16,How to hide/disable ffmpeg erros when using OpenCV (python)?,<python><opencv><error-handling><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
17726,18160711,2013-08-10 09:50:24,,"<p>I'm developing some Video Editing Apps on Android.</p>

<p>the objective of the app is ""Editing Videos on Android"".</p>

<p>and...</p>

<p>I'm just completed making video file using some images.
but.. I can't attach audio into the video.</p>

<h2>my method is same as follows.</h2>

<p>1.VideoStream, audio stream creation using AVFormatContext</p>

<p>2.Movie encoding in video stream was successful </p>

<p>3.Encode codec open in audio stream was successful</p>

<p>4.Set sample format to AV_SAMPLE_FMT_FLTP</p>

<p>5.Sample rate and channel was set same as source audio</p>

<p>6.Choose appropriate Decoder and read packet</p>

<p>7.Convert packets using swr_converter, setting same as sample format</p>

<p>8.Encode converted data</p>

<p>9.memory deallocation</p>

<p>10.END!</p>

<hr>

<h2>Problem is here:</h2>

<p>Video of finally created video file was normally played. but the Audio wasn't.</p>

<p>It heared like weird. It have many noises and plays slowly.</p>

<p>I've googled with many keywords but they only say about ""FFmpeg command line usage"".</p>

<p>I wanna make with FFMpeg API. not a Command line tool.</p>

<p>Please help.</p>
",,2013-08-12 20:16:53,How to copy audio stream using FFMpeg API ( not a command line tool ),<opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
17795,24814654,2014-07-17 22:36:44,,"<p>The Android application code is from:
<a href=""http://www.walking-productions.com/notslop/2013/01/16/android-live-streaming-courtesy-of-javacv-and-ffmpeg/"" rel=""nofollow"">Android Live Streaming courtesy of JavaCV and FFMPEG</a></p>

<p>It streams the live camera video from the device.</p>

<p>I follow one comment's instruction (Yoshio Numai), to use Red5 as the stream server.
By Red5 itself, I can successfully use simpleBroadcaster and simpleSubscriber to stream and display the live camera (from the computer) steam.</p>

<p>In the MainActivity.java, I change the code as below:</p>

<pre><code>private String ffmpeg_link = ""rtmp://192.168.1.105/oflaDemo/red5StreamDemo""; 
</code></pre>

<p>And I can start the app in my Android device (Nexus 4).
after click ""start"", the app crash, pops out a small window, saying:
""Unfortunately, JavaCV 0.3 Stream Test has stopped. OK.""</p>

<p>Once I click the OK button, I find the app is still live in the task list.</p>

<p>But the same thing will happen. 
What's wrong here?</p>
",2014-12-15 09:15:16,2015-10-01 18:02:40,Android Live Streaming based on javaCV + FFMpeg crashes by adding red5 link,<android><ffmpeg><video-streaming><red5><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
17822,17221481,2013-06-20 18:48:52,,"<p>I have to batch process a very high number(200,000+) of short mp4s(less then 10s) into animated gifs.  I think I have tried every possible command line way of doing it, but it still takes too long to produce quality gifs.  Currently I use ffmpeg to unpack image(jpg) frames, and image magick convert to assemble them.  It produces high quality gifs, but takes too long and uses too much memory and CPU, even with tweaking with the -limit memory and map limits.</p>

<p>I have also tried creating animated gifs directly using ffmpeg, but the quality is terrible at best.  Also, I have tried using gifsicle, which does seem fast, but it only takes gifs as inputs, and using ffmpeg to generate them produces poor quality gifs.</p>

<p>Does anyone have some command line recipes for fast high quality gif creation?</p>
",,2017-05-23 13:40:36,Fastest way to create animated gifs from mp4,<linux><image-processing><ffmpeg><imagemagick><animated-gif>,,,CC BY-SA 3.0,False,False,False,False,True
18003,17236688,2013-06-21 13:37:35,,"<p>I am using OpenCV 2.4.5 on windows 7 to capture RTSP stream.But I am getting some corrupt images in between.I found that the error is in decoding in ffmpeg layer.I want to drop these corrupt frames.But I am not able to do that because opencv Mat::empty never returns true.
What could be the root cause of this and please let me know the solution for the same.</p>

<p>Here is an image for the reference:</p>

<p><img src=""https://i.stack.imgur.com/CrBab.jpg"" alt=""""></p>
",2013-06-21 13:40:11,2020-02-29 06:37:28,OpenCV RTSP H264 capture,<opencv><video><h.264><rtsp>,,,CC BY-SA 3.0,True,True,False,False,True
18063,17242505,2013-06-21 19:00:04,,"<p>I am trying to open a video (.avi) from a file, read frame by frame and show them in a window. I have looked here in stack overflow and found some interesting codes, but every one of them keeps blowing up my program and I don't know why. I used this code:</p>

<pre><code> int main( int argc, const char** argv ) {

    CvCapture* capture = 0;
    string inputName = ""C:\\Users\\Cristina\\Videos\\Capture_me.avi"";

    capture = cvCaptureFromAVI( inputName.c_str() );

    if( !capture ) {

        cout &lt;&lt; ""Capture from AVI didn't work"" &lt;&lt; endl;

    } else {

         cvNamedWindow( ""result"", CV_WINDOW_AUTOSIZE );
         cout &lt;&lt; ""In capture ..."" &lt;&lt; endl;

         IplImage* currFrame = cvQueryFrame( capture );
         IplImage* prevFrame = cvCloneImage( currFrame );

    while( currFrame = cvQueryFrame( capture ) ) {

          if( !currFrame )

             break;

          cvShowImage( ""result"", currFrame );
          cvCopy( currFrame , prevFrame );

    }

        waitKey(0);

        cvReleaseCapture( &amp;capture );
        cvReleaseImage( &amp;currFrame );
        cvDestroyWindow( ""result"" );

    }

    return 0;
}
</code></pre>

<p>The while loop condition throws: Unhandled exception at 0x0000000066E538C6 (opencv_ffmpeg245_64.dll) in FaceDetection.exe: 0xC0000005: Access violation reading location 0x0000000002EF1000.</p>

<p>I also tried the same program but with this loop:</p>

<pre><code>while( cvGrabFrame( capture ) ) {

        if( !currFrame )

            break;

        cvShowImage( ""result"", currFrame );
        cvCopy( currFrame, prevFrame );  
        currFrame = cvRetrieveFrame( capture );

    }
</code></pre>

<p>This second while loop condition throws the same exception at ""currFrame = cvRetrieveFrame( capture );"" : Unhandled exception at 0x0000000066E538C6 (opencv_ffmpeg245_64.dll) in FaceDetection.exe: 0xC0000005: Access violation reading location 0x0000000003011000.</p>

<p>Can someone please help me understand what is wrong with these codes and how do I fix them? Thanks!! </p>
",2013-06-22 10:13:49,2013-06-22 10:13:49,show a video from a file in opencv,<c++><c><opencv><video-streaming><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
18070,23733982,2014-05-19 09:16:58,,"<p>I want to make a simple video editor to create the video from some images.
It have some transform effects such as motion, scale, fade etc...</p>

<p>I tried to create the images per frame using ImageMagick and create the video using ffmpeg.</p>

<p>But it doens't move smoothly, seems to be kind of jaggy when it moves.</p>

<p>For example, for 10s x 30fps video, it needs 300 images. Source image should to move 300px.</p>

<p>The image in the result video moved 1px by 1px.</p>

<p>How to generate the images sequence for smooth motion effect to make a video?</p>
",,2014-05-24 12:59:53,How to generate the images sequence for video,<image><video><image-processing><ffmpeg><imagemagick>,,,CC BY-SA 3.0,False,False,False,False,True
18126,24843181,2014-07-19 17:40:55,,"<p>I am using IP Webcam APP for android and it is streaming MJPEG video through the local url :</p>

<pre><code>http://192.168.0.2:8080/video
</code></pre>

<p>I was able to show the video using VLC player and this piece of code in C++.
On the OpenCV 2.2 I opened the url using:</p>

<pre><code>VideoCapture cap;

cap.open(""http://192.168.0.2:8080/video?dummy=param.mjpg"");
</code></pre>

<p>It worked in C++, but I want it to work in Java. I was able to run OpenCV2.4.9 using Java when taking pictures from my built in webcam. This is my code for taking the images from a url in Java.</p>

<pre><code>System.loadLibrary(""opencv_java249"");

VideoCapture capture = new VideoCapture();

capture.open(""http://192.168.0.2:8080/video?dummy=param.mjpg"");
</code></pre>

<p>But the capture.open does not open the streaming and I could not debug it properly. I know that it might be a issue with the ffmpeg, since it works on OpenCV2.2. I also know that my OpenCV2.2 is specific for MS 2010 and might be more complete.</p>

<p>Would it help if I compile the OpenCV2.4.9 from sources? Is there a file that I could add to solve that problem? Is there another way of receiving the video from the IP camera and using on OpenCV?</p>
",2014-07-19 20:53:09,2015-11-14 18:40:22,IP Webcam on OpenCV for Java,<java><opencv><ffmpeg><video-streaming><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
18225,22593687,2014-03-23 16:34:58,,"<p>I am having trouble being able top open any video files in OpenCV besides those encoded in MJPEG.</p>

<p>I have installed OpenCV using <a href=""https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/2.4/opencv2_4_2.sh"" rel=""nofollow"">this</a> script (which should compile OpenCV with support for ffmpeg) and an testing using the sample provided <a href=""http://docs.opencv.org/doc/tutorials/highgui/video-write/video-write.html"" rel=""nofollow"">here</a>.</p>

<p>When running with a h264 encoded video I get:</p>

<pre><code>[mov,mp4,m4a,3gp,3g2,mj2 @ 0x123ed80] multiple edit list entries, a/v desync might occur, patch welcome
[h264 @ 0x12465e0] A non-intra slice in an IDR NAL unit.
[h264 @ 0x12465e0] decode_slice_header error
Could not open the output video for write: test.mp4
</code></pre>

<p>When running with an MPEG-2 encoded video I get:</p>

<pre><code>[mpegts @ 0x1e92d80] PES packet size mismatch
[mpegts @ 0x1e92d80] PES packet size mismatch
[mpegts @ 0x1e92d80] max_analyze_duration reached
[mpegts @ 0x1e92d80] PES packet size mismatch
Could not open the output video for write: test.mpeg
</code></pre>

<p>I am running x64 Ubuntu 12.04.</p>

<p>EDIT: I tried OpenCV 2.4.8 on a Ubuntu 13.10 x86 VM, <code>ffmpeg</code> works fine, however the sample code still fails, this time with the following error:</p>

<pre><code>[h264 @ 0x849ff40] A non-intra slice in an IDR NAL unit.
[h264 @ 0x849ff40] decode_slice_header error
Could not find encoder for codec id 28: Encoder not foundOpenCV Error: Unsupported format or combination of formats (Gstreamer Opencv backend doesn't support this codec acutally.) in CvVideoWriter_GStreamer::open, file /home/dan/Install-OpenCV/Ubuntu/2.4/OpenCV/opencv-2.4.8/modules/highgui/src/cap_gstreamer.cpp, line 505
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/dan/Install-OpenCV/Ubuntu/2.4/OpenCV/opencv-2.4.8/modules/highgui/src/cap_gstreamer.cpp:505: error: (-210) Gstreamer Opencv backend doesn't support this codec acutally. in function CvVideoWriter_GStreamer::open
</code></pre>
",2014-04-03 19:03:48,2014-04-03 19:03:48,Reading video files with OpenCV VideoCapture,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
18361,20314819,2013-12-01 17:08:09,,"<p>I am trying to use AMR_NB Codec in JavaCV Android but having problems:</p>

<p>This is the code i run:</p>

<pre><code>avcodec.avcodec_register_all();
avformat.av_register_all();
AVCodec mCodec = avcodec.avcodec_find_encoder(avcodec.AV_CODEC_ID_AMR_NB);
</code></pre>

<p>Output: The mCodec is null but if I pass avcodec.AV_CODEC_ID_AAC than mCodec is not null</p>

<p>I am assuming that I have to recompile ffmpeg with --enable-libopencore-amrnb. So, I downloaded Android NDKr9+ffmpeg-2.0.2+last_stable_x264 and added them to javacv-cppjars folder, I have also installed opencore-amr library in /usr/local. In ffmpeg-2.0.2-android-arm.patch i added the --enable-libopencore-amrnb flag and run following command in terminal</p>

<pre><code>ANDROID_NDK=/Users/android-ndk-r9b/ FFMPEG_VERSION=2.0.2 ./build_ffmpeg-android-arm.sh
</code></pre>

<p>The script runs but the libs are not generated and the jar is empty but if I remove the --enable-libopencore-amrnb flag back then the libs are generated successfully, Please advise what am I doing wrong? What should I do? Any help would be greatly appreciated!</p>

<p>by the way, I am using mac-osx</p>

<p>Thanks.</p>
",2013-12-02 07:13:55,2013-12-07 14:45:51,AMR-NB support in javacv -> ffmpeg,<android><android-ndk><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
18482,17274263,2013-06-24 11:22:13,,"<p>first of all I want to congratulate all the people that helps to make this site so unique and helpful as it is.</p>

<p>After that little introduction here is my question: </p>

<p>I'm trying to compile the last OpenCV version on Ubuntu 12.04 (32 bits) and I'm always getting the next errors:</p>

<pre><code>  **/home/srt/opencv/modules/core/src/gpu_info.cpp:468:34: error: no hay una función miembro ‘int cv::gpu::DeviceInfo::minor() const’ declarada en la clase ‘cv::gpu::DeviceInfo’**
  cc1plus: aviso: no se reconoce la opción de línea de órdenes ""-Wno-unnamed-type-template-args"" [activado por defecto]
  cc1plus: aviso: no se reconoce la opción de línea de órdenes ""-Wno-delete-non-virtual-dtor"" [activado por defecto]
  cc1plus: aviso: no se reconoce la opción de línea de órdenes ""-Wno-narrowing"" [activado por defecto]
  make[2]: *** [modules/core/CMakeFiles/opencv_core.dir/src/gpu_info.cpp.o] Error 1
  make[2]: *** Se espera a que terminen otras tareas....
  cc1plus: aviso: no se reconoce la opción de línea de órdenes ""-Wno-unnamed-type-template-args"" [activado por defecto]
  cc1plus: aviso: no se reconoce la opción de línea de órdenes ""-Wno-delete-non-virtual-dtor"" [activado por defecto]
  cc1plus: aviso: no se reconoce la opción de línea de órdenes ""-Wno-narrowing"" [activado por defecto]
  make[1]: *** [modules/core/CMakeFiles/opencv_core.dir/all] Error 2
  make: *** [all] Error 2
</code></pre>

<p>I tried uninstalling FFMPEG and using different cmake flags but nothing changes. I also tried searching on the web for related problems but I only found the FFMPEG recommendation but nothing about the gpu_info.cpp. Is this file necessary for  the compilation or I should try to exclude it from it somehow?</p>

<p>(I followed this tutorial for installing all the necessary files: <a href=""http://www.ozbotz.org/opencv-installation/"" rel=""nofollow"">http://www.ozbotz.org/opencv-installation/</a> 
 and here I found a similar question but none of the recommendations worked for me: <a href=""http://www.ozbotz.org/opencv-installation/"" rel=""nofollow"">http://stackoverflow.com/questions/16321616/opencv-2-4-5-make-error</a> )</p>

<p>Thanks in advance. </p>
",,2013-06-24 12:32:42,opencv 2.4.5 compilation errors (gpu_info.cpp),<opencv><compiler-errors><ubuntu-12.04>,,,CC BY-SA 3.0,True,False,False,False,True
18594,17283619,2013-06-24 19:35:58,,"<p>I have tried to install OpenCV in Ubuntu 13.04 to use my IP-camera with no success. I made step by step as this tutorial <a href=""http://www.ozbotz.org/opencv-installation/"" rel=""nofollow"">http://www.ozbotz.org/opencv-installation/</a> but It does not work for me. I have tried with other tutorials too, but I have the same problem, the Opencv tries to connect the camera by hours without any response.
I'm using this code to capture the video:</p>

<p>cap=cv2.VideoCapture(""http:/ /192.168.180.60:82/videostream.cgi?user=admin&amp;pwd="")</p>

<p>And that link works in my browser, so, the streaming is alive. I have installed the Opencv in virtual machines 6 times trying different configurations without success, maybe I made a mistake in any step, but according to the tutorials I'm right, I'm trying with this:</p>

<pre><code>sudo apt-get remove ffmpeg x264 libx264-dev
sudo apt-get update

sudo apt-get install libgstreamer0.10-0 libgstreamer0.10-dev gstreamer0.10-tools gstreamer0.10-plugins-base libgstreamer-plugins-base0.10-dev gstreamer0.10-plugins-good gstreamer0.10-plugins-ugly gstreamer0.10-plugins-bad gstreamer0.10-ffmpeg 

sudo apt-get install libgtk2.0-0 libgtk2.0-dev libjpeg8 libjpeg8-dev yasm

cd ~
mkdir src
cd src/


git clone git://git.videolan.org/x264.git
cd x264/
./configure --enable-shared --enable-pic


sudo make install libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore_amrwb-dev libtheora-dev libvorbis-dev libx264-dev libxvidcore-dev

cd ~/src
wget http://ffmpeg.org/releases/ffmpeg-0.11.1.tar.bz2
tar xvf ffmpeg-0.11.1.tar.bz2
cd ffmpeg-0.11.1

./configure --enable-gpl --enable-libfaac --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libvorbis --enable-libx264 --enable-libxvid --enable-nonfree --enable-postproc --enable-version3 --enable-x11grab --enable-shared --enable-pic

make
sudo make install


cd ~/src
wget http://www.linuxtv.org/downloads/v4l-utils/v4l-utils-0.9.5.tar.bz2

tar xvf v4l-utils-0.9.5.tar.bz2
cd v4l-utils-0.9.5
./configure  --enable-shared
make
sudo make install

sudo apt-get install libdc1394-22-dev
sudo apt-get install libvideo-ivtv-perl 


cd ~/src
wget http://downloads.sourceforge.net/project/opencvlibrary/opencv-unix/2.4.2/OpenCV-2.4.2.tar.bz2
tar xvf OpenCV-2.4.2.tar.bz2
cd OpenCV-2.4.2/
mkdir build
cd build

cmake -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D OPENCV_BUILD_3RDPARTY_LIBS=ON -D WITH_FFMPEG=ON -D WITH_GTK=ON -D WITH_OPENEXR=ON -D WITH_OPENNI=ON -D WITH_PNG=ON -D WITH_TBB=ON -D WITH_XINE=ON -D WITH_GSTREAMER=ON .
</code></pre>
",,2013-06-24 19:35:58,Installing OpenCv with gstreamer and ffmpeg support in Ubuntu 13.04 64bits,<opencv><ubuntu><ffmpeg><gstreamer><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
18601,19169258,2013-10-03 21:07:22,,"<p>I'm trying to read video file using FFmpegSource2 (FFMS2) and then process frames using OpenCV. What is the proper and efficient way to copy frame data from a FFMS_Frame struct returned by FFMS_GetFrame function to an OpenCV Mat?</p>

<p>Thank you very much in advance.</p>
",2013-10-04 13:17:34,2013-10-04 13:17:34,How to copy frame data from FFmpegSource2 (FFMS2) FFMS_Frame struct to OpenCV Mat?,<opencv><ffmpeg><frame><mat>,,,CC BY-SA 3.0,True,True,False,False,True
18606,24875752,2014-07-21 22:15:55,,"<p>I am trying to get representative frames for a video, so as to remove redundant frames which might appear in a video. This is what I use to get the frames.</p>

<p><code>./ffmpeg -i video.mp4 -vf select=""eq(pict_type\,PICT_TYPE_I)"" -vsync 2 -s 320x240 thumb-%02d.png</code></p>

<p>I have also tried</p>

<p><code>./ffmpeg -i video.mp4 -f image2 -vf ""select=gt(scene\,.4)"" -vsync vfr thumb%04d.png</code></p>

<p>The major issue in this is blur. If I just sample frames every 5 seconds, I don't see any blur, however using the above two commands I get a lot of blur.</p>

<p>The video can be found here, <a href=""http://www.cs.umd.edu/~bharat/video.mp4"" rel=""noreferrer"">http://www.cs.umd.edu/~bharat/video.mp4</a></p>

<p>In order to sample the video every 10 seconds, I use the following:</p>

<p><code>./ffmpeg -i video.mp4 -r 1/10 filename%03d.jpg</code></p>

<p>Output using normal sampling:
<img src=""https://i.stack.imgur.com/J9gnu.jpg"" alt=""sampling output""></p>

<p>Output using select:
<img src=""https://i.stack.imgur.com/5gZL1.jpg"" alt=""select output""></p>

<p>However, normal sampling may be bad for some videos, and may create redundant frames. Is there a way I could use some option in ffmpeg and get frames without this blur? If normal sampling can get good frames, there should be frames in the vicinity without blur. I have looked at options such as scenecut in ffmpeg however I am not familiar with using them for this application.</p>
",2014-07-25 12:23:38,2014-07-25 12:23:38,Scene change/shot detection/image extraction using ffmpeg from video,<video><image-processing><ffmpeg><computer-vision><video-processing>,,,CC BY-SA 3.0,False,False,False,False,True
18652,19174343,2013-10-04 06:01:14,,"<p><a href=""https://code.google.com/p/javacv/#Quick_Start_for_OpenCV_and_FFmpeg"" rel=""nofollow"">https://code.google.com/p/javacv/#Quick_Start_for_OpenCV_and_FFmpeg</a></p>

<p>I am trying to configure openCV in Android.
The above link asked to download <strong>opencv-2.4.6.1-android-arm.jar, and ffmpeg-2.0.1-android-arm.jar</strong></p>

<p>But I couldn;t find these jars anywhere,
Where can i download them.</p>

<p>The entire statement says-</p>

<ul>
<li><p>Extract all the *.so files from javacv-android-arm.jar,
   opencv-2.4.6.1-android-arm.jar, and ffmpeg-2.0.1-android-arm.jar
   directly into the newly created ""libs/armeabi"" folder, without
   creating any of the subdirectories found in the JAR files.</p></li>
</ul>
",,2013-10-05 20:03:57,"where to download opencv-2.4.6.1-android-arm.jar, and ffmpeg-2.0.1-android-arm.jar",<android><opencv><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
18756,22636271,2014-03-25 13:36:45,,"<p>I am trying to play AAC audio live stream coming from Red5 server, so to decode the audio data i am using Javacv-ffmpeg. Data is received as <strong>packets of byte[]</strong>
Here is what i tried  </p>

<pre><code>public Frame decodeAudio(byte[] adata,long timestamp){
    BytePointer audio_data = new BytePointer(adata);
    avcodec.AVCodec codec1 = avcodec.avcodec_find_decoder(avcodec.AV_CODEC_ID_AAC);// For AAC 
    if (codec1 == null) {
    Log.d(""showit"",""avcodec_find_decoder() error: Unsupported audio format or codec not found: "" +  audio_c.codec_id() + ""."");
    }
    audio_c = null;

    audio_c = avcodec.avcodec_alloc_context3(codec1);
    audio_c.sample_rate(44100);
    audio_c.sample_fmt(3);
    audio_c.bits_per_raw_sample(16);
    audio_c.channels(1);
    if ((ret = avcodec.avcodec_open2( audio_c, codec1, (PointerPointer)null)) &lt; 0) {
    Log.d(""showit"",""avcodec_open2() error "" + ret + "": Could not open audio codec."");
    }

   if (( samples_frame = avcodec.avcodec_alloc_frame()) == null)
    Log.d(""showit"",""avcodec_alloc_frame() error: Could not allocate audio frame."");

   avcodec.av_init_packet(pkt2);

   samples_frame = avcodec.avcodec_alloc_frame();
   avcodec.av_init_packet(pkt2);
   pkt2.data(audio_data);
   pkt2.size(audio_data.capacity());
   pkt2.pts(timestamp);
   pkt2.pos(0);

   int len = avcodec.avcodec_decode_audio4( audio_c,  samples_frame,  got_frame,  pkt2);
}  
</code></pre>

<p>But len after decoding returns -1 for first frame and then -22 always.<br>
First packet is like this always</p>

<pre><code>AF 00 12 08 56 E5 00
</code></pre>

<p>Further packets are like   </p>

<pre><code>AF 01 01 1E 34 2C F0 A4 71 19 06 00 00 95 12 AE AA 82 5A 38 F3 E6 C2 46 DD CB 2B 09 D1 00 78 1D B7 99 F8 AB 41 6A C4 F4 D2 40 51 17 F5 28 51 9E 4C F6 8F 15 39 49 42 54 78 63 D5 29 74 1B 4C 34 9B 85 20 8E 2C 0E 0C 19 D2 E9 40 6E 9C 85 70 C2 74 44 E4 84 9B 3C B9 8A 83 EC 66 9D 40 1B 42 88 E2 F3 65 CF 6D B3 20 88 31 29 94 29 A4 B4 DE 26 B0 75 93 3A 0C 57 12 8A E3 F4 B9 F9 23 9C 69 C9 D4 BF 9E 26 63 F2 78 D6 FD 36 B9 32 62 01 91 19 71 30 2D 54 24 62 A1 20 1E BA 3D 21 AC F3 80 33 3A 1A 6C 30 3C 44 29 F2 A7 DC 9A FF 0F 99 F2 38 85 AB 41 FD C7 C5 40 5C 3F EE 38 70
</code></pre>

<p>Couldn't figure out where is the problem, whether in setting the AVcodec context audio_c or setting packet for decoder.</p>

<p>Any help appreciated.  Thanks in advance.</p>
",2014-04-05 11:44:22,2016-12-21 11:46:19,Decoding AAC audio stream coming from red5 server with javacv-ffmpeg on Android,<android><ffmpeg><red5><javacv><live-streaming>,,,CC BY-SA 3.0,False,False,False,False,True
18805,19187055,2013-10-04 17:12:10,,"<p>I'm working with python 2.7 on Windows 7 64bit
I have opencv 2.4.6.0 installed and everything works execpt cv2.VideoCapture
I have this simple code:</p>

<pre><code>import cv2

vid = cv2.VideoCapture(""input.mov"")
flag = vid.grab()
print flag
</code></pre>

<p>flag is always False
I also tried loading .avi files, still doesn't work.
I have K-light codec pack installed and ffmpeg.
any suggestions?
Thanks!</p>
",,2013-10-04 17:12:10,opencv 2.4.6.0 Video Capture won't open files,<opencv><python-2.7>,,,CC BY-SA 3.0,True,False,False,False,True
18857,17302590,2013-06-25 16:24:11,,"<p>I'm trying to connect my ip-camera with OpenCV 2.4.5 in Python 2.7 with this function <code>cap=cv2.VideoCapture(""http://192.168.180.60:82/videostream.cgi?user=admin&amp;pwd="")</code> , but It gives me this error: </p>

<pre><code>input_bluray: (bluray_class_get_instance:1455) bluray_class_get_instance
input_bluray: (bluray_class_get_instance:1455) bluray_class_get_instance
demux_wavpack: (open_wv_file:127) open_wv_file: non-seekable inputs aren't supported yet.
(ERROR)icvOpenAVI_XINE(): Unable to open source 'http://192.168.180.60:82/videostream.cgi?user=admin&amp;pwd='
</code></pre>

<p>In <a href=""http://ubuntuforums.org/showthread.php?t=1076793&amp;page=2"" rel=""nofollow"">this forum</a> they discuss about the icvOpenAVI_XINE error as an ffmpeg problem with the --enable-shared flag, I did that a lot of times, and the problem persists</p>
",,2013-06-27 18:43:17,icvOpenAVI_XINE() error in VideoCapture Opencv,<python><opencv><ubuntu><ffmpeg><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
18882,21521957,2014-02-03 07:36:41,,"<p>I'm trying to use opencv with xubuntu on odroid board.</p>

<p>Download the opencv2.4.8
and executed the following commands</p>

<p><code>cmake -D CMAKE_BUILD_TYPE=REALEASE _D CMAKE_INSTALL_PREFIX=/usr/local/opencv</code>
<code>make</code></p>

<p>followed by
<a href=""http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation"" rel=""nofollow"">opencv linux install</a></p>

<p>but I got an error when I typed <code>make</code>.</p>

<pre><code>[  9%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_v4l.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_sunras.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_base.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_bmp.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_pxm.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_imageio.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_jpeg2000.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_png.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_exr.cpp.o
[ 10%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_tiff.cpp.o
[ 11%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/grfmt_jpeg.cpp.o
[ 11%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/bitstrm.cpp.o
Linking CXX shared library ../../lib/libopencv_highgui.so
/usr/bin/ld: cannot find -lopenal
/usr/bin/ld: cannot find -lxvidcore
/usr/bin/ld: cannot find -lx264
/usr/bin/ld: cannot find -lssh
/usr/bin/ld: cannot find -lmodplug
/usr/bin/ld: cannot find -lfaac
/usr/bin/ld: cannot find -lopenal
/usr/bin/ld: cannot find -lxvidcore
/usr/bin/ld: cannot find -lx264
/usr/bin/ld: cannot find -lssh
/usr/bin/ld: cannot find -lmodplug
/usr/bin/ld: cannot find -lfaac
collect2: error: ld returned 1 exit status
make[2]: *** [lib/libopencv_highgui.so.2.4.8] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>If I missed some libs, please tell me what kind of lib is needed and what I should do.</p>

<hr>

<p>I solved this problem by downloading these libs.    </p>

<pre><code>libopenal-dev
libxvidcore-dev
libx264-dev
libssh-dev
libmodplug-dev
libfaac-dev
libopenal-dev
libxvidcore-dev
libx264-dev
libssh-dev
libmodplug-dev
libfaac-dev
</code></pre>

<p>but this error appears.</p>

<pre><code>Linking CXX shared library ../../lib/libopencv_highgui.so
/usr/local/lib/libavcodec.a(videodsp_armv5te.o): In function `ff_prefetch_arm':
/home/odroid/odroid-sources/sources/ffmpeg/libavcodec/arm/videodsp_armv5te.S:29:(.text+0x8): relocation truncated to fit: R_ARM_THM_JUMP19 against symbol `ff_prefetch_arm' defined in .text section in /usr/local/lib/libavcodec.a(videodsp_armv5te.o)
collect2: error: ld returned 1 exit status
make[2]: *** [lib/libopencv_highgui.so.2.4.8] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
</code></pre>
",2015-08-13 06:32:43,2015-08-13 06:32:43,opencv install error in odroid,<linux><opencv><odroid>,,,CC BY-SA 3.0,True,False,False,False,True
19008,20366693,2013-12-04 04:12:36,,"<p>I am trying to write a program in OpenCV that just displays the video from an axis camera, which is a type of ip camera. My problem is that OpenCV gives me an error and crashes.</p>

<p>The error is:</p>

<blockquote>
  <p>OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /home/pi/opencv-2.4.5/modules/core/src/array.cpp, line 2482<br/>
  terminate called after throwing an instance of 'cv::Exception'<br/>
   what(): /home/pi/opencv-2.4.5/modules/core/src/array.cpp:2482: error: (-206)
  Unrecognized or unsupported array type in function cvGetMat</p>
  
  <p>Aborted</p>
</blockquote>

<p>My code is:</p>

<pre><code>#include &lt;opencv2/opencv.hpp&gt;
#include &lt;iostream&gt;

using namespace std;
using namespace cv;

int main()
{
    Mat img;
    namedWindow(""IMG"", CV_WINDOW_AUTOSIZE);

    while(true)
    {
        img = imread(""http://10.17.14.11/jpg/image.jpg"");

        if(img.empty())cout&lt;&lt;""The image is empty\n"";//This cout is printed

        imshow(""IMG"", img);

        if(waitkey(1) &gt;=0)break;
    }
}
</code></pre>

<p>I have tried using a VideoCapture with the address </p>

<pre><code>""http://10.17.14.11/mjpg/video.mjpg"" 
</code></pre>

<p>but I got the same error. I also put both of these URLs into my web browser and they were valid.</p>

<p>Thank you.</p>

<p><b>EDIT</b><br/>
Could the reason for VideoCapture not working be that I don't have ffmpeg installed?</p>
",2013-12-04 14:07:00,2013-12-04 14:44:29,OpenCV gives an error when trying to get images from an axis camera,<c++><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
19247,17340459,2013-06-27 10:14:47,,"<p>This is the code I use:</p>

<pre><code>public void stopRecording() throws Exception, com.googlecode.javacv.FrameRecorder.Exception {

    runAudioThread = false;

    if (recorder != null &amp;&amp; recording) {
        recording = false;
        Log.v(LOG_TAG, ""Finishing recording, calling stop and release on recorder"");
        try {
            recorder.stop();
            recorder.release();
        } catch (FFmpegFrameRecorder.Exception e) {
            e.printStackTrace();
        }

    }
    Log.i(LOG_TAG, ""filename = "" + ffmpeg_link);
    if (i &gt; 0) {
        Log.i(LOG_TAG, ""!!!!!!!!!WILL CONCATENATE"");
        FrameGrabber grabber1 = new FFmpegFrameGrabber(pathStart + ""/JavaCV/stream0.mp4"");
        grabber1.start();
        Log.i(LOG_TAG, ""graber1.start"");
        FrameGrabber grabber2 = new FFmpegFrameGrabber(pathStart + ""/JavaCV/stream1.mp4"");
        grabber2.start();
        Log.i(LOG_TAG, ""graber2.start"");
        FrameRecorder recorder2 = new FFmpegFrameRecorder(pathStart + ""/JavaCV/output.mp4"", grabber1.getImageWidth(), grabber1.getImageHeight(), grabber1.getAudioChannels());
        recorder2.setFrameRate(grabber1.getFrameRate());
        recorder2.setSampleFormat(grabber1.getSampleFormat());
        recorder2.setSampleRate(grabber1.getSampleRate());
        Log.i(LOG_TAG, ""Recorder.start"");
        recorder2.start();
        Frame frame;
        int j = 0;
        while ((frame = grabber1.grabFrame()) != null) {
            j++;
            recorder2.record(frame);
            Log.i(LOG_TAG, ""while1 nr:"" + j + ""Frame number: "" + grabber1.getFrameNumber());
        }
        Log.i(LOG_TAG, ""after while1"");
        while ((frame = grabber2.grabFrame()) != null) {
            recorder2.record(frame);
            Log.i(LOG_TAG, ""while2"");
        }
        Log.i(LOG_TAG, ""Recorder.stop"");
        recorder2.stop();
        grabber2.stop();
        grabber1.stop();
        Log.i(LOG_TAG, ""end concatenate"");
    }
    i++;
    ffmpeg_link = pathStart + ""/JavaCV/stream"" + i + "".mp4"";
    Log.i(LOG_TAG, ""next filename = "" + ffmpeg_link);
}
</code></pre>

<p>It works great, it manages to merge the videos, the only issue I have is that it does not have sound for the second video. How can i put the audiochannel on the second video also?</p>
",2013-06-27 12:02:43,2013-06-27 15:01:49,"Merging 2 videos using JavaCV, second video has no sound",<android><video><merge><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
19269,24930715,2014-07-24 10:00:33,,"<p>In Android how can I apply curve to a video using FFMPEG. 
Same like applying filters for a image.
Available curves in FFmpeg
none’
‘color_negative’
‘cross_process’
‘darker’
‘increase_contrast’
‘lighter’
‘linear_contrast’
‘medium_contrast’
‘negative’
‘strong_contrast’
‘vintage’</p>

<p>OpenCv has ffmpeg java implementation. But I can't able to figure out how to do it.
And how can I add custom effects.
Both NDK and OpenCv implementation is ok for me.</p>
",,2014-07-24 10:00:33,How can I apply curve filter to a video in Android,<android><opencv><video><android-ndk><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
19314,18295717,2013-08-18 04:31:05,,"<p>I have a Java application that uses <code>ffmpeg</code> library and <code>javacv</code> to load and process video files. </p>

<p>I am currently using following code, for loading <code>videofile</code> to my data container. </p>

<pre><code>public boolean add(String videofile) {
        FrameGrabber g = new OpenCVFrameGrabber( videofile );
        try{ 
            g.start();
        }
        catch(Exception e){
            g = new FFmpegFrameGrabber( videofile );
            try {
                g.start();
            }catch(Exception x){
                return false;
            }
        }
        grabbers.add( new Pair(videofile, g) );
        frames.add( 0 );
        preprocessed=false;
        return true;        
    }
</code></pre>

<p>Each time video is loaded, a library outputs a lot of meta information regarding video itself:</p>

<blockquote>
  <p>Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/lejlot/data/test.mp4': 
  Metadata:
      major_brand     : isom
      minor_version   : 512
      compatible_brands: isomiso2mp41
      encoder         : Lavf53.21.1   Duration: 00:04:36.27, start: 0.000000, bitrate: 305 kb/s
      Stream #0:0(und): Video: mpeg4 (Simple Profile) (mp4v / 0x7634706D), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], 303 kb/s, 20,85
  fps, 30 tbr, 1k tbn, 1k tbc
      Metadata:
        handler_name    : VideoHandler</p>
</blockquote>

<p>which obviously I do not want to see. I cannot (do not want) to modify the libraries source codes, but rather modify my own so it can intercept this log and discard it.</p>

<p>As far I tried to temporarly block the stdout/stderr streams through</p>

<pre><code>private static final devnull = new PrintStream(new OutputStream() {
        @Override
        public void write(int b) {
            //DO NOTHING
        }
        @Override
        public void write(byte[] b,int x,int y){
        }
   });

   /**
   * Blocks messages to stdout
   */
   public static void silentStdOut(){
     System.setOut(devnull);
   }

   /**
   * Blocks messages to stderr
   */
   public static void silentStdErr(){
     System.setErr(devnull);
   }
</code></pre>

<p>but it does not seem to help, log message is still displayed</p>

<pre><code>public boolean add(String videofile) {
    Utils.silentStdErr();
    Utils.silentStdOut();
    FrameGrabber g = new OpenCVFrameGrabber( videofile );
    try{ 
        g.start();
    }
    ,,,
</code></pre>

<p>""Raw"" ffmpeg can be set to be less verbose using</p>

<pre><code>ffmpeg -loglevel panic
</code></pre>

<p>but neither <code>OpenCVFrameGrabber</code> not <code>FFmpegFrameGrabber</code> give access to the tool's parameters.</p>

<p>To sum up - how can I discard these log messages without modifing the libraries' source codes?</p>
",,2018-03-07 07:26:27,Making ffmpeg/javacv less verbose in java,<java><ffmpeg><javacv><verbosity>,,,CC BY-SA 3.0,False,False,False,False,True
19316,24933207,2014-07-24 12:04:47,,"<p>I tried to make a program, which merges two frames. I use LibAV (libav-win32-20140428) under Windows 7 64 and Visual Studio 2013.
But the result is quite odd.</p>

<p><img src=""https://i.stack.imgur.com/1bgyc.jpg"" alt=""http://oi58.tinypic.com/rcobnm.jpg""></p>

<p>The filter which was used is Overlay. When I change the graph, to the one, that uses only one stream and add FADE effect, everything works like a charm. But OVERLAY and eg. DRAWBOX give me strange distortion (three frames on one and black and white effect). Here is the code:</p>

<pre><code>static int init_filter_graph(AVFilterGraph **pGraph, AVFilterContext **pSrc1, AVFilterContext **pSink)
{
    AVFilterGraph* tFilterGraph;
    AVFilterContext* tBufferContext1;
    AVFilter* tBuffer1;
    AVFilterContext* tColorContext;
    AVFilter* tColor;
    AVFilterContext* tOverlayContext;
    AVFilter* tOverlay;
    AVFilterContext* tBufferSinkContext;
    AVFilter* tBufferSink;

    int tError;

    /* Create a new filtergraph, which will contain all the filters. */
    tFilterGraph = avfilter_graph_alloc();

    if (!tFilterGraph) {
        return -1;
    }

    { // BUFFER FILTER 1
        tBuffer1 = avfilter_get_by_name(""buffer"");
        if (!tBuffer1) {
            return -1;
        }
        tBufferContext1 = avfilter_graph_alloc_filter(tFilterGraph, tBuffer1, ""src1"");
        if (!tBufferContext1) {
            return -1;
        }

        av_dict_set(&amp;tOptionsDict, ""width"", ""320"", 0);
        av_dict_set(&amp;tOptionsDict, ""height"", ""240"", 0);
        av_dict_set(&amp;tOptionsDict, ""pix_fmt"", ""bgr24"", 0);
        av_dict_set(&amp;tOptionsDict, ""time_base"", ""1/25"", 0);
        av_dict_set(&amp;tOptionsDict, ""sar"", ""1"", 0);
        tError = avfilter_init_dict(tBufferContext1, &amp;tOptionsDict);
        av_dict_free(&amp;tOptionsDict);
        if (tError &lt; 0) {
            return tError;
        }
    }

    { // COLOR FILTER
        tColor = avfilter_get_by_name(""color"");
        if (!tColor) {
            return -1;
        }
        tColorContext = avfilter_graph_alloc_filter(tFilterGraph, tColor, ""color"");
        if (!tColorContext) {
            return -1;
        }

        av_dict_set(&amp;tOptionsDict, ""color"", ""white"", 0);
        av_dict_set(&amp;tOptionsDict, ""size"", ""20x120"", 0);
        av_dict_set(&amp;tOptionsDict, ""framerate"", ""1/25"", 0);
        tError = avfilter_init_dict(tColorContext, &amp;tOptionsDict);
        av_dict_free(&amp;tOptionsDict);
        if (tError &lt; 0) {
            return tError;
        }
    }

    { // OVERLAY FILTER
        tOverlay = avfilter_get_by_name(""overlay"");
        if (!tOverlay) {
            return -1;
        }
        tOverlayContext = avfilter_graph_alloc_filter(tFilterGraph, tOverlay, ""overlay"");
        if (!tOverlayContext) {
            return -1;
        }

        av_dict_set(&amp;tOptionsDict, ""x"", ""0"", 0);
        av_dict_set(&amp;tOptionsDict, ""y"", ""0"", 0);
        av_dict_set(&amp;tOptionsDict, ""main_w"", ""120"", 0);
        av_dict_set(&amp;tOptionsDict, ""main_h"", ""140"", 0);
        av_dict_set(&amp;tOptionsDict, ""overlay_w"", ""320"", 0);
        av_dict_set(&amp;tOptionsDict, ""overlay_h"", ""240"", 0);
        tError = avfilter_init_dict(tOverlayContext, &amp;tOptionsDict);
        av_dict_free(&amp;tOptionsDict);
        if (tError &lt; 0) {
            return tError;
        }
    }

    { // BUFFERSINK FILTER
        tBufferSink = avfilter_get_by_name(""buffersink"");
        if (!tBufferSink) {
            return -1;
        }

        tBufferSinkContext = avfilter_graph_alloc_filter(tFilterGraph, tBufferSink, ""sink"");
        if (!tBufferSinkContext) {
            return -1;
        }

        tError = avfilter_init_str(tBufferSinkContext, NULL);
        if (tError &lt; 0) {
            return tError;
        }
    }

    // Linking graph
    tError = avfilter_link(tBufferContext1, 0, tOverlayContext, 0);
    if (tError &gt;= 0) {
        tError = avfilter_link(tColorContext, 0, tOverlayContext, 1);
    }
    if (tError &gt;= 0) {
        tError = avfilter_link(tOverlayContext, 0, tBufferSinkContext, 0);
    }
    if (tError &lt; 0) {
        return tError;
    }

    tError = avfilter_graph_config(tFilterGraph, NULL);
    if (tError &lt; 0) {
        return tError;
    }

    *pGraph = tFilterGraph;
    *pSrc1 = tBufferContext1;
    *pSink = tBufferSinkContext;

    return 0;
}
</code></pre>

<p>What do you think is the reason?</p>
",,2014-07-28 09:48:43,Overlay filter in LibAV/FFMpeg returns strange (tripled) frame in C,<c><image-processing><ffmpeg><libav>,,,CC BY-SA 3.0,False,False,False,False,True
19471,18307057,2013-08-19 05:44:50,,"<p>I am using Visual Studio 2012 with OpenCV 2.4.6.</p>
<p>I have 4 videos that I recorded one by one with my Nokia Lumia 920. OpenCV won't open .mp4 format from my phone by the default. So I converted all these 4 videos using Sony Vegas to .mp4 with the SAME preferences for all of them. Now the problem is that OpenCV has a problem to open two of them. The other two works like a charm with no problem. Below is the information about codec that I used (Yes, it is the same for all videos):</p>
<p><img src=""https://i.stack.imgur.com/nRodI.png"" alt=""Codec info"" /></p>
<p>And this is the error:</p>
<p><img src=""https://i.stack.imgur.com/UZnEx.png"" alt=""Error"" /></p>
<p>Why is it so that they are the same type but only a few of them are loaded properly?</p>
",2020-06-20 09:12:55,2013-10-02 09:04:20,OpenCV won't open some videos of many videos of the same format,<c++><opencv><ffmpeg><mp4>,,,CC BY-SA 3.0,True,False,False,False,True
19567,18314675,2013-08-19 13:11:25,,"<p>I'm using raspberry pi with dedicated camera board and i'm trying to do some image processing simultaneously with streaming it to web server. To do this I created named pipe and I'm streaming video from raspivid -> named_pipe -> ffmpeg -> web server. This part works with no problems. Now I want to detect movement on this video feed. Any ideas how to read video stream from this named_pipe in python and then process it in opencv?</p>
",2013-09-05 15:09:55,2016-10-26 21:47:32,How to read video stream in python using opencv,<python><opencv><raspberry-pi>,,,CC BY-SA 3.0,True,False,False,False,True
19676,18327029,2013-08-20 04:36:36,,"<p>I have install opencv on MacX(Lion) with ffmpeg support</p>

<pre><code>import cv2
import cv
import base64
import time
import urllib2
import numpy as np

from cv2 import __version__

print(__version__)
video=""http://xxx.223.91.91/mjpg/1/video.mjpg?dummy=param.avi""
vv = cv.CaptureFromFile(video)
cv2.namedWindow(""preview"")
vc = cv2.VideoCapture(""http://xxx.223.91.91/mjpg/1/video.mjpg?dummy=param.mjpg"")
</code></pre>

<p>but Show WARNING</p>

<p>2.4.2</p>

<p>WARNING: Couldn't read movie file <a href=""http://xxx.223.91.91/mjpg/1/video.mjpg?dummy=param.avi"" rel=""nofollow"">http://xxx.223.91.91/mjpg/1/video.mjpg?dummy=param.avi</a></p>

<p>WARNING: Couldn't read movie file <a href=""http://xxx.223.91.91/mjpg/1/video.mjpg?dummy=param.mjpg"" rel=""nofollow"">http://xxx.223.91.91/mjpg/1/video.mjpg?dummy=param.mjpg</a></p>

<p>I Google a lot of code, but could not find a solution to the problem.
Please help me, thank you.</p>
",,2013-08-23 20:18:58,How to open IP Camera Url by OpenCV and python?,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
19912,19283920,2013-10-09 22:27:24,,"<p>I create a class that capture frame from a video. When it capture a frame, it's saved as a picture. When the video is .avi, application works ok. When format is .avi.</p>

 <pre class=""lang-java prettyprint-override""><code>public static void main(String[] args) {

     FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(""C:/Users/Ioanna/Desktop/video1.avi"");

     try {
         IplImage img; 

         //Start grabber to capture video
         grabber.start(); 

         //grab video frame to IplImage
         img = grabber.grab();

         if (img != null) {         
             //save video frame as a picture
             cvSaveImage(""capture.jpg"", img);
         }

     }catch (Exception e) {      
     }
}
</code></pre>

<p>The error is </p>

<pre><code>Exception in thread ""main"" java.lang.ExceptionInInitializerError
    at com.googlecode.javacv.FFmpegFrameGrabber.&lt;init&gt;(FFmpegFrameGrabber.java:106)
    at Video.main(Video.java:75)
Caused by: java.lang.IllegalStateException: Can't overwrite cause with java.lang.UnsatisfiedLinkError: no avcodec in java.library.path
    at java.lang.Throwable.initCause(Throwable.java:457)
    at com.googlecode.javacpp.Loader.load(Loader.java:581)
    at com.googlecode.javacpp.Loader.load(Loader.java:532)
    at com.googlecode.javacv.cpp.avcodec.&lt;clinit&gt;(avcodec.java:39)
    ... 2 more
Caused by: java.lang.UnsatisfiedLinkError: no jniavcodec in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1837)
</code></pre>

<p>Do anyone know what is the problem?</p>

<p>Thanks in advance</p>
",2013-12-04 09:34:43,2013-12-04 09:34:43,JavaCV capture a frame using FFmpeg,<ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
20171,19306422,2013-10-10 21:19:41,,"<p>I create a Java class using JavaCV that play a video and capture frames. The video ""plays"" in a CanvasFrame using ffmpeg. I want to add that canvas in a JFrame. Is that possible?</p>

<pre><code>public static void main(String[] args) {

         //Create canvas frame for displaying video.
         CanvasFrame canvas = new CanvasFrame(""VideoCanvas""); 


         File movie_name = new File(""niki.mp4"");

         //Declare FrameGrabber to import video from ""video.mp4""
         FFmpegFrameGrabber grabber=new FFmpegFrameGrabber(movie_name); 


          //Start grabber to capture video
          grabber.start();      

          //Declare img as IplImage
          IplImage img;

          while (true) {

           //inser grabed video frame to IplImage img
           img = grabber.grab();

           //Set canvas size as per dimentions of video frame.
           canvas.setCanvasSize(grabber.getImageWidth(), grabber.getImageHeight()); 


           //Show video frame in canvas
           canvas.showImage(img); 

           //save video frame as a picture
           cvSaveImage(""capture.png"", img);


           }

        }
</code></pre>
",2013-10-10 21:31:10,2015-01-15 17:01:04,Add CanvasFrame (ffmpeg) in JFrame,<java><swing><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
20249,22760325,2014-03-31 11:24:37,,"<p>i am developing android application in which i need to play AAC live audio stream coming from Red5 server.<br>
I have successfully decoded the audio stream by using javacv-ffmpeg.<br>
But my problem is how to play the audio from decoded samples.<br>
I have tried by following way</p>

<pre><code>int len = avcodec.avcodec_decode_audio4( audio_c,  samples_frame,  got_frame,  pkt2);
if (len &lt;= 0){
    this.pkt2.size(0);
} else {
    if (this.got_frame[0] != 0) {
            long pts = avutil.av_frame_get_best_effort_timestamp(samples_frame);
            int sample_format = samples_frame.format();
                   int planes = avutil.av_sample_fmt_is_planar(sample_format) != 0 ? samples_frame.channels() : 1;
                   int data_size = avutil.av_samples_get_buffer_size((IntPointer)null, audio_c.channels(), samples_frame.nb_samples(), audio_c.sample_fmt(), 1) / planes;

                   if ((samples_buf == null) || (samples_buf.length != planes)) {

                       samples_ptr = new BytePointer[planes];
                       samples_buf = new Buffer[planes];
                   }
                           BytePointer ptemp = samples_frame.data(0);
               BytePointer[] temp_ptr = new BytePointer[1];
               temp_ptr[0] = ptemp.capacity(sample_size);
               ByteBuffer btemp = ptemp.asBuffer();
               byte[] buftemp = new byte[sample_size];
               btemp.get(buftemp, 0, buftemp.length);

                           play the buftemp[] with audiotrack.....
        }
</code></pre>

<p>But only noise is heard from speakers, is there any processing is need to be done on <code>AVFrame</code> we get from <code>decode_audio4(...)</code> .<br>
The Incoming audio stream is correctly encoded with AAC codec.<br>
Any help, suggestion appreciated.<br>
Thanks in advance.</p>
",,2018-05-10 13:09:21,Playing javacv-ffmpeg decoded audio in Android with Audiotrack,<android><audio><ffmpeg><javacv><audiotrack>,,,CC BY-SA 3.0,False,False,False,False,True
20370,21650544,2014-02-08 19:07:13,,"<p>I'm having a problem when trying to compile ROS Hydro from the source on Odroid-U3. This is the related error:</p>

<pre><code>Built target pch_Generate_opencv_superres
[ 31%] Built target opencv_core
[ 32%] Built target opencv_flann
[ 35%] Built target opencv_ml
[ 42%] Built target opencv_imgproc
[ 42%] Built target opencv_photo
[ 45%] Built target opencv_video
Linking CXX shared library ../../lib/libopencv_highgui.so
/usr/local/lib/libavcodec.a(videodsp_armv5te.o): In function `ff_prefetch_arm':
/home/odroid/odroid-sources/sources/ffmpeg/libavcodec/arm/videodsp_armv5te.S:29:(.text+0x8): relocation truncated to fit: R_ARM_THM_JUMP19 against symbol `ff_prefetch_arm' defined in .text section in /usr/local/lib/libavcodec.a(videodsp_armv5te.o)
collect2: error: ld returned 1 exit status
make[2]: *** [lib/libopencv_highgui.so.2.4.6] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
&lt;== Failed to process package 'opencv2': 
  Command '/home/odroid/ros_catkin_ws/install_isolated/env.sh make -j4 -l4' returned non-zero exit status 2

Reproduce this error by running:
==&gt; cd /home/odroid/ros_catkin_ws/build_isolated/opencv2 &amp;&amp; /home/odroid/ros_catkin_ws/install_isolated/env.sh make -j4 -l4

Command failed, exiting.
</code></pre>

<p>Already tried to install those libraries by <code>sudo apt-get install</code> but no difference. Any help would be awesome. Thanks!</p>
",2014-02-14 13:51:51,2014-02-14 13:51:51,Error in opencv_video when compiling ROS Hydro from source in Odroid-U3,<opencv><ros><odroid>,,,CC BY-SA 3.0,True,False,False,False,True
20460,22779781,2014-04-01 07:50:30,,"<p>I'm trying to find a faster way of converting RGB to YUV using the Android SDK as the standard pixel for pixel methods are pretty slow in Java. ColorMatrices seem to be pretty efficient and I see there's a setRGB2YUV() method but I can't find any examples and the documentation simply says ""Set the matrix to convert RGB to YUV"" which is completely useless as usual.</p>

<p>Here's part of my initialization code, which is a little compicated slightly with arrays due to multithreading:</p>

<pre><code>cacheBitmaps = new Bitmap[NumberOfThreads];
cacheCanvas = new Canvas[NumberOfThreads];
mRGB2YUV = new ColorMatrix();   
cmfRGB2YUV = new ColorMatrixColorFilter(mRGB2YUV);
pRGB2YUV = new Paint();
pRGB2YUV.setColorFilter(cmfRGB2YUV);
for (int m=0; m&lt; NumberOfThreads; m++) {
   cacheBitmaps[m] = Bitmap.createBitmap(widthX,heightY, Config.ARGB_8888);
   cacheCanvas[m] = new Canvas(cacheBitmaps[m]);
}
</code></pre>

<p>Later I use this to paint an RGB to a canvas with the specified paint:</p>

<pre><code>cacheCanvas[n].drawBitmap(fb.frames[n].getAndroidBitmap(),0,0, pRGB2YUV);
</code></pre>

<p>I've also experimented using a standard matrix that shouldn't apply any changes to the RGB values like this:</p>

<pre><code>float[] matrix = { 
0, 1, 0, 0, 0, //red
0, 0, 1, 0, 0, //green
0, 0, 0, 1, 0, //blue
0, 0, 0, 0, 1 //alpha
};
mRGB2YUV.set(matrix);
</code></pre>

<p>Whatever I do I either get black, green or distorted frames in my output video (using JavaCV with FFMPEG and specifying AV_PIX_FMT_NV21 as a color format after copying the final bitmap to an IplImage).</p>

<p>Anyone know how to use this and if it's even possible or does what it says it does?</p>
",2014-04-01 08:12:43,2014-04-01 08:12:43,Convert RGB8888 to YUV420 with ColorMatrix.setRGB2YUV(),<java><android><javacv><yuv><colormatrix>,,,CC BY-SA 3.0,False,False,False,False,True
20503,21662723,2014-02-09 17:55:56,,"<p>I have searched for the solution and found 
- Java CV
- FFmpeg</p>

<p>Need step by step to integrate them like this</p>
",,2014-02-11 05:58:48,How to make a video from set of images in android like flipagram,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
20585,21670225,2014-02-10 06:13:31,,"<p>I am using ffmpegFrameRecorder from JavaCV Api to merge several mp4 videos to one . Here is my code:</p>

<pre><code>FrameGrabber grabberlist[] = new FFmpegFrameGrabber[filenamelist
                    .size()];

for (int i = 0; i &lt; grabberlist.length; i++) {

                System.out.println(""FILES"" + filenamelist.get(i));
                grabberlist[i] = new FFmpegFrameGrabber(filenamelist.get(i));
                grabberlist[i].start();

            }

            FrameRecorder recorder = new FFmpegFrameRecorder(
                    Environment.getExternalStorageDirectory()
                            + ""/Apptavia/output.mp4"",
                    grabberlist[0].getImageWidth(),
                    grabberlist[0].getImageHeight(), 1);

            recorder.start();

            for (int i = 0; i &lt; grabberlist.length; i++) {

                Frame frame;
                while ((frame = grabberlist[i].grabFrame()) != null) {

                    recorder.record(frame);

                }
            }

            for (int i = 0; i &lt; audioList.size(); i++) {

                recorder.record(audioList.get(i));
            }

            recorder.stop();

            for (int i = 0; i &lt; grabberlist.length; i++) {

                grabberlist[i].stop();
            }
        }
</code></pre>

<p>The output video is created but the video length is less . I have debugged the number of frames from .grab() method is less than the total frames. What could be the solution for this . Please help.</p>
",,2014-02-10 06:13:31,Using ffmpegFrameRecorder the merged video is short?,<java><android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
20613,19343091,2013-10-13 08:09:38,,"<p>Beginner in Image Processing with OpenCV. I am trying to load an Image in VS2010 with OpenCV 2.3.1. However I have the libraries included and the system variables updated. I have checked couple of other forums suggesting using a different version of OpenCV. I have tried using OpenCV 2.4.0 and 2.3.0 and its the same error I receive. Any workaround for this would break the barrier!!</p>
",2013-10-13 08:31:18,2013-12-22 03:50:10,"Still I receive an error ""LINK : fatal error LNK1104: cannot open file 'opencv_ffmpeg231.lib""",<windows><visual-studio-2010><visual-c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
20617,19344715,2013-10-13 11:32:16,,"<p>I need get rtsp stream from ip-camera and cut stream to frames.
I tryed:</p>

<pre><code>int _tmain(int argc, _TCHAR* argv[])
{
    CvCapture *camera = cvCreateFileCapture(""rtsp://MYIP:8554/CH001.sdp"");

    if (camera == NULL) {
        printf(""camera is null, aborting..."");
        return -1;
    }
    printf(""camera is not null\n"");
    fflush(stdout);
    cvNamedWindow(""img"");
    int i = 0;
    while (cvWaitKey(100) != 27) {
        IplImage *img = cvQueryFrame(camera);
        if (img == NULL) break;
        cvShowImage(""img"", img);
        // cvReleaseCapture(&amp;camera); 
        // printf(""Image: %i\n"", ++i);
    }
    cvReleaseCapture(&amp;camera);
    return 0;
}
</code></pre>

<p>doesn't work, but:</p>

<pre><code>int _tmain(int argc, _TCHAR* argv[])
{
    {
    VideoCapture cap(""C:/720.mp4""); // open the video file for reading
    if ( !cap.isOpened() )  // if not success, exit program
    {
         cout &lt;&lt; ""Cannot open the video file"" &lt;&lt; endl;
         return -1;
    }

    //cap.set(CV_CAP_PROP_POS_MSEC, 90000); //start the video at 300ms
    double fps = cap.get(CV_CAP_PROP_FPS); //get the frames per seconds of the video
     cout &lt;&lt; ""Frame per seconds : "" &lt;&lt; fps &lt;&lt; endl;
    namedWindow(""MyVideo"",CV_WINDOW_AUTOSIZE); //create a window called ""MyVideo""
    while(1)
    {
        Mat frame;

        bool bSuccess = cap.read(frame); // read a new frame from video

         if (!bSuccess) //if not success, break loop
        {
                        cout &lt;&lt; ""Cannot read the frame from video file"" &lt;&lt; endl;
                       break;
        }
        imshow(""MyVideo"", frame); //show the frame in ""MyVideo"" window

        if(waitKey(30) == 27) //wait for 'esc' key press for 30 ms. If 'esc' key is pressed, break loop
       {
                cout &lt;&lt; ""esc key is pressed by user"" &lt;&lt; endl; 
                break; 
       }
    }
    return 0;
}
}
</code></pre>

<p>Works great!
How cut rtsp stream to frames? how to work with RTSP in opencv? I also can use FFmpeg and other libs, but <strong>I need save frames in buffer.</strong></p>
",,2013-10-13 11:32:16,Save frames in buffer. How to work with RTSP in OpenCV?,<c++><opencv><rtsp>,,,CC BY-SA 3.0,True,True,False,False,True
20620,18406384,2013-08-23 15:19:15,,"<p>I am doing an application that creates a video using a set of photos saved in the sd-card. The problem I am trying to fix is that the application crashes when I create some videos. The crashes depends of the resolution of the source picture files. For example, I can render a video using 400 images with a resolution of 320x480 but I can only do a 25-frames video using images with a resolution of 2500x3200.</p>

<p>I am doing the rendering process in background using Asynctask (for providing a feedback to the user and maintain it informed of the rendering process). When the rendering process crashes no warnings/errors/etc are captured in the logcat. Using the DDMS for examining the memory usage I can not view any memory leak (I also do not recieve any memory warning on the logcat).  For this reasons I supose that it may be a problem related with the ffmpeg libraries (but I have no idea).</p>

<p>I have testet different codecs defined on avcodec.java, like:  </p>

<pre><code>AV_CODEC_ID_MPEG1VIDEO = 1,
AV_CODEC_ID_MPEG2VIDEO = 2,
      AV_CODEC_ID_H263 = 5,
     AV_CODEC_ID_MJPEG = 8,
</code></pre>

<p>etc</p>

<p>Trying with lossless video codecs seems not doing effect, and I also get some errors when I try with some codecs.</p>

<p>I am running my application on a Sony Ericsson Xperia Arc (1ghz cpu, 320mb intern memory). </p>

<p>I do not know if my smartphone has enough power to render a long HD video, but I see that in the market there are some app's like <a href=""https://play.google.com/store/apps/details?id=com.Nishant.Singh.DroidTimelapse&amp;hl=ca"" rel=""nofollow"">Droid Timelapse</a> that can do it.</p>

<p>Any suggestion would be appreciated I have no idea how can I fix that.</p>

<p>Thank you.</p>
",,2013-08-26 18:27:25,Rendering Performance ffmpeg of JAVACV on Android,<android><video><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
20624,19345824,2013-10-13 13:33:48,,"<p>How to get information about a video file (ex: frames per second, bitrate, frame height, width etc) using emguCV or FFmpeg to a C# code. I am using C#.net for my project.</p>
",,2013-10-13 14:16:46,EmguCV/ FFmpeg get video information,<video><ffmpeg><emgucv>,,,CC BY-SA 3.0,False,False,True,False,True
20676,22796368,2014-04-01 20:37:29,,"<p>when i tried to work with a video file i can't seem to open the file
when i test on isOpen() it gives me thats it did not open</p>

<p>what did i already check:</p>

<ol>
<li>videofile working and in correct path  </li>
<li>rebooting</li>
<li>reinstalling ffmpeg (with diferent configurations)</li>
</ol>

<p>my code:</p>

<pre><code>VideoCapture readVideo;
    readVideo.open(argv[1]);
    Mat frame;
    if(!readVideo.isOpened()){
        fprintf(stderr,""video niet geladen 0 \n"");
        return 2;
    }
</code></pre>

<p>Example of the file i give in argv[1]:
out.avi (mpeg4 codex)
it works on someone elses setup so i know its not the code</p>
",2014-04-02 07:56:22,2014-04-10 14:00:03,"videocapture opencv (ubuntu 13.10, opencv 2.4.8)",<c++><opencv><ffmpeg><video-capture>,,,CC BY-SA 3.0,True,True,False,False,True
20693,23952967,2014-05-30 10:59:17,,"<p>I'm trying to compile the <a href=""http://pcbje.com/2012/12/doing-face-recognition-with-javacv/"" rel=""nofollow"">http://pcbje.com/2012/12/doing-face-recognition-with-javacv/</a> code on Android, using the 'quick start' build from <a href=""https://github.com/bytedeco/javacv/blob/master/README.md#quick-start-for-opencv-and-ffmpeg"" rel=""nofollow"">https://github.com/bytedeco/javacv/blob/master/README.md#quick-start-for-opencv-and-ffmpeg</a>
I'm getting two errors:</p>

<ul>
<li>The method <code>train(opencv_core.MatVector, opencv_core.Mat)</code> in the type <code>opencv_contrib.FaceRecognizer</code> is not applicable for the arguments <code>(opencv_core.MatVector, int[])</code></li>
<li>The method <code>predict(opencv_core.Mat)</code> in the type <code>opencv_contrib.FaceRecognizer</code> is not applicable for the <code>arguments (opencv_core.IplImage)</code></li>
</ul>

<p>I've tried converting methods but I keep on reaching dead ends and I don't see how I could've built the project incorrectly. Thanks in advance.</p>
",,2014-05-31 18:18:56,JavaCV face recognition - incompatible types,<android><opencv><javacv>,,,CC BY-SA 3.0,True,True,False,False,True
20758,20510130,2013-12-11 03:46:07,,"<p>I'm trying to record a video in Android using the JavaCV lib.
I need to record the video in 640x360.</p>

<p>I have installed everything as described in README.txt file and I followed the example as below:
<a href=""https://code.google.com/p/javacv/source/browse/samples/RecordActivity.java"" rel=""nofollow"">https://code.google.com/p/javacv/source/browse/samples/RecordActivity.java</a>
In this example, the video size is this:
private int imageWidth = 320;
private int imageHeight = 240;</p>

<p>In my case, I need to record a video in 640x360 H.264.</p>

<p>(UPDATE) I have reverted my code and kept exactly like in the example, just changing imageWidth and imageHeight to 640x360.
Now I'm getting the video like this image:
<a href=""http://bergmann.net.br/img/screenshot_video_error.png"" rel=""nofollow"">http://bergmann.net.br/img/screenshot_video_error.png</a></p>

<p>Here is my code:</p>

<pre><code>import static com.googlecode.javacv.cpp.opencv_core.IPL_DEPTH_8U;

import java.io.IOException;
import java.nio.ShortBuffer;

import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.PowerManager;
import android.util.Log;
import android.view.Display;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

import com.autosonvideo.helpers.Helpers;
import com.autosonvideo.logic.CameraHelpers;
import com.googlecode.javacv.FFmpegFrameRecorder;
import com.googlecode.javacv.cpp.opencv_core.IplImage;

public class FFmpegRecordActivity extends Activity implements OnClickListener {

    private final static String CLASS_LABEL = ""RecordActivity"";
    private final static String LOG_TAG = CLASS_LABEL;

    private PowerManager.WakeLock mWakeLock;

    private String ffmpeg_link;

    long startTime = 0;
    boolean recording = false;

    private volatile FFmpegFrameRecorder recorder;

    private boolean isPreviewOn = false;

    private int sampleAudioRateInHz = 44100;
    private int imageWidth = 640;
    private int imageHeight = 480;

    private int finalImageWidth = 640;
    private int finalImageHeight = 360;

    private int frameRate = 30;

    /* audio data getting thread */
    private AudioRecord audioRecord;
    private AudioRecordRunnable audioRecordRunnable;
    private Thread audioThread;
    volatile boolean runAudioThread = true;

    /* video data getting thread */
    private Camera cameraDevice;
    private CameraView cameraView;

    private IplImage yuvIplimage = null;

    /* layout setting */
    private final int bg_screen_bx = 232;
    private final int bg_screen_by = 128;
    private final int bg_screen_width = 700;
    private final int bg_screen_height = 500;
    private final int bg_width = 1123;
    private final int bg_height = 715;
    private final int live_width = 1280;
    private final int live_height = 960;
    private int screenWidth, screenHeight;
    private Button btnRecorderControl;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        setContentView(R.layout.main);

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK,
                CLASS_LABEL);
        mWakeLock.acquire();

        initLayout();
        initRecorder();
    }

    @Override
    protected void onResume() {
        super.onResume();

        if (mWakeLock == null) {
            PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
            mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK,
                    CLASS_LABEL);
            mWakeLock.acquire();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();

        if (mWakeLock != null) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        recording = false;

        if (cameraView != null) {
            cameraView.stopPreview();
            cameraDevice.release();
            cameraDevice = null;
        }

        if (mWakeLock != null) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }

    private void initLayout() {

        /* get size of screen */
        Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay();
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
        RelativeLayout.LayoutParams layoutParam = null;
        LayoutInflater myInflate = null;
        myInflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        RelativeLayout topLayout = new RelativeLayout(this);
        setContentView(topLayout);
        LinearLayout preViewLayout = (LinearLayout) myInflate.inflate(
                R.layout.main, null);
        layoutParam = new RelativeLayout.LayoutParams(screenWidth, screenHeight);
        topLayout.addView(preViewLayout, layoutParam);

        /* add control button: start and stop */
        btnRecorderControl = (Button) findViewById(R.id.recorder_control);
        btnRecorderControl.setText(""Start"");
        btnRecorderControl.setOnClickListener(this);

        /* add camera view */
        int display_width_d = (int) (1.0 * bg_screen_width * screenWidth / bg_width);
        int display_height_d = (int) (1.0 * bg_screen_height * screenHeight / bg_height);
        int prev_rw, prev_rh;
        if (1.0 * display_width_d / display_height_d &gt; 1.0 * live_width
                / live_height) {
            prev_rh = display_height_d;
            prev_rw = (int) (1.0 * display_height_d * live_width / live_height);
        } else {
            prev_rw = display_width_d;
            prev_rh = (int) (1.0 * display_width_d * live_height / live_width);
        }
        layoutParam = new RelativeLayout.LayoutParams(prev_rw, prev_rh);
        layoutParam.topMargin = (int) (1.0 * bg_screen_by * screenHeight / bg_height);
        layoutParam.leftMargin = (int) (1.0 * bg_screen_bx * screenWidth / bg_width);

        cameraDevice = Camera.open();
        Log.i(LOG_TAG, ""cameara open"");
        cameraView = new CameraView(this, cameraDevice);
        topLayout.addView(cameraView, layoutParam);
        Log.i(LOG_TAG, ""cameara preview start: OK"");
    }

    // ---------------------------------------
    // initialize ffmpeg_recorder
    // ---------------------------------------
    private void initRecorder() {

        Log.w(LOG_TAG, ""init recorder"");

        if (yuvIplimage == null) {
            yuvIplimage = IplImage.create(finalImageWidth, finalImageHeight,
                    IPL_DEPTH_8U, 2);
            Log.i(LOG_TAG, ""create yuvIplimage"");
        }

        ffmpeg_link = CameraHelpers.getOutputMediaFile(
                CameraHelpers.MEDIA_TYPE_VIDEO).toString();

        Log.i(LOG_TAG, ""ffmpeg_url: "" + ffmpeg_link);
        recorder = new FFmpegFrameRecorder(ffmpeg_link, finalImageWidth,
                finalImageHeight, 1);
        recorder.setFormat(""mp4"");
        recorder.setSampleRate(sampleAudioRateInHz);
        // Set in the surface changed method
        recorder.setFrameRate(frameRate);

        Log.i(LOG_TAG, ""recorder initialize success"");

        audioRecordRunnable = new AudioRecordRunnable();
        audioThread = new Thread(audioRecordRunnable);
    }

    public void startRecording() {

        try {
            recorder.start();
            startTime = System.currentTimeMillis();
            recording = true;
            audioThread.start();

        } catch (FFmpegFrameRecorder.Exception e) {
            e.printStackTrace();
        }
    }

    public void stopRecording() {

        runAudioThread = false;

        if (recorder != null &amp;&amp; recording) {
            recording = false;
            Log.v(LOG_TAG,
                    ""Finishing recording, calling stop and release on recorder"");
            try {
                recorder.stop();
                recorder.release();
            } catch (FFmpegFrameRecorder.Exception e) {
                e.printStackTrace();
            }
            recorder = null;

        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if (recording) {
                stopRecording();
            }

            finish();

            return true;
        }

        return super.onKeyDown(keyCode, event);
    }

    // ---------------------------------------------
    // audio thread, gets and encodes audio data
    // ---------------------------------------------
    class AudioRecordRunnable implements Runnable {

        @Override
        public void run() {
            android.os.Process
                    .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

            // Audio
            int bufferSize;
            short[] audioData;
            int bufferReadResult;

            bufferSize = AudioRecord
                    .getMinBufferSize(sampleAudioRateInHz,
                            AudioFormat.CHANNEL_IN_MONO,
                            AudioFormat.ENCODING_PCM_16BIT);
            audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC,
                    sampleAudioRateInHz, AudioFormat.CHANNEL_IN_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, bufferSize);

            audioData = new short[bufferSize];

            Log.d(LOG_TAG, ""audioRecord.startRecording()"");
            audioRecord.startRecording();

            /* ffmpeg_audio encoding loop */
            while (runAudioThread) {
                // Log.v(LOG_TAG,""recording? "" + recording);
                bufferReadResult = audioRecord.read(audioData, 0,
                        audioData.length);
                if (bufferReadResult &gt; 0) {
                    Log.v(LOG_TAG, ""bufferReadResult: "" + bufferReadResult);
                    // If ""recording"" isn't true when start this thread, it
                    // never get's set according to this if statement...!!!
                    // Why? Good question...
                    if (recording) {
                        try {
                            recorder.record(ShortBuffer.wrap(audioData, 0,
                                    bufferReadResult));
                            // Log.v(LOG_TAG,""recording "" + 1024*i + "" to "" +
                            // 1024*i+1024);
                        } catch (FFmpegFrameRecorder.Exception e) {
                            Log.v(LOG_TAG, e.getMessage());
                            e.printStackTrace();
                        }
                    }
                }
            }
            Log.v(LOG_TAG, ""AudioThread Finished, release audioRecord"");

            /* encoding finish, release recorder */
            if (audioRecord != null) {
                audioRecord.stop();
                audioRecord.release();
                audioRecord = null;
                Log.v(LOG_TAG, ""audioRecord released"");
            }
        }
    }

    // ---------------------------------------------
    // camera thread, gets and encodes video data
    // ---------------------------------------------
    class CameraView extends SurfaceView implements SurfaceHolder.Callback,
            PreviewCallback {

        private SurfaceHolder mHolder;
        private Camera mCamera;

        public CameraView(Context context, Camera camera) {
            super(context);
            Log.w(""camera"", ""camera view"");
            mCamera = camera;
            mHolder = getHolder();
            mHolder.addCallback(CameraView.this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            mCamera.setPreviewCallback(CameraView.this);
        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            try {
                stopPreview();
                mCamera.setPreviewDisplay(holder);
            } catch (IOException exception) {
                mCamera.release();
                mCamera = null;
            }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width,
                int height) {
            Log.v(LOG_TAG, ""Setting imageWidth: "" + imageWidth
                    + "" imageHeight: "" + imageHeight + "" frameRate: ""
                    + frameRate);
            Camera.Parameters camParams = mCamera.getParameters();
            camParams.setPreviewSize(imageWidth, imageHeight);

            Log.v(LOG_TAG,
                    ""Preview Framerate: "" + camParams.getPreviewFrameRate());

            camParams.setPreviewFrameRate(frameRate);
            mCamera.setParameters(camParams);
            startPreview();
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            try {
                mHolder.addCallback(null);
                mCamera.setPreviewCallback(null);
            } catch (RuntimeException e) {
                // The camera has probably just been released, ignore.
            }
        }

        public void startPreview() {
            if (!isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = true;
                mCamera.startPreview();
            }
        }

        public void stopPreview() {
            if (isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = false;
                mCamera.stopPreview();
            }
        }

        @Override
        public void onPreviewFrame(byte[] data, Camera camera) {
            /* get video data */
            if (yuvIplimage != null &amp;&amp; recording) {
                // yuvIplimage.getByteBuffer().put(data);

                final int startY = 640 * (480 - 360) / 2;
                final int lenY = 640 * 360;
                yuvIplimage.getByteBuffer().put(data, startY, lenY);
                final int startVU = 640 * 480 + 320 * 2 * (240 - 180) / 2;
                final int lenVU = 320 * 180 * 2;
                yuvIplimage.getByteBuffer().put(data, startVU, lenVU);

                Log.v(LOG_TAG, ""Writing Frame"");
                try {
                    long t = 1000 * (System.currentTimeMillis() - startTime);
                    if (t &gt; recorder.getTimestamp()) {
                        recorder.setTimestamp(t);
                    }
                    recorder.record(yuvIplimage);
                } catch (FFmpegFrameRecorder.Exception e) {
                    Log.v(LOG_TAG, e.getMessage());
                    e.printStackTrace();
                }
            }
        }
    }

    @Override
    public void onClick(View v) {
        if (!recording) {
            startRecording();
            Log.w(LOG_TAG, ""Start Button Pushed"");
            btnRecorderControl.setText(""Stop"");
        } else {
            // This will trigger the audio recording loop to stop and then set
            // isRecorderStart = false;
            stopRecording();
            Log.w(LOG_TAG, ""Stop Button Pushed"");
            btnRecorderControl.setText(""Start"");
        }
    }
}
</code></pre>
",2014-02-18 01:06:17,2014-09-24 22:16:58,Recording video on Android using JavaCV (Updated 2014 02 17),<android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
20763,21682925,2014-02-10 16:40:27,,"<p>Running Windows 7, x64 with OpenCV 2.4.8 (pre-built binaries).</p>

<p>Trying the following basic code:</p>

<pre><code>VideoWriter wrt;
wrt.open(""video.mp4"",  -1, 29, Size(480, 640));
</code></pre>

<p>This does nothing. The expected popup for codec selection does not open, nor is the writer getting open (i.e. a call to <code>wrt.isOpen()</code> returns false). Also, the internal pointer inside the writer class <code>wrt.writer</code> remains null.</p>

<p>Tried:</p>

<ol>
<li>Both Debug and Release OpenCV binaries.</li>
<li>Copying <code>opencv_ffmpeg248.dll</code> to the executable's directory according to <a href=""https://stackoverflow.com/questions/17573919/videowriter-not-working-on-win7-64bit-vm"">this</a>.</li>
<li>Passing exclusive codec codes such as <code>CV_FOURCC('M','P','4','2')</code> and others.</li>
<li>Hitting the computer.</li>
</ol>

<p>Nothing worked. Any help/direction would be appreciated..</p>
",2017-05-23 10:30:20,2016-07-15 16:00:49,OpenCV VideoWriter does not open,<c++><opencv><video-recording>,,,CC BY-SA 3.0,True,False,False,False,True
20781,25059576,2014-07-31 13:02:31,,"<p>I was compiling OpenCV 3.0.0 with Java support. My script was:</p>

<pre><code>mkdir /opt/opencv /opt/opencv/opencv-build
cd /opt/opencv
git clone https://github.com/Itseez/opencv.git 
cd /opt/opencv/opencv-build
export OPENCV_INSTALL_PATH=/opt/opencv
export FFMPEG_PATH=/opt/ffmpeg/ffmpeg_build/lib
export LD_LIBRARY_PATH=$OPENCV_INSTALL_PATH/lib:$FFMPEG_PATH:/opt/opencv/opencv/3rdparty/lib:$LD_LIBRARY_PATH
export PKG_CONFIG_PATH=/opt/ffmpeg/ffmpeg_build/lib/pkgconfig
cmake28 -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=""/opt/opencv"" \
        -D OPENCV_EXTRA_C_FLAGS=""-DHAVE_CAMV4L -DHAVE_CAMV4L2"" \
        -D WITH_OPENCL=OFF -D BUILD_SHARED_LIBS=OFF ../opencv
make
make install
</code></pre>

<p>as told in <a href=""http://docs.opencv.org/doc/tutorials/introduction/desktop_java/java_dev_intro.html"" rel=""noreferrer"">http://docs.opencv.org/doc/tutorials/introduction/desktop_java/java_dev_intro.html</a> with <code>-D BUILD_SHARED_LIBS=OFF</code>.</p>

<p>And when I wanted to test installation I found out that there is no Highgui class and no path for it. Here are my <code>opencv-300.jar</code> <code>org.opencv</code> folder contents:</p>

<pre><code>calib3d
core
features2d
imgcodecs
imgproc
ml
objdetect
photo
utils
video
videoio
</code></pre>

<p>Have I missed something during installation?</p>
",2016-03-31 14:29:28,2017-12-16 12:41:30,HighGUI is missing from OpenCV 3.0.0 JAR,<java><c++><opencv><clojure>,,,CC BY-SA 3.0,True,False,False,False,True
20819,22809352,2014-04-02 11:00:57,,"<p>I am currently working on an app, to read the camera images and process them using OpenCV.
I would like to store the <em>original</em> images as a ""normal"" video and to drop the processed images after processing (after the information is extracted).
For this I basically need to encode the image stream to h264.
It will not be possible to use ffmpeg or other solutions wich do it on the general cpu. It has to be done using the internal hardware acceleration.
Because of this I have actually three questions:</p>

<ul>
<li><p>Does somebdy know how to achieve h264 encoding using the internal hw-modules to encode videos?</p></li>
<li><p>Or does ffmpeg really support this on Android?</p></li>
<li><p>Or is there a way access the image stream during the ""usual"" encoding process?</p></li>
</ul>

<p>Thanks alot!</p>
",,2014-04-02 21:53:42,Android: how to encode a stream of images to h264 with hardware acceleration?,<android><opencv><stream><ffmpeg><h.264>,,,CC BY-SA 3.0,True,False,False,False,True
20951,18437085,2013-08-26 05:15:52,,"<p>is there any way to merge more than two videos using javacv open library?</p>

<p>I've tried the below code, but this allows only two videos at a time  </p>

<pre><code>void merge() {
FrameGrabber grabber1 = new FFmpegFrameGrabber(ffmpeg_link
                + ""1.mp4"");
        grabber1.start();           
        FrameGrabber grabber2 = new FFmpegFrameGrabber(ffmpeg_link
                + ""2.mp4"");
        grabber2.start();           
        FrameRecorder recorder2 = new FFmpegFrameRecorder(""/mnt/sdcard/""
                + ""output.mp4"", grabber1.getImageWidth(),
                grabber1.getImageHeight(), grabber1.getAudioChannels());
        recorder2.setFrameRate(grabber1.getFrameRate());
        recorder2.setSampleFormat(grabber1.getSampleFormat());
        recorder2.setSampleRate(grabber1.getSampleRate());          
        recorder2.start();
        Frame frame;
        int j = 0;
        while ((frame = grabber1.grabFrame()) != null) {
            j++;
            recorder2.record(frame);                
        }           
        while ((frame = grabber2.grabFrame()) != null) {
            recorder2.record(frame);                
        }

        recorder2.stop();
        grabber2.stop();
        grabber1.stop();        


}  
</code></pre>

<p>Thanks</p>
",2013-08-27 05:44:27,2013-08-27 05:44:27,How to merge more than two videos using FrameRecorder (javacv)?,<java><android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
21212,20550654,2013-12-12 17:52:38,,"<p>I have started using OpenCV with python recently and upon using <a href=""https://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html#saving-a-video"" rel=""nofollow"">this method</a> to write a video file I was not content as 10 seconds of video were resulting in 1GB files.</p>

<p>What is the recommended way to do it? Use external tools like ffmpeg is something considered good practice for this type of thing?</p>
",,2013-12-12 17:52:38,What is the best way to write videos captured from webcam by OpenCV?,<opencv><python-2.7><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
21251,25097939,2014-08-02 18:04:42,,"<p>I have an image in OpenCV which I can view and save correctly, I want to take this image and pass it to FFMPEG so I can encode it, but when I save the jpg output from ffpmeg I get a empty image, which probably means I am not copying the data correctly over to AVFrame.</p>

<p>What am I doing wrong...</p>

<p>Any help is greatly appreciated.</p>

<p>This is how I set up the final_frame and yuv422 frame</p>

<pre><code>final_frame = avcodec_alloc_frame();
int num_bytes = avpicture_get_size(PIX_FMT_BGR24, 1600, 720);
final_frame1_buffer = (uint8_t *)av_malloc(num_bytes*sizeof(uint8_t));
avpicture_fill((AVPicture*)final_frame, final_frame1_buffer, PIX_FMT_BGR24, 1600, 720);

yuv422_final_frame = avcodec_alloc_frame();
int yuv422_num_bytes = avpicture_get_size( PIX_FMT_YUV422P, 1600, 720 );
final_frame2_buffer = (uint8_t *)av_malloc(yuv422_num_bytes*sizeof(uint8_t));
avpicture_fill((AVPicture*)yuv422_final_frame, final_frame2_buffer, PIX_FMT_YUVJ422P, 1600, 720);
</code></pre>

<p>I have attached the code below</p>

<pre><code>cv::imshow(""output image"", im3);   &lt;---------- Image shows correctly
cv::Mat rgb_frame;
cv::cvtColor( im3 , rgb_frame, CV_BGR2RGB ) ;
if (final_sws_ctx == NULL)
{
    final_sws_ctx = sws_getContext(1600, 720,
    AV_PIX_FMT_BGR24, 1600, 720,
    AV_PIX_FMT_YUVJ422P, SWS_FAST_BILINEAR, 0, 0, 0);
}

imwrite( ""rgbjpeg.jpg"", rgb_frame );  &lt;----- Image Saves correctly here too

avpicture_fill((AVPicture*)final_frame, rgb_frame.data, PIX_FMT_RGB24, 1600, 720);
sws_scale(final_sws_ctx, final_frame-&gt;data, 
          final_frame-&gt;linesize, 
          0, 720, 
          yuv422_final_frame-&gt;data, 
          yuv422_final_frame-&gt;linesize);

AVPacket encode_packet;
int got_output = 0;
av_init_packet(&amp;encode_packet);
encode_packet.data = NULL;
encode_packet.size = 0;
int ret = avcodec_encode_video2(final_codec_context, 
                                &amp;encode_packet, 
                                yuv422_final_frame, 
                                &amp;got_output);

if (got_output ) {
    CString temp;

    temp.Format( ""test%u.jpg"", counter); 
    FILE* outputFile = fopen(temp, ""wb"");
    printf(""Write frame (size=%5d)\n"", encode_packet.size);
    fwrite(encode_packet.data, 1, encode_packet.size, outputFile);
    av_free_packet(&amp;encode_packet);
    fclose(outputFile);

    counter++;  
}
</code></pre>
",,2014-08-02 21:06:24,opencv Mat convert to AVFrame,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
21260,24002570,2014-06-02 20:18:15,,"<p>JavaCV 0.3 Stream Test Android Project can be downloaded <a href=""https://code.google.com/p/javacv/"" rel=""nofollow"">here</a>.
And it is description is in the article <a href=""http://www.walking-productions.com/notslop/2013/01/16/android-live-streaming-courtesy-of-javacv-and-ffmpeg/"" rel=""nofollow"">""Android Live Streaming courtesy of JavaCV and FFMPEG""</a></p>

<p>If I want to use ffplay to display the streaming video in the local Internet, I find that it does not work.
 I tried different formats of the ffmpeg_link, such as:
 rtmp://192.168.1.27:1935/livestream/12070660
 rtmp://live:live@192.168.1.27:8080/live/test.flv
 rtmp://192.168.1.27:1935</p>

<p>I use ffplay to display:
 ffplay rtmp://192.168.1.27:1935/livestream/12070660</p>

<p>The output error is:
 RTMP_Connect0, failed to connect socket. 113 (No route to host)/0
 rtmp://192.168.1.27:1935/livestream/12070660: Unknown error occurred</p>
",2014-12-17 11:34:15,2014-12-17 11:34:15,How to display video streaming using ffplay in the JavaCV 0.3 Stream Test Android Project?,<android><ffmpeg><video-streaming><rtmp><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
21437,22863586,2014-04-04 13:00:26,,"<p>I am writing a client-server application which does real time video transmission from an android based phone to a server. The captured video from the phone camera is encoded using the android provided h264 encoder and transmitted via UDP socket. The frames are not RTP encapsulated. I need it to reduce the overhead and hence the delay.
On the receiver, I need to decode the incoming encoded frame. The data being sent on the UDP socket not only contains the encoded frame but some other information related to the frame as a part of its header. Each frame is encoded as an nal unit.</p>

<p>I am able to retrieve the frames from the received packet as a byte array. I can save this byte array as raw h264 file and playback using vlc and everything works fine. 
However, I need to do some processing on this frame and hence need to use it with opencv.
Can anyone help me with decoding a raw h264 byte array in opencv?
Can ffmpeg be used for this?</p>
",,2019-05-30 05:10:09,H264 decoder in opencv for real time video transmission,<opencv><ffmpeg><h.264>,,,CC BY-SA 3.0,True,False,False,False,True
21627,24035858,2014-06-04 11:10:05,,"<p><strong>What i'm trying to do:</strong></p>

<p>Hi!</p>

<p>I'm trying to store the Video and Audio information from a video file. I would like to store video frames and audio frames separately in different variables. </p>

<p>My intention is to manage video/files and do some actions with the audio and video frame list, but to do what I'm plannign to do I need to store this audio/video frames separately. I've read a lot of questions in StackOverflow about python and audio/video managing.</p>

<p>Most people recommend to use <code>OpenCV</code> or <code>ffmpeg</code> to manage videos. I saw some scripts using these libraries to get video(only video) frames, but none of them are getting audio, most of them are just getting video frames and save them as RGB images. I also check some scripts where people get audio frames from a mp3 file, but I'm not sure if you can do that in a video file</p>

<p>Most important thing to me is to know the best way to manage video and audio separately. I'm not looking for people to do my code, just asking to point me in a good direction. </p>

<p>One of the things I'm trying to do is to send this information via socket, but as I said I need the audio and video frames to be in separated variables (yes, i'm wondering about an stream app, but that's not the only thing I'm trying to do)</p>

<p>I know I should give more information, and maybe show some code, but I don't have any concret code I tried some things, but I've never been capable to separate audio and video. I know that each format has his own encryption, and at the end I decided to use ""mp4"" as video format but I don't know neither if this is the best format for what I'm trying to do.</p>

<p><strong>Resume:</strong></p>

<p>Is openCV the best way to manage video and audio separately ? </p>

<p>Wich is the easiest way to separate video and audio frames ? Is it possible ?</p>

<p>Wich is the best documentation I should read to learn about video/audio management ?</p>

<p>I would like to do the things with my own code, and use in the less way possible openCV or other libraries. </p>

<p>My ""basic"" idea is to get a ""list"" of audio and video frames, and then I would like to do some operations, but right now I can't find the best way for me to manage a vide using python. I even wonder if could be possible to manage a video as raw data</p>

<p><strong>I need to know wich is the best library to manage videos using python, for me the best library, will be the one that allows me to manage the videos more ""freely""</strong></p>

<p><strong>I've already checked:</strong></p>

<p>I've read too many questions on this theme, the most recent are :</p>

<p><a href=""https://stackoverflow.com/questions/19216450/how-to-extract-audio-from-a-video-file-using-python"">How to extract audio from video file</a></p>

<p><a href=""https://stackoverflow.com/questions/22940553/how-to-split-audio-and-video-separately-from-a-given-video-file-using-mlt"">Split audio video separately from given video using MLT</a></p>

<p><a href=""https://stackoverflow.com/questions/5344927/embed-audio-video-in-python-gui"">Embed audio video in python gui</a></p>
",2017-05-23 10:28:56,2016-07-03 07:37:17,Python get Audio/Video frames separately from video file,<python><opencv><audio><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
21661,24038043,2014-06-04 12:53:57,,"<p>I am working on small project where i need to merge some images at start and end of existing video.
At start of video i need to merge one image and at the end of video there will be multiple images merged.
After merging the video the output file will be the video file having those images embeded as video.</p>
",,2014-06-05 04:55:00,I want to merge some images at start and end of video to generate new video,<php><image-processing><ffmpeg><video-processing>,,,CC BY-SA 3.0,False,False,False,False,True
21720,20594878,2013-12-15 13:07:38,,"<p>I am reading found many articles and info about creating video from sequence of images. They all recommend to use ffmpeg. The thing is that this pretty complicated. There is simple way to do this without ffmpeg? I need that the result video will be readable to regular video player on the device.</p>
",,2015-02-28 07:12:38,Create video file from images in Android,<android><image-processing>,,,CC BY-SA 3.0,False,False,False,False,True
21785,21773850,2014-02-14 08:04:29,,"<p>I am using OpenCV to display a video 
my code is as</p>

<pre><code>#include&lt;opencv2/highgui.hpp&gt;
#include&lt;cv.h&gt;
#include&lt;opencv/cv.hpp&gt;
#include&lt;opencv2/opencv.hpp&gt;
#include&lt;cvaux.h&gt;
#include&lt;cxcore.h&gt;
#include&lt;stdio.h&gt;
#include&lt;highgui.h&gt;
#include&lt;stdlib.h&gt;
#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;iostream&gt;

using namespace cv;
int main( int argc, char ** argv )
{
CvCapture* capture;
cvNamedWindow( ""video"", CV_WINDOW_AUTOSIZE ); 
capture = cvCreateFileCapture(""/home/vaibhav/program/c/w.avi"");
IplImage* frame;
while(1){
frame = cvQueryFrame( capture );
if( !frame ) break;
cvShowImage( ""video"", frame );
char c = cvWaitKey(33);
if( c == 27 ) break;
}

cvReleaseCapture( &amp;capture );

cvDestroyWindow( ""Webcam"" );

return 0; }
</code></pre>

<p>The program compiles but it gives error when try to run it</p>

<p>I am using Ubuntu 12.04 and Eclipse</p>

<pre><code>warning: Error opening file (/home/vaibhav/opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:553)
</code></pre>
",2015-10-29 16:45:51,2019-08-20 19:52:22,Error opening file (/home/vaibhav/opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:553) in openCV,<opencv>,,,CC BY-SA 3.0,True,False,False,False,True
21937,24056768,2014-06-05 09:41:53,,"<p>i'm working on android app that create video from list of images  using javacv i did all the following :</p>

<h1>Follow the instructions on this page: <a href=""http://developer.android.com/training/basics/firstapp/"" rel=""nofollow"">http://developer.android.com/training/basics/firstapp/</a></h1>

<p># Go to File > New > Folder, select your project as parent folder, type ""libs/armeabi"" as Folder name, and click Finish.
 # Copy <code>javacpp.jar</code> and <code>javacv.jar</code> into the newly created ""libs"" folder.
 # Extract all the <code>*.so</code> files from <code>javacv-android-arm.jar</code>, <code>opencv-2.4.8-android-arm.jar</code>, and <code>ffmpeg-2.1.1-android-arm.jar</code> directly into the newly created ""libs/armeabi"" folder, without creating any of the subdirectories found in the JAR files.
 # Navigate to Project > Properties > Java Build Path > Libraries and click ""Add JARs..."".
 # Select both <code>javacpp.jar</code> and <code>javacv.jar</code> from the newly created ""libs"" folder.</p>

<p>but i still have this error UnsatisfiedLinkError  can you tell me what is the problem?
i also tried making new project but the same error! </p>
",,2014-06-08 20:42:10,javacv for with android,<android><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
21943,20613453,2013-12-16 14:37:33,,"<p>I am trying to display the video feed from IP camera getting the following error</p>

<pre><code>warning: Could not find codec parameters 

(../../modules/highgui/src/cap_ffmpeg_impl.hpp:540)
</code></pre>

<p>Here's the code for the same.</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;opencv2/opencv.hpp&gt;
#include &lt;iostream&gt;
using namespace cv; 
using namespace std;
int main(int, char**) 
{ 
VideoCapture vcap; 
Mat image;
// This works on a D-Link CDS-932L
const string videoStreamAddress = ""http://admin:admin123@172.41.20.55:80/?    action=stream?dummy=param.mjpg"";//From mjpeg streamer
//const string videoStreamAddress = ""http://192.168.1.13:8080/videofeed?   dummy=param.mjpg""; // Streaming from android using ip-cam

//open the video stream and make sure it's opened
if(!vcap.open(videoStreamAddress)) {


cout &lt;&lt; ""Error opening video stream or file"" &lt;&lt; std::endl;
return -1;
}

for(;;) {
if(!vcap.read(image)) {
    cout &lt;&lt; ""No frame"" &lt;&lt; std::endl;
    waitKey();
}
cv::imshow(""Output Window"", image);
    if(cv::waitKey(1) &gt;= 0) break;
}
}
</code></pre>

<p>First i got different error so I installed K-Lite codec. Now I am getting this error.
Can some one please tell me what is the error related to.
I have gone through many post from stackoverflow and opencv also but could manage to get a satisfactory answer.
Please help me.
Thanks in advance.</p>
",,2013-12-17 06:24:08,warning: Could not find codec parameters (../../modules/highgui/src/cap_ffmpeg_impl.hpp:540),<c++><opencv><video><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
22044,17584734,2013-07-11 03:50:12,,"<p>Hi Im trying to display the lena.jpg which is the first demostration for Instant OpenCV Starter Book. </p>

<p>I can build and play 'hello world' easy enough.</p>

<p>The problem code</p>

<pre><code>    // opencv header files
    #include ""opencv2/highgui/highgui.hpp""
    #include ""opencv2/core/core.hpp""
    // namespaces declaration
    using namespace cv;
    using namespace std;
    // create a variable to store the image
    Mat image;
    int main( int argc, char** argv )
    {
    // open the image and store it in the 'image' variable
    // Replace the path with where you have downloaded the image
    // image=imread(""&lt;path to image""&gt;/lena.jpg"");
    image=imread(""/home/nigel/Documents/ffmpeg/tests/lena.jpg"");
    // create a window to display the image
    namedWindow( ""Display window"", CV_WINDOW_AUTOSIZE );
    // display the image in the window created
    imshow( ""Display window"", image );
    // wait for a keystroke
    waitKey(0);
    return 0;
    }
</code></pre>

<p>The error</p>

<pre><code>    g++ -Wall -fexceptions 'pkg-config --cflags opencv' -g ""pkg-config --cflags
    opencv' -c/home/nigel/Drone/Test2/main.cpp -o obj/Debug/Drone/Test2/main.o
    g++:fatal error:no input files
    compilation terminated
    process terminated with status 1 (0 minutes, 0 seconds)
</code></pre>

<p>I have tried different paths for the lena.jpg, I changed the lena.jpg from lena.pnm not sure if I have the path right maybe ?</p>

<p>New to using OpenCv would appreciate some help</p>
",,2013-07-11 04:15:23,G++: fatal error: no input files,<opencv><g++>,,,CC BY-SA 3.0,True,True,False,False,True
22167,22923169,2014-04-07 21:10:05,,"<p>I am using MAC OSx and OpenCv 2.4.8. I am trying to compile a program which includes:</p>

<p>avformat.h and avcodec.h</p>

<p>I have looked for those files in my computer and they exist (in OpenCv folder).</p>

<p>When I compile like this: </p>

<p>g++ track.cpp -o track -I /Desktop/opencv-2.4.8/include/opencv -L /Desktop/opencv-2.4.8/3rdparty/include/ffmpeg_/libavcodec /Desktop/opencv-2.4.8/3rdparty/include/ffmpeg_/libavformat  -lopencv_highgui -lopencv_core -lavcodec -lavformat</p>

<p>I get the following error:</p>

<p>fatal error: 'avformat.h' file not found
fatal error: 'avcodec.h' file not found</p>

<p>What's wrong??</p>

<p>THANKS A LOT!!</p>
",2014-04-07 23:32:12,2016-04-30 14:02:58,avformat.h and avcode.h NOT FOUND,<macos><opencv><compilation><avcodec>,,,CC BY-SA 3.0,True,False,False,False,True
22190,20633724,2013-12-17 12:08:30,,"<p>I have created a opencv proj in Ubuntu 12.04. I want to to just send the executable and the needed files to another pc. How is possible? What I should include with the executable? Is it necessary to include files from opencv library?? I found that I must have, statical linking when builting the opencv library. I have used the above file for installing opencv that I have found in documentation:</p>

<pre><code>version=""$(wget -q -O - http://sourceforge.net/projects/opencvlibrary/files/opencv-unix | egrep -m1 -o '\""[0-9](\.[0-9])+' | cut -c2-)""
echo ""Installing OpenCV"" $version
mkdir OpenCV
cd OpenCV
echo ""Removing any pre-installed ffmpeg and x264""
sudo apt-get -qq remove ffmpeg x264 libx264-dev
echo ""Installing Dependenices""
sudo apt-get -qq install libopencv-dev build-essential checkinstall cmake pkg-config yasm libtiff4-dev libjpeg-dev libjasper-dev libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev libxine-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev python-dev python-numpy libtbb-dev libqt4-dev libgtk2.0-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev libxvidcore-dev x264 v4l-utils ffmpeg
echo ""Downloading OpenCV"" $version
wget -O OpenCV-$version.tar.gz  http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/$version/opencv-""$version"".tar.gz/download
echo ""Installing OpenCV"" $version
tar -xvf OpenCV-$version.tar.gz
cd opencv-$version
mkdir build
cd build
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D  BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D  INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..
make -j2
sudo make install
sudo sh -c 'echo ""/usr/local/lib"" &gt; /etc/ld.so.conf.d/opencv.conf'
sudo ldconfig
echo ""OpenCV"" $version ""ready to be used""
</code></pre>

<p>Is it necessary to build again opencv? How can I achieve statical linking??</p>
",2013-12-17 12:29:11,2013-12-17 12:59:27,Running opencv executable from another computer,<c++><opencv><ubuntu><executable>,2013-12-17 20:26:16,,CC BY-SA 3.0,True,False,False,False,True
22218,17601541,2013-07-11 19:13:47,,"<p>here is my code </p>

<pre><code>#include &lt;iostream&gt;

#include ""opencv2/core/core.hpp""
#include ""opencv2/highgui/highgui.hpp""

using namespace std;

const int KEY_ENTER = 10;
const int KEY_ESC   = 27;
const int KEY_1         = 49;
const int KEY_2         = 50;
const int KEY_3         = 51;
const int KEY_4         = 52;
const int KEY_5         = 53;
const int KEY_6         = 54;

const int DELAY = 30;

const string WIN_NAME = ""Camera View"";

const string NAME[6] = {""me"", ""serk"", ""prot"", ""vitkt"", ""st"", ""tara""};

struct pg
{
string name;
int cnt;
pg(): name(""""), cnt (0) {};
pg(string s, int c) : name(s) , cnt(c) {};
};

pg crew[6];

int main()
{
for(int i = 0; i &lt; 6; ++i)
    crew[i] = pg(NAME[i], 0);

cv::VideoCapture cam;

cam.open(0);

cv::Mat frame;

pg cur = crew[0];

int c = 0;
for(;cam.isOpened();)
{
    try
    {
    cam &gt;&gt; frame;

    cv::imshow(WIN_NAME, frame);

    int key = cv::waitKey(DELAY);

    cur = (key &gt;= KEY_1 &amp;&amp; key &lt;= KEY_6) ? crew[key - KEY_1] : cur;

    if(KEY_ENTER == key)
        cv::imwrite(cv::format(""%s%d.jpg"", cur.name.c_str(), cur.cnt++), frame);

    if(KEY_ESC == key)
        break;
    } catch (cv::Exception e)
    {
        cout &lt;&lt; e.err &lt;&lt; endl;
    }
}

cam.release();
return 0;
}
</code></pre>

<p>but I cannot capture a video from camera. =( 
I've got Ubuntu 12.04 on my PC, </p>

<p>I did exactly every instruction in <a href=""http://docs.opencv.org/trunk/doc/tutorials/introduction/linux_install/linux_install.html"" rel=""nofollow"">linux install istructions</a> 
I googled my problem and installed additional dependencies 
this</p>

<ul>
<li>python-opencv</li>
<li>libhighgui2.3</li>
<li>libhighgui-dev</li>
<li>ffmpeg</li>
<li>libgstreamer0.10-0</li>
<li>libv4l-0</li>
<li>libv4l-dev</li>
<li>libxine2</li>
<li>libunicap2</li>
<li>libdc1394-22</li>
</ul>

<p>and many others which I can find. 
but it still doesn't work.<br>
It's ridiculous but this code works on my laptop, with the same distribution of ubuntu.
I have no compilation errors. </p>

<p>in terminal
    gstreamer-properties 
opens that camera. 
Does someone know what to do? Help me please. </p>

<p>I've noticed that it even doesn't load pictures from file </p>

<p>code example 
    #include ""opencv2/core/core.hpp""
    #include ""opencv2/highgui/highgui.hpp""</p>

<pre><code>#include &lt;iostream&gt;

using namespace std;

int main()
{
system(""clear"");

cv::Mat picture;
picture = cv::imread(""boobies.jpg"");

cout &lt;&lt; picture.rows &lt;&lt; endl;
cv::imshow(""Smile"", picture);

char ch;
cin &gt;&gt; ch;

cv::destroyWindow(""Smile"");

return 0;
}
</code></pre>

<p>haven't load the picture from project folder</p>
",2013-07-11 19:26:41,2019-09-20 08:28:08,Cannot access to my webcam opencv ubuntu,<c++><opencv><ubuntu><webcam>,,,CC BY-SA 3.0,True,True,False,False,True
22240,25171967,2014-08-06 23:32:21,,"<p>I'm looking for a simple way to get data of an IP Camera RTSP Stream (using H264 Audio/Video) and get on the other side</p>

<ul>
<li>a frame by frame byte[]</li>
<li>a stream of the audio</li>
</ul>

<p>After many research</p>

<ul>
<li>EmguCV Capture seems hanging forever (no answer from forum)</li>
<li>There is many (too big) <a href=""https://net7mma.codeplex.com/"" rel=""nofollow"">RTSP Server</a> few decode H264</li>
<li>There is ""slow"" ffmpeg wrapper</li>
<li>There is some managed DirectShow wrapper</li>
</ul>

<p>So I don't know where to go ? And how to do this ?</p>

<p>It seems iSpyCamera is doing the job but it's a big project not a little library to query ip cameras.</p>
",2014-08-06 23:35:22,2020-06-28 17:02:47,RTSP Client for H264 Audio/Video Stream,<c#><camera><ffmpeg><emgucv>,,,CC BY-SA 3.0,False,False,True,False,True
22273,19487063,2013-10-21 05:48:28,,"<p>I want to make my custom media player and requires orientation info of video (for detecting it is recorded from front or back camera). for jpeg images i can use <code>ExifInterface.TAG_ORIENTATION</code> but for video how i can find this information.</p>

<p>I tried to grab frame from video file and convert it into jpeg but again it always provides orientation <code>0</code> in all cases.</p>

<p>Please help me. Thanks in advance.</p>
",2017-03-03 08:01:58,2017-03-03 08:01:58,Detect orientation of a recorded video in android,<android><video><ffmpeg><orientation><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
22629,25207292,2014-08-08 15:45:37,,"<p>I'm attmepting to open a video file in OpenCV following the tutorials seen here <a href=""http://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html#display-video"" rel=""nofollow noreferrer"">OpenCV Python Tutorial</a></p>

<p>However, upon running the block of code nothing happens. My code is as follows:</p>

<pre><code>import numpy as np
import cv2

cap = cv2.VideoCapture('768x576.avi')   

while(cap.isOpened()):
    ret, frame = cap.read()

    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

    cv2.imshow('frame',gray)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>I have ffmpeg installed on my system &amp; in my system path.  Additionally I have gstreamer installed on my machine as well.  This file can be opened in windows media player, manipulated in ffmpeg &amp; also opened in VLC.</p>

<p>I'm at a loss here as this should be a straight forward tutorial.</p>

<hr>

<p>Edit 1:  I've installed a bunch of different codecs including the K-Lite Codec Pack and XVid. If I open the file with ffmpeg -i this is what I get</p>

<pre><code>C:\sandbox&gt;ffmpeg -i 768x576.avi
ffmpeg version N-64539-gc8b2cf4 Copyright (c) 2000-2014 the FFmpeg developers
  built on Jul  8 2014 22:10:23 with gcc 4.8.3 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-av
isynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enab
le-iconv --enable-libass --enable-libbluray --enable-libcaca --enable-libfreetyp
e --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-
libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libope
njpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsox
r --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab -
-enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx
--enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-
libxavs --enable-libxvid --enable-decklink --enable-zlib
  libavutil      52. 91.100 / 52. 91.100
  libavcodec     55. 68.102 / 55. 68.102
  libavformat    55. 45.100 / 55. 45.100
  libavdevice    55. 13.102 / 55. 13.102
  libavfilter     4. 10.100 /  4. 10.100
  libswscale      2.  6.100 /  2.  6.100
  libswresample   0. 19.100 /  0. 19.100
  libpostproc    52.  3.100 / 52.  3.100
Input #0, avi, from '768x576.avi':
  Metadata:
    encoder         : MEncoder 2:1.0~rc2-0ubuntu19
  Duration: 00:01:19.50, start: 0.000000, bitrate: 818 kb/s
    Stream #0:0: Video: msmpeg4v3 (div3 / 0x33766964), yuv420p, 768x576, 816 kb/
s, 10 fps, 10 tbr, 10 tbn, 10 tbc
At least one output file must be specified
</code></pre>

<p>Edit 2: When I try to do this line by line the following happens</p>

<pre><code>C:\sandbox&gt;python
Python 2.7.7 |Anaconda 2.0.1 (64-bit)| (default, Jun 11 2014, 10:40:02) [MSC v.1
500 64 bit (AMD64)] on win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
Anaconda is brought to you by Continuum Analytics.
Please check out: http://continuum.io/thanks and https://binstar.org
&gt;&gt;&gt;
&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; import cv2
&gt;&gt;&gt; print cv2.__version__
2.4.9
&gt;&gt;&gt;
&gt;&gt;&gt; cap = cv2.VideoCapture('768x576.avi')
&gt;&gt;&gt; print cap
&lt;VideoCapture 0000000002DC3810&gt;
&gt;&gt;&gt; print cap.get(5)
0.0
&gt;&gt;&gt;
</code></pre>

<p>Edit 3: The answer wasn't the 100% answer but the comments going down that rabbit hole lead me to this <a href=""https://stackoverflow.com/questions/16374633/opencv-videocapture-cannot-read-video-in-python-but-able-in-vs11"">OpenCV VideoCapture cannot read video in Python but able in VS11</a>  and THAT is how I figured out my issue</p>
",2017-05-23 11:49:20,2014-08-17 13:19:35,Opening video with openCV,<python><opencv><video>,,,CC BY-SA 3.0,True,False,False,False,True
22641,22961398,2014-04-09 11:41:18,,"<p>I'm using Emgu CV to create video player. it's working fine with small size video (&lt;500Kb) ,but when i try to play big size video (>20Mb), it shows this error</p>

<pre><code>An unhandled exception of type 'System.NullReferenceException' occurred in Emgu.CV.dll
Additional information: Unable to create capture from E:\Tugas Akhir\wiman\3a.avi
</code></pre>

<p>i have emgu cv reference in my project, also have opencv_ffmpeg290_64.dll and other opencv dll in my project.
this is line of code cause this error,</p>

<pre><code>string videodir=""E:\Tugas Akhir\wiman\3a.avi"";
capture = new Capture(@videodir);
</code></pre>

<p>How can i solve this?</p>
",,2016-12-31 13:38:26,Big Size Video EmguCV,<c#><nullreferenceexception><video-capture><emgucv>,,,CC BY-SA 3.0,True,False,True,False,True
22670,25518477,2014-08-27 03:24:33,,"<p>I want to use FFmpegFrameRecorder for creating video from images. I have create sample project in netbeans sets the javacv and opencv it works.  </p>

<p>But how to set for android. I have follow this link<br>
<a href=""http://javacv4android.blogspot.com/2014/02/how-to-import-javacv-libraries-to.html"" rel=""nofollow"">http://javacv4android.blogspot.com/2014/02/how-to-import-javacv-libraries-to.html</a>></p>

<p>But at the end it give error Installation error: INSTALL_FAILED_CONTAINER_ERROR
I did all things that need to resolve INSTALL_FAILED_CONTAINER_ERROR but not fix.</p>

<p>Please tell me the procedure to setup javacv and opencv for android?</p>
",,2014-08-27 03:24:33,"How to setup javacv, opencv for android",<android><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
22708,21851580,2014-02-18 10:54:23,,"<p>I have multiple recorded video samples, when I run these through my program it returns the FPS among other things. It is accurate enough for all of my video samples (see table below) but when I run a video sample taken through my smartphone it is returning the FPS at 90000, this happens with every video that captured through my smartphone so it is not just a problem with a single video file.</p>

<pre><code>File              Actual FPS          OpenCV FPS          ffmpeg FPS
</code></pre>

<hr>

<pre><code>action-60fps         60                   59                  60


action-24fps         24                   24                  24


phone_panning        29                  90000                29
</code></pre>

<p>What is causing this problem?</p>

<p>EDIT: Managed to forget to add my code...</p>

<pre><code>  VideoCapture capture(argv[1]);
  Mat frame;
  if(capture.isOpened()) {
    int fps = capture.get(CV_CAP_PROP_FPS);
    int width = capture.get(CV_CAP_PROP_FRAME_WIDTH);
    int height = capture.get(CV_CAP_PROP_FRAME_HEIGHT);
    cout &lt;&lt; ""FPS: "" &lt;&lt; fps &lt;&lt; "", width: "" &lt;&lt; width &lt;&lt; "", height: "" &lt;&lt; height &lt;&lt; endl;
    VideoWriter writer(""output.mpg"",
    CV_FOURCC('P','I','M','1'), fps, cvSize(width, height), 0); // 0 means gray, 1 means color
    if(writer.isOpened()) {
      while(true) {
        capture &gt;&gt; frame;
        if(!frame.empty()) {
          imshow(""Video"", frame);
        }
        Mat frame_gray = frame.clone();
        cvtColor(frame, frame_gray, CV_RGB2GRAY);
        writer &lt;&lt; frame_gray;
        int key = waitKey(25);
        if((char)key == 'q') { 
          break; 
        }
      }
    }
  }
</code></pre>
",2014-02-18 11:03:25,2015-10-20 13:50:54,OpenCV - FPS from phone camera not correct,<c++><opencv><video><video-processing><frame-rate>,,,CC BY-SA 3.0,True,True,False,False,True
22794,25529636,2014-08-27 14:18:22,,"<p>I've just started to make a ubuntu application using PyGtk. My very first object is to open, convert and then save a video file. Ignoring convert phase, I'm going to implant open-save functions. But at the moment when I open a video file, and save it, I get non-video file with 11B size. I've just google this and found <a href=""http://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_setup/py_intro/py_intro.html#intro"" rel=""nofollow"">OpenCV</a> for python. But I'm not sure if it's the best way to do it. I also think I'm going to use ffmpeg libraries to do some manipulates on video files. Is it what I want or there might be other built-in libraries?</p>

<p>By the way, here's my code to open and save the file :</p>

<pre><code>    def on_openFile_clicked(self, widget):
        filename=None
        dialog = Gtk.FileChooserDialog(""Please choose a file"", self,
            Gtk.FileChooserAction.OPEN,
            (Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL,
             Gtk.STOCK_OPEN, Gtk.ResponseType.OK))

        response = dialog.run()
        self.add_filters(dialog)

        if response == Gtk.ResponseType.OK:
            filename = dialog.get_filename()
        elif response == Gtk.ResponseType.CANCEL:
            print 'Cancel Clicked'
        dialog.destroy()

        print ""File Choosen: "", filename

    def add_filters(self, dialog):

        filter_py = Gtk.FileFilter()
        filter_py.set_name(""Video Files"")
        filter_py.add_mime_type(""video/mp4"")
        filter_py.add_mime_type(""video/x-flv"")
        dialog.add_filter(filter_py)

        filter_any = Gtk.FileFilter()
        filter_any.set_name(""Any files"")
        filter_any.add_pattern(""*"")
        dialog.add_filter(filter_any)

    def on_saveFile_clicked(self, widget):
        filename=None
        dialog = Gtk.FileChooserDialog(""Please choose a file"", self,
            Gtk.FileChooserAction.SAVE,
            (Gtk.STOCK_CANCEL, Gtk.ResponseType.CANCEL,
             Gtk.STOCK_SAVE, Gtk.ResponseType.OK))

        response = dialog.run()
        self.add_filters(dialog)

        if response == Gtk.ResponseType.OK:
            filename = dialog.get_filename()
        elif response == Gtk.ResponseType.CANCEL:
            print 'Cancel Clicked'
        dialog.destroy()

        if filename != None:
            save_file=open(filename, 'w')
            save_file.write(""Sample Data"")
            save_file.close()
        print ""File Saved: "", filename
</code></pre>
",2014-08-27 16:56:02,2014-08-27 16:56:02,How to open&save a video file in python?,<python><opencv><video><ffmpeg><pygtk>,,,CC BY-SA 3.0,True,False,False,False,True
22808,26651980,2014-10-30 11:38:26,,"<p>I use MJPEG-Streamer to send my remote camera video via wifi. I use such command to see video:</p>

<p>gstreamer:</p>

<pre><code>gst-launch -v souphttpsrc location= ""http://192.168.1.1:8080/?action=stream&amp;type=.mjpg"" do-timestamp=true is_live=true ! multipartdemux ! jpegdec ! autovideosink
</code></pre>

<p>ffmpeg:</p>

<pre><code> ffplay ""http://192.168.1.1:8080/?action=stream&amp;type=.mjpg""
</code></pre>

<p>or:</p>

<pre><code> ffplay ""http://192.168.1.1:8080/?action=stream&amp;type=.mjpg"" -fflags nobuffer
</code></pre>

<p>however the <em>ffplay</em> has a high latency up to 3~10 seconds in my test, while the <em>gstreamer</em>
show almost no latency.</p>

<p>when using localhost MJPEG-Streamer, both two methods show low latency. so what's the reason ? and how to decrease the latency?</p>

<p>more detail:</p>

<p>I want to use opencv to capture a remote camera,my opencv compile with ffmpeg support but without gstreamer support ( I tried but failed,the cmake seemed to not find my gstreamer,I don't know which gstreamer library to install in opensuse 13.1), I can get the video in opencv but with high latency,so I compared ffmpeg with gstreamer,the result is as above.so how to decrease the latency? I read <a href=""https://trac.ffmpeg.org/wiki/StreamingGuide#Latency"" rel=""nofollow"">this link</a>,but still no solution.</p>

<p>thank you.</p>
",,2014-10-30 11:38:26,ffmpeg open remote video with high latency while gstreamer not,<opencv><video><ffmpeg><gstreamer>,,,CC BY-SA 3.0,True,False,False,False,True
22874,20691167,2013-12-19 20:34:46,,"<p>In my current project, when I call VideoCapture::open(<code>camera device index</code>) and the camera is in used by another program, it shows a <code>Video Source</code> dialog and returns true when I select a device that is already in use.</p>

<p>However, in my [previous] experiment project, when I called VideoCapture::open(<code>camera device index</code>), it doesn't show this dialog.</p>

<p>I want to know what is causing the <code>Video Source</code> dialog to show and the program to behave differently from the experimental project.</p>

<p>This is the source code to the experiment project:</p>

<pre><code>int main (int argc, char *argv[])
{

    //vars
    time_duration td, td1;
    ptime nextFrameTimestamp, currentFrameTimestamp, initialLoopTimestamp, finalLoopTimestamp;
    int delayFound = 0;
    int totalDelay= 0;

    // initialize capture on default source
    VideoCapture capture;
    std::cout &lt;&lt; ""capture.open(0): "" &lt;&lt; capture.open(0) &lt;&lt; std::endl;
    std::cout &lt;&lt; ""NOOO"" &lt;&lt; std::endl;
    namedWindow(""video"", 1);

    // set framerate to record and capture at
    int framerate = 15;

    // Get the properties from the camera
    double width = capture.get(CV_CAP_PROP_FRAME_WIDTH);
    double height = capture.get(CV_CAP_PROP_FRAME_HEIGHT);

    // print camera frame size
    //cout &lt;&lt; ""Camera properties\n"";
    //cout &lt;&lt; ""width = "" &lt;&lt; width &lt;&lt; endl &lt;&lt;""height = ""&lt;&lt; height &lt;&lt; endl;

    // Create a matrix to keep the retrieved frame
    Mat frame;

    // Create the video writer
    VideoWriter video(""capture.avi"",0, framerate, cvSize((int)width,(int)height) );

    // initialize initial timestamps
    nextFrameTimestamp = microsec_clock::local_time();
    currentFrameTimestamp = nextFrameTimestamp;
    td = (currentFrameTimestamp - nextFrameTimestamp);

    // start thread to begin capture and populate Mat frame
    boost::thread captureThread(captureFunc, &amp;frame, &amp;capture);
    // loop infinitely
    for(bool q=true;q;)
    {
        if(frame.empty()){continue;}
        //if(cvWaitKey( 5 ) == 'q'){ q=false; }
        // wait for X microseconds until 1second/framerate time has passed after previous frame write
        while(td.total_microseconds() &lt; 1000000/framerate){
            //determine current elapsed time
            currentFrameTimestamp = microsec_clock::local_time();
            td = (currentFrameTimestamp - nextFrameTimestamp);
            if(cvWaitKey( 5 ) == 'q'){
                std::cout &lt;&lt; ""B"" &lt;&lt; std::endl;
                q=false;
                boost::posix_time::time_duration timeout = boost::posix_time::milliseconds(0);
                captureThread.timed_join(timeout);
                break;
            }
        }

        // determine time at start of write
        initialLoopTimestamp = microsec_clock::local_time();

        // Save frame to video
        video &lt;&lt; frame;
        imshow(""video"", frame);

        //write previous and current frame timestamp to console
        cout &lt;&lt; nextFrameTimestamp &lt;&lt; "" "" &lt;&lt; currentFrameTimestamp &lt;&lt; "" "";

        // add 1second/framerate time for next loop pause
        nextFrameTimestamp = nextFrameTimestamp + microsec(1000000/framerate);

        // reset time_duration so while loop engages
        td = (currentFrameTimestamp - nextFrameTimestamp);

        //determine and print out delay in ms, should be less than 1000/FPS
        //occasionally, if delay is larger than said value, correction will occur
        //if delay is consistently larger than said value, then CPU is not powerful
        // enough to capture/decompress/record/compress that fast.
        finalLoopTimestamp = microsec_clock::local_time();
        td1 = (finalLoopTimestamp - initialLoopTimestamp);
        delayFound = td1.total_milliseconds();
        cout &lt;&lt; delayFound &lt;&lt; endl;

        //output will be in following format
        //[TIMESTAMP OF PREVIOUS FRAME] [TIMESTAMP OF NEW FRAME] [TIME DELAY OF WRITING]
        if(!q || cvWaitKey( 5 ) == 'q'){
            std::cout &lt;&lt; ""C"" &lt;&lt; std::endl;
            q=false;
            boost::posix_time::time_duration timeout = boost::posix_time::milliseconds(0);
            captureThread.timed_join(timeout);
            break;
        }
    }

    // Exit
    return 0;
}
</code></pre>

<p><img src=""https://i.stack.imgur.com/JYsqm.png"" alt=""Video Source Dialog""></p>
",,2015-11-13 09:34:15,OpenCV's VideoCapture::open Video Source Dialog,<c++><opencv><ffmpeg><libavcodec><libav>,,,CC BY-SA 3.0,True,True,False,False,True
22965,24140591,2014-06-10 12:06:42,,"<p>i'm working on android app that create video from list of images using javacv i did all the following :</p>

<p>Follow the instructions on this page: <a href=""http://developer.android.com/training/basics/firstapp/"" rel=""nofollow"">http://developer.android.com/training/basics/firstapp/</a></p>

<ol>
<li>Go to File > New > Folder, select your project as parent folder, type ""libs/armeabi"" as Folder name, and click Finish. </li>
<li>Copy javacpp.jar and javacv.jar into the newly created ""libs"" folder.</li>
<li>Extract all the *.so files from javacv-android-arm.jar, opencv-2.4.8-android-arm.jar, and ffmpeg-2.1.1-android-arm.jar directly into the newly created ""libs/armeabi"" folder, without creating any of the subdirectories found in the JAR files. </li>
<li>Navigate to Project > Properties > Java Build Path > Libraries and click ""Add JARs..."".</li>
<li>Select both javacpp.jar and javacv.jar from the newly created ""libs"" folder.</li>
</ol>

<p>i almost tried everything ,  i tried edit build.gradle file to compile with ffmpeg&amp;opencv&amp;javacv&amp;jacacpp, it should contain:</p>

<p>i already used android ndk with simple example and it's working , but i have no idea how to make to work with javacv , i don't know how i can implement new functions like this in my activity or in test.c?</p>

<p>also included the c library in my activity</p>

<p>but i always get this error : UnsatisfiedLinkError</p>
",2014-08-12 14:57:15,2014-08-12 14:57:15,JavaCV with android ndk,<android><android-ndk><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
23097,19557274,2013-10-24 04:57:17,,"<p>warning : error opening file </p>

<p>c:\users\vp\work\ocv\opencv\modules\highgui\src\cap_ffmpeg.cpp:454</p>

<p>How to remove this error?</p>

<p>My program :</p>

<pre><code>#include&lt;opencv\cv.h&gt;
#include&lt;opencv\highgui.h&gt;
#include&lt;opencv\ml.h&gt;
#include&lt;opencv\cxcore.h&gt;



int main( int argc, char** argv ) {
cvNamedWindow( ""DisplayVideo"", CV_WINDOW_AUTOSIZE );
CvCapture* capture = cvCreateFileCapture("" E:\softwares\opencv\samples\cpp\tutorial_code\HighGUI\video-input-psnr-ssim\video\Megamind.avi "");
IplImage* frame;
while(1) {
frame = cvQueryFrame( capture );
if( !frame ) break;
cvShowImage( ""DisplayVideo"", frame );
char c = cvWaitKey(33);
if( c == 27 ) break;
}
cvReleaseCapture( &amp;capture );
cvDestroyWindow(""DisplayVideo"" );
}
</code></pre>
",,2013-10-24 06:31:05,error in program for playing a video in opencv,<c><visual-studio-2010><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
23208,24170952,2014-06-11 19:21:56,,"<p>I'm having trouble instantiating and opening an OpenCV <code>VideoWriter</code> for recording video on a Raspberry Pi (Raspbian Weezy).</p>

<p>My project is written in C++, but I've written a minimal Python program that demonstrates the problem.</p>

<p><a href=""https://gist.github.com/chriscollins/11ff2f43852e1c93dae8"">https://gist.github.com/chriscollins/11ff2f43852e1c93dae8</a></p>

<p>Both my C++ code and the Python code above run without problem on my Windows machine.  Sometimes the writer does not open, but that's to be expected - I don't have all of the listed codecs installed (the list of codecs comes from the Open CV source), but a good number of them work correctly.  However, on a Raspberry Pi, both the C++ code and the Python code fail with the <code>VideoWriter</code> never being opened.  In the above Python code, <code>writer.isOpened()</code> returns false for every single codec, when run on a Raspberry Pi.</p>

<p>I've <code>chown</code>ed the destination directory to the user I'm running the Python script as, and <code>chmod</code>ded it to <code>777</code> so I don't believe that it is a permissions problem.  I think it may be connected with how I've installed OpenCV or some of its dependencies, but I'm not sure how to rectify it.</p>

<p>The install process I've used is as follows:</p>

<ol>
<li><p>Update firmware/packages via <code>rpi-update</code>, <code>apt-get update</code> and <code>apt-get upgrade</code>.</p></li>
<li><p>Install the following dependencies via <code>apt-get</code>:
<code>
libjpeg8
libjpeg8-dev
libjpeg8-dbg
libjpeg-progs
ffmpeg
libavcodec-dev
libavcodec53
libavformat53
libavformat-dev
libgstreamer0.10-0-dbg
libgstreamer0.10-0
libgstreamer0.10-dev
libxine1-ffmpeg
libxine-dev
libxine1-bin
libunicap2
libunicap2-dev
swig
libv4l-0
libv4l-dev
python-numpy
libpython2.6
python-dev
python2.6-dev
libgtk2.0-dev
</code></p></li>
<li><p>Download and unzip <a href=""http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.9/opencv-2.4.9.zip"">http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.9/opencv-2.4.9.zip</a> to <code>/root/opencv-2.4.9</code>.</p></li>
<li><p><code>cd /root/opencv-2.4.9</code> and run <code>cmake -DCMAKE_BUILD_TYPE=RELEASE -DCMAKE_INSTALL_PREFIX=/usr/local -DBUILD_PERF_TESTS=OFF -DBUILD_opencv_gpu=OFF -DBUILD_opencv_ocl=OFF</code>.  Output of cmake is available at <a href=""https://gist.github.com/chriscollins/d8060e03a6acd6d4336c"">https://gist.github.com/chriscollins/d8060e03a6acd6d4336c</a></p></li>
<li><p><code>make</code> and <code>make install</code> from the same directory.</p></li>
</ol>

<p>Various other OpenCV functionality works correctly on the Raspberry Pi (in C++ or in Python) - e.g. viewing a webcam via <code>VideoCapture</code>, but I can't get the <code>VideoWriter</code> to work.  I'm tempted to try installing FFMPEG from source instead of via <code>apt-get</code>, but as <code>make</code> takes 5+ hours to run on a Raspberry Pi, I was hoping I'd find the answer here, rather than proceeding with a trial and error approach!</p>

<p>Any advice on how to solve (or debug) this is appreciated.</p>

<p>EDIT: Added output of cmake command (<a href=""https://gist.github.com/chriscollins/d8060e03a6acd6d4336c"">https://gist.github.com/chriscollins/d8060e03a6acd6d4336c</a>)</p>
",2014-06-18 21:31:15,2015-02-21 15:36:30,OpenCV VideoWriter will not open,<linux><opencv><ffmpeg><raspberry-pi><codec>,,,CC BY-SA 3.0,True,False,False,False,True
23239,26691189,2014-11-01 16:13:04,,"<p>I want to process mms video stream with OpenCV using Python. 
The stream comes from an IP camera I have no control over (traffic monitor). 
The stream is available as mms or mmst schemes -</p>

<pre><code>mms://194.90.203.111/cam2
</code></pre>

<p>plays on both VLC and Windows Media Player.</p>

<pre><code>mmst://194.90.203.111/cam2
</code></pre>

<p>works only on VLC.
I've tried to change the scheme to HTTP by re-streaming with FFmpeg and VLC but it didn't work.</p>

<p>As far as I understand, mms is using Windows Media Video to encode the stream. No luck adding '.mjpeg' at the end of the URI. I've yet to find what types of streaming are accepted by OpenCV.</p>

<p>Here's my code - </p>

<pre><code>import cv2, platform
#import numpy as np

cam = ""mms://194.90.203.111/cam2""
#cam = 0 # Use  local webcam.

cap = cv2.VideoCapture(cam)
if not cap:
    print(""!!! Failed VideoCapture: invalid parameter!"")

while(True):
    # Capture frame-by-frame
    ret, current_frame = cap.read()
    if type(current_frame) == type(None):
        print(""!!! Couldn't read frame!"")
        break

    # Display the resulting frame
    cv2.imshow('frame',current_frame)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break

# release the capture
cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>The 
What am I missing? What type of video streams can OpenCV capture?
Is there an elegant solution without scheme change or transcoding?</p>

<p>Thanks!</p>

<p>Python ver 2.7.8, OpenCV's ver 2.4.9, Both x86. Win7 x64 </p>
",,2017-10-04 19:08:15,How to Capture Video Stream with OpenCV (Python),<python><opencv><video><streaming><live-streaming>,,,CC BY-SA 3.0,True,False,False,False,True
23260,23015475,2014-04-11 14:30:20,,"<p>I'm trying to install OpenCV 2.4.8 on my Fedora Linux. Unfortunately for some reason java module won't install. I believe some dependencies are missing. Below you can see log from installation. JDK from Oracle (ver. 1.7.0_45-b18) is installed. ""Java tests: NO"" from log bothers me. Any idea?</p>

<pre><code>[root@localhost release]# cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..
-- The CXX compiler identification is GNU 4.8.2
-- The C compiler identification is GNU 4.8.2
-- Check for working CXX compiler: /bin/c++
-- Check for working CXX compiler: /bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working C compiler: /bin/cc
-- Check for working C compiler: /bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detected version of GNU GCC: 48 (408)
-- Performing Test HAVE_CXX_FSIGNED_CHAR
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Success
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Success
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Success
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Success
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_CXX_WERROR_ADDRESS
-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success
-- Performing Test HAVE_C_WERROR_ADDRESS
-- Performing Test HAVE_C_WERROR_ADDRESS - Success
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_CXX_WFORMAT
-- Performing Test HAVE_CXX_WFORMAT - Success
-- Performing Test HAVE_C_WFORMAT
-- Performing Test HAVE_C_WFORMAT - Success
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WMISSING_DECLARATIONS
-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
-- Performing Test HAVE_C_WMISSING_PROTOTYPES
-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WUNDEF
-- Performing Test HAVE_CXX_WUNDEF - Success
-- Performing Test HAVE_C_WUNDEF
-- Performing Test HAVE_C_WUNDEF - Success
-- Performing Test HAVE_CXX_WINIT_SELF
-- Performing Test HAVE_CXX_WINIT_SELF - Success
-- Performing Test HAVE_C_WINIT_SELF
-- Performing Test HAVE_C_WINIT_SELF - Success
-- Performing Test HAVE_CXX_WPOINTER_ARITH
-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success
-- Performing Test HAVE_C_WPOINTER_ARITH
-- Performing Test HAVE_C_WPOINTER_ARITH - Success
-- Performing Test HAVE_CXX_WSHADOW
-- Performing Test HAVE_CXX_WSHADOW - Success
-- Performing Test HAVE_C_WSHADOW
-- Performing Test HAVE_C_WSHADOW - Success
-- Performing Test HAVE_CXX_WSIGN_PROMO
-- Performing Test HAVE_CXX_WSIGN_PROMO - Success
-- Performing Test HAVE_C_WSIGN_PROMO
-- Performing Test HAVE_C_WSIGN_PROMO - Failed
-- Performing Test HAVE_CXX_WNO_NARROWING
-- Performing Test HAVE_CXX_WNO_NARROWING - Success
-- Performing Test HAVE_C_WNO_NARROWING
-- Performing Test HAVE_C_WNO_NARROWING - Success
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_CXX_WNO_LONG_LONG
-- Performing Test HAVE_CXX_WNO_LONG_LONG - Success
-- Performing Test HAVE_C_WNO_LONG_LONG
-- Performing Test HAVE_C_WNO_LONG_LONG - Success
-- Performing Test HAVE_CXX_PTHREAD
-- Performing Test HAVE_CXX_PTHREAD - Success
-- Performing Test HAVE_C_PTHREAD
-- Performing Test HAVE_C_PTHREAD - Success
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_CXX_MSSE
-- Performing Test HAVE_CXX_MSSE - Success
-- Performing Test HAVE_C_MSSE
-- Performing Test HAVE_C_MSSE - Success
-- Performing Test HAVE_CXX_MSSE2
-- Performing Test HAVE_CXX_MSSE2 - Success
-- Performing Test HAVE_C_MSSE2
-- Performing Test HAVE_C_MSSE2 - Success
-- Performing Test HAVE_CXX_MSSE3
-- Performing Test HAVE_CXX_MSSE3 - Success
-- Performing Test HAVE_C_MSSE3
-- Performing Test HAVE_C_MSSE3 - Success
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_C_FFUNCTION_SECTIONS
-- Performing Test HAVE_C_FFUNCTION_SECTIONS - Success
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Found ZLIB: /lib64/libz.so (found version ""1.2.8"") 
-- Could NOT find TIFF (missing:  TIFF_LIBRARY TIFF_INCLUDE_DIR) 
-- Looking for assert.h
-- Looking for assert.h - found
-- Looking for fcntl.h
-- Looking for fcntl.h - found
-- Looking for io.h
-- Looking for io.h - not found
-- Looking for jbg_newlen
-- Looking for jbg_newlen - not found
-- Looking for mmap
-- Looking for mmap - found
-- Looking for search.h
-- Looking for search.h - found
-- Looking for string.h
-- Looking for string.h - found
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE - Success
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WNO_UNDEF
-- Performing Test HAVE_C_WNO_UNDEF - Success
-- Performing Test HAVE_C_WNO_UNUSED
-- Performing Test HAVE_C_WNO_UNUSED - Success
-- Performing Test HAVE_C_WNO_SIGN_COMPARE
-- Performing Test HAVE_C_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_C_WNO_CAST_ALIGN
-- Performing Test HAVE_C_WNO_CAST_ALIGN - Success
-- Performing Test HAVE_C_WNO_SHADOW
-- Performing Test HAVE_C_WNO_SHADOW - Success
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Success
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST - Success
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST - Success
-- Performing Test HAVE_C_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_C_WNO_UNUSED_PARAMETER - Success
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
-- Could NOT find JPEG (missing:  JPEG_LIBRARY JPEG_INCLUDE_DIR) 
-- Found JPEG: libjpeg  
-- Could NOT find Jasper (missing:  JASPER_LIBRARIES JASPER_INCLUDE_DIR) 
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION - Success
-- Performing Test HAVE_C_WNO_UNINITIALIZED
-- Performing Test HAVE_C_WNO_UNINITIALIZED - Success
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER - Success
-- Could NOT find PNG (missing:  PNG_LIBRARY PNG_PNG_INCLUDE_DIR) 
-- Looking for semaphore.h
-- Looking for semaphore.h - found
-- Performing Test HAVE_CXX_WNO_SHADOW
-- Performing Test HAVE_CXX_WNO_SHADOW - Success
-- Performing Test HAVE_CXX_WNO_UNUSED
-- Performing Test HAVE_CXX_WNO_UNUSED - Success
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED - Success
-- Performing Test HAVE_CXX_WNO_SWITCH
-- Performing Test HAVE_CXX_WNO_SWITCH - Success
-- Performing Test HAVE_CXX_WNO_PARENTHESES
-- Performing Test HAVE_CXX_WNO_PARENTHESES - Success
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS - Success
-- Performing Test HAVE_CXX_WNO_EXTRA
-- Performing Test HAVE_CXX_WNO_EXTRA - Success
-- checking for module 'gtk+-2.0'
--   package 'gtk+-2.0' not found
-- checking for module 'gthread-2.0'
--   package 'gthread-2.0' not found
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libv4l1'
--   package 'libv4l1' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Found PythonInterp: /bin/python2 (found suitable version ""2.7.5"", minimum required is ""2.0"") 
-- Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (Required is exact version ""2.7.5"")
-- Found apache ant 1.9.2: /bin/ant
-- Could NOT find JNI (missing:  JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY) 
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
-- 
-- General configuration for OpenCV 2.4.8 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.13.8-200.fc20.x86_64 x86_64
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /bin/gmake
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /bin/c++  (ver 4.8.2)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda java python
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    NO
--     GThread :                    NO
--     GtkGlExt:                    NO
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        /lib64/libz.so (ver 1.2.8)
--     JPEG:                        libjpeg (ver 62)
--     PNG:                         build (ver 1.5.12)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/YES
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/lukasz/OpenCV/opencv-2.4.8/3rdparty/include/opencl/1.2
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
-- 
--   Python:
--     Interpreter:                 /bin/python2 (ver 2.7.5)
-- 
--   Java:
--     ant:                         /bin/ant (ver 1.9.2)
--     JNI:                         /usr/lib/jvm/java/include /usr/lib/jvm/java/include/linux /usr/lib/jvm/java/include
--     Java tests:                  NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /bin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/lukasz/OpenCV/opencv-2.4.8/release
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/lukasz/OpenCV/opencv-2.4.8/release
</code></pre>
",,2014-04-11 15:02:32,OpenCV 2.8.4 installation under Linux for Java development,<java><linux><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
23348,25577803,2014-08-30 00:16:49,,"<p>I'm trying to use open cv (2.4.9) video support from within C++. However, when I try to open a video file with <code>cv::VideoCapture</code> I get</p>

<pre><code>warning: Error opening file (/tmp/opencv-mLsrDm/opencv-2.4.9/modules/highgui/src/cap_ffmpeg_impl.hpp:545)
WARNING: Couldn't read movie file 11:28:39.mp4
</code></pre>

<p>Using <code>cv2.VideoCapture</code> from within python on the same file works. The python wrappers are from the same build of opencv so I'm a bit perplexed.</p>

<p>Mac os 10.9.4. OpenCV is built with ffmpeg (but no quicktime) via homebrew.</p>

<p>I'm linking against all the libraries that the the python cv2.so is linked against. </p>

<p>Any ideas? Thanks.</p>
",2014-08-30 00:58:36,2014-09-02 23:09:07,Unable to open video from C++ in opencv. It works from python,<python><c++><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
23352,19578954,2013-10-25 00:12:29,,"<p>I downloaded <a href=""http://opencv.org/downloads.html"" rel=""nofollow"">opencv 2.4.6</a> for mac OSX (Mavericks). Untared  the tar file and made the following <a href=""http://tilomitra.com/opencv-on-mac-osx/"" rel=""nofollow"">steps</a>:</p>

<pre><code>cd opencv-2.4.6.1/
mkdir build
cd build/
cmake -G ""Unix Makefiles"" ..
make -j8
</code></pre>

<p>But I get an error on the build </p>

<pre><code>/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/core/perf/perf_main.cpp:3:1: error: 
      multiple unsequenced modifications to 'argc' [-Werror,-Wunsequenced]
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/imgproc/perf/perf_main.cpp:3:1: error: 
      multiple unsequenced modifications to 'argc' [-Werror,-Wunsequenced]
CV_PERF_TEST_MAIN(core)
^~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:501:5: note: 
      expanded from macro 'CV_PERF_TEST_MAIN'
    CV_PERF_TEST_MAIN_INTERNALS(modulename, plain_only, __VA_ARGS__)\
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:480:12: note: 
      expanded from macro 'CV_PERF_TEST_MAIN_INTERNALS'
    while (++argc &gt;= (--argc,-1)) {__VA_ARGS__; break;} /*this ugly construct...
           ^          ~~
CV_PERF_TEST_MAIN(imgproc)
^~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:501:5: note: 
      expanded from macro 'CV_PERF_TEST_MAIN'
    CV_PERF_TEST_MAIN_INTERNALS(modulename, plain_only, __VA_ARGS__)\
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:480:12: note: 
      expanded from macro 'CV_PERF_TEST_MAIN_INTERNALS'
    while (++argc &gt;= (--argc,-1)) {__VA_ARGS__; break;} /*this ugly construct...
           ^          ~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/highgui/perf/perf_main.cpp:3:1: error: 
      multiple unsequenced modifications to 'argc' [-Werror,-Wunsequenced]
CV_PERF_TEST_MAIN(highgui)
^~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:501:5: note: 
      expanded from macro 'CV_PERF_TEST_MAIN'
    CV_PERF_TEST_MAIN_INTERNALS(modulename, plain_only, __VA_ARGS__)\
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:480:12: note: 
      expanded from macro 'CV_PERF_TEST_MAIN_INTERNALS'
    while (++argc &gt;= (--argc,-1)) {__VA_ARGS__; break;} /*this ugly construct...
           ^          ~~
1 error generated.
1 error generated.
make[2]: *** [modules/core/CMakeFiles/opencv_perf_core.dir/perf/perf_main.cpp.o] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_perf_core.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
make[2]: *** [modules/highgui/CMakeFiles/opencv_perf_highgui.dir/perf/perf_main.cpp.o] Error 1
make[2]: *** Waiting for unfinished jobs....
1 error generated.
make[2]: *** [modules/imgproc/CMakeFiles/opencv_perf_imgproc.dir/perf/perf_main.cpp.o] Error 1
make[1]: *** [modules/imgproc/CMakeFiles/opencv_perf_imgproc.dir/all] Error 2
[ 50%] [ 50%] [ 50%] Building CXX object modules/highgui/CMakeFiles/opencv_perf_highgui.dir/perf/perf_precomp.cpp.o
Building CXX object modules/features2d/CMakeFiles/opencv_perf_features2d.dir/perf/perf_fast.cpp.o
Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_descriptors_regression.cpp.o
[ 50%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_detectors_regression.cpp.o
[ 50%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_ffmpeg.cpp.o
[ 50%] Building CXX object modules/calib3d/CMakeFiles/opencv_perf_calib3d.dir/perf/perf_main.cpp.o
[ 50%] Building CXX object modules/features2d/CMakeFiles/opencv_perf_features2d.dir/perf/perf_main.cpp.o
make[1]: *** [modules/highgui/CMakeFiles/opencv_perf_highgui.dir/all] Error 2
[ 50%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_fast.cpp.o
[ 50%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_fourcc.cpp.o
[ 50%] Building CXX object modules/features2d/CMakeFiles/opencv_perf_features2d.dir/perf/perf_orb.cpp.o
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/calib3d/perf/perf_main.cpp:3:1: error: 
      multiple unsequenced modifications to 'argc' [-Werror,-Wunsequenced]
CV_PERF_TEST_MAIN(calib3d)
^~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:501:5: note: 
      expanded from macro 'CV_PERF_TEST_MAIN'
    CV_PERF_TEST_MAIN_INTERNALS(modulename, plain_only, __VA_ARGS__)\
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:480:12: note: 
      expanded from macro 'CV_PERF_TEST_MAIN_INTERNALS'
    while (++argc &gt;= (--argc,-1)) {__VA_ARGS__; break;} /*this ugly construct...
           ^          ~~
[ 50%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_keypoints.cpp.o
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/features2d/perf/perf_main.cpp:3:1: error: 
      multiple unsequenced modifications to 'argc' [-Werror,-Wunsequenced]
CV_PERF_TEST_MAIN(features2d)
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:501:5: note: 
      expanded from macro 'CV_PERF_TEST_MAIN'
    CV_PERF_TEST_MAIN_INTERNALS(modulename, plain_only, __VA_ARGS__)\
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/bobo/dir/opencv/opencv-2.4.6.1/modules/ts/include/opencv2/ts/ts_perf.hpp:480:12: note: 
      expanded from macro 'CV_PERF_TEST_MAIN_INTERNALS'
    while (++argc &gt;= (--argc,-1)) {__VA_ARGS__; break;} /*this ugly construct...
           ^          ~~
1 error generated.
make[2]: *** [modules/calib3d/CMakeFiles/opencv_perf_calib3d.dir/perf/perf_main.cpp.o] Error 1
make[1]: *** [modules/calib3d/CMakeFiles/opencv_perf_calib3d.dir/all] Error 2
[ 50%] Building CXX object modules/features2d/CMakeFiles/opencv_perf_features2d.dir/perf/perf_precomp.cpp.o
1 error generated.
make[2]: *** [modules/features2d/CMakeFiles/opencv_perf_features2d.dir/perf/perf_main.cpp.o] Error 1
make[2]: *** Waiting for unfinished jobs....
[ 51%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_framecount.cpp.o
[ 51%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_main.cpp.o
[ 51%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_grfmt.cpp.o
[ 51%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_gui.cpp.o
[ 51%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_matchers_algorithmic.cpp.o
[ 51%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_main.cpp.o
[ 51%] [ 52%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_positioning.cpp.o
Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_mser.cpp.o
[ 52%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_precomp.cpp.o
[ 52%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_video_io.cpp.o
make[1]: *** [modules/features2d/CMakeFiles/opencv_perf_features2d.dir/all] Error 2
[ 52%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_nearestneighbors.cpp.o
[ 52%] Building CXX object modules/highgui/CMakeFiles/opencv_test_highgui.dir/test/test_video_pos.cpp.o
[ 52%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_orb.cpp.o
[ 52%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_precomp.cpp.o
[ 52%] Building CXX object modules/features2d/CMakeFiles/opencv_test_features2d.dir/test/test_rotation_and_scale_invariance.cpp.o
Linking CXX executable ../../bin/opencv_test_highgui
[ 52%] Built target opencv_test_highgui
Linking CXX executable ../../bin/opencv_test_features2d
[ 52%] Built target opencv_test_features2d
make: *** [all] Error 2
</code></pre>
",2013-10-25 00:19:49,2017-02-13 02:59:39,building opencv 2.4.6 on Mac - Mavericks,<c++><macos><bash><opencv><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
23476,26706841,2014-11-03 02:14:07,,"<p>Here's the deal, I'm trying to interface my S3 as webcam, using IP WebCam app for android, then making a IP webcam within the software, usually the address is <a href=""http://192.168.1.XX:8080/greet.html"" rel=""nofollow"">http://192.168.1.XX:8080/greet.html</a> maybe the last two digits changes , the webpage give me options and info like this:</p>

<pre><code>""Here is the list of IP Webcam service URLs:  
http://192.168.1.XX:8080/video is the MJPEG URL.""
</code></pre>

<p>The code I'm using is simply like this:</p>

<pre><code>include ""opencv2/highgui/highgui.hpp
include ""opencv2/imgproc/imgproc.hpp
using namespace cv;
int main(){
    VideoCapture cap(""http://192.168.1.XX:8080/video.mjpg""); // connect to an ip-cam ( might need some additional dummy param like: '?type=mjpeg' at the end
    while(cap.isOpened()){
        Mat frame;
        if (!cap.read(frame))
            break;
        imshow(""lalala"",frame);
        int k = waitKey(10);
        if ( k==27 )
            break;
    }
    return 0;
}
</code></pre>

<p>So the IP WebCam app recognice a connection but there's no image whatsoever... and then it says:</p>

<pre class=""lang-none prettyprint-override""><code>warning: Error opening file &lt;../../modules/highgui/src/cap_ffmpeg_imp
Cannot open the web cam

Process returned -1 &lt;0xFFFFFFF&gt; execution time: 37.259 s
Press any key to continue.
</code></pre>

<p>I am using:<br>
Windows 7 Professional<br>
Open CV 2.4.4<br>
Codeblocks 13.12<br>
USB 2.0 webcam 640x480 at 30fps, 50 Hz and all standard.</p>
",2014-11-03 06:44:29,2014-11-24 13:51:37,"Camera connected, but nothing happened, openCV-IP Webcam Android",<c++><opencv><ip><ip-camera><webcam-capture>,,,CC BY-SA 3.0,True,True,False,False,True
23481,24190234,2014-06-12 17:15:02,,"<p>I have the following problem: 
I have an Android application which uses native OpenCV code. In a first step, the frames which were edited by OpenCV came from the camera. Then they were processed and drawn on the display. </p>

<p>However, my requirements now have changed. The frames which have to be edited come from a video file stored on the SD card. They must be processed by the openCV code and then stored in a new video file.</p>

<p>After reading some a lot of stuff, I recognized that Android has no built-in stuff for correctly reading a video file frame by frame and allowing to process the frames while doing so. On a computer OpenCV has the VideoCapture function. But this does not work on Android as openCV has no ffmpeg that comes with it. </p>

<p>After reading more stuff, I found that JavaCV comes with an FFMPEGFrameGrabber and also an FFMPEGFrameRecorder. So, I implemented everything which now allows me to grab single frames from a video, obtain an IplImage frame and store this frame in a new video. </p>

<p>Now the problem:
During obtaining and storing the IplImage frame must be processed using the original OpenCV code as it is not feasible to port the complete code to JavaCV. </p>

<p>So in a first place I wrote a small test JNI function which gets the address of a MAT object and draws a small circle on it.</p>

<pre><code>extern ""C"" {
JNIEXPORT void JNICALL Java_de_vion_postprocessing_step2_EyeTracking_editFrame(
    JNIEnv*, jobject, jlong thiz, jlong addrRgba) {
//Convert the mat addresses into the objects
Mat&amp; rgbFrame = *(Mat*) addrRgba;

Point2i scaledSmoothPoint(100,100);
circle(rgbFrame, scaledSmoothPoint, 20, YELLOW, -1);
}
</code></pre>

<p>As I read that IplImage extends CvArr I just call the function within in my code as follows:</p>

<pre><code>captured_frame = grabber.grab();
if (captured_frame == null) {
    // no new frames
    break;
}
editFrame(captured_frame .address());
</code></pre>

<p>However, I now get the following error:</p>

<pre><code>06-12 18:58:23.135: E/cv::error()(6498): OpenCV Error: Assertion failed (cn &lt;= 4) in
                    void cv::scalarToRawData(const Scalar&amp;, void*, int, int), file 
                    /home/reports/ci/slave_desktop/50-SDK/opencv/modules/core/src/matrix.cpp, line 845
06-12 18:58:23.135: A/libc(6498): Fatal signal 6 (SIGABRT) at 0x00001962 (code=-6),
                    thread 6526 (AsyncTask #1)
</code></pre>

<p>Finally, me question:
How can I process the IplImage frame using nativeOpenCV and finally store this IplImage  frame then in the video recorder. </p>

<p>I am also open to new Ideas which do not necessarily require JavaCV as long as I do not have to write the FrameGrabber and FrameRecorder my self. </p>

<p>Best regards,
André</p>
",,2014-06-13 18:43:40,Combining JavaCV and openCV,<android><c++><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,True,False,False,True
23504,25272343,2014-08-12 19:18:41,,"<p>I am trying to work with JavaCV's FFmpegFrameGrabber on Android 4.4.2 / 4.3.1 .</p>

<p>Inside the onCreate(...) method I am calling:</p>

<p><code>FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(path)</code></p>

<p>This causes the following runtime error:</p>

<pre><code>dlopen(""/data/app-lib/com.example.testjavacv-1/libjniavdevice.so"")
failed: dlopen failed: cannot locate symbol ""av_input_audio_device_next""
referenced by ""libjniavdevice.so""
</code></pre>

<p>Other (possible) relevant information:</p>

<p>1) I have included  all the JavaCV .so libraries inside the libs/armeabi and libs/x86     folders.</p>

<p>2) I have given the application permissions to read/write to external storage and access the camera and microphone.</p>

<p>3) I am <strong>NOT</strong> statically loading any of the JavaCV native libraries before instantiating FFmpegFrameGrabber. This is because,</p>

<ul>
<li>Some of the libraries cause runtime exceptions when I attempt to load them    statically by myself.</li>
<li>I get the impression that JavaCV handles it's own native library loading - for example the error I get ocurrs even though I have not requested to load the <code>jniavdevice.so</code> library and happens only if the <code>... new FFmpegFrameGrabber(...) ...</code> code is present.</li>
</ul>

<p>4) I have taken a look at: <a href=""https://groups.google.com/forum/#!topic/javacv/bgB5rCv_fVM"" rel=""nofollow"">https://groups.google.com/forum/#!topic/javacv/bgB5rCv_fVM</a> which seems to address a similar issue, but the suggested solutions don't seem to work.</p>

<p>Any help on this issue would be much appreciated,
Cheers!</p>
",2014-08-12 19:44:54,2014-09-08 06:29:05,"JavaCV on Android: UnsatisfiedLinkError from libjniavdevice.so / dlopen failed cannot locate symbol ""av_input_audio_device_next""",<android><ffmpeg><java-native-interface><native><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
23512,23034326,2014-04-12 18:21:35,,"<p>I have been trying to install opencv for a long time in my fedora 20 32 bit system.I followed the instructions from <a href=""http://docs.opencv.org/trunk/doc/py_tutorials/py_setup/py_setup_in_fedora/py_setup_in_fedora.html#install-opencv-python-in-fedora"" rel=""nofollow"">http://docs.opencv.org/trunk/doc/py_tutorials/py_setup/py_setup_in_fedora/py_setup_in_fedora.html#install-opencv-python-in-fedora</a> 
But after all cmake commands when I m trying to make it I am getting an error again and again.</p>

<pre><code>    scanning dependencies of target opencv_createsamples
     [100%] Building CXX object    apps/haartraining/CMakeFiles/opencv_createsamples.dir/createsamples.cpp.o
    Linking CXX executable ../../bin/opencv_createsamples
   /lib/libavcodec.so.55: undefined reference to `vpx_codec_vp9_dx_algo'
    /lib/libavcodec.so.55: undefined reference to `vpx_codec_vp9_cx_algo'
    collect2: error: ld returned 1 exit status
    make[2]: *** [bin/opencv_createsamples] Error 1
   make[1]: *** [apps/haartraining/CMakeFiles/opencv_createsamples.dir/all] Error 2
    make: *** [all] Error 2
</code></pre>

<p>I have followed so many articles about the ffmpeg versions and updating stuff but did understand a little. but when I tried </p>

<pre><code>$ sudo yum update ffmpeg
</code></pre>

<p>I got the error as </p>

<pre><code>&gt;Package(s) ffmpeg available, but not installed.
No packages marked for update
</code></pre>

<p>What should I do?</p>
",2014-04-13 15:20:06,2016-04-22 13:16:41,opencv installation ffmpeg error,<python><linux><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
23605,24199291,2014-06-13 06:48:22,,"<p>My goal is as follows:
I have to read in a video that is stored on the sd card, process it frame for frame and then store it in a new file on the SD card again. The problem is that <em>OpenCV4Android</em> does not come with an video encoder/decoder as it does not include <em>ffmpeg</em>. Moreover, using <em>JavaCV</em> for processing the image is no option for me, as the code is already written in native <em>OpenCV</em> and I access them through the JNI. I did a lot of reading here on stackoverflow and the rest of Google. But I did not find the solution. </p>

<ol>
<li><p>JavaCV allows me to read a video frame by frame and also store it frame by frame. However, I am not able to convert the video to plain OpenCV Mat objects which can be processed by usual OpenCV4Android. </p></li>
<li><p>I read about JCodec as a library for encoding/decoding videos. Would JCodec allow me to fulfill my task? If yes, do you know any examples. </p></li>
<li><p>Compiling FFMPEG for Android would also be an option. However, I think it is a bit overkill to write FrameGrabber and FrameRecorder my self. I think that there must exist some solution besides the one of JavaCV. </p></li>
<li><p>Starting with API 18 there are the MediaCodec and the MediaMuxer in Android. Perhaps they can help me?</p></li>
</ol>

<p>So lets come to my requirements. I'm currently targeting Android API 19, so I have every function available which I need. The most important requirement for me is the following:</p>

<p>If I process a video of 10 seconds with 30 FPS, the result should also be a video of 10 seconds with 30 FPS. So I want an exact copy of the video but with some drawing added to each frame by <em>OpenCV</em>. Using <em>OpenCV</em> via Python for example can do this task by using the <em>VideoWriter</em> class and <em>VideoInput</em> class. I need the same functionality on Android. </p>

<p>I am wondering that no one had this problem so far (or I did not find it).</p>

<p>Hopefully, I explained everything.</p>
",2015-05-21 04:08:02,2016-08-21 17:22:28,Process video frame by frame in OpenCV on Android,<android><opencv><video>,,,CC BY-SA 3.0,True,True,False,False,True
23673,19605750,2013-10-26 10:45:30,,"<p>I have too many(100s of) Hi-resolution(1200x800) JPEGS  on the SD Card created.</p>

<p>What I am doing right now is Load them all in Thread and Keep them in ArrayList .</p>

<p>I Play Them on Image View Frame By Frame at specific Frame Rate selected by user on UI.
My Intention here for loading all the images because I want to play them very fast around 55 fps.
Thats works fine if I have 1 Set of 100 image and Tablet with RAM = 1 GB but I have Two Image Viewer both with their own Set of (100 JPEGS) it goes out of memory.</p>

<p>I Tried many ways for my solutions .
Here is what I have tried so far.</p>

<p>1 ) FFMPEG video encoding of JPEGS on SDCard ( it will not work as User will be seeking to any position of 100 image and it should be view on screen immediately also I am applying filters like brightness contrast on image so FFMPEG will not work in that)</p>

<p>2) Loading Single file as Bitmap as They are played ( its not working as I want to achieve High Frame Rate and Files Take Time to load )</p>

<p>3) Third Approach which I am using right now works good for me right now but ( Out of Memory Problem  as I Have Two Image View with their image set (each one 100 images))
which is loading all Images in ArrayList and user Can Seek to any Image with Seekbar fast as possible and Can Apply various filter on bitmap.</p>

<p>I expect some expert solution for loading fast images on specific frame rate.</p>
",,2013-10-26 12:46:47,Loading too many JPEG Files(100 s of ) cause out of memory error,<java><android><image><image-processing>,,,CC BY-SA 3.0,False,False,False,False,True
23758,24208288,2014-06-13 14:53:53,,"<p>I have a compressed movie (mp4) and I want to extract every single frame / image from it. I know that each individual frame of the video only contains the changed pixels regarding to the last keyframe, because of the video compression. But that is exactly what I want. I just want to see those differences. I want to visualy see how the compressor works.</p>

<p>Is there some tool like imagemagick out there what can things like that?</p>
",2015-03-24 12:18:29,2015-03-24 12:18:29,Export frames/images from compressed video,<image-processing><video><ffmpeg><video-processing><codec>,,,CC BY-SA 3.0,False,False,False,False,True
23823,19619087,2013-10-27 14:21:33,,"<p>I'm trying to decide which library to choose in order to create app that can
filters a video, for example beautify or clarity.</p>

<p>During my search I came across 2 candidates: OpenCv and FFmpeg, and I found a complete framework only for FFmpeg(so +1 for this).</p>

<p>I couldn't found a complete comparision between the two so if someone has tried them and can post the answer it would be really helpful.</p>

<p>Edit:</p>

<p>Another candidate is Marvin framework(Java project) for Android - <a href=""https://code.google.com/p/android-image-filtering/"" rel=""noreferrer"">https://code.google.com/p/android-image-filtering/</a></p>
",2014-05-08 18:07:13,2014-12-17 09:29:33,Video processing and filtering libraries,<android><opencv><ffmpeg><video-processing><marvin-framework>,,,CC BY-SA 3.0,True,False,False,False,True
23949,23071279,2014-04-14 22:05:26,,"<p>I have been unable to open a video using the VideoCapture class in the python cv2 module.  I have a video called handShake_0001.avi in the directory in which I am running my python script.  Below is my code:</p>

<pre><code>import numpy as np
import cv2

cap = cv2.VideoCapture('handShake_0001.avi')
while(cap.isOpened()):
    ret, frame = cap.read()

    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

    cv2.imshow('frame',gray)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break
cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>I've been looking for the python source for cv2, but all I can find in /usr/local/lib/python2.7/dist-packages is a .so file for cv2 (cv2.so).  I've noticed in the documentation that VideoCapture can take either an integer (corresponding to the index for a camera) or a filename as inputs to its constructor.  When I pass in an integer to VideoCapture, I can view images using my laptop's computer (although I cannot get videos of these images to save to disk).  Any help would be appreciated.</p>

<p>Edit:
Below is my build information regarding Video I/O (the result of cv2.getBuildInformation():</p>

<pre><code>Video I/O:
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      NO
    codec:                     NO
    format:                    NO
    util:                      NO
    swscale:                   NO
    gentoo-style:              NO
    GStreamer:                   NO
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    UniCap:                      NO
    UniCap ucil:                 NO
    V4L/V4L2:                    NO/YES
    XIMEA:                       NO
    Xine:                        NO
</code></pre>
",2014-04-14 23:01:37,2014-04-14 23:01:37,Pre-recorded video will not open using the VideoCapture class in cv2,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
23951,20777618,2013-12-25 23:27:55,,"<p>Windows 7, VSC2010</p>

<p>Opencv 2.4.7 Builds fine, mostly works with my application but fontQt and other related Qt text functions cause exceptions (see example below).</p>

<p>Seems like the file(s) that have the necessary code are (at least) window_QT.cpp in sources/modules/highgui/src, but based on where I can set breakpoint but those files don't show up in opencv_highgui project.  </p>

<blockquote>
  <p>OpenCV Error: The function/feature is not implemented (The library is
  compiled without QT support) in cv::fontQt, file
  ........\opencv\modules\highgui\src\window.cpp, line 409</p>
</blockquote>

<p>The HAVE_QT checkbox was/is checked in the cmake gui (CMAKE 2.8.12.1).  All libraries were found ok (no red left on the GUI)</p>

<p>In build/cvconfig.h I see:</p>

<pre><code>/* Qt support */
 #define HAVE_QT5
</code></pre>

<p>I found this link:<a href=""http://code.opencv.org/projects/opencv/repository/revisions/f856f78ac078e5c4ba67d5856281f3d60b8a4779"" rel=""nofollow"">enter link description here</a></p>

<p>But that looks like it should already be in 2.4.7 based on the later posts to the thread.</p>

<p>I don't really understand how to debug cmake stuff--it seems like maybe the source code is looking for HAVE_QT being defined while maybe only HAVE_QT5 is defined?</p>

<p>Or maybe, (fumbling around where I don't really grog), I see this fragment in highgui\CMakeLists.txt:</p>

<pre><code>set(highgui_srcs
    src/cap.cpp
    src/cap_images.cpp
    src/cap_ffmpeg.cpp
    src/loadsave.cpp
    src/utils.cpp
    src/window.cpp
    )

file(GLOB highgui_ext_hdrs ""include/opencv2/${name}/*.hpp"" ""include/opencv2/${name}/*.h"")

if(HAVE_QT5)
  set(CMAKE_AUTOMOC ON)
  set(CMAKE_INCLUDE_CURRENT_DIR ON)

  QT5_ADD_RESOURCES(_RCC_OUTFILES src/window_QT.qrc)
  list(APPEND highgui_srcs src/window_QT.cpp src/window_QT.h ${_RCC_OUTFILES})

  foreach(dt5_dep Core Gui Widgets Test Concurrent)
    add_definitions(${Qt5${dt5_dep}_DEFINITIONS})
    include_directories(${Qt5${dt5_dep}_INCLUDE_DIRS})
    list(APPEND HIGHGUI_LIBRARIES ${Qt5${dt5_dep}_LIBRARIES})
  endforeach()
</code></pre>

<p>Should highgui_srcs include window_QT.cpp?</p>

<p>And help or advice would be greatly appreciated!</p>

<p>Thanks</p>

<p>Dave Thomas</p>
",,2013-12-26 04:13:00,OpenCv 2.4.7 with QT5,<c++><opencv><qt5>,,,CC BY-SA 3.0,True,False,False,False,True
24060,26755554,2014-11-05 11:00:39,,"<p>I am trying to apply Grayscale effect to a video file using <strong>JavaCV</strong> in android.Everything is working fine but there is no audio present in the output file. Below is the code. Please Help </p>

<pre><code>   File file = new File(Environment.getExternalStorageDirectory() + File.separator + ""test3.mp4""); 

     FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber(file.getAbsolutePath()); 

     FrameRecorder recorder = null; 

     Log.d(""bharat"", "" Audio channels = "" + frameGrabber.getAudioChannels()); // THIS IS RETurnING 0 and not 2

     recorder = new FFmpegFrameRecorder(""/mnt/sdcard/streaml_t.mp4"", 270, 480, frameGrabber.getAudioChannels()); 

     recorder.setVideoCodec(AV_CODEC_ID_H264); 

     recorder.setFormat(""mp4""); 

     recorder.setFrameRate(frameGrabber.getFrameRate()); 

     recorder.setSampleFormat(frameGrabber.getSampleFormat()); 

     recorder.setSampleRate(frameGrabber.getSampleRate()); 

     try { 
     recorder.start();
     frameGrabber.start(); 
     int count = 0;      
     while (true) { 

     try { 

     Frame grabFrame = frameGrabber.grabFrame(); 
     Log.d(""bharat:"", ""frame "" + count++); 

     if (grabFrame == null) { 
     System.out.println(""!!! Failed cvQueryFrame""); 
     break; 

     } 

     IplImage frame_copy = cvCreateImage(cvSize(grabFrame.image.width(), grabFrame.image.height()), IPL_DEPTH_8U, 1); 

     cvCvtColor(grabFrame.image, frame_copy, CV_RGB2GRAY); 
     grabFrame.image = frame_copy; 
     recorder.setTimestamp(frameGrabber.getTimestamp());
     recorder.record(grabFrame); 
     } catch (Exception e) { 
        e.printStackTrace();
     } 

     } 

     Log.d(""bharat:"", ""frame done""); 

     recorder.stop(); 
     recorder.release(); 

     } catch (Exception e) { 

     e.printStackTrace(); 

     } 

     }
</code></pre>

<p>P. S :  I found that frameGrabber.getAudioChannels() is returning 0 and not 2 (in case it helps)</p>
",,2014-11-05 20:24:31,"No sound is captured in video created using FFmpegFrameGrabber, FrameRecorder JavaCv in android",<android><opencv><ffmpeg><video-processing><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
24078,25637362,2014-09-03 06:08:58,,"<p>I am getting broken ffmpeg error while VideoWrite using X264 Fourcc codec.I have install all the dependencies.How can I rectify this problem.The sample code that I have been using is as follows.</p>

<pre><code>VideoWriter oVideoWriter (""path.mp4"", CV_FOURCC('X','2','6','4'), 15, frameSize, false);
</code></pre>

<p>Operating system : Ubuntu 14.04 64-bit</p>

<p>Console Error:</p>

<pre><code>[libx264 @ 0x8d6220] broken ffmpeg default settings detected
[libx264 @ 0x8d6220] use an encoding preset (e.g. -vpre medium)
[libx264 @ 0x8d6220] preset usage: -vpre &lt;speed&gt; -vpre &lt;profile&gt;
[libx264 @ 0x8d6220] speed presets are listed in x264 --help
[libx264 @ 0x8d6220] profile is optional; x264 defaults to high
Could not open codec 'libx264': Unspecified errorOpenCV Error: Unsupported format or combination of formats (Your version of Gstreamer doesn't support this codec acutally or needed plugin missing.) in CvVideoWriter_GStreamer::open, file /home/mbox140/Development/opencv-2.4.9/modules/highgui/src/cap_gstreamer.cpp, line 518
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/mbox140/Development/opencv-2.4.9/modules/highgui/src/cap_gstreamer.cpp:518: error: (-210) Your version of Gstreamer doesn't support this codec acutally or needed plugin missing. in function CvVideoWriter_GStreamer::open
</code></pre>

<p>Suggest me any solution for this.</p>
",2014-09-04 06:25:09,2018-04-13 19:42:54,broken ffmpeg default settings detected,<opencv><ffmpeg><video-capture><h.264><libx264>,,,CC BY-SA 3.0,True,False,False,False,True
24100,21968038,2014-02-23 12:12:19,,"<p>We tried to convert the c++ Code from <a href=""https://stackoverflow.com/questions/4785419/detection-of-coins-and-fit-ellipses-on-an-image"">Detection of coins (and fit ellipses) on an image</a> into Java. After solving the first problem in the thread <a href=""https://stackoverflow.com/questions/21962234/problems-with-opencv-ellipse-detection-in-java/21962374?noredirect=1#comment33277673_21962374"">Problems with OpenCV ellipse detection in Java</a>, starting the program with the parameters</p>

<pre><code>2 PathToThePicture
</code></pre>

<p>leads to following fatal error</p>

<pre><code>#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000005addc330, pid=1700, tid=1472
#
# JRE version: Java(TM) SE Runtime Environment (7.0_45-b18) (build 1.7.0_45-b18)
# Java VM: Java HotSpot(TM) 64-Bit Server VM (24.45-b08 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [msvcr100.dll+0x3c330]
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# An error report file with more information is saved as:
# PathToTheProject\hs_err_pid1700.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#
</code></pre>

<p>Error report:</p>

<pre><code>#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x670d26df, pid=2832, tid=5672
#
# JRE version: Java(TM) SE Runtime Environment (7.0_51-b13) (build 1.7.0_51-b13)
# Java VM: Java HotSpot(TM) Client VM (24.51-b03 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [msvcr100.dll+0x26df]
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x004eb800):  JavaThread ""main"" [_thread_in_native, id=5672, stack(0x00570000,0x005c0000)]

siginfo: ExceptionCode=0xc0000005, writing address 0x00000000

Registers:
EAX=0x00000000, EBX=0x005bfb7c, ECX=0x00000016, EDX=0x00000000
ESP=0x005bfaf4, EBP=0x005bfb18, ESI=0x004eb930, EDI=0x00000000
EIP=0x670d26df, EFLAGS=0x00010202

Top of Stack: (sp=0x005bfaf4)
0x005bfaf4:   00000000 670c1eb2 00000000 00000000
0x005bfb04:   00000058 004eb800 34a45f90 34a45f90
0x005bfb14:   004eb930 005bfb60 0226a9dd 004eb930
0x005bfb24:   005bfb68 005bfb7c 00000000 00000058
0x005bfb34:   00000000 004ec15c 004ec15c 005bfb40
0x005bfb44:   34a45f90 005bfb7c 34aaf550 00000000
0x005bfb54:   34a45f90 00000000 005bfb70 005bfba0
0x005bfb64:   0226339a 24ef55f8 022688e6 00000058 

Instructions: (pc=0x670d26df)
0x670d26bf:   83 c7 01 83 e9 01 75 f6 8b c8 c1 e0 08 03 c1 8b
0x670d26cf:   c8 c1 e0 10 03 c1 8b ca 83 e2 03 c1 e9 02 74 06
0x670d26df:   f3 ab 85 d2 74 0a 88 07 83 c7 01 83 ea 01 75 f6
0x670d26ef:   8b 44 24 08 5f c3 8b 44 24 04 c3 90 90 90 90 90 


Register to memory mapping:

EAX=0x00000000 is an unknown value
EBX=0x005bfb7c is pointing into the stack for thread: 0x004eb800
ECX=0x00000016 is an unknown value
EDX=0x00000000 is an unknown value
ESP=0x005bfaf4 is pointing into the stack for thread: 0x004eb800
EBP=0x005bfb18 is pointing into the stack for thread: 0x004eb800
ESI=0x004eb930 is an unknown value
EDI=0x00000000 is an unknown value


Stack: [0x00570000,0x005c0000],  sp=0x005bfaf4,  free space=318k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [msvcr100.dll+0x26df]
j  com.googlecode.javacpp.Pointer.memset(Lcom/googlecode/javacpp/Pointer;IJ)Lcom/googlecode/javacpp/Pointer;+0
j  com.googlecode.javacpp.Pointer.fill(I)Lcom/googlecode/javacpp/Pointer;+107
j  com.googlecode.javacpp.Pointer.zero()Lcom/googlecode/javacpp/Pointer;+2
j  com.googlecode.javacv.cpp.opencv_core$CvSeq.&lt;init&gt;()V+9
j  com.googlecode.javacv.cpp.opencv_core$CvContour.&lt;init&gt;()V+1
j  Dieter.main([Ljava/lang/String;)V+67
v  ~StubRoutines::call_stub
V  [jvm.dll+0x13f35a]
V  [jvm.dll+0x202c6e]
V  [jvm.dll+0x13f3dd]
V  [jvm.dll+0xc9945]
V  [jvm.dll+0xd45e7]
C  [javaw.exe+0x2070]
C  [javaw.exe+0xa5b1]
C  [javaw.exe+0xa63b]
C  [KERNEL32.DLL+0x1495d]
C  [ntdll.dll+0x498ee]
C  [ntdll.dll+0x498c4]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.googlecode.javacpp.Pointer.memset(Lcom/googlecode/javacpp/Pointer;IJ)Lcom/googlecode/javacpp/Pointer;+0
j  com.googlecode.javacpp.Pointer.fill(I)Lcom/googlecode/javacpp/Pointer;+107
j  com.googlecode.javacpp.Pointer.zero()Lcom/googlecode/javacpp/Pointer;+2
j  com.googlecode.javacv.cpp.opencv_core$CvSeq.&lt;init&gt;()V+9
j  com.googlecode.javacv.cpp.opencv_core$CvContour.&lt;init&gt;()V+1
j  Dieter.main([Ljava/lang/String;)V+67
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( =&gt; current thread )
  0x00826800 JavaThread ""Service Thread"" daemon [_thread_blocked, id=7436, stack(0x044e0000,0x04530000)]
  0x00820c00 JavaThread ""C1 CompilerThread0"" daemon [_thread_blocked, id=6644, stack(0x04450000,0x044a0000)]
  0x0081fc00 JavaThread ""Attach Listener"" daemon [_thread_blocked, id=1156, stack(0x043c0000,0x04410000)]
  0x0081c800 JavaThread ""Signal Dispatcher"" daemon [_thread_blocked, id=1820, stack(0x04330000,0x04380000)]
  0x007b0400 JavaThread ""Finalizer"" daemon [_thread_blocked, id=5456, stack(0x042a0000,0x042f0000)]
  0x007ae800 JavaThread ""Reference Handler"" daemon [_thread_blocked, id=2588, stack(0x00de0000,0x00e30000)]
=&gt;0x004eb800 JavaThread ""main"" [_thread_in_native, id=5672, stack(0x00570000,0x005c0000)]

Other Threads:
  0x007ad400 VMThread [stack: 0x00d50000,0x00da0000] [id=3176]
  0x0083e000 WatcherThread [stack: 0x04570000,0x045c0000] [id=4452]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 4928K, used 1323K [0x24a20000, 0x24f70000, 0x29f70000)
  eden space 4416K,  18% used [0x24a20000, 0x24aeafe8, 0x24e70000)
  from space 512K, 100% used [0x24ef0000, 0x24f70000, 0x24f70000)
  to   space 512K,   0% used [0x24e70000, 0x24e70000, 0x24ef0000)
 tenured generation   total 10944K, used 370K [0x29f70000, 0x2aa20000, 0x34a20000)
   the space 10944K,   3% used [0x29f70000, 0x29fccb38, 0x29fccc00, 0x2aa20000)
 compacting perm gen  total 12288K, used 912K [0x34a20000, 0x35620000, 0x38a20000)
   the space 12288K,   7% used [0x34a20000, 0x34b04270, 0x34b04400, 0x35620000)
    ro space 10240K,  41% used [0x38a20000, 0x38e52050, 0x38e52200, 0x39420000)
    rw space 12288K,  52% used [0x39420000, 0x39a66800, 0x39a66800, 0x3a020000)

Card table byte_map: [0x00c40000,0x00cf0000] byte_map_base: 0x00b1af00

Polling page: 0x004c0000

Code Cache  [0x02260000, 0x02320000, 0x04260000)
 total_blobs=266 nmethods=113 adapters=90 free_code_cache=32016Kb largest_free_block=32785344

Compilation events (10 events):
Event: 0.214 Thread 0x00820c00  108             java.util.AbstractList$Itr::hasNext (20 bytes)
Event: 0.214 Thread 0x00820c00 nmethod 108 0x02319d48 code [0x02319e50, 0x02319f0c]
Event: 0.215 Thread 0x00820c00  110             com.googlecode.javacpp.Loader$ClassProperties::addAll (183 bytes)
Event: 0.216 Thread 0x00820c00 nmethod 110 0x0231a248 code [0x0231a490, 0x0231ac68]
Event: 0.216 Thread 0x00820c00  111             java.lang.String::indexOf (25 bytes)
Event: 0.216 Thread 0x00820c00 nmethod 111 0x0231b488 code [0x0231b590, 0x0231b65c]
Event: 0.217 Thread 0x00820c00  112             java.lang.Character::toLowerCase (6 bytes)
Event: 0.217 Thread 0x00820c00 nmethod 112 0x0231b748 code [0x0231b850, 0x0231b8f8]
Event: 0.218 Thread 0x00820c00  113             java.util.Hashtable$Enumerator::hasMoreElements (53 bytes)
Event: 0.218 Thread 0x00820c00 nmethod 113 0x0231b988 code [0x0231ba80, 0x0231bb60]

GC Heap History (2 events):
Event: 0.204 GC heap before
{Heap before GC invocations=0 (full 0):
 def new generation   total 4928K, used 4416K [0x24a20000, 0x24f70000, 0x29f70000)
  eden space 4416K, 100% used [0x24a20000, 0x24e70000, 0x24e70000)
  from space 512K,   0% used [0x24e70000, 0x24e70000, 0x24ef0000)
  to   space 512K,   0% used [0x24ef0000, 0x24ef0000, 0x24f70000)
 tenured generation   total 10944K, used 0K [0x29f70000, 0x2aa20000, 0x34a20000)
   the space 10944K,   0% used [0x29f70000, 0x29f70000, 0x29f70200, 0x2aa20000)
 compacting perm gen  total 12288K, used 887K [0x34a20000, 0x35620000, 0x38a20000)
   the space 12288K,   7% used [0x34a20000, 0x34afdfc8, 0x34afe000, 0x35620000)
    ro space 10240K,  41% used [0x38a20000, 0x38e52050, 0x38e52200, 0x39420000)
    rw space 12288K,  52% used [0x39420000, 0x39a66800, 0x39a66800, 0x3a020000)
Event: 0.206 GC heap after
Heap after GC invocations=1 (full 0):
 def new generation   total 4928K, used 512K [0x24a20000, 0x24f70000, 0x29f70000)
  eden space 4416K,   0% used [0x24a20000, 0x24a20000, 0x24e70000)
  from space 512K, 100% used [0x24ef0000, 0x24f70000, 0x24f70000)
  to   space 512K,   0% used [0x24e70000, 0x24e70000, 0x24ef0000)
 tenured generation   total 10944K, used 370K [0x29f70000, 0x2aa20000, 0x34a20000)
   the space 10944K,   3% used [0x29f70000, 0x29fccb38, 0x29fccc00, 0x2aa20000)
 compacting perm gen  total 12288K, used 887K [0x34a20000, 0x35620000, 0x38a20000)
   the space 12288K,   7% used [0x34a20000, 0x34afdfc8, 0x34afe000, 0x35620000)
    ro space 10240K,  41% used [0x38a20000, 0x38e52050, 0x38e52200, 0x39420000)
    rw space 12288K,  52% used [0x39420000, 0x39a66800, 0x39a66800, 0x3a020000)
}

Deoptimization events (0 events):
No events

Internal exceptions (10 events):
Event: 0.177 Thread 0x004eb800 Threw 0x24e2f6d8 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.177 Thread 0x004eb800 Threw 0x24e33ec8 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.203 Thread 0x004eb800 Threw 0x24e569d8 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.206 Thread 0x004eb800 Threw 0x24a27c80 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.207 Thread 0x004eb800 Threw 0x24a2ad28 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.207 Thread 0x004eb800 Threw 0x24a2dc90 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.207 Thread 0x004eb800 Threw 0x24a314d0 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.208 Thread 0x004eb800 Threw 0x24a5f148 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.216 Thread 0x004eb800 Threw 0x24acf300 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244
Event: 0.217 Thread 0x004eb800 Threw 0x24ad3248 at C:\re\jdk7u51\527\hotspot\src\share\vm\prims\jvm.cpp:1244

Events (10 events):
Event: 0.207 loading class 0x0462fa78
Event: 0.207 loading class 0x0462fa78 done
Event: 0.208 loading class 0x0462fe38
Event: 0.208 loading class 0x0462fe38 done
Event: 0.216 loading class 0x0083ef48
Event: 0.216 loading class 0x0083ef48 done
Event: 0.217 loading class 0x0083f338
Event: 0.217 loading class 0x0083f338 done
Event: 0.218 loading class 0x3a040448
Event: 0.218 loading class 0x3a040448 done


Dynamic libraries:
0x00e30000 - 0x00e5f000     C:\Program Files (x86)\Java\jre7\bin\javaw.exe
0x76ed0000 - 0x77038000     C:\Windows\SYSTEM32\ntdll.dll
0x74b20000 - 0x74c60000     C:\Windows\SYSTEM32\KERNEL32.DLL
0x751e0000 - 0x752af000     C:\Windows\SYSTEM32\KERNELBASE.dll
0x69530000 - 0x695ca000     C:\Windows\system32\apphelp.dll
0x64c10000 - 0x64e62000     C:\Windows\AppPatch\AcGenral.DLL
0x74f90000 - 0x7504e000     C:\Windows\SYSTEM32\msvcrt.dll
0x74ae0000 - 0x74b1e000     C:\Windows\SYSTEM32\sechost.dll
0x74900000 - 0x7491d000     C:\Windows\SYSTEM32\SspiCli.dll
0x76bd0000 - 0x76c11000     C:\Windows\SYSTEM32\SHLWAPI.dll
0x73df0000 - 0x73ecc000     C:\Windows\SYSTEM32\UxTheme.dll
0x74ca0000 - 0x74def000     C:\Windows\SYSTEM32\USER32.dll
0x76a10000 - 0x76b18000     C:\Windows\SYSTEM32\GDI32.dll
0x73a30000 - 0x73a50000     C:\Windows\SYSTEM32\WINMM.dll
0x73c70000 - 0x73c82000     C:\Windows\SYSTEM32\samcli.dll
0x76c70000 - 0x76d7b000     C:\Windows\SYSTEM32\ole32.dll
0x74a40000 - 0x74ac7000     C:\Windows\SYSTEM32\OLEAUT32.dll
0x731a0000 - 0x731b5000     C:\Windows\SYSTEM32\MSACM32.dll
0x74880000 - 0x74888000     C:\Windows\SYSTEM32\VERSION.dll
0x75860000 - 0x76a03000     C:\Windows\SYSTEM32\SHELL32.dll
0x739c0000 - 0x739d9000     C:\Windows\SYSTEM32\USERENV.dll
0x739f0000 - 0x73a09000     C:\Windows\SYSTEM32\dwmapi.dll
0x73210000 - 0x73334000     C:\Windows\SYSTEM32\urlmon.dll
0x75060000 - 0x750d7000     C:\Windows\SYSTEM32\ADVAPI32.dll
0x74820000 - 0x7487e000     C:\Windows\SYSTEM32\WINSPOOL.DRV
0x67500000 - 0x67514000     C:\Windows\SYSTEM32\MPR.dll
0x752b0000 - 0x75361000     C:\Windows\SYSTEM32\RPCRT4.dll
0x748f0000 - 0x748f9000     C:\Windows\SYSTEM32\CRYPTBASE.dll
0x75380000 - 0x754ce000     C:\Windows\SYSTEM32\combase.dll
0x73a10000 - 0x73a30000     C:\Windows\SYSTEM32\WINMMBASE.dll
0x74050000 - 0x7405e000     C:\Windows\SYSTEM32\profapi.dll
0x72e30000 - 0x73047000     C:\Windows\SYSTEM32\iertutil.dll
0x72c60000 - 0x72e24000     C:\Windows\SYSTEM32\WININET.dll
0x74890000 - 0x748e1000     C:\Windows\SYSTEM32\bcryptPrimitives.dll
0x74f40000 - 0x74f7a000     C:\Windows\SYSTEM32\cfgmgr32.dll
0x74800000 - 0x7481f000     C:\Windows\SYSTEM32\DEVOBJ.dll
0x74060000 - 0x740d7000     C:\Windows\SYSTEM32\SHCORE.DLL
0x74920000 - 0x74945000     C:\Windows\system32\IMM32.DLL
0x750e0000 - 0x751d7000     C:\Windows\SYSTEM32\MSCTF.dll
0x74450000 - 0x74635000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.9600.16384_none_a9f4965301334e09\COMCTL32.dll
0x670d0000 - 0x6718f000     C:\Program Files (x86)\Java\jre7\bin\msvcr100.dll
0x64f80000 - 0x65300000     C:\Program Files (x86)\Java\jre7\bin\client\jvm.dll
0x74040000 - 0x74048000     C:\Windows\SYSTEM32\WSOCK32.dll
0x749a0000 - 0x749a6000     C:\Windows\SYSTEM32\PSAPI.DLL
0x76c20000 - 0x76c6d000     C:\Windows\SYSTEM32\WS2_32.dll
0x74f80000 - 0x74f87000     C:\Windows\SYSTEM32\NSI.dll
0x66ba0000 - 0x66bac000     C:\Program Files (x86)\Java\jre7\bin\verify.dll
0x66b80000 - 0x66ba0000     C:\Program Files (x86)\Java\jre7\bin\java.dll
0x66b60000 - 0x66b73000     C:\Program Files (x86)\Java\jre7\bin\zip.dll
0x66910000 - 0x66979000     C:\Windows\System32\msvcp100.dll
0x70fc0000 - 0x71ef6000     C:\opencv\build\x86\vc10\bin\opencv_ffmpeg248.dll
0x64a00000 - 0x64c06000     C:\opencv\build\x86\vc10\bin\opencv_core248.dll
0x64790000 - 0x649fb000     C:\opencv\build\x86\vc10\bin\opencv_imgproc248.dll
0x64580000 - 0x64787000     C:\opencv\build\x86\vc10\bin\opencv_highgui248.dll
0x66d80000 - 0x66d99000     C:\Windows\SYSTEM32\AVIFIL32.dll
0x67490000 - 0x674b2000     C:\Windows\SYSTEM32\MSVFW32.dll
0x66d60000 - 0x66d74000     C:\Windows\SYSTEM32\AVICAP32.dll
0x670c0000 - 0x670cf000     F:\tmp\javacpp367334687899361\jniopencv_highgui.dll
0x66810000 - 0x66885000     F:\tmp\javacpp367334687899361\jniopencv_core.dll
0x72260000 - 0x723a8000     C:\Windows\SYSTEM32\dbghelp.dll

VM Arguments:
jvm_args: -Dfile.encoding=Cp1252 
java_command: DetectEllipse 2 PathToPicture
Launcher Type: SUN_STANDARD

Environment Variables:
PATH=C:/Program Files (x86)/Java/jre7/bin/client;C:/Program Files (x86)/Java/jre7/bin;C:/Program Files (x86)/Java/jre7/lib/i386;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\IVI Foundation\VISA\WinNT\Bin;F:\Programmieren\tools\eclipse 32bit;
USERNAME=Username
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 60 Stepping 3, GenuineIntel



---------------  S Y S T E M  ---------------

OS: Windows 8 , 64 bit Build 9200 

CPU:total 4 (4 cores per cpu, 1 threads per core) family 6 model 60 stepping 3, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, avx, avx2, aes, erms, tsc, tscinvbit

Memory: 4k page, physical 8325332k(5583064k free), swap 13445332k(10026960k free)

vm_info: Java HotSpot(TM) Client VM (24.51-b03) for windows-x86 JRE (1.7.0_51-b13), built on Dec 18 2013 19:09:58 by ""java_re"" with unknown MS VC++:1600

time: Sun Feb 23 01:12:58 2014
elapsed time: 0 seconds
</code></pre>

<p>Here is the converted Java-Code:</p>

<pre><code>import static com.googlecode.javacv.cpp.opencv_core.CV_FILLED;
import static com.googlecode.javacv.cpp.opencv_core.CV_RGB;
import static com.googlecode.javacv.cpp.opencv_core.CV_WHOLE_SEQ;
import static com.googlecode.javacv.cpp.opencv_core.cvCreateImage;
import static com.googlecode.javacv.cpp.opencv_core.cvCreateMemStorage;
import static com.googlecode.javacv.cpp.opencv_core.cvDrawContours;
import static com.googlecode.javacv.cpp.opencv_core.cvGetSize;
import static com.googlecode.javacv.cpp.opencv_core.cvPoint;
import static com.googlecode.javacv.cpp.opencv_core.cvScalar;
import static com.googlecode.javacv.cpp.opencv_core.cvXorS;
import static com.googlecode.javacv.cpp.opencv_core.cvZero;
import static com.googlecode.javacv.cpp.opencv_highgui.cvLoadImage;
import static com.googlecode.javacv.cpp.opencv_highgui.cvSaveImage;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_CHAIN_APPROX_SIMPLE;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_RETR_CCOMP;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_THRESH_BINARY;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvContourArea;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvDilate;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvFindContours;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvThreshold;

import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.cpp.opencv_core.CvContour;
import com.googlecode.javacv.cpp.opencv_core.CvMemStorage;
import com.googlecode.javacv.cpp.opencv_core.CvRect;
import com.googlecode.javacv.cpp.opencv_core.CvScalar;
import com.googlecode.javacv.cpp.opencv_core.CvSeq;
import com.googlecode.javacv.cpp.opencv_core.IplImage;

public class DetectEllipse{

    public static final double M_PI = 3.14159265358979323846;
    public static final double MIN_AREA = 100.00;
    public static final double MAX_TOL = 100.00;

    private static int[] array = { 0 };
    //
    // We need this to be high enough to get rid of things that are too small
    // too
    // have a definite shape. Otherwise, they will end up as ellipse false
    // positives.
    //
    //
    // One way to tell if an object is an ellipse is to look at the relationship
    // of its area to its dimensions. If its actual occupied area can be
    // estimated
    // using the well-known area formula Area = PI*A*B, then it has a good
    // chance of
    // being an ellipse.
    //
    // This value is the maximum permissible error between actual and estimated
    // area.
    //

    public static void main(String[] args) {
          IplImage src = cvLoadImage(args[1], 0);
          if (src == null) {
             System.out.println(""!!! Unable to load image: "" + args[1]);
             return;
          }
        // the first command line parameter must be file name of binary
        // (black-n-white) image
        if (Integer.parseInt(args[0]) == 2) {
            IplImage dst = cvCreateImage(cvGetSize(src), 8, 3);
            CvMemStorage storage = cvCreateMemStorage(0);
            CvSeq contour = new CvContour();
            // maybe: = new CvSeq(0)
            cvThreshold(src, src, 1, 255, CV_THRESH_BINARY);
            //
            // Invert the image such that white is foreground, black is
            // background.
            // Dilate to get rid of noise.
            //
            cvXorS(src, cvScalar(255, 0, 0, 0), src, null);
            cvDilate(src, src, null, 2);

            cvFindContours(src, storage, contour,
                    Loader.sizeof(CvContour.class), CV_RETR_CCOMP,
                    CV_CHAIN_APPROX_SIMPLE, cvPoint(0, 0));
            cvZero(dst);

            for (; contour.flags() != 0; contour = contour.h_next()) {
                // if not working: use contour.isNull()
                double actual_area = Math.abs(cvContourArea(contour,
                        CV_WHOLE_SEQ, 0));
                if (actual_area &lt; MIN_AREA)
                    continue;

                //
                // FIXME:
                // Assuming the axes of the ellipse are vertical/perpendicular.
                //
                CvRect rect = ((CvContour) contour).rect();
                int A = rect.width() / 2;
                int B = rect.height() / 2;
                double estimated_area = Math.PI * A * B;
                double error = Math.abs(actual_area - estimated_area);
                if (error &gt; MAX_TOL)
                    continue;
                System.out.printf(""center x: %d y: %d A: %d B: %d\n"", rect.x()
                        + A, rect.y() + B, A, B);

                CvScalar color = CV_RGB(
                        tangible.RandomNumbers.nextNumber() % 255,
                        tangible.RandomNumbers.nextNumber() % 255,
                        tangible.RandomNumbers.nextNumber() % 255);
                cvDrawContours(dst, contour, color, color, -1, CV_FILLED, 8,
                        cvPoint(0, 0));
            }

            cvSaveImage(""coins.png"", dst, array);
        }
    }

}
</code></pre>
",2017-05-23 12:20:57,2014-02-24 21:20:30,fatal error has been detected by the Java Runtime Environment: OpenCV ellipse detection in Java,<java><c++><opencv><image-processing><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
24162,24244785,2014-06-16 13:21:56,,"<p>I want to join-encode several videos with different frame rates in the same output video with constant frame rate using FFmpegFrameRecorder, as fast as possible. I am thinking to duplicate frames in case I want to increase frame rate, and skip frames when I need to decrease frame rate. I am using JavaCV. </p>

<hr>

<p>Is there any better way of duplicating frames except for calling record(image) twice? (the output is always h264 stored in mp4 file format) Something like a flag in h264 stream indicating that current frame is a duplicate of last one, or something else to skip the redundant encoding.</p>
",2014-12-03 13:35:53,2014-12-03 13:35:53,"Fastest way to encode a frame twice (duplicate, h264 format) using JavaCV ffmpeg?",<android><ffmpeg><h.264><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
24190,25645400,2014-09-03 13:16:37,,"<p>I am using ffserver and ffmpeg combination to capture web camera video and transmit it through my network.</p>

<p>I want to capture this video using opencv and python from another computer. 
I can see the video (cam1.asf) in the browser of another computer. But my opencv + python code could not capture any frame.</p>

<p>Code for ffserver</p>

<pre><code>HTTPPort 8090
HTTPBindAddress 0.0.0.0
MaxHTTPConnections 2000
MaxClients 1000
MaxBandWidth 2000

&lt;Feed feed1.ffm&gt;
   File ./tmp/feed1.ffm
   FileMaxSize 1G
   ACL allow 127.0.0.1
&lt;/Feed&gt;

&lt;Stream cam1.asf&gt;
  Feed feed1.ffm
  Format asf
  VideoCodec msmpeg4v2
  VideoFrameRate 30
  VideoSize vga
&lt;/Stream&gt;
</code></pre>

<p>FFmpeg </p>

<pre><code>$ffmpeg -f video4linux2 -i /dev/video0 192.168.1.3 /cam1.ffm
</code></pre>

<p>This stream can be seen in the browser</p>

<p>But with opencv code </p>

<pre><code>import sys
import cv2.cv as cv
import numpy

video=""http://http://192.168.1.3:8090/cam1.asf""
capture =cv.CaptureFromFile(video)
cv.NamedWindow('Video Stream', 1 )
while True:
  # capture the current frame
  frame = cv.QueryFrame(capture)
  #if frame is None:
   # break
  #else:
    #detect(frame)
  cv.ShowImage('Video Stream', frame)
  if cv.WaitKey(10) == 27:
    print 'ESC pressed. Exiting ...'
    break
</code></pre>

<p>I donot get any output in the stream</p>

<p>My aim is to work with the web camera video both at the base station (ie where the web camera is connected) and also at the network location</p>
",,2014-09-03 13:16:37,Capturing network video using opencv,<python><opencv><ffmpeg><ffserver>,,,CC BY-SA 3.0,True,False,False,False,True
24358,21990000,2014-02-24 14:02:57,,"<p>I'm a complete noob using openCV and openMP and I really want to understand why the cvSetCaptureProperty  is not working with openMP. I'm using OpenCV and OpenMP on Visual Studio 2012.</p>

<p>My code:</p>

<pre><code>#pragma omp parallel
for (int i=0;i&lt;3600;i++)
{
     cvSetCaptureProperty(capture, CV_CAP_PROP_POS_FRAMES,i);
    frame = cvQueryFrame(capture);
    i++;
}
</code></pre>

<p>The error message it returns me:</p>

<pre><code>Unhandled exception at 0x71648EAB (opencv_ffmpeg248.dll) in pupilometry.exe: 0xC0000005: Access violation writing location 0xFEEEFEF6.
</code></pre>

<p>Someone know how to use cvSetCaptureProperty in a parallel way?</p>

<p>Thanks</p>
",,2014-02-24 14:02:57,cvSetCaptureProperty CV_CAP_PROP_POS_FRAMES property not working with OpenMP,<opencv><openmp><visual-c++-2012>,,,CC BY-SA 3.0,True,False,False,False,True
24378,19665103,2013-10-29 17:23:41,,"<p>I'm trying to find a way to extract video into frames.
The main goal is to change the image using openGl and construct the video again.</p>

<p>the problem is that I can't find a desent way to extract the video. I saw that lots of familiar questions were answered with the use of MediaMetadataRetriever but I don't want to use it because it works really slow.</p>

<p>I did a little research about libraries like - jcodec, ffmpeg ,openCV and mp4parser.</p>

<p>jcodec - works fine but really slow, every getFrame() costs 1 second.</p>

<p>ffmpeg - under GPL license which means that you'll have to publish your code.</p>

<p>openCV - complicated. Maybe I can accomplish what I need with it but it looks too complicate and I'm looking for a simpler solution.</p>

<p>mp4parser - extracts decoded frames but doesn't support encoding them to jpg/png.</p>

<p>Would be wonderful to get some help on that one. tnx</p>
",2015-12-02 08:43:57,2015-12-02 08:43:57,Getting frames from video and not with MediaMetadataRetriever,<android><opencv><video><ffmpeg><bitmapfactory>,,,CC BY-SA 3.0,True,False,False,False,True
24456,25350700,2014-08-17 15:33:39,,"<p>I have an android app that records audio in 3gp format. Audio is recorded successfully and the file created. </p>

<p>I would add at least an image file to 3gp created but without using external libraries like ffmpeg, javacv as they leave the app created over 10MB in size. </p>

<p>Basically what I would like is information and sources about what search to add images to the background of my files 3gp audio libraries created without weighing the size of my apps. </p>

<p>Thank you</p>
",,2014-08-17 15:33:39,Add image or photo in the background of .3gp file,<java><android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
24525,25358101,2014-08-18 07:20:09,,"<p>I want to use javacv library for image processing. but i am facing problem integrating the library in porject. The Log cat gives error on line </p>

<pre><code>FFmpegFrameRecorder recorder =
    new FFmpegFrameRecorder(path + ""video"" + System.currentTimeMillis() + "".mp4"",
                             320, 480);
</code></pre>

<p>All other javacv functions work correctly. Only <code>FFmpegFrameRecorder</code> gives error. I have followed the <code>readme.txt</code>, included <code>javacv.jar</code>, and <code>javacpp.jar</code> in the libs folder, as well as extracted <code>.so</code> files from <code>opencv-arm</code>, <code>ffmpeg-arm</code> to <code>armeabi</code> folder in <code>libs</code>.</p>

<p>The logcat error is:</p>

<blockquote>
  <p>08-22 12:46:07.402: E/AndroidRuntime(2408): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1963]:  1581 could not load needed library 'libavcodec.so' for 'libjniavcodec.so' (find_library[1220]:  1581 'libavcodec.so' failed to load previously)</p>
</blockquote>
",2014-08-18 07:52:57,2014-09-25 17:34:02,JAVA CV unsatisfied link error,<android><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
24622,23124435,2014-04-17 04:08:46,,"<p>Given below is the Python script I am using for accessing an IP Camera and saving the incoming video stream:</p>

<pre><code>import cv2
from cv2 import cv
writer=cv2.VideoWriter(""vid.avi"",cv.CV_FOURCC('X', '2', '6', '4'), 24, (320,240))
def cvloop():    
    stream=urllib.urlopen('URL of the camera')
    bytes=''
    while True:
        bytes+=stream.read(1024)
        a = bytes.find('\xff\xd8')
        b = bytes.find('\xff\xd9')
        if a!=-1 and b!=-1:
            jpg = bytes[a:b+2]
            bytes= bytes[b+2:]
            i = cv2.imdecode(np.fromstring(jpg, dtype=np.uint8),cv2.CV_LOAD_IMAGE_COLOR)            
            tki = ImageTk.PhotoImage(Image.fromarray(cv2.cvtColor(i, cv2.COLOR_BGR2RGB)))
            cv2.imshow('i',i)
            writer.write(i)
            if cv2.waitKey(1) ==27:
                exit(0)
</code></pre>

<p>Now, if you want to know why I am parsing the jpg images from the stream the answer can be found <a href=""https://stackoverflow.com/questions/21702477/how-to-parse-mjpeg-http-stream-from-ip-camera"">here</a>. The answer explains everything.</p>

<p>As for the video writer script, I have referred OpenCV's documentation which can be found <a href=""http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html"" rel=""nofollow noreferrer"">here</a>.</p>

<p>Now instead of using the default list of codecs I am using H-264 but I have tried all the codecs installed on my system.</p>

<p><strong>Question:</strong> Now the problem is on executing the program the video file is being made, on running it I see nothing. Also, on using the software <code>GSpot</code> to analyse the video, I am getting the number of frames in the video. Same is the case with <code>FFMPEG</code>. Where am I going wrong?</p>

<pre><code>Camera: Axis IP Camera M1103
OS: Windows 7 32bit
</code></pre>
",2017-05-23 12:11:12,2014-04-17 04:08:46,Saving video using OpenCV,<python><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
24653,22014832,2014-02-25 12:54:01,,"<p>I want to create <em>server and client applications</em> for controlling electronic device through network. </p>

<p><strong>Server application</strong> should stream video from web camera (RGB, 320 * 240) with some information about current state of device and control microcontroller device via RS-232. </p>

<p><strong>Client application</strong> should allow to adjust controlling process and show video from web camera and some information about device.</p>

<p><strong>What i have done:</strong> I use Qt framework in oder to create GUI of both applications and TCP sockets, also I use OpenCV to get images from camera. Server application compresses images in JPEG, add some information about device (~ 60 bytes) and send to client. </p>

<p><strong>Problem:</strong> In Local network everything works fine, but working through Internet I can get only about 15 fps because JPEG images are too large. With stronger JPEG compression I can get suitable fps, but with bad image quality. So I wonder is there any better ways to stream video with some extra information about current state of device? Maybe with FFMPEG or something else.</p>

<p>Thanks for your replies and sorry for my english! </p>
",2014-02-25 15:36:05,2014-02-25 15:36:05,Streaming video from webcam through network with C++ application,<c++><opencv><networking>,,,CC BY-SA 3.0,True,False,False,False,True
24886,22033730,2014-02-26 06:41:39,,"<p>I recently installed ""ffmpeg version 1.2.5"" from ""deb <a href=""ftp://ftp.deb-multimedia.org"" rel=""nofollow"">ftp://ftp.deb-multimedia.org</a> wheezy-backports main"" on my Debian Wheezy.</p>

<p>I wrote some code with OpenCV and now I get the following error when I try to open a video.</p>

<pre><code>[NULL @ 0x21e2ec0] Value 4613937818241073152.000000 for parameter 'thread_type' out of range
[NULL @ 0x21e2ec0] Value -4616189618054758400.000000 for parameter 'request_sample_fmt' out of range
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x282d580] decoding for stream 0 failed
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x282d580] Could not find codec parameters (Video: h264 (avc1 / 0x31637661), 23069 kb/s)
[IMGUTILS @ 0x7ffff1da3fd0] Picture size 0x0 is invalid
[IMGUTILS @ 0x7ffff1da3fe0] Picture size 0x0 is invalid
</code></pre>

<p>///////  SOLUTION /////////</p>

<p>I speculated the problem started after I added the following two source to my /etc/apt/sources.list file on Debian Wheezy.  I did this procure a newer version of FFMPEG.  </p>

<p>deb ftp:// ftp.deb-multimedia . org wheezy main non-free
deb ftp:// ftp.deb-multimedia . org wheezy-backports main</p>

<p>It was then all my code written using the OpenVC started to break.  I had a hunch it was my recent upgrade but not sure until I read the following.</p>

<p>“Make sure proper versions of ffmpeg or gstreamer is installed. Sometimes, it is a headache to work with Video Capture mostly due to wrong installation of ffmpeg/gstreamer.”  ~ http: // opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html</p>

<p>[ SOLUTION ]</p>

<p>This search will tell you what installed packages come from Debian Multimedia:</p>

<p>aptitude search '~i ?origin(Unofficial Multimedia Packages)'</p>

<p>And this command removes them:</p>

<p>aptitude purge '~i ?origin(Unofficial Multimedia Packages)'</p>

<p>Remove the deb-multimedia.org repository from the source.list file.  Install FFMPEG and OpenVC and any additional packages that you need, since much was purged from your system during the downgrade.</p>

<p>sudo aptitude install python-opencv  ffmpeg</p>
",2014-02-27 07:05:04,2014-02-27 07:05:04,Debian Wheezy ffmpeg version 1.2.5 and OpenCV,<opencv><ffmpeg><debian>,,,CC BY-SA 3.0,True,False,False,False,True
24920,25703470,2014-09-06 18:30:19,,"<p>I have a Windows 7 SP1 64 Bit machine with open cv2.4.9 installed and python 2.7.6 installed. 
I use pre compiled version of opencv</p>

<p>The following code works perfectly for me</p>

<pre><code>import cv2.cv as cv
import time

cv.NamedWindow(""camera"", 0)

capture = cv.CaptureFromCAM(0)

while True:
    img = cv.QueryFrame(capture)
    cv.ShowImage(""camera"", img)
    if cv.WaitKey(10) == 27:
        break
cv.DestroyAllWindows()
</code></pre>

<p>Now when I try to use this code</p>

<pre><code>import cv2
import numpy as np
cam = cv2.VideoCapture(0)
s, img = cam.read()

winName = ""Movement Indicator""
cv2.namedWindow(winName, cv2.CV_WINDOW_AUTOSIZE)

while s:
  cv2.imshow( winName,img )

  s, img = cam.read()

  key = cv2.waitKey(10)
  if key == 27:
    cv2.destroyWindow(winName)
    break

print ""Goodbye""
</code></pre>

<p>The window is opened , the camera is initialized (as camera lights are on) , but nothing is displayed and the window closes and the program exits.</p>

<p>WHERE am I going wrong??</p>

<p>QUESTION 2
Can any one also suggest me how to capture live video stream from my Linux machine 192.168.1.3 . The stream is being generated by ffmpeg. </p>

<p>The video stream can be opened in web browser. But I want to capture it with opencv and python.</p>
",,2014-09-06 18:30:19,OpenCV cv2 not working in Windows 7,<python><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
24934,19707468,2013-10-31 13:11:44,,"<p>I'm trying to install openCV 2.4.2 (not the newest version but stable version compatible with newer OS X according to several sources) on Mac OS X 10.9 (Mavericks). I have tried installing from source and using homebrew but neither works. I get the following error when I try installing it: </p>

<pre><code>build Marieke$ make
[ 25%] Building CXX object modules/ts/CMakeFiles/opencv_ts.dir/src/precomp.cpp.o
In file included from /users/Marieke/Downloads/OpenCV-2.4.2/modules/ts/src/precomp.cpp:1:
In file included from /users/Marieke/Downloads/OpenCV-2.4.2/modules/ts/src/precomp.hpp:2:
In file included from /users/Marieke/Downloads/OpenCV-2.4.2/modules/ts/include/opencv2/ts/ts.hpp:40:
/users/Marieke/Downloads/OpenCV-2.4.2/modules/ts/include/opencv2/ts/ts_gtest.h:1657:13: fatal error: 
      'tr1/tuple' file not found
#   include &lt;tr1/tuple&gt;  // NOLINT
        ^
1 error generated.
make[2]: *** [modules/ts/CMakeFiles/opencv_ts.dir/src/precomp.cpp.o] Error 1
make[1]: *** [modules/ts/CMakeFiles/opencv_ts.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I don't know how to solve this and I have tried several things already (I do now have newest versions of Xcode, cmake, ffmpeg, faac, faad, qt, ...) so if anybody can help me, that would be much appreciated, thanks! </p>
",,2014-10-22 01:33:38,Installing openCV 2.4.2 on Mac OS X 10.9 (Mavericks),<macos><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
24951,26826120,2014-11-09 07:41:57,,"<p>I am trying to run the following code:</p>

<pre><code>int main(int argc, char** argv )
{
    cv::redirectError(cvNulDevReport);
    std::string address(argv[1]);
    cv::VideoCapture cap(address); // open the camera
    if(!cap.isOpened())  // check if we succeeded
    {
        std::cerr&lt;&lt;""Error: Could not connect to camera."";
        return 0;
    }
    ...
}
</code></pre>

<p>Now, i know that whenever the resource referred to by argv[1] is not there, I will get a warning like</p>

<pre><code>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:545)
</code></pre>

<p>What I want is to suppress this and any other warning or error from console output, because I want to supply a simple, more comprehensible error myself. As I understand, the call to cv::redirectError should have worked. I have also tried making a dummy error handler function and calling cv::redirectError with a pointer to that function, but I still get the same warning.</p>

<p>Looking at the source code of the file pointed to by warning, I see that it is CV_WARN macro that is substitued, which, looking from the same source file, is either a call to fprintf or nothing.</p>

<p>Any help is appreciated.</p>
",,2014-11-09 07:41:57,How to suppress OpenCV warnings,<c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
24976,24304378,2014-06-19 10:28:52,,"<p>I had got ffmpeg source and build their libs and dlls within my include,lib,bin folders,and I import it into my Opencv project/opencv_highgui, and give the project right property settings.
At the same time, I delete opencv_ffmpeg.dll in Opencv Origin folder.
But it still cant step into ffmpeg source. In debug mode,it just stoped  when it go into class CvCaptrue_FFMPEG_proxy's virtual open()function.
So my question is :
1.how to step into ffmpeg codes? 
2.how to build the opencv_ffmpeg.dll for debug?</p>
",,2014-06-19 10:28:52,"How to debug into CvCapture_FFMPEG from opencv codes ,avoid cap_ffmpeg.cpp load ""opencv_ffmpeg.dll""",<debugging><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
25104,22052008,2014-02-26 20:00:46,,"<p>I got problems getting JavaCV (<a href=""http://code.google.com/p/javacv/"" rel=""nofollow"">http://code.google.com/p/javacv/</a>) to run on my Samsung Galaxy S5570i device. According to this site <a href=""http://www.gsmarena.com/samsung_galaxy_pop_plus_s5570i-4544.php"" rel=""nofollow"">http://www.gsmarena.com/samsung_galaxy_pop_plus_s5570i-4544.php</a> this device has an ARMv6 CPU. I tried several deprecated versions of JavaCV that still include builds for ARMv5, because I had problems building it on my own. None of this versions worked on my device. I also tried running this on a virtual device which should simulate ARMv5 as long as I know. I always get exceptions that libraries couldn't be found, e.g.: ""Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1312]:  1306 cannot locate '_ZNK2cv6KDTree14findOrthoRangeERKNS_11_InputArrayES3_RKNS_12_OutputArrayES6_S6_'.
I know that it is not recommended to use JavaCV on ARMv5 or ARMv6 CPUs, but I want to implement a feature in my app and provide it also for older CPUs, even if it's slower than on newer ones.
So what could be the problem? Did I use wrong versions or what versions should I use?
Hope to get an answer here.</p>

<p>Thanks in advance!</p>

<p>xoidberg</p>
",,2014-02-26 20:00:46,JavaCV on Android with ARMv6,<android><opencv><ffmpeg><arm><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
25188,25726768,2014-09-08 14:36:20,,"<p>I need OpenCV3.0 since it supports some new functions which I need.
I used the following code for installation (I had successfully installed OpenCV 2.4.9 using this code. But for OpenCV 3.0, while doing the cmake section, some error pops up due to mismatch of MD5 checksum)</p>

<pre><code>mkdir OpenCV
cd OpenCV
echo ""Removing any pre-installed ffmpeg and x264""
sudo apt-get -qq remove ffmpeg x264 libx264-dev
echo ""Installing Dependenices""
sudo apt-get -qq install libopencv-dev build-essential checkinstall cmake pkg-config yasm libjpeg-dev libjasper-dev libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev libxine-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev python-dev python-numpy libtbb-dev libqt4-dev libgtk2.0-dev libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev libxvidcore-dev x264 v4l-utils ffmpeg
echo ""Installing OpenCV"" $version
unzip OpenCV-3.0.zip #i manually installed opencv3.0 zipfile for linux from https://github.com/Itseez/opencv/archive/3.0.0-alpha.zip
cd opencv-3.0.0-alpha
mkdir build
cd build
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..
make -j2
sudo checkinstall
sudo sh -c 'echo ""/usr/local/lib"" &gt; /etc/ld.so.conf.d/opencv.conf'
sudo ldconfig
echo ""OpenCV 3.0 ready to be used""
</code></pre>

<p>When I execute the cmake command, I encounter errors. The output is shown below:</p>

<pre><code>clive@clive-Aspire-4755:~/OpenCV/opencv-3.0.0-alpha/build$ cmake -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..
-- The CXX compiler identification is GNU
-- The C compiler identification is GNU
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working C compiler: /usr/bin/gcc
-- Check for working C compiler: /usr/bin/gcc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detected version of GNU GCC: 46 (406)
-- Performing Test HAVE_CXX_FSIGNED_CHAR
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Success
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Success
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Success
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Success
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_CXX_WERROR_ADDRESS
-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success
-- Performing Test HAVE_C_WERROR_ADDRESS
-- Performing Test HAVE_C_WERROR_ADDRESS - Success
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_CXX_WFORMAT
-- Performing Test HAVE_CXX_WFORMAT - Success
-- Performing Test HAVE_C_WFORMAT
-- Performing Test HAVE_C_WFORMAT - Success
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WMISSING_DECLARATIONS
-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
-- Performing Test HAVE_C_WMISSING_PROTOTYPES
-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WUNDEF
-- Performing Test HAVE_CXX_WUNDEF - Success
-- Performing Test HAVE_C_WUNDEF
-- Performing Test HAVE_C_WUNDEF - Success
-- Performing Test HAVE_CXX_WINIT_SELF
-- Performing Test HAVE_CXX_WINIT_SELF - Success
-- Performing Test HAVE_C_WINIT_SELF
-- Performing Test HAVE_C_WINIT_SELF - Success
-- Performing Test HAVE_CXX_WPOINTER_ARITH
-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success
-- Performing Test HAVE_C_WPOINTER_ARITH
-- Performing Test HAVE_C_WPOINTER_ARITH - Success
-- Performing Test HAVE_CXX_WSHADOW
-- Performing Test HAVE_CXX_WSHADOW - Success
-- Performing Test HAVE_C_WSHADOW
-- Performing Test HAVE_C_WSHADOW - Success
-- Performing Test HAVE_CXX_WSIGN_PROMO
-- Performing Test HAVE_CXX_WSIGN_PROMO - Success
-- Performing Test HAVE_C_WSIGN_PROMO
-- Performing Test HAVE_C_WSIGN_PROMO - Failed
-- Performing Test HAVE_CXX_WNO_NARROWING
-- Performing Test HAVE_CXX_WNO_NARROWING - Failed
-- Performing Test HAVE_C_WNO_NARROWING
-- Performing Test HAVE_C_WNO_NARROWING - Failed
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_CXX_WNO_LONG_LONG
-- Performing Test HAVE_CXX_WNO_LONG_LONG - Success
-- Performing Test HAVE_C_WNO_LONG_LONG
-- Performing Test HAVE_C_WNO_LONG_LONG - Success
-- Performing Test HAVE_CXX_PTHREAD
-- Performing Test HAVE_CXX_PTHREAD - Success
-- Performing Test HAVE_C_PTHREAD
-- Performing Test HAVE_C_PTHREAD - Success
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_CXX_MSSE
-- Performing Test HAVE_CXX_MSSE - Success
-- Performing Test HAVE_C_MSSE
-- Performing Test HAVE_C_MSSE - Success
-- Performing Test HAVE_CXX_MSSE2
-- Performing Test HAVE_CXX_MSSE2 - Success
-- Performing Test HAVE_C_MSSE2
-- Performing Test HAVE_C_MSSE2 - Success
-- Performing Test HAVE_CXX_MSSE3
-- Performing Test HAVE_CXX_MSSE3 - Success
-- Performing Test HAVE_C_MSSE3
-- Performing Test HAVE_C_MSSE3 - Success
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_C_FFUNCTION_SECTIONS
-- Performing Test HAVE_C_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN - Failed
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Check if the system is big endian
-- Searching 16 bit integer
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of unsigned short
-- Check size of unsigned short - done
-- Using unsigned short
-- Check if the system is big endian - little endian
-- Found ZLIB: /usr/lib/x86_64-linux-gnu/libz.so (found suitable version ""1.2.3.4"", required is ""1.2.3"")
-- Found TIFF: /usr/lib/x86_64-linux-gnu/libtiff.so 
-- Found JPEG: /usr/lib/x86_64-linux-gnu/libjpeg.so 
-- Performing Test HAVE_C_WNO_UNUSED_VARIABLE
-- Performing Test HAVE_C_WNO_UNUSED_VARIABLE - Success
-- Performing Test HAVE_C_WNO_SHADOW
-- Performing Test HAVE_C_WNO_SHADOW - Success
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Failed
-- Found Jasper: /usr/lib/x86_64-linux-gnu/libjasper.so 
-- Found ZLIB: /usr/lib/x86_64-linux-gnu/libz.so (found version ""1.2.3.4"")
-- Found PNG: /usr/lib/x86_64-linux-gnu/libpng.so 
-- Looking for /usr/include/libpng/png.h
-- Looking for /usr/include/libpng/png.h - found
-- Found OpenEXR: /usr/lib/libIlmImf.so
CMake Warning at cmake/OpenCVFindLibsGUI.cmake:18 (find_package):
  Could not find module FindQt5Core.cmake or a configuration file for package
  Qt5Core.

  Adjust CMAKE_MODULE_PATH to find FindQt5Core.cmake or set Qt5Core_DIR to
  the directory containing a CMake configuration file for Qt5Core.  The file
  will have one of the following names:

    Qt5CoreConfig.cmake
    qt5core-config.cmake

Call Stack (most recent call first):
  CMakeLists.txt:447 (include)


CMake Warning at cmake/OpenCVFindLibsGUI.cmake:19 (find_package):
  Could not find module FindQt5Gui.cmake or a configuration file for package
  Qt5Gui.

  Adjust CMAKE_MODULE_PATH to find FindQt5Gui.cmake or set Qt5Gui_DIR to the
  directory containing a CMake configuration file for Qt5Gui.  The file will
  have one of the following names:

    Qt5GuiConfig.cmake
    qt5gui-config.cmake

Call Stack (most recent call first):
  CMakeLists.txt:447 (include)


CMake Warning at cmake/OpenCVFindLibsGUI.cmake:20 (find_package):
  Could not find module FindQt5Widgets.cmake or a configuration file for
  package Qt5Widgets.

  Adjust CMAKE_MODULE_PATH to find FindQt5Widgets.cmake or set Qt5Widgets_DIR
  to the directory containing a CMake configuration file for Qt5Widgets.  The
  file will have one of the following names:

    Qt5WidgetsConfig.cmake
    qt5widgets-config.cmake

Call Stack (most recent call first):
  CMakeLists.txt:447 (include)


CMake Warning at cmake/OpenCVFindLibsGUI.cmake:21 (find_package):
  Could not find module FindQt5Test.cmake or a configuration file for package
  Qt5Test.

  Adjust CMAKE_MODULE_PATH to find FindQt5Test.cmake or set Qt5Test_DIR to
  the directory containing a CMake configuration file for Qt5Test.  The file
  will have one of the following names:

    Qt5TestConfig.cmake
    qt5test-config.cmake

Call Stack (most recent call first):
  CMakeLists.txt:447 (include)


CMake Warning at cmake/OpenCVFindLibsGUI.cmake:22 (find_package):
  Could not find module FindQt5Concurrent.cmake or a configuration file for
  package Qt5Concurrent.

  Adjust CMAKE_MODULE_PATH to find FindQt5Concurrent.cmake or set
  Qt5Concurrent_DIR to the directory containing a CMake configuration file
  for Qt5Concurrent.  The file will have one of the following names:

    Qt5ConcurrentConfig.cmake
    qt5concurrent-config.cmake

Call Stack (most recent call first):
  CMakeLists.txt:447 (include)


-- Looking for Q_WS_X11
-- Looking for Q_WS_X11 - found
-- Looking for Q_WS_WIN
-- Looking for Q_WS_WIN - not found.
-- Looking for Q_WS_QWS
-- Looking for Q_WS_QWS - not found.
-- Looking for Q_WS_MAC
-- Looking for Q_WS_MAC - not found.
-- Found Qt4: /usr/bin/qmake (found version ""4.8.1"")
-- Looking for XOpenDisplay in /usr/lib/x86_64-linux-gnu/libX11.so;/usr/lib/x86_64-linux-gnu/libXext.so
-- Looking for XOpenDisplay in /usr/lib/x86_64-linux-gnu/libX11.so;/usr/lib/x86_64-linux-gnu/libXext.so - found
-- Looking for gethostbyname
-- Looking for gethostbyname - found
-- Looking for connect
-- Looking for connect - found
-- Looking for remove
-- Looking for remove - found
-- Looking for shmat
-- Looking for shmat - found
-- Looking for IceConnectionNumber in ICE
-- Looking for IceConnectionNumber in ICE - found
-- Found X11: /usr/lib/x86_64-linux-gnu/libX11.so
-- checking for module 'gstreamer-base-1.0'
--   package 'gstreamer-base-1.0' not found
-- checking for module 'gstreamer-video-1.0'
--   package 'gstreamer-video-1.0' not found
-- checking for module 'gstreamer-app-1.0'
--   package 'gstreamer-app-1.0' not found
-- checking for module 'gstreamer-riff-1.0'
--   package 'gstreamer-riff-1.0' not found
-- checking for module 'gstreamer-pbutils-1.0'
--   package 'gstreamer-pbutils-1.0' not found
-- checking for module 'gstreamer-base-0.10'
--   found gstreamer-base-0.10, version 0.10.36
-- checking for module 'gstreamer-video-0.10'
--   found gstreamer-video-0.10, version 0.10.36
-- checking for module 'gstreamer-app-0.10'
--   found gstreamer-app-0.10, version 0.10.36
-- checking for module 'gstreamer-riff-0.10'
--   found gstreamer-riff-0.10, version 0.10.36
-- checking for module 'gstreamer-pbutils-0.10'
--   found gstreamer-pbutils-0.10, version 0.10.36
-- checking for module 'libdc1394-2'
--   found libdc1394-2, version 2.2.0
-- checking for module 'libv4l1'
--   found libv4l1, version 0.8.6
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   found libavcodec, version 53.35.0
-- checking for module 'libavformat'
--   found libavformat, version 53.21.1
-- checking for module 'libavutil'
--   found libavutil, version 51.22.2
-- checking for module 'libswscale'
--   found libswscale, version 2.1.0
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'tbb'
--   found tbb, version 3.0+r018
CMake Warning at 3rdparty/ippicv/downloader.cmake:54 (message):
  ICV: Local copy of ICV package has invalid MD5 hash:
  9a7fea9124cb057264446ab1c7f5841d (expected:
  d80cb24f3a565113a9d6dc56344142f6)
Call Stack (most recent call first):
  3rdparty/ippicv/downloader.cmake:108 (_icv_downloader)
  cmake/OpenCVFindIPP.cmake:212 (include)
  cmake/OpenCVFindLibsPerf.cmake:12 (include)
  CMakeLists.txt:449 (include)


-- ICV: Downloading ippicv_linux_20140513.tgz...
CMake Error at 3rdparty/ippicv/downloader.cmake:71 (file):
  file DOWNLOAD MD5 mismatch

    for file: [/home/clive/OpenCV/opencv-3.0.0-alpha/3rdparty/ippicv/downloads/linux-d80cb24f3a565113a9d6dc56344142f6/ippicv_linux_20140513.tgz]
      expected MD5 sum: [d80cb24f3a565113a9d6dc56344142f6]
        actual MD5 sum: [ad7124f0fc04a24f6c725d2dbbc436db]

Call Stack (most recent call first):
  3rdparty/ippicv/downloader.cmake:108 (_icv_downloader)
  cmake/OpenCVFindIPP.cmake:212 (include)
  cmake/OpenCVFindLibsPerf.cmake:12 (include)
  CMakeLists.txt:449 (include)


CMake Error at 3rdparty/ippicv/downloader.cmake:75 (message):
  ICV: Failed to download ICV package: ippicv_linux_20140513.tgz.
  Status=28;""Timeout was reached""
Call Stack (most recent call first):
  3rdparty/ippicv/downloader.cmake:108 (_icv_downloader)
  cmake/OpenCVFindIPP.cmake:212 (include)
  cmake/OpenCVFindLibsPerf.cmake:12 (include)
  CMakeLists.txt:449 (include)


-- Configuring incomplete, errors occurred!
</code></pre>

<p>Why are the checksums different? Is it because OpenCV3.0 needs another version of ippicv? I understand that the error comes while downloading ippicv_linux_20140513.tgz (in the 3rd party, ippicv folder).</p>

<p>Can someone help me out here? Any help would be appreciated!  </p>

<p>PS. I want to use OpenCV3.0 with Python. OpenCV2.4.9 was working well until I tried to remove it. I actually deleted every file with the name ""opencv"" from my system. I didn't know how to uninstall it the proper way. </p>
",,2017-06-18 04:05:34,OpenCV 3.0 Trouble with Installation,<opencv><installation><cmake><md5><checksum>,,,CC BY-SA 3.0,True,False,False,False,True
25201,26848143,2014-11-10 16:18:13,,"<p>I'm trying this code:</p>

<pre><code>//[Code omitted ...]
Mat outputframe (frame1.rows*2, frame1.cols*4,CV_8UC3);
VideoCapture myvideo(path);
VideoWriter outputVideo;
outputVideo.open(outputName, CV_FOURCC_DEFAULT, myvideo.get(CV_CAP_PROP_FPS),(outputframe.size()),true);
//[Code omitted:Start cycling on the video and]
Mat elaboratedFrame(frame1.rows*2, frame1.cols*4,CV_8UC3)
//[Code omitted:Elaborating the frame ""elaboratedFrame""]
elaboratedFrame.copyTo(outputframe);
outputVideo&lt;&lt; outputframe;
//[Code omitted ...]
</code></pre>

<p>I'm on a Mac (OSX Lion and OpenCV 2.4.6 installed via macports) and everytime I try to run the code I get:
1) On the line where I open outputvideo: </p>

<blockquote>
  <p>WARNING: Could not create empty movie file container.</p>
</blockquote>

<p>2) When I run the program I get this error on the line of the VideoWriter:</p>

<blockquote>
  <p>OpenCV Error: Assertion failed (dst.data == dst0.data) in cvCvtColor</p>
</blockquote>

<p>OR (if I try using <code>cvtColor(elaboratedFrame, outputframe, CV_GRAY2RGB);</code></p>

<blockquote>
  <p>OpenCV Error: Assertion failed (scn == 3 || scn == 4) in cvtColor</p>
</blockquote>

<p>The program obviusly doesn't create anything and <strong>nothing changes</strong> if I chose another codec (MP4,MPEG,MJPG,FFMPEG ecc). I'm getting mad on this error. Anyone who has issued the same problem and maybe solved it?
Thank you everyone in advance.</p>
",,2014-11-10 19:48:44,OpenCV VideoWriter errors on Mac,<c++><macos><opencv><macports>,,,CC BY-SA 3.0,True,True,False,False,True
25281,20892296,2014-01-02 21:31:16,,"<p>I have a big problem that i can’t solve by myself. OpenCV itself works fine, but i’m not able to load videos. Here’s my code:</p>

<p>PRO- File</p>

<pre><code>QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = videoredux
TEMPLATE = app

INCLUDEPATH += C:/OpenCV/opencv_bin/install/include
LIBS += -LC:\\OpenCV\\opencv_bin\\bin \
    libopencv_core248d \
    libopencv_highgui248d \
    libopencv_imgproc248d \
    libopencv_features2d248d \
    libopencv_calib3d248d \
    libopencv_video248d \


SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui
</code></pre>

<p>and the MainWindow Class:</p>

<pre><code>#include ""mainwindow.h""
#include ""ui_mainwindow.h""
#include &lt;QFileDialog&gt;
#include &lt;iostream&gt;
#include &lt;qdebug.h&gt;
#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;opencv2/imgproc/imgproc.hpp&gt;
#include &lt;opencv/cv.h&gt;


MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
    ui-&gt;setupUi(this);
    ui-&gt;videoStatusLabel-&gt;setText(""Kein Video geladen."");

    // SIGNALS &amp; SLOTS

    QObject::connect(ui-&gt;chooseVideoButton,SIGNAL(clicked()),
                 this,SLOT(chooseVideo()));
    QObject::connect(ui-&gt;startButton,SIGNAL(clicked()),
                 this,SLOT(startProcess()));

}

void MainWindow::chooseVideo(){

    QString fileName = QFileDialog::getOpenFileName(this,
         tr(""Open Video""), ""/home"", tr(""Video Files (*.avi *.mp4 *.mpeg *.mpg)""));
    qDebug() &lt;&lt; ""Path:"" &lt;&lt; fileName;
    ui-&gt;videoStatusLabel-&gt;setText(fileName);
}

void MainWindow::startProcess(){
    QString videoPath = ui-&gt;videoStatusLabel-&gt;text();
    QFileInfo video(videoPath);
    if(video.exists()){
        const std::string path = videoPath.toUtf8().constData();
        cv::VideoCapture capture(path);
        cv::Mat frame;

        if(!capture.isOpened()){
            qDebug() &lt;&lt; ""Error, video not loaded"";
        }

        cv::namedWindow(""window"",1);
        while(true)
        {
            bool success = capture.read(frame);
            if(success == false){
                break;
            }
            cv::imshow(""window"",frame);
            cv::waitKey(20);
        }
        cv::waitKey(0);
    }
    else{
        qDebug() &lt;&lt; ""Error, File doesn't exist"";
    }
}
</code></pre>

<p>The paths are correct, I tried many different video formats but he never loads the videos. I’m running Qt on a Windows 8 machine and i have “K-Lite Codec Pack 10.2.0 Basic” and ffmpeg installed. The videos are playing properly with my video players. I also tried to copy the .dll to the working directory, searched for opencv dll's in the system32 directory and rebuild OpenCV with mingw on this computer. I know that many people have the same problems, but none of their suggestions solved it. Does anyone know how to solve this problem?</p>

<p>Thank you very much!</p>

<p>Nadine</p>

<p>----UPDATE---- I still can't open video files, so I programmed the application on a Windows7 64-Bit system. It worked fine, but when I try to open the application on a Windows8 computer it still can't open the file. It doesn't matter which codecs are installed, because it generally runs on every Windows7 computer and fails on every Windows8 computer.. The same for older OpenCV-Versions. Is there a general problem with OpenCV and Windows8? </p>
",2014-02-21 07:59:23,2015-08-04 07:32:53,Qt 5.2 / OpenCV 2.4.8 - Can’t open video files via VideoCapture,<c++><qt><opencv><ffmpeg><qtgui>,,,CC BY-SA 3.0,True,True,False,False,True
25394,23190991,2014-04-21 04:51:46,,"<p>I'm using ffmpeg to video capture for 30 seconds.</p>

<pre><code>@Override
        public void onPreviewFrame(byte[] data, Camera camera) {
            if (yuvIplimage != null &amp;&amp; recording &amp;&amp; rec) 
                {
                    new SaveFrame().execute(data);
                }
            }
        }
</code></pre>

<p>save frame class is below</p>

<pre><code>private class SaveFrame extends AsyncTask&lt;byte[], Void, File&gt; {
            long t;
            protected File doInBackground(byte[]... arg) {

                t = 1000 * (System.currentTimeMillis() - firstTime - pausedTime);
                toSaveFrames++;
                File pathCache = new File(Environment.getExternalStorageDirectory()+""/DCIM"", (System.currentTimeMillis() / 1000L)+ ""_"" + toSaveFrames + "".tmp"");
                BufferedOutputStream bos;
                try {
                    bos = new BufferedOutputStream(new FileOutputStream(pathCache));
                    bos.write(arg[0]);
                    bos.flush();
                    bos.close();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                    pathCache = null;
                    toSaveFrames--;
                } catch (IOException e) {
                    e.printStackTrace();
                    pathCache = null;
                    toSaveFrames--;
                }
                return pathCache;


            }
            @Override
            protected void onPostExecute(File filename)
            {
                if(filename!=null)
                {
                    savedFrames++;
                    tempList.add(new FileFrame(t,filename));
                }
            }
        }
</code></pre>

<p>finally i add all frames with crop and rotation</p>

<pre><code>private class AddFrame extends AsyncTask&lt;Void, Integer, Void&gt; {
        private int serial = 0;
        @Override
        protected Void doInBackground(Void... params) {

            for(int i=0; i&lt;tempList.size(); i++)
            {
                byte[] bytes = new byte[(int) tempList.get(i).file.length()];
                try {
                    BufferedInputStream buf = new BufferedInputStream(new FileInputStream(tempList.get(i).file));
                    buf.read(bytes, 0, bytes.length);
                    buf.close();

                    IplImage image = IplImage.create(imageWidth, imageHeight, IPL_DEPTH_8U, 2);

//                                      final int startY = 640*(480-480)/2;
//                                      final int lenY = 640*480;
//                                      yuvIplimage.getByteBuffer().put(bytes, startY, lenY);
//                                      final int startVU = 640*480+ 640*(480-480)/4;
//                                      final int lenVU = 640* 480/2;
//                                      yuvIplimage.getByteBuffer().put(bytes, startVU, lenVU);

                    if (tempList.get(i).time &gt; recorder.getTimestamp()) {
                        recorder.setTimestamp(tempList.get(i).time);
                    }

                    image = cropImage(image);
                    image = rotate(image, 270);
//                                       image = rotateImage(image);
                    recorder.record(image);
                    Log.i(LOG_TAG, ""record "" + i);
                    image = null;
                    serial++;
                    publishProgress(serial);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                } catch (com.googlecode.javacv.FrameRecorder.Exception e) {
                    e.printStackTrace();
                }
            }
            return null;
        }
        @Override
        protected void onProgressUpdate(Integer... serial) {
            int value = serial[0];
            creatingProgress.setProgress(value);
        }
        @Override
        protected void onPostExecute(Void v)
        {
            creatingProgress.dismiss();
            if (recorder != null &amp;&amp; recording) {
                recording = false;
                Log.v(LOG_TAG,""Finishing recording, calling stop and release on recorder"");
                try {
                    recorder.stop();
                    recorder.release();
                    finish();
                    startActivity(new Intent(RecordActivity.this,AnswerViewActivity.class));
                } catch (FFmpegFrameRecorder.Exception e) {
                    e.printStackTrace();
                }
                recorder = null;
            }
        }
    }
</code></pre>

<p>my crop and rotate method are below</p>

<pre><code>private IplImage cropImage(IplImage src)
    {
        cvSetImageROI(src, r);
        IplImage cropped = IplImage.create(imageHeight, imageHeight, IPL_DEPTH_8U, 2);
        cvCopy(src, cropped);
        return cropped;
    }

    public static IplImage rotate(IplImage image, double angle) {        
        IplImage copy = opencv_core.cvCloneImage(image);

        IplImage rotatedImage = opencv_core.cvCreateImage(opencv_core.cvGetSize(copy), copy.depth(), copy.nChannels()); 
        CvMat mapMatrix = opencv_core.cvCreateMat( 2, 3, opencv_core.CV_32FC1 );

        //Define Mid Point
        CvPoint2D32f centerPoint = new CvPoint2D32f();
        centerPoint.x(copy.width()/2);
        centerPoint.y(copy.height()/2);

        //Get Rotational Matrix
        opencv_imgproc.cv2DRotationMatrix(centerPoint, angle, 1.0, mapMatrix);

        //Rotate the Image
        opencv_imgproc.cvWarpAffine(copy, rotatedImage, mapMatrix, opencv_imgproc.CV_INTER_CUBIC +  opencv_imgproc.CV_WARP_FILL_OUTLIERS, opencv_core.cvScalarAll(170));
        opencv_core.cvReleaseImage(copy);
        opencv_core.cvReleaseMat(mapMatrix);        
        return rotatedImage;
    }
</code></pre>

<p>my final video crop and rotate but green frames and colored frames mixed with this.</p>

<p>How to fix this problem. I'm not aware of iplimage. In some blogs they mention its YUV format. first u need to convert Y and then convert UV. </p>

<p>How to solve this problem?</p>
",,2015-02-26 10:19:54,IplImage crop and rotate - Android,<android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
25476,27625781,2014-12-23 18:09:32,,"<p>I'm trying to implement an Android app that records a video, while also writing a file containing the times at which each frame was taken. I tried using MediaRecorder, got to a point where I can get the video saved, but I couldn't find a way to get the timestamps. I tried doing something like:</p>

<pre><code>while (previous video file length != current video file length)
    write current time to text file;
</code></pre>

<p>but this did not seem to work, as file length doesn't seem to be updated frequently enough (or am I wrong?).</p>

<p>I then tried using OpenCV and managed to capture the images frame by frame (and therefore getting timestamps was easy), but I couldn't find a way to join all the frames to one video. I saw answers referring to using NDK and FFmpeg, but I feel like there should be an easier solution (perhaps similar to the one I tried at the top?).</p>
",2014-12-26 03:23:56,2019-07-30 15:43:22,Trying to capture a video on Android with timestamps,<android><opencv><video>,,,CC BY-SA 3.0,True,False,False,False,True
25484,23199886,2014-04-21 14:57:01,,"<p>I'm using OpenCV 2.4.8 with the supplied Windows 64bit Java jar. I've been making full use of OpenCV in my current environment up until this point. </p>

<p>I'm unable to open video files using the 
<code>VideoCapture</code> class however webcam feeds work just fine.</p>

<p>The below works as expected with <code>video.isOpened</code> returning true</p>

<pre><code>    VideoCapture video = new VideoCapture();
    boolean result = video.open(0);
</code></pre>

<p>The below fails with <code>video.isOpened</code> returning false</p>

<pre><code>    VideoCapture video = new VideoCapture();
    boolean result = video.open(""res/hand-test-1.mp4"");
</code></pre>

<p>Neither file formats seems to make a difference (These are converted, not just renamed in hope)</p>

<pre><code>    video.open(""res/hand-test-1.mp4"");
    video.open(""res/hand-test-1.avi"");
    video.open(""res/hand-test-1.wmv"");
</code></pre>

<p>Location seems to matter not either.</p>

<pre><code>    video.open(""C:/hand-test-1.mp4"");
    video.open(""C:\\hand-test-1.mp4"");
    video.open(""hand-test-1.mp4"");
</code></pre>

<p>Neither does garbage, no exception kicked up from OpenCV through Java either, seems to fail silently.</p>

<pre><code>    video.open(""ashdkfhkajsjdfkhaksdf"");
</code></pre>

<p>PATH contains the ffmpeg directory supplied with the opencv installation, </p>

<pre><code>    C:\dev\opencv\sources\3rdparty\ffmpeg
</code></pre>

<p>Right now I've run out of ideas, it seems like whatever I throw to the native via <code>video.open(String)</code> will return false.</p>

<p>Any help would be much appreciated</p>
",,2014-12-08 16:06:46,OpenCV Java binds VideoCapture from file failing silently,<java><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
25549,27733142,2015-01-01 17:52:14,,"<p>I have added the following dependancies to my maven project.</p>

<pre><code>&lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;
        &lt;artifactId&gt;javacpp&lt;/artifactId&gt;
        &lt;version&gt;0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;
        &lt;artifactId&gt;javacv&lt;/artifactId&gt;
        &lt;version&gt;0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;opencv&lt;/artifactId&gt;
        &lt;version&gt;2.4.10-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;ffmpeg&lt;/artifactId&gt;
        &lt;version&gt;2.5.1-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;flycapture&lt;/artifactId&gt;
        &lt;version&gt;2.7.3.13-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;libdc1394&lt;/artifactId&gt;
        &lt;version&gt;2.2.2-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;libfreenect&lt;/artifactId&gt;
        &lt;version&gt;0.5.1-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;videoinput&lt;/artifactId&gt;
        &lt;version&gt;0.200-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;artoolkitplus&lt;/artifactId&gt;
        &lt;version&gt;2.3.1-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;flandmark&lt;/artifactId&gt;
        &lt;version&gt;1.07-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;fftw&lt;/artifactId&gt;
        &lt;version&gt;3.3.4-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;gsl&lt;/artifactId&gt;
        &lt;version&gt;1.16-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;llvm&lt;/artifactId&gt;
        &lt;version&gt;3.5.0-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;leptonica&lt;/artifactId&gt;
        &lt;version&gt;1.71-0.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
        &lt;artifactId&gt;tesseract&lt;/artifactId&gt;
        &lt;version&gt;3.03-rc1-0.10&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>

<p>And ran the code mentioned <a href=""http://opencvlover.blogspot.com/2012/05/importing-video-using-javacv.html"" rel=""nofollow"">here</a>. I used FFmpegFrameGrabber instead of OpenCVFrameGra</p>

<p>I get the following error.</p>

<pre><code>Exception in thread ""main"" java.lang.NoClassDefFoundError: Could not initialize class org.bytedeco.javacpp.avutil
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:274)
at org.bytedeco.javacpp.Loader.load(Loader.java:385)
at org.bytedeco.javacpp.Loader.load(Loader.java:353)
at org.bytedeco.javacpp.avformat$AVFormatContext.&lt;clinit&gt;(avformat.java:2249)
at org.bytedeco.javacv.FFmpegFrameGrabber.startUnsafe(FFmpegFrameGrabber.java:346)
at org.bytedeco.javacv.FFmpegFrameGrabber.start(FFmpegFrameGrabber.java:340)
</code></pre>

<p>Any Idea ? I am on OS X Yosemite with JDK 1.7.</p>
",,2018-04-23 07:02:05,Could not initialize class org.bytedeco.javacpp.avutil on OS X along with Maven in JavaCV,<java><maven><opencv><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
25634,27831123,2015-01-08 00:31:46,,"<p>I'm using FFmpegFrameRecorder to create mp4(H264) video from camera preview. My recorder configuration is as follows.</p>

<pre><code>recorder = new FFmpegFrameRecorder(filePath, width, height);
recorder.setVideoCodec(avcodec.AV_CODEC_ID_H264);
recorder.setFormat(""mp4"");
recorder.setFrameRate(VIDEO_FPS);
recorder.setVideoBitrate(16384);
recorder.setPixelFormat(avutil.AV_PIX_FMT_YUV420P);
</code></pre>

<p>For the rest I follows closely to the sample code RecordActivity.java and was able to verify that </p>

<pre><code>recorder.record(yuvIplimage)
</code></pre>

<p>gets called 20 (or more) times, which should create an mp4 with 20 frames. However, the resulting mp4 files after open up only has 2 frames (two first frame of the preview)! I have no idea what have caused such behavior. Any help would be greatly appreciate. Thank you.</p>

<p>Long Le</p>
",,2015-01-08 18:13:55,FFmpegFrameRecorder calls record() 20 times but the resulting mp4 file only has 2 frames,<ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
25647,26884359,2014-11-12 10:13:12,,"<p>I'm developing a C# video streaming application. 
At the moment I was able to capture video frames using opencv and encode it using ffmpeg and also capture and encode
audio using ffmpeg and save data in to queue.</p>

<p>The problem that I am facing is that when I send both streams simultaneously I am losing video stream.That means I stream it by first sending a video packet and then an audio packet. But, the player identifies video stream first and start to play. And did not play audio packets.  </p>

<p>Can any one give a method to do this task?
It will be greatly appreciated.</p>
",,2014-11-12 10:13:12,stream audio and video data separately,<c#><opencv><audio><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
25721,27882648,2015-01-11 00:20:47,,"<p>We've got an OpenCV project that uses its Python bindings to run some motion detection stuff on video files. We've built a series of accuracy tests, using some manually entered input from a tool we built, and we noticed something a little strange.</p>

<p>We're using OpenCV 2.4.9 on OS X, installed via Homebrew, and 2.4.10 on Ubuntu, compiled from source. We've run the tests on a few different machines, and have noticed that our accuracy scores on OS X are much, much higher - averaging around 70%, with the Ubuntu scores averaging around 15%.</p>

<p>What would be the most likely cause of this discrepancy? I would assume that inferior hardware would cause the tests to run more slowly, but am unsure as to what would cause such a drastic change in accuracy. The video codecs, perhaps? Are there any packages for Ubuntu, open-source or otherwise, that are known to improve this?</p>

<p>Dependencies installed:</p>

<blockquote>
  <p>sudo apt-get -qq install libopencv-dev build-essential checkinstall
  cmake pkg-config yasm libjpeg-dev libjasper-dev libavcodec-dev
  libavformat-dev libswscale-dev libdc1394-22-dev libxine-dev
  libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev
  python-dev python-numpy libtbb-dev libqt4-dev libgtk2.0-dev
  libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev
  libtheora-dev libvorbis-dev libxvidcore-dev x264 v4l-utils ffmpeg</p>
</blockquote>

<p>cmake parameters:</p>

<blockquote>
  <p>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local
  -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D
  BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..</p>
</blockquote>

<p>Output of <code>brew info opencv</code> on the Macs: </p>

<pre><code>opencv: stable 2.4.9, HEAD
http://opencv.org/
/usr/local/Cellar/opencv/2.4.9 (219 files, 38M) *
  Built from source with: --with-gstreamer
From: https://github.com/homebrew/homebrew-science/blob/master/opencv.rb
==&gt; Dependencies
Build: cmake ✘, pkg-config ✔
Required: jpeg ✔, libpng ✔, libtiff ✔
Recommended: eigen ✘, openexr ✔
Optional: gstreamer ✘, jasper ✘, libdc1394 ✘, openni ✘, qt ✘, tbb ✘, ffmpeg ✔
==&gt; Options
--32-bit
        Build 32-bit only
--c++11
        Build using C++11 mode
--with-cuda
        Build with CUDA support
--with-ffmpeg
        Build with ffmpeg support
--with-gstreamer
        Build with gstreamer support
--with-jasper
        Build with jasper support
--with-java
        Build with Java support
--with-libdc1394
        Build with libdc1394 support
--with-openni
        Build with openni support
--with-qt
        Build the Qt4 backend to HighGUI
--with-quicktime
        Use QuickTime for Video I/O insted of QTKit
--with-tbb
        Enable parallel code in OpenCV using Intel TBB
--with-tests
        Build with accuracy &amp; performance tests
--without-eigen
        Build without eigen support
--without-opencl
        Disable GPU code in OpenCV using OpenCL
--without-openexr
        Build without openexr support
--HEAD
        install HEAD version
==&gt; Caveats
Python modules have been installed and Homebrew's site-packages is not
in your Python sys.path, so you will not be able to import the modules
this formula installed. If you plan to develop with these modules,
please run:
  mkdir -p
  echo 'import site; site.addsitedir(""/usr/local/lib/python2.7/site-packages"")' &gt;&gt; homebrew.pth
</code></pre>
",2015-01-11 06:05:04,2015-01-11 21:56:13,OpenCV more accurate on OS X than Linux,<python><linux><macos><opencv><ubuntu>,,,CC BY-SA 3.0,True,False,False,False,True
25900,26910524,2014-11-13 13:55:35,,"<p>I'm trying to decode a video file using ffmpeg, grab the AVFrame object, convert it to opencv mat object, do some processing then convert it back to AVFrame object and encode it back to a video file.</p>

<p>Well, the program can run, but it produces bad result.</p>

<p>I Keep getting errors like ""top block unavailable for requested intra mode at 7 19"", ""error while decoding MB 7 19, bytestream 358"", ""concealing 294 DC, 294AC, 294 MV errors in P frame"" etc.</p>

<p>And the result video got glithes all over it. like this,
 <img src=""https://i.stack.imgur.com/1MgaA.png"" alt=""enter image description here""></p>

<p>I'm guessing it's because my AVFrame to Mat and Mat to AVFrame methods, and here they are</p>

<pre><code>//unspecified function
temp_rgb_frame = avcodec_alloc_frame(); 
int numBytes = avpicture_get_size(PIX_FMT_RGB24, width, height); 
uint8_t * frame2_buffer = (uint8_t *)av_malloc(numBytes * sizeof(uint8_t)); 
avpicture_fill((AVPicture*)temp_rgb_frame, frame2_buffer, PIX_FMT_RGB24, width, height);

void CoreProcessor::Mat2AVFrame(cv::Mat **input, AVFrame *output)
{
    //create a AVPicture frame from the opencv Mat input image
    avpicture_fill((AVPicture *)temp_rgb_frame,
        (uint8_t *)(*input)-&gt;data,
        AV_PIX_FMT_RGB24,
        (*input)-&gt;cols,
        (*input)-&gt;rows);

    //convert the frame to the color space and pixel format specified in the sws context

    sws_scale(
        rgb_to_yuv_context, 
        temp_rgb_frame-&gt;data,
        temp_rgb_frame-&gt;linesize,
        0, height, 
        ((AVPicture *)output)-&gt;data, 
        ((AVPicture *)output)-&gt;linesize);

    (*input)-&gt;release();

}

void CoreProcessor::AVFrame2Mat(AVFrame *pFrame, cv::Mat **mat)
{
    sws_scale(
        yuv_to_rgb_context, 
        ((AVPicture*)pFrame)-&gt;data, 
        ((AVPicture*)pFrame)-&gt;linesize, 
        0, height, 
        ((AVPicture *)temp_rgb_frame)-&gt;data,
        ((AVPicture *)temp_rgb_frame)-&gt;linesize);

    *mat = new cv::Mat(pFrame-&gt;height, pFrame-&gt;width, CV_8UC3, temp_rgb_frame-&gt;data[0]);
}

void CoreProcessor::process_frame(AVFrame *pFrame)
{
    cv::Mat *mat = NULL;
    AVFrame2Mat(pFrame, &amp;mat);
    Mat2AVFrame(&amp;mat, pFrame);
}
</code></pre>

<p>Am I doing something wrong with the memory? Because if I remove the processing part, just decode and then encode the frame, the result is correct.</p>
",2014-11-13 14:22:40,2014-11-13 14:23:10,Process AVFrame using opencv mat causing encoding error,<c++><opencv><ffmpeg><encode><mat>,,,CC BY-SA 3.0,True,True,False,False,True
26015,27948720,2015-01-14 17:18:53,,"<p>I""m experiencing the same problem a lot of other people are experiencing with openCV, in that when I use the following code, openCV fails to write a video file. I am using openCV 2.4.10 and python 2.7 </p>

<pre><code>out = cv2.VideoWriter('C:\motion\output.avi',cv2.cv.CV_FOURCC('X','V','I','D'), 20, (640,480),True)
</code></pre>

<p>a viable work around is to replace the second argument with -1, which gives a popup window with coded choices when the program is run.  When one of these is selected, the video is created.</p>

<p>The problem is, I am adding it to a motion detection software which writes a 15 second timestamped file every time  it detects motion, and obviously selecting a codec manually does not work with this scheme.  </p>

<p>Is there a way to direct openCV to select one of these codecs using VideoWriter, or some other method?</p>

<p>THINGS I HAVE TRIED ALREADY:
copying opencv_ffmpeg.dll to python folder and selecting FMP4 codec from FOURCC</p>
",2015-01-14 17:26:33,2015-01-14 19:55:25,OpenCV VideoWriter Automatic Codec selection,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
26056,25802091,2014-09-12 06:29:32,,"<p>I am using a 3rd party API for camera library that is using ffmpeg frame recorder and .so files along with javacv.</p>
<p>I am also using a 3rd party library for extracting meta data out from a video which also has some .so files</p>
<p>When i merged all these files into only one folder &quot;armeabi&quot; my application did not work.
So I have to copy all these files to all other folders &quot;armeabi-v7a, mips, x86&quot;. Which works perfectly fine but obviously the size of the apk is now too large.</p>
<p>Total size of these file are 20MB per folder. That make 80MB for all folder. My .apk size is 41MB. Please suggest ma what I can do to remove duplicate files/folders or reduce .apk size.</p>
<p>Why I need all these folders armeabi, armeabi-v7a, mips, x86
<img src=""https://i.stack.imgur.com/vbQ5R.png"" alt=""enter image description here"" /></p>
<p><strong>.so files in folder</strong>
<img src=""https://i.stack.imgur.com/RwwZd.png"" alt=""enter image description here"" /></p>
",2020-06-20 09:12:55,2014-09-13 12:45:11,Reduce size of APK when including .so files,<android><android-ndk><ffmpeg><proguard><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
26129,27787763,2015-01-05 20:56:37,,"<p>I tried to show the images my phone sends over WiFi with JavaCV and the FFmpegFrameGrabber class. Unfortunately I get this error, no matter which pixel format I set (tried from 0 up to 65).</p>

<pre><code>Input #0, mjpeg, from 'http://IP:PORT/video':
Duration: N/A, bitrate: N/A
Stream #0:0: Video: mjpeg, yuvj420p(pc, bt470bg/unknown/unknown), 640x480 [SAR 1:1 DAR 2:3], 24 tbr, 1200k tbn, 24 tbc    
[swscaler @ 0x7ff6cc3cba00] deprecated pixel format used, make sure you did set range correctly
</code></pre>

<p>This is how I create the FrameGrabber:</p>

<pre><code>FrameGrabber grabber = new FFmpegFrameGrabber(""http://IP:PORT/video"");
grabber.setFormat(""mjpeg"");
grabber.setVideoCodec(8);
grabber.setFrameRate(24);
</code></pre>

<p>And then getting the frame:</p>

<pre><code>frame = grabber.grab();
</code></pre>

<p><strong>EDIT:</strong></p>

<p>Apparently this error comes from the ffmpeg library and has something to do with jpeg.</p>

<p>It is located in: libswscale/utils.c</p>

<p>Line 975 and 976 cause this error:</p>

<pre><code>if(srcFormat!=c-&gt;srcFormat || dstFormat!=c-&gt;dstFormat)
     av_log(c, AV_LOG_WARNING, ""deprecated pixel format used, make sure you did set range correctly\n"");
</code></pre>

<p>Unfortunately I am not skilled enough to delete/change this line. So I just ignore this messages as it doesn't affect the program. Unless someone can recompile an edited version of ffmpeg for mac :)</p>
",2015-01-06 16:16:21,2018-06-14 11:54:01,FFmpegFrameGrabber deprecated pixel format error,<video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
26145,25807494,2014-09-12 11:40:40,,"<pre><code>for (MBFImage mbfImage : video) {
DisplayUtilities.displayName(mbfImage.process(new CannyEdgeDetector()), ""videoFrames"");
</code></pre>

<p>I need to <strong>extract frames from a video</strong> and I'm using Java platform.</p>

<p>I'm expecting to use the <strong>OpenIMAJ</strong> Library to do that. I want to know are their any other better solutions for this (<em>better processing time</em>)? And also the average processing time and speed of OpenImaj to extract frames from a video.</p>

<p><strong>Edited:</strong></p>

<p>I need to extract local video files. I'm not going to implement anything else with OpenIMAJ. I just need OpenIMAJ to extract frames and loop through them. I need to know the time that OpenIMAJ takes to extract frames from a video. Is it something slow, comparing with other libraries(openCV, FFMPEG).</p>
",2014-09-13 00:23:02,2014-09-13 07:15:06,Extract frames from a video using OpenImaj in Java,<java><image-processing><video-processing><openimaj>,,,CC BY-SA 3.0,True,False,False,False,True
26169,27687169,2014-12-29 10:32:21,,"<p>I am working on FFMPEG Video Conversion, I want a face replacement by my image in a video. For this subject I searched for something which I am describing below. Please let me know if I am wrong, and suggest a more proper procedure for the task. </p>

<p>1) I can extract all images from a video frame by frame.</p>

<p>2) Then we detect face from each image.</p>

<p>3) Morph an image onto the face.</p>

<p>4) Then again make a video with these images through FFMPEG.</p>

<p>Am I right? If yes then what about audio in this process? And if wrong then where am I mistaken?</p>
",2015-01-18 21:18:45,2015-01-18 21:18:45,Face replacement by an image in video using FFMPEG android,<android><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
26211,25498218,2014-08-26 04:45:23,,"<p>Hey all I am currently able to get a thumbnail capture from my MP4 video by doing the following command line:</p>
<pre><code>       [Sets Per-file main options time_off start time offset]
       || [The # of start time offsets]
       || || [Sets input video file option]
       || || ||   [Video file name here]
       || || ||   ||         [Sets video option to # of video frames to record]        
       || || ||   ||         ||     [Asking for the first frame]
       || || ||   ||         ||     ||  [Name of the captured video frame]
       || || ||   ||         ||     ||  ||
       \/ \/ \/   \/         \/     \/  \/
ffmpeg -ss 0 -i vidfile.mp4 -vframes 1 frame.png
</code></pre>
<p>Now as I said above, this command works just fine in producing a thumbnail of the first frame of my MP3 video. However, I am needing to place an overlay image of a &quot;play&quot; button on top of that newly created frame image.</p>
<p>Is there another command that i can tell it to overlay another image on top of frame.png?</p>
<p>The image I would like to overlay on top of the frame looks like this (a transparent PNG):</p>
<p><img src=""https://i.stack.imgur.com/RlH2M.png"" alt=""enter image description here"" /></p>
<p>Any help would be great! Thanks!</p>
",2020-06-20 09:12:55,2014-08-26 17:41:19,ffmpeg adding play image to thumbnail output,<image><video><image-processing><ffmpeg><video-processing>,2018-06-14 19:41:42,,CC BY-SA 3.0,False,False,False,False,True
26334,26946447,2014-11-15 13:40:43,,"<p>I want to build an efficient streaming application for android. I came across at Java CV and Java CPP, which includes a wrapper for ffmpeg. I followed this piece of code and everthing works fine, using Wowza Streaming Server: <a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow"">https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java</a></p>

<p>Howver, I want to stream the video to VLC Player directly, without the use of an external Streaming Server. Is there a way to stream the video over rtsp using the tools which are mentioned above? Does anyone have further information?</p>

<p>Thanks for your help!</p>
",,2014-11-15 13:40:43,How to stream video from android over rtsp,<android><ffmpeg><video-streaming><javacv><javacpp>,,,CC BY-SA 3.0,False,False,False,False,True
26489,26956830,2014-11-16 12:19:57,,"<p>I use following 2 commands to stream video from Raspberry Pi</p>

<p><strong>RaPi</strong></p>

<pre><code>raspivid -t 999999 -h 720 -w 1080 -fps 25 -hf -b 2000000 -o - | gst-launch-1.0 -v fdsrc ! h264parse !  rtph264pay config-interval=1 pt=96 ! gdppay ! tcpserversink host=$RA-IP-ADDR port=5000 
</code></pre>

<p><strong>Linux Box</strong></p>

<pre><code>gst-launch-1.0 -v tcpclientsrc host=$RA-IP-ADDR port=5000  ! gdpdepay !  rtph264depay ! avdec_h264 ! videoconvert ! autovideosink sync=false 
</code></pre>

<p>But what kind of stream is it? Can I read it with OpenCV? or convert with <code>avconv|ffmpeg</code> <code>nc $RA-IP-ADDR 5000 | avconv</code>? or watch with VLC ?</p>
",,2014-11-16 13:02:52,What kind of stream GStreamer produce?,<opencv><ffmpeg><gstreamer><vlc><avconv>,,,CC BY-SA 3.0,True,False,False,False,True
26665,28198627,2015-01-28 17:29:46,,"<p>I wanted to do a very simple project of giving a program an input video which is saved in the same directory as ""my_video"" without any processing steps. I specifically want to use the H.264 compression format. Hence I chose 'X','2','6','4' Fourcc and the program popped out the following errors.</p>

<p>broken ffmpeg default settings detected
use an encoding preset (e.g. -vpre medium)
preset usage: -vpre  -vpre 
speed presets are listed in x264 --help
profile is optional; x264 defaults to high
Could not open codec 'libx264': Unspecified error</p>

<p>So how do I install libx264 and configure it to work with opencv.I tried setting the fourcc value to -1 to do it by hand but no Window popped up requesting me to choose one of the available codec.( isn't that supposed to happen).</p>

<p>any help would be appreciated.</p>
",,2015-01-28 17:29:46,Writing video with x264 Fourcc in Videowriter class in opencv,<opencv><ffmpeg><h.264>,,,CC BY-SA 3.0,True,False,False,False,True
26667,28200349,2015-01-28 19:04:35,,"<p>I tried to write a video from a sequence of images created by OpenCV. However I cannot open the videos after writing them. I guess there is a codec issue. I find it extremely difficult where the error exactly comes from. Here is my code:</p>

<pre><code>    Size size = Size(vecOfMats[0].rows,vecOfMats[0].cols);
    int codec = CV_FOURCC('D', 'I', 'V', 'X');

    VideoWriter videoWriter;
    videoWriter.open(outputFilename,codec,15.0,size,true);

    for(int z=0; z &lt; vecOfMats.size(); z++)
    {
        videoWriter.write(vecOfMats[z]);
    }
    videoWriter.release();
</code></pre>

<p>I also tried all of these codecs without success (either OpenCv could not find the codec or the video could not be opened):</p>

<pre><code>int codec = CV_FOURCC('P','I','M','1');   // = MPEG-1 codec
int codec = CV_FOURCC('M','J','P','G');   // = motion-jpeg codec - cannot be played by VLC
int codec = CV_FOURCC('M', 'P', '4', '2');// = MPEG-4.2 codec - not found
int codec = CV_FOURCC('D', 'I', 'V', '3');// = MPEG-4.3 codec - not found
int codec = CV_FOURCC('D', 'I', 'V', 'X');// = MPEG-4 codec - cannot be played by VLC
int codec = CV_FOURCC('U', '2', '6', '3');// = H263 codec - must have w/h = 4
int codec = CV_FOURCC('I', '2', '6', '3');// = H263I codec - not found
</code></pre>

<p>I even took the codec of a video opened via OpenCV previously (without success):</p>

<pre><code>string filename = ""/path/to/the/video/myVideo.avi"";
VideoCapture capture(filename);
int ex = static_cast&lt;int&gt;(capture.get(CV_CAP_PROP_FOURCC));             // Get Codec Type- Int form
char EXT[] = {(char)(ex &amp; 0XFF) , (char)((ex &amp; 0XFF00) &gt;&gt; 8),(char)((ex &amp; 0XFF0000) &gt;&gt; 16),(char)((ex &amp; 0XFF000000) &gt;&gt; 24), 0};// Transform from int to char via Bitwise operators
cout&lt;&lt;""Codec: ""&lt;&lt;ex&lt;&lt;endl;
VideoWriter videoWriter;
videoWriter.open(outputFilename,ex,15.0,size,true);
</code></pre>

<p>I'm not even sure if the problem lies with my OpenCV or my Ubuntu :/. 
(I tried to open them using the default video player and vlc)</p>
",,2015-02-02 13:32:16,Cannot play video created by OpenCV (using Ubuntu 12.04),<c++><opencv><ubuntu><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
26698,28147888,2015-01-26 09:58:02,,"<p>I have merged two videos in android using FFmpeg Frame Grabber. 
I want to add effect like fade in/out between videos.
is there anyway to add transition between videos</p>
",,2015-01-26 09:58:02,How to add transition effect between megred Videos in android,<android><opencv><ffmpeg><video-processing><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
26709,28163741,2015-01-27 05:22:57,,"<p>I am using this library <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow"">javaCV</a> to record video on android. They have provided a sample VideoRecording Activity But There is some bug which I could not figure out what I am doing it wrong or what is missing which causing this bug.</p>

<pre><code>package org.bytedeco.javacv.recordactivity;

import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.PowerManager;
import android.util.Log;
import android.view.Display;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

import java.io.IOException;
import java.nio.ShortBuffer;

import org.bytedeco.javacv.FFmpegFrameRecorder;

import static org.bytedeco.javacpp.opencv_core.*;

public class RecordActivity extends Activity implements OnClickListener {

    private final static String CLASS_LABEL = ""RecordActivity"";
    private final static String LOG_TAG = CLASS_LABEL;

    private PowerManager.WakeLock mWakeLock;

    private String ffmpeg_link = ""/mnt/sdcard/stream.flv"";

    long startTime = 0;
    boolean recording = false;

    private volatile FFmpegFrameRecorder recorder;

    private boolean isPreviewOn = false;

    private int sampleAudioRateInHz = 44100;
    private int imageWidth = 320;
    private int imageHeight = 240;
    private int frameRate = 30;

    /* audio data getting thread */
    private AudioRecord audioRecord;
    private AudioRecordRunnable audioRecordRunnable;
    private Thread audioThread;
    volatile boolean runAudioThread = true;

    /* video data getting thread */
    private Camera cameraDevice;
    private CameraView cameraView;

    private IplImage yuvIplimage = null;

    /* layout setting */
    private final int bg_screen_bx = 232;
    private final int bg_screen_by = 128;
    private final int bg_screen_width = 700;
    private final int bg_screen_height = 500;
    private final int bg_width = 1123;
    private final int bg_height = 715;
    private final int live_width = 640;
    private final int live_height = 480;
    private int screenWidth, screenHeight;
    private Button btnRecorderControl;

    /** The number of seconds in the continuous record loop (or 0 to disable loop). */
    final int RECORD_LENGTH = 10;
    IplImage[] images;
    long[] timestamps;
    ShortBuffer[] samples;
    int imagesIndex, samplesIndex;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        setContentView(R.layout.main);

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE); 
        mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, CLASS_LABEL); 
        mWakeLock.acquire(); 

        initLayout();
    }


    @Override
    protected void onResume() {
        super.onResume();

        if (mWakeLock == null) {
           PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
           mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, CLASS_LABEL);
           mWakeLock.acquire();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();

        if (mWakeLock != null) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        recording = false;

        if (cameraView != null) {
            cameraView.stopPreview();
        }

        if(cameraDevice != null) {
           cameraDevice.stopPreview();
           cameraDevice.release();
           cameraDevice = null;
        }

        if (mWakeLock != null) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }


    private void initLayout() {

        /* get size of screen */
        Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
        RelativeLayout.LayoutParams layoutParam = null; 
        LayoutInflater myInflate = null; 
        myInflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        RelativeLayout topLayout = new RelativeLayout(this);
        setContentView(topLayout);
        LinearLayout preViewLayout = (LinearLayout) myInflate.inflate(R.layout.main, null);
        layoutParam = new RelativeLayout.LayoutParams(screenWidth, screenHeight);
        topLayout.addView(preViewLayout, layoutParam);

        /* add control button: start and stop */
        btnRecorderControl = (Button) findViewById(R.id.recorder_control);
        btnRecorderControl.setText(""Start"");
        btnRecorderControl.setOnClickListener(this);

        /* add camera view */
        int display_width_d = (int) (1.0 * bg_screen_width * screenWidth / bg_width);
        int display_height_d = (int) (1.0 * bg_screen_height * screenHeight / bg_height);
        int prev_rw, prev_rh;
        if (1.0 * display_width_d / display_height_d &gt; 1.0 * live_width / live_height) {
            prev_rh = display_height_d;
            prev_rw = (int) (1.0 * display_height_d * live_width / live_height);
        } else {
            prev_rw = display_width_d;
            prev_rh = (int) (1.0 * display_width_d * live_height / live_width);
        }
        layoutParam = new RelativeLayout.LayoutParams(prev_rw, prev_rh);
        layoutParam.topMargin = (int) (1.0 * bg_screen_by * screenHeight / bg_height);
        layoutParam.leftMargin = (int) (1.0 * bg_screen_bx * screenWidth / bg_width);

        cameraDevice = Camera.open();
        Log.i(LOG_TAG, ""cameara open"");
        cameraView = new CameraView(this, cameraDevice);
        topLayout.addView(cameraView, layoutParam);
        Log.i(LOG_TAG, ""cameara preview start: OK"");
    }

    //---------------------------------------
    // initialize ffmpeg_recorder
    //---------------------------------------
    private void initRecorder() {

        Log.w(LOG_TAG,""init recorder"");

        if (RECORD_LENGTH &gt; 0) {
            imagesIndex = 0;
            images = new IplImage[RECORD_LENGTH * frameRate];
            timestamps = new long[images.length];
            for (int i = 0; i &lt; images.length; i++) {
                images[i] = IplImage.create(imageWidth, imageHeight, IPL_DEPTH_8U, 2);
                timestamps[i] = -1;
            }
        } else if (yuvIplimage == null) {
            yuvIplimage = IplImage.create(imageWidth, imageHeight, IPL_DEPTH_8U, 2);
            Log.i(LOG_TAG, ""create yuvIplimage"");
        }

        Log.i(LOG_TAG, ""ffmpeg_url: "" + ffmpeg_link);
        recorder = new FFmpegFrameRecorder(ffmpeg_link, imageWidth, imageHeight, 1);
        recorder.setFormat(""flv"");
        recorder.setSampleRate(sampleAudioRateInHz);
        // Set in the surface changed method
        recorder.setFrameRate(frameRate);

        Log.i(LOG_TAG, ""recorder initialize success"");

        audioRecordRunnable = new AudioRecordRunnable();
        audioThread = new Thread(audioRecordRunnable);
        runAudioThread = true;
    }

    public void startRecording() {

        initRecorder();

        try {
            recorder.start();
            startTime = System.currentTimeMillis();
            recording = true;
            audioThread.start();

        } catch (FFmpegFrameRecorder.Exception e) {
            e.printStackTrace();
        }
    }

    public void stopRecording() {

        runAudioThread = false;
        try {
            audioThread.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        audioRecordRunnable = null;
        audioThread = null;

        if (recorder != null &amp;&amp; recording) {
            if (RECORD_LENGTH &gt; 0) {
                Log.v(LOG_TAG,""Writing frames"");
                try {
                    int firstIndex = imagesIndex % samples.length;
                    int lastIndex = (imagesIndex - 1) % images.length;
                    if (imagesIndex &lt;= images.length) {
                        firstIndex = 0;
                        lastIndex = imagesIndex - 1;
                    }
                    if ((startTime = timestamps[lastIndex] - RECORD_LENGTH * 1000000L) &lt; 0) {
                        startTime = 0;
                    }
                    if (lastIndex &lt; firstIndex) {
                        lastIndex += images.length;
                    }
                    for (int i = firstIndex; i &lt;= lastIndex; i++) {
                        long t = timestamps[i % timestamps.length] - startTime;
                        if (t &gt;= 0) {
                            if (t &gt; recorder.getTimestamp()) {
                                recorder.setTimestamp(t);
                            }
                            recorder.record(images[i % images.length]);
                        }
                    }

                    firstIndex = samplesIndex % samples.length;
                    lastIndex = (samplesIndex - 1) % samples.length;
                    if (samplesIndex &lt;= samples.length) {
                        firstIndex = 0;
                        lastIndex = samplesIndex - 1;
                    }
                    if (lastIndex &lt; firstIndex) {
                        lastIndex += samples.length;
                    }
                    for (int i = firstIndex; i &lt;= lastIndex; i++) {
                        recorder.record(samples[i % samples.length]);
                    }
                } catch (FFmpegFrameRecorder.Exception e) {
                    Log.v(LOG_TAG,e.getMessage());
                    e.printStackTrace();
                }
            }

            recording = false;
            Log.v(LOG_TAG,""Finishing recording, calling stop and release on recorder"");
            try {
                recorder.stop();
                recorder.release();
            } catch (FFmpegFrameRecorder.Exception e) {
                e.printStackTrace();
            }
            recorder = null;

        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if (recording) {
                stopRecording();
            }

            finish();

            return true;
        }

        return super.onKeyDown(keyCode, event);
    }


    //---------------------------------------------
    // audio thread, gets and encodes audio data
    //---------------------------------------------
    class AudioRecordRunnable implements Runnable {

        @Override
        public void run() {
            android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

            // Audio
            int bufferSize;
            ShortBuffer audioData;
            int bufferReadResult;

            bufferSize = AudioRecord.getMinBufferSize(sampleAudioRateInHz, 
                    AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
            audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleAudioRateInHz, 
                    AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);

            if (RECORD_LENGTH &gt; 0) {
                samplesIndex = 0;
                samples = new ShortBuffer[RECORD_LENGTH * sampleAudioRateInHz * 2 / bufferSize + 1];
                for (int i = 0; i &lt; samples.length; i++) {
                    samples[i] = ShortBuffer.allocate(bufferSize);
                }
            } else {
                audioData = ShortBuffer.allocate(bufferSize);
            }

            Log.d(LOG_TAG, ""audioRecord.startRecording()"");
            audioRecord.startRecording();

            /* ffmpeg_audio encoding loop */
            while (runAudioThread) {
                if (RECORD_LENGTH &gt; 0) {
                    audioData = samples[samplesIndex++ % samples.length];
                    audioData.position(0).limit(0);
                }
                //Log.v(LOG_TAG,""recording? "" + recording);
                bufferReadResult = audioRecord.read(audioData.array(), 0, audioData.capacity());
                audioData.limit(bufferReadResult);
                if (bufferReadResult &gt; 0) {
                    Log.v(LOG_TAG,""bufferReadResult: "" + bufferReadResult);
                    // If ""recording"" isn't true when start this thread, it never get's set according to this if statement...!!!
                    // Why?  Good question...
                    if (recording) {
                        if (RECORD_LENGTH &lt;= 0) try {
                            recorder.record(audioData);
                            //Log.v(LOG_TAG,""recording "" + 1024*i + "" to "" + 1024*i+1024);
                        } catch (FFmpegFrameRecorder.Exception e) {
                            Log.v(LOG_TAG,e.getMessage());
                            e.printStackTrace();
                        }
                    }
                }
            }
            Log.v(LOG_TAG,""AudioThread Finished, release audioRecord"");

            /* encoding finish, release recorder */
            if (audioRecord != null) {
                audioRecord.stop();
                audioRecord.release();
                audioRecord = null;
                Log.v(LOG_TAG,""audioRecord released"");
            }
        }
    }

    //---------------------------------------------
    // camera thread, gets and encodes video data
    //---------------------------------------------
    class CameraView extends SurfaceView implements SurfaceHolder.Callback, PreviewCallback {

        private SurfaceHolder mHolder;
        private Camera mCamera;

        public CameraView(Context context, Camera camera) {
            super(context);
            Log.w(""camera"",""camera view"");
            mCamera = camera;
            mHolder = getHolder();
            mHolder.addCallback(CameraView.this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            mCamera.setPreviewCallback(CameraView.this);
        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            try {
                stopPreview();
                mCamera.setPreviewDisplay(holder);
            } catch (IOException exception) {
                mCamera.release();
                mCamera = null;
            }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            Log.v(LOG_TAG,""Setting imageWidth: "" + imageWidth + "" imageHeight: "" + imageHeight + "" frameRate: "" + frameRate);
            Camera.Parameters camParams = mCamera.getParameters();
            camParams.setPreviewSize(imageWidth, imageHeight);

            Log.v(LOG_TAG,""Preview Framerate: "" + camParams.getPreviewFrameRate());

            camParams.setPreviewFrameRate(frameRate);
            mCamera.setParameters(camParams);
            startPreview();
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            try {
                mHolder.addCallback(null);
                mCamera.setPreviewCallback(null);
            } catch (RuntimeException e) {
                // The camera has probably just been released, ignore.
            }
        }

        public void startPreview() {
            if (!isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = true;
                mCamera.startPreview();
            }
        }

        public void stopPreview() {
            if (isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = false;
                mCamera.stopPreview();
            }
        }

        @Override
        public void onPreviewFrame(byte[] data, Camera camera) {
            if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
                startTime = System.currentTimeMillis();
                return;
            }
            if (RECORD_LENGTH &gt; 0) {
                int i = imagesIndex++ % images.length;
                yuvIplimage = images[i];
                timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);
            }
            /* get video data */
            if (yuvIplimage != null &amp;&amp; recording) {
                yuvIplimage.getByteBuffer().put(data);

                if (RECORD_LENGTH &lt;= 0) try {
                    Log.v(LOG_TAG,""Writing Frame"");
                    long t = 1000 * (System.currentTimeMillis() - startTime);
                    if (t &gt; recorder.getTimestamp()) {
                        recorder.setTimestamp(t);
                    }
                    recorder.record(yuvIplimage);
                } catch (FFmpegFrameRecorder.Exception e) {
                    Log.v(LOG_TAG,e.getMessage());
                    e.printStackTrace();
                }
            }
        }
    }

    @Override
    public void onClick(View v) {
        if (!recording) {
            startRecording();
            Log.w(LOG_TAG, ""Start Button Pushed"");
            btnRecorderControl.setText(""Stop"");
        } else {
            // This will trigger the audio recording loop to stop and then set isRecorderStart = false;
            stopRecording();
            Log.w(LOG_TAG, ""Stop Button Pushed"");
            btnRecorderControl.setText(""Start"");
        }
    }
}
</code></pre>

<p>I am getting this error </p>

<p>The type org.bytedeco.javacpp.avutil$AVFrame cannot be resolved. It is indirectly referenced from required .class files</p>

<p>at following line in the above code </p>

<pre><code>if (RECORD_LENGTH &lt;= 0) try {
    recorder.record(audioData);
    //Log.v(LOG_TAG,""recording "" + 1024*i + "" to "" + 1024*i+1024);
 }
</code></pre>

<p>at recorder.record(audioData). I don't know what I am doing wrong here. New to JavaCV. Any help will be appreciated.</p>
",2015-01-27 11:29:50,2016-06-23 20:23:20,Video Recording on Android from Frames using javaCV,<java><android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
26799,28173970,2015-01-27 15:25:21,,"<p>I am a student currently working on my final project. Our project is focusing on new type network coding research. Now my task is to do a real-time video transmission to test the network coding. I have learned something of ffmepg and opencv and have finished a c++ program which can divide the video into frames and send it frame by frame. However, by this way, the transmission data (the frames)size are quite much more than the original video file size. My prof advise me try to find the keyframe and inter frame diff of the video (mjpeg format), so that transmit the keyframe and interframe diff only instead of all the frames with large amount of redundancy, and therefore reduce the transmission data. I have no idea in how to do this in c++ and ffmpeg or opencv. Can any one give any advice?
For my old program, please refer to here. <a href=""https://stackoverflow.com/questions/27836059/c-video-streaming-and-transimisson"">C++ Video streaming and transimisson</a></p>
",2017-05-23 12:20:35,2015-01-27 19:30:29,C++ ffmpeg real-time video transmisson,<c++><opencv><ffmpeg><video-streaming><real-time>,,,CC BY-SA 3.0,True,False,False,False,True
26814,26987698,2014-11-18 06:05:27,,"<p>I have some JavaCV code that works on windows and I'm trying to get it to work on Ubuntu.  All of the image processing is working fine, but I can't get any video to work.</p>

<p>When I call cvCreateFileCapture on Ubuntu it always returns null.  I can verify the file is present (java.io.File.exists returns true on the line before), so I assume this is a codec problem.</p>

<p>However, I have tried using video files with MPEG-2, H.264, AVI, and basic mjpeg encodings and get the same result for all of them.  The same code works fine on my windows machine.</p>

<p>My question is what are the next debugging steps to figure out my problem.  Randomly trying further codecs doesn't seem productive.  Is there some way to figure out which codecs are available and why they are not getting selected?</p>

<p>It is picking up the opencv libraries by having opencv-linux-x86_64.jar and ffmpeg-linux-x86_64.jar in the path.</p>
",2014-11-18 12:53:29,2014-11-18 12:53:29,How to debug JavaCV cvCreatefileCapture on Ubuntu 13.03,<javacv>,,,CC BY-SA 3.0,True,False,False,False,True
26878,28288630,2015-02-02 23:15:23,,"<p>I'm using the Enthought distribution (Canopy) to do some data analysis and computer vision in the IPython notebook. I want to read the frames of several .avi files that use the h.264 codec and make some annotations on those images. </p>

<p>if you're using the Canopy distribution, you know that you can install opencv through the package manager (just launch the Canopy application, click on package manager, search for opencv and install the package). The issue though is that the following code</p>

<pre><code>import cv2
f = ""/Volumes/DATA/temp.avi""
cap = cv2.VideoCapture(f)

flag,frame = cap.read()

print flag,frame
</code></pre>

<p>always returns (None,None) because opencv can't read the video. So it seems like ffmpeg is not enabled by default in the Enthought package manager. </p>

<p>I've been losing a lot of time on this problem, so I'll post the solution below. Hopefully it will help some other folks out there!</p>
",,2015-02-02 23:15:23,Read h.264 video frames with opencv in python Enthough (mac Yosemite),<macos><opencv><ffmpeg><h.264><enthought>,,,CC BY-SA 3.0,True,False,False,False,True
27005,28297973,2015-02-03 11:38:51,,"<p>I'm using this script.py:</p>

<pre><code>import cv2,numpy as np

face_cascade = cv2.CascadeClassifier('haarcascade_frontalface_default1.xml')

cap = cv2.VideoCapture('video.flv')
ret,frame = cap.read()
print ret

while (cap.isOpened()):

    ret,frame = cap.read()

    img = frame

    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    faces = face_cascade.detectMultiScale(gray, 1.5, 5)
    for (x,y,w,h) in faces:
    cv2.rectangle(img,(x,y),(x+w,y+h),(255,0,0),2)

    cv2.imshow('video',img)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break

cv2.destroyAllWindows()
</code></pre>

<p>I have added ffmpeg to the path with the bat script:</p>

<pre><code>set PATH=%PATH%;C:\opencv\sources\3rdparty\ffmpeg
</code></pre>

<p>I have tried to change the file format to .avi, .flv, .mp4 but it still doesn't work.</p>

<p>I don't have any error, but 'ret = False' everytime.</p>
",2015-02-03 12:48:53,2015-02-03 14:55:17,OpenCV VideoCapture(FILE) don't work WINDOWS,<python><opencv><video-capture>,,,CC BY-SA 3.0,True,False,False,False,True
27063,28358636,2015-02-06 04:33:51,,"<p>I get the following exception at runtime when i compile my project width static javacv.jar, opencv.jar, ffmpeg.jar and javacpp.jar files for javacv. </p>

<blockquote>
  <p>02-05 23:23:56.513    8280-8280/com.teralogics.uvlens
  E/AndroidRuntime﹕ FATAL EXCEPTION: main
      Process: com.teralogics.uvlens, PID: 8280
      java.lang.NoClassDefFoundError: java.lang.ClassNotFoundException: org.bytedeco.javacpp.opencv_core
              at org.bytedeco.javacpp.Loader.load(Loader.java:387)
              at org.bytedeco.javacpp.Loader.load(Loader.java:353)
              at org.bytedeco.javacpp.helper.opencv_core$AbstractArray.(opencv_core.java:126)</p>
</blockquote>

<p>However, when I follow the following gradle config suggestion, it runs fine:</p>

<blockquote>
  <p>compile group: 'org.bytedeco', name: 'javacv', version: '0.10'
      compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '2.4.10-0.10', classifier: 'android-arm'
      compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.5.1-0.10', classifier: 'android-arm'</p>
</blockquote>

<p>So what gives? How come javacpp.Loader.load cannot find javacpp.opencv_core class definition? Do I need to include something else? I also tried specifying various combinations of file dependencies within Android Studio's project structure but that didn't help.</p>
",,2015-02-09 22:43:32,Android JavaCV JAR inclusion issue with OpenCV_Core,<android><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
27067,28319376,2015-02-04 10:45:37,,"<p>I have tried almost all the blogs pertaining to the installation of OpenCv but I can't perform the make step.</p>

<p>I am getting the following problem </p>

<pre><code>Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o
In file included from /home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:65:0,
                 from /home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg.cpp:45:
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:98:7: error: ‘CODEC_ID_H264’ was not declared in this scope
     { CODEC_ID_H264, MKTAG('H', '2', '6', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:99:7: error: ‘CODEC_ID_H264’ was not declared in this scope
     { CODEC_ID_H264, MKTAG('h', '2', '6', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:100:7: error: ‘CODEC_ID_H264’ was not declared in this scope
     { CODEC_ID_H264, MKTAG('X', '2', '6', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:101:7: error: ‘CODEC_ID_H264’ was not declared in this scope
     { CODEC_ID_H264, MKTAG('x', '2', '6', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:102:7: error: ‘CODEC_ID_H264’ was not declared in this scope
     { CODEC_ID_H264, MKTAG('a', 'v', 'c', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:103:7: error: ‘CODEC_ID_H264’ was not declared in this scope
     { CODEC_ID_H264, MKTAG('V', 'S', 'S', 'H') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:105:7: error: ‘CODEC_ID_H263’ was not declared in this scope
     { CODEC_ID_H263, MKTAG('H', '2', '6', '3') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:106:7: error: ‘CODEC_ID_H263P’ was not declared in this scope
     { CODEC_ID_H263P, MKTAG('H', '2', '6', '3') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:107:7: error: ‘CODEC_ID_H263I’ was not declared in this scope
     { CODEC_ID_H263I, MKTAG('I', '2', '6', '3') }, /* intel h263 */
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:108:7: error: ‘CODEC_ID_H261’ was not declared in this scope
     { CODEC_ID_H261, MKTAG('H', '2', '6', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:111:7: error: ‘CODEC_ID_H263P’ was not declared in this scope
     { CODEC_ID_H263P, MKTAG('U', '2', '6', '3') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:112:7: error: ‘CODEC_ID_H263P’ was not declared in this scope
     { CODEC_ID_H263P, MKTAG('v', 'i', 'v', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:114:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('F', 'M', 'P', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:115:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('D', 'I', 'V', 'X') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:116:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('D', 'X', '5', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:117:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('X', 'V', 'I', 'D') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:118:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('M', 'P', '4', 'S') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:119:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('M', '4', 'S', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:120:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG(0x04, 0, 0, 0) }, /* some broken avi use this */
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:123:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('D', 'I', 'V', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:124:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('B', 'L', 'Z', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:125:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('m', 'p', '4', 'v') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:126:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('U', 'M', 'P', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:127:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('W', 'V', '1', 'F') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:128:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('S', 'E', 'D', 'G') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:130:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('R', 'M', 'P', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:132:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '3') }, /* default signature when using MSMPEG4 */
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:133:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('M', 'P', '4', '3') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:136:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('M', 'P', 'G', '3') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:137:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '5') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:138:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '6') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:139:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:140:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('A', 'P', '4', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:141:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('C', 'O', 'L', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:142:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('C', 'O', 'L', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:144:7: error: ‘CODEC_ID_MSMPEG4V2’ was not declared in this scope
     { CODEC_ID_MSMPEG4V2, MKTAG('M', 'P', '4', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:147:7: error: ‘CODEC_ID_MSMPEG4V2’ was not declared in this scope
     { CODEC_ID_MSMPEG4V2, MKTAG('D', 'I', 'V', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:149:7: error: ‘CODEC_ID_MSMPEG4V1’ was not declared in this scope
     { CODEC_ID_MSMPEG4V1, MKTAG('M', 'P', 'G', '4') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:151:7: error: ‘CODEC_ID_WMV1’ was not declared in this scope
     { CODEC_ID_WMV1, MKTAG('W', 'M', 'V', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:154:7: error: ‘CODEC_ID_WMV2’ was not declared in this scope
     { CODEC_ID_WMV2, MKTAG('W', 'M', 'V', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:155:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', 's', 'd') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:156:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', 'h', 'd') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:157:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', 's', 'l') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:158:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', '2', '5') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:159:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('m', 'p', 'g', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:160:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('m', 'p', 'g', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:161:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('m', 'p', 'g', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:162:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('M', 'P', 'E', 'G') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:163:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('P', 'I', 'M', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:164:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('V', 'C', 'R', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:165:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, 0x10000001 },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:166:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, 0x10000002 },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:167:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('D', 'V', 'R', ' ') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:168:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('M', 'M', 'E', 'S') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:169:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('M', 'J', 'P', 'G') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:170:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('L', 'J', 'P', 'G') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:171:7: error: ‘CODEC_ID_LJPEG’ was not declared in this scope
     { CODEC_ID_LJPEG, MKTAG('L', 'J', 'P', 'G') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:172:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('J', 'P', 'G', 'L') }, /* Pegasus lossless JPEG */
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:173:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('M', 'J', 'L', 'S') }, /* JPEG-LS custom FOURCC for avi - decoder */
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:174:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('j', 'p', 'e', 'g') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:175:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('I', 'J', 'P', 'G') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:176:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('A', 'V', 'R', 'n') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:177:7: error: ‘CODEC_ID_HUFFYUV’ was not declared in this scope
     { CODEC_ID_HUFFYUV, MKTAG('H', 'F', 'Y', 'U') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:178:7: error: ‘CODEC_ID_FFVHUFF’ was not declared in this scope
     { CODEC_ID_FFVHUFF, MKTAG('F', 'F', 'V', 'H') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:179:7: error: ‘CODEC_ID_CYUV’ was not declared in this scope
     { CODEC_ID_CYUV, MKTAG('C', 'Y', 'U', 'V') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:180:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, 0 },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:181:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('I', '4', '2', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:182:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', 'U', 'Y', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:183:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', '4', '2', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:184:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', 'V', '1', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:185:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('U', 'Y', 'V', 'Y') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:186:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('I', 'Y', 'U', 'V') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:187:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', '8', '0', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:188:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('H', 'D', 'Y', 'C') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:189:7: error: ‘CODEC_ID_INDEO3’ was not declared in this scope
     { CODEC_ID_INDEO3, MKTAG('I', 'V', '3', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:190:7: error: ‘CODEC_ID_INDEO3’ was not declared in this scope
     { CODEC_ID_INDEO3, MKTAG('I', 'V', '3', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:191:7: error: ‘CODEC_ID_VP3’ was not declared in this scope
     { CODEC_ID_VP3, MKTAG('V', 'P', '3', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:192:7: error: ‘CODEC_ID_VP3’ was not declared in this scope
     { CODEC_ID_VP3, MKTAG('V', 'P', '3', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:193:7: error: ‘CODEC_ID_ASV1’ was not declared in this scope
     { CODEC_ID_ASV1, MKTAG('A', 'S', 'V', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:194:7: error: ‘CODEC_ID_ASV2’ was not declared in this scope
     { CODEC_ID_ASV2, MKTAG('A', 'S', 'V', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:195:7: error: ‘CODEC_ID_VCR1’ was not declared in this scope
     { CODEC_ID_VCR1, MKTAG('V', 'C', 'R', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:196:7: error: ‘CODEC_ID_FFV1’ was not declared in this scope
     { CODEC_ID_FFV1, MKTAG('F', 'F', 'V', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:197:7: error: ‘CODEC_ID_XAN_WC4’ was not declared in this scope
     { CODEC_ID_XAN_WC4, MKTAG('X', 'x', 'a', 'n') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:198:7: error: ‘CODEC_ID_MSRLE’ was not declared in this scope
     { CODEC_ID_MSRLE, MKTAG('m', 'r', 'l', 'e') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:199:7: error: ‘CODEC_ID_MSRLE’ was not declared in this scope
     { CODEC_ID_MSRLE, MKTAG(0x1, 0x0, 0x0, 0x0) },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:200:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('M', 'S', 'V', 'C') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:201:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('m', 's', 'v', 'c') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:202:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('C', 'R', 'A', 'M') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:203:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('c', 'r', 'a', 'm') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:204:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('W', 'H', 'A', 'M') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:205:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('w', 'h', 'a', 'm') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:206:7: error: ‘CODEC_ID_CINEPAK’ was not declared in this scope
     { CODEC_ID_CINEPAK, MKTAG('c', 'v', 'i', 'd') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:207:7: error: ‘CODEC_ID_TRUEMOTION1’ was not declared in this scope
     { CODEC_ID_TRUEMOTION1, MKTAG('D', 'U', 'C', 'K') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:208:7: error: ‘CODEC_ID_MSZH’ was not declared in this scope
     { CODEC_ID_MSZH, MKTAG('M', 'S', 'Z', 'H') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:209:7: error: ‘CODEC_ID_ZLIB’ was not declared in this scope
     { CODEC_ID_ZLIB, MKTAG('Z', 'L', 'I', 'B') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:210:7: error: ‘CODEC_ID_SNOW’ was not declared in this scope
     { CODEC_ID_SNOW, MKTAG('S', 'N', 'O', 'W') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:211:7: error: ‘CODEC_ID_4XM’ was not declared in this scope
     { CODEC_ID_4XM, MKTAG('4', 'X', 'M', 'V') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:212:7: error: ‘CODEC_ID_FLV1’ was not declared in this scope
     { CODEC_ID_FLV1, MKTAG('F', 'L', 'V', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:213:7: error: ‘CODEC_ID_SVQ1’ was not declared in this scope
     { CODEC_ID_SVQ1, MKTAG('s', 'v', 'q', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:214:7: error: ‘CODEC_ID_TSCC’ was not declared in this scope
     { CODEC_ID_TSCC, MKTAG('t', 's', 'c', 'c') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:215:7: error: ‘CODEC_ID_ULTI’ was not declared in this scope
     { CODEC_ID_ULTI, MKTAG('U', 'L', 'T', 'I') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:216:7: error: ‘CODEC_ID_VIXL’ was not declared in this scope
     { CODEC_ID_VIXL, MKTAG('V', 'I', 'X', 'L') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:217:7: error: ‘CODEC_ID_QPEG’ was not declared in this scope
     { CODEC_ID_QPEG, MKTAG('Q', 'P', 'E', 'G') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:218:7: error: ‘CODEC_ID_QPEG’ was not declared in this scope
     { CODEC_ID_QPEG, MKTAG('Q', '1', '.', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:219:7: error: ‘CODEC_ID_QPEG’ was not declared in this scope
     { CODEC_ID_QPEG, MKTAG('Q', '1', '.', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:220:7: error: ‘CODEC_ID_WMV3’ was not declared in this scope
     { CODEC_ID_WMV3, MKTAG('W', 'M', 'V', '3') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:221:7: error: ‘CODEC_ID_LOCO’ was not declared in this scope
     { CODEC_ID_LOCO, MKTAG('L', 'O', 'C', 'O') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:222:7: error: ‘CODEC_ID_THEORA’ was not declared in this scope
     { CODEC_ID_THEORA, MKTAG('t', 'h', 'e', 'o') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:224:7: error: ‘CODEC_ID_WNV1’ was not declared in this scope
     { CODEC_ID_WNV1, MKTAG('W', 'N', 'V', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:225:7: error: ‘CODEC_ID_AASC’ was not declared in this scope
     { CODEC_ID_AASC, MKTAG('A', 'A', 'S', 'C') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:226:7: error: ‘CODEC_ID_INDEO2’ was not declared in this scope
     { CODEC_ID_INDEO2, MKTAG('R', 'T', '2', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:227:7: error: ‘CODEC_ID_FRAPS’ was not declared in this scope
     { CODEC_ID_FRAPS, MKTAG('F', 'P', 'S', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:228:7: error: ‘CODEC_ID_TRUEMOTION2’ was not declared in this scope
     { CODEC_ID_TRUEMOTION2, MKTAG('T', 'M', '2', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:231:7: error: ‘CODEC_ID_FLASHSV’ was not declared in this scope
     { CODEC_ID_FLASHSV, MKTAG('F', 'S', 'V', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:232:7: error: ‘CODEC_ID_JPEGLS’ was not declared in this scope
     { CODEC_ID_JPEGLS,MKTAG('M', 'J', 'L', 'S') }, /* JPEG-LS custom FOURCC for avi - encoder */
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:233:7: error: ‘CODEC_ID_VC1’ was not declared in this scope
     { CODEC_ID_VC1, MKTAG('W', 'V', 'C', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:234:7: error: ‘CODEC_ID_VC1’ was not declared in this scope
     { CODEC_ID_VC1, MKTAG('W', 'M', 'V', 'A') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:235:7: error: ‘CODEC_ID_CSCD’ was not declared in this scope
     { CODEC_ID_CSCD, MKTAG('C', 'S', 'C', 'D') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:236:7: error: ‘CODEC_ID_ZMBV’ was not declared in this scope
     { CODEC_ID_ZMBV, MKTAG('Z', 'M', 'B', 'V') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:237:7: error: ‘CODEC_ID_KMVC’ was not declared in this scope
     { CODEC_ID_KMVC, MKTAG('K', 'M', 'V', 'C') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:240:7: error: ‘CODEC_ID_VP5’ was not declared in this scope
     { CODEC_ID_VP5, MKTAG('V', 'P', '5', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:241:7: error: ‘CODEC_ID_VP6’ was not declared in this scope
     { CODEC_ID_VP6, MKTAG('V', 'P', '6', '0') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:242:7: error: ‘CODEC_ID_VP6’ was not declared in this scope
     { CODEC_ID_VP6, MKTAG('V', 'P', '6', '1') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:243:7: error: ‘CODEC_ID_VP6’ was not declared in this scope
     { CODEC_ID_VP6, MKTAG('V', 'P', '6', '2') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:244:7: error: ‘CODEC_ID_VP6F’ was not declared in this scope
     { CODEC_ID_VP6F, MKTAG('V', 'P', '6', 'F') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:245:7: error: ‘CODEC_ID_JPEG2000’ was not declared in this scope
     { CODEC_ID_JPEG2000, MKTAG('M', 'J', '2', 'C') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:246:7: error: ‘CODEC_ID_VMNC’ was not declared in this scope
     { CODEC_ID_VMNC, MKTAG('V', 'M', 'n', 'c') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:250:7: error: ‘CODEC_ID_TARGA’ was not declared in this scope
     { CODEC_ID_TARGA, MKTAG('t', 'g', 'a', ' ') },
       ^
/home/aman/opencv/opencv/modules/videoio/src/ffmpeg_codecs.hpp:252:7: error: ‘CODEC_ID_NONE’ was not declared in this scope
     { CODEC_ID_NONE, 0 },
       ^
In file included from /home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg.cpp:45:0:
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp: In member function ‘double CvCapture_FFMPEG::getProperty(int) const’:
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:784:33: error: ‘AVStream’ has no member named ‘r_frame_rate’
         return av_q2d(video_st-&gt;r_frame_rate);
                                 ^
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp: In member function ‘double CvCapture_FFMPEG::get_fps() const’:
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:831:49: error: ‘AVStream’ has no member named ‘r_frame_rate’
     double fps = r2d(ic-&gt;streams[video_stream]-&gt;r_frame_rate);
                                                 ^
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp: In function ‘AVStream* icv_add_video_stream_FFMPEG(AVFormatContext*, AVCodecID, int, int, int, double, int)’:
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:1220:24: error: ‘CODEC_ID_H264’ was not declared in this scope
     if (c-&gt;codec_id == CODEC_ID_H264) {
                        ^
In file included from /home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg.cpp:45:0:
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp: In function ‘int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)’:
/home/aman/opencv/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:1269:72: error: ‘avcodec_encode_video’ was not declared in this scope
         out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
                                                                        ^
modules/videoio/CMakeFiles/opencv_videoio.dir/build.make:169: recipe for target 'modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o' failed
make[2]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o] Error 1
CMakeFiles/Makefile2:2452: recipe for target 'modules/videoio/CMakeFiles/opencv_videoio.dir/all' failed
make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2
Makefile:133: recipe for target 'all' failed
make: *** [all] Error 2
</code></pre>

<p>When installing the dependencies it was saying that <code>libtiff4-dev</code> can't be found so I followed the suggestion as it said to install <code>libtiff5-dev</code></p>

<p>And similar was the problem with some other dependency <code>libxine-dev</code>
so I installed the given alternative <code>libxine2-dev</code>.</p>

<p>How can I solve this?</p>
",2015-05-06 21:38:26,2015-12-22 11:13:48,Installing Opencv in ubuntu 14.10,<opencv><ubuntu>,,,CC BY-SA 3.0,True,False,False,False,True
27095,28342284,2015-02-05 11:03:19,,"<p>I am trying to install OpenCV in Xubuntu 4.10. I have tried every possible ways I could find on the web. I have updated my ubuntu and installed all dependencies specified in <a href=""https://help.ubuntu.com/community/OpenCV"" rel=""nofollow"">official</a> documentation. But I keep getting this error message while executing <code>make</code> command.</p>

<p><code>/home/bipin/Desktop/opencv/opencv-2.4.10/modules/core/src/system.cpp: In function ‘(static initializers for /home/bipin/Desktop/opencv/opencv-2.4.10/modules/core/src/system.cpp)’:
/home/bipin/Desktop/opencv/opencv-2.4.10/modules/core/src/system.cpp:280:10: error: inconsistent operand constraints in an ‘asm’
         );
          ^
make[2]: *** [modules/core/CMakeFiles/opencv_core.dir/src/system.cpp.o] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_core.dir/all] Error 2
make: *** [all] Error 2
</code></p>

<p>Here `-- General configuration for OpenCV 2.4.10 </p>

<pre><code>=====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.13.0-45-generic i686
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.2)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib java python stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda viz
-- 
--   GUI: 
--     QT 5.x:                      YES (ver 5.2.1)
--     QT OpenGL support:           YES (Qt5::OpenGL 5.2.1)
--     OpenGL support:              YES (/usr/lib/i386-linux-gnu/libGLU.so /usr/lib/i386-linux-gnu/libGL.so /usr/lib/i386-linux-gnu/libSM.so /usr/lib/i386-linux-gnu/libICE.so /usr/lib/i386-linux-gnu/libX11.so /usr/lib/i386-linux-gnu/libXext.so)
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/i386-linux-gnu/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/i386-linux-gnu/libjpeg.so (ver )
--     PNG:                         /usr/lib/i386-linux-gnu/libpng.so (ver 1.2.50)
--     TIFF:                        /usr/lib/i386-linux-gnu/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/i386-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/i386-linux-gnu/libImath.so /usr/lib/i386-linux-gnu/libIlmImf.so /usr/lib/i386-linux-gnu/libIex.so /usr/lib/i386-linux-gnu/libHalf.so /usr/lib/i386-linux-gnu/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.35.0)
--       format:                    YES (ver 54.20.4)
--       util:                      YES (ver 52.3.0)
--       swscale:                   YES (ver 2.1.1)
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)
--       video:                     YES (ver 0.10.36)
--       app:                       YES (ver 0.10.36)
--       riff:                      YES (ver 0.10.36)
--       pbutils:                   YES (ver 0.10.36)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l1 (ver 1.0.1) / libv4l2 (ver 1.0.1)
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   YES (ver 3.2.0)
--     Use TBB:                     YES (ver 4.2 interface 7000)
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/bipin/Desktop/opencv/opencv-2.4.10/3rdparty/include/opencl/1.2
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python2 (ver 2.7.6)
--     Libraries:                   /usr/lib/i386-linux-gnu/libpython2.7.so (ver 2.7.6)
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.8.2)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Java:
--     ant:                         /usr/bin/ant (ver 1.9.3)
--     JNI:                         /usr/local/java/jdk1.7.0_25/include /usr/local/java/jdk1.7.0_25/include/linux /usr/local/java/jdk1.7.0_25/include
--     Java tests:                  YES
-- 
--   Documentation:
--     Build Documentation:         YES
--     Sphinx:                      /usr/local/bin/sphinx-build (ver 1.2.1)
--     PdfLaTeX compiler:           /usr/bin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/bipin/Desktop/opencv/opencv-2.4.10/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/bipin/Desktop/opencv/opencv-2.4.10/build
`
</code></pre>
",2015-02-05 11:11:39,2016-11-30 12:22:40,OpenCV installation in Ubuntu,<opencv>,,,CC BY-SA 3.0,True,False,False,False,True
27099,27010656,2014-11-19 06:48:00,,"<p>Given a video like:
<a href=""https://www.youtube.com/watch?v=cNHeiIM5xZI"" rel=""nofollow"">https://www.youtube.com/watch?v=cNHeiIM5xZI</a></p>

<p>Is there any library or tool that supports extraction of subtitle?</p>

<p>Extraction of subtitle in sequence would be sufficient, it would be plus if it can extracts the timestamp as well.</p>
",,2014-11-19 07:11:29,Extracting chinese subtitle from video,<image-processing><ffmpeg><video-processing><subtitle><pyffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
27272,28409965,2015-02-09 12:35:15,,"<p>Days ago I installed the latest 2.4 branch withou ffmpeg. I'm using Ubuntu 14.04 and I don't have at all ffmpeg in my Virtual Machine.</p>

<p>I want to write .mp4 video files and the input files are also .mp4. The input codec is avc1.</p>

<p>I can't obtain any results, the errors can be seen below.</p>

<p><strong>Error</strong></p>

<pre><code>[libx264 @ 0x9357bc0] broken ffmpeg default settings detected
[libx264 @ 0x9357bc0] use an encoding preset (e.g. -vpre medium)
[libx264 @ 0x9357bc0] preset usage: -vpre &lt;speed&gt; -vpre &lt;profile&gt;
[libx264 @ 0x9357bc0] speed presets are listed in x264 --help
[libx264 @ 0x9357bc0] profile is optional; x264 defaults to high
Could not open codec 'libx264': Unspecified error
Could not open the output video for write: /home/margarida/exams_2014/Output.mp4
</code></pre>

<p><strong>Simplified Code</strong></p>

<pre><code>int main(int argc, char *argv[]) {
            VideoWriter outputVideo;

            // Get Codec Type
            int ex = static_cast&lt;int&gt;(cap.get(CV_CAP_PROP_FOURCC));

            // Transform from int to char via Bitwise operators
            char EXT[] = { (char) (ex &amp; 0XFF), (char) ((ex &amp; 0XFF00) &gt;&gt; 8),
                            (char) ((ex &amp; 0XFF0000) &gt;&gt; 16), (char) ((ex &amp; 0XFF000000)
                                    &gt;&gt; 24), 0 };

            // Acquire input size
            Size S = Size((int) cap.get(CV_CAP_PROP_FRAME_WIDTH),
                            (int) cap.get(CV_CAP_PROP_FRAME_HEIGHT));

            cout &lt;&lt; ""Input codec type: "" &lt;&lt; EXT &lt;&lt; endl;

            // Open the output
            outputVideo.open(newname, ex, cap.get(CV_CAP_PROP_FPS), S, true);

            if (!outputVideo.isOpened()) {
                cout &lt;&lt; ""Could not open the output video for write "" &lt;&lt; endl;
                        return -1;
                    }

                    while (true) {
                        cap &gt;&gt; frame;
                        if (frame.empty()) {
                            cerr &lt;&lt; ""nao apanhou frame"" &lt;&lt; endl;
                            break;
                        }

                        cinzento = acinzentar(frame);
                        imshow(""Cinzento"", cinzento);

                        outputVideo.write(cinzento);

                        switch(waitKey(10)){

                        case 27:
                            //'esc' has been pressed (ASCII value for 'esc' is 27)
                            //exit program.
                            return 0;

                        }
                    }
                   return 0;
                }
</code></pre>

<p><strong>My cmake was this:</strong></p>

<pre><code>cmake -D WITH_TBB=ON -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON -D WITH_VTK=ON -D WITH_FFMPEG=OFF -D WITH_IPP=OFF ..
</code></pre>

<p>Can anyone help solving my problem?</p>

<p>Thanks in advance.</p>
",,2015-02-17 13:38:40,Can't write .mp4 files - Could not open codec 'libx264': Unspecified error,<opencv><video><mp4><ubuntu-14.04><libx264>,,,CC BY-SA 3.0,True,False,False,False,True
27343,25912928,2014-09-18 12:42:42,,"<p>I am trying to install opencv2.4.9 on CentOS6 that I need to use in Java. After the entire trouble of finding all the dependent packages, I finally managed to get a positive result of cmake, saying: ""configuring done, generating done"". However, when I try to proceed with the make command, I get the following message: ""make: <em>*</em> No targets specified and no makefile found.  Stop.""</p>

<p>The cmake command I use is:</p>

<pre><code>cmake -DBUILD_SHARED_LIBS=OFF -D BUILD_NEW_PYTHON_SUPPORT=NO ..
</code></pre>

<p>and the beginning of the output of it is:</p>

<pre><code>-- Detected version of GNU GCC: 44 (404)
-- Could NOT find TIFF (missing:  TIFF_LIBRARY TIFF_INCLUDE_DIR)
-- Could NOT find JPEG (missing:  JPEG_LIBRARY JPEG_INCLUDE_DIR)
-- Could NOT find Jasper (missing:  JASPER_LIBRARIES JASPER_INCLUDE_DIR)
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'libdc1394-2'
--   found libdc1394-2, version 2.1.2
-- checking for module 'libv4l1'
--   package 'libv4l1' not found
</code></pre>

<p>and it continues, so, at the very end, the output is:</p>

<pre><code>--     Disabled:                    python world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda viz
--
--   GUI:
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.20.1)
--     GThread :                    YES (ver 2.26.1)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
--
--   Media I/O:
--     ZLib:                        /usr/lib64/libz.so (ver 1.2.3)
--     JPEG:                        libjpeg (ver 62)
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.49)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.1.2)
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    YES/YES
--     XIMEA:                       NO
--     Xine:                        NO
--
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
--
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /root/opencv-2.4.9/3rdparty/include/opencl/1.2                                           
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
--
--   Python:
--     Interpreter:                 /usr/local/python-2.6.6/bin/python (ver 1.4)
--
--   Java:
--     ant:                         /usr/bin/ant (ver 1.7.1)
--     JNI:                         /usr/lib/jvm/java-1.7.0-openjdk.x86_64/include           /usr/lib/jvm/java-1.7.0-openjdk.x86_64/include/linux /usr/lib/jvm/java-1.7.0-openjdk.x86_64/include                                                                                   
--     Java tests:                  YES
--
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
--
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
--
--   Install path:                  /usr/local
--
--   cvconfig.h is in:              /root/opencv-2.4.9
-- -----------------------------------------------------------------
--
CMake Warning at CMakeLists.txt:1054 (message):
The source directory is the same as binary directory.  ""make clean"" may
damage the source tree


-- Configuring done
-- Generating done
-- Build files have been written to: /root/opencv-2.4.9
</code></pre>

<p>I run cmake in a build folder which I create in the opencv-2.4.9 folder. After cmake, I try to run make, but it gives me the above-mentioned error. I don't know how to continue because I don't know where I am making an error. Some hints will be appreciated.</p>
",,2014-09-18 16:07:26,OpenCV on CentOS6 with Java installation problems,<java><opencv><centos6>,,,CC BY-SA 3.0,True,False,False,False,True
27376,28525492,2015-02-15 11:17:11,,"<p>I'm trying to get frames from an IP camera. I can get frames with FFMPEG or GStreamer from my Ubuntu 14.04 PC and <code>omxplayer</code> or <code>gst-launch-1.0</code> from Raspberry Pi. But when I want to access camera with c++ OpenCV from Raspberry Pi, it is giving me an error about GStreamer pipeline;</p>

<pre><code>(ocvip:2870): GStreamer-WARNING **: Failed to load plugin '/usr/local/lib/gstreamer-1.0/libgstrtsp.so': /usr/local/lib/gstreamer-1.0/libgstrtsp.so: undefined symbol: gst_rtsp_connection_set_tls_validation_flags
GStreamer Plugin: Embedded video playback halted; module u-uridecodebin, reported: URI was not accepted by any element
OpenCV Error: Unspecified error (GStreamer: unable to start pipeline) in icvStartPipeline, file /opt/opencv-2.4.10/modules/highgui/src/cap_gstreamer.cpp, line 383
what(): /opt/opencv-2.4.10/modules/highgui/src/cap_gstreamer.cpp:383: error: (-2) GStreamer unable to start pipeline in function icvStartPipeline

Aborted
</code></pre>

<p>code:</p>

<pre><code>const string videoAddress = ""rtsp://user:password@xxx.xxx.x.xxx:xxx/cam/realmonitor?channel=1&amp;subtype=1"";
int main() {
  cv::VideoCapture video;
  cv::Mat im;
  cv::namedWindow(""IP"", 1);
  video.open(videoAddress);
  if (video.isOpened()) {
    video &gt;&gt; im;
    if (!im.data) break;
    cv::imshow(""IP"", im);
    if (cv::waitKey(20) &gt;= 0) break;
  }
}
</code></pre>

<p>I can access camera with same rtsp address, omxplayer is showing normal gst-launch is showing frames rotated by 180 degrees. I've built GStreamer-1.0 using <a href=""http://www.onepitwopi.com/raspberry-pi/gstreamer-1-2-on-the-raspberry-pi/"" rel=""nofollow"">this page</a> because prebuilt libraries hasn't found by cmake. I found <a href=""http://code.opencv.org/issues/3953"" rel=""nofollow"">this issue</a>. There are two fixes int this bug but I'm not sure are these the correct solutions and solve my problem because I'm not accessing camera with <code>video.open(0)</code> so I couldn't do like <code>video.open(IPAddress + CV_CAP_PVAPI)</code>?</p>

<p>Thanks.</p>
",2015-02-15 21:52:36,2015-02-15 21:52:36,"Access an IP camera with Raspberry Pi2, OpenCV and GStreamer: Gstremaer unable to start pipeline",<c++><opencv><gstreamer><ip-camera><raspberry-pi2>,,,CC BY-SA 3.0,True,True,False,False,True
27391,28494648,2015-02-13 07:37:31,,"<p>I'm using latest version of <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow"">JavaCV</a> to compress video and get mp4 file as per my requirement by using following piece of code.</p>

<pre><code>    File inputFile = new File(UTILS.getAppDirPath(),actual_input_file.getName());
    File outputFile = new File(UTILS.getAppDirPath(),""comp_""+actual_file_name+"".mp4"");

    FrameGrabber grabber = new FFmpegFrameGrabber(inputFile); 

    grabber.start(); 

    FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(outputFile, 
            grabber.getImageWidth(), grabber.getImageHeight(), 
            grabber.getAudioChannels()); 
    recorder.setFrameRate(grabber.getFrameRate()); 
    recorder.setSampleRate(grabber.getSampleRate()); 
    recorder.setFormat(""mp4"");
    if(grabber.getVideoBitrate()&gt;bitrate)
    {
        recorder.setVideoBitrate(bitrate);
    }
    else
    {
        recorder.setVideoBitrate(grabber.getVideoBitrate());
    }
    recorder.start(); 
    int count = 0;
    Frame frame; 
    while ((frame = grabber.grabFrame()) != null) { 
        recorder.record(frame); 
        count++;
    } 
    recorder.stop(); 
    grabber.stop();
</code></pre>

<p>And these are the libraries which I have placed in <code>libs</code> directory of application,</p>

<pre><code>/libs
/libs/armeabi
/libs/armeabi/libavcodec.so
libs/armeabi/libavdevice.so
libs/armeabi/libavfilter.so
libs/armeabi/libavformat.so
libs/armeabi/libavutil.so
libs/armeabi/libjniavcodec.so
libs/armeabi/libjniavdevice.so
libs/armeabi/libjniavfilter.so
libs/armeabi/libjniavformat.so
libs/armeabi/libjniavutil.so
libs/armeabi/libjnicvkernels.so
libs/armeabi/libjniopencv_calib3d.so
libs/armeabi/libjniopencv_contrib.so
libs/armeabi/libjniopencv_core.so
libs/armeabi/libjniopencv_features2d.so
libs/armeabi/libjniopencv_flann.so
libs/armeabi/libjniopencv_highgui.so
libs/armeabi/libjniopencv_imgproc.so
libs/armeabi/libjniopencv_legacy.so
libs/armeabi/libjniopencv_ml.so
libs/armeabi/libjniopencv_nonfree.so
libs/armeabi/libjniopencv_objdetect.so
libs/armeabi/libjniopencv_photo.so
libs/armeabi/libjniopencv_stitching.so
libs/armeabi/libjniopencv_superres.so
libs/armeabi/libjniopencv_video.so
libs/armeabi/libjniopencv_videostab.so
libs/armeabi/libjnipostproc.so
libs/armeabi/libjniswresample.so
libs/armeabi/libjniswscale.so
libs/armeabi/libnative_camera_r2.2.0.so
libs/armeabi/libnative_camera_r2.3.3.so
libs/armeabi/libnative_camera_r3.0.1.so
libs/armeabi/libnative_camera_r4.0.0.so
libs/armeabi/libnative_camera_r4.0.3.so
libs/armeabi/libnative_camera_r4.1.1.so
libs/armeabi/libnative_camera_r4.2.0.so
libs/armeabi/libnative_camera_r4.3.0.so
libs/armeabi/libnative_camera_r4.4.0.so
libs/armeabi/libopencv_calib3d.so
libs/armeabi/libopencv_contrib.so
libs/armeabi/libopencv_core.so
libs/armeabi/libopencv_features2d.so
libs/armeabi/libopencv_flann.so
libs/armeabi/libopencv_gpu.so
libs/armeabi/libopencv_highgui.so
libs/armeabi/libopencv_imgproc.so
libs/armeabi/libopencv_legacy.so
libs/armeabi/libopencv_ml.so
libs/armeabi/libopencv_nonfree.so
libs/armeabi/libopencv_objdetect.so
libs/armeabi/libopencv_photo.so
libs/armeabi/libopencv_stitching.so
libs/armeabi/libopencv_superres.so
libs/armeabi/libopencv_video.so
libs/armeabi/libopencv_videostab.so
libs/armeabi/libpostproc.so
libs/armeabi/libswresample.so
libs/armeabi/libswscale.so
libs/armeabi/libtbb.so
libs/android-support-v4.jar
libs/commons-net-3.3.jar
libs/ffmpeg.jar
libs/gson-2.2.4.jar
libs/javacpp.jar
libs/javacv.jar
libs/opencv.jar
</code></pre>

<p><strong>Issue:</strong></p>

<p>Everything is working fine when I test on Samsung Galaxy S4, Google Nexus 7, Samsung Galaxy Core.
It is failed with errors when I test on Motorola Razr,
Errors which I am facing:</p>

<ul>
<li><p>First error message:</p>

<pre><code>02-11 09:54:57.579: E/dalvikvm(22745): dlopen(""/data/app-lib/com.myapp.example.apk-1/libjniavdevice.so"") failed: dlopen failed: cannot locate symbol ""av_input_audio_device_next"" referenced by ""libjniavdevice.so""...
02-11 09:54:57.579: W/dalvikvm(22745): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lorg/bytedeco/javacpp/avdevice;
</code></pre></li>
<li><p>Second error message:</p>

<pre><code>02-11 09:54:57.962: I/dalvikvm(22745): Could not find method java.awt.image.BufferedImage.getSampleModel, referenced from method org.bytedeco.javacpp.helper.opencv_core$AbstractIplImage.createFrom`
</code></pre></li>
<li><p>Third error message:</p>

<pre><code>02-11 09:54:58.300: W/System.err(22745): org.bytedeco.javacv.FrameRecorder$Exception: avcodec_open2() error -22: Could not open audio codec.`
</code></pre></li>
</ul>

<p><strong>Note:</strong>
As of now, I have included library files for armeabi and I do have the library files for x86 as well.
Can the processor of some specific devices (Motorola Razr) be the reason for such crash? i.e.: Motorola Razr has Krait processor.</p>
",2015-11-11 19:19:33,2015-11-11 19:19:33,Video Compression using JavaCV,<java><android><opencv><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
27402,28526288,2015-02-15 12:59:29,,"<p>I am using the process object in c#</p>

<p>I am also using FFMPEG.</p>

<p>I am trying to read the bytes from the redirected output. i know the data is an image but when I use the following code I do not get an image byte array.</p>

<p>this is my code:</p>

<pre><code>var process = new Process();
process.StartInfo.FileName = @""C:\bin\ffmpeg.exe"";
process.StartInfo.Arguments = @"" -i rtsp://admin:admin@192.168.0.8:554/video_1 -an -f image2 -s 360x240 -vframes 1 -"";
process.StartInfo.CreateNoWindow = true;
process.StartInfo.RedirectStandardError = true;
process.StartInfo.RedirectStandardOutput = true;
process.StartInfo.UseShellExecute = false;
process.Start();
var output = process.StandardOutput.ReadToEnd();
byte[] bytes = Encoding.ASCII.GetBytes(output);
</code></pre>

<p>The 1st bytes are not the header of a jpeg?</p>
",,2015-02-15 14:12:19,Read a byte array from a redirected process,<c#><image-processing><process><bytearray>,,,CC BY-SA 3.0,False,False,False,False,True
27405,25917114,2014-09-18 15:46:08,,"<p>I need fast work with gray-scale frames hence I need only Y-component from YUV 4:2:0 video I have. As I can see from profiler a lot of time is wasting for useless YUV->RGB conversion.</p>

<pre><code>VideoCapture::cap.set(CV_CAP_PROP_CONVERT_RGB, false) 
</code></pre>

<p>gives no effect, as I can see from splitting </p>

<pre><code>Mat ch[3]; split(frame,ch); imshow(""it must be U-channel"", ch[1]);
</code></pre>

<p>frames is still in RGB, not YUV, i.e. VideoCapture <strong>ignores</strong> CV_CAP_PROP_CONVERT_RGB flag (I believe ffmpeg library which is used by openCV for video-decoding can understand such kind of flags).</p>

<p>So, please, does someone have idea how to get gray-scaled image from video sequence faster? OpenCL methods are ok too since I convert Mat to oclMat to process this frames after reading ( including current useless ocl::cvtColor(A, B, CV_RGB2GRAY) ).</p>
",,2014-09-19 10:13:07,How to read Y-component from H264 4:2:0 video without default YUV2RGB->RGB2GRAY conversion,<opencv><video><opencl><h.264>,,,CC BY-SA 3.0,True,True,False,False,True
27415,27035888,2014-11-20 09:23:28,,"<p>I have an iOS project utilizing ffmpeg (which is a pure C library) and OpenCV. </p>

<p>Since I use the C++ interface of OpenCV, I write objective-c++ which is a <code>.mm</code> file. But the file is not OK with ffmpeg, and Xcode complains about <code>undefined symbol</code> on linking stage.</p>

<p>I also use ffmpeg in another <code>.m</code> file and it is OK. So I am sure the problem is with <code>.mm</code> and static library written in C.</p>
",,2014-11-20 10:46:41,ObjC++ calling static library written in C,<c++><ios><c><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
27585,28561855,2015-02-17 12:46:08,,"<p>I'm trying to play sound from an <code>FFMpegFrameGrabber</code> by getting the <code>Frame</code> and sending the audio samples to a <code>SourceDataLine</code>. Here's what I have so far:</p>

<p>Creating the <code>SourceDataLine</code>:</p>

<pre><code>int channels = _grabber.getAudioChannels();
int format = _grabber.getSampleFormat();
AudioFormat fmt = new AudioFormat(_grabber.getSampleRate(), format, channels, true, true);
_sourceDataLine=(SourceDataLine)AudioSystem.getLine(new DataLine.Info(SourceDataLine.class, fmt));
_sourceDataLine.open(fmt);
_sourceDataLine.start();
</code></pre>

<p>Attempting to play sound (images are handled in the else block):</p>

<pre><code>org.bytedeco.javacv.Frame f = _grabber.grabFrame();

if (f.samples != null &amp;&amp; f.samples.length &gt; 0)
{
    byte[] bytes = new byte[4096];
    for (Buffer buffer : f.samples)
    {
        FloatBuffer floatBuffer = (FloatBuffer) buffer;
        ByteBuffer byteBuffer = ByteBuffer.allocate(floatBuffer.capacity() * 4);
        byteBuffer.asFloatBuffer().put(floatBuffer);
        byteBuffer.rewind();
        byteBuffer.get(bytes);
        _sourceDataLine.write(bytes, 0, bytes.length);
    }
}
</code></pre>

<p><em>(Note: I tried a few different versions of this and they all have static. The versions I tried included combining the buffers into one large buffer, only trying to play one sample instead of each channel, and changing the audio format to many different permutations.)</em></p>

<p>The problem is the sound is full of static, and almost completely unintelligible. This is my first time doing any audio programming, so I'm sure I'm doing something completely ridiculous.</p>

<p>I appreciate any help. Thank you.</p>

<p><strong>EDIT</strong></p>

<p>In response to Radiodef, I tried a number of AudioFormats, and I couldn't find one that worked for PCM_FLOAT. I found an example that used this:</p>

<pre><code>fmt = new AudioFormat(AudioFormat.Encoding.PCM_FLOAT, _grabber.getSampleRate(), format, channels, channels, _grabber.getSampleRate(), true);
</code></pre>

<p><em>Note: I tried a few different values for the framesize from examples: <code>channels * format / 8</code>, <code>channels * 8</code> with a hardcoded samplerate of 64, <code>channels * 4</code> with a hardcoded samplerate of 32, and any combinations of those</em></p>

<p>But it give me this exception:</p>

<pre><code>java.lang.IllegalArgumentException: No line matching interface SourceDataLine supporting format PCM_FLOAT 44100.0 Hz, 8 bit, stereo, 2 bytes/frame,  is supported.
    at javax.sound.sampled.AudioSystem.getLine(Unknown Source)
    at com.enplug.player.video.Video.&lt;init&gt;(Video.java:52) &lt;- where I get the SourceDataLine
    ...
</code></pre>

<p><strong>EDIT 2</strong></p>

<p>Sorry for the delay. I appreciate all the help Radiodef.</p>

<p>Here is some output from the FFMpegGrabber that is automatically output.</p>

<pre><code>Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C:\Users\Shawn\AppData\Roaming\Enplug Display\Download\Resource\c7cb496d-96ea-4be8-a238-5ffd50955a3e.mp4':
  Metadata:
    major_brand     : qt
    minor_version   : 0
    compatible_brands: qt
    creation_time   : 2014-10-02 07:14:38
  Duration: 00:00:31.13, start: 0.000000, bitrate: 2412 kb/s
    Stream #0:0(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 246 kb/s (default)
    Metadata:
      creation_time   : 2014-10-02 07:14:38
      handler_name    : Core Media Data Handler
    Stream #0:1(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709), 1280x720, 2157 kb/s, 30 fps, 30 tbr, 600 tbn, 1200 tbc (default)
    Metadata:
      creation_time   : 2014-10-02 07:14:38
      handler_name    : Core Media Data Handler
      encoder         : H.264
</code></pre>

<p>I have two videos I'm testing with, and the first one (which is the one in the example above) has the following:</p>

<pre><code>Bit rate: 247 kbps
Channels: 2 (stereo)
Audio sample rate: 44 kHz
</code></pre>

<p>And the second is:</p>

<pre><code>Bit rate: 161 kbps
Channels: 2 (stereo)
Audio sample rate: 48 kHz
</code></pre>

<p>They're both mp4s, and I can provide any details about the video itself if needed.</p>

<p>As for the library, yeah I'm pretty locked into JavaCV. We already have videos running without sound, but we're now trying to add sound to our program.</p>

<p>When I run the sample program from your <a href=""http://www.jsresources.org/faq_audio.html#supported_formats"" rel=""nofollow"">JSR link</a> I get:</p>

<pre><code>PCM_UNSIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, big-endian
PCM_UNSIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian
PCM_UNSIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, big-endian
PCM_UNSIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian
PCM_UNSIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, big-endian
PCM_UNSIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian
PCM_UNSIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, mono, 1 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, mono, 2 bytes/frame, big-endian
PCM_UNSIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 8 bit, stereo, 2 bytes/frame,
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, little-endian
PCM_SIGNED unknown sample rate, 16 bit, stereo, 4 bytes/frame, big-endian
</code></pre>
",2015-02-18 18:02:07,2017-10-15 08:49:18,Sound in videos is full of static,<java><audio><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
27629,28619668,2015-02-20 00:27:41,,"<p>Okay, kind of a weird problem.  But I'm not sure whether it's python, ffmpeg, or some stupid thing I'm doing wrong.</p>

<p>I'm trying to take a video, and take 1 frame a second, and output that frame to an image.  Right now, if i use the command line with ffmpeg:</p>

<pre><code>ffmpeg -i test.avi -r 1 -f image2 image-%3d.jpeg -pix_fmt rgb24 -vcodec rawrvideo
</code></pre>

<p>It outputs about 10 images, the images look fine, awesome.  Now I have this code (right now some code from some github, as I wanted stuff that i was relatively sure would work, and mine is allll convoluted)</p>

<pre><code>import subprocess as sp
import numpy as np
import re
import cv2
import time

FFMPEG_BIN = r'ffmpeg.exe'
INPUT_VID = 'test.avi'

def getInfo():
    command = [FFMPEG_BIN,'-i', INPUT_VID, '-']
    pipe = sp.Popen(command, stdout=sp.PIPE, stderr=sp.PIPE)
    pipe.stdout.readline()
    pipe.terminate()
    infos = pipe.stderr.read()
    infos_list = infos.split('\r\n')
    res = re.search(' \d+x\d+ ',infos)
    res = [int(x) for x in res.group(0).split('x')]
    return res
res = getInfo()
command = [ FFMPEG_BIN,
        '-i', INPUT_VID,
        '-f', 'image2pipe',
        '-pix_fmt', 'rgb24',
        '-vcodec', 'rawvideo', '-']
pipe = sp.Popen(command, stdout = sp.PIPE, bufsize=10**8)
n = 0
im2 = []
try:
    mog = cv2.BackgroundSubtractorMOG2(120,2,True)
    while True:
        raw_image = pipe.stdout.read(res[0]*res[1]*3)
        # transform the byte read into a numpy array
        image =  np.fromstring(raw_image, dtype='uint8')
        image = image.reshape((res[1],res[0],3))
        rgbImg = image.copy()

        fname = ('_tmp%03d.png'%time.time())
        cv2.imwrite(fname, rgbImg)
        # throw away the data in the pipe's buffer.
        #pipe.stdout.flush()
        n += 1
        print n
except:
    print 'done',n
    pipe.kill()
    cv2.destroyAllWindows()
</code></pre>

<p>When I run this, I get 10 images, but they all have a Blue Tint!  I cannot for the life of me figure out why.  I've done tons of searches, I've tried quite a few different codecs (usually just messes things up worse).  The media info for the video file is here:</p>

<pre><code> General
 Complete name                            : test.avi
Format                                   : AVI
Format/Info                              : Audio Video Interleave
File size                                : 85.0 KiB
Duration                                 : 133ms
Overall bit rate                         : 5 235 Kbps

Video
ID                                       : 0
Format                                   : JPEG
Codec ID                                 : MJPG
Duration                                 : 133ms
Bit rate                                 : 1 240 Kbps
Width                                    : 640 pixels
Height                                   : 480 pixels
Display aspect ratio                     : 4:3
Frame rate                               : 30.000 fps
Color space                              : YUV
Chroma subsampling                       : 4:2:2
Bit depth                                : 8 bits
Compression mode                         : Lossy
Bits/(Pixel*Frame)                       : 0.135
Stream size                              : 20.1 KiB (24%)
</code></pre>

<p>Any suggestions?  It seems like it should be an RGB mixup...just not sure where at...</p>

<p>EDIT: So I fixed the problem by switching the blue and red channels with this code:
                bChannel = rgbImg[:,:,0]
                rChannel = rgbImg[:,:,2]
                gChannel = rgbImg[:,:,1]</p>

<pre><code>            rgbArray = np.zeros((res[1],res[0],3), 'uint8')
            rgbArray[...,0] = rChannel
            rgbArray[...,1] = gChannel
            rgbArray[...,2] = bChannel
</code></pre>

<p>So I guess this is now a question of, why is python mixing up these channels?  Is it a problem with python, or ffmpeg, the codec?  </p>

<p>Thanks!</p>
",2015-02-20 16:00:46,2015-06-17 16:35:43,"FFMpeg Command work in command line, but in python script the image is blueish? (Semi Solved)",<python><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
27704,28677112,2015-02-23 15:22:59,,"<p>I wanna get frames from my ip camera but same errors occured. I read some web page about that error but i couldnt solve the problem. I am using visual C++ 2010</p>

<p>Code : </p>

<pre><code>cv::VideoCapture capture(""rtsp://192.168.0.18:554/ucast/11"");

  if (!capture.isOpened()) return 1;

  double width = capture.get(CV_CAP_PROP_FRAME_WIDTH);  
  double height = capture.get(CV_CAP_PROP_FRAME_HEIGHT);

  cv::namedWindow(""showRTSP"", CV_WINDOW_AUTOSIZE);

  while (true) {

    cv::Mat frame;
    if (!capture.read(frame)) break;
    cv::imshow(""showRTSP"", frame);
    if (cv::waitKey(30) == 27) break;
  }
</code></pre>

<p>Errors : [h264 @ 00000000030afaa0] error while decoding MB 59 10</p>

<p>thanks...</p>
",2015-02-23 16:10:23,2015-02-23 16:10:23,h264 error while decoding,<opencv><camera><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
27764,28721396,2015-02-25 14:20:52,,"<p>I Successfully convert images to video in android by using ffmpeg, javacv
now i want to add background music on video.
Below code convert images to video but cannot find audio</p>

<pre><code>public void imagevideo(ArrayList&lt;String&gt; links)
{

    Log.d(""Received"",""""+links);

        iplimage = new opencv_core.IplImage[links.size()];
       for (int j = 0; j &lt; links.size(); j++) 
       {
       System.out.println("" j "" + ""Inise Loop""+links.get(j).toString());
       iplimage[j]=cvLoadImage(links.get(j));


     }
</code></pre>

<p>here is get image array length
           Log.d(""Length"",""""+iplimage.length);
        Frame framee;
           File videopath = new File(Environment.getExternalStorageDirectory().toString()+""/test"");
           videopath.mkdirs();</p>

<pre><code>    String audioFile = Environment.getExternalStorageDirectory().getAbsolutePath()+""/susic.mp3""; 


         try {



            FFmpegFrameGrabber audioFrames = FFmpegFrameGrabber.createDefault(audioFile);
            FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(Environment.getExternalStorageDirectory().toString()+""/test/video.mp4"",400,400,audioFrames.getAudioChannels());

             Log.d(""Enter in Try"",""FF"");               
             Log.d(""Start Recorder"","""");
             Log.d(""Length"",""Sound Grab"");
             audioFrames.start();

             recorder.setFrameRate(30);
             recorder.setVideoCodec(avcodec.AV_CODEC_ID_MPEG4);
             recorder.setVideoBitrate(9000);
             recorder.setFormat(""mp4"");
             recorder.setAudioChannels(2);
             recorder.setSampleRate(44100);
             recorder.setVideoQuality(0); // maximum quality
             recorder.start();

             Frame frame=null;

             Log.d(""Length"",""""+iplimage.length);
            for (int i=0;i&lt; iplimage.length;i++)
            {   
                frame=audioFrames.grabFrame();

                   long t = 9000 * (System.currentTimeMillis());
                   if (t &gt; recorder.getTimestamp()) {
                       recorder.setTimestamp(t);

                       recorder.record(iplimage[i]);
                        recorder.record(frame); 




               }

            }
             recorder.stop();




}
</code></pre>
",,2015-10-12 09:10:23,Convert Images to Video in Android,<javacv>,,,CC BY-SA 3.0,True,False,False,False,True
27822,28725540,2015-02-25 17:23:17,,"<p>I have installed OpenCV on Ubuntu 14 , when i want to feed it's function with a video , it told me to install ffmpeg libraries but as i know, ffmpeg is replaced with another decoder library on Ubuntu 14, How can i fix it or use another library ?</p>
",,2015-02-25 17:23:17,How to change OpenCV video library on Ubuntu 14?,<opencv><ffmpeg><ubuntu-14.04>,,,CC BY-SA 3.0,True,False,False,False,True
27848,28762724,2015-02-27 10:22:24,,"<p><code>mingw</code> and <code>eclipse</code> is working fine. I tried to setup <code>OpenCV</code> and build my project but getting the following errors. I don't have any clue to solve this issue.. I google it but no luck. </p>

<pre><code>12:21:54 **** Rebuild of configuration Debug for project VideoBackGroundRemoval ****
Info: Internal Builder is used for build
g++ ""-IE:\\opencv\\build\\include\\"" -O0 -g3 -Wall -c -fmessage-length=0 -o ""src\\main.o"" ""..\\src\\main.cpp"" 
g++ ""-LE:\\opencv\\minGW\\x86"" -o VideoBackGroundRemoval.exe ""src\\main.o"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_flann2410"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_gpu2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_highgui2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_imgproc2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_ml2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_legacy2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_nonfree2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_objdetect2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_ocl2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_photo2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_stitching2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_superres2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_video2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_videostab2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\opencv_ffmpeg2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_ml2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_calib3d2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_contrib2410.dll"" ""-lE:\\opencv\\minGW\\x86\\bin\\libopencv_core2410.dll"" 
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_flann2410
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_gpu2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_highgui2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_imgproc2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_ml2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_legacy2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_nonfree2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_objdetect2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_ocl2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_photo2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_stitching2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_superres2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_video2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_videostab2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\opencv_ffmpeg2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_ml2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_calib3d2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_contrib2410.dll
e:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../../mingw32/bin/ld.exe: cannot find -lE:\opencv\minGW\x86\bin\libopencv_core2410.dll
collect2.exe: error: ld returned 1 exit status

12:21:55 Build Finished (took 999ms)
</code></pre>
",2015-02-27 10:39:32,2015-03-09 08:29:07,"mingw, OpenCV 2.4.10 and eclipse C/C++ developer collect2.exe: error: ld returned 1 exit status",<opencv><mingw>,,,CC BY-SA 3.0,True,False,False,False,True
27854,25955840,2014-09-21 04:34:12,,"<p>Hello I've in the past used this code to produce videos. Now it's not working anymore this is a sample code: I've used *'MJPG' *'XVID' always with the same result. Help please. The files are extremely small (16k for a 40 frame file)</p>

<pre><code>   import numpy as np
    import cv2
    import glob
    import sys
    import cv2.cv as cv
    file_listr = glob.glob(sys.argv[1]+'*.png')
    #~ file_listg = glob.glob(sys.argv[1]+'./*w525_norm.*')
    file_listr.sort()
    #~ file_listg.sort()
    r = cv2.imread(file_listr[0],0)
    print r.shape
    #~ print file_listr
    print file_listr[0][:-4]+'.avi'
    video = cv2.VideoWriter('testout.avi',cv.CV_FOURCC(*'MP43'),1,r.shape)

    for i in range(len(file_listr)):
        r = cv2.imread(file_listr[i])
        #~ g = cv2.imread(file_listg[i],0)
        #~ print r.dtype
        #~ g = np.zeros(r.shape).astype(r.dtype)
        #~ b = np.zeros(r.shape).astype(r.dtype)

        if sys.argv[2] == 'r':
            cv2.imshow('RGB',r)#np.dstack((b,g,r)))
            cv2.waitKey(100)
        elif sys.argv[2] == 'w':
            video.write(r)#np.dstack((b,g,r)))


    video.release()
    cv2.destroyAllWindows()
</code></pre>

<p>This is mplayer ouptut(vlc doesn't work either):</p>

<pre><code>AVI file format detected.
[aviheader] Video stream found, -vid 0
AVI: Missing video stream!? Contact the author, it may be a bug :(
libavformat file format detected.
[lavf] stream 0: video (mpeg4), -vid 0
VIDEO:  [MP4V]  612x812  24bpp   -nan fps    0.0 kbps ( 0.0 kbyte/s)
Clip info:
 encoder: Lavf54.20.4
Load subtitles in ./
Failed to open VDPAU backend libvdpau_i965.so: cannot open shared object file: No such file or directory
[vdpau] Error when calling vdp_device_create_x11: 1
==========================================================================
Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family
libavcodec version 54.35.0 (external)
Unsupported AVPixelFormat 53
Selected video codec: [ffodivx] vfm: ffmpeg (FFmpeg MPEG-4)
==========================================================================
Audio: no sound
Starting playback...
V:   0.0   0/  0 ??% ??% ??,?% 0 0 


Exiting... (End of file)
</code></pre>
",,2014-09-21 16:25:30,opencv2 is not creating videos properly,<python><opencv><video>,,,CC BY-SA 3.0,True,False,False,False,True
27874,28775931,2015-02-27 23:12:07,,"<p>I am coming from a thread <a href=""https://stackoverflow.com/questions/13458289/encoding-h-264-from-camera-with-android-mediacodec"">Encoding H.264 from camera with Android MediaCodec</a>. My setup is very similar. However, I attempt to write mux the encoded frames and with javacv and broadcast them via rtmp.</p>

<p><strong>RtmpClient.java</strong></p>

<pre><code>...
private volatile BlockingQueue&lt;byte[]&gt; mFrameQueue = new LinkedBlockingQueue&lt;byte[]&gt;(MAXIMUM_VIDEO_FRAME_BACKLOG);
...
private void startStream() throws FrameRecorder.Exception, IOException {
    if (TextUtils.isEmpty(mDestination)) {
        throw new IllegalStateException(""Cannot start RtmpClient without destination"");
    }

    if (mCamera == null) {
        throw new IllegalStateException(""Cannot start RtmpClient without camera."");
    }

    Camera.Parameters cameraParams = mCamera.getParameters();

    mRecorder = new FFmpegFrameRecorder(
            mDestination,
            mVideoQuality.resX,
            mVideoQuality.resY,
            (mAudioQuality.channelType.equals(AudioQuality.CHANNEL_TYPE_STEREO) ? 2 : 1));

    mRecorder.setFormat(""flv"");

    mRecorder.setFrameRate(mVideoQuality.frameRate);
    mRecorder.setVideoBitrate(mVideoQuality.bitRate);
    mRecorder.setVideoCodec(avcodec.AV_CODEC_ID_H264);

    mRecorder.setSampleRate(mAudioQuality.samplingRate);
    mRecorder.setAudioBitrate(mAudioQuality.bitRate);
    mRecorder.setAudioCodec(avcodec.AV_CODEC_ID_AAC);

    mVideoStream = new VideoStream(mRecorder, mVideoQuality, mFrameQueue, mCamera);
    mAudioStream = new AudioStream(mRecorder, mAudioQuality);

    mRecorder.start();

    // Setup a bufferred preview callback
    setupCameraCallback(mCamera, mRtmpClient, DEFAULT_PREVIEW_CALLBACK_BUFFERS,
            mVideoQuality.resX * mVideoQuality.resY * ImageFormat.getBitsPerPixel(
                    cameraParams.getPreviewFormat())/8);

    try {
        mVideoStream.start();
        mAudioStream.start();
    }
    catch(Exception e) {
        e.printStackTrace();
        stopStream();
    }
}
...
@Override
public void onPreviewFrame(byte[] data, Camera camera) {
    boolean frameQueued = false;

    if (mRecorder == null || data == null) {
        return;
    }

    frameQueued = mFrameQueue.offer(data);

    // return the buffer to be reused - done in videostream
    //camera.addCallbackBuffer(data);
}
...
</code></pre>

<p><strong>VideoStream.java</strong></p>

<pre><code>...
@Override
public void run() {
    try {
        mMediaCodec = MediaCodec.createEncoderByType(""video/avc"");
        MediaFormat mediaFormat = MediaFormat.createVideoFormat(""video/avc"", mVideoQuality.resX, mVideoQuality.resY);
        mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, mVideoQuality.bitRate);
        mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, mVideoQuality.frameRate);
        mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420SemiPlanar);
        mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 1);
        mMediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);
        mMediaCodec.start();
    }
    catch(IOException e) {
        e.printStackTrace();
    }

    long startTimestamp = System.currentTimeMillis();
    long frameTimestamp = 0;
    byte[] rawFrame = null;

    try {
        while (!Thread.interrupted()) {
            rawFrame = mFrameQueue.take();

            frameTimestamp = 1000 * (System.currentTimeMillis() - startTimestamp);

            encodeFrame(rawFrame, frameTimestamp);

            // return the buffer to be reused
            mCamera.addCallbackBuffer(rawFrame);
        }
    }
    catch (InterruptedException ignore) {
        // ignore interrup while waiting
    }

    // Clean up video stream allocations
    try {
        mMediaCodec.stop();
        mMediaCodec.release();
        mOutputStream.flush();
        mOutputStream.close();
    } catch (Exception e){
        e.printStackTrace();
    }
}
...
private void encodeFrame(byte[] input, long timestamp) {
    try {
        ByteBuffer[] inputBuffers = mMediaCodec.getInputBuffers();
        ByteBuffer[] outputBuffers = mMediaCodec.getOutputBuffers();

        int inputBufferIndex = mMediaCodec.dequeueInputBuffer(0);

        if (inputBufferIndex &gt;= 0) {
            ByteBuffer inputBuffer = inputBuffers[inputBufferIndex];
            inputBuffer.clear();
            inputBuffer.put(input);
            mMediaCodec.queueInputBuffer(inputBufferIndex, 0, input.length, timestamp, 0);
        }

        MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();

        int outputBufferIndex = mMediaCodec.dequeueOutputBuffer(bufferInfo, 0);

        if (outputBufferIndex &gt;= 0) {
            while (outputBufferIndex &gt;= 0) {
                ByteBuffer outputBuffer = outputBuffers[outputBufferIndex];

                // Should this be a direct byte buffer?
                byte[] outData = new byte[bufferInfo.size - bufferInfo.offset];
                outputBuffer.get(outData);

                mFrameRecorder.record(outData, bufferInfo.offset, outData.length, timestamp);

                mMediaCodec.releaseOutputBuffer(outputBufferIndex, false);
                outputBufferIndex = mMediaCodec.dequeueOutputBuffer(bufferInfo, 0);
            }
        }
        else if (outputBufferIndex == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
            outputBuffers = mMediaCodec.getOutputBuffers();
        } else if (outputBufferIndex == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
            // ignore for now
        }
    } catch (Throwable t) {
        t.printStackTrace();
    }

}
...
</code></pre>

<p><strong>FFmpegFrameRecorder.java</strong></p>

<pre><code>...
// Hackish codec copy frame recording function
public boolean record(byte[] encodedData, int offset, int length, long frameCount) throws Exception {
    int ret;

    if (encodedData == null) {
        return false;
    }

    av_init_packet(video_pkt);

    // this is why i wondered whether I should get outputbuffer data into direct byte buffer
    video_outbuf.put(encodedData, 0, encodedData.length);

    video_pkt.data(video_outbuf);
    video_pkt.size(video_outbuf_size);

    video_pkt.pts(frameCount);
    video_pkt.dts(frameCount);

    video_pkt.stream_index(video_st.index());

    synchronized (oc) {
        /* write the compressed frame in the media file */
        if (interleaved &amp;&amp; audio_st != null) {
            if ((ret = av_interleaved_write_frame(oc, video_pkt)) &lt; 0) {
                throw new Exception(""av_interleaved_write_frame() error "" + ret + "" while writing interleaved video frame."");
            }
        } else {
            if ((ret = av_write_frame(oc, video_pkt)) &lt; 0) {
                throw new Exception(""av_write_frame() error "" + ret + "" while writing video frame."");
            }
        }
    }
    return (video_pkt.flags() &amp; AV_PKT_FLAG_KEY) == 1;
}
...
</code></pre>

<p>When I try to stream the video and run ffprobe on it, I get the following output:</p>

<pre><code>ffprobe version 2.5.3 Copyright (c) 2007-2015 the FFmpeg developers
  built on Jan 19 2015 12:56:57 with gcc 4.1.2 (GCC) 20080704 (Red Hat 4.1.2-55)
  configuration: --prefix=/usr --bindir=/usr/bin --datadir=/usr/share/ffmpeg --incdir=/usr/include/ffmpeg --libdir=/usr/lib64 --mandir=/usr/share/man --arch=x86_64 --optflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic' --enable-bzlib --disable-crystalhd --enable-libass --enable-libdc1394 --enable-libfaac --enable-nonfree --disable-indev=jack --enable-libfreetype --enable-libgsm --enable-libmp3lame --enable-openal --enable-libopencv --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxvid --enable-x11grab --enable-avfilter --enable-avresample --enable-postproc --enable-pthreads --disable-static --enable-shared --enable-gpl --disable-debug --disable-stripping --enable-libcaca --shlibdir=/usr/lib64 --enable-runtime-cpudetect
  libavutil      54. 15.100 / 54. 15.100
  libavcodec     56. 13.100 / 56. 13.100
  libavformat    56. 15.102 / 56. 15.102
  libavdevice    56.  3.100 / 56.  3.100
  libavfilter     5.  2.103 /  5.  2.103
  libavresample   2.  1.  0 /  2.  1.  0
  libswscale      3.  1.101 /  3.  1.101
  libswresample   1.  1.100 /  1.  1.100
  libpostproc    53.  3.100 / 53.  3.100
Metadata:
  Server                NGINX RTMP (github.com/arut/nginx-rtmp-module)
  width                 320.00
  height                240.00
  displayWidth          320.00
  displayHeight         240.00
  duration              0.00
  framerate             0.00
  fps                   0.00
  videodatarate         261.00
  videocodecid          7.00
  audiodatarate         62.00
  audiocodecid          10.00
  profile
  level
[live_flv @ 0x1edb0820] Could not find codec parameters for stream 0 (Video: none, none, 267 kb/s): unknown codec
Consider increasing the value for the 'analyzeduration' and 'probesize' options
Input #0, live_flv, from 'rtmp://&lt;server&gt;/input/&lt;stream id&gt;':
  Metadata:
    Server          : NGINX RTMP (github.com/arut/nginx-rtmp-module)
    displayWidth    : 320
    displayHeight   : 240
    fps             : 0
    profile         :
    level           :
  Duration: 00:00:00.00, start: 16.768000, bitrate: N/A
    Stream #0:0: Video: none, none, 267 kb/s, 1k tbr, 1k tbn, 1k tbc
    Stream #0:1: Audio: aac (LC), 16000 Hz, mono, fltp, 63 kb/s
Unsupported codec with id 0 for input stream 0
</code></pre>

<p>I am not, by any means, an expert in H264 or video encoding. I know that the encoded frames that come out from MediaCodec contain SPS NAL, PPS NAL, and frame NAL units. I've also written the MediaCodec output into a file and was able to play it back (I did have to specify the format and framerate as otherwise it would play too fast).</p>

<p>My assumption is that things should work (see how little I know :)). Knowing that SPS and PPS are written out, decoder should know enough. Yet, ffprobe fails to recognize codec, fps, and other video information. Do I need to pass packet flag information to FFmpegFrameRecorder.java:record() function? Or should I use direct buffer? Any suggestion will be appreciated! I should figure things out with a hint.</p>

<p>PS: I know that some codecs use Planar and other SemiPlanar color formats. That distinction will come later if I get past this. Also, I didn't go the Surface to MediaCodec way because I need to support API 17 and it requires more changes than this route, which I think helps me understand the more basic flow. Agan, I appreciate any suggestions. Please let me know if something needs to be clarified.</p>

<p><strong>Update #1</strong></p>

<p>So having done more testing, I see that my encoder outputs the following frames:</p>

<pre><code>000000016742800DDA0507E806D0A1350000000168CE06E2
0000000165B840A6F1E7F0EA24000AE73BEB5F51CC7000233A84240...
0000000141E2031364E387FD4F9BB3D67F51CC7000279B9F9CFE811...
0000000141E40304423FFFFF0B7867F89FAFFFFFFFFFFCBE8EF25E6...
0000000141E602899A3512EF8AEAD1379F0650CC3F905131504F839...
...
</code></pre>

<p>The very first frame contains SPS and PPS. From what I was able to see, these are transmitted only once. The rest are NAL types 1 and 5. So, my assumption is that, for ffprobe to see stream info not only when the stream starts, I should capture SPS and PPS frames and re-transmit them myself periodically, after a certain number of frames, or perhaps before every I-frame. What do you think?</p>

<p><strong>Update #2</strong></p>

<p>Unable to validate that I'm writing frames successfully. After having tried to read back the written packet, I cannot validate written bytes. As strange, on successful write of IPL image and streaming, I also cannot print out bytes of encoded packet after <code>avcodec_encode_video2</code>. Hit the official dead end.</p>
",2017-05-23 11:46:24,2015-12-31 13:14:46,Muxing Android MediaCodec encoded H264 packets into RTMP,<android><ffmpeg><video-streaming><h.264><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
27931,28819758,2015-03-02 21:27:52,,"<p>I am new to opencv and I am trying to create a video file with frame size 56x72 using opencv-python. I am using 'MJPG' to encode the video with a frame rate of 20. I get an error which says - [mjpeg @ 0x27ee9e0] buffer smaller than minimum size.</p>

<p>I checked the avcodec.h file and it says that the FF_MIN_BUFFER_SIZE = 16384 and it verifies if the buf_size is at least FF_MIN_BUFFER_SIZE and i think the buf_size is width*height*4 (i am not really sure of this).</p>

<p>So does it mean that I can't create a video file with frame size 56x72 or smaller? Is there any way around?</p>
",,2016-10-31 23:08:18,mjpeg @ 0x27ee9e0 buffer smaller than minimum size: How to create a video file with size less than the minimum buffer size?,<python><opencv><ffmpeg><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
27976,28772862,2015-02-27 19:31:13,,"<p>I am recording from a cable stream using the hdhomerun command line tool, hdhomerun_config, to a .ts file. The way it works is that you run the command, it produces periods every second or so to let you know that the stream is being successfully recorded. So when I record, it produces only periods, which is desired. And the way to end it is by doing a Ctrl-C. However, whenever I try to convert this to an avi or a mov using FFMpeg, it gives a bunch of errors, some of which being</p>

<pre><code>[mpeg2video @ 0x7fbb4401a000] Invalid frame dimensions 0x0
[mpegts @ 0x7fbb44819600] PES packet size mismatch
[ac3 @ 0x7fbb44015c00] incomplete frame
</code></pre>

<p>It still creates the file, but it is bad quality and it doesn't work with OpenCV and other services. Has anyone else encountered this problem? Does anyone have any knowledge that may help with this situation? I tried to trim the ts file but most things require conversion before editing. Thank you!</p>
",,2015-03-02 19:12:22,Fixing a TS file made by the HD Home Run,<opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
28056,28865154,2015-03-04 21:17:58,,"<p>I am trying to write a program that captures video from a webcam using this code: </p>

<pre><code>#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;iostream&gt;

using namespace cv;
using namespace std;

int main(int argc, char** argv)
{

    Mat frame;
    VideoCapture cap(1);
    char key;
    String outputName = ""output.avi"";

    VideoWriter outputVideo;
    Size size = Size(cap.get(CV_CAP_PROP_FRAME_WIDTH), cap.get(CV_CAP_PROP_FRAME_HEIGHT));



    outputVideo.open(outputName, CV_FOURCC('D', 'I', 'V', 'X'), cap.get(CV_CAP_PROP_FPS), size, true);

    if (!outputVideo.isOpened())
    {
        cout &lt;&lt; ""Could not open the output video for write: "" &lt;&lt; outputName &lt;&lt; endl;
        return -1;
    }
    cout &lt;&lt; ""size "" &lt;&lt; size.width &lt;&lt; "" x "" &lt;&lt; size.height &lt;&lt; endl;

    namedWindow(""Display window"", WINDOW_AUTOSIZE); // Create a window for display.
    cap.set(CV_CAP_PROP_EXPOSURE, -8);


    while (true){
        bool success = cap.read(frame);
        if (!success){
            cout &lt;&lt; ""Cannot read frame from file"" &lt;&lt; endl;
            return -2;
        }
        outputVideo.write(frame);
        imshow(""Display window"", frame);
        key = waitKey(1);
        if (key == ' '){
            cout &lt;&lt; ""Video ended due to key stroke"" &lt;&lt; endl;
            return 1;
        }
    }


    return 0;
}
</code></pre>

<p>The program doesn't seem to be able to open outputVideo since it always returns -1. I thought that I might not have the codec divx installed, but I have installed it from k-lite codec pack and divx and it still does not work.</p>

<p>Could anybody please tell me how to install codecs <strong>such that opencv recognizes them</strong>?</p>

<p>I am using OpenCV 2.4.10 on Windows 7 with Visual studio 2013.</p>
",,2015-03-04 21:17:58,How to install codecs for opencv?,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
28057,28806816,2015-03-02 09:54:10,,"<p>Is it possible to resize an image using FFMPEG?</p>

<p>I have this so far:</p>

<pre><code>ffmpeg. -i 1.jpg -vf scale=360:240 &gt; 2.jpg
</code></pre>

<p>I get the error message that 'At least one output file must be specified'</p>

<p>Is it possible?</p>
",,2020-09-05 18:10:21,Use ffmpeg to resize image,<image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
28158,27100226,2014-11-24 08:00:27,,"<p>So I am using the new Android Studio and I am trying to get JavaCV installed in the most basic setup. I made a brand new project with nothing in it, imported (I think unsuccessfully) the JavaCV library and then I am running one of the samples given in the JavaCV repo and I am getting the following error.</p>

<pre><code>Process: com.example.calvintmoss.dejavid, PID: 1187
java.lang.UnsatisfiedLinkError: Couldn't load jniopencv_core from loader dalvik.system.PathClassLoader[DexPathList[[zip file ""/data/app/com.example.calvintmoss.dejavid-1.apk""],nativeLibraryDirectories=[/data/app-lib/com.example.calvintmoss.dejavid-1, /system/lib]]]: findLibrary returned null
        at java.lang.Runtime.loadLibrary(Runtime.java:358)
        at java.lang.System.loadLibrary(System.java:526)
        at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:535)
        at org.bytedeco.javacpp.Loader.load(Loader.java:410)
        at org.bytedeco.javacpp.Loader.load(Loader.java:353)
        at org.bytedeco.javacpp.opencv_core.&lt;clinit&gt;(opencv_core.java:10)
        at org.bytedeco.javacpp.helper.opencv_core$AbstractIplImage.create(opencv_core.java:909)
        at com.example.calvintmoss.dejavid.MainActivity.initRecorder(MainActivity.java:249)
        at com.example.calvintmoss.dejavid.MainActivity.onCreate(MainActivity.java:151)
        at android.app.Activity.performCreate(Activity.java:5231)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2148)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2233)
        at android.app.ActivityThread.access$800(ActivityThread.java:135)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
        at android.os.Handler.dispatchMessage(Handler.java:102)
        at android.os.Looper.loop(Looper.java:136)
        at android.app.ActivityThread.main(ActivityThread.java:5001)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:515)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:785)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)
        at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.UnsatisfiedLinkError: Couldn't load opencv_core from loader dalvik.system.PathClassLoader[DexPathList[[zip file ""/data/app/com.example.calvintmoss.dejavid-1.apk""],nativeLibraryDirectories=[/data/app-lib/com.example.calvintmoss.dejavid-1, /system/lib]]]: findLibrary returned null
        at java.lang.Runtime.loadLibrary(Runtime.java:358)
        at java.lang.System.loadLibrary(System.java:526)
        at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:535)
        at org.bytedeco.javacpp.Loader.load(Loader.java:401)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.opencv_core.&lt;clinit&gt;(opencv_core.java:10)
            at org.bytedeco.javacpp.helper.opencv_core$AbstractIplImage.create(opencv_core.java:909)
            at com.example.calvintmoss.dejavid.MainActivity.initRecorder(MainActivity.java:249)
            at com.example.calvintmoss.dejavid.MainActivity.onCreate(MainActivity.java:151)
            at android.app.Activity.performCreate(Activity.java:5231)
            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1087)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2148)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2233)
            at android.app.ActivityThread.access$800(ActivityThread.java:135)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1196)
            at android.os.Handler.dispatchMessage(Handler.java:102)
            at android.os.Looper.loop(Looper.java:136)
            at android.app.ActivityThread.main(ActivityThread.java:5001)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:515)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:785)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)
            at dalvik.system.NativeStart.main(Native Method)
</code></pre>

<p>I have read several of the other top posts on the issue but I cannot figure out what is wrong. I downloaded the JavaCV through gradle, then I added the lib and lib/areabi folders. I imported ffmpeg.jar, javacpp.jar, javacv.jar and opencv.jar all to the lib folder. and I extracted all the .SO files from opencv-android-arm.jar and ffmpeg-android-arm.jar and put them in the lib/armeabi just like the instructions on the <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow"">git repo</a>. I cannot figure out what is going on. Anyone have any ideas? Also my current setup is. Project->AppModule and then inside of that is where I have my lib and inside of lib i have the armeabi. Does anyone have any info on whats going on?</p>
",,2016-01-19 04:06:06,Android Studio with javaCv and FFMPEG,<android><opencv><ffmpeg><android-studio><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
28201,28891373,2015-03-06 02:21:46,,"<p>I've got OpenCV source code from github and I get the following error when trying to compile it:</p>

<pre><code>/lib64/libavutil.so.54: undefined reference to `clReleaseMemObject@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clReleaseCommandQueue@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clCreateBuffer@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clBuildProgram@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clSetKernelArg@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clGetDeviceIDs@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clEnqueueUnmapMemObject@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clGetPlatformInfo@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clCreateProgramWithSource@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clGetDeviceInfo@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clReleaseContext@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clCreateContextFromType@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clCreateCommandQueue@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clEnqueueMapBuffer@OPENCL_1.0'
/lib64/libavutil.so.54: undefined reference to `clGetPlatformIDs@OPENCL_1.0'
</code></pre>

<p>My machine is a laptop with Intel i7 and a GT630M graphics card and I'm using Bumblebee.</p>

<p>Thanks.</p>
",2015-03-06 04:18:31,2015-03-06 04:18:31,OpenCV compilation error in Fedora 21,<opencv><ffmpeg><opencl><fedora>,,,CC BY-SA 3.0,True,False,False,False,True
28357,28960944,2015-03-10 10:12:13,,"<p>I'm trying to install opencv to my Ubuntu 14.04 machine using the documentation provided in </p>

<blockquote>
  <p><a href=""http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation"" rel=""nofollow"">http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation</a></p>
</blockquote>

<p>However, during the compilation process I get the following error.</p>

<pre><code>Linking CXX shared library ../../lib/libopencv_videoio.so
/usr/bin/ld: /usr/local/lib/libavcodec.a(avpacket.o): relocation R_X86_64_32 against `.rodata.str1.1' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavcodec.a: error adding symbols: Bad value
collect2: error: ld returned 1 exit status
make[2]: *** [lib/libopencv_videoio.so.3.0.0] Error 1
make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I noticed a few posts mentioning similar errors and some solutions suggest removing the <code>libavcodec.a</code> from <code>/usr/local/lib/</code>. I'd like not to do that as I need ffmpeg libraries in the machine as well. </p>

<p>Could someone please help me to resolve this issue?.</p>

<p>Thanks</p>
",2015-03-10 10:29:26,2020-07-04 08:11:03,opencv installation error ubuntu,<c++><opencv><ubuntu>,,,CC BY-SA 3.0,True,False,False,False,True
28393,29012335,2015-03-12 14:22:43,,"<p>This is not really a question as much as it is a presentation of all my attempts to solve one of the most challenging functionalities I was faced with.</p>

<p>I use <a href=""https://github.com/fyhertz/libstreaming"" rel=""nofollow"">libstreaming</a> library to stream realtime videos to <a href=""http://www.wowza.com"" rel=""nofollow"">Wowza Server</a> and I need to record it at the same time inside the SD card. I am presenting below all my attempts in order to collect new ideias from the community.</p>

<h1>Copy bytes from libstreaming stream to a mp4 file</h1>

<p><strong>Development</strong></p>

<p>We created an interception in libstreaming library to copy all the sent bytes to a mp4 file. Libstreaming sends the bytes to Wowza server through a LocalSocket. It users MediaRecorder to access the camera and the mic of the device and sets the output file as the LocalSocket's input stream. What we do is create a wrapper around this input stream extending from InputStream and create a File output stream inside it. So, every time libstreaming executes a reading over the LocaSocket's input stream, we copy all the data to the output stream, trying to create a valid MP4 file.</p>

<p><strong>Impediment</strong></p>

<p>When we tried to read the file, it is corrupted. We realized that there are meta information missing from the MP4 file. Specifically the moov atom. We tried to delay the closing of the streaming in order to give time to send this header (this was still a guessing) but it didn't work. To test the coherence of this data, we used a paid software to try to recover the video, including the header. It became playable, but it was mostly green screen. So this became an not trustable solution. We also tried using ""untrunc"", a free open source command line program and it couldn't even start the recovery, since there was no moov atom.</p>

<h1>Use ffmpeg compiled to android to access the camera</h1>

<p><strong>Development</strong></p>

<p>FFMPEG has a gradle plugin with a java interface to use it inside Android apps. We thought we could access the camera via command line (it is probably in ""/dev/video0"") and sent it to the media server.</p>

<p><strong>Impediment</strong></p>

<p>We got the error ""Permission Denied"" when trying to access the camera. The workaround would be to root the device to have access to it, but it make the phones loose their warranty and could brick them.</p>

<h1>Use ffmpeg compiled to android combined with MediaRecorder</h1>

<p><strong>Development</strong></p>

<p>We tried to make FFMPEG stream a mp4 file being recorded inside the phone via MediaRecorder</p>

<p><strong>Impediment</strong></p>

<p>FFMPEG can not stream MP4 files that are not yet done with the recording.</p>

<h1>Use ffmpeg compiled to android with libstreaming</h1>

<p><strong>Development</strong></p>

<p>Libstreaming uses LocalServerSocket as the connection between the app and the server, so we thought that we could use ffmpeg connected with LocalServerSocket local address to copy the streaming directly to a local file inside the SD card. Right after the streaming started, we also ran the ffmpeg command to start recording the data to a file. Using ffmpeg, we believed that it would create a MP4 file in the proper way, which means with the moov atom header included.</p>

<p><strong>Impediment</strong></p>

<p>The ""address"" created is not readable via command line, as a local address inside the phone. So the copy is not possible.</p>

<h1>Use OpenCV</h1>

<p><strong>Development</strong></p>

<p>OpenCV is an open-source, cross-platform library that provides building blocks for computer vision experiments and applications. It offers high-level interfaces for capturing, processing, and presenting image data. It has their own APIs to connect with the device camera so we started studding it to see if it had the necessary functionalities to stream and record at the same time.</p>

<p><strong>Impediment</strong></p>

<p>We found out that the library is not really defined to do this, but more as image mathematical manipulation. We got even the recommendation to use libstreaming (which we do already).</p>

<h1>Use Kickflip SDK</h1>

<p><strong>Development</strong></p>

<p>Kickflip is a media streaming service that provides their own SDK for development in android and IOS. It also uses HLS instead of RTMP, which is a newer protocol.</p>

<p><strong>Impediment</strong></p>

<p>Their SDK requires that we create a Activity with camera view that occupies the entire screen of the device, breaking the usability of our app.</p>

<h1>Use Adobe Air</h1>

<p><strong>Development</strong></p>

<p>We started consulting other developers of app's already available in the Play Store, that stream to servers already.</p>

<p><strong>Impediment</strong></p>

<p>Getting in touch with those developers, they reassured that would not be possible to record and stream at the same time using this technology. What's more, we would have to redo the entire app from scratch using Adobe Air.</p>

<h1>UPDATE</h1>

<h1>Webrtc</h1>

<p><strong>Development</strong></p>

<p>We started using WebRTC following <a href=""https://github.com/pchab/AndroidRTC"" rel=""nofollow"">this great project</a>. We included the signaling server in our NODEJS server and started doing the standard handshake via socket. We were still toggling between local recording and streaming via webrtc. </p>

<p><strong>Impediment</strong></p>

<p>Webrtc does not work in every network configuration. Other than that, the camera acquirement is all native code, which makes a lot harder to try to copy the bytes or intercept it.</p>
",2016-03-29 13:03:54,2020-04-23 12:48:04,Android: Recording and Streaming at the same time,<android><opencv><ffmpeg><stream><webrtc>,,,CC BY-SA 3.0,True,False,False,False,True
28470,28985710,2015-03-11 11:40:55,,"<p>I've seen a many problems about this, but I didn't get a solution.</p>

<p>My OS is Yosemite and current OpenCV is 2.4.9</p>

<p>I'm trying to install OpenCV with TBB, but when I do it by <code>sudo port install opencv +debug +python27 +qt4 +tbb</code> (<a href=""https://stackoverflow.com/questions/13424305/how-to-get-all-available-install-options-for-a-port"">through this SO question</a>):</p>

<blockquote>
  <p>Rafaels-iMac:y3PQFyQhUG rafaelruizmunoz$ sudo port install opencv
  +debug +python27 +qt4 +tbb </p>
  
  <p>Warning: The Xcode Command Line Tools don't appear to be installed; most ports will likely fail to build. </p>
  
  <p>Warning: Install them by running 'xcode-select --install'. </p>
  
  <p>Warning: The Xcode Command Line Tools don't appear to be installed; most ports will likely fail to build. </p>
  
  <p>Warning: Install them by running xcode-select --install'.</p>
  
  <p>--->  Computing dependencies for ffmpeg</p>
  
  <p>--->  Configuring ffmpeg Error: Failed to configure ffmpeg, consult /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_multimedia_ffmpeg/ffmpeg/work/ffmpeg-2.6/config.log</p>
  
  <p>Error: org.macports.configure for port ffmpeg returned: configure failure: command execution failed Please see the log file for port ffmpeg for details:</p>
  
  <p>/opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_multimedia_ffmpeg/ffmpeg/main.log</p>
  
  <p>Error: Unable to upgrade port: 1 </p>
  
  <p>Error: Unable to execute port: upgrade ffmpeg failed</p>
</blockquote>

<p>And <strong>there are not</strong> any logs on those paths.</p>

<p>I've tried (support from SO and MacPorts).</p>

<ul>
<li><code>port selfupdate</code></li>
<li><code>port upgrade ffmpeg</code></li>
<li><code>port clean x264</code></li>
<li><code>port upgrade outdated</code></li>
<li><code>port -f selfupdate</code></li>
</ul>

<p>but nothing happened.</p>

<p>Does anyone have a clue?</p>

<p>Thank you in advance.</p>

<hr>

<p>EDIT: Doing <code>xcode-select --install</code> doesn't resolve anything.</p>
",2017-05-23 12:15:11,2015-03-11 17:19:56,ffmpeg fails to build by MacPorts,<opencv><ffmpeg><macports>,,,CC BY-SA 3.0,True,False,False,False,True
28502,29058590,2015-03-15 08:13:31,,"<p>Here is my code:</p>

<pre><code>ffmpeg -i http://192.168.0.101:8889/video?dummy=param.mjpeg out.mjpg
</code></pre>

<p>When I run this command, it will immediately print below:</p>

<pre><code>ffmpeg version N-70223-g7296716 Copyright (c) 2000-2015 the FFmpeg developers
  built with gcc 4.9.2 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-lzma --enable-decklink --enable-zlib
  libavutil      54. 19.100 / 54. 19.100
  libavcodec     56. 26.100 / 56. 26.100
  libavformat    56. 23.105 / 56. 23.105
  libavdevice    56.  4.100 / 56.  4.100
  libavfilter     5. 11.101 /  5. 11.101
  libswscale      3.  1.101 /  3.  1.101
  libswresample   1.  1.100 /  1.  1.100
  libpostproc    53.  3.100 / 53.  3.100
</code></pre>

<p>However, <strong>it takes almost twenty seconds before showing next line</strong>, and it prints <strong>this warning</strong>:</p>

<pre><code>[mjpeg @ 0000000002c4fec0] Format mjpeg detected only with low score of 25, misdetection possible!
</code></pre>

<p>Then it prints this:</p>

<pre><code>Input #0, mjpeg, from 'http://192.168.0.101:8889/video?dummy=param.mjpeg':
  Duration: N/A, bitrate: N/A
    Stream #0:0: Video: mjpeg, yuvj420p(pc, bt470bg/unknown/unknown), 640x480 [SAR 1:1 DAR 4:3], 25 tbr, 1200k tbn, 25 tbc
Output #0, mjpeg, to 'a.mjpg':
  Metadata:
    encoder         : Lavf56.23.105
    Stream #0:0: Video: mjpeg, yuvj420p(pc), 640x480 [SAR 1:1 DAR 4:3], q=2-31,
200 kb/s, 25 fps, 25 tbn, 25 tbc
    Metadata:
      encoder         : Lavc56.26.100 mjpeg
Stream mapping:
  Stream #0:0 -&gt; #0:0 (mjpeg (native) -&gt; mjpeg (native))
Press [q] to stop, [?] for help
frame=  195 fps=0.0 q=24.8 size=    1022kB time=00:00:07.80 bitrate=1073.6kbits/
frame=  199 fps=185 q=24.8 size=    1043kB time=00:00:07.96 bitrate=1073.6kbits/
frame=  203 fps=125 q=24.8 size=    1064kB time=00:00:08.12 bitrate=1073.6kbits/
</code></pre>

<p>What's worse, when I am using <code>OpenCV</code>, the <code>open</code> of the <code>VideoCapture</code> also takes the same long time!</p>

<pre><code>#include ""opencv2/opencv.hpp""
#include &lt;iostream&gt;
using namespace std;
using namespace cv;

int main(){
    cout&lt;&lt;""Start""&lt;&lt;endl;
    VideoCapture cap(""http://192.168.0.101:8889/video?dummy=param.mjpg"");
    cout&lt;&lt;""End""&lt;&lt;endl;
    return 0;
}
</code></pre>

<p>20s after printing ""start"", it prints ""end"".</p>

<p>I am using <code>ffmpeg</code> on win7 64 bit downloaded from <a href=""http://ffmpeg.zeranoe.com/builds/"" rel=""nofollow"">here</a>.</p>

<p>Any idea will be appreciated!</p>
",,2015-03-15 09:48:46,ffmpeg starts too slow when using ip camera (the same as using OpenCV),<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
28529,29058980,2015-03-15 09:06:47,,"<p>I can't play play video with Emgu CV</p>

<p>It's show error </p>

<blockquote>
  <p>Unable to create capture from 184.avi</p>
</blockquote>

<p>Here is the code:</p>

<pre><code>public partial class Form1 : Form
{
    //Set the name of pop-up window
    String winname = ""First Window"";
    Timer My_Time = new Timer();
    int FPS=30;
    Capture _capture;

    public Form1()
    {
        InitializeComponent();

    //Frame Rate
    My_Timer.Interval = 1000 / FPS;
    My_Timer.Tick += new EventHandler(My_Timer_Tick);
    My_Timer.Start();

    _capture = new Capture(""184.avi"");   // Error this line

    }

    private void My_Timer_Tick(object sender, EventArgs e)
    {
        imageBox.Image = _capture.QueryFrame().ToBitmap();
    }
</code></pre>

<p>I use windows 8 x64 and install <code>emgucv-windows-universal-cuda 2.4.10.1940</code> It have no <code>opencv_ffmpeg.dll</code> in bin. So I install opencv-2.4.11 and copy all dll from OpenCV bin to paste in Debug in my project. I paste 184.avi to Debug too. But when I run it show error like this. How to play video with Emgu CV?</p>
",2015-03-15 10:05:40,2016-07-14 08:38:06,Emgu CV can't play video,<c#><opencv><video><emgucv>,,,CC BY-SA 3.0,True,False,True,False,True
28542,29077476,2015-03-16 13:00:50,,"<p>I am using OpenCV 3.0.0 beta to write a video with
    <code>VideoWriter vw(""out.avi"",VideoWriter::fourcc('h','2','6','4'),24,frame.size());</code></p>

<p>This calls on the ffmpeg backend (avcodec version 56.26.100), which calls libx264 (build 142). However, apparently it is not possible to specify a libx264 profile from OpenCV, and the default bitrate is too low for my application. </p>

<p>Where can I change the default behaviour of ffmpeg or possibly libx264 to get higher quality video written from OpenCV?</p>
",,2015-03-24 13:58:59,How to change libx264 profile when using ffmpeg backend of OpenCV,<opencv><ffmpeg><libx264>,,,CC BY-SA 3.0,True,False,False,False,True
28570,29099519,2015-03-17 12:49:25,,"<p>I have written an app in iOS that takes two video sources, one with moving character on a green screen and any other video. The program then uses the GPUImage framework to add a chroma key shader via OpenGL ES 2 and then merges each frame (so the bottom frame now shows where the green pixels are) and outputs to a new video file. This happens very quickly, faster than real time.</p>

<p>I have now been tasked with porting the app to Android. I thought it would be fairly straightforward. After doing some research I think I am wrong. There is an Android port of GPUImage but it does not handle video at the moment. I have done some research and come up with a very basic idea.</p>

<p>I was wondering if you think this approach is feasible:</p>

<p>Convert one video file to match resolution and type of other video using ffmpeg or JavaCV wrappers. </p>

<p>Read frame by frame of each video using ffmpeg as MediaMetadataRetriever is very slow and convert into some RGB format. Use shader to apply chroma key effect so both frames are merged.</p>

<p>Use ffmpeg to output result to a new file.</p>

<p>This sounds slow, but if it sounds feasible I will try it out. I am not at all sure about making sure the 2 video resolutions / bitrate etc match. One video will be fixed at 1280 * 720 and the other video source will come from the camera on the device so will be variable. Also I think ffmpeg means using NDK which is a whole world of pain I wanted to avoid.</p>

<p>I have a headache thinking about it. Any advice would be greatly appreciated.</p>
",2015-03-17 14:34:59,2015-03-17 14:34:59,Fast green screen video processing on android device,<android><opencv><ffmpeg><javacv><gpuimage>,,,CC BY-SA 3.0,True,False,False,False,True
28581,29117034,2015-03-18 08:18:46,,"<p>I am newbie here. I am working on OpenCV. I am trying to read and write a video file using OpenCV. My code is: </p>

<pre><code>VideoCapture inputVideo(""input.avi"");

    if (!inputVideo.isOpened())
    {
        std::cout &lt;&lt; ""!!! Input video could not be opened"" &lt;&lt; std::endl;
        return -1;
    }

    // Setup output video
    VideoWriter output_cap(""output.avi"",
                               inputVideo.get(CV_CAP_PROP_FOURCC),
                               inputVideo.get(CV_CAP_PROP_FPS),
                               cv::Size(inputVideo.get(CV_CAP_PROP_FRAME_WIDTH), inputVideo.get(CV_CAP_PROP_FRAME_HEIGHT)),1);

    Mat frame;

    output_cap.open(""/private/var/root/Desktop/output.avi"",
                    inputVideo.get(CV_CAP_PROP_FOURCC),
                    inputVideo.get(CV_CAP_PROP_FPS),
                    cv::Size(inputVideo.get(CV_CAP_PROP_FRAME_WIDTH), inputVideo.get(CV_CAP_PROP_FRAME_HEIGHT)),1);
    while (true)
    {
        if (!inputVideo.read(frame))
            break;

        imshow(""title"",frame);

        waitKey(100);
        output_cap.write(frame);
    }
</code></pre>

<p>Now here my problem is: When I try to write the frames using  <strong>output_cap.write(frame)</strong> , I am getting only 8kb file as my output video file. but the <strong>imshow(""title"",frame)</strong> function for viewing the frame works fine and views all the frame sequentially. Can you please tell me what i am doing wrong in it.</p>
",2015-03-20 03:50:47,2015-07-02 05:53:33,OpenCV VideoWriter write() function fails on MAC OS in C++,<macos><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
28673,27145616,2014-11-26 09:35:10,,"<p>I'm doing some video processing on android using ndk.</p>

<p>What I'm doing now is decode the video using ffmpeg, grab the frame, convert it to opencv mat, then overlay some images on it, then convert it back to avframe, encode it back to a video.</p>

<p>But it's very slow! It takes about 50 seconds to process a 480*480 video with 15 fps.</p>

<p>I tried to do this using opengl es, reading the result image using glReadPixels, but from what I understand, glReadPixels doesn't really work on some devices. So I had to give it up.</p>

<p>As I understand, I have some very expensive operations in my current workflow,</p>

<ol>
<li>covert a AVFrame from yuv to bgr color space, then convert to opencv mat</li>
<li>overlay a mat on another mat</li>
<li>covert a opencv mat to AVFrame, then convert the frame from bgr to yuv space, then encode it into a video.</li>
</ol>

<p>So, are there ways to improve my current workflow?</p>

<p>I'm adding multithread feature, but only devices with multicore cup can benefit from that.</p>
",,2017-09-22 04:41:10,video processing on android using ndk with ffmpeg and opencv is very slow,<android><c++><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
29037,29260763,2015-03-25 16:07:02,,"<p>I have static libraries of Opencv on my computer and I can link against them so my app does not need those libraries any more. I still need ffmpeg and other dependencies on a new computer though. I know I will need the static version of all the libraries. But some of them like tbb or gstreamer are not easy to find. Any better way?</p>
",,2015-03-25 16:14:09,OpenCv static compilation on Ubuntu,<c++><opencv><static-linking>,,,CC BY-SA 3.0,True,False,False,False,True
29075,29263090,2015-03-25 17:59:24,,"<p>I am currently work on a project which decode the received frame using ffmepg, after decode, I want to convert the AVFrame to opencv Mat frame so that I can play it on the imShow function. </p>

<p>What I have is the byte stream, I read it into buffer, decoded to AVFrame:</p>

<pre><code>f = fopen(filename, ""rb"");
if (!f) {
    fprintf(stderr, ""Could not open %s\n"", filename);
    exit(1);
}

frame = avcodec_alloc_frame();
if (!frame) {
    fprintf(stderr, ""Could not allocate video frame\n"");
    exit(1);
}

framergb = avcodec_alloc_frame();
if (!framergb) {
    fprintf(stderr, ""Could not allocate video frame\n"");
    exit(1);
}

bytes=avpicture_get_size(PIX_FMT_RGB24, CAMER_WIDTH, CAMER_HEIGHT);
buffer=(uint8_t *)av_malloc(bytes*sizeof(uint8_t));
avpicture_fill((AVPicture *)framergb, buffer, PIX_FMT_RGB24,
                CAMER_WIDTH, CAMER_HEIGHT);

frame_count = 0;
for(;;) {
    avpkt.size = fread(inbuf, 1, INBUF_SIZE, f);
    if (avpkt.size == 0)
        break;

    avpkt.data = inbuf;
    while (avpkt.size &gt; 0)
        if (decode_write_frame(outfilename, c, frame, &amp;frame_count, &amp;avpkt, 0) &lt; 0)
            exit(1);
}

avpkt.data = NULL;
avpkt.size = 0;
decode_write_frame(outfilename, c, frame, &amp;frame_count, &amp;avpkt, 1);
</code></pre>

<p>and the <strong>decode_write_frame</strong> defined like this:</p>

<pre><code>static int decode_write_frame(const char *outfilename, AVCodecContext *avctx,AVFrame *frame, int *frame_count, AVPacket *pkt, int last)
{
int len, got_frame;
char buf[1024];
struct SwsContext *convert_ctx;

len = avcodec_decode_video2(avctx, frame, &amp;got_frame, pkt);
if (len &lt; 0) {
    fprintf(stderr, ""Error while decoding frame %d\n"", *frame_count);
    return len;
}
if (got_frame) {
    printf(""Saving %sframe %3d\n"", last ? ""last "" : """", *frame_count);
    fflush(stdout);

int w = avctx-&gt;width;
int h = avctx-&gt;height;
convert_ctx = sws_getContext(w, h, avctx-&gt;pix_fmt,
                    w, h, PIX_FMT_RGB24, SWS_BICUBIC,
                    NULL, NULL, NULL);

if(convert_ctx == NULL) {
    fprintf(stderr, ""Cannot initialize the conversion context!\n"");
    exit(1);
}

sws_scale(convert_ctx, frame-&gt;data,
            frame-&gt;linesize, 0,
            h,
            framergb-&gt;data, framergb-&gt;linesize);

    /* the picture is allocated by the decoder, no need to free it */
    snprintf(buf, sizeof(buf), outfilename, *frame_count);

    bmp_save(framergb-&gt;data[0], framergb-&gt;linesize[0],
             avctx-&gt;width, avctx-&gt;height, buf);
    (*frame_count)++;
}
if (pkt-&gt;data) {
    pkt-&gt;size -= len;
    pkt-&gt;data += len;
}
return 0;
}
</code></pre>

<p>here the <strong>bmp_save()</strong> is defined by the original code author to realise AVFrame to bmp picture conversion. I want to modify here so that let the AVFrame convert to opencv Mat frame. How should I do this conversion?</p>

<p>Thanks in advance.</p>
",,2015-03-26 06:51:16,ffmpeg AVFrame to opencv Mat conversion,<c++><opencv><ffmpeg><video-streaming>,,,CC BY-SA 3.0,True,True,False,False,True
29096,29279873,2015-03-26 13:35:26,,"<p>I am using FFmpegFrameRecorder to capture preview frames from camera. I am using this setting:</p>

<pre><code>mVideoRecorder = new FFmpegFrameRecorder(mVideoPath, 300, 300, 1);
mVideoRecorder.setFormat(""mp4"");
mVideoRecorder.setSampleRate(44100);
mVideoRecorder.setFrameRate(30);
mVideoRecorder.setVideoCodec(avcodec.AV_CODEC_ID_H264);
mVideoRecorder.setAudioCodec(avcodec.AV_CODEC_ID_AAC);
mVideoRecorder.setVideoQuality(0);
mVideoRecorder.setAudioQuality(0);
mVideoRecorder.setVideoBitrate(768000);
mVideoRecorder.setAudioBitrate(128000);
mVideoRecorder.setGopSize(1);
</code></pre>

<p>After I have finished capturing all frames by calling .record(IplImage) method I call mVideoRecorder.stop().</p>

<p>But from time to time stop() method throws</p>

<pre><code>org.bytedeco.javacv.FrameRecorder$Exception: av_interleaved_write_frame() error -22 while writing interleaved video frame.
at org.bytedeco.javacv.FFmpegFrameRecorder.record(FFmpegFrameRecorder.java:727)
at org.bytedeco.javacv.FFmpegFrameRecorder.stop(FFmpegFrameRecorder.java:613)
</code></pre>

<p>I have not seen any regularity in this behaviour nor have been able to found what error -22 is. And after that no ffmpeg call on file in mVideoPath works (I guess that file is not even valid due that error).</p>

<p>I would really appreciate any help with this issue, thanks :)</p>
",2015-03-26 14:34:05,2015-03-26 14:34:05,Android JavaCV FFmpegFrameRecorder.stop() throws exception,<android><ffmpeg><record><h.264><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
29128,29375778,2015-03-31 18:25:15,,"<p>I have been trying for hours to read a xvid .avi file on my mac with python 2.7 and opencv. I have installed all the latest versions using brew and opencv is working in python and I can open images and other movie files but when I try to read a xvid avi file with </p>

<pre><code>cap.cv2.VideoCapture('video.AVI')
ret, frame = cap.read()
</code></pre>

<p>It fails as frame is empty. I have installed ffmpeg with brew and x264 as well and ran brew doctor. I am totally lost what to do now. Happy to provide more information if needed. I hope someone can help me, thanks.</p>
",,2017-02-15 14:27:07,Cannot read xvid video with opencv in python on mac,<python><macos><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
29136,29266651,2015-03-25 21:14:32,,"<p>Here is my make log:</p>

<pre><code>[  3%] Built target libwebp
[  3%] Built target opencv_cudev
[  7%] Built target opencv_ts_pch_dephelp
[  7%] Built target pch_Generate_opencv_ts
[  7%] Built target opencv_core_pch_dephelp
[  7%] Built target pch_Generate_opencv_core
[ 11%] Built target opencv_core
[ 11%] Built target opencv_imgproc_pch_dephelp
[ 11%] Built target pch_Generate_opencv_imgproc
[ 15%] Built target opencv_imgproc
[ 15%] Built target opencv_imgcodecs_pch_dephelp
[ 15%] Built target pch_Generate_opencv_imgcodecs
[ 15%] Built target opencv_imgcodecs
[ 15%] Built target opencv_videoio_pch_dephelp
[ 15%] Built target pch_Generate_opencv_videoio
Linking CXX shared library ../../lib/libopencv_videoio.so
/usr/bin/ld: /usr/local/lib/libavformat.a(rmsipr.o): relocation R_X86_64_32 against `.rodata' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavformat.a: error adding symbols: Bad value
collect2: error: ld returned 1 exit status
make[2]: *** [lib/libopencv_videoio.so.3.0.0] Error 1
make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I tried to re-build ffmpeg from source, in the beginning, make in ffmpeg meets similiar problem but after I configure using this command:</p>

<pre><code>./configure --prefix=.. --enable-shared --enable-gpl --enable-version3 --enable-runtime-cpudetect --disable-outdev=sdl --disable-opencl --enable-libmp3lame --enable-libx264 --cc=""gcc -m64 -fPIC"" --extra-cflags=""-I../include"" --extra-ldflags=""-L../lib -ldl""
</code></pre>

<p>the ffmpeg is built.</p>

<p>But the opencv make error is still there..</p>

<p>Searched a lot and cannot find a solution.</p>
",,2015-03-30 15:36:12,"Ubuntu 14.04 Install opencv3.0, meet relocation error",<opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
29139,27183307,2014-11-28 06:44:05,,"<p>I am doing javacv with android since yesterday and getting error while generating video from image (IplImage) using <strong>FFmpegFrameRecorder</strong> or <strong>FrameRecorder</strong> while getting succes in imagefiltering using <strong>cvCvtColor</strong> and <strong>cvCvtColor</strong>.</p>

<p><img src=""https://i.stack.imgur.com/BX8KW.png"" alt=""grayscale""></p>

<p>As shown in picture , <strong>Grayscale</strong> and <strong>flip</strong> filter is done by clicking second Button <strong>(Apply Effect)</strong>.</p>

<p>But when clicking <strong>(Make Video)</strong> it crashes. </p>

<p>Here is my code for making video from image.</p>

<pre><code>String path = Environment.getExternalStorageDirectory().getPath() + ""/test.mp4"";
Log.i(""path"", path);
FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(path, 256, 256);
try {

    recorder.setVideoCodec(avcodec.AV_CODEC_ID_MPEG4);
    // recorder.setCodecID(avcodec.AV_CODEC_ID_H263);
    recorder.setFormat(""mp4"");
    recorder.setPixelFormat(avutil.AV_PIX_FMT_YUV420P);
    recorder.start();
    for (int i = 0; i &lt; 10; i++) {

        recorder.record(image);
    }
    recorder.stop();
} catch (Exception e) {

    e.printStackTrace();
}
</code></pre>

<p><strong>image</strong> is of type IplImage</p>

<p>getting error on <strong>recorder</strong> object creation.</p>

<p>I am using 2 devices </p>

<p>1)Asus zenfone 5</p>

<p><strong>Stacktrace</strong></p>

<pre><code>Caused by: java.lang.NoClassDefFoundError: java.lang.ClassNotFoundException: org.bytedeco.javacpp.avcodec
            at org.bytedeco.javacpp.Loader.load(Loader.java:387)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.avformat.&lt;clinit&gt;(avformat.java:13)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;clinit&gt;(FFmpegFrameRecorder.java:106)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.makeVideo(MainActivity.java:191)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:180)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:152)
            at android.os.AsyncTask$2.call(AsyncTask.java:288)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:841)
     Caused by: java.lang.ClassNotFoundException: org.bytedeco.javacpp.avcodec
            at java.lang.Class.classForName(Native Method)
            at java.lang.Class.forName(Class.java:251)
            at org.bytedeco.javacpp.Loader.load(Loader.java:385)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.avformat.&lt;clinit&gt;(avformat.java:13)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;clinit&gt;(FFmpegFrameRecorder.java:106)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.makeVideo(MainActivity.java:191)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:180)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:152)
            at android.os.AsyncTask$2.call(AsyncTask.java:288)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:841)
     Caused by: java.lang.UnsatisfiedLinkError: dlopen failed: ""/data/app-lib/com.example.javacvex1-1/libjniavcodec.so"" has unexpected e_machine: 40
            at java.lang.Runtime.loadLibrary(Runtime.java:364)
            at java.lang.System.loadLibrary(System.java:526)
            at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:535)
            at org.bytedeco.javacpp.Loader.load(Loader.java:410)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.avcodec.&lt;clinit&gt;(avcodec.java:12)
            at java.lang.Class.classForName(Native Method)
            at java.lang.Class.forName(Class.java:251)
            at org.bytedeco.javacpp.Loader.load(Loader.java:385)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.avformat.&lt;clinit&gt;(avformat.java:13)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;clinit&gt;(FFmpegFrameRecorder.java:106)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.makeVideo(MainActivity.java:191)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:180)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:152)
            at android.os.AsyncTask$2.call(AsyncTask.java:288)
            at java.util.concurrent.FutureTask.run(FutureTask.java:237)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:231)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
            at java.lang.Thread.run(Thread.java:841)
     Caused by: java.lang.UnsatisfiedLinkError: dlopen failed: ""/data/app-lib/com.example.javacvex1-1/libavcodec.so"" has unexpected e_machine: 40
</code></pre>

<p>2) Htc me tablet</p>

<p><strong>(Stacktrace)</strong></p>

<pre><code>Caused by: java.lang.ExceptionInInitializerError
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.makeVideo(MainActivity.java:191)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:180)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:152)
            at android.os.AsyncTask$2.call(AsyncTask.java:264)
            at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
            at java.util.concurrent.FutureTask.run(FutureTask.java:137)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
            at java.lang.Thread.run(Thread.java:856)
     Caused by: java.lang.ExceptionInInitializerError
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;clinit&gt;(FFmpegFrameRecorder.java:106)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.makeVideo(MainActivity.java:191)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:180)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:152)
            at android.os.AsyncTask$2.call(AsyncTask.java:264)
            at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
            at java.util.concurrent.FutureTask.run(FutureTask.java:137)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
            at java.lang.Thread.run(Thread.java:856)
     Caused by: java.lang.ExceptionInInitializerError
            at java.lang.Class.classForName(Native Method)
            at java.lang.Class.forName(Class.java:217)
            at org.bytedeco.javacpp.Loader.load(Loader.java:385)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.avformat.&lt;clinit&gt;(avformat.java:13)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;clinit&gt;(FFmpegFrameRecorder.java:106)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.makeVideo(MainActivity.java:191)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:180)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:152)
            at android.os.AsyncTask$2.call(AsyncTask.java:264)
            at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
            at java.util.concurrent.FutureTask.run(FutureTask.java:137)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
            at java.lang.Thread.run(Thread.java:856)
     Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1936]:    76 could not load needed library 'libavcodec.so' for 'libjniavcodec.so' (find_library[1199]:    76 'libavcodec.so' failed to load previously)
            at java.lang.Runtime.loadLibrary(Runtime.java:370)
            at java.lang.System.loadLibrary(System.java:535)
            at org.bytedeco.javacpp.Loader.loadLibrary(Loader.java:535)
            at org.bytedeco.javacpp.Loader.load(Loader.java:410)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.avcodec.&lt;clinit&gt;(avcodec.java:12)
            at java.lang.Class.classForName(Native Method)
            at java.lang.Class.forName(Class.java:217)
            at org.bytedeco.javacpp.Loader.load(Loader.java:385)
            at org.bytedeco.javacpp.Loader.load(Loader.java:353)
            at org.bytedeco.javacpp.avformat.&lt;clinit&gt;(avformat.java:13)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;clinit&gt;(FFmpegFrameRecorder.java:106)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.makeVideo(MainActivity.java:191)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:180)
            at com.example.javacvex1.MainActivity$asyncImageProcVideo.doInBackground(MainActivity.java:152)
            at android.os.AsyncTask$2.call(AsyncTask.java:264)
            at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
            at java.util.concurrent.FutureTask.run(FutureTask.java:137)
            at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
            at java.lang.Thread.run(Thread.java:856)
     Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1936]:    76 could not load needed library 'libswresample.so' for 'libavcodec.so' (load_library[1091]: Library 'libswresample.so' not found)
</code></pre>

<p>At last I am putting my <strong>build.gradle</strong> with <strong>jniLibs</strong> on left side.</p>

<p><img src=""https://i.stack.imgur.com/abZOW.png"" alt=""enter image description here""></p>

<p>No luck with answers from other questions. Stuck since last 24 hours. :(</p>

<p>Any help will be great.</p>
",2014-11-28 07:22:19,2014-12-02 06:31:41,JavaCV generate video from images Crashes,<android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
29156,29394968,2015-04-01 15:33:45,,"<p>I write simple app for android whick use FFmpeg + JavaCV. I can capture image from camera and can recorde video. But want to rotate frame when record video, don't can :-( </p>

<p><a href=""http://i.stack.imgur.com/h42rY.png"" rel=""nofollow"">Please see image</a></p>

<p>Stop and save code:</p>

<pre><code>public void stopRecording() {

        runAudioThread = false;
        try {
            audioThread.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        audioRecordRunnable = null;
        audioThread = null;


        if (recorder != null &amp;&amp; recording) {
            if (RECORD_LENGTH &gt; 0) {
                Log.v(LOG_TAG,""Writing frames"");
                try {
                    int firstIndex = imagesIndex % samples.length;
                    int lastIndex = (imagesIndex - 1) % images.length;
                    if (imagesIndex &lt;= images.length) {
                        firstIndex = 0;
                        lastIndex = imagesIndex - 1;
                    }
                    if ((startTime = timestamps[lastIndex] - RECORD_LENGTH * 1000000L) &lt; 0) {
                        startTime = 0;
                    }
                    if (lastIndex &lt; firstIndex) {
                        lastIndex += images.length;
                    }
                    for (int i = firstIndex; i &lt;= lastIndex; i++) {
                        long t = timestamps[i % timestamps.length] - startTime;
                        if (t &gt;= 0) {
                            if (t &gt; recorder.getTimestamp()) {
                                recorder.setTimestamp(t);
                            }
                            recorder.record(images[i % images.length]);
                        }
                    }

                    firstIndex = samplesIndex % samples.length;
                    lastIndex = (samplesIndex - 1) % samples.length;
                    if (samplesIndex &lt;= samples.length) {
                        firstIndex = 0;
                        lastIndex = samplesIndex - 1;
                    }
                    if (lastIndex &lt; firstIndex) {
                        lastIndex += samples.length;
                    }
                    for (int i = firstIndex; i &lt;= lastIndex; i++) {
                        recorder.recordSamples(samples[i % samples.length]);
                    }
                } catch (FFmpegFrameRecorder.Exception e) {
                    Log.v(LOG_TAG,e.getMessage());
                    e.printStackTrace();
                }
            }

            recording = false;
            Log.v(LOG_TAG,""Finishing recording, calling stop and release on recorder"");
            try {
                recorder.stop();
                recorder.release();
            } catch (FFmpegFrameRecorder.Exception e) {
                e.printStackTrace();
            }
            recorder = null;

        }
    }
</code></pre>

<p>in step <code>recorder.record(images[i % images.length]);</code> 
need rotate frame (images parameter)</p>

<p>How can help me ? Thank you. </p>
",2015-04-01 16:21:16,2015-04-01 16:21:16,rotate Frame in JavaCV,<java><android><image><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
29212,29397965,2015-04-01 18:19:18,,"<p>I have tried to <code>make</code> OpenVC following the <a href=""http://docs.opencv.org/3.0-last-rst/doc/tutorials/introduction/linux_install/linux_install.html"" rel=""nofollow"">instructions</a> on their website:</p>

<pre><code>sudo apt-get install build-essential
sudo apt-get install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev
sudo apt-get install python-dev python-numpy libtbb2 libtbb-dev libjpeg-dev libpng-dev libtiff-dev libjasper-dev libdc1394-22-dev

unzip opencv-2.4.10.zip
mkdir build
cd build

cmake -DCMAKE_BUILD_TYPE=Release \
      -DENABLE_AVX=ON \
      -DENABLE_FAST_MATH=ON \
      -DENABLE_SSE=ON \
      -DENABLE_SSE2=ON \
      -DENABLE_SSE3=ON \
      -DENABLE_SSE41=ON \
      -DENABLE_SSE42=ON \
      -DENABLE_SSSE3=ON \
      /absolute/path/to/opencv-2.4.10

make -j7
</code></pre>

<p>It eventually fails with the following output:</p>

<pre><code>8:7: error: ‘CODEC_ID_H263P’ was not declared in this scope
     { CODEC_ID_H263P, MKTAG('v', 'i', 'v', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:120:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('F', 'M', 'P', '4') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:121:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('D', 'I', 'V', 'X') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:122:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('D', 'X', '5', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:123:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('X', 'V', 'I', 'D') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:124:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('M', 'P', '4', 'S') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:125:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('M', '4', 'S', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:126:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG(0x04, 0, 0, 0) }, /* some broken avi use this */
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:129:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('D', 'I', 'V', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:130:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('B', 'L', 'Z', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:131:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('m', 'p', '4', 'v') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:132:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('U', 'M', 'P', '4') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:133:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('W', 'V', '1', 'F') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:134:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('S', 'E', 'D', 'G') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:136:7: error: ‘CODEC_ID_MPEG4’ was not declared in this scope
     { CODEC_ID_MPEG4, MKTAG('R', 'M', 'P', '4') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:138:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '3') }, /* default signature when using MSMPEG4 */
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:139:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('M', 'P', '4', '3') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:142:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('M', 'P', 'G', '3') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:143:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '5') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:144:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '6') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:145:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('D', 'I', 'V', '4') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:146:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('A', 'P', '4', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:147:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('C', 'O', 'L', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:148:7: error: ‘CODEC_ID_MSMPEG4V3’ was not declared in this scope
     { CODEC_ID_MSMPEG4V3, MKTAG('C', 'O', 'L', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:150:7: error: ‘CODEC_ID_MSMPEG4V2’ was not declared in this scope
     { CODEC_ID_MSMPEG4V2, MKTAG('M', 'P', '4', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:153:7: error: ‘CODEC_ID_MSMPEG4V2’ was not declared in this scope
     { CODEC_ID_MSMPEG4V2, MKTAG('D', 'I', 'V', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:155:7: error: ‘CODEC_ID_MSMPEG4V1’ was not declared in this scope
     { CODEC_ID_MSMPEG4V1, MKTAG('M', 'P', 'G', '4') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:157:7: error: ‘CODEC_ID_WMV1’ was not declared in this scope
     { CODEC_ID_WMV1, MKTAG('W', 'M', 'V', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:160:7: error: ‘CODEC_ID_WMV2’ was not declared in this scope
     { CODEC_ID_WMV2, MKTAG('W', 'M', 'V', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:161:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', 's', 'd') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:162:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', 'h', 'd') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:163:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', 's', 'l') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:164:7: error: ‘CODEC_ID_DVVIDEO’ was not declared in this scope
     { CODEC_ID_DVVIDEO, MKTAG('d', 'v', '2', '5') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:165:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('m', 'p', 'g', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:166:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('m', 'p', 'g', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:167:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('m', 'p', 'g', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:168:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('M', 'P', 'E', 'G') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:169:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('P', 'I', 'M', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:170:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, MKTAG('V', 'C', 'R', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:171:7: error: ‘CODEC_ID_MPEG1VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG1VIDEO, 0x10000001 },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:172:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, 0x10000002 },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:173:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('D', 'V', 'R', ' ') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:174:7: error: ‘CODEC_ID_MPEG2VIDEO’ was not declared in this scope
     { CODEC_ID_MPEG2VIDEO, MKTAG('M', 'M', 'E', 'S') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:175:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('M', 'J', 'P', 'G') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:176:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('L', 'J', 'P', 'G') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:177:7: error: ‘CODEC_ID_LJPEG’ was not declared in this scope
     { CODEC_ID_LJPEG, MKTAG('L', 'J', 'P', 'G') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:178:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('J', 'P', 'G', 'L') }, /* Pegasus lossless JPEG */
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:179:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('M', 'J', 'L', 'S') }, /* JPEG-LS custom FOURCC for avi - decoder */
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:180:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('j', 'p', 'e', 'g') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:181:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('I', 'J', 'P', 'G') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:182:7: error: ‘CODEC_ID_MJPEG’ was not declared in this scope
     { CODEC_ID_MJPEG, MKTAG('A', 'V', 'R', 'n') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:183:7: error: ‘CODEC_ID_HUFFYUV’ was not declared in this scope
     { CODEC_ID_HUFFYUV, MKTAG('H', 'F', 'Y', 'U') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:184:7: error: ‘CODEC_ID_FFVHUFF’ was not declared in this scope
     { CODEC_ID_FFVHUFF, MKTAG('F', 'F', 'V', 'H') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:185:7: error: ‘CODEC_ID_CYUV’ was not declared in this scope
     { CODEC_ID_CYUV, MKTAG('C', 'Y', 'U', 'V') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:186:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, 0 },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:187:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('I', '4', '2', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:188:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', 'U', 'Y', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:189:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', '4', '2', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:190:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', 'V', '1', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:191:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('U', 'Y', 'V', 'Y') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:192:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('I', 'Y', 'U', 'V') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:193:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('Y', '8', '0', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:194:7: error: ‘CODEC_ID_RAWVIDEO’ was not declared in this scope
     { CODEC_ID_RAWVIDEO, MKTAG('H', 'D', 'Y', 'C') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:195:7: error: ‘CODEC_ID_INDEO3’ was not declared in this scope
     { CODEC_ID_INDEO3, MKTAG('I', 'V', '3', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:196:7: error: ‘CODEC_ID_INDEO3’ was not declared in this scope
     { CODEC_ID_INDEO3, MKTAG('I', 'V', '3', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:197:7: error: ‘CODEC_ID_VP3’ was not declared in this scope
     { CODEC_ID_VP3, MKTAG('V', 'P', '3', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:198:7: error: ‘CODEC_ID_VP3’ was not declared in this scope
     { CODEC_ID_VP3, MKTAG('V', 'P', '3', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:199:7: error: ‘CODEC_ID_ASV1’ was not declared in this scope
     { CODEC_ID_ASV1, MKTAG('A', 'S', 'V', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:200:7: error: ‘CODEC_ID_ASV2’ was not declared in this scope
     { CODEC_ID_ASV2, MKTAG('A', 'S', 'V', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:201:7: error: ‘CODEC_ID_VCR1’ was not declared in this scope
     { CODEC_ID_VCR1, MKTAG('V', 'C', 'R', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:202:7: error: ‘CODEC_ID_FFV1’ was not declared in this scope
     { CODEC_ID_FFV1, MKTAG('F', 'F', 'V', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:203:7: error: ‘CODEC_ID_XAN_WC4’ was not declared in this scope
     { CODEC_ID_XAN_WC4, MKTAG('X', 'x', 'a', 'n') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:204:7: error: ‘CODEC_ID_MSRLE’ was not declared in this scope
     { CODEC_ID_MSRLE, MKTAG('m', 'r', 'l', 'e') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:205:7: error: ‘CODEC_ID_MSRLE’ was not declared in this scope
     { CODEC_ID_MSRLE, MKTAG(0x1, 0x0, 0x0, 0x0) },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:206:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('M', 'S', 'V', 'C') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:207:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('m', 's', 'v', 'c') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:208:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('C', 'R', 'A', 'M') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:209:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('c', 'r', 'a', 'm') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:210:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('W', 'H', 'A', 'M') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:211:7: error: ‘CODEC_ID_MSVIDEO1’ was not declared in this scope
     { CODEC_ID_MSVIDEO1, MKTAG('w', 'h', 'a', 'm') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:212:7: error: ‘CODEC_ID_CINEPAK’ was not declared in this scope
     { CODEC_ID_CINEPAK, MKTAG('c', 'v', 'i', 'd') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:213:7: error: ‘CODEC_ID_TRUEMOTION1’ was not declared in this scope
     { CODEC_ID_TRUEMOTION1, MKTAG('D', 'U', 'C', 'K') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:214:7: error: ‘CODEC_ID_MSZH’ was not declared in this scope
     { CODEC_ID_MSZH, MKTAG('M', 'S', 'Z', 'H') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:215:7: error: ‘CODEC_ID_ZLIB’ was not declared in this scope
     { CODEC_ID_ZLIB, MKTAG('Z', 'L', 'I', 'B') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:216:7: error: ‘CODEC_ID_SNOW’ was not declared in this scope
     { CODEC_ID_SNOW, MKTAG('S', 'N', 'O', 'W') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:217:7: error: ‘CODEC_ID_4XM’ was not declared in this scope
     { CODEC_ID_4XM, MKTAG('4', 'X', 'M', 'V') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:218:7: error: ‘CODEC_ID_FLV1’ was not declared in this scope
     { CODEC_ID_FLV1, MKTAG('F', 'L', 'V', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:219:7: error: ‘CODEC_ID_SVQ1’ was not declared in this scope
     { CODEC_ID_SVQ1, MKTAG('s', 'v', 'q', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:220:7: error: ‘CODEC_ID_TSCC’ was not declared in this scope
     { CODEC_ID_TSCC, MKTAG('t', 's', 'c', 'c') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:221:7: error: ‘CODEC_ID_ULTI’ was not declared in this scope
     { CODEC_ID_ULTI, MKTAG('U', 'L', 'T', 'I') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:222:7: error: ‘CODEC_ID_VIXL’ was not declared in this scope
     { CODEC_ID_VIXL, MKTAG('V', 'I', 'X', 'L') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:223:7: error: ‘CODEC_ID_QPEG’ was not declared in this scope
     { CODEC_ID_QPEG, MKTAG('Q', 'P', 'E', 'G') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:224:7: error: ‘CODEC_ID_QPEG’ was not declared in this scope
     { CODEC_ID_QPEG, MKTAG('Q', '1', '.', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:225:7: error: ‘CODEC_ID_QPEG’ was not declared in this scope
     { CODEC_ID_QPEG, MKTAG('Q', '1', '.', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:226:7: error: ‘CODEC_ID_WMV3’ was not declared in this scope
     { CODEC_ID_WMV3, MKTAG('W', 'M', 'V', '3') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:227:7: error: ‘CODEC_ID_LOCO’ was not declared in this scope
     { CODEC_ID_LOCO, MKTAG('L', 'O', 'C', 'O') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:228:7: error: ‘CODEC_ID_THEORA’ was not declared in this scope
     { CODEC_ID_THEORA, MKTAG('t', 'h', 'e', 'o') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:230:7: error: ‘CODEC_ID_WNV1’ was not declared in this scope
     { CODEC_ID_WNV1, MKTAG('W', 'N', 'V', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:231:7: error: ‘CODEC_ID_AASC’ was not declared in this scope
     { CODEC_ID_AASC, MKTAG('A', 'A', 'S', 'C') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:232:7: error: ‘CODEC_ID_INDEO2’ was not declared in this scope
     { CODEC_ID_INDEO2, MKTAG('R', 'T', '2', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:233:7: error: ‘CODEC_ID_FRAPS’ was not declared in this scope
     { CODEC_ID_FRAPS, MKTAG('F', 'P', 'S', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:234:7: error: ‘CODEC_ID_TRUEMOTION2’ was not declared in this scope
     { CODEC_ID_TRUEMOTION2, MKTAG('T', 'M', '2', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:237:7: error: ‘CODEC_ID_FLASHSV’ was not declared in this scope
     { CODEC_ID_FLASHSV, MKTAG('F', 'S', 'V', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:238:7: error: ‘CODEC_ID_JPEGLS’ was not declared in this scope
     { CODEC_ID_JPEGLS,MKTAG('M', 'J', 'L', 'S') }, /* JPEG-LS custom FOURCC for avi - encoder */
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:239:7: error: ‘CODEC_ID_VC1’ was not declared in this scope
     { CODEC_ID_VC1, MKTAG('W', 'V', 'C', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:240:7: error: ‘CODEC_ID_VC1’ was not declared in this scope
     { CODEC_ID_VC1, MKTAG('W', 'M', 'V', 'A') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:241:7: error: ‘CODEC_ID_CSCD’ was not declared in this scope
     { CODEC_ID_CSCD, MKTAG('C', 'S', 'C', 'D') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:242:7: error: ‘CODEC_ID_ZMBV’ was not declared in this scope
     { CODEC_ID_ZMBV, MKTAG('Z', 'M', 'B', 'V') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:243:7: error: ‘CODEC_ID_KMVC’ was not declared in this scope
     { CODEC_ID_KMVC, MKTAG('K', 'M', 'V', 'C') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:246:7: error: ‘CODEC_ID_VP5’ was not declared in this scope
     { CODEC_ID_VP5, MKTAG('V', 'P', '5', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:247:7: error: ‘CODEC_ID_VP6’ was not declared in this scope
     { CODEC_ID_VP6, MKTAG('V', 'P', '6', '0') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:248:7: error: ‘CODEC_ID_VP6’ was not declared in this scope
     { CODEC_ID_VP6, MKTAG('V', 'P', '6', '1') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:249:7: error: ‘CODEC_ID_VP6’ was not declared in this scope
     { CODEC_ID_VP6, MKTAG('V', 'P', '6', '2') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:250:7: error: ‘CODEC_ID_VP6F’ was not declared in this scope
     { CODEC_ID_VP6F, MKTAG('V', 'P', '6', 'F') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:251:7: error: ‘CODEC_ID_JPEG2000’ was not declared in this scope
     { CODEC_ID_JPEG2000, MKTAG('M', 'J', '2', 'C') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:252:7: error: ‘CODEC_ID_VMNC’ was not declared in this scope
     { CODEC_ID_VMNC, MKTAG('V', 'M', 'n', 'c') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:256:7: error: ‘CODEC_ID_TARGA’ was not declared in this scope
     { CODEC_ID_TARGA, MKTAG('t', 'g', 'a', ' ') },
       ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/ffmpeg_codecs.hpp:258:7: error: ‘CODEC_ID_NONE’ was not declared in this scope
     { CODEC_ID_NONE, 0 },
       ^
In file included from /home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg.cpp:45:0:
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘double CvCapture_FFMPEG::getProperty(int)’:
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg_impl.hpp:773:33: error: ‘AVStream’ has no member named ‘r_frame_rate’
         return av_q2d(video_st-&gt;r_frame_rate);
                                 ^
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘double CvCapture_FFMPEG::get_fps()’:
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg_impl.hpp:820:49: error: ‘AVStream’ has no member named ‘r_frame_rate’
     double fps = r2d(ic-&gt;streams[video_stream]-&gt;r_frame_rate);
                                                 ^
In file included from /home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg.cpp:45:0:
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg_impl.hpp: In function ‘int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)’:
/home/antoniopedro/opencv-2.4.9/modules/highgui/src/cap_ffmpeg_impl.hpp:1236:72: error: ‘avcodec_encode_video’ was not declared in this scope
         out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
                                                                        ^
modules/highgui/CMakeFiles/opencv_highgui.dir/build.make:122: recipe for target 'modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o' failed
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o] Error 1
CMakeFiles/Makefile2:1724: recipe for target 'modules/highgui/CMakeFiles/opencv_highgui.dir/all' failed
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
Makefile:133: recipe for target 'all' failed
make: *** [all] Error 2
</code></pre>

<p>How can I identify the issue with the build process?</p>
",2015-04-14 03:09:44,2019-03-06 15:53:22,Unable to make Opencv 2.4.9 Ubuntu 14.10,<opencv><ubuntu><build-process>,,,CC BY-SA 3.0,True,False,False,False,True
29305,29405085,2015-04-02 04:40:47,,"<p>I have next code for rotate video</p>

<p>OpenCVFrameConverter.ToIplImage converter2 = new OpenCVFrameConverter.ToIplImage();</p>

<pre><code>for (int i = firstIndex; i &lt;= lastIndex; i++) {
    long t = timestamps[i % timestamps.length] - startTime;
    if (t &gt;= 0) {
        if (t &gt; recorder.getTimestamp()) {
            recorder.setTimestamp(t);
        }
        Frame g = converter2.convert(rotate(converter2.convertToIplImage(images[i % images.length]),9 0));
    recorder.record(g);
    }
}
</code></pre>

<p>images[i] - Frame in JavaCV
after in video have green lines</p>

<p><img src=""https://i.stack.imgur.com/nGzw5.png"" alt=""""></p>

<p>UPDATE
Convertation function </p>

<pre><code>/*
 * Copyright (C) 2015 Samuel Audet
 *
 * This file is part of JavaCV.
 *
 * JavaCV is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version (subject to the ""Classpath"" exception
 * as provided in the LICENSE.txt file that accompanied this code).
 *
 * JavaCV is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with JavaCV.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */

package com.example.vvardanyan.ffmpeg;

import org.bytedeco.javacpp.BytePointer;
import org.bytedeco.javacpp.Pointer;

import java.nio.Buffer;

import static org.bytedeco.javacpp.opencv_core.CV_16S;
import static org.bytedeco.javacpp.opencv_core.CV_16U;
import static org.bytedeco.javacpp.opencv_core.CV_32F;
import static org.bytedeco.javacpp.opencv_core.CV_32S;
import static org.bytedeco.javacpp.opencv_core.CV_64F;
import static org.bytedeco.javacpp.opencv_core.CV_8S;
import static org.bytedeco.javacpp.opencv_core.CV_8U;
import static org.bytedeco.javacpp.opencv_core.CV_MAKETYPE;
import static org.bytedeco.javacpp.opencv_core.IPL_DEPTH_16S;
import static org.bytedeco.javacpp.opencv_core.IPL_DEPTH_16U;
import static org.bytedeco.javacpp.opencv_core.IPL_DEPTH_32F;
import static org.bytedeco.javacpp.opencv_core.IPL_DEPTH_32S;
import static org.bytedeco.javacpp.opencv_core.IPL_DEPTH_64F;
import static org.bytedeco.javacpp.opencv_core.IPL_DEPTH_8S;
import static org.bytedeco.javacpp.opencv_core.IPL_DEPTH_8U;
import static org.bytedeco.javacpp.opencv_core.IplImage;
import static org.bytedeco.javacpp.opencv_core.Mat;

/**
 * A utility class to map data between {@link Frame} and {@link IplImage} or {@link Mat}.
 * Since this is an abstract class, one must choose between two concrete classes:
 * {@link ToIplImage} or {@link ToMat}.
 *
 * @author Samuel Audet
 */
public abstract class OpenCVFrameConverter&lt;F&gt; extends FrameConverter&lt;F&gt; {
    IplImage img;
    Mat mat;

    public static class ToIplImage extends OpenCVFrameConverter&lt;IplImage&gt; {
        @Override public IplImage convert(Frame frame) { return convertToIplImage(frame); }
    }

    public static class ToMat extends OpenCVFrameConverter&lt;Mat&gt; {
        @Override public Mat convert(Frame frame) { return convertToMat(frame); }
    }

    public static int getFrameDepth(int depth) {
        switch (depth) {
            case IPL_DEPTH_8U:  case CV_8U:  return Frame.DEPTH_UBYTE;
            case IPL_DEPTH_8S:  case CV_8S:  return Frame.DEPTH_BYTE;
            case IPL_DEPTH_16U: case CV_16U: return Frame.DEPTH_USHORT;
            case IPL_DEPTH_16S: case CV_16S: return Frame.DEPTH_SHORT;
            case IPL_DEPTH_32F: case CV_32F: return Frame.DEPTH_FLOAT;
            case IPL_DEPTH_32S: case CV_32S: return Frame.DEPTH_INT;
            case IPL_DEPTH_64F: case CV_64F: return Frame.DEPTH_DOUBLE;
            default: return -1;
        }
    }

    public static int getIplImageDepth(Frame frame) {
        switch (frame.imageDepth) {
            case Frame.DEPTH_UBYTE:  return IPL_DEPTH_8U;
            case Frame.DEPTH_BYTE:   return IPL_DEPTH_8S;
            case Frame.DEPTH_USHORT: return IPL_DEPTH_16U;
            case Frame.DEPTH_SHORT:  return IPL_DEPTH_16S;
            case Frame.DEPTH_FLOAT:  return IPL_DEPTH_32F;
            case Frame.DEPTH_INT:    return IPL_DEPTH_32S;
            case Frame.DEPTH_DOUBLE: return IPL_DEPTH_64F;
            default:  return -1;
        }
    }
    static boolean isEqual(Frame frame, IplImage img) {
        return img != null &amp;&amp; frame != null &amp;&amp; frame.image != null &amp;&amp; frame.image.length &gt; 0
                &amp;&amp; frame.imageWidth == img.width() &amp;&amp; frame.imageHeight == img.height()
                &amp;&amp; frame.imageChannels == img.nChannels() &amp;&amp; getIplImageDepth(frame) == img.depth()
                &amp;&amp; new Pointer(frame.image[0]).address() == img.imageData().address()
                &amp;&amp; frame.imageStride * Math.abs(frame.imageDepth) / 8 == img.widthStep();
    }
    public IplImage convertToIplImage(Frame frame) {
        if (frame == null) {
            return null;
        } else if (frame.opaque instanceof IplImage) {
            return (IplImage)frame.opaque;
        } else if (!isEqual(frame, img)) {
            int depth = getIplImageDepth(frame);
            img = depth &lt; 0 ? null : IplImage.createHeader(frame.imageWidth, frame.imageHeight, depth, frame.imageChannels)
                    .imageData(new BytePointer(new Pointer(frame.image[0].position(0)))).widthStep(frame.imageStride * Math.abs(frame.imageDepth) / 8);
        }
        return img;
    }
    public Frame convert(IplImage img) {
        if (img == null) {
            return null;
        } else if (!isEqual(frame, img)) {
            frame = new Frame();
            frame.imageWidth = img.width();
            frame.imageHeight = img.height();
            frame.imageDepth = getFrameDepth(img.depth());
            frame.imageChannels = img.nChannels();
            frame.imageStride = img.widthStep() * 8 / Math.abs(frame.imageDepth);
            frame.image = new Buffer[] { img.createBuffer() };
            frame.opaque = img;
        }
        return frame;
    }

    public static int getMatDepth(Frame frame) {
        switch (frame.imageDepth) {
            case Frame.DEPTH_UBYTE:  return CV_8U;
            case Frame.DEPTH_BYTE:   return CV_8S;
            case Frame.DEPTH_USHORT: return CV_16U;
            case Frame.DEPTH_SHORT:  return CV_16S;
            case Frame.DEPTH_FLOAT:  return CV_32F;
            case Frame.DEPTH_INT:    return CV_32S;
            case Frame.DEPTH_DOUBLE: return CV_64F;
            default:  return -1;
        }
    }
    static boolean isEqual(Frame frame, Mat mat) {
        return mat != null &amp;&amp; frame != null &amp;&amp; frame.image != null &amp;&amp; frame.image.length &gt; 0
                &amp;&amp; frame.imageWidth == mat.cols() &amp;&amp; frame.imageHeight == mat.rows()
                &amp;&amp; frame.imageChannels == mat.channels() &amp;&amp; getMatDepth(frame) == mat.depth()
                &amp;&amp; new Pointer(frame.image[0]).address() == mat.data().address()
                &amp;&amp; frame.imageStride * Math.abs(frame.imageDepth) / 8 == (int)mat.step();
    }
    public Mat convertToMat(Frame frame) {
        if (frame == null) {
            return null;
        } else if (frame.opaque instanceof Mat) {
            return (Mat)frame.opaque;
        } else if (!isEqual(frame, mat)) {
            int depth = getMatDepth(frame);
            mat = depth &lt; 0 ? null : new Mat(frame.imageHeight, frame.imageWidth, CV_MAKETYPE(depth, frame.imageChannels),
                    new Pointer(frame.image[0].position(0)), frame.imageStride * Math.abs(frame.imageDepth) / 8);
        }
        return mat;
    }
    public Frame convert(Mat mat) {
        if (mat == null) {
            return null;
        } else if (!isEqual(frame, mat)) {
            frame = new Frame();
            frame.imageWidth = mat.cols();
            frame.imageHeight = mat.rows();
            frame.imageDepth = getFrameDepth(mat.depth());
            frame.imageChannels = mat.channels();
            frame.imageStride = (int)mat.step() * 8 / Math.abs(frame.imageDepth);
            frame.image = new Buffer[] { mat.createBuffer() };
            frame.opaque = mat;
        }
        return frame;
    }
}
</code></pre>
",2015-04-02 05:26:07,2015-04-02 05:26:07,issue after video rotation how fix,<java><android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,True,False,False,True
29436,26085282,2014-09-28 13:21:57,,"<p>Im trying to stream raw YUV frames in an array generated in a C++ program to video using FFPEG. Can anyone point me to the right direction?</p>
",,2014-09-30 08:47:36,YUV Raw frames to video stream,<image-processing><ffmpeg><video-streaming><video-encoding>,,,CC BY-SA 3.0,False,False,False,False,True
29440,29501514,2015-04-07 21:20:42,,"<p>I'm installing Thumbor on an AWS instance running ubuntu (similar to <a href=""http://www.dadoune.com/blog/best-thumbnailing-solution-set-up-thumbor-on-aws/"" rel=""nofollow"">here</a>) and I want to use face detection. But when I try to run</p>

<pre><code>thumbor path_to_conf/thumbor.conf
</code></pre>

<p>All I get is</p>

<pre><code>Traceback (most recent call last):
  File ""/usr/bin/thumbor"", line 9, in &lt;module&gt;
    load_entry_point('thumbor==4.11.1', 'console_scripts', 'thumbor')()
  File ""/usr/lib64/python2.6/site-packages/thumbor/server.py"", line 55, in main
    importer.import_modules()
  File ""/usr/lib64/python2.6/site-packages/thumbor/importer.py"", line 48, in import_modules
    self.import_item('DETECTORS', 'Detector', is_multiple=True)
  File ""/usr/lib64/python2.6/site-packages/thumbor/importer.py"", line 74, in import_item
    module = self.import_class('%s.%s' % (module_name, class_name))
  File ""/usr/lib64/python2.6/site-packages/thumbor/importer.py"", line 33, in import_class
    module = get_module and __import__(name) or __import__(module_name)
  File ""/usr/lib64/python2.6/site-packages/thumbor/detectors/face_detector/__init__.py"", line 11, in &lt;module&gt;
    from thumbor.detectors.local_detector import CascadeLoaderDetector
  File ""/usr/lib64/python2.6/site-packages/thumbor/detectors/local_detector.py"", line 16, in &lt;module&gt;
    import cv2.cv as cv
ImportError: No module named cv2.cv
</code></pre>

<p>Obviously, the solution is to install opencv, but after following the instructions <a href=""http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation"" rel=""nofollow"">here</a> I wind up with</p>

<pre><code>-- The CXX compiler identification is unknown
-- The C compiler identification is GNU 4.8.2
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Performing Test HAVE_CXX_FSIGNED_CHAR
CMake Error at /usr/share/cmake/Modules/CMakeCXXInformation.cmake:37 (get_filename_component):
  get_filename_component called with incorrect number of arguments
Call Stack (most recent call first):
  CMakeLists.txt:2 (PROJECT)


CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
CMake Error: Internal CMake error, TryCompile configure of cmake failed
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Failed
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Check if the system is big endian
-- Searching 16 bit integer
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of unsigned short
-- Check size of unsigned short - done
-- Using unsigned short
-- Check if the system is big endian - little endian
-- Found ZLIB: /usr/lib64/libz.so (found suitable version ""1.2.7"", minimum required is ""1.2.3"")

-- Found TIFF: /usr/lib64/libtiff.so (found version ""4.0.3"")
-- Found JPEG: /usr/lib64/libjpeg.so
-- Found WebP: /usr/lib64/libwebp.so
-- Found Jasper: /usr/lib64/libjasper.so (found version ""1.900.1"")
-- Found ZLIB: /usr/lib64/libz.so (found version ""1.2.7"")
-- Found PNG: /usr/lib64/libpng.so (found version ""1.2.49"")
-- Looking for /usr/include/libpng/png.h
-- Looking for /usr/include/libpng/png.h - not found
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
-- Looking for semaphore.h
-- Looking for semaphore.h - found
-- checking for module 'gtk+-3.0'
--   package 'gtk+-3.0' not found
-- checking for module 'gtk+-2.0'
--   package 'gtk+-2.0' not found
-- checking for module 'gthread-2.0'
--   package 'gthread-2.0' not found
-- checking for module 'gstreamer-base-1.0'
--   package 'gstreamer-base-1.0' not found
-- checking for module 'gstreamer-video-1.0'
--   package 'gstreamer-video-1.0' not found
-- checking for module 'gstreamer-app-1.0'
--   package 'gstreamer-app-1.0' not found
-- checking for module 'gstreamer-riff-1.0'
--   package 'gstreamer-riff-1.0' not found
-- checking for module 'gstreamer-pbutils-1.0'
--   package 'gstreamer-pbutils-1.0' not found
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'gstreamer-video-0.10'
--   package 'gstreamer-video-0.10' not found
-- checking for module 'gstreamer-app-0.10'
--   package 'gstreamer-app-0.10' not found
-- checking for module 'gstreamer-riff-0.10'
--   package 'gstreamer-riff-0.10' not found
-- checking for module 'gstreamer-pbutils-0.10'
--   package 'gstreamer-pbutils-0.10' not found
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libv4l1'
--   package 'libv4l1' not found
-- checking for module 'libv4l2'
--   package 'libv4l2' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- ICV: Downloading ippicv_linux_20141027.tgz...
-- ICV: Unpacking ippicv_linux_20141027.tgz to /etc/opencvmake/opencv/3rdparty/ippicv/unpack... -- ICV: Package successfully downloaded
-- found IPP (ICV version): 8.2.1 [8.2.1]
-- at: /etc/opencvmake/opencv/3rdparty/ippicv/unpack/ippicv_lnx
-- Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE)
-- To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR=&lt;filepath&gt; option to cmake
-- Found PythonInterp: /usr/bin/python2.7 (found suitable version ""2.7.9"", minimum required is ""2.7"")
-- Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (Required is exact version ""2.7.9"")
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named numpy.distutils
-- Could NOT find PythonInterp: Found unsuitable version ""2.6.9"", but required is at least ""3.4"" (found /usr/bin/python)
-- Could NOT find PythonInterp: Found unsuitable version ""2.6.9"", but required is at least ""3.2"" (found /usr/bin/python)
-- Could NOT find JNI (missing:  JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH)
CMake Error at /usr/share/cmake/Modules/CMakeCXXInformation.cmake:37 (get_filename_component):
  get_filename_component called with incorrect number of arguments
Call Stack (most recent call first):
  CMakeLists.txt:3 (PROJECT)


CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
CMake Error: Internal CMake error, TryCompile configure of cmake failed
CMake Warning at cmake/OpenCVDetectOpenCL.cmake:27 (message):
  Can't use OpenCL
Call Stack (most recent call first):
  CMakeLists.txt:554 (include)


-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT MATLAB_ARCH MATLAB_BIN)
-- VTK is not found. Please set -DVTK_DIR in CMake to VTK build directory, or to VTK install subdirectory with VTKConfig.cmake file
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
CMake Error: your CXX compiler: ""CMAKE_CXX_COMPILER-NOTFOUND"" was not found.   Please set CMAKE_CXX_COMPILER to a valid compiler path or name.
--
-- General configuration for OpenCV 3.0.0-dev =====================================
--   Version control:               3.0.0-beta-959-g5b3f89d
--
--   Platform:
--     Host:                        Linux 3.14.34-27.48.amzn1.x86_64 x86_64
--     CMake:                       2.8.12
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/gmake
--     Configuration:               RELEASE
--
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                CMAKE_CXX_COMPILER-NOTFOUND
--     C++ flags (Release):
--     C++ flags (Debug):
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -O3 -DNDEBUG
--     C flags (Debug):             -fsigned-char -g
--     Linker flags (Release):
--     Linker flags (Debug):
--     Precompiled headers:         NO
--
--   OpenCV modules:
--     To be built:                 hal core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python2 python3 viz
--
--   GUI:
--     QT:                          NO
--     GTK+:                        NO
--     GThread :                    NO
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
--
--   Media I/O:
--     ZLib:                        /usr/lib64/libz.so (ver 1.2.7)
--     JPEG:                        /usr/lib64/libjpeg.so (ver )
--     WEBP:                        /usr/lib64/libwebp.so (ver encoder: 0x0201)
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.49)
--     TIFF:                        /usr/lib64/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib64/libjasper.so (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--     GDAL:                        NO
--
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/YES
--     XIMEA:                       NO
--     Xine:                        NO
--
--   Other third-party libraries:
--     Use IPP:                     8.2.1 [8.2.1]
--          at:                     /etc/opencvmake/opencv/3rdparty/ippicv/unpack/ippicv_lnx
--     Use IPP Async:               NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  NO
--
--   Python 2:
--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.9)
--
--   Python 3:
--     Interpreter:                 NO
--
--   Python (for build):            /usr/bin/python2.7
--
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java wrappers:               NO
--     Java tests:                  NO
--
--   Matlab:
--     mex:                         NO
--
--   Documentation:
--     Doxygen:                     NO
--     PlantUML:                    NO
--
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
--
--   Install path:                  /usr/local
--
--   cvconfig.h is in:              /etc/opencvmake/opencv/release
-- -----------------------------------------------------------------
--
-- Configuring incomplete, errors occurred!
See also ""/etc/opencvmake/opencv/release/CMakeFiles/CMakeOutput.log"".
See also ""/etc/opencvmake/opencv/release/CMakeFiles/CMakeError.log"".
</code></pre>

<p>Any suggestions?</p>
",2016-05-19 13:41:52,2019-06-25 17:58:35,Running thumbor yields ImportError: No module named cv2.cv,<opencv><amazon-web-services><thumbnails><thumbor>,,,CC BY-SA 3.0,True,True,False,False,True
29469,29483424,2015-04-07 03:49:49,,"<p>I use Gstreamer to get a stream from Hiksource, </p>

<pre><code>gst-launch-0.10 hiksource location=/home/tmp/a.mp4 ! typefind ! hikdecoder ! capsfilter  ! ffmpegcolorspace ! audovideosink
</code></pre>



<p>Then I want to play the video use Opencv, but I don't know how to do.</p>
",2015-04-07 05:39:23,2015-04-07 05:39:23,How to play hiksource video use opencv,<ffmpeg><gstreamer><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
29545,29545787,2015-04-09 18:04:12,,"<p>So. I have been trying to get my Raspberry Pi 2 to capture H264 stream with OpenCV from my Logitech C920 for quite some time now. I have been scavenging the internet for info, but with no luck. </p>

<p>A short system description:</p>

<ul>
<li>Raspberry Pi 2, running Raspbian, Kernel 3.18</li>
<li>Logitech HD Pro Webcam c920</li>
<li>OpenCV 2.4.11</li>
<li>boneCV - Credits to Derek Molloy (<a href=""https://github.com/derekmolloy/boneCV"" rel=""nofollow"">https://github.com/derekmolloy/boneCV</a>)</li>
<li>libx264 and FFMPEG (built with x264 support)</li>
<li>libv4l-dev, v4l-utils, qv4l2, v4l2ucp</li>
</ul>

<p>I know OpenCV forces format to BGR24 (MJPG). This is specified in <a href=""https://github.com/Itseez/opencv/blob/2.4.11/modules/highgui/src/cap_libv4l.cpp"" rel=""nofollow"">cap_libv4l.cpp</a>. It looks like this(line 692->):</p>

<pre><code>  /* libv4l will convert from any format to V4L2_PIX_FMT_BGR24 */
  CLEAR (capture-&gt;form);
  capture-&gt;form.type                = V4L2_BUF_TYPE_VIDEO_CAPTURE;
  capture-&gt;form.fmt.pix.pixelformat = V4L2_PIX_FMT_BGR24;
  capture-&gt;form.fmt.pix.field       = V4L2_FIELD_ANY;
  capture-&gt;form.fmt.pix.width = capture-&gt;width;
  capture-&gt;form.fmt.pix.height = capture-&gt;height;
</code></pre>

<p>I can set the pixelformat manualy with v4l2-ctl --set-fmt-video</p>

<pre><code>pi@raspberrypi ~/boneCV$ v4l2-ctl --set-fmt-video=width=1920,height=1080,pixelformat=H264
pi@raspberrypi ~/boneCV$ v4l2-ctl --get-fmt-video
Format Video Capture:
        Width/Height  : 1920/1080
        Pixel Format  : 'H264'
        Field         : None
        Bytes per Line: 3840
        Size Image    : 4147200
        Colotspace    : SRGB
</code></pre>

<p>And if I now run ""./boneCV"" - A very simple capture program that captures a picture and does a canny edge detection. (I'll add the code in the end). I get  this:</p>

<pre><code>pi@raspberrypi ~/boneCV$ ./boneCV
pi@raspberrypi ~/boneCV$ v4l2-ctl --get-fmt-video
Format Video Capture:
        Width/Height  : 1920/1080
        Pixel Format  : 'MJPG'
        Field         : None
        Bytes per Line: 0
        Size Image    : 4147200
        Colorspace    : SRGB
</code></pre>

<p>As you can se the ""Pixelformat"" and the ""Bytes per Line"" changes. The ""Field"" stays at None and the ""Colourspace"" stays at SRGB. 
Then I tried to replace every ""V4L2_PIX_FMT_BGR24"" with ""V4L2_PIX_FMT_H264"" in cap_lib4vl.cpp and rebuilded OpenCV. When I then ran the ""./boneCV"" my two .png images are only black with one or two stripes of white color.</p>

<p>To find out if it is libv4l or OpenCV I ran ""./capture"" script that follow Derek Molloys boneCV. It uses libv4l directly and captures an H264 video stream with no problems at all. I then have to use ""./raw2mpg4"" to be able to watch it. The .mp4 file is 1920x1080 at 30 fps with no glitches. And after this I checked ""v4l2-ctl --get-fmt-video"" again and got this:</p>

<pre><code>pi@raspberrypi ~/boneCV$ v4l2-ctl --get-fmt-video
Format Video Capture:
        Width/Height  : 1920/1080
        Pixel Format  : 'H264'
        Field         : None
        Bytes per Line: 3840
        Size Image    : 4147200
        Colotspace    : SRGB
</code></pre>

<p>Exactly the same as when I did set everything manualy.</p>

<p>I have come to the conclusion that if I want OpenCV to be able to capture raw H264 streams I'll have to change the cap_libv4l.cpp, but I have no idea how. I think it may be because the difference in bits per frame and/or colorspace.
<strong><em>Do anybody know how to do this or how to make an workaround so that I stil can use OpenCVs ""VideoCapture"" function?</em></strong> </p>

<p>I know alot of Raspberry Pi and BeagleboneBlack users would be ever so gratefull if there was any solution to this problem. 
I have tried to cover everything that I think is relevant, if there is anything more I could provide to paint the picture better, please say so.</p>

<p>Her some links to the mentioned scripts and programs:
<strong>(edit. I tried to post the links to each of the programs, but I didn't have enough reputation. Go to Derek Molloys github page and you'll find boneCV there.)</strong></p>

<p>And no I can not use the ""CV_FOURCC('H','2','6','4');"" because this function is not implemented for linux yet.</p>
",2015-12-16 20:12:52,2015-12-16 20:12:52,Capturing H264 stream with OpenCV,<c++><linux><opencv><video>,,,CC BY-SA 3.0,True,False,False,False,True
29568,29532269,2015-04-09 07:22:39,,"<p>Am recording a video in Android device using JavaCV and playing it using a videoview. Now want to show a text on video while playing, which is entered after recording video. This text must be seen in all video players while playing the video. </p>

<p>I have gone thro the link <a href=""https://stackoverflow.com/questions/14660443/how-to-add-text-on-video-recording"">How to add text on video recording?</a> too which is expected here too</p>

<p>This is the method called after the video is recorded.</p>

<pre><code>private void playRecordedVideo(Uri videoUri, boolean playVideoInLoop)
{
    RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    layoutParams.addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE);

    videoView.setLayoutParams(layoutParams);

    videoView.setVisibility(View.VISIBLE);
    videoView.setVideoURI(videoUri);
    if(playVideoInLoop)
    {
        MediaController mediaController = new MediaController(MainActivity.this);
        mediaController.setAnchorView(videoView);
        videoView.setMediaController(mediaController);
        videoView.setOnPreparedListener (new OnPreparedListener() {                    
            @Override
            public void onPrepared(MediaPlayer mp) {
                mp.setLooping(true);
            }
        });
    }
    else
    {
        videoView.setMediaController(null);
    }
    videoView.start();
    btnStart.setText(getString(R.string.txt_finish));
}
</code></pre>
",2017-05-23 11:58:55,2015-04-09 07:22:39,FFMpeg add text to actual video file after recording in Android,<android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
29617,29516905,2015-04-08 14:02:55,,"<p>I'm trying to record a lossless video from a webcam using opencv.
I would like to use the FFV1 codec for this.</p>

<p>I open my video writter like this:</p>

<pre><code>theVideoWriter.open(filename,CV_FOURCC('F','F','V','1'), 30, cv::Size(1280,720), true);
</code></pre>

<p>I can successfully open the video writter but while recording I get following error message:</p>

<blockquote>
  <p>[ffv1 @ 26d78020] Provided packet is too small, needs to be 8310784</p>
</blockquote>

<p>The resulting video is not playable. Other FFmpeg codecs like FMP4 work fine.</p>

<p>What does that error mean and how can I fix it?</p>
",,2015-04-09 08:22:33,OpenCV + FFmpeg: Error when recording lossless video,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
29717,29591525,2015-04-12 16:09:49,,"<p>I want to cross compile opencv with ffmpeg for arm.</p>

<p>I have cross compiled ffmpeg, how do I configure cmake to see the ffmpeg?</p>

<p>Edit: I am cross compiling for AR Drone 2.0. I use toolchain under platform/linux.</p>
",2015-04-13 20:33:15,2016-01-20 18:04:32,How to cross compile OpenCV with ffmpeg,<opencv><ffmpeg><cmake><arm><cross-compiling>,,,CC BY-SA 3.0,True,False,False,False,True
29867,27241953,2014-12-02 04:37:02,,"<p>I am using CentOS6.5, I downloaded opencv-2.4.9, made build directory, and under there, ran 'cmake ..' and 'make'. During the make run, I got this error message.</p>

<p><img src=""https://i.stack.imgur.com/Ve5qU.jpg"" alt=""link error message""></p>

<p>I found avformat_network_init in ffmpeg source, I installed ffmpeg once in my home and then to /usr/lib.  but I don't know how to tell cmake where ffmpeg is installed (include header and library).<br>
Now I see some *.so files from ffmpeg under /usr/lib64. but why can't cmake find the ffmpeg location?
Thanks in advance.</p>
",,2014-12-02 09:58:33,"building opencv, got undefined reference to avformat_network_init error",<opencv><ffmpeg><centos>,,,CC BY-SA 3.0,True,False,False,False,True
29882,29643042,2015-04-15 06:29:26,,"<p>I am trying to play rtp stream from vlc player which I created using javacv. Here is the code:</p>

<pre><code>        FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber(""rtsp://10.6.0.147:554/ufirststream"");
        frameGrabber.start();  // First I take another stream 

        FFmpegFrameRecorder frameRecorder = new FFmpegFrameRecorder(""rtp://239.31.31.69:4433"", frameGrabber.getImageWidth(), frameGrabber.getImageHeight());

        frameRecorder.setFormat(""rtp"");
        frameRecorder.setPixelFormat(AV_PIX_FMT_YUV420P);
        frameRecorder.setVideoCodec(AV_CODEC_ID_MPEG2VIDEO); &lt;-- AV_CODEC_ID_H264
        frameRecorder.setFrameRate(25);           
        frameRecorder.setVideoBitrate(1024); &lt;--1024*1024*2            
        frameRecorder.start();
        while (true) {
            frameRecorder.record(frameGrabber.grab()); //grab from stream, stream with rtp
        }
</code></pre>

<p>If I choose my codec as AV_CODEC_ID_MPEG2VIDEO I can play the stream from VLC using rtp://239.31.31.69:4433 with open network. </p>

<p>If I increase the quality using setVideoBitrate(1024*1024*2) the stream lags too much and if I decrease the quality is so bad.</p>

<p>I want to use AV_CODEC_ID_H264 as my codec to fasten things with better quality but i can't play the stream from VLC getting error : </p>

<blockquote>
  <p>SDP required A description in SDP format is required to receive the RTP stream. Note that rtp:// URIs cannot work with dynamic RTP payload format (96).</p>
</blockquote>

<p>I tried to get sdp using wireshark and then I realized rtp stream doesn't have sdp :) so I tried to create my own sdp like this </p>

<pre><code>c=IN IP4 239.31.31.69
m=video 4433 RTP/AVP 96
a=rtpmap:96 H264/90000
</code></pre>

<p>and this</p>

<pre><code>v=0
c=IN IP4 239.31.31.69
a=recvonly
t=0 0
m=video 4433 RTP/AVP 99
a=rtpmap:99 H264/90000
a=fmtp:99 packetization-mode=1;profile-level-id=42c01e;sprop-parameter sets=Z0LAHukBQHsg,aM4G4g==;
</code></pre>

<p>but both seems to fail similar to this</p>

<pre><code>&gt; core debug: adding item `asf.sdp' ( file:///C:/Users/Sezer/Desktop/asf.sdp )
core debug: processing request item: asf.sdp, node: null, skip: 0
core debug: rebuilding array of current - root Playlist
core debug: rebuild done - 7 items, index 6
core debug: starting playback of the new playlist item
core debug: resyncing on asf.sdp
core debug: asf.sdp is at 6
core debug: creating new input thread
core debug: Creating an input for 'asf.sdp'
core debug: Creating an input for 'asf.sdp'
core debug: requesting art for asf.sdp
core debug: using timeshift granularity of 50 MiB, in path 'C:\Users\Sezer\AppData\Local\Temp'
core debug: `file:///C:/Users/Sezer/Desktop/asf.sdp' gives access `file' demux `' path `/C:/Users/Sezer/Desktop/asf.sdp'
core debug: specified demux `any'
core debug: creating demux: access='file' demux='any' location='/C:/Users/Sezer/Desktop/asf.sdp' file='C:\Users\Sezer\Desktop\asf.sdp'
core debug: looking for access_demux module matching ""file"": 12 candidates
core debug: looking for meta fetcher module matching ""any"": 1 candidates
core debug: no access_demux modules matched
core debug: creating access 'file' location='/C:/Users/Sezer/Desktop/asf.sdp', path='C:\Users\Sezer\Desktop\asf.sdp'
core debug: looking for access module matching ""file"": 21 candidates
filesystem debug: opening file `C:\Users\Sezer\Desktop\asf.sdp'
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\fetcher
core debug: using access module ""filesystem""
core debug: Using stream method for AStream*
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher
core debug: starting pre-buffering
core debug: received first data after 0 ms
core debug: pre-buffering done 193 bytes in 0s - 188476 KiB/s
core debug: looking for stream_filter module matching ""any"": 6 candidates
core debug: no stream_filter modules matched
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
core debug: looking for stream_filter module matching ""record"": 6 candidates
core debug: using stream_filter module ""record""
core debug: creating demux: access='file' demux='any' location='/C:/Users/Sezer/Desktop/asf.sdp' file='C:\Users\Sezer\Desktop\asf.sdp'
core debug: looking for demux module matching ""any"": 65 candidates
live555 debug: version 2014.07.25
live555 debug: RTP subsession 'video/H264'
core debug: selecting program id=0
core debug: adding item `file.sdp' ( file:///C:/Users/Sezer/Desktop/file.sdp )
live555 debug: setup start: 0.000000 stop:0.000000
live555 debug: play start: 0.000000 stop:0.000000
core debug: using demux module ""live555""
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
core debug: no meta fetcher modules matched
core debug: looking for a subtitle file in C:\Users\Sezer\Desktop\
core debug: searching art for asf.sdp
core debug: looking for art finder module matching ""any"": 2 candidates
core debug: looking for decoder module matching ""any"": 43 candidates
avcodec debug: CPU flags: 0x010053db
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\art
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art
avcodec debug: trying to use direct rendering
avcodec debug: allowing 4 thread(s) for decoding
avcodec warning: threaded frame decoding is not compatible with DXVA2, disabled
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
core debug: meta ok for (null), need to fetch art
core debug: Creating an input for 'file.sdp'
avcodec debug: avcodec codec (H264 - MPEG-4 AVC (part 10)) started
avcodec debug: using slice thread mode with 4 threads
core debug: using decoder module ""avcodec""
core debug: looking for meta fetcher module matching ""any"": 1 candidates
core debug: looking for packetizer module matching ""any"": 23 candidates
core debug: using packetizer module ""packetizer_h264""
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\fetcher
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher
core debug: looking for meta reader module matching ""any"": 2 candidates
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\reader
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\reader
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\reader\filename.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
core debug: no meta fetcher modules matched
core debug: searching art for asf.sdp
core debug: looking for art finder module matching ""any"": 2 candidates
core debug: no meta reader modules matched
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
core debug: `file:///C:/Users/Sezer/Desktop/asf.sdp' successfully opened
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\art
core debug: meta ok for (null), need to fetch art
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
core debug: no art finder modules matched
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
core debug: looking for meta fetcher module matching ""any"": 1 candidates
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\fetcher
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
core debug: using meta fetcher module ""lua""
core debug: removing module ""lua""
core debug: searching art for asf.sdp
core debug: looking for art finder module matching ""any"": 2 candidates
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
qt4 debug: IM: Setting an input
core debug: no art finder modules matched
core debug: looking for meta fetcher module matching ""any"": 1 candidates
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\art
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\fetcher
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
core debug: no meta fetcher modules matched
core debug: searching art for file.sdp
core debug: looking for art finder module matching ""any"": 2 candidates
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\art
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
core debug: no art finder modules matched
core debug: art not found for asf.sdp
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
lua debug: skipping script (unmatched scope) C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
core debug: no art finder modules matched
core debug: looking for meta fetcher module matching ""any"": 1 candidates
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\fetcher
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
core debug: using meta fetcher module ""lua""
core debug: removing module ""lua""
core debug: searching art for asf.sdp
core debug: looking for art finder module matching ""any"": 2 candidates
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\art
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
core debug: no art finder modules matched
core debug: art not found for asf.sdp
core debug: looking for meta fetcher module matching ""any"": 1 candidates
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\fetcher
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\fetcher\tvrage.luac
core debug: using meta fetcher module ""lua""
core debug: removing module ""lua""
core debug: searching art for file.sdp
core debug: looking for art finder module matching ""any"": 2 candidates
lua debug: Trying Lua scripts in C:\Users\Sezer\AppData\Roaming\vlc\lua\meta\art
lua debug: Trying Lua scripts in C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\00_musicbrainz.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\01_googleimage.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\02_frenchtv.luac
lua debug: Trying Lua playlist script C:\Program Files (x86)\VideoLAN\VLC\lua\meta\art\03_lastfm.luac
core debug: no art finder modules matched
core debug: art not found for file.sdp
</code></pre>

<p>Can you lead me to the right direction ? What should I do to get fair quality and no lag using rtp ?</p>
",2015-04-15 07:05:10,2015-04-15 07:05:10,How to get rtp(javacv ffmpeg) stream from VLC as client,<ffmpeg><h.264><vlc><rtp><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
30012,29703059,2015-04-17 15:11:35,,"<p>I am trying to export video as .mp4 with openCV. I have tried several codecs but for now I had no success.</p>

<p>This is a function that constructs a video from frames:</p>

<pre><code>def create_movie(self, out_directory, fps, total_frames):
    img1 = cv2.imread(""temp/scr0.png"")
    height, width, layers =  img1.shape
    codec = cv2.cv.CV_FOURCC('X','V','I','D')
    video = cv2.VideoWriter(out_directory, codec, fps, (width, height))

    for i in range(total_frames):
        img_name = ""temp/scr"" + str(i) + "".png""
        img = cv2.imread(img_name)
        video.write(img)

    video.release()
    cv2.destroyAllWindows()
</code></pre>

<p>I usually get next error message, using different codecs:</p>

<pre><code>Tag XVID/0x44495658 incompatible with output codec id '13'
</code></pre>

<p>Is is possible to do this and how?</p>
",,2017-06-06 12:13:02,How to export video as .mp4 using openCV?,<python><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
30076,29746301,2015-04-20 11:13:53,,"<p>I'm trying to convert a JPG Frame into RGBA frame using ffmpeg. The original image size is 250x250 with pixel format AV_PIX_FMT_YUV420P. The source line stride array contains [256, 128, 128] (for 3 planes). My destination frame size is 250x250. Following is the code.</p>

<pre><code>AVFrame* GetBGRAFrame(AVFrame* pFrame)
{       
    const int kiImageWidth = pFrame-&gt;width ;
    const int kiImageHeight = pFrame-&gt;height ;

    int iDestWidth = kiImageWidth;
    int iDestHeight = kiImageHeight;

    AVPixelFormat enPixelFormat = (AVPixelFormat)pFrame-&gt;format ;

    SwsContext* pImageConvertContext =
        sws_getContext(kiImageWidth, kiImageHeight, enPixelFormat, 
        iDestWidth, iDestHeight, PIX_FMT_BGRA, 0, NULL, NULL, NULL);

    // Allocate destination frame
    int iNumBytes = avpicture_get_size(AV_PIX_FMT_BGRA, iDestWidth, iDestHeight);
    AVFrame* pFrame2 = av_frame_alloc();
    uint8_t* pFrameBuffer = (uint8_t*)av_malloc(iNumBytes * sizeof(uint8_t));       
    avpicture_fill((AVPicture*)pFrame2, pFrameBuffer, AV_PIX_FMT_BGRA, iDestWidth, iDestHeight);

    sws_scale(pImageConvertContext, pFrame-&gt;data, pFrame-&gt;linesize, 0, kiImageHeight, pFrame2-&gt;data, pFrame2-&gt;linesize);
    sws_freeContext(pImageConvertContext);

    return pFrame2;
}
</code></pre>

<p>After converting, I'm getting 2 transparent columns at the right side of my  destination frame.</p>

<p>I am able to get the proper image if I use the command line tool: 
ffmpeg -i image.jpg output.png</p>

<p>So, what is wrong with my code?</p>

<p>Is there any alignment requirement for the destination? If yes, how should I change my code to get 250x250 BGRA frame?</p>

<p>Thanks</p>
",,2015-04-21 13:41:34,Data loss while converting from jpeg to BGRA using ffmpeg,<image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
30085,29746535,2015-04-20 11:24:14,,"<p>I am getting the following error when compiling opencv with ffmpeg.</p>

<blockquote>
  <p>..../arm-none-linux-gnueabi/bin/ld: ../../bin/opencv_test_core: hidden symbol `__sync_val_compare_and_swap_4' in ..../arm-none-linux-gnueabi/bin/ld: final link failed: Nonrepresentable section on output
  collect2: ld returned 1 exit status</p>
</blockquote>

<p>I have no idea what this means. How do I fix this?</p>

<p>Edit:
I am cross compiling for ARM using codesourcery's arm-2009q3 compiler.
I using cmake and make to compile.</p>
",2015-04-21 06:58:58,2015-05-14 13:27:47,Error Cross Compiling: hidden symbol ... final link failed,<opencv><ffmpeg><arm><cross-compiling>,,,CC BY-SA 3.0,True,False,False,False,True
30121,29804053,2015-04-22 16:49:22,,"<p>I am trying to install OpenCV following <a href=""https://www.youtube.com/watch?v=ubOa_tJDM_U"" rel=""nofollow"">this</a> tutorial. I am through cmake.(The configuration is given at the end.) However make shows error :<code>make[2]: ***[modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o] Error 1</code>
One <a href=""http://answers.opencv.org/question/12597/build-problems-for-opencv-241-with-ubuntu-1204-lts/"" rel=""nofollow"">link</a> pointed out reason as different version of opencv and ffmpeg, but I found a piece of code in cap_ffmpeg_impl.hpp that appears to be handling it.</p>

<pre><code>#if LIBAVCODEC_BUILD &gt;= CALC_FFMPEG_VERSION(54,25,0)
#  define CV_CODEC_ID AVCodecID
#  define CV_CODEC(name) AV_##name
#else
#  define CV_CODEC_ID CodecID
#  define CV_CODEC(name) name
#endif
</code></pre>

<p>Not sure if it is ok for this to be commented.</p>

<p>Also, I could try installing ffmpeg seperately, but I am not sure how dependencies are handled in this installation around libav.</p>

<p>Would be thankful for any help in solving this problem, as well as tips/links for OpenCV installation in general.</p>

<p>make configuration:</p>

<pre><code>-- General configuration for OpenCV 2.4.11 ====================================
Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.16.0-32-generic i686
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.9.1)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib java python stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda viz
-- 
--   GUI: 
--     QT 5.x:                      YES (ver 5.3.0)
--     QT OpenGL support:           YES (Qt5::OpenGL 5.3.0)
--     OpenGL support:              YES (/usr/lib/i386-linux-gnu/libGLU.so /usr/lib/i386-linux-gnu/libGL.so /usr/lib/i386-linux-gnu/libSM.so /usr/lib/i386-linux-gnu/libICE.so /usr/lib/i386-linux-gnu/libX11.so /usr/lib/i386-linux-gnu/libXext.so)
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/i386-linux-gnu/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/i386-linux-gnu/libjpeg.so (ver )
--     PNG:                         /usr/lib/i386-linux-gnu/libpng.so (ver 1.2.51)
--     TIFF:                        /usr/lib/i386-linux-gnu/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/i386-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/i386-linux-gnu/libImath.so /usr/lib/i386-linux-gnu/libIlmImf.so /usr/lib/i386-linux-gnu/libIex.so /usr/lib/i386-linux-gnu/libHalf.so /usr/lib/i386-linux-gnu/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 56.1.0)
--       format:                    YES (ver 56.1.0)
--       util:                      YES (ver 54.3.0)
--       swscale:                   YES (ver 3.0.0)
--       gentoo-style:              YES
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l1 (ver 1.2.1) / libv4l2 (ver 1.2.1)
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   YES (ver 3.2.1)
--     Use TBB:                     YES (ver 4.2 interface 7000)
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/keeda/Downloads/data_analysis/opencv-2.4.11/3rdparty/include/opencl/1.2
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python2 (ver 2.7.8)
--     Libraries:                   /usr/lib/i386-linux-gnu/libpython2.7.so (ver 2.7.8)
--     numpy:                       /usr/local/lib/python2.7/dist-packages/numpy/core/include (ver 1.9.1)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Java:
--     ant:                         /usr/bin/ant (ver 1.9.4)
--     JNI:                         /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include
--     Java tests:                  YES
-- 
--   Documentation:
--     Build Documentation:         YES
--     Sphinx:                      /usr/bin/sphinx-build (ver 1.2.2)
--     PdfLaTeX compiler:           /usr/bin/pdflatex
--     Doxygen:                     NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/keeda/Downloads/data_analysis/opencv-2.4.11/build
-- -----------------------------------------------------------------
</code></pre>
",,2015-04-22 16:49:22,make error in OpenCV installation on ubuntu (ffmpeg CODEC_ID_XXXX was not declared in scope),<opencv><ffmpeg><ubuntu-14.10>,,,CC BY-SA 3.0,True,False,False,False,True
30268,29825385,2015-04-23 13:45:05,,"<p>When I try to use VideoWriter to write a frame it does not work. I already tried lots of FOURCC codes, like the defaul, h264, mjpg, divx, xvid, etc. And yes, I have installed ffmpeg with all the necessary configurations (--enable-shared, --enable-libx264, ...) and the opencv installation is with ffmpeg support on. </p>

<p>I already google it a lot and everything that I found do not even nearly solve this problem, that is recurrent in OpenCV. The code is the simplest possible, and it worked a few weeks back, but not it does not. </p>

<p>A few insights: get(CV_CAP_PROP_FPS) returns the unknown option message, with the -1 value (the same happens for the set). The following part of the cmake process of opencv is also interesting:</p>

<pre><code>-- Could NOT find Jasper (missing:  JASPER_LIBRARIES JASPER_INCLUDE_DIR) 
-- checking for module 'gstreamer-video-1.0'
--   package 'gstreamer-video-1.0' not found
-- checking for module 'gstreamer-app-1.0'
--   package 'gstreamer-app-1.0' not found
-- checking for module 'gstreamer-riff-1.0'
--   package 'gstreamer-riff-1.0' not found
-- checking for module 'gstreamer-pbutils-1.0'
--   package 'gstreamer-pbutils-1.0' not found
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'gstreamer-video-0.10'
--   package 'gstreamer-video-0.10' not found
-- checking for module 'gstreamer-app-0.10'
--   package 'gstreamer-app-0.10' not found
-- checking for module 'gstreamer-riff-0.10'
--   package 'gstreamer-riff-0.10' not found
-- checking for module 'gstreamer-pbutils-0.10'
--   package 'gstreamer-pbutils-0.10' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
</code></pre>

<p>Opencv 2.4.10
Ubuntu 14.04</p>

<p>EDIT: I found out that the problem is that the VideoWriter object isn't open, even after the constructor call:</p>

<pre><code>VideoWriter wr(outputFile, CV_FOURCC('D','I','V','X'), capture.get(CV_CAP_PROP_FPS,Size(capture.get(CV_CAP_PROP_FRAME_WIDTH),capture.get(CV_CAP_PROP_FRAME_HEIGHT)));
</code></pre>

<p>And using the CV_CAP_PROP_FPS makes OpenCV show the following message in secution time:</p>

<pre><code>HIGHGUI ERROR: V4L2: Unable to get property &lt;unknown property string&gt;(5) - Invalid argument
</code></pre>

<p>Why this hqppen, how can I fix that?</p>
",2015-04-24 12:51:06,2015-04-29 10:43:01,VideoWriter do not write anything,<c++><opencv><ubuntu><ffmpeg><video-codecs>,,,CC BY-SA 3.0,True,False,False,False,True
30275,27275043,2014-12-03 15:06:38,,"<p>I'm trying to use opencv videoWriter to get a video file. But I get the following problem:</p>

<pre><code>&gt;[libx264 @ 0x132b680] broken ffmpeg default settings detected
&gt;[libx264 @ 0x132b680] use an encoding preset (e.g. -vpre medium)
&gt;[libx264 @ 0x132b680] preset usage: -vpre &lt;speed&gt; -vpre &lt;profile&gt;
&gt;[libx264 @ 0x132b680] speed presets are listed in x264 --help
&gt;[libx264 @ 0x132b680] profile is optional; x264 defaults to high
&gt;Could not open codec 'libx264': Unspecified error!!! Output video could not be opened
</code></pre>

<p>I do have libx264 in my system, so I guess this last line is just a side effect<br><br>
The code i'm trying to run is an example taken from <a href=""https://stackoverflow.com/questions/13623394/how-to-write-video-file-in-opencv-2-4-3"">How to write video file in OpenCV 2.4.3</a> .</p>

<pre><code>int main (int argc, char *argv[]){
// Load input video
VideoCapture input_cap(""testi.mp4"");
if (!input_cap.isOpened())
{
        std::cout &lt;&lt; ""!!! Input video could not be opened"" &lt;&lt; std::endl;
        return -1;
}

// Setup output video
cv::VideoWriter output_cap(""testo.mp4"", 
               input_cap.get(CV_CAP_PROP_FOURCC),
               input_cap.get(CV_CAP_PROP_FPS),
               cv::Size(input_cap.get(CV_CAP_PROP_FRAME_WIDTH),
               input_cap.get(CV_CAP_PROP_FRAME_HEIGHT)));

if (!output_cap.isOpened())
{
        std::cout &lt;&lt; ""!!! Output video could not be opened"" &lt;&lt; std::endl;
        return -1;
}


// Loop to read from input and write to output
cv::Mat frame;

while (true)
{       
    if (!input_cap.read(frame))             
        break;

    output_cap.write(frame);
}

input_cap.release();
output_cap.release();

return 0;
}
</code></pre>

<p>I found a post with a similar problem <a href=""https://stackoverflow.com/questions/16730514/how-to-get-stream-info-from-opened-file-in-ffmpeg"">How to get stream info from opened file in ffmpeg?</a> but no one answered correctly yet.<br>
I've found people are told to check if opencv is using old fmmpeg instead of libav, which it isn't since it's a fresh build and my ubuntu doesn't have ffmpeg.</p>
",2017-05-23 12:18:24,2019-01-08 05:29:28,OpenCV VideoWriter doesn't work,<c++><opencv><video><ffmpeg><ubuntu-14.04>,,,CC BY-SA 3.0,True,True,False,False,True
30315,29846904,2015-04-24 11:55:13,,"<p>I know ffmpeg can do this from command line and almost sure it can do this from C++ code too. But is there any simple way in C++ OpenCV3 or OpenCV2 to grab from videofile  keyframes only?</p>

<p><a href=""http://code.opencv.org/issues/1419"" rel=""nofollow"">Before</a> <code>video.set(CV_CAP_PROP_POS_FRAMES)</code> worked this way: position was ""nearest keyframe"", but now it is ""fixed"" and I can not find the way how to process keyframes only (for perfomance purpose) at least in one possible way:</p>

<ul>
<li>1st way : <code>read()</code> next <strong>key</strong>frame (like JavaCV <code>FFmpegFrameGrabber.grabKeyFrame()</code> )</li>
<li>2nd way: do fast-working <code>grab()</code> for <strong>each</strong> frame, check it's propertie (which one?) and if it is keyframe then do slow-working <code>retrieve()</code> .</li>
</ul>
",2015-04-24 12:23:42,2015-04-24 12:23:42,keyframes from videofile - how to do fast extract in OpenCV?,<c++><opencv><ffmpeg><video-processing><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
30427,29939993,2015-04-29 09:44:38,,"<p>I'm trying to run a program to display an image using opencv but I get the following errors:</p>

<pre><code>file not recognized: File format not recognized
C:\opencv\release\bin\opencv_ffmpeg249_64.dll

error:Id returned 1 exit status
File not found: collect2.exe
</code></pre>

<p>.pro file: </p>

<pre><code>QT       += core

QT       -= gui

TARGET = myFirstOpenCVProject
CONFIG   += console
CONFIG   -= app_bundle
CONFIG   -= qt

TEMPLATE = app


SOURCES += main.cpp

INCLUDEPATH += C://opencv//release//install//include

LIBS += C://opencv//release//bin//*.dll

#LIBS += C://opencv//release//lib//*.a

LIBS += -LC://opencv//release//lib -llibopencv_core249 -llibopencv_highgui249 -llibopencv_imgproc249

OTHER_FILES += \
    img.JPG
</code></pre>

<p>main.cpp</p>

<pre><code>#include &lt;opencv2/opencv.hpp&gt;
#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;opencv2/imgproc/imgproc.hpp&gt;


int main()
{
        // read an image
        cv::Mat image= cv::imread(""img.jpg"");
        // create image window named ""My Image""
        cv::namedWindow(""My Image"");
        // show the image on window
        cv::imshow(""My Image"", image);
        // wait key for 5000 ms
        cv::waitKey(1000);
        return 1;
}
</code></pre>

<p>The image(img.jpg) is in the appropriate directory; where the project executable is. I tried removing the dll and the code ran without errors but it did nothing and just showed a shell prompting me to hit return.</p>

<p><img src=""https://i.stack.imgur.com/jLHmt.png"" alt=""enter image description here""></p>
",2015-04-29 10:07:30,2015-04-29 10:07:30,Qt dll error with opencv,<c++><qt><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
30492,27291794,2014-12-04 10:35:50,,"<p>I am trying to merge mp4 and mp3 on Android, I am using the JavaCV, please check my code below first, then I explained the strange error after:</p>

<pre><code>private void test2() throws Exception {
    String path = Environment.getExternalStorageDirectory()
            .getAbsolutePath();

    int testId = 4;
    String videoPath = path + ""/"" + ""sample"" + testId + "".mp4"";
    String audioPath = path + ""/"" + ""love.mp3"";
    String outputPath = path + ""/"" + ""out"" + testId + "".mp4"";

    FrameGrabber grabber1 = new FFmpegFrameGrabber(videoPath);
    FrameGrabber grabber2 = new FFmpegFrameGrabber(audioPath);

    grabber1.start();
    grabber2.start();

    FrameRecorder recorder = new FFmpegFrameRecorder(outputPath,
            grabber1.getImageWidth(), grabber1.getImageHeight(),
            grabber2.getAudioChannels());

    double frameRate = grabber1.getFrameRate();
    recorder.setFrameRate(frameRate);
    recorder.setSampleRate(grabber2.getSampleRate());
    recorder.setVideoQuality(1);

    recorder.start();

    Frame frame1, frame2 = null;

    // getLengthInTime is correct, but getLengthInFrames not accurate.
    Log.d(TAG, "" Video lengthInTime:"" + grabber1.getLengthInTime()
            + "" Video frames:"" + grabber1.getLengthInFrames());

    // Record video.
    int count = 0;
    while (true) {
        frame1 = grabber1.grabFrame();
        if (frame1 == null) {
            break;
        }

        frame1.samples = null;
        recorder.record(frame1);
        count++;

        Log.d(TAG, ""Video frame timestamp:"" + grabber1.getTimestamp());
    }
    Log.d(TAG, "" Video frame count:"" + count);

    // Record audtio.
    long videoTimestamp = recorder.getTimestamp();
    while (true) {
        frame2 = grabber2.grabFrame();
        if (frame2 != null &amp;&amp; grabber2.getTimestamp() &lt;= videoTimestamp) {
            frame2.image = null;
            recorder.record(frame2);

            // Log.d(TAG, ""Audio frame timestamp:"" +
            // grabber2.getTimestamp());
        } else {
            break;
        }
    }

    // release
    recorder.stop();
    recorder.release();

    grabber1.stop();
    grabber2.stop();
}
</code></pre>

<p>The output's audio is OK, but the video is strangle. The video play 1s and stop 1s, then repeat like this. The input video I recorded by Phone's camera.</p>

<p>I tried to count the real number of video frames, and I found the real number is much bigger than the number got from method getLengthInFrames().</p>
",,2015-01-04 22:48:46,JavaCV read video and record,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
30561,29973423,2015-04-30 16:46:28,,"<p>I'm using the JavaCV <a href=""https://github.com/bytedeco/javacv/blob/master/src/main/java/org/bytedeco/javacv/FFmpegFrameRecorder.java"" rel=""noreferrer"">FFmpegFrameRecorder</a> class to encode Android's camera preview frames into a video.</p>

<p>The goal would be to replicate the result of the following command line:</p>

<pre><code>ffmpeg -i input.mp4 -metadata:s:v:0 rotate=""90"" output.mp4
</code></pre>

<p>I modified the <code>startUnsafe()</code> method as follows, but it failed to generate the desired output:</p>

<pre><code>if ((video_st = avformat_new_stream(oc, video_codec)) != null) {
        video_c = video_st.codec();
        video_c.codec_id(oformat.video_codec());
        video_c.codec_type(AVMEDIA_TYPE_VIDEO);
        ...
        AVDictionary avDictionary = new AVDictionary(null);
        av_dict_set(avDictionary, ""rotate"", ""90"", 0);
        video_st.metadata(avDictionaty);
        ...
}
...
avformat_write_header(oc, (PointerPointer) null);
</code></pre>

<p>This still encodes the video correctly, but the added metadata never appears on ffprobe. If it helps, the video encoding is h264.</p>

<p>By the way, here's the ffprobe output:</p>

<pre><code>ffprobe version 2.3.3 Copyright (c) 2007-2014 the FFmpeg developers
  built on Jan 22 2015 18:22:57 with Apple LLVM version 6.0 (clang-600.0.56) (based on LLVM 3.5svn)
  configuration: --prefix=/usr/local/Cellar/ffmpeg/2.3.3 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-nonfree --enable-hardcoded-tables --enable-avresample --enable-vda --cc=clang --host-cflags= --host-ldflags= --enable-libx264 --enable-libfaac --enable-libmp3lame --enable-libxvid --enable-libfreetype --enable-libvorbis --enable-libvpx --enable-libass --enable-ffplay --enable-libfdk-aac --enable-libopus --enable-libquvi --enable-libx265
  libavutil      52. 92.100 / 52. 92.100
  libavcodec     55. 69.100 / 55. 69.100
  libavformat    55. 48.100 / 55. 48.100
  libavdevice    55. 13.102 / 55. 13.102
  libavfilter     4. 11.100 /  4. 11.100
  libavresample   1.  3.  0 /  1.  3.  0
  libswscale      2.  6.100 /  2.  6.100
  libswresample   0. 19.100 /  0. 19.100
  libpostproc    52.  3.100 / 52.  3.100
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'abcd.mp4':
  Metadata:
    major_brand     : isom
    minor_version   : 512
    compatible_brands: isomiso2avc1mp41
    encoder         : Lavf56.15.102
  Duration: 00:00:19.48, start: 0.023220, bitrate: 572 kb/s
    Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 1280x720, 573 kb/s, 5.71 fps, 30 tbr, 15360 tbn, 60 tbc (default)
    Metadata:
      handler_name    : VideoHandler
    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 64 kb/s (default)
    Metadata:
      handler_name    : SoundHandler
</code></pre>

<p>Any suggestions on why is it failing? Thanks.</p>
",,2015-05-26 18:26:53,Setting video stream metadata using Ffmpeg,<java><android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
30584,30008859,2015-05-03 00:07:09,,"<p>I have been trying with openCV but it doesn't seem to help much. Also, I have tried ffmpeg and avconv. But I think am making a mistake somewhere. Could someone please guide me?</p>
",,2015-05-25 09:55:07,How to create a video with raw images (.rgb format) and add audio to it in python?,<python><opencv><video><ffmpeg><avconv>,,,CC BY-SA 3.0,True,False,False,False,True
30643,29995917,2015-05-01 22:12:50,,"<p>I installed OpenCV in Ubuntu according to the official guide, then I'm trying to decode a file, then error occurs:</p>

<pre><code>[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
[mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls!
</code></pre>

<p>the video is about 150 frames, the error log may exceed 1000, can someone help me here? thanks.</p>
",,2015-05-02 10:29:49,OpenCV error: [mpeg4 @ 0x7ffe33cb3e60] too many thread_release_buffer calls,<matlab><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
30739,26193963,2014-10-04 14:53:19,,"<p>Currently, I am trying to use opencv to read a video from my Canon VB-H710F camera.</p>

<p>For this purpose I tried two different solutions:</p>

<p>SOLUTION 1:  Read the stream from rtsp address</p>

<pre><code> VideoCapture cam (""rtsp://root:camera@10.0.4.127/stream/profile1=u"");

 while(true)
  cam &gt;&gt; frame;
</code></pre>

<p>In this case I am using opencv to directly read from a stream encoded with in H264 (profile1), however this yields the same problem reported here <a href=""http://answers.opencv.org/question/34012/ip-camera-h264-error-while-decoding/"" rel=""noreferrer"">http://answers.opencv.org/question/34012/ip-camera-h264-error-while-decoding/</a>
As suggested in the previous question, I tried to disable FFMPEG support in opencv installation, which solved the h264 decoding errors but raised other problem.
When accessing the stream with opencv, supported by gstreame, there is always a large delay associated.
With this solution I achieve 15 FPS but I have a delay of 5 seconds, which is not acceptable considering that I need a real time application.</p>

<p>SOLUTION 2:  Read the frames from http address
while(true)
    {
            startTime=System.currentTimeMillis();</p>

<pre><code>        URL url = new URL(""h t t p://[IP]/-wvhttp-01-/image.cgi"");
        URLConnection con = url.openConnection();
        BufferedImage image = ImageIO.read(con.getInputStream());   
        showImage(image);
        estimatedTime=System.currentTimeMillis()-startTime;
        System.out.println(estimatedTime);
        Thread.sleep(5);
}
</code></pre>

<p>This strategy simply grabs the frame from the url that the camera provides. The code is in Java but the results are the same in C++ with the curl library.
This solution avoids the delay of the first solution however it takes little more than 100 ms to grab each frame, which means that I can only achieve on average 10 FPS.</p>

<p>I would like to know how can I read the video using c++ or another library developed in c++ ?</p>
",,2015-07-13 15:02:09,Read h264 stream from an IP camera,<opencv><ffmpeg><h.264><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
30753,30063889,2015-05-05 21:52:36,,"<p>I have to detect face and eye from a video by using opencv, at first I loaded the video and I can see video as output, but after writing the code for eye and face detection and after running the code, I don't have any error, but I don't know why the output window opens and closes fast after one second also, It seems run just for a second and I can see opening the console and output window and then closing them. I put my code and also some thing that I have as output, I'll really appreciate if any one can help me and guide me if there is any mistake in my code`using namespace std;</p>

<pre><code>#include opencv2/core/core.hpp&gt;
#include opencv2/highgui/highgui.hpp&gt;
#include iostream&gt;
#include ""stdafx.h""
#include ""cxcore.h""
#include ""highgui.h""
#include ""cv.h""

using namespace std;

using namespace cv;

// Function Headers

void detectAndDisplay(Mat frame);


string face_cascade_name = ""haarcascadeshaarcascade_frontalface_alt.xml"";

string eyes_cascade_name = ""haarcascade_eye_tree_eyeglasses.xml"";




CascadeClassifier face_cascade;

CascadeClassifier eyes_cascade;




string window_name = ""Face-eye detection"";

// Function main

int main(int argc, char** argv)

{

string filename = ""C:\\Users\\Rojin\\Desktop\\Erma.avi"";

VideoCapture capture(filename);









if (!capture.isOpened())  // check if we succeeded
{

    cout &lt;&lt; ""Cannot open the video file"" &lt;&lt; endl;
    return -1;
}

  double fps = capture.get(CV_CAP_PROP_FPS); //get the frames per seconds of the video

cout &lt;&lt; ""Frame per seconds : "" &lt;&lt; fps &lt;&lt; endl;

namedWindow(""Face-eye detection"", WINDOW_NORMAL); //create a window called ""MyVideo""





// Load the cascade

if (!face_cascade.load(face_cascade_name))

{

    cout&lt;&lt;""--(!)Error loading\n""&lt;&lt; endl;

    return (-1);

};




if (!eyes_cascade.load(eyes_cascade_name))

{

    cout&lt;&lt;""--(!)Error loading\n""&lt;&lt; endl;

    return (-1);

};




// Read the video stream

//for (;;)
while(1)

{
    Mat frame;
    //capture &gt;&gt; frame;
    bool bsuccess = capture.read(frame);




    // Apply the classifier to the frame

    if (!frame.empty())

    {

        detectAndDisplay(frame);

    }




    else

    {

        cout &lt;&lt; ""Cannot read the frame from video file"" &lt;&lt; endl;
        break;




    }




    //int c = waitKey(10);

    //if ((char)c == 'c')


    imshow(""MyVideo"", frame); //show the frame in ""MyVideo"" 

    if (waitKey(30) == 27) //wait for 'esc' key press for 30 ms. If 'esc' key is pressed, break loop
    {
    cout &lt;&lt; ""esc key is pressed by user"" &lt;&lt; endl;
        break;
    }
}

 return 0;

}

// Function detectAndDisplay

void detectAndDisplay(Mat frame)

{

std::vector&lt;Rect&gt; faces;

Mat frame_gray;

Mat crop;

Mat res;

Mat gray;

string text;

stringstream sstm;




cvtColor(frame, frame_gray, COLOR_BGR2GRAY);

equalizeHist(frame_gray, frame_gray);







// Detect faces

face_cascade.detectMultiScale(frame_gray, faces, 1.1, 2, 0 | CASCADE_SCALE_IMAGE, Size(30, 30));




for (size_t i = 0; i &lt; faces.size(); i++)

{




Point center(faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5);

ellipse(frame, center, Size(faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar(255, 0, 255), 4, 8, 0);




    Mat faceRoi = frame_gray(faces[i]);

    std::vector&lt;Rect&gt; eyes;




    // in each face detect eyes

    eyes_cascade.detectMultiScale(faceRoi, eyes, 1.1, 2, 0 | CASCADE_SCALE_IMAGE, Size(30, 30));




    for (size_t j = 0; j &lt; eyes.size(); j++)

    {




        Point center(faces[i].x + eyes[j].x+ eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5);

int radius = cvRound((eyes[j].width + eyes[j].height)*0.25);

circle(frame, center, radius, Scalar(255, 0, 0), 4, 8, 0);

    }

}
}
</code></pre>

<p>output:</p>

<pre><code>'OpenCV1.exe' (Win32): Loaded 'C:\Users\Rojin\Documents\Visual Studio 2012\Projects\OpenCV1\x64\Debug\OpenCV1.exe'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\ntdll.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\kernel32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\KernelBase.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\OPENCV\opencv\build\x64\vc11\bin\opencv_objdetect249d.dll'. Cannot find or open the PDB file.
'OpenCV1.exe' (Win32): Loaded 'C:\OPENCV\opencv\build\x64\vc11\bin\opencv_highgui249d.dll'. Cannot find or open the PDB file.
'OpenCV1.exe' (Win32): Loaded 'C:\OPENCV\opencv\build\x64\vc11\bin\opencv_imgproc249d.dll'. Cannot find or open the PDB file.
'OpenCV1.exe' (Win32): Loaded 'C:\OPENCV\opencv\build\x64\vc11\bin\opencv_core249d.dll'. Cannot find or open the PDB file.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\msvcp110d.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\msvcr110d.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\user32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\gdi32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\ole32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\oleaut32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\advapi32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\WinSxS\amd64_microsoft.windows.common-controls_6595b64144ccf1df_5.82.9600.17415_none_34aa3313958e7a52\comctl32.dll'. Cannot find or open the PDB file.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\msvfw32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\avifil32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\avicap32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\combase.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\msvcrt.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\rpcrt4.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\sechost.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\winmm.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\shell32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\msacm32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\version.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\winmmbase.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\shlwapi.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\cfgmgr32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\devobj.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\imm32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\msctf.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\OPENCV\opencv\build\x64\vc11\bin\opencv_ffmpeg249_64.dll'. Module was built without symbols.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\ws2_32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\wsock32.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\nsi.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\uxtheme.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\dwmapi.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\kernel.appcore.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\cryptbase.dll'. Symbols loaded.
'OpenCV1.exe' (Win32): Loaded 'C:\Windows\System32\bcryptprimitives.dll'.     Cannot find or open the PDB file.
The thread 0x2504 has exited with code 0 (0x0).
The thread 0x1f14 has exited with code 0 (0x0).
The thread 0x704 has exited with code 0 (0x0).
The thread 0x1140 has exited with code 0 (0x0).
The program '[10016] OpenCV1.exe' has exited with code -1 (0xffffffff).
</code></pre>
",,2015-05-06 06:25:26,face and eye detection from video using opencv,<opencv>,,,CC BY-SA 3.0,True,True,False,False,True
30803,30096327,2015-05-07 08:56:15,,"<p>my goal is to capture a frame from a rtmp stream every second, and process it using OpenCV. I'm using FFmpeg version N-71899-g6ef3426 and OpenCV 2.4.9 with the Java interface (but I'm first experimenting with Python).
For the moment, I can only take the simple and dirty solution, which is to capture images using FFmpeg, store them in disk, and then read those images from my OpenCV program. This is the FFmpeg command I'm using:</p>

<pre><code>ffmpeg -i ""rtmp://antena3fms35livefs.fplive.net:1935/antena3fms35live-live/stream-lasexta_1 live=1"" -r 1 capImage%03d.jpg
</code></pre>

<p>This is currently working for me, at least with this concrete rtmp source. Then I would need to read those images from my OpenCV program in a proper way. I have  not actually implemented this part, because I'm trying to find a better solution.</p>

<p>I think the ideal way would be to capture the rtmp frames directly from OpenCV, but I cannot find the way to do it. This is the code in Python I'm using:</p>

<pre><code>cv2.namedWindow(""camCapture"", cv2.CV_WINDOW_AUTOSIZE)
cap = cv2.VideoCapture()
cap.open('""rtmp://antena3fms35livefs.fplive.net:1935/antena3fms35live-live/stream-lasexta_1 live=1""')
if not cap.open:
    print ""Not open""
while (True):
    err,img = cap.read()
    if img and img.shape != (0,0):
        cv2.imwrite(""img1"", img)
        cv2.imshow(""camCapture"", img)
    if err:
        print err
        break
    cv2.waitKey(30)
</code></pre>

<p>Instead of read() function, I'm also trying with grab() and retrieve() functions without any good result. The read() function is being executed every time, but no ""img"" or ""err"" is received. 
Is there any other way to do it? or maybe there is no way to get frames directly from OpenCV 2.4.9 from a stream like this?</p>

<p>I've read OpenCV uses FFmpeg to do this kind of tasks, but as you can see, in my case FFmpeg is able to get frames from the stream while OpenCV is not.</p>

<p>In the case I could not find the way to get the frames directly from OpenCV, my next idea is to pipe somehow, FFmpeg output to OpenCV, which seems harder to implement.</p>

<p>Any idea,
thank you!</p>

<p><strong>UPDATE 1:</strong>
I'm in Windows 8.1. Since I was running the python script from Eclipse PyDev, this time I run it from cmd instead, and I'm getting the following warning:</p>

<pre><code>warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:545)
</code></pre>

<p>This warning means, as far as I could read, that either the file-path is wrong, or either the codec is not supported. Now, the question is the same. Is OpenCV not capable of getting the frames from this source?</p>
",2015-05-07 17:59:32,2017-06-13 07:06:41,"OpenCV won't capture frames from a RTMP source, while FFmpeg does",<opencv><video><ffmpeg><rtmp>,,,CC BY-SA 3.0,True,False,False,False,True
30807,30078380,2015-05-06 13:34:14,,"<p>I have included a project using gradle in my app:</p>

<pre><code>compile group: 'org.bytedeco', name: 'javacv', version: '0.11'
</code></pre>

<p>Which builds fine. But whenever I run the app with proguard enabled, it apparently removes the <code>@Platform</code> annotation from the jars that get included then.</p>

<p>I tried using the following based on <a href=""http://proguard.sourceforge.net/manual/examples.html#annotations"" rel=""nofollow"">http://proguard.sourceforge.net/manual/examples.html#annotations</a></p>

<pre><code>-keepattributes *Annotation*

-keep @org.bytedeco.javacpp.annotation interface * {
    *;
}
</code></pre>

<p>I also tried the following based on <a href=""http://proguard.sourceforge.net/manual/troubleshooting.html#notkept"" rel=""nofollow"">http://proguard.sourceforge.net/manual/troubleshooting.html#notkept</a></p>

<pre><code>-keep @interface *
</code></pre>

<p>But that doesn't work either. What else can I try to prevent proguard from removed these annotations? I was thinking about using <code>-injars</code> or <code>-libraryjars</code> but I believe gradle handles that for you.</p>

<p><hr/></p>

<h1>The solution:</h1>

<p>So the solution is as follows:</p>

<p>I have included the following in my proguard rules:</p>

<pre><code># JavaCV
-keep @org.bytedeco.javacpp.annotation interface * {
    *;
}

-keep @org.bytedeco.javacpp.annotation.Platform public class *

-keepclasseswithmembernames class * {
    @org.bytedeco.* &lt;fields&gt;;
}

-keepclasseswithmembernames class * {
    @org.bytedeco.* &lt;methods&gt;;
}

-keepattributes EnclosingMethod
-keep @interface org.bytedeco.javacpp.annotation.*,javax.inject.*

-keepattributes *Annotation*, Exceptions, Signature, Deprecated, SourceFile, SourceDir, LineNumberTable, LocalVariableTable, LocalVariableTypeTable, Synthetic, EnclosingMethod, RuntimeVisibleAnnotations, RuntimeInvisibleAnnotations, RuntimeVisibleParameterAnnotations, RuntimeInvisibleParameterAnnotations, AnnotationDefault, InnerClasses
-keep class org.bytedeco.javacpp.** {*;}
-dontwarn java.awt.**
-dontwarn org.bytedeco.javacv.**
-dontwarn org.bytedeco.javacpp.**

# end javacv
</code></pre>

<p>And the following lines in my gradle (these are the most recent versions at date 7/5/2015 (dd/mm/yyyy)):</p>

<pre><code>compile group: 'org.bytedeco', name: 'javacv', version: '0.11'
compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '2.4.11-0.11', classifier: 'android-arm'
compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '2.4.11-0.11', classifier: 'android-x86'
compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.6.1-0.11', classifier: 'android-arm'
compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.6.1-0.11', classifier: 'android-x86'
</code></pre>

<p>I am quite sure that some proguard rules are a bit overkill, but I have not yet tested which are redundant. You may want to figure this out yourself if you run into this issue.</p>
",2015-05-08 21:38:29,2015-05-08 21:38:29,Proguard removing annotations in Android application,<java><android><proguard><minify><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
30823,30037425,2015-05-04 18:34:00,,"<p>I try to get the live stream from my IP camera by using OpenCv 2.4.11 on Windows. However, it raises error and when I debug the an access occured as 
<code>Unhandled exception at 0x0000000066E5377F (opencv_ffmpeg2411_64.dll) in opencvAxisExp.exe: 0xC0000005: Access violation reading location 0x0000000000000000.</code></p>

<p>I use the code below to do so;</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;opencv2/opencv.hpp&gt;
#include &lt;iostream&gt;
int main(int, char**) {
    cv::VideoCapture vcap;
    cv::Mat image;

    // This works on a D-Link CDS-932L

    //const std::string videoStreamAddress = ""http://user:pass@ip_address:port/axis-cgi/jpg/image.cgi?camera=1&amp;resolution=320x240&amp;compression=25 "";
    const std::string videoStreamAddress = ""http:/user:pass@ip_address:port/axis-cgi/mjpg/video.cgi"";
    //open the video stream and make sure it's opened
    if (!vcap.open(videoStreamAddress)) {
        std::cout &lt;&lt; ""Error opening video stream or file"" &lt;&lt; std::endl;
        return -1;
    }

    for (;;) {
        if (!vcap.read(image)) {
            std::cout &lt;&lt; ""No frame"" &lt;&lt; std::endl;
            cv::waitKey();
        }
        cv::imshow(""Output Window"", image);

        if (cv::waitKey(1) &gt;= 0) break;
    }

}
</code></pre>

<p>Is this a dll error or what is missing here? Do you have any suggestion? Thanks for any comment.</p>
",,2015-05-04 18:51:18,opencv_ffmpeg**.dll error in OpenCV 2.4.11 for IP Camera Access?,<c++><windows><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
30906,30168985,2015-05-11 13:28:58,,"<p><img src=""https://i.stack.imgur.com/cEH4z.png"" alt=""opencv output""></p>

<p>I understand it's a ffmpeg error, but I think ffmpeg is deprecated. what should I do with it? i'm new to <code>make</code>. </p>

<pre><code>root@e0b310d499eb:~/opencv-2.4.9/Release# sudo apt-get install ffmpeg                                                      
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Package ffmpeg is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'ffmpeg' has no installation candidate
</code></pre>

<p>i tried to install ffmpeg directly from git, but it didn't help.
any suggestions?</p>
",2015-05-11 17:01:42,2015-05-11 17:01:42,undefined reference to `avcodec_encode_video` when trying to make opencv,<c++><opencv><makefile>,,,CC BY-SA 3.0,True,False,False,False,True
30941,30125964,2015-05-08 14:12:54,,"<p>i've using emgu cv 2.4.10 to create a RTSP stream viewer that will eventually be used with IP cameras. as i don't have the camera/s as yet, i'm testing using VLC (the windows GUI) to create the stream from a video file. </p>

<pre><code>:sout=#duplicate{dst=rtp{sdp=rtsp://:8554/stream},dst=display} :sout-all :sout-keep
</code></pre>

<p>i'm doing this all testing on localhost.</p>

<p>here's my capture code:</p>

<pre><code>private void ProcessFrame(object sender, EventArgs arg) {
    try {
        frame = _capture.QueryFrame();
        pictureBox1.Image = frame.ToBitmap();
    }
    catch (Exception ex) {
        MessageBox.Show(ex.Message.ToString());
    }
}
</code></pre>

<p>this method is called using this eventhandler:</p>

<pre><code>_capture = new Capture(""rtsp://localhost:8554/stream"");
Application.Idle += ProcessFrame;
_capture.Start();
</code></pre>

<p>the capture is corrupted with random occurrences of ""smearing"" that always occurs in the lower portion of the frame:</p>

<p><img src=""https://i.stack.imgur.com/vH1lC.png"" alt=""screencapture showing smearing on the lower half of the captured video frame""></p>

<p>i've seen several others online have reported this problem as recently as last december but no solution has been found or that would work for me:</p>

<ul>
<li><a href=""http://workingwithcomputervision.blogspot.co.uk/2012/06/issues-with-opencv-and-rtsp.html"" rel=""nofollow noreferrer"">http://workingwithcomputervision.blogspot.co.uk/2012/06/issues-with-opencv-and-rtsp.html</a></li>
<li><a href=""https://stackoverflow.com/questions/18276509/emgu-queryframe-returns-streaky-image-over-rtsp"">EMGU QueryFrame returns &quot;streaky&quot; Image over RTSP</a></li>
<li><a href=""http://www.emgu.com/forum/viewtopic.php?f=7&amp;t=4882&amp;p=10110&amp;hilit=rtsp#p10069"" rel=""nofollow noreferrer"">http://www.emgu.com/forum/viewtopic.php?f=7&amp;t=4882&amp;p=10110&amp;hilit=rtsp#p10069</a></li>
</ul>

<p>to narrow down the problem, i've run ffplay from the commandline and the capture is perfect. i've run another instance of VLC to capture the RTSP stream and it displays perfectly. so this is clearly a problem in open cv/emgu cv.</p>

<p>on a whim, i changed VLC to stream using HTTP.</p>

<pre><code>:sout=#duplicate{dst=http{mux=ffmpeg{mux=flv},dst=:8080/stream},dst=display} :sout-all :sout-keep
</code></pre>

<p>this displays fine in my code, but at a noticeably lower frame rate that won't work for my application.  i'd really appreciate any tips to fixing this problem.  thanks.</p>
",2017-05-23 11:58:16,2015-06-25 08:41:04,smeared/corrupted capture of RTSP streams,<opencv><rtsp><emgucv><capture><corruption>,,,CC BY-SA 3.0,True,False,True,False,True
30999,30167662,2015-05-11 12:28:24,,"<p>I've recently installed OpenCV 3.0 on my machine running Ubuntu 15.04 to do some video manipulations via python. I had some initial problems with the installation, and ended up installing both 2.4 and 3.0 versions separately, uninstalling between each attempt with</p>

<pre><code>sudo find / -name ""*opencv*"" -exec rm -i {} \;
</code></pre>

<p>I now have a working version of OpenCV 3.0, but it seems my ffmpeg is looking for a 2.4 shared library:</p>

<pre><code>ffprobe: error while loading shared libraries: libopencv_core.so.2.4: cannot open shared object file: No such file or directory
</code></pre>

<p>My /usr/local/lib folder contains</p>

<ol>
<li>libopencv_core.so</li>
<li>libopencv_core.so.3.0</li>
<li>libopencv_core.so.3.0.0</li>
</ol>

<p>I've tried running ldconfig, reinstalling ffmpeg and rebooting, but nothing changes. Is there a way to make OpenCV 3.0 play nicely with ffmpeg, or do I need to have bother a 2.4 version and a 3.0 version installed?</p>

<p>Thanks in advance.</p>
",,2015-05-18 15:42:41,Update ffmpeg reference to libopencv_core.so version,<opencv><ubuntu><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
31048,30175222,2015-05-11 18:41:29,,"<p>I'm using ffmpeg to extract motion vectors using the example doc <code>extract_mvs.c</code>. Issue is that this code only seems to give a few pieces of information: frame number, size of macroblock, source (future or past), source (x and y), and destination (x and y).</p>

<p>Unfortunately, this doesn't say <strong>which</strong> frame the source comes from in the past or the future (it could come from both, from several past, or several in the future). It also doesn't say what the macroblock type is (which tells similarly useful info). For example, if Source (x and y) equals Destination (x and y) it is impossible to tell if that information is the same as the last frame or if it entered completely new information. </p>

<p>See lines 60-63 in the <a href=""https://github.com/FFmpeg/FFmpeg/blob/master/doc/examples/extract_mvs.c#L60-L63"" rel=""nofollow"">extract_mvs.c</a> code in ffmpeg</p>

<p>Final question is that for MP4, motion vectors generally have quarter pixel resolution and the resolution given here is clearly rounded to the closest integer. How am I supposed to extract the ""true"" motion vector information before rounding? </p>
",2015-05-11 19:06:24,2015-05-21 02:44:15,Extending the ffmpeg extract_mvs.c example,<c><vector><ffmpeg><computer-vision><motion>,,,CC BY-SA 3.0,False,False,False,False,True
31087,30280879,2015-05-16 21:19:40,,"<p>So I'm trying to figure out how to properly determine the frames per second that a live webcam feed is capturing at using OpenCV RC3.0 RC1 with Python bindings. </p>

<p>Here is the code I'm using:</p>

<pre><code>import timeit
import cv2

fps_timer = timeit.Timer('[webcam.read() for x in range(30)]\nwebcam.release()', 'import cv2\nwebcam=cv2.VideoCapture(0)\n')

#time how long it takes to read 30 frames 10 times in a row
fps = (10*30)/fps_timer.timeit(10)
</code></pre>

<p>Based on other threads I've read on Stackoverflow as well as the OpenCV forums using:</p>

<pre><code>webcam=cv2.VideoCapture(0)
webcam.get(cv2.CAP_PROP_FPS)
</code></pre>

<p>will not work.</p>

<p><strong>Question: is this a reasonable/accurate way to determine the FPS of the webcam? If not, what are some better alternatives?</strong></p>

<p>To give some more details for what I'm trying to achieve: </p>

<p>The reason I want to figure out the FPS of the webcam in this manner is because I'm piping out the results of webcam.read() to ffmpeg via subprocess so I need to know the rough FPS. The core functionality I'm going for is something like (the actual code has a lot of other stuff going on that I don't think is relevant):</p>

<pre><code>FFMPEG_BIN = u'C:/FFMPEG/bin/ffmpeg.exe'

#Code to determine the FPS of the webcam would go here

ffmpeg_command = [ FFMPEG_BIN,
                  '-f', 'rawvideo',
                  '-pix_fmt', 'bgr24',
                  '-s', '{}x{}'.format(width,height), # size of one frame
                  '-r', '{}'.format(fps), # frames per second
                  '-i', '-', # The imput comes from a pipe
                  '-an', # Tells FFMPEG not to expect any audio
                  '-vcodec', 'libx264',
                   ""output_video.avi"" ]

video_writer = sp.Popen(ffmpeg_command, stdin=sp.PIPE)

while True:            
    ret, frame = webcam.read()
    video_writer.stdin.write(frame.tostring())
</code></pre>
",,2015-05-16 21:19:40,Trying to benchmark FPS from a live webcam feed using Python timeit and OpenCV,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
31133,30230223,2015-05-14 05:54:18,,"<p>I am using visual studio 2010 under Win7-64bit to build an application with openCV. I finished development and build the release version without error. I also successfully run the program in debug mode. I then move the <code>.exe</code> file to other directory in the same computer. I run it in <code>cmd.exe</code> and I got error <code>warning: Error opening file &lt;../../modules/highgui/src/cap_ffmpeg_implhpp:537&gt;</code><br>
<br>
I guess there are some dependence with some libraries of openCV but I don't how to solve it. My final task is that I can use that <code>.exe</code> in another computer under Win7 directly. How to do it?<br>
<br>
I found a similar question <a href=""https://stackoverflow.com/questions/4301207/build-a-portable-visual-studio-2010-application"">here</a>. But I don't have <code>.dll</code> file built, so what should I do to solve this problem?</p>
",2017-05-23 12:06:36,2015-05-14 06:58:18,How to build a portable program by visual studio,<visual-studio-2010><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
31462,30448678,2015-05-26 02:52:41,,"<p>I'm hoping someone might be able to tell me what I'm doing wrong here. I downloaded vanevery's GitHub project “JavaCV-0.5-Stream-Test"" which is a couple of years old so I updated to the latest JavaCV version 0.11. But Android Studio is returning the error... </p>

<p><strong>Error:</strong></p>

<blockquote>
  <p>""record(org.bytedeco.javacpp.Frame) in FFmpegFrameRecorder cannot be
  applied to (org.bytedeco.javacpp.opencv_core.lplimage)"" for the line
  of code which reads recorder.record(yuvIplimage), under
  onPreviewFrame.</p>
</blockquote>

<p>Here is my <strong>code:</strong></p>

<pre><code>    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {

        if (yuvIplimage != null &amp;&amp; recording) {

            videoTimestamp = 1000 * (System.currentTimeMillis() - startTime);

            // Put the camera preview frame right into the yuvIplimage object
            yuvIplimage.getByteBuffer().put(data);

            try {
                // Get the correct time
                recorder.setTimestamp(videoTimestamp);

                // Record the image into FFmpegFrameRecorder
                recorder.record(yuvIplimage);

            } catch (FFmpegFrameRecorder.Exception e) {
                Log.v(LOG_TAG,e.getMessage());
                e.printStackTrace();
            }
        }
    }
</code></pre>
",2015-05-26 03:17:57,2015-06-23 08:43:52,JavaCV Stream-Test code giving Error,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
31474,27380954,2014-12-09 14:11:42,,"<p>I have looked through the question ""why can't i open avi in opencv?"" already. But the solution mentioned there can not solve my problem, since there is no ""opencv_ffmpeg*.dll"" in the opencv for java at all. Even though I copied the ""opencv_ffmpeg*.dll"" into the folder containing opencv for java or added the path of bin folder which included the ""opencv_ffmpeg*.dll"" to the environment variable 'PATH', the problem still perplexed me.</p>

<p>The codes which go wrong are as below:</p>

<pre><code>VideoCapture capture;
try{
    capture = new VideoCapture(""1.avi"");
} catch (Exception e){
    System.out.println(""video not exist!"");
    return;
}
if (!capture.isOpened()){
    System.out.println(""fail to open the video!"");
    return;  
}
</code></pre>

<p>I always got the ""fail to open the video!"" prompt. 1.avi is placed properly. Even though I used the absolute path, the problem remained.</p>

<p>Do anyone know how to solve this?</p>
",2014-12-09 14:17:51,2016-07-24 11:34:13,"Using eclipse for java, why can't i open avi video in opencv?",<java><eclipse><opencv><video-capture><avi>,,,CC BY-SA 3.0,True,False,False,False,True
31564,30493592,2015-05-27 21:37:01,,"<p>I am going through some beginner computer vision lessons and I would like to use Python 3.4 instead of 2.7 for the lessons, and I have both versions installed on my computer in <code>C:/Python34</code> and <code>C:/Python27</code>, respectively. I'm able to <code>import cv2</code> into The most recent release of OpenCV, which the lessons require, does support using the cv2 module in Python 3but it has to be built from the source.</p>

<p>To do this, I've used the cmake-gui to create the necessary make files in <code>c:/opencv</code>, and I initiate the build by executing <code>make -j4</code> in the <code>c:/opencv/build</code> directory cmake created. Note that I'm using the mingw32-make command, not visual studios. Both my <code>gcc</code> and <code>g++</code> compilers work fine; I'm using versions 5.1.0 of both. The full configuration of my generated makefiles is pasted below. I have made a few edits to overcome other compiler errors often encountered.</p>

<p>At present, the build is almost successful (getting to ""100%"" before failing). The error occurs at the step <em>Linking CXX shared library ....\lib\cv2.pyd</em>, <code>cv2.pyd</code> being the python library I need to compile in order to import opencv. The full error that stops compilation is this:</p>

<p><code>
Linking CXX shared library ..\..\lib\cv2.pyd
modules\python3\CMakeFiles\opencv_python3.dir\build.make:215: recipe for target 'lib/cv2.pyd' failed
CMakeFiles\Makefile2:7114: recipe for target 'modules/python3/CMakeFiles/opencv_python3.dir/all' failed
makefile:135: recipe for target 'all' failed
</code></p>

<p>I've taken a look at the lines specified in the makefiles, but can't see anything that would give me a clue what's going wrong with the linking. I also notice, in the cmake configuration below, that the Python (for build) parameter is set to the pyhon27 executable instead of python34, but haven't been able to find the right parameter to change this, and I'm not certain this is even related to the issue. If anyone has suggestions for how to fix this and make opencv build the pyd for Python 3.4, please chime in.</p>

<h1>CMake configuration</h1>

<blockquote>
  <p>Detected version of GNU GCC: 51 (501)
  CUDA compilation is disabled (due to only Visual Studio compiler supported on your platform).
  Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) 
  To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR= option to cmake
  Found PythonInterp: C:/Python27/python.exe (found suitable version ""2.7.6"", minimum required is ""2.7"") 
  Found PythonLibs: C:/Python27/libs/libpython27.a (found suitable exact version ""2.7.6"") 
  Found PythonInterp: C:/Python34/python.exe (found suitable version ""3.4.2"", minimum required is ""3.4"") 
  Found PythonLibs: C:/Python34/libs/python34.lib (found suitable exact version ""3.4.2"") 
  VTK is not found. Please set -DVTK_DIR in CMake to VTK build directory, or to VTK install subdirectory with VTKConfig.cmake file
   videoio: Removing WinRT API headers by default</p>
  
  <p>General configuration for OpenCV 3.0.0-dev =====================================
   Version control:               3.0.0-rc1-240-g1df244b-dirty</p>
  
  <p>Platform:
     Host:                        Windows 6.1 AMD64
     CMake:                       3.2.2
     CMake generator:             MinGW Makefiles
     CMake build tool:            C:/MinGW/bin/make.exe
     Configuration:               Release></p>
  
  <p>C/C++:
     Built as dynamic libs?:      YES
     C++ Compiler:                c:/MinGW/bin/g++.exe  (ver 5.1.0)
     C++ flags (Release):         -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -O2 -DNDEBUG  -DNDEBUG
     C++ flags (Debug):           -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
     C Compiler:                  c:/MinGW/bin/gcc.exe
     C flags (Release):           -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -fvisibility=hidden -O2 -DNDEBUG  -DNDEBUG
     C flags (Debug):             -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -fomit-frame-pointer -msse -msse2 -ffunction-sections -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG
     Linker flags (Release):<br>
     Linker flags (Debug):<br>
     Precompiled headers:         YES
     Extra dependencies:          comctl32 gdi32 ole32 setupapi ws2_32 avifil32 avicap32 winmm msvfw32
     3rdparty dependencies:       zlib libjpeg libwebp libpng libtiff libjasper IlmImf></p>
  
  <p>OpenCV modules:
     To be built:                 hal core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab python3
     Disabled:                    python2 world
     Disabled by dependency:      -
     Unavailable:                 androidcamera cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java viz</p>
  
  <p>Windows RT support:            NO</p>
  
  <p>GUI: 
     QT:                          NO
     Win32 UI:                    YES
     OpenGL support:              NO
     VTK support:                 NO</p>
  
  <p>Media I/O: 
     ZLib:                        build (ver 1.2.8)
     JPEG:                        build (ver 90)
     WEBP:                        build (ver 0.3.1)
     PNG:                         build (ver 1.5.12)
     TIFF:                        build (ver 42 - 4.0.2)
     JPEG 2000:                   build (ver 1.900.1)
     OpenEXR:                     build (ver 1.7.1)
     GDAL:                        NO</p>
  
  <p>Video I/O:
     Video for Windows:           YES
     DC1394 1.x:                  NO
     DC1394 2.x:                  NO
     FFMPEG:                      YES (prebuilt binaries)
       codec:                     YES (ver 55.18.102)
       format:                    YES (ver 55.12.100)
       util:                      YES (ver 52.38.100)
       swscale:                   YES (ver 2.3.100)
       resample:                  NO
       gentoo-style:              YES
     OpenNI:                      NO
     OpenNI PrimeSensor Modules:  NO
     OpenNI2:                     NO
     PvAPI:                       NO
     GigEVisionSDK:               NO
     DirectShow:                  YES
     Media Foundation:            NO
     XIMEA:                       NO
     Intel PerC:                  NO</p>
  
  <p>Other third-party libraries:
     Use IPP:                     NO
     Use IPP Async:               NO
     Use Eigen:                   NO
     Use TBB:                     NO
     Use OpenMP:                  NO
     Use GCD                      NO
     Use Concurrency              NO
     Use C=:                      NO
     Use Cuda:                    NO
     Use OpenCL:                  YES</p>
  
  <p>OpenCL:
     Version:                     dynamic
     Include path:                C:/opencv/3rdparty/include/opencl/1.2
     Use AMDFFT:                  NO
     Use AMDBLAS:                 NO</p>
  
  <p>Python 2:
     Interpreter:                 C:/Python27/python.exe (ver 2.7.6)</p>
  
  <p>Python 3:
     Interpreter:                 C:/Python34/python.exe (ver 3.4.2)
     Libraries:                   C:/Python34/libs/python34.lib (ver 3.4.2)
     numpy:                       C:/Python34/lib/site-packages/numpy/core/include (ver 1.9.2)
     packages path:               C:/Python34/Lib/site-packages</p>
  
  <p>Python (for build):            C:/Python27/python.exe</p>
  
  <p>Java:
     ant:                         NO
     JNI:                         C:/Program Files/Java/jdk1.7.0_03/include C:/Program Files/Java/jdk1.7.0_03/include/win32 C:/Program Files/Java/jdk1.7.0_03/include
     Java wrappers:               NO
     Java tests:                  NO</p>
  
  <p>Matlab:
     mex:                         C:/Program Files (x86)/MATLAB/R2009a Student/bin/mex.bat
     Compiler/generator:          Not working (bindings will not be generated)</p>
  
  <p>Documentation:
     Doxygen:                     NO
     PlantUML:                    NO</p>
  
  <p>Tests and samples:
     Tests:                       YES
     Performance tests:           YES
     C/C++ Examples:              NO</p>
  
  <p>Install path:                  C:/opencv/build/install</p>
  
  <h2> cvconfig.h is in:              C:/opencv/build</h2>
  
  <p>Configuring done
  Generating done</p>
</blockquote>
",,2015-05-27 21:37:01,Error building OpenCV 3.0.0 rc1 on Windows 7 (64-bit): Cannot compile/link cv2.pyd for Python 3.4,<python><c++><opencv><python-3.x><makefile>,,,CC BY-SA 3.0,True,True,False,False,True
31764,30538806,2015-05-29 20:49:19,,"<p>I'm trying to add image with transparent background on the video, using JavaCV.</p>

<p>I'm using FFmpegFrameGrapper, for grapping frames and I'm trying to set my image on every frame of the video, and record it again using FFmpeg Recorder, but no result.</p>

<p>I'm doing something like this</p>

<p>// img is the IplImage of a frame</p>

<pre><code>private IplImage setOverlay(IplImage img){
    cvCopy(overlayImage, img); //overlayImage I'm getting from 
                               //internal storage
    cvResetImageROI(img);

    return img;
}
</code></pre>
",2015-06-01 09:00:27,2015-06-01 09:00:27,Image Overlay on video using JavaCV for Android,<android><ffmpeg><javacv><iplimage>,,,CC BY-SA 3.0,False,False,False,False,True
31807,27404779,2014-12-10 15:29:23,,"<p>I am getting an error <code>(-215) ssize.area() &gt; 0 in function resize</code> when I am trying to resize a frame from a .avi video. I've deduced that this means the frame cannot be read. I have FFmpeg installed as well. Why is this not valid? The video is in the same folder as the python file.</p>

<p>Also, playing .m4v video works fine. So it is just .avi.</p>

<p>Here is the beginning of the code before I start messing with the images and whatnot.</p>

<pre><code>from __future__ import print_function
import numpy as np, cv2
import datetime
cap = cv2.VideoCapture(""video2.avi"")

ret = cap.set(3,320)
ret = cap.set(4,240)
f = open('cars','w')

carCount = 0
while True:
    stuff in here

    cv2.imshow('Video', frame)
    if cv2.waitKey(1) == ord('q'):
        break

f.close()
cap.release()
cv2.destroyAllWindows()
</code></pre>
",2014-12-10 15:45:33,2014-12-10 15:45:33,OpenCV AVI Playback Error: ssize.area() > 0,<python><python-2.7><opencv><computer-vision>,,,CC BY-SA 3.0,True,False,False,False,True
31842,30578381,2015-06-01 16:18:32,,"<p>I am trying to compile opencv on Slackware 4.1. However I encountered the following error each time.</p>

<pre><code>In file included from /usr/include/gstreamer-0.10/gst/pbutils/encoding-profile.h:29:0,
             from /tmp/SBo/opencv-2.4.11/modules/highgui/src/cap_gstreamer.cpp:65:
/usr/include/gstreamer-0.10/gst/pbutils/gstdiscoverer.h:35:9: error: 'GstMiniObjectClass' does not name a type
typedef GstMiniObjectClass GstDiscovererStreamInfoClass;

/usr/include/gstreamer-0.10/gst/pbutils/gstdiscoverer.h:83:9: error: 'GstMiniObjectClass' does not name a type
typedef GstMiniObjectClass GstDiscovererContainerInfoClass;

/usr/include/gstreamer-0.10/gst/pbutils/gstdiscoverer.h:104:9: error: 'GstMiniObjectClass' does not name a type
typedef GstMiniObjectClass GstDiscovererAudioInfoClass;
     ^
/usr/include/gstreamer-0.10/gst/pbutils/gstdiscoverer.h:129:9: error: 'GstMiniObjectClass' does not name a type
typedef GstMiniObjectClass GstDiscovererVideoInfoClass;
     ^
/usr/include/gstreamer-0.10/gst/pbutils/gstdiscoverer.h:159:9: error: 'GstMiniObjectClass' does not name a type
typedef GstMiniObjectClass GstDiscovererSubtitleInfoClass;
     ^
/usr/include/gstreamer-0.10/gst/pbutils/gstdiscoverer.h:202:9: error: 'GstMiniObjectClass' does not name a type
typedef GstMiniObjectClass GstDiscovererInfoClass;
     ^
In file included from /tmp/SBo/opencv-2.4.11/modules/highgui/src/cap_gstreamer.cpp:65:0:
/usr/include/gstreamer-0.10/gst/pbutils/encoding-profile.h:47:9: error: 'GstMiniObjectClass' does not name a type
typedef GstMiniObjectClass GstEncodingProfileClass;
     ^
/usr/include/gstreamer-0.10/gst/pbutils/encoding-profile.h:66:9: error: 'GstEncodingProfileClass' does not name a type
typedef GstEncodingProfileClass GstEncodingContainerProfileClass;
     ^
/usr/include/gstreamer-0.10/gst/pbutils/encoding-profile.h:85:9: error: 'GstEncodingProfileClass' does not name a type
typedef GstEncodingProfileClass GstEncodingVideoProfileClass;
     ^
/usr/include/gstreamer-0.10/gst/pbutils/encoding-profile.h:104:9: error: 'GstEncodingProfileClass' does not name a type
typedef GstEncodingProfileClass GstEncodingAudioProfileClass;
     ^
/tmp/SBo/opencv-2.4.11/modules/highgui/src/cap_gstreamer.cpp: In member function 'virtual bool CvCapture_GStreamer::grabFrame()':
/tmp/SBo/opencv-2.4.11/modules/highgui/src/cap_gstreamer.cpp:232:57: error: 'gst_app_sink_pull_sample' was not declared in this scope
 sample = gst_app_sink_pull_sample(GST_APP_SINK(sink));
                                                     ^
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_gstreamer.cpp.o] Error 1
</code></pre>

<p>The configuration report for the compilation is as follows:</p>

<pre><code>-- General configuration for OpenCV 2.4.11 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.10.17 i686
--     CMake:                       2.8.12
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/gmake
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.2)
--     C++ flags (Release):         -O2 -march=i486 -mtune=i686   -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -O2 -march=i486 -mtune=i686   -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -O2 -march=i486 -mtune=i686   -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -O2 -march=i486 -mtune=i686   -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -msse3 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         NO
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda java python viz
-- 
--   GUI: 
--     QT 4.x:                      YES (ver 4.8.5 EDITION = OpenSource)
--     QT OpenGL support:           NO
--     OpenGL support:              NO
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/libjpeg.so (ver 80)
--     PNG:                         /usr/lib/libpng.so (ver 1.4.12)
--     TIFF:                        /usr/lib/libtiff.so (ver 42 - 3.9.7)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.2)
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)
--       video:                     YES (ver 0.10.36)
--       app:                       YES (ver 0.10.36)
--       riff:                      YES (ver 0.10.36)
--       pbutils:                   YES (ver 0.10.36)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l1 (ver 0.9.5) / libv4l2 (ver 0.9.5)
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /tmp/SBo/opencv-2.4.11/3rdparty/include/opencl/1.2
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python2 (ver 2.7.5)
-- 
--   Java:
--     ant:                         NO
--     JNI:                         /usr/lib/java/include /usr/lib/java/include/linux /usr/lib/java/include
--     Java tests:                  NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/share/texmf/bin/pdflatex
--     Doxygen:                     YES (/usr/bin/doxygen)
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr
-- 
--   cvconfig.h is in:              /tmp/SBo/opencv-2.4.11/build
</code></pre>

<p>I looked through the opencv requirement from below link</p>

<p><a href=""http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation"" rel=""noreferrer"">http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html#linux-installation</a></p>

<p>That I need ffmpeg or libav packages, which I cannot find under standard slackware 14.1 packages.  But I installed gstreamer completely instead (gstreamer, gst-pluigns-base, and good) and the error I encountered above definitely has something to do with gstreamer.</p>
",2015-06-06 23:26:10,2017-03-04 11:41:15,failure in compiling opencv with cap_gstreamer error,<c++><opencv><gstreamer>,,,CC BY-SA 3.0,True,False,False,False,True
31879,30564187,2015-06-01 00:35:40,,"<p>I just installed <code>opencv3</code> from sources. I correctly get <code>cv2.so</code> library and I can access correctly the module in Python.</p>

<pre><code>import cv2
</code></pre>

<p>but when I use some <em>GUI</em> functions I get errors:</p>

<pre><code>cv2.imshow('frame',frame)
cv2.error: /Users/****/****/opencv-3.0.0-rc1/modules/highgui/src/window.cpp:534: error: (-2) The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script in function cvShowImage
</code></pre>

<p>This is the cmake output, where I can see<code>Cocoa:YES</code>, so I suppose everything should be ok. </p>

<p>Any suggestions?</p>

<pre><code>General configuration for OpenCV 3.0.0-rc1 =====================================
--   Version control:               unknown
--
--   Platform:
--     Host:                        Darwin 14.3.0 x86_64
--     CMake:                       3.2.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /opt/local/bin/gmake
--     Configuration:               Release
--
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /opt/local/bin/c++  (ver 4.8.4)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /opt/local/bin/gcc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -fvisibility=hidden -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):
--     Linker flags (Debug):
--     Precompiled headers:         YES
--
--   OpenCV modules:
--     To be built:                 hal core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab python2
--     Disabled:                    viz world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python3
--
--   GUI:
--     QT:                          NO
--     Cocoa:                       YES
--     OpenGL support:              NO
--     VTK support:                 YES (ver 6.2.0)
--
--   Media I/O:
--     ZLib:                        /usr/lib/libz.dylib (ver 1.2.5)
--     JPEG:                        /opt/local/lib/libjpeg.dylib (ver 90)
--     WEBP:                        /opt/local/lib/libwebp.dylib (ver encoder: 0x0202)
--     PNG:                         /opt/local/lib/libpng.dylib (ver 1.6.17)
--     TIFF:                        /opt/local/lib/libtiff.dylib (ver 42 - 4.0.3)
--     JPEG 2000:                   /opt/local/lib/libjasper.dylib (ver 1.900.1)
--     OpenEXR:                     /opt/local/lib/libImath.dylib /opt/local/lib/libIlmImf.dylib /opt/local/lib/libIex.dylib /opt/local/lib/libHalf.dylib /opt/local/lib/libIlmThread.dylib (ver 1.7.0)
--     GDAL:                        NO
--
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.0)
--     FFMPEG:                      YES
--       codec:                     YES (ver Unknown)
--       format:                    YES (ver Unknown)
--       util:                      YES (ver Unknown)
--       swscale:                   YES (ver Unknown)
--       resample:                  YES (ver Unknown)
--       gentoo-style:              YES
--     GStreamer:
--       base:                      YES (ver 1.4.5)
--       video:                     YES (ver 1.4.5)
--       app:                       YES (ver 1.4.5)
--       riff:                      YES (ver 1.4.5)
--       pbutils:                   YES (ver 1.4.5)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     QuickTime:                   NO
--     QTKit:                       NO
--     V4L/V4L2:                    NO/NO
--     XIMEA:                       NO
--
--   Other third-party libraries:
--     Use IPP:                     8.2.1 [8.2.1]
--          at:                     /Users/***/***/opencv-3.0.0-rc1/3rdparty/ippicv/unpack/ippicv_osx
--     Use IPP Async:               NO
--     Use Eigen:                   YES (ver 3.2.4)
--     Use TBB:                     YES (ver 4.3 interface 8003)
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
--
--   OpenCL:
--     Version:                     static
--     libraries:                   -framework OpenCL
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
--
--   Python 2:
--     Interpreter:                 /opt/local/bin/python2.7 (ver 2.7.9)
--     Libraries:                   /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/libpython2.7.dylib (ver 2.7.9)
--     numpy:                       /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/numpy/core/include (ver 1.9.2)
--     packages path:               lib/python2.7/site-packages
--
--   Python 3:
--     Interpreter:                 (ver 3.4.3)
--
--   Python (for build):            /opt/local/bin/python2.7
--
--   Java:
--     ant:                         NO
--     JNI:                         /System/Library/Frameworks/JavaVM.framework/Headers /System/Library/Frameworks/JavaVM.framework/Headers /System/Library/Frameworks/JavaVM.framework/Headers
--     Java wrappers:               NO
--     Java tests:                  NO
--
--   Matlab:
--     mex:                         /Applications/MATLAB_R2015a.app/bin/mex
--     Compiler/generator:          Not working (bindings will not be generated)
--
--   Documentation:
--     Doxygen:                     /opt/local/bin/doxygen (ver 1.8.9.1)
--     PlantUML:                    NO
--
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
--
--   Install path:                  /usr/local
--
--   cvconfig.h is in:              /Users/***/***/opencv-3.0.0-rc1/build
-- -----------------------------------------------------------------
--
-- Configuring done
-- Generating done
</code></pre>
",,2015-06-01 01:12:21,Errors while using GUI function on OpenCV3,<python><macos><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
32185,30711480,2015-06-08 14:12:55,,"<p>I downloaded the javaCV project from here</p>

<p><a href=""https://github.com/bytedeco/javacv"" rel=""nofollow"">https://github.com/bytedeco/javacv</a></p>

<p>then I tried to import it in Netbeans, but i got the following error</p>

<pre><code>Failed to execute goal on project javacv: Could not resolve dependencies for project org.bytedeco:javacv:jar:1.0-SNAPSHOT: The following artifacts could not be resolved: 
org.bytedeco:javacpp:jar:1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:opencv:jar:3.0.0-1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:ffmpeg:jar:2.6.3-1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:flycapture:jar:2.7.3.19-1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:libdc1394:jar:2.2.3-1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:libfreenect:jar:0.5.2-1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:videoinput:jar:0.200-1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:artoolkitplus:jar:2.3.1-1.0-SNAPSHOT, 
org.bytedeco.javacpp-presets:flandmark:jar:1.07-1.0-SNAPSHOT: 
Could not find artifact org.bytedeco:javacpp:jar:1.0-SNAPSHOT -&gt; [Help 1]
</code></pre>

<p>I also tried to install it manually, but I got the same error. What shoud I do to solve this problem? Thanks</p>
",,2015-06-08 14:25:37,javaCV Maven project,<maven><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
32215,30714388,2015-06-08 16:23:14,,"<p>I know this question was asked hundred of times, nevertheless I got problems.</p>

<p>I'm working on a new windows (2010 server) systen, installed Python 2.7.9 and OpenCV 2.4.10. I copied opencv_ffmpeg.dll to Python27\opencv_ffmpeg2410.dll. I also installed K-Lite video codecs. If I try to save a video with VideoWriter (MJPG), I get always a file with size 5682 bytes which is not playable. On my old system the same python code works, but over the years I installed several versions of drivers and ffmpeg and whatever. So is there a systematic way to get VideoWriter working if you are on a freshly installed system?</p>
",2015-06-08 18:12:19,2015-06-09 16:07:31,OpenCV VideoWriter ffmpeg again and again,<python><opencv><ffmpeg><codec>,,,CC BY-SA 3.0,True,False,False,False,True
32472,30820079,2015-06-13 14:58:36,,"<p>I am trying to run opencv on Fedora 21 64-bit with ARM-compilers. I tried configuring it with Cmake 3.0.2 gui and i got this:</p>

<pre><code>The CXX compiler identification is GNU 4.5.1
The C compiler identification is GNU 4.5.1
Check for working CXX compiler: /opt/FriendlyARM/toolschain/4.5.1/bin/arm-linux-g++
Check for working CXX compiler: /opt/FriendlyARM/toolschain/4.5.1/bin/arm-linux-g++ -- works
Detecting CXX compiler ABI info
Detecting CXX compiler ABI info - done
Check for working C compiler: /opt/FriendlyARM/toolschain/4.5.1/bin/arm-linux-gcc
Check for working C compiler: /opt/FriendlyARM/toolschain/4.5.1/bin/arm-linux-gcc -- works
Detecting C compiler ABI info
Detecting C compiler ABI info - done
Detected version of GNU GCC: 45 (405)
Performing Test HAVE_CXX_FSIGNED_CHAR
Performing Test HAVE_CXX_FSIGNED_CHAR - Success
Performing Test HAVE_C_FSIGNED_CHAR
Performing Test HAVE_C_FSIGNED_CHAR - Success
Performing Test HAVE_CXX_W
Performing Test HAVE_CXX_W - Success
Performing Test HAVE_C_W
Performing Test HAVE_C_W - Success
Performing Test HAVE_CXX_WALL
Performing Test HAVE_CXX_WALL - Success
Performing Test HAVE_C_WALL
Performing Test HAVE_C_WALL - Success
Performing Test HAVE_CXX_WERROR_RETURN_TYPE
Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
Performing Test HAVE_C_WERROR_RETURN_TYPE
Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
Performing Test HAVE_CXX_WERROR_ADDRESS
Performing Test HAVE_CXX_WERROR_ADDRESS - Success
Performing Test HAVE_C_WERROR_ADDRESS
Performing Test HAVE_C_WERROR_ADDRESS - Success
Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
Performing Test HAVE_C_WERROR_SEQUENCE_POINT
Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
Performing Test HAVE_CXX_WFORMAT
Performing Test HAVE_CXX_WFORMAT - Success
Performing Test HAVE_C_WFORMAT
Performing Test HAVE_C_WFORMAT - Success
Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
Performing Test HAVE_C_WERROR_FORMAT_SECURITY
Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
Performing Test HAVE_CXX_WMISSING_DECLARATIONS
Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
Performing Test HAVE_C_WMISSING_DECLARATIONS
Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
Performing Test HAVE_CXX_WMISSING_PROTOTYPES
Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
Performing Test HAVE_C_WMISSING_PROTOTYPES
Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
Performing Test HAVE_C_WSTRICT_PROTOTYPES
Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
Performing Test HAVE_CXX_WUNDEF
Performing Test HAVE_CXX_WUNDEF - Success
Performing Test HAVE_C_WUNDEF
Performing Test HAVE_C_WUNDEF - Success
Performing Test HAVE_CXX_WINIT_SELF
Performing Test HAVE_CXX_WINIT_SELF - Success
Performing Test HAVE_C_WINIT_SELF
Performing Test HAVE_C_WINIT_SELF - Success
Performing Test HAVE_CXX_WPOINTER_ARITH
Performing Test HAVE_CXX_WPOINTER_ARITH - Success
Performing Test HAVE_C_WPOINTER_ARITH
Performing Test HAVE_C_WPOINTER_ARITH - Success
Performing Test HAVE_CXX_WSHADOW
Performing Test HAVE_CXX_WSHADOW - Success
Performing Test HAVE_C_WSHADOW
Performing Test HAVE_C_WSHADOW - Success
Performing Test HAVE_CXX_WSIGN_PROMO
Performing Test HAVE_CXX_WSIGN_PROMO - Success
Performing Test HAVE_C_WSIGN_PROMO
Performing Test HAVE_C_WSIGN_PROMO - Failed
Performing Test HAVE_CXX_WNO_NARROWING
Performing Test HAVE_CXX_WNO_NARROWING - Failed
Performing Test HAVE_C_WNO_NARROWING
Performing Test HAVE_C_WNO_NARROWING - Failed
Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
Performing Test HAVE_CXX_PTHREAD
Performing Test HAVE_CXX_PTHREAD - Success
Performing Test HAVE_C_PTHREAD
Performing Test HAVE_C_PTHREAD - Success
Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
Performing Test HAVE_C_FOMIT_FRAME_POINTER
Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
Performing Test HAVE_CXX_FFUNCTION_SECTIONS
Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success
Performing Test HAVE_C_FFUNCTION_SECTIONS
Performing Test HAVE_C_FFUNCTION_SECTIONS - Success
Looking for pthread.h
Looking for pthread.h - found
Check if the system is big endian
Searching 16 bit integer
Looking for sys/types.h
Looking for sys/types.h - found
Looking for stdint.h
Looking for stdint.h - found
Looking for stddef.h
Looking for stddef.h - found
Check size of unsigned short
Check size of unsigned short - done
Using unsigned short
Check if the system is big endian - little endian
Could NOT find ZLIB (missing:  ZLIB_LIBRARY) (found version ""1.2.8"")
Looking for fseeko
Looking for fseeko - found
Looking for unistd.h
Looking for unistd.h - found
Check size of off64_t
Check size of off64_t - failed
Performing Test HAVE_C_WNO_SHORTEN_64_TO_32
Performing Test HAVE_C_WNO_SHORTEN_64_TO_32 - Failed
Performing Test HAVE_C_WNO_ATTRIBUTES
Performing Test HAVE_C_WNO_ATTRIBUTES - Success
Performing Test HAVE_C_WNO_STRICT_PROTOTYPES
Performing Test HAVE_C_WNO_STRICT_PROTOTYPES - Success
Performing Test HAVE_C_WNO_MISSING_PROTOTYPES
Performing Test HAVE_C_WNO_MISSING_PROTOTYPES - Success
Performing Test HAVE_C_WNO_MISSING_DECLARATIONS
Performing Test HAVE_C_WNO_MISSING_DECLARATIONS - Success
Could NOT find TIFF (missing:  TIFF_LIBRARY TIFF_INCLUDE_DIR) 
Looking for assert.h
Looking for assert.h - found
Looking for fcntl.h
Looking for fcntl.h - found
Looking for io.h
Looking for io.h - not found
Looking for jbg_newlen
Looking for jbg_newlen - not found
Looking for mmap
Looking for mmap - found
Looking for search.h
Looking for search.h - found
Looking for string.h
Looking for string.h - found
Looking for unistd.h
Looking for unistd.h - found
Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE
Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE - Failed
Performing Test HAVE_C_WNO_UNDEF
Performing Test HAVE_C_WNO_UNDEF - Success
Performing Test HAVE_C_WNO_UNUSED
Performing Test HAVE_C_WNO_UNUSED - Success
Performing Test HAVE_C_WNO_SIGN_COMPARE
Performing Test HAVE_C_WNO_SIGN_COMPARE - Success
Performing Test HAVE_C_WNO_CAST_ALIGN
Performing Test HAVE_C_WNO_CAST_ALIGN - Success
Performing Test HAVE_C_WNO_SHADOW
Performing Test HAVE_C_WNO_SHADOW - Success
Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Failed
Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST
Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST - Success
Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST
Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST - Success
Performing Test HAVE_C_WNO_UNUSED_PARAMETER
Performing Test HAVE_C_WNO_UNUSED_PARAMETER - Success
Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
Could NOT find JPEG (missing:  JPEG_LIBRARY JPEG_INCLUDE_DIR) 
Found JPEG: libjpeg  
Could NOT find Jasper (missing:  JASPER_LIBRARIES JASPER_INCLUDE_DIR) 
Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION
Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION - Success
Performing Test HAVE_C_WNO_UNINITIALIZED
Performing Test HAVE_C_WNO_UNINITIALIZED - Success
Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER
Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER - Failed
Found ZLIB: zlib (found version ""1.2.7"") 
Could NOT find PNG (missing:  PNG_LIBRARY) (found version ""1.6.10"")
Looking for semaphore.h
Looking for semaphore.h - found
Performing Test HAVE_CXX_WNO_SHADOW
Performing Test HAVE_CXX_WNO_SHADOW - Success
Performing Test HAVE_CXX_WNO_UNUSED
Performing Test HAVE_CXX_WNO_UNUSED - Success
Performing Test HAVE_CXX_WNO_SIGN_COMPARE
Performing Test HAVE_CXX_WNO_SIGN_COMPARE - Success
Performing Test HAVE_CXX_WNO_UNDEF
Performing Test HAVE_CXX_WNO_UNDEF - Success
Performing Test HAVE_CXX_WNO_UNINITIALIZED
Performing Test HAVE_CXX_WNO_UNINITIALIZED - Success
Performing Test HAVE_CXX_WNO_SWITCH
Performing Test HAVE_CXX_WNO_SWITCH - Success
Performing Test HAVE_CXX_WNO_PARENTHESES
Performing Test HAVE_CXX_WNO_PARENTHESES - Success
Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS
Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS - Success
Performing Test HAVE_CXX_WNO_EXTRA
Performing Test HAVE_CXX_WNO_EXTRA - Success
checking for module 'gtk+-2.0'
  found gtk+-2.0, version 2.24.28
checking for module 'gthread-2.0'
  found gthread-2.0, version 2.42.2
checking for module 'gstreamer-base-1.0'
  package 'gstreamer-base-1.0' not found
checking for module 'gstreamer-video-1.0'
  package 'gstreamer-video-1.0' not found
checking for module 'gstreamer-app-1.0'
  package 'gstreamer-app-1.0' not found
checking for module 'gstreamer-riff-1.0'
  package 'gstreamer-riff-1.0' not found
checking for module 'gstreamer-pbutils-1.0'
  package 'gstreamer-pbutils-1.0' not found
checking for module 'gstreamer-base-0.10'
  package 'gstreamer-base-0.10' not found
checking for module 'gstreamer-video-0.10'
  package 'gstreamer-video-0.10' not found
checking for module 'gstreamer-app-0.10'
  package 'gstreamer-app-0.10' not found
checking for module 'gstreamer-riff-0.10'
  package 'gstreamer-riff-0.10' not found
checking for module 'gstreamer-pbutils-0.10'
  package 'gstreamer-pbutils-0.10' not found
checking for module 'libdc1394-2'
  package 'libdc1394-2' not found
checking for module 'libdc1394'
  package 'libdc1394' not found
checking for module 'libv4l1'
  package 'libv4l1' not found
checking for module 'libv4l2'
  package 'libv4l2' not found
Looking for linux/videodev.h
Looking for linux/videodev.h - found
Looking for linux/videodev2.h
Looking for linux/videodev2.h - found
Looking for sys/videoio.h
Looking for sys/videoio.h - not found
checking for module 'libavcodec'
  package 'libavcodec' not found
checking for module 'libavformat'
  package 'libavformat' not found
checking for module 'libavutil'
  package 'libavutil' not found
checking for module 'libswscale'
  package 'libswscale' not found
Looking for libavformat/avformat.h
Looking for libavformat/avformat.h - not found
Looking for ffmpeg/avformat.h
Looking for ffmpeg/avformat.h - not found
Found PythonInterp: /usr/bin/python2 (found suitable version ""2.7.8"", minimum required is ""2.0"") 
Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (Required is at least version ""2.7"")
Cannot probe for Python/Numpy support (because we are cross-compiling OpenCV)
If you want to enable Python/Numpy support, set the following variables:
  PYTHON_INCLUDE_PATH
  PYTHON_LIBRARIES
  PYTHON_NUMPY_INCLUDE_DIR
Could NOT find JNI (missing:  JAVA_AWT_LIBRARY JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) 
Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success

General configuration for OpenCV 2.4.11 =====================================
  Version control:               unknown

  Platform:
    Host:                        Linux 3.17.4-301.fc21.x86_64 x86_64
    Target:                      Linux
    CMake:                       3.0.2
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/gmake
    Configuration:               Release

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                /opt/FriendlyARM/toolschain/4.5.1/bin/arm-linux-g++  (ver 4.5.1)
    C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
    C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
    C Compiler:                  /opt/FriendlyARM/toolschain/4.5.1/bin/arm-linux-gcc
    C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
    C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
    Linker flags (Release):      
    Linker flags (Debug):        
    Precompiled headers:         YES

  OpenCV modules:
    To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib stitching superres ts videostab
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 androidcamera dynamicuda java python viz

  GUI: 
    QT:                          NO
    GTK+ 2.x:                    YES (ver 2.24.28)
    GThread :                    YES (ver 2.42.2)
    GtkGlExt:                    NO
    OpenGL support:              NO
    VTK support:                 NO

  Media I/O: 
    ZLib:                        zlib (ver 1.2.7)
    JPEG:                        libjpeg (ver 62)
    PNG:                         build (ver 1.5.12)
    TIFF:                        build (ver 42 - 4.0.2)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     build (ver 1.7.1)

  Video I/O:
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      NO
      codec:                     NO
      format:                    NO
      util:                      NO
      swscale:                   NO
      gentoo-style:              NO
    GStreamer:                   NO
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    UniCap:                      NO
    UniCap ucil:                 NO
    V4L/V4L2:                    YES/YES
    XIMEA:                       NO
    Xine:                        NO

  Other third-party libraries:
    Use IPP:                     NO
    Use Eigen:                   NO
    Use TBB:                     NO
    Use OpenMP:                  NO
    Use GCD                      NO
    Use Concurrency              NO
    Use C=:                      NO
    Use Cuda:                    NO
    Use OpenCL:                  YES

  OpenCL:
    Version:                     dynamic
    Include path:                /opt/opencv/3rdparty/include/opencl/1.2
    Use AMD FFT:                 NO
    Use AMD BLAS:                NO

  Python:
    Interpreter:                 /usr/bin/python2 (ver 2.7.8)

  Java:
    ant:                         NO
    JNI:                         NO
    Java tests:                  NO

  Documentation:
    Build Documentation:         NO
    Sphinx:                      NO
    PdfLaTeX compiler:           NO
    Doxygen:                     NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    C/C++ Examples:              NO

  Install path:                  /usr/local

  cvconfig.h is in:              /opt/relarm
-----------------------------------------------------------------

Configuring done
</code></pre>

<p>It shows many of the modules including gstreamer, dc1394 etc as not found. But i have installed them manually using sudo yum install commands.
Now that i run make command in Terminal it gave me the following error which shows that -lgtk-x11-2.0 cannot be found, though i have installed it with yum.</p>

<pre><code>Linking CXX shared library ../../lib/libopencv_highgui.so
/opt/FriendlyARM/toolschain/4.5.1/lib/gcc/arm-none-linux-gnueabi/4.5.1/../../../../arm-none-linux-gnueabi/bin/ld:
cannot find -lgtk-x11-2.0 collect2: ld returned 1 exit status
modules/highgui/CMakeFiles/opencv_highgui.dir/build.make:520: recipe
for target 'lib/libopencv_highgui.so.2.4.11' failed make[2]: ***
[lib/libopencv_highgui.so.2.4.11] Error 1 CMakeFiles/Makefile2:2025:
recipe for target 'modules/highgui/CMakeFiles/opencv_highgui.dir/all'
failed make[1]: ***
[modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
Makefile:147: recipe for target 'all' failed make: *** [all] Error 2
[root@osboxes relarm]#
</code></pre>

<p>Any help would be appreciated much.
Thanks in advance.</p>
",2015-06-14 00:14:38,2015-06-14 00:14:38,"Cannot find -lgtk-x11-2.0. Also, some modules are not found by cmake, though they are installed",<c++><opencv><cmake><arm><cmake-gui>,,,CC BY-SA 3.0,True,False,False,False,True
32484,30915004,2015-06-18 12:10:45,,"<p>I have a c# app.</p>

<p>At the moment I upload jpegs to my server to be rendered onto client browser to give the appearance of a video.</p>

<p>To save on bandwidth I am considering whether I can convert these jpegs to H264 video format and provide a constant stream to my server.</p>

<p>I have seen example (notably) on this forum that will do this using ffmpeg. </p>

<p>However, the examples show that the video is created and THEN can be uploaded to my server.</p>

<p>The only way I can see this working is to do continuous 'cut off''s of say 15 seconds worth of footage and upload to my server.</p>

<p>Is there a better way?</p>

<p>ADDITIONAL NOTES ABOUT MY APPLICATION</p>

<p>The main point of the application is to allow customers to view motion caught on their CCTV cameras - using IP cameras - via a web browser.
These images HAVE to be MPJEG format.</p>

<p>The other side of the application is that the customer also wants to see live streaming on the browser as well.</p>

<p>Normally, to do this with a high FPS rate and low bandwidth usage the H264 encoder is used.  But, H264 uses predictive encoding which cannot be used for motion 'stills'.</p>

<p>The live streaming I have at the moment is not bad.  But will never rival H264 either in FPS or/and bandwidth.</p>

<p>So, I wanted to see if I can have 2 streams going to my server. One would save motion 'stills' to the hard drive and the other will display the live feed.</p>

<p>To achieve this I would presume I would have to do this 'cut off' at time chosen by me - like 15 seconds.</p>

<p>The better option would be to never have a cut off but pipe the stream to my server.</p>

<p>FFMPEGServer seems to offer this but is not available for Windows OS.</p>

<p>I am unsure how to use FFMPEG to send a 'stream' to my server and then receive it on my server C# code.</p>
",2015-06-18 14:13:00,2015-06-18 14:13:00,Convert JPEGs to H264 and stream to my server,<c#><image-processing><h.264>,,,CC BY-SA 3.0,False,False,False,False,True
32523,30917407,2015-06-18 13:56:08,,"<p>It may be a previously asked related issue regarding  JavaCV on Android.My main objective is to apply grayscale/other image effect on video.</p>

<pre><code>File sourceFile = new File(Environment.getExternalStorageDirectory()
            + File.separator + ""test.mp4"");
    FFmpegFrameGrabber ffg = new FFmpegFrameGrabber(sourceFile);
    OpenCVFrameConverter.ToIplImage converter = new     OpenCVFrameConverter.ToIplImage();


    try {
        ffg.start();
        int count = 0;
        while (true) {
            Log.d(""JAVA_CV"", ""Counting . . . "" + count);

            Frame original_frame = ffg.grab();

            if (original_frame == null) {
                Log.d(""JAVA_CV"", ""original_frame is NULL at"" + count);
                break;
            } else {
                Log.d(""JAVA_CV"", ""original_frame is NOT_NULL at"" + count);
                opencv_core.IplImage frame1 = converter.convert(original_frame);
                opencv_core.IplImage frame2 = opencv_core.IplImage.create(original_frame.imageWidth, original_frame.imageHeight, opencv_core.IPL_DEPTH_8U, 1);


                opencv_imgproc.cvCvtColor(frame1, frame2, opencv_imgproc.COLOR_RGB2GRAY);

            }
            count++;
        }
    } catch (FrameGrabber.Exception fe) {
        fe.printStackTrace();
        System.out.println(fe.getMessage());
    } catch (Exception e) {
        e.printStackTrace();
        System.out.println(e.getMessage());
    }
}
</code></pre>

<p>The exception has occured at line </p>

<pre><code> opencv_imgproc.cvCvtColor(frame1, frame2, opencv_imgproc.COLOR_RGB2GRAY);
</code></pre>

<p>Exception Stack is showing :</p>

<pre><code> OpenCV Error: Assertion failed (scn == 3 || scn == 4) in void    cv::cvtColor(cv::InputArray, cv::OutputArray, int, int), file /home/saudet/projects/bytedeco/javacpp-presets/opencv/cppbuild/android-arm/opencv-2.4.11/modules/imgproc/src/color.cpp, line 3739
</code></pre>

<p>My research states that the issue is with channels and target color, as stated <a href=""https://stackoverflow.com/a/16801051/4840633"">here</a>.Please tell me the where can I get color-channel sheet ? or some other alternate solution.</p>
",2017-05-23 12:07:20,2015-06-18 14:03:43,JavaCV Error in Android,<android><opencv><ffmpeg><video-processing><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
32551,30990620,2015-06-22 22:04:32,,"<p>I wrote the following code to open a video file and the file is in the same directory as the script, moreover the code to write a video feed from the camera to the file is not working!</p>

<pre><code>import numpy as np
import cv2
cap = cv2.VideoCapture('F:/vtest.avi')
print cap.isOpened()
if(cap.isOpened()== False):
    cap.open('F://vtest.avi')
    print cap.isOpened()
while(cap.read()):
    ret,frame = cap.read()
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    cv2.imshow('frame',gray)
    if cv2.waitKey(1) == ord('q'):
        break
cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>But the code threw the following errors. I tried moving the ffmpeg.dll file in Python directory but to no avail.</p>

<pre><code>False
False
Traceback (most recent call last):
  File ""F:\2.py"", line 11, in &lt;module&gt;
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
error: ..\..\..\..\opencv\modules\imgproc\src\color.cpp:3480: error: (-215) scn == 3 || scn == 4 in function cv::cvtColor
</code></pre>
",2015-06-24 18:03:17,2015-06-24 18:03:17,Open CV 3.0.0 video not processing windows winpython 2.7.9,<python><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
32561,30951366,2015-06-20 07:18:42,,"<p>In JavaCV used in Android,while converting Frame to IplImage for applying color effect on video,we are NullPointerException.NPE is only encountered for some of the Frames in the Video.</p>

<pre><code>...
while (true) {
   Log.d(""JAVA_CV"", ""Counting . . . "" + count);
   Frame original_frame = ffg.grab();
    if (original_frame == null) {

                    Log.d(""JAVA_CV"", ""original_frame is NULL at"" + count);
                    break;
                } else {
                    Log.d(""JAVA_CV"", ""original_frame is NOT_NULL at"" + count);
                    if (converter == null) {
                        Log.d(""JAVA_CV"", ""converter is null at position"" +count);
                        continue;

                    }
                    opencv_core.IplImage frame1 = null;
                    if (original_frame != null) {
                        frame1 = converter.convertToIplImage(original_frame);
                    } else {
                        continue;
                    }

                    if (frame1 == null) {
                        Log.d(""JAVA_CV"", ""frame1 is NULL at"" + count);
                    } else {

                        if (!frame1.isNull() &amp;&amp; original_frame.image != null) {


                            int width = frame1.width();
                            int height = frame1.height();
                            int channel = frame1.nChannels();
                            opencv_core.IplImage frame2 = opencv_core.IplImage.create(width, height, opencv_core.IPL_DEPTH_8U, channel);
                            if (frame2 == null)
                                continue;
                            opencv_core.cvCopy(frame1, frame2);
                            opencv_core.IplImage frame3 = opencv_core.IplImage.create(width, height, opencv_core.IPL_DEPTH_8U, 1);
                            if (frame3 == null)
                                continue;
                            opencv_imgproc.cvCvtColor(frame2, frame3, opencv_imgproc.CV_BGRA2GRAY);

                            Log.d(""JAVA_CV"", ""frame1 is NOT_NULL at"" + count + "" Height "" + frame1.height());
                            Frame resultFrame = converter.convert(frame3);
                            if (resultFrame == null)
                                continue;
                            recorder.record(resultFrame);
                            frame1.release();
                            frame2.release();
                            frame3.release();
                            original_frame = null;
                        } else {
                            break;
                        }
                    }
                }
                count++;
            }
 ...
</code></pre>

<p>The Exception stack is here :</p>

<pre><code>06-20 12:00:57.664  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ java.lang.NullPointerException: This pointer address is NULL.
06-20 12:00:57.664  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at org.bytedeco.javacpp.opencv_core$IplImage.width(Native Method)
06-20 12:00:57.664  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at org.bytedeco.javacv.OpenCVFrameConverter.isEqual(OpenCVFrameConverter.java:75)
06-20 12:00:57.664  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at org.bytedeco.javacv.OpenCVFrameConverter.convertToIplImage(OpenCVFrameConverter.java:85)
06-20 12:00:57.664  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at org.bytedeco.javacv.OpenCVFrameConverter$ToIplImage.convert(OpenCVFrameConverter.java:41)
06-20 12:00:57.664  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at com.appxperts.opencvfirstapp.MainActivitySecond.kaamdg(MainActivitySecond.java:161)
06-20 12:00:57.664  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at com.appxperts.opencvfirstapp.MainActivitySecond$1.onClick(MainActivitySecond.java:62)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at android.view.View.performClick(View.java:4463)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at android.view.View$PerformClick.run(View.java:18789)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at android.os.Handler.handleCallback(Handler.java:808)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at android.os.Handler.dispatchMessage(Handler.java:103)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at android.os.Looper.loop(Looper.java:193)`enter code here`
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at android.app.ActivityThread.main(ActivityThread.java:5299)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at java.lang.reflect.Method.invokeNative(Native Method)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at java.lang.reflect.Method.invoke(Method.java:515)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:825)
06-20 12:00:57.665  30245-30245/com.appxperts.opencvfirstapp W/System.err﹕ at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:641)
</code></pre>
",,2015-06-20 07:18:42,JavaCV convertToIplImage return NULL,<android><opencv><ffmpeg><video-processing><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
32586,30971894,2015-06-22 03:50:20,,"<p><strong>Overview:</strong> </p>

<p>I am working on a video creation project. The technology I am using are: imageMagick, php, ffmpeg.</p>

<p><strong>Current Status:</strong></p>

<p>Currently the project is able to create videos using images and texts and few basic transitions. The way I am doing it is using imagemagick to create gif using input images(with transition effects in them) and then converting all gifs to videos and atlast concatenating the video together.</p>

<p><strong>Next Move (My question):</strong> </p>

<p>I am now set to take it to the next level. So, what I am having is a video(1920x1080) with some white frames(1280x720) that keeps shifting in each frame. I want to replace those white frames appearing in some frames of the video with some images(1280x720) that I wish to use. Please see the image here and you will get an idea: These are just two frames from my video. If you can see carefully the images are shifting(white space is not constant).</p>

<p><img src=""https://i.stack.imgur.com/wnays.jpg"" alt=""enter image description here""></p>

<p><img src=""https://i.stack.imgur.com/inNTC.jpg"" alt=""enter image description here""></p>

<p><strong>Expectation:</strong></p>

<p>So, I want to fill those white space with one of my own image. If the case would have been for only one frame I could have used ffmpeg to overlay image on the exact width and height. But here the white space is not fixed and keeps shifting in all the frames and there are a lot of frames. So, I am looking for something like opencv or some other technology that can be used for object detection in a video or in a set of frames and replace the detected area with some other image.</p>

<p>I just need a kick. So, if anyone has already worked on something like this just suggest me what technology can I use. Thanks in advance.</p>
",2015-06-29 14:59:25,2015-06-29 14:59:25,Replacing detected object in a frame with an image.(imageProcessing),<php><image><image-processing><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
32904,31124338,2015-06-29 19:50:07,,"<p>Once I run the following code I receive: 
warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:545)</p>

<pre><code>import cv2
import numpy as np
cap = cv2.VideoCapture('camera10.h264') #Captures h264 file from folder
while(cap.isOpened()):
    ret, frame = cap.read()

    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

    cv2.imshow('frame', gray)
    if cv2.waitKey(20) &amp; 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>The code was working about a week ago. It appears to be a ffmpeg issue. I have looked at the other ffmpeg issue on stackoverflow AND that did not help! Thank you.  </p>
",,2015-06-29 19:50:07,How to solve warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl.hpp:545),<python><opencv><ffmpeg><gstreamer>,,,CC BY-SA 3.0,True,False,False,False,True
33015,31165006,2015-07-01 15:02:25,,"<p>I have an application that streams video data to a RTMP server using javacv's FFmpegFrameRecorder. I want to add some audio to this stream from a separate file - a short sound clip that I want to play on repeat.</p>

<p>Given the sound clip is very short, I want to preload the audio data into memory and just loop over it - so I can avoid excessive IO etc.</p>

<p>I've attempted to add audio to the stream using javacv's FFmpegFrameGrabber, as prescribed on multiple tutorials.</p>

<p>The addition of audio works perfectly if I don't attempt to preload/cache any of the audio data, for example:</p>

<pre><code>private FFmpegFrameRecorder frameRecorder;
private FFmpegFrameGrabber frameGrabber;

...
//frameRecorder and frameGrabber setup during initialization
...

public void record(IplImage image) {
        try {
            frameRecorder.record(image);
            Frame frame = frameGrabber.grabFrame();
            if(frame == null) {
                frameGrabber = new FFmpegFrameGrabber(""audioFileHere.wav"");
                frameGrabber.start();
                frame = frameGrabber.grabFrame();
            }
            frameRecorder.record(frame);
        } catch (FrameRecorder.Exception e) {
            log.error(getMarker(FATAL), ""Can't record frame!"", e);
        } catch (FrameGrabber.Exception e) {
            log.error(getMarker(FATAL), ""Can't record frame!"", e);
        }
}
</code></pre>

<p>However, if I try to preload the audio data I get garbage sound being played:</p>

<pre><code>private FFmpegFrameRecorder frameRecorder;
private List&lt;FrameData&gt; audioData;

private static final class FrameData {
    public final Buffer[] samples;
    public final Integer sampleRate;
    public final Integer audioChannels;

    //Constructors, getters and setters here
}

...
    //frameRecorder setup during initialization
    audioData = new ArrayList&lt;&gt;();
    FFmpegFrameGrabber audioGrabber = new FFmpegFrameGrabber(""audioFileHere.wav"");
    try {
        audioGrabber.start();
        Frame frame;
        while ((frame = audioGrabber.grabFrame()) != null) {
            Buffer[] buffers = frame.samples;
            Buffer[] copiedBuffers = new Buffer[buffers.length];
            for (int i = 0; i &lt; buffers.length; i++) {
                copiedBuffers[i] = ((ShortBuffer) buffers[i]).duplicate();
            }
            FrameData frameData = new FrameData(copiedBuffers, frame.sampleRate, frame.audioChannels);
            audioData.add(frameData);
        }
    } catch (FrameGrabber.Exception e) {
        e.printStackTrace();
    }
...

private int frameCount = 0;

public void record(IplImage image) {
    frameCount++;
    try {
        FrameData frameData = audioData.get(frameCount % audioData.size());
        frameRecorder.record(image);
        frameRecorder.record(frameData.sampleRate, frameData.audioChannels, frameData.samples);
    } catch (FrameRecorder.Exception e) {
        log.error(getMarker(FATAL), ""Can't record frame!"", e);
    }
}
</code></pre>

<p>NOTE: I have to deep copy the Frame object because FFmpegFrameGrabber.grabFrame() recycles a single Frame object</p>

<p>Can someone explain why this doesn't work and/or how I could achieve the desired result?</p>
",,2015-07-01 15:13:54,JavaCV FFmpegFrameGrabber preload audio,<audio><ffmpeg><javacv><preload>,,,CC BY-SA 3.0,False,False,False,False,True
33099,27519056,2014-12-17 05:44:14,,"<p>I have YUV420P to RGB format conversion algorithm (given below), but this is giving
following warning while compiling.. Also showing memory leaks in valgrind..</p>

<p>warning: ‘SwsContext* sws_getContext(int, int, PixelFormat, int, int, PixelFormat, int, SwsFilter*, SwsFilter*, const double*)’ is deprecated (declared at /opt/ffmpeg.h264/include/libswscale/swscale.h:191) </p>

<pre><code>void YUV2RGB(const IplImage *yuvImg, IplImage *rgbImg) const
{
  //code
  struct SwsContext *img_convert_ctx = sws_getContext(w, h, PIX_FMT_YUV420P,
                                                       w, h, PIX_FMT_BGR24,
                                                       SWS_BICUBIC,NULL, NULL, NULL);
  //code


}
</code></pre>

<p>Can anybody tell how to correct the memory leak and remove the warning</p>
",2015-01-09 06:44:26,2015-01-09 06:44:26,Warning in converting YUV color format to RGB in FFmpeg,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
33199,31284232,2015-07-08 05:32:17,,"<p>I am trying to install OpenCV 2.4.11 on RHEL 6 (64 bit) machine. I have downloaded the tar file from github. I am getting following error -</p>

<pre><code>[ 76%] Built target opencv_test_java_properties
make[2]: *** No rule to make target `opencv_test_java_properties', needed by `modules/java/test/CMakeFiles/opencv_test_java'.  Stop.
make[1]: *** [modules/java/test/CMakeFiles/opencv_test_java.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>Please note that my cmake command executes successfully. FFMPEG and JAVA tests return 'YES'. But, when I try to use make command, it gives me above error message. I can see these folders created on path /opencv-2.4.11/release/modules/java/test/CMakeFiles/. Still it is not able to find it.</p>

<p>I get the same error message for installation of other opencv versions too. My cmake version is 2.6-patch 4.</p>

<p>Please help me to solve this error as I am not able to complete this since a long time.</p>
",,2015-07-08 05:32:17,"OpenCV 2.4.11 Installation Error - No rule to make target `opencv_test_java_properties', needed by `modules/java/test/CMakeFiles/opencv_test_java'",<java><opencv><installation>,,,CC BY-SA 3.0,True,False,False,False,True
33247,27530243,2014-12-17 16:28:48,,"<p>I have written a function to convert an image in YUV420P to RGB but it is taking 30 millisecond to convert an image (size: 1280 x 720) into RGB, but when I am using ffmpeg function ( <a href=""https://stackoverflow.com/questions/27519056/warning-in-converting-yuv-color-format-to-rgb-in-ffmpeg"">as this</a>) to convert YUV image into RGB its taking only 2 millisecond for the same image. What is the problem with my code ? How can I optimize the code that I have written ??
My code is given below</p>

<pre><code> int step = origImage-&gt;widthStep;
 uchar *data = (uchar *)origImage-&gt;imageData; 
 int size = origImage-&gt;width * origImage-&gt;height;
 IplImage* img1 = cvCreateImage(cvGetSize(origImage), IPL_DEPTH_8U, 3);

    for (int i = 0; i&lt;origImage-&gt;height; i++)
    {
      for (int j=0; j&lt;origImage-&gt;width; j++)
      {
        float Y = data[i*step + j];
        float U = data[ (int)(size + (i/2)*(step/2)  + j/2) ];
        float V = data[ (int)(size*1.25 + (i/2)*(step/2) + j/2)];

        float R = Y + 1.402 * (V - 128);
        float G = Y - 0.344 * (U - 128) - 0.714 * (V - 128);
        float B = Y + 1.772 * (U - 128);


        if (R &lt; 0){ R = 0; } if (G &lt; 0){ G = 0; } if (B &lt; 0){ B = 0; }
        if (R &gt; 255 ){ R = 255; } if (G &gt; 255) { G = 255; } if (B &gt; 255) { B = 255; }

        cvSet2D(img1, i, j,cvScalar(B,G,R));
      }
    }
</code></pre>
",2017-05-23 11:44:58,2016-02-01 14:00:23,How to optimize YUV to RGB color conversion code,<c++><opencv><optimization><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
33284,31238661,2015-07-06 06:02:24,,"<p>Im trying to use <code>OpenCV 2.4.8</code> for reading RTSP h.264 stream from IP-camera:</p>

<pre><code>#include &lt;opencv2/opencv.hpp&gt;
int main()
{
    cv::VideoCapture capture(""rtsp://admin:@192.168.1.168:80/ch0_0.264"");

    if(!capture.isOpened())
    {
        std::cout &lt;&lt; ""Error opening video stream"" &lt;&lt; std::endl;
        return -1;
    }

    cv::Mat frame;
    cv::namedWindow(""Frame"");

    int i = 0;
    while (true)
    {
        if(capture.read(frame))
        {
            std::cout &lt;&lt; ++i &lt;&lt; std::endl;
            cv::imshow(""Frame"", frame);
            if (cv::waitKey(1) &gt;= 0)
                break;
        }
        else
        {
            std::cout &lt;&lt; ""No frame"" &lt;&lt; std::endl;
        }
    }
}
</code></pre>

<p>First 670-700 frames (25-30 seconds of the stream) well captured, but further <code>capture.read(frame)</code> ALWAYS returns <code>false</code> (frames not grabbed). How to fix this problem?</p>
",,2016-01-11 22:17:27,RTSP stream failed in Opencv,<c++><opencv><ffmpeg><rtsp><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
33328,31366995,2015-07-12 10:54:36,,"<p>I am trying to compile opencv from source</p>

<pre><code>git clone https://github.com/berak/opencv.git
</code></pre>

<p>While performing 'make', I get following error. I found similar issue <a href=""https://github.com/airdcnano/airdcnano/issues/5"" rel=""nofollow"">here</a> but I don't understand what is going on and how to solve it</p>

<pre><code>error: conflicting types for '__sigsetjmp'
extern int __sigsetjmp (struct __jmp_buf_tag __env[1], int __savemask) __THROWNL;
       ^
/usr/include/pthread.h:754:12: note: previous declaration is here
extern int __sigsetjmp (struct __jmp_buf_tag *__env, int __savemask) __THROWNL;
       ^
1 error generated.
</code></pre>

<p>The output from cmake . is</p>

<pre><code>-- The CXX compiler identification is GNU 4.9.2
-- The C compiler identification is GNU 4.9.2
-- Check for working CXX compiler: /usr/bin/g++
-- Check for working CXX compiler: /usr/bin/g++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detected version of GNU GCC: 49 (409)
-- Performing Test HAVE_CXX_FSIGNED_CHAR
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Success
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Success
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Success
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Success
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR 
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_CXX_WERROR_ADDRESS
-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success
-- Performing Test HAVE_C_WERROR_ADDRESS
-- Performing Test HAVE_C_WERROR_ADDRESS - Success
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_CXX_WFORMAT
-- Performing Test HAVE_CXX_WFORMAT - Success
-- Performing Test HAVE_C_WFORMAT
-- Performing Test HAVE_C_WFORMAT - Success
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WMISSING_DECLARATIONS
-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
-- Performing Test HAVE_C_WMISSING_PROTOTYPES
-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WUNDEF
-- Performing Test HAVE_CXX_WUNDEF - Success
-- Performing Test HAVE_C_WUNDEF
-- Performing Test HAVE_C_WUNDEF - Success
-- Performing Test HAVE_CXX_WINIT_SELF
-- Performing Test HAVE_CXX_WINIT_SELF - Success
-- Performing Test HAVE_C_WINIT_SELF
-- Performing Test HAVE_C_WINIT_SELF - Success
-- Performing Test HAVE_CXX_WPOINTER_ARITH
-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success
-- Performing Test HAVE_C_WPOINTER_ARITH
-- Performing Test HAVE_C_WPOINTER_ARITH - Success
-- Performing Test HAVE_CXX_WSHADOW
-- Performing Test HAVE_CXX_WSHADOW - Success
-- Performing Test HAVE_C_WSHADOW
-- Performing Test HAVE_C_WSHADOW - Success
-- Performing Test HAVE_CXX_WSIGN_PROMO
-- Performing Test HAVE_CXX_WSIGN_PROMO - Success
-- Performing Test HAVE_C_WSIGN_PROMO
-- Performing Test HAVE_C_WSIGN_PROMO - Failed
-- Performing Test HAVE_CXX_WNO_NARROWING
-- Performing Test HAVE_CXX_WNO_NARROWING - Success
-- Performing Test HAVE_C_WNO_NARROWING
-- Performing Test HAVE_C_WNO_NARROWING - Success
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_CXX_WNO_LONG_LONG
-- Performing Test HAVE_CXX_WNO_LONG_LONG - Success
-- Performing Test HAVE_C_WNO_LONG_LONG
-- Performing Test HAVE_C_WNO_LONG_LONG - Success
-- Performing Test HAVE_CXX_PTHREAD
-- Performing Test HAVE_CXX_PTHREAD - Success
-- Performing Test HAVE_C_PTHREAD
-- Performing Test HAVE_C_PTHREAD - Success
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_CXX_MSSE
-- Performing Test HAVE_CXX_MSSE - Success
-- Performing Test HAVE_C_MSSE
-- Performing Test HAVE_C_MSSE - Success
-- Performing Test HAVE_CXX_MSSE2
-- Performing Test HAVE_CXX_MSSE2 - Success
-- Performing Test HAVE_C_MSSE2
-- Performing Test HAVE_C_MSSE2 - Success
-- Performing Test HAVE_CXX_MSSE3
-- Performing Test HAVE_CXX_MSSE3 - Success
-- Performing Test HAVE_C_MSSE3
-- Performing Test HAVE_C_MSSE3 - Success
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_C_FFUNCTION_SECTIONS
-- Performing Test HAVE_C_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN - Failed
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Found ZLIB: /usr/local/lib/libz.so (found suitable version ""1.2.8"",   minimum required is ""1.2.3"") 
-- Found TIFF: /usr/lib/x86_64-linux-gnu/libtiff.so (found version ""4.0.3"") 
-- Found JPEG: /usr/lib/x86_64-linux-gnu/libjpeg.so  
-- Found WebP: /usr/lib/x86_64-linux-gnu/libwebp.so  
-- Found Jasper: /usr/lib/x86_64-linux-gnu/libjasper.so (found version ""1.900.1"") 
-- Found ZLIB: /usr/local/lib/libz.so (found version ""1.2.8"") 
-- Found PNG: /usr/lib/x86_64-linux-gnu/libpng.so (found version ""1.2.50"") 
-- Looking for /usr/include/libpng/png.h
-- Looking for /usr/include/libpng/png.h - found
-- Found OpenEXR: /usr/lib/x86_64-linux-gnu/libIlmImf.so
-- checking for module 'gtk+-2.0'
--   found gtk+-2.0, version 2.24.23
-- checking for module 'gthread-2.0'
--   found gthread-2.0, version 2.42.2
-- checking for module 'gstreamer-base-0.10'
--   found gstreamer-base-0.10, version 0.10.36
-- checking for module 'gstreamer-video-0.10'
--   found gstreamer-video-0.10, version 0.10.36
-- checking for module 'gstreamer-app-0.10'
--   found gstreamer-app-0.10, version 0.10.36
-- checking for module 'gstreamer-riff-0.10'  
--   found gstreamer-riff-0.10, version 0.10.36
-- checking for module 'gstreamer-pbutils-0.10'
--   found gstreamer-pbutils-0.10, version 0.10.36
-- checking for module 'libdc1394-2'
--   found libdc1394-2, version 2.2.1
-- checking for module 'libv4l1'
--   found libv4l1, version 1.0.1
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   found libavcodec, version 54.35.0
-- checking for module 'libavformat'
--   found libavformat, version 54.20.4
-- checking for module 'libavutil'
--   found libavutil, version 52.3.0
-- checking for module 'libswscale'
--   found libswscale, version 2.1.1
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Found PythonInterp: /usr/bin/python2.7 (found suitable version ""2.7.6"", minimum required is ""2.7"") 
-- Found PythonLibs: /usr/lib/x86_64-linux-gnu/libpython2.7.so (found suitable exact version ""2.7.6"") 
-- Found JNI: /usr/lib/jvm/default-java/jre/lib/amd64/libjawt.so  
-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT  MATLAB_ARCH MATLAB_BIN) 
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_SHADOW
-- Performing Test HAVE_CXX_WNO_SHADOW - Success
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
-- Performing Test HAVE_CXX_WNO_MISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WNO_MISSING_PROTOTYPES - Failed
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
-- 
-- General configuration for OpenCV 3.0.0-dev  =====================================
--   Version control:               2.4.7-2265-g95006af
-- 
--   Platform:
--     Host:                        Linux 3.13.0-55-generic x86_64
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/g++  (ver 4.9.2)
--     C++ flags (Release):         -fsigned-char -W -Wall  -Werror=return-type -Werror=non-virtual-dtor -Werror=address  -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall   -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall  -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG -ggdb3
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml objdetect video ocl bioinspired cudaarithm nonfree contrib cudawarping cuda cudafilters cudaimgproc legacy cudabgsegm cudacodec cudafeatures2d cudaoptflow cudastereo optim photo softcascade python shape stitching superres ts videostab
--     Disabled:                    viz world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera cudalegacy cudev java matlab
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.24.23)
--     GThread :                    YES (ver 2.42.2)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/local/lib/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/x86_64-linux-gnu/libjpeg.so (ver )
--     WEBP:                        /usr/lib/x86_64-linux-gnu/libwebp.so (ver encoder: 0x0202)
--     PNG:                         /usr/lib/x86_64-linux-gnu/libpng.so (ver 1.2.50)
--     TIFF:                        /usr/lib/x86_64-linux-gnu/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/x86_64-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/x86_64-linux-gnu/libImath.so /usr/lib/x86_64-linux-gnu/libIlmImf.so /usr/lib/x86_64-linux-gnu/libIex.so /usr/lib/x86_64-linux-gnu/libHalf.so /usr/lib/x86_64-linux-gnu/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.35.0)
--       format:                    YES (ver 54.20.4)
--       util:                      YES (ver 52.3.0)
--       swscale:                   YES (ver 2.1.1)
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)
--       video:                     YES (ver 0.10.36)
--       app:                       YES (ver 0.10.36)
--       riff:                      YES (ver 0.10.36)
--       pbutils:                   YES (ver 0.10.36)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l (ver 1.0.1)
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   YES (ver 3.2.4)
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/r/Desktop/opecv/opencv/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.6)
--     Libraries:                   /usr/lib/x86_64-linux-gnu/libpython2.7.so (ver 2.7.6)
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.8.2)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Java:
--     ant:                         NO
--     JNI:                         /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include
--     Java tests:                  NO
-- 
--   Matlab:
--     mex:                         NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/bin/pdflatex
--     PlantUML:                    NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/r/Desktop/opecv/opencv
-- -----------------------------------------------------------------
-- 
CMake Warning at CMakeLists.txt:943 (message):
The source directory is the same as binary directory.  ""make clean"" may
damage the source tree


-- Configuring done
-- Generating done
-- Build files have been written to: /home/r/Desktop/opecv/opencv
</code></pre>
",,2015-12-02 21:19:43,Cannot compile opencv,<opencv><g++><clang>,,,CC BY-SA 3.0,True,True,False,False,True
33428,31387067,2015-07-13 15:10:46,,"<p>I'm trying to convert a <code>cv::Mat</code> to an <code>AVFrame</code> to encode it then in H.264 and wanted to start from a simple example, as I'm a newbie in both. So I first read in a JPEG file, and then do the pixel format conversion with <code>sws_scale()</code> from <code>AV_PIX_FMT_BGR24</code> to <code>AV_PIX_FMT_YUV420P</code> keeping the dimensions the same, and it all goes fine until I call <code>avcodec_encode_video2()</code>.</p>

<p>I read quite a few discussions regarding an <code>AVFrame</code> allocation and the question <a href=""https://stackoverflow.com/questions/16987749/segmetation-fault-while-avcodec-encode-video2"">Segmentation fault while avcodec_encode_video2</a> seemed like a match but I just can't see what I'm missing or getting wrong.</p>

<p>Here is the minimal code that you can reproduce the crash, it should be compiled with,</p>

<pre><code>g++ -o OpenCV2FFmpeg OpenCV2FFmpeg.cpp -lopencv_imgproc -lopencv_highgui -lopencv_core -lswscale -lavutil -lavcodec -lavformat
</code></pre>

<p>It's output on my system,</p>

<pre><code>cv::Mat [width=420, height=315, depth=0, channels=3, step=1260]
I'll soon crash..
Segmentation fault
</code></pre>

<p>And that <code>sample.jpg</code> file's details by <code>identify</code> tool,</p>

<pre><code>~temporary/sample.jpg JPEG 420x315 420x315+0+0 8-bit sRGB 38.3KB 0.000u 0:00.000
</code></pre>

<p>Please note that I'm trying to create a video out of a single image, just to keep things simple.</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;cassert&gt;
using namespace std;

extern ""C"" {
    #include &lt;libavcodec/avcodec.h&gt;
    #include &lt;libswscale/swscale.h&gt;
    #include &lt;libavformat/avformat.h&gt;
}

#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;

const string TEST_IMAGE = ""/home/baris/temporary/sample.jpg"";

int main(int /*argc*/, char** argv)
{
    av_register_all();
    avcodec_register_all();

    /**
     * Initialise the encoder
     */
    AVCodec *h264encoder = avcodec_find_encoder(AV_CODEC_ID_H264);
    AVFormatContext *cv2avFormatContext = avformat_alloc_context();

    /**
     * Create a stream and allocate frames
     */
    AVStream *h264outputstream = avformat_new_stream(cv2avFormatContext, h264encoder);
    avcodec_get_context_defaults3(h264outputstream-&gt;codec, h264encoder);
    AVFrame *sourceAvFrame = av_frame_alloc(), *destAvFrame = av_frame_alloc();
    int got_frame;

    /**
     * Pixel formats for the input and the output
     */
    AVPixelFormat sourcePixelFormat = AV_PIX_FMT_BGR24;
    AVPixelFormat destPixelFormat = AV_PIX_FMT_YUV420P;

    /**
     * Create cv::Mat
     */
    cv::Mat cvFrame = cv::imread(TEST_IMAGE, CV_LOAD_IMAGE_COLOR);
    int width = cvFrame.size().width, height = cvFrame.size().height;
    cerr &lt;&lt; ""cv::Mat [width="" &lt;&lt; width &lt;&lt; "", height="" &lt;&lt; height &lt;&lt; "", depth="" &lt;&lt; cvFrame.depth() &lt;&lt; "", channels="" &lt;&lt; cvFrame.channels() &lt;&lt; "", step="" &lt;&lt; cvFrame.step &lt;&lt; ""]"" &lt;&lt; endl;

    h264outputstream-&gt;codec-&gt;pix_fmt = destPixelFormat;
    h264outputstream-&gt;codec-&gt;width = cvFrame.cols;
    h264outputstream-&gt;codec-&gt;height = cvFrame.rows;

    /**
     * Prepare the conversion context
     */
    SwsContext *bgr2yuvcontext = sws_getContext(width, height,
                                                sourcePixelFormat,
                                                h264outputstream-&gt;codec-&gt;width, h264outputstream-&gt;codec-&gt;height,
                                                h264outputstream-&gt;codec-&gt;pix_fmt,
                                                SWS_BICUBIC, NULL, NULL, NULL);

    /**
     * Convert and encode frames
     */
    for (uint i=0; i &lt; 250; i++)
    {
        /**
         * Allocate source frame, i.e. input to sws_scale()
         */
        avpicture_alloc((AVPicture*)sourceAvFrame, sourcePixelFormat, width, height);

        for (int h = 0; h &lt; height; h++)
            memcpy(&amp;(sourceAvFrame-&gt;data[0][h*sourceAvFrame-&gt;linesize[0]]), &amp;(cvFrame.data[h*cvFrame.step]), width*3);

        /**
         * Allocate destination frame, i.e. output from sws_scale()
         */
        avpicture_alloc((AVPicture *)destAvFrame, destPixelFormat, width, height);

        sws_scale(bgr2yuvcontext, sourceAvFrame-&gt;data, sourceAvFrame-&gt;linesize,
                  0, height, destAvFrame-&gt;data, destAvFrame-&gt;linesize);

        /**
         * Prepare an AVPacket for encoded output
         */
        AVPacket avEncodedPacket;
        av_init_packet(&amp;avEncodedPacket);
        avEncodedPacket.data = NULL;
        avEncodedPacket.size = 0;
        // av_free_packet(&amp;avEncodedPacket); w/ or w/o result doesn't change

        cerr &lt;&lt; ""I'll soon crash.."" &lt;&lt; endl;
        if (avcodec_encode_video2(h264outputstream-&gt;codec, &amp;avEncodedPacket, destAvFrame, &amp;got_frame) &lt; 0)
            exit(1);

        cerr &lt;&lt; ""Checking if we have a frame"" &lt;&lt; endl;
        if (got_frame)
            av_write_frame(cv2avFormatContext, &amp;avEncodedPacket);

        av_free_packet(&amp;avEncodedPacket);
        av_frame_free(&amp;sourceAvFrame);
        av_frame_free(&amp;destAvFrame);
    }
}
</code></pre>

<p>Thanks in advance!</p>

<p><strong>EDIT:</strong> And the stack trace after the crash,</p>

<pre><code>Thread 2 (Thread 0x7fffe5506700 (LWP 10005)):
#0  0x00007ffff4bf6c5d in poll () at /lib64/libc.so.6
#1  0x00007fffe9073268 in  () at /usr/lib64/libusb-1.0.so.0
#2  0x00007ffff47010a4 in start_thread () at /lib64/libpthread.so.0
#3  0x00007ffff4bff08d in clone () at /lib64/libc.so.6

Thread 1 (Thread 0x7ffff7f869c0 (LWP 10001)):
#0  0x00007ffff5ecc7dc in avcodec_encode_video2 () at /usr/lib64/libavcodec.so.56
#1  0x00000000004019b6 in main(int, char**) (argv=0x7fffffffd3d8) at ../src/OpenCV2FFmpeg.cpp:99
</code></pre>

<p><strong>EDIT2:</strong> Problem was that I hadn't <code>avcodec_open2()</code> the codec as spotted by Ronald. Final version of the code is at <a href=""https://github.com/barisdemiray/opencv2ffmpeg/"" rel=""nofollow noreferrer"">https://github.com/barisdemiray/opencv2ffmpeg/</a>, with leaks and probably other problems hoping that I'll improve it while learning both libraries.</p>
",2017-05-23 10:24:19,2015-07-16 16:00:21,Segmentation fault with avcodec_encode_video2() while encoding H.264,<c++><c><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
33466,31375287,2015-07-13 04:09:33,,"<p>I can't seem to get OpenCV 3.0 to build properly with ffmpeg 2.7 or 2.4. Does anyone know which version works? I am running Mac OSX Yosemite. I seem to get linking errors when attempting to build opencv with ffmpeg support: </p>

<pre><code>Linking CXX shared library ../../lib/libopencv_videoio.dylib
Undefined symbols for architecture x86_64:
  ""_iconv"", referenced from:
      _avcodec_decode_subtitle2 in libavcodec.a(utils.o)
  ""_iconv_close"", referenced from:
      _avcodec_open2 in libavcodec.a(utils.o)
      _avcodec_decode_subtitle2 in libavcodec.a(utils.o)
  ""_iconv_open"", referenced from:
      _avcodec_open2 in libavcodec.a(utils.o)
      _avcodec_decode_subtitle2 in libavcodec.a(utils.o)
  ""_lzma_code"", referenced from:
      _decode_frame in libavcodec.a(tiff.o)
  ""_lzma_end"", referenced from:
      _decode_frame in libavcodec.a(tiff.o)
  ""_lzma_stream_decoder"", referenced from:
      _decode_frame in libavcodec.a(tiff.o)
  ""_swr_alloc"", referenced from:
      _opus_decode_init in libavcodec.a(opusdec.o)
  ""_swr_close"", referenced from:
      _opus_decode_packet in libavcodec.a(opusdec.o)
      _opus_decode_flush in libavcodec.a(opusdec.o)
  ""_swr_convert"", referenced from:
      _opus_decode_packet in libavcodec.a(opusdec.o)
  ""_swr_free"", referenced from:
      _opus_decode_close in libavcodec.a(opusdec.o)
  ""_swr_init"", referenced from:
      _opus_decode_packet in libavcodec.a(opusdec.o)
  ""_swr_is_initialized"", referenced from:
      _opus_decode_packet in libavcodec.a(opusdec.o)
  ""_x264_bit_depth"", referenced from:
      _X264_init_static in libavcodec.a(libx264.o)
      _X264_frame in libavcodec.a(libx264.o)
  ""_x264_encoder_close"", referenced from:
      _X264_close in libavcodec.a(libx264.o)
  ""_x264_encoder_delayed_frames"", referenced from:
      _X264_frame in libavcodec.a(libx264.o)
  ""_x264_encoder_encode"", referenced from:
      _X264_frame in libavcodec.a(libx264.o)
  ""_x264_encoder_headers"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_encoder_open_142"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_encoder_reconfig"", referenced from:
      _X264_frame in libavcodec.a(libx264.o)
  ""_x264_levels"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_param_apply_fastfirstpass"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_param_apply_profile"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_param_default"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_param_default_preset"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_param_parse"", referenced from:
      _X264_init in libavcodec.a(libx264.o)
  ""_x264_picture_init"", referenced from:
      _X264_frame in libavcodec.a(libx264.o)
  ""_xvid_encore"", referenced from:
      _xvid_encode_init in libavcodec.a(libxvid.o)
      _xvid_encode_frame in libavcodec.a(libxvid.o)
      _xvid_encode_close in libavcodec.a(libxvid.o)
  ""_xvid_global"", referenced from:
      _xvid_encode_init in libavcodec.a(libxvid.o)
  ""_xvid_plugin_2pass2"", referenced from:
      _xvid_encode_init in libavcodec.a(libxvid.o)
      _ff_xvid_rate_control_init in libavcodec.a(libxvid_rc.o)
      _ff_xvid_rate_estimate_qscale in libavcodec.a(libxvid_rc.o)
      _ff_xvid_rate_control_uninit in libavcodec.a(libxvid_rc.o)
  ""_xvid_plugin_lumimasking"", referenced from:
      _xvid_encode_init in libavcodec.a(libxvid.o)
  ""_xvid_plugin_single"", referenced from:
      _xvid_encode_init in libavcodec.a(libxvid.o)
  ""_xvid_plugin_ssim"", referenced from:
      _xvid_encode_init in libavcodec.a(libxvid.o)
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [lib/libopencv_videoio.3.0.0.dylib] Error 1
make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>Here are the flags which I compiled ffmpeg, maybe that could be the cause?: </p>

<p>./configure --prefix=~/Software/ffmpeg-2.4.10/ --enable-shared --enable-avresample --enable-libx264 --enable-libxvid --enable-opencl --enable-gpl</p>
",2015-07-13 04:15:56,2015-10-11 13:02:05,Opencv 3.0 with which Version of FFMPEG?,<c++><macos><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
33530,27550752,2014-12-18 16:01:06,,"<p>I am streaming from android camera to server using FFmpegFrameRecorder and I need to get current upload bitrate.
Is there an easy way to get it, or I should write my implementation?</p>
",,2014-12-19 10:12:02,JavaCV Getting current upload bitrate,<java><android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
33575,31413465,2015-07-14 17:31:02,,"<p>I need help understanding the relationship between AVBuffer and AVFrame. The reason I am getting into this confusion is that I am attempting to make queues of frames and I understand that it can be accomplished via ""Reference Counting"".</p>

<p><strong>This is what I understand:</strong><br>
- Setting refcounted_frame = 1 in AVCondecContext enables reference counting/passing via avcodec_framde_decode2().<br>
- Everytime avcodec_frame_decode2() is called, I get a new buffer in AVFrame->buf.</p>

<p><strong>What I am confused about:</strong><br>
- Is referenced frame basically 'previous' AVFrame->data??<br>
- If the above is true, how would I reference the counted frames? I suppose via AVFrame->buf[i]?</p>

<p>Any clarification is very much appreciated.</p>

<p>-T</p>
",,2015-07-14 19:34:36,"FFMpeg, AVFrame and AVBuffer",<opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
33643,31435661,2015-07-15 16:10:18,,"<p>I use ffmpeg to play video stream on SurfaceView of Android project. Now I would like to implement following feature.
1) Select one object by drawing a red rectangle on the SurfaceView.
2) Send x, y, width, height of the selected object and the original video frame to opencv.
3) Then, opencv return the new x and y of the object by processing the new video frame.</p>

<p>Anybody did it before? I will be very nice of you to give me some suggestion, or tell me very I can download the demo source code. Thank you so much.</p>
",,2015-07-15 17:43:50,opencv4android to do object tracking,<android><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
33710,31510535,2015-07-20 07:06:32,,"<p>I'm running a project using Qt+opencv+ffmpeg on Mac, but it comes to an error: symbol(s) not found for architecture x86_64.</p>

<hr>

<p>Part of .pro:</p>

<pre><code>INCLUDEPATH += /usr/local/include
INCLUDEPATH += /usr/local/include/opencv
INCLUDEPATH += /usr/local/include/opencv2

LIBS += -L/usr/local/lib -lavformat -lavcodec -lavutil
</code></pre>

<hr>

<p>When I use GCC (x86 64bit in /usr/bin) to compile, it shows </p>

<pre><code>error: symbol(s) not found for architecture x86_64
</code></pre>

<p>When I use Clang (x86 64bit in /usr/bin) to compile, it shows </p>

<pre><code>error: symbol(s) not found for architecture x86_64
error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre>

<hr>

<p>I'm using OS X Yosemite 10.10.4. Does anybody know how to fix it?</p>
",,2015-07-20 10:07:05,symbol(s) not found for architecture x86_64 on Mac when using Qt+opencv+ffmpeg,<macos><qt><opencv><gcc><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
33746,26447909,2014-10-19 06:20:16,,"<p>I have google a lot but not found any running example for creating video from images. 
I found that Ffmpeg can be used for creating video but because of lack of knowledge of <code>jni</code> I  could not understand how I can use <code>Ffmpeg</code> lib. Please suggest me how I can create video from Images. How I can use <code>Ffmpeg</code> for the same or any other running example. Thanks in advance.  </p>
",,2014-10-21 14:05:24,FFMpeg runnig example for creating video from images,<android><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
34107,31663498,2015-07-27 21:18:27,,"<p>I have been using OpenCV for a while. However I have recently changed my system to a cluster where I do not have any admin permission. The problem is like this :</p>

<p>In my home folder, I installed FFMPEG (latest stable version available on ffmpeg site). I installed it in $HOME, and so in $HOME/lib there are the library files installed. For more information I compiled FFMPEG with following options :</p>

<pre><code>./configure --prefix=$HOME --enable-shared --enable-pic
</code></pre>

<p>I then downloaded the latest stable version of OpenCV 3.0.0 and configured it using ccmake. When I try to <code>make -j8</code>, it gives me the following error.</p>

<pre><code> Scanning dependencies of target opencv_videoio
[ 63%] [ 63%] [ 63%] [ 63%] [ 63%] [ 63%] Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap.cpp.o
Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_mjpeg_decoder.cpp.o
Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_images.cpp.o
Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_v4l.cpp.o
Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_mjpeg_encoder.cpp.o
Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o
In file included from /home/uujjwal/libraries/opencv-nogpu/opencv-3.0.0/modules/videoio/src/cap_ffmpeg.cpp:45:0:
/home/uujjwal/libraries/opencv-nogpu/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp:1546:71: error: use of enum 'AVCodecID' without previous declaration
/home/uujjwal/libraries/opencv-nogpu/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp:1556:83: error: use of enum 'AVCodecID' without previous declaration
make[2]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o] Error 1
make[2]: *** Waiting for unfinished jobs....
</code></pre>

<p>However without ffmpeg support it works fine. However I need ffmpeg support due to the nature of my work.</p>

<p>In trying to resolve the problem, I tried installing OpenCV 2.4.11 but it also gave this error. The latest GIT version does not give me this error but rather an error a part of which goes like this</p>

<pre><code>Linking CXX shared library ../../lib/libopencv_highgui.so /usr/bin/ld: /home/matheus/ffmpeg_build/lib/../lib/libavcodec.a(avpacket.o): relocation R_X86_64_32 against `.rodata.str1.1' can not be used
</code></pre>

<p>I have pasted the above error from another unresolved question online and so the folder names are different but the relocation error is exactly the same.</p>

<p>In trying to resolve the problem I searched and found the following link <a href=""http://answers.opencv.org/question/12597/build-problems-for-opencv-241-with-ubuntu-1204-lts/"" rel=""nofollow"">http://answers.opencv.org/question/12597/build-problems-for-opencv-241-with-ubuntu-1204-lts/</a></p>

<p>However, one of the answers over there mentioned changing some lines in cap_ffmpeg_impl.hpp file. I tried doing that but either i am not able to do it correctly or something else is going wrong and it is not working. Exact line numbers and exact changes are not mentioned and so I am having difficulty changing things and being sure.</p>

<p>I am using Fedora 19 (Schrodinger Cat) as the operating system I hope the details of my question are clear and I hope that the community would oblige me with a good response.</p>

<p>Regards
Ujjwal</p>
",2016-03-24 12:20:15,2017-10-14 07:18:56,OpenCV 3.0.0 make error with FFMPEG,<c++><git><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
34108,31682683,2015-07-28 16:57:31,,"<p>I am getting this error when trying to call the <code>start()</code> method of an instance of <code>FFmpegFrameGrabber</code> :</p>

<pre><code>java.lang.UnsatisfiedLinkError: org.bytedeco.javacpp.avutil
    at java.lang.Class.classForName(Native Method)
    at java.lang.Class.forName(Class.java:309)
    at org.bytedeco.javacpp.Loader.load(Loader.java:390)
    at org.bytedeco.javacpp.Loader.load(Loader.java:358)
    at org.bytedeco.javacpp.avformat$AVFormatContext.&lt;clinit&gt;(avformat.java:2539)
    at org.bytedeco.javacv.FFmpegFrameGrabber.startUnsafe(FFmpegFrameGrabber.java:383)
    at org.bytedeco.javacv.FFmpegFrameGrabber.start(FFmpegFrameGrabber.java:377)
</code></pre>

<p>These are the dependencies I am referring to per the READMES for the projects <a href=""https://github.com/bytedeco/javacpp"" rel=""nofollow"">javacpp</a> and <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow"">javacv</a>:</p>

<pre><code>compile group: 'org.bytedeco', name: 'javacpp', version: '1.0'
compile group: 'org.bytedeco', name: 'javacv', version: '1.0'
</code></pre>

<p>I did not add any .so files to the project, but I was expecting those to come with the dependencies. When I tried adding them previously I started getting gradle errors for duplicate files so I assume that they come with the dependencies.</p>

<p>I think what is happening is that it can't load the .so files for whatever reason, but I don't know how to solve this problem. </p>

<p>I have tried setting the <code>systemProperty</code> for dependencies mentioned in the GitHub READMEs like so:</p>

<pre><code>task execute(type: JavaExec) {
    systemProperty ""platform.dependencies"", true
}
</code></pre>

<p>It doesn't help as written.</p>

<p><strong>Why is this error seen and what can be done to handle it?</strong></p>

<p>Any guidance on this issue would be greatly appreciated. The overall goal is to use the FFmpegFrameGrabber to crop video the user has taken with their device. I am open to all solutions.</p>
",,2015-07-28 16:57:31,UnsatisfiedLinkError using JavaCV maven dependency in Gradle on Android,<java><android><ffmpeg><javacv><javacpp>,,,CC BY-SA 3.0,False,False,False,False,True
34193,31764821,2015-08-01 18:22:37,,"<p>I have an audio file I want to split into multiple files.  The files are structured into pairs of sound separated by silence.  The timeline looks like this with - to represent silence:</p>

<p>-----Sound A1-----Sound A2-----Sound B1-----Sound B2-----</p>

<p>I want to find the boundary between Sound A2 and Sound B1.  I want a solution preferably using a combination of Python, OpenCV, and FFmpeg, but any tools that work will do.</p>
",2015-08-01 20:48:39,2015-08-02 00:12:02,Detect sound boundaries in an audio file,<python><opencv><audio>,,,CC BY-SA 3.0,True,False,False,False,True
34372,31832889,2015-08-05 12:42:50,,"<p>I have built opencv with cuda support using visual studio 2010 on win7 x64. To run a simple opencv cuda program I wrote this code and placed output released exe file to <code>opencv\built\install\x64\vc10\bin</code> near all lib and dll files.</p>

<p>But when I run the exe file it produce error <code>No CUDA support  (The library is compiled without CUDA support)</code></p>

<p>Here is my code:</p>

<pre><code>#include &lt;opencv2/opencv.hpp&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;chrono&gt;
#include &lt;ctime&gt;
#include &lt;opencv2/core/cuda.hpp&gt;

using namespace cv;
using namespace cv::cuda;
using namespace std;

string source_image_addr, gray_image_addr="""", source_image_name="""";

int convert2gray()
{
    Mat image;
    GpuMat d_image, d_gray_image;
    image = imread((char *)source_image_addr.c_str(), IMREAD_COLOR);

    if(image.empty())
    {
        cout&lt;&lt;""Could not open or find the image""&lt;&lt;std::endl;
        return -1;
    }

    CV_Assert(image.depth() != sizeof(unsigned char));
    std::chrono::time_point&lt;chrono::system_clock&gt; start, end;
    start = chrono::system_clock::now();
    d_image.upload(image);
    cuda::cvtColor(d_image, d_gray_image, CV_RGB2GRAY);
    Mat gray_image(d_gray_image);
    end = chrono::system_clock::now();
    chrono::duration&lt;double&gt; elapsed = end - start;
    cout&lt;&lt;""for image[""&lt;&lt;image.cols&lt;&lt;""*""&lt;&lt;image.rows&lt;&lt;""] elapsed = ""&lt;&lt;elapsed.count()&lt;&lt;endl;

    //namedWindow(""Gray Window"", WINDOW_AUTOSIZE);
    //imshow(""Gray Window"", gray_image);
    imwrite((char *)gray_image_addr.c_str(), gray_image);
}

int main(int argc, char** argv)
{
    if(argc &gt;= 2)
    {
        source_image_addr = argv[1];
        source_image_name = source_image_addr.substr(0, source_image_addr.find_last_of("".""));

        if(argc &gt;= 3)
            gray_image_addr = argv[2];
        else
            gray_image_addr = source_image_name + ""-gray.jpg"";

        if(!convert2gray())
            return -1;
    }
    else
    {
        cout&lt;&lt;""Usage: convert2gray ImageAddress [gray_image_addr]""&lt;&lt;endl;
        return -1;
    }

    //waitKey(0);
    return 0;
}
</code></pre>

<p>I have placed <code>opencv_world300.dll</code> in the same folder.</p>

<p><strong>Edit:</strong>
Here is outout for <code>std::cout &lt;&lt; cv::getBuildInformation() &lt;&lt; std::endl;</code>:</p>

<pre><code>  videoio: Removing WinRT API headers by default

General configuration for OpenCV 3.0.0 =====================================
  Version control:               3.0.0

  Platform:
    Host:                        Windows 6.1 AMD64
    CMake:                       2.8.11.2
    CMake generator:             Visual Studio 11 Win64
    CMake build tool:            C:/Windows/Microsoft.NET/Framework/v4.0.30319/MSBuild.exe
    MSVC:                        1700

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                C:/Program Files (x86)/Microsoft Visual Studio 11.0/VC/bin/x86_amd64/cl.exe  (ver 17.0.50727.1)
    C++ flags (Release):         /DWIN32 /D_WINDOWS /W4 /GR /EHa  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /wd4251 /wd4324 /MP8  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4 /GR /EHa  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi  /wd4251 /wd4324 /MP8  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 
    C Compiler:                  C:/Program Files (x86)/Microsoft Visual Studio 11.0/VC/bin/x86_amd64/cl.exe
    C flags (Release):           /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi    /MP8  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C flags (Debug):             /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /Oi    /MP8  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 
    Linker flags (Release):      /machine:x64   /INCREMENTAL:NO  /debug
    Linker flags (Debug):        /machine:x64   /debug /INCREMENTAL 
    Precompiled headers:         YES
    Extra dependencies:
    3rdparty dependencies:       ippicv

  OpenCV modules:
    To be built:                 hal core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab world
    Disabled:                    -
    Disabled by dependency:      -
    Unavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python2 viz

  Windows RT support:            NO

  GUI: 
    QT:                          NO
    Win32 UI:                    YES
    OpenGL support:              NO
    VTK support:                 NO

  Media I/O: 
    ZLib:                        build (ver 1.2.8)
    JPEG:                        build (ver 90)
    WEBP:                        build (ver 0.3.1)
    PNG:                         build (ver 1.5.12)
    TIFF:                        build (ver 42 - 4.0.2)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     build (ver 1.7.1)
    GDAL:                        NO

  Video I/O:
    Video for Windows:           YES
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      YES (prebuilt binaries)
      codec:                     YES (ver 55.18.102)
      format:                    YES (ver 55.12.100)
      util:                      YES (ver 52.38.100)
      swscale:                   YES (ver 2.3.100)
      resample:                  NO
      gentoo-style:              YES
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    OpenNI2:                     NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    DirectShow:                  YES
    Media Foundation:            NO
    XIMEA:                       NO
    Intel PerC:                  NO

  Other third-party libraries:
    Use IPP:                     8.2.1 [8.2.1]
         at:                     C:/buildslave64/win64_amdocl/master_PackSlave-win64-vc11-shared/opencv/3rdparty/ippicv/unpack/ippicv_win
    Use IPP Async:               NO
    Use Eigen:                   NO
    Use TBB:                     NO
    Use OpenMP:                  NO
    Use GCD                      NO
    Use Concurrency              YES
    Use C=:                      NO
    Use pthreads for parallel for:
                                 NO
    Use Cuda:                    NO
    Use OpenCL:                  YES

  OpenCL:
    Version:                     dynamic
    Include path:                C:/buildslave64/win64_amdocl/master_PackSlave-win64-vc11-shared/opencv/3rdparty/include/opencl/1.2 C:/Program Files (x86)/AMD/clAmdFft/include C:/Program Files (x86)/AMD/clAmdBlas/include
    Use AMDFFT:                  YES
    Use AMDBLAS:                 YES

  Python 2:
    Interpreter:                 c:/python27_x64/python.exe (ver 2.7.5)

  Python 3:
    Interpreter:                 NO

  Python (for build):            c:/python27_x64/python.exe

  Java:
    ant:                         C:/Program Files (x86)/apache-ant/bin/ant.bat (ver 1.9.2)
    JNI:                         C:/Program Files/Java/jdk1.6.0_45/include C:/Program Files/Java/jdk1.6.0_45/include/win32 C:/Program Files/Java/jdk1.6.0_45/include
    Java wrappers:               NO
    Java tests:                  NO

  Matlab:
    mex:                         NO

  Tests and samples:
    Tests:                       NO
    Performance tests:           NO
    C/C++ Examples:              NO

  Install path:                  C:/buildslave64/win64_amdocl/master_PackSlave-win64-vc11-shared/build/install

  cvconfig.h is in:              C:/buildslave64/win64_amdocl/master_PackSlave-win64-vc11-shared/build/opencv_build
-----------------------------------------------------------------


Could not open or find the image
</code></pre>
",2015-08-05 14:18:46,2015-08-05 14:18:46,Which opencv cuda library do I need to run a simple opencv cuda program?,<c++><visual-studio-2010><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
34418,31796054,2015-08-03 20:20:22,,"<p>I'm trying to build opencv3.0 from source with cuda 6.5 support in visual studio 2013 in 32 bit ! following <a href=""https://initialneil.wordpress.com/2014/09/25/opencv-2-4-9-cuda-6-5-visual-studio-2013/"" rel=""nofollow"">https://initialneil.wordpress.com/2014/09/25/opencv-2-4-9-cuda-6-5-visual-studio-2013/</a> . my GPU is Gefore 210 . I Know thats CUDA Compatible with compute capability 1.2. When i configure it with CMAKE it all goes fine! </p>

<p><strong>CMAKE OUTPUT!</strong> </p>

<pre><code>The system is: Windows - 6.1 - AMD64
Compiling the CXX compiler identification source file ""CMakeCXXCompilerId.cpp"" succeeded.
Compiler:  
Build flags: 
Id flags: 

The output was:
0
Microsoft (R) Build Engine version 12.0.31101.0
[Microsoft .NET Framework, version 4.0.30319.18408]
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 8/4/2015 12:59:49 AM.
Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\3.3.0\CompilerIdCXX\CompilerIdCXX.vcxproj"" on node 1 (default targets).
PrepareForBuild:
  Creating directory ""Debug\"".
  Creating directory ""Debug\CompilerIdCXX.tlog\"".
InitializeBuildStatus:
  Creating ""Debug\CompilerIdCXX.tlog\unsuccessfulbuild"" because ""AlwaysCreate"" was specified.
ClCompile:
  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\CL.exe /c /nologo /W0 /WX- /Od /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo""Debug\\"" /Fd""Debug\vc120.pdb"" /Gd /TP /errorReport:queue CMakeCXXCompilerId.cpp
  CMakeCXXCompilerId.cpp
Link:
  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\link.exe /ERRORREPORT:QUEUE /OUT:"".\CompilerIdCXX.exe"" /INCREMENTAL:NO /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /MANIFEST /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" /manifest:embed /PDB:"".\CompilerIdCXX.pdb"" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:"".\CompilerIdCXX.lib"" /MACHINE:X64 Debug\CMakeCXXCompilerId.obj
  CompilerIdCXX.vcxproj -&gt; D:\OpenCV\opencv\build_custom\CMakeFiles\3.3.0\CompilerIdCXX\.\CompilerIdCXX.exe
PostBuildEvent:
  for %%i in (cl.exe) do @echo CMAKE_CXX_COMPILER=%%~$PATH:i
  :VCEnd
  CMAKE_CXX_COMPILER=C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\cl.exe
FinalizeBuildStatus:
  Deleting file ""Debug\CompilerIdCXX.tlog\unsuccessfulbuild"".
  Touching ""Debug\CompilerIdCXX.tlog\CompilerIdCXX.lastbuildstate"".
Done Building Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\3.3.0\CompilerIdCXX\CompilerIdCXX.vcxproj"" (default targets).

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:01.95


Compilation of the CXX compiler identification source ""CMakeCXXCompilerId.cpp"" produced ""CompilerIdCXX.exe""

Compilation of the CXX compiler identification source ""CMakeCXXCompilerId.cpp"" produced ""CompilerIdCXX.vcxproj""

The CXX compiler identification is MSVC, found in ""D:/OpenCV/opencv/build_custom/CMakeFiles/3.3.0/CompilerIdCXX/CompilerIdCXX.exe""

Compiling the C compiler identification source file ""CMakeCCompilerId.c"" succeeded.
Compiler:  
Build flags: 
Id flags: 

The output was:
0
Microsoft (R) Build Engine version 12.0.31101.0
[Microsoft .NET Framework, version 4.0.30319.18408]
Copyright (C) Microsoft Corporation. All rights reserved.

Build started 8/4/2015 12:59:51 AM.
Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\3.3.0\CompilerIdC\CompilerIdC.vcxproj"" on node 1 (default targets).
PrepareForBuild:
  Creating directory ""Debug\"".
  Creating directory ""Debug\CompilerIdC.tlog\"".
InitializeBuildStatus:
  Creating ""Debug\CompilerIdC.tlog\unsuccessfulbuild"" because ""AlwaysCreate"" was specified.
ClCompile:
  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\CL.exe /c /nologo /W0 /WX- /Od /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo""Debug\\"" /Fd""Debug\vc120.pdb"" /Gd /TC /errorReport:queue CMakeCCompilerId.c
  CMakeCCompilerId.c
Link:
  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\link.exe /ERRORREPORT:QUEUE /OUT:"".\CompilerIdC.exe"" /INCREMENTAL:NO /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /MANIFEST /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" /manifest:embed /PDB:"".\CompilerIdC.pdb"" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:"".\CompilerIdC.lib"" /MACHINE:X64 Debug\CMakeCCompilerId.obj
  CompilerIdC.vcxproj -&gt; D:\OpenCV\opencv\build_custom\CMakeFiles\3.3.0\CompilerIdC\.\CompilerIdC.exe
PostBuildEvent:
  for %%i in (cl.exe) do @echo CMAKE_C_COMPILER=%%~$PATH:i
  :VCEnd
  CMAKE_C_COMPILER=C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\cl.exe
FinalizeBuildStatus:
  Deleting file ""Debug\CompilerIdC.tlog\unsuccessfulbuild"".
  Touching ""Debug\CompilerIdC.tlog\CompilerIdC.lastbuildstate"".
Done Building Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\3.3.0\CompilerIdC\CompilerIdC.vcxproj"" (default targets).

Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:00.63


Compilation of the C compiler identification source ""CMakeCCompilerId.c"" produced ""CompilerIdC.exe""

Compilation of the C compiler identification source ""CMakeCCompilerId.c"" produced ""CompilerIdC.vcxproj""

The C compiler identification is MSVC, found in ""D:/OpenCV/opencv/build_custom/CMakeFiles/3.3.0/CompilerIdC/CompilerIdC.exe""

Determining if the CXX compiler works passed with the following output:
Change Dir: D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp

Run Build Command:""C:/Program Files (x86)/MSBuild/12.0/bin/MSBuild.exe"" ""cmTC_19627.vcxproj"" ""/p:Configuration=Debug"" ""/p:VisualStudioVersion=12.0""
Microsoft (R) Build Engine version 12.0.31101.0

[Microsoft .NET Framework, version 4.0.30319.18408]

Copyright (C) Microsoft Corporation. All rights reserved.



Build started 8/4/2015 12:59:52 AM.

Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_19627.vcxproj"" on node 1 (default targets).

PrepareForBuild:

  Creating directory ""cmTC_19627.dir\Debug\"".

  Creating directory ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\"".

  Creating directory ""cmTC_19627.dir\Debug\cmTC_19627.tlog\"".

InitializeBuildStatus:

  Creating ""cmTC_19627.dir\Debug\cmTC_19627.tlog\unsuccessfulbuild"" because ""AlwaysCreate"" was specified.

ClCompile:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo""cmTC_19627.dir\Debug\\"" /Fd""cmTC_19627.dir\Debug\vc120.pdb"" /Gd /TP /errorReport:queue D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\testCXXCompiler.cxx

  Microsoft (R) C/C++ Optimizing Compiler Version 18.00.31101 for x64

  Copyright (C) Microsoft Corporation.  All rights reserved.



  cl /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo""cmTC_19627.dir\Debug\\"" /Fd""cmTC_19627.dir\Debug\vc120.pdb"" /Gd /TP /errorReport:queue D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\testCXXCompiler.cxx



  testCXXCompiler.cxx

Link:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\link.exe /ERRORREPORT:QUEUE /OUT:""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_19627.exe"" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" /manifest:embed /DEBUG /PDB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_19627.pdb"" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_19627.lib"" /MACHINE:X64  /machine:x64 /debug cmTC_19627.dir\Debug\testCXXCompiler.obj

  cmTC_19627.vcxproj -&gt; D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_19627.exe

FinalizeBuildStatus:

  Deleting file ""cmTC_19627.dir\Debug\cmTC_19627.tlog\unsuccessfulbuild"".

  Touching ""cmTC_19627.dir\Debug\cmTC_19627.tlog\cmTC_19627.lastbuildstate"".

Done Building Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_19627.vcxproj"" (default targets).



Build succeeded.

    0 Warning(s)

    0 Error(s)



Time Elapsed 00:00:00.90



Detecting CXX compiler ABI info compiled with the following output:
Change Dir: D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp

Run Build Command:""C:/Program Files (x86)/MSBuild/12.0/bin/MSBuild.exe"" ""cmTC_9f8c9.vcxproj"" ""/p:Configuration=Debug"" ""/p:VisualStudioVersion=12.0""
Microsoft (R) Build Engine version 12.0.31101.0

[Microsoft .NET Framework, version 4.0.30319.18408]

Copyright (C) Microsoft Corporation. All rights reserved.



Build started 8/4/2015 12:59:53 AM.

Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_9f8c9.vcxproj"" on node 1 (default targets).

PrepareForBuild:

  Creating directory ""cmTC_9f8c9.dir\Debug\"".

  Creating directory ""cmTC_9f8c9.dir\Debug\cmTC_9f8c9.tlog\"".

InitializeBuildStatus:

  Creating ""cmTC_9f8c9.dir\Debug\cmTC_9f8c9.tlog\unsuccessfulbuild"" because ""AlwaysCreate"" was specified.

ClCompile:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo""cmTC_9f8c9.dir\Debug\\"" /Fd""cmTC_9f8c9.dir\Debug\vc120.pdb"" /Gd /TP /errorReport:queue ""C:\Program Files (x86)\CMake\share\cmake-3.3\Modules\CMakeCXXCompilerABI.cpp""

  Microsoft (R) C/C++ Optimizing Compiler Version 18.00.31101 for x64

  Copyright (C) Microsoft Corporation.  All rights reserved.



  cl /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo""cmTC_9f8c9.dir\Debug\\"" /Fd""cmTC_9f8c9.dir\Debug\vc120.pdb"" /Gd /TP /errorReport:queue ""C:\Program Files (x86)\CMake\share\cmake-3.3\Modules\CMakeCXXCompilerABI.cpp""



  CMakeCXXCompilerABI.cpp

Link:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\link.exe /ERRORREPORT:QUEUE /OUT:""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_9f8c9.exe"" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" /manifest:embed /DEBUG /PDB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_9f8c9.pdb"" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_9f8c9.lib"" /MACHINE:X64  /machine:x64 /debug cmTC_9f8c9.dir\Debug\CMakeCXXCompilerABI.obj

  cmTC_9f8c9.vcxproj -&gt; D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_9f8c9.exe

FinalizeBuildStatus:

  Deleting file ""cmTC_9f8c9.dir\Debug\cmTC_9f8c9.tlog\unsuccessfulbuild"".

  Touching ""cmTC_9f8c9.dir\Debug\cmTC_9f8c9.tlog\cmTC_9f8c9.lastbuildstate"".

Done Building Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_9f8c9.vcxproj"" (default targets).



Build succeeded.

    0 Warning(s)

    0 Error(s)



Time Elapsed 00:00:00.85





Detecting CXX [] compiler features compiled with the following output:
Change Dir: D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp

Run Build Command:""C:/Program Files (x86)/MSBuild/12.0/bin/MSBuild.exe"" ""cmTC_72ba9.vcxproj"" ""/p:Configuration=Debug"" ""/p:VisualStudioVersion=12.0""
Microsoft (R) Build Engine version 12.0.31101.0

[Microsoft .NET Framework, version 4.0.30319.18408]

Copyright (C) Microsoft Corporation. All rights reserved.



Build started 8/4/2015 12:59:55 AM.

Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_72ba9.vcxproj"" on node 1 (default targets).

PrepareForBuild:

  Creating directory ""cmTC_72ba9.dir\Debug\"".

  Creating directory ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\"".

  Creating directory ""cmTC_72ba9.dir\Debug\cmTC_72ba9.tlog\"".

InitializeBuildStatus:

  Creating ""cmTC_72ba9.dir\Debug\cmTC_72ba9.tlog\unsuccessfulbuild"" because ""AlwaysCreate"" was specified.

ClCompile:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo""cmTC_72ba9.dir\Debug\\"" /Fd""cmTC_72ba9.dir\Debug\vc120.pdb"" /Gd /TP /errorReport:queue D:\OpenCV\opencv\build_custom\CMakeFiles\feature_tests.cxx

  Microsoft (R) C/C++ Optimizing Compiler Version 18.00.31101 for x64

  Copyright (C) Microsoft Corporation.  All rights reserved.



  cl /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /GR /Fo""cmTC_72ba9.dir\Debug\\"" /Fd""cmTC_72ba9.dir\Debug\vc120.pdb"" /Gd /TP /errorReport:queue D:\OpenCV\opencv\build_custom\CMakeFiles\feature_tests.cxx



  feature_tests.cxx

Link:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\link.exe /ERRORREPORT:QUEUE /OUT:""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_72ba9.exe"" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" /manifest:embed /DEBUG /PDB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_72ba9.pdb"" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_72ba9.lib"" /MACHINE:X64  /machine:x64 /debug cmTC_72ba9.dir\Debug\feature_tests.obj

  cmTC_72ba9.vcxproj -&gt; D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_72ba9.exe

FinalizeBuildStatus:

  Deleting file ""cmTC_72ba9.dir\Debug\cmTC_72ba9.tlog\unsuccessfulbuild"".

  Touching ""cmTC_72ba9.dir\Debug\cmTC_72ba9.tlog\cmTC_72ba9.lastbuildstate"".

Done Building Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_72ba9.vcxproj"" (default targets).



Build succeeded.

    0 Warning(s)

    0 Error(s)



Time Elapsed 00:00:00.86



    Feature record: CXX_FEATURE:1cxx_alias_templates
    Feature record: CXX_FEATURE:0cxx_alignas
    Feature record: CXX_FEATURE:0cxx_alignof
    Feature record: CXX_FEATURE:0cxx_attributes
    Feature record: CXX_FEATURE:0cxx_attribute_deprecated
    Feature record: CXX_FEATURE:1cxx_auto_type
    Feature record: CXX_FEATURE:0cxx_binary_literals
    Feature record: CXX_FEATURE:0cxx_constexpr
    Feature record: CXX_FEATURE:1cxx_contextual_conversions
    Feature record: CXX_FEATURE:1cxx_decltype
    Feature record: CXX_FEATURE:0cxx_decltype_auto
    Feature record: CXX_FEATURE:1cxx_default_function_template_args
    Feature record: CXX_FEATURE:1cxx_defaulted_functions
    Feature record: CXX_FEATURE:0cxx_defaulted_move_initializers
    Feature record: CXX_FEATURE:1cxx_delegating_constructors
    Feature record: CXX_FEATURE:0cxx_deleted_functions
    Feature record: CXX_FEATURE:0cxx_digit_separators
    Feature record: CXX_FEATURE:1cxx_enum_forward_declarations
    Feature record: CXX_FEATURE:1cxx_explicit_conversions
    Feature record: CXX_FEATURE:1cxx_extended_friend_declarations
    Feature record: CXX_FEATURE:1cxx_extern_templates
    Feature record: CXX_FEATURE:1cxx_final
    Feature record: CXX_FEATURE:0cxx_func_identifier
    Feature record: CXX_FEATURE:1cxx_generalized_initializers
    Feature record: CXX_FEATURE:0cxx_generic_lambdas
    Feature record: CXX_FEATURE:0cxx_inheriting_constructors
    Feature record: CXX_FEATURE:0cxx_inline_namespaces
    Feature record: CXX_FEATURE:1cxx_lambdas
    Feature record: CXX_FEATURE:0cxx_lambda_init_captures
    Feature record: CXX_FEATURE:1cxx_local_type_template_args
    Feature record: CXX_FEATURE:1cxx_long_long_type
    Feature record: CXX_FEATURE:0cxx_noexcept
    Feature record: CXX_FEATURE:0cxx_nonstatic_member_init
    Feature record: CXX_FEATURE:1cxx_nullptr
    Feature record: CXX_FEATURE:1cxx_override
    Feature record: CXX_FEATURE:1cxx_range_for
    Feature record: CXX_FEATURE:1cxx_raw_string_literals
    Feature record: CXX_FEATURE:0cxx_reference_qualified_functions
    Feature record: CXX_FEATURE:0cxx_return_type_deduction
    Feature record: CXX_FEATURE:1cxx_right_angle_brackets
    Feature record: CXX_FEATURE:1cxx_rvalue_references
    Feature record: CXX_FEATURE:0cxx_sizeof_member
    Feature record: CXX_FEATURE:1cxx_static_assert
    Feature record: CXX_FEATURE:1cxx_strong_enums
    Feature record: CXX_FEATURE:1cxx_template_template_parameters
    Feature record: CXX_FEATURE:0cxx_thread_local
    Feature record: CXX_FEATURE:1cxx_trailing_return_types
    Feature record: CXX_FEATURE:0cxx_unicode_literals
    Feature record: CXX_FEATURE:1cxx_uniform_initialization
    Feature record: CXX_FEATURE:0cxx_unrestricted_unions
    Feature record: CXX_FEATURE:0cxx_user_literals
    Feature record: CXX_FEATURE:1cxx_variadic_macros
    Feature record: CXX_FEATURE:1cxx_variadic_templates
Determining if the C compiler works passed with the following output:
Change Dir: D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp

Run Build Command:""C:/Program Files (x86)/MSBuild/12.0/bin/MSBuild.exe"" ""cmTC_58b75.vcxproj"" ""/p:Configuration=Debug"" ""/p:VisualStudioVersion=12.0""
Microsoft (R) Build Engine version 12.0.31101.0

[Microsoft .NET Framework, version 4.0.30319.18408]

Copyright (C) Microsoft Corporation. All rights reserved.



Build started 8/4/2015 12:59:56 AM.

Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_58b75.vcxproj"" on node 1 (default targets).

PrepareForBuild:

  Creating directory ""cmTC_58b75.dir\Debug\"".

  Creating directory ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\"".

  Creating directory ""cmTC_58b75.dir\Debug\cmTC_58b75.tlog\"".

InitializeBuildStatus:

  Creating ""cmTC_58b75.dir\Debug\cmTC_58b75.tlog\unsuccessfulbuild"" because ""AlwaysCreate"" was specified.

ClCompile:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\CL.exe /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo""cmTC_58b75.dir\Debug\\"" /Fd""cmTC_58b75.dir\Debug\vc120.pdb"" /Gd /TC /errorReport:queue D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\testCCompiler.c

  Microsoft (R) C/C++ Optimizing Compiler Version 18.00.31101 for x64

  Copyright (C) Microsoft Corporation.  All rights reserved.



  cl /c /Zi /W3 /WX- /Od /Ob0 /D WIN32 /D _WINDOWS /D _DEBUG /D ""CMAKE_INTDIR=\""Debug\"""" /D _MBCS /Gm- /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fo""cmTC_58b75.dir\Debug\\"" /Fd""cmTC_58b75.dir\Debug\vc120.pdb"" /Gd /TC /errorReport:queue D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\testCCompiler.c



  testCCompiler.c

Link:

  C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\bin\x86_amd64\link.exe /ERRORREPORT:QUEUE /OUT:""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_58b75.exe"" /INCREMENTAL /NOLOGO kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /MANIFESTUAC:""level='asInvoker' uiAccess='false'"" /manifest:embed /DEBUG /PDB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_58b75.pdb"" /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:""D:/OpenCV/opencv/build_custom/CMakeFiles/CMakeTmp/Debug/cmTC_58b75.lib"" /MACHINE:X64  /machine:x64 /debug cmTC_58b75.dir\Debug\testCCompiler.obj

  cmTC_58b75.vcxproj -&gt; D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\Debug\cmTC_58b75.exe

FinalizeBuildStatus:

  Deleting file ""cmTC_58b75.dir\Debug\cmTC_58b75.tlog\unsuccessfulbuild"".

  Touching ""cmTC_58b75.dir\Debug\cmTC_58b75.tlog\cmTC_58b75.lastbuildstate"".

Done Building Project ""D:\OpenCV\opencv\build_custom\CMakeFiles\CMakeTmp\cmTC_58b75.vcxproj"" (default targets).



Build succeeded.

    0 Warning(s)

    0 Error(s)



Time Elapsed 00:00:00.86
</code></pre>

<p>When i start building the generated Opencv.sln that gave me the following error. I started VS with Administrative Rights! Visual Studio Errors!</p>

<pre><code>Error 3791  error : cannot unlink temp file C:/Users/zed_home/AppData/Local/Temp/ccB#.a04008  D:\OpenCV\opencv\build_custom\modules\cudaarithm\CUSTOMBUILD  opencv_cudaarithm
Error 195 error : The system was unable to find the specified registry key or value.  D:\OpenCV\opencv\build_custom\modules\core\CUSTOMBUILD  opencv_core
Error 196 error : The system was unable to find the specified registry key or value.  D:\OpenCV\opencv\build_custom\modules\core\CUSTOMBUILD  opencv_core
Error 197 error LNK1104: cannot open file '..\..\lib\Debug\opencv_core300d.lib' D:\OpenCV\opencv\build_custom\modules\imgproc\LINK  opencv_imgproc
Error 198 error LNK1104: cannot open file '..\..\lib\Debug\opencv_core300d.lib' D:\OpenCV\opencv\build_custom\modules\flann\LINK  opencv_flann
Error 3795  error LNK1104: cannot open file '..\..\lib\Debug\opencv_core300d.lib' D:\OpenCV\opencv\build_custom\modules\ml\LINK opencv_ml
Error 3794  error LNK1104: cannot open file '..\..\lib\Debug\opencv_imgcodecs300d.lib'  D:\OpenCV\opencv\build_custom\modules\videoio\LINK  opencv_videoio
Error 3793  error LNK1104: cannot open file '..\..\lib\Debug\opencv_imgproc300d.lib'  D:\OpenCV\opencv\build_custom\modules\imgcodecs\LINK  opencv_imgcodecs
Error 3796  error LNK1104: cannot open file '..\..\lib\Debug\opencv_videoio300d.lib'  D:\OpenCV\opencv\build_custom\modules\highgui\LINK  opencv_highgui
Warning 14  warning : base class dllexport/dllimport specification differs from that of the derived class D:\OpenCV\opencv\sources\modules\core\include\opencv2\core.hpp  98  1 opencv_core
</code></pre>

<p><strong>CMAKE_OUT</strong></p>

<pre><code>  Version control:               unknown

  Platform:
    Host:                        Windows 6.1 AMD64
    CMake:                       3.3.0
    CMake generator:             Visual Studio 12 2013
    CMake build tool:            C:/Program Files (x86)/MSBuild/12.0/bin/MSBuild.exe
    MSVC:                        1800

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                C:/Program Files (x86)/Microsoft Visual Studio 12.0/VC/bin/cl.exe  (ver 18.0.31101.0)
    C++ flags (Release):         /DWIN32 /D_WINDOWS /W4 /GR /EHa  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /wd4324 /MP2  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4 /GR /EHa  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /wd4324 /MP2  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 
    C Compiler:                  C:/Program Files (x86)/Microsoft Visual Studio 12.0/VC/bin/cl.exe
    C flags (Release):           /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP2  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C flags (Debug):             /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP2  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 
    Linker flags (Release):      /machine:X86  /INCREMENTAL:NO  /debug
    Linker flags (Debug):        /machine:X86  /debug /INCREMENTAL 
    Precompiled headers:         YES
    Extra dependencies:          comctl32 gdi32 ole32 setupapi ws2_32 vfw32 cudart nppc nppi npps cufft
    3rdparty dependencies:       zlib libjpeg libwebp libpng libtiff libjasper IlmImf ippicv

  OpenCV modules:
    To be built:                 hal cudev core cudaarithm flann imgproc ml video cudabgsegm cudafilters cudaimgproc cudawarping imgcodecs photo shape videoio cudacodec highgui objdetect ts features2d calib3d cudafeatures2d cudalegacy cudaobjdetect cudaoptflow cudastereo stitching superres videostab python2
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 java python3 viz

  Windows RT support:            NO

  GUI: 
    QT:                          NO
    Win32 UI:                    YES
    OpenGL support:              NO
    VTK support:                 NO

  Media I/O: 
    ZLib:                        build (ver 1.2.8)
    JPEG:                        build (ver 90)
    WEBP:                        build (ver 0.3.1)
    PNG:                         build (ver 1.5.12)
    TIFF:                        build (ver 42 - 4.0.2)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     build (ver 1.7.1)
    GDAL:                        NO

  Video I/O:
    Video for Windows:           YES
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      YES (prebuilt binaries)
      codec:                     YES (ver 55.18.102)
      format:                    YES (ver 55.12.100)
      util:                      YES (ver 52.38.100)
      swscale:                   YES (ver 2.3.100)
      resample:                  NO
      gentoo-style:              YES
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    OpenNI2:                     NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    DirectShow:                  YES
    Media Foundation:            NO
    XIMEA:                       NO
    Intel PerC:                  NO

  Other third-party libraries:
    Use IPP:                     8.2.1 [8.2.1]
         at:                     D:/OpenCV/opencv/sources/3rdparty/ippicv/unpack/ippicv_win
    Use IPP Async:               NO
    Use Eigen:                   NO
    Use TBB:                     NO
    Use OpenMP:                  NO
    Use GCD                      NO
    Use Concurrency              YES
    Use C=:                      NO
    Use pthreads for parallel for:
                                 NO
    Use Cuda:                    YES (ver 6.5)
    Use OpenCL:                  YES

  NVIDIA CUDA
    Use CUFFT:                   YES
    Use CUBLAS:                  NO
    USE NVCUVID:                 NO
    NVIDIA GPU arch:             11 12 13 20 21 30 35
    NVIDIA PTX archs:            30
    Use fast math:               NO

  OpenCL:
    Version:                     dynamic
    Include path:                D:/OpenCV/opencv/sources/3rdparty/include/opencl/1.2
    Use AMDFFT:                  NO
    Use AMDBLAS:                 NO

  Python 2:
    Interpreter:                 C:/Python27/python.exe (ver 2.7.8)
    Libraries:                   C:/Python27/libs/python27.lib (ver 2.7.8)
    numpy:                       C:/Python27/lib/site-packages/numpy/core/include (ver 1.8.0)
    packages path:               C:/Python27/Lib/site-packages

  Python 3:
    Interpreter:                 NO

  Python (for build):            C:/Python27/python.exe

  Java:
    ant:                         NO
    JNI:                         C:/Program Files (x86)/Java/jdk1.8.0_25/include C:/Program Files (x86)/Java/jdk1.8.0_25/include/win32 C:/Program Files (x86)/Java/jdk1.8.0_25/include
    Java wrappers:               NO
    Java tests:                  NO

  Matlab:
    mex:                         NO

  Documentation:
    Doxygen:                     NO
    PlantUML:                    NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    C/C++ Examples:              NO

  Install path:                  D:/OpenCV/opencv/buildCs/install

  cvconfig.h is in:              D:/OpenCV/opencv/buildCs
-----------------------------------------------------------------

Configuring done
</code></pre>
",2015-08-04 15:46:30,2015-08-04 15:46:30,OpenCV 3.0 building from source Visual Studio 2013 Problems,<c++><opencv><visual-studio-2013>,,,CC BY-SA 3.0,True,True,False,False,True
34450,31915407,2015-08-10 08:57:26,,"<p>I am trying to compile OpenCV 3.0 on Fedora 22 with ffmpeg. I encounter the following error: </p>

<pre><code>[ 26%] Building CXX object
modules/core/CMakeFiles/opencv_perf_core.dir/perf/perf_bitwise.cpp.o
   Linking CXX executable /global/OpenCV/opencv_perf_core
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `swr_free'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `swr_init'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `swr_is_initialized'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `lzma_code'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `lzma_end'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `swr_close'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `swr_convert'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `swr_alloc'
   ../../lib/libopencv_videoio.so.3.0.0: undefined reference to `lzma_stream_decoder'
collect2: error: ld returned 1 exit status
modules/core/CMakeFiles/opencv_perf_core.dir/build.make:770: recipe for target '/global/OpenCV/opencv_perf_core' failed
   make[2]: *** [/global/OpenCV/opencv_perf_core] Error 1
   CMakeFiles/Makefile2:1245: recipe for target 'modules/core/CMakeFiles/opencv_perf_core.dir/all' failed
   make[1]: *** [modules/core/CMakeFiles/opencv_perf_core.dir/all] Error 2
   Makefile:136: recipe for target 'all' failed
   make: *** [all] Error 2
</code></pre>

<p>Any help would be highly appreciated !</p>
",2015-08-12 09:15:34,2015-08-12 09:15:34,OpenCV with ffmpeg on Fedora 22,<opencv><ffmpeg><fedora>,,,CC BY-SA 3.0,True,False,False,False,True
34501,31968190,2015-08-12 14:31:21,,"<p>FFMpeg 2.7.2 and all necessary <code>libav*</code> libraries are installed on my Ubuntu 14.04 machine. However, when I try to install OpenCV 2.4.11 (with FFMpeg enabled), I get the following error:</p>

<pre><code>/usr/bin/ld: cannot find -lavcodec
/usr/bin/ld: cannot find -lswresample
/usr/bin/ld: cannot find -lavutil
/usr/bin/ld: cannot find -lavformat
/usr/bin/ld: cannot find -lavcodec
/usr/bin/ld: cannot find -lswresample
/usr/bin/ld: cannot find -lavutil
/usr/bin/ld: cannot find -lavformat
collect2: error: ld returned 1 exit status
make[2]: *** [bin/opencv_annotation] Error 1
make[1]: *** [apps/annotation/CMakeFiles/opencv_annotation.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I already tried pointing <code>LD_LIBRARY_PATH</code> and <code>PKG_CONFIG_PATH</code> to the locations which contain the FFmpeg libraries. I also tried with OpenCV 3.0 and obtained the same error.</p>

<p>It seems that there is some kind of incompatibility between these versions of FFMpeg and OpenCV. Is there a workaround for this? </p>

<p><strong>EDIT:</strong>
For example <code>locate libavcodec.a</code> outputs:</p>

<pre><code>/home/guel/cvpr2014/bin/dependencies/ffmpeg-2.4/libavcodec/libavcodec.a
/home/guel/cvpr2014/bin/dependencies/lib/libavcodec.a
/home/guel/cvpr2014/bin/dependencies/opencv-2.4.9/3rdparty/lib/libavcodec.a
/home/guel/ffmpeg_build/lib/libavcodec.a
/home/guel/git/ffmpeg/libavcodec/libavcodec.a
/home/guel/mplayer/ffmpeg/libavcodec/libavcodec.a
/home/guel/projects/mpegflow/dependencies/opencv-2.4.11/3rdparty/lib/libavcodec.a
</code></pre>

<p>So, I have it in multiple places. Is that bad?</p>
",2015-08-12 15:04:12,2015-08-12 15:04:12,Linking to ffmpeg libraries fails while installing OpenCV,<opencv><ffmpeg><linker-errors>,,,CC BY-SA 3.0,True,False,False,False,True
34576,26515781,2014-10-22 19:42:20,,"<p>Source Code: <a href=""http://pastebin.com/LyBbNCm6"" rel=""nofollow noreferrer"">http://pastebin.com/LyBbNCm6</a></p>

<p>Example output from webcam:
<img src=""https://i.stack.imgur.com/RYeUj.png"" alt=""Example Output from Webcam""></p>

<p>First post on stackoverflow so hopefully I'm doing this right:</p>

<p>The question relates to C++/OpenCV.</p>

<p>Specifically: 
I'm trying to use opencv's randu() and bitwise_xor() to do the image equivalent of a ""one time pad"". I do understand that there are higher performance solutions to this problem which will not suffer the same image degradation &amp; frame rate problems. I've also considered the problems that could be encountered with lossy compression in video codecs.</p>

<p>Apologies for the code quality:</p>

<p>-This is proof of concept code, so I didn't do anything to make it object oriented/take opportunities to turn repetitive code in to functions(I apologize in advance for the impact on readability).</p>

<p>-I tried to accurately comment line by line and section by section what the intended purpose of various chunks of code were. Some code is there because attempts to simplify the code and utilize memory more efficiently were unsuccessful for unknown reasons.</p>

<p>-I suspect the color space conversion to HSV was unnecessary but I had this code left over from a GPU accelerated ""inRange()""-type implementation intended to segment the hue ""red"".</p>

<p>The end-goal is symmetric-key video encryption using uncompressed video of random noise as the shared key. It's a programming exercise I came up with for myself. </p>

<p>I've already played with AES(CBC) and was considering serializing the Mat for that purpose, but I really want to be able to view the encrypted images as video/image data(uncompressed). </p>

<p>An asymmetric key approach from an established code-base like ""OpenSSH"" would probably be a better decision from an encryption best-practices and key management perspective(but that is a different programming exercise than the one I'm practicing right now). As an example: I thought about piping an libav/ffmpeg stream through an SSH tunnel. Or various other options inside VPN, as well as looking at OpenSSL.</p>

<p>In terms of doing things weird:
Problem:
I don't actually mind the image artifacts which can be seen in the ""unxor"" window.</p>

<h1>Question</h1>

<p>My question is actually about ""xor"":
The ""xor"" output obviously has biases that indicate the bitwise_xor and the mat type images are not doing what I expect them to. </p>

<p>If I had to guess: I would say that the max intensity pixels are creating biases where a xor is not producing the desired effect? <strong>I'm not sure if there is a manipulation I can do using color depth or an operation on the mat type images to get the desired outcome</strong>(impractical-key-management-but-as-secure-as-the-prng-is-image-obfuscation).</p>

<p>If anyone with experience in OpenCV can give me some guidance on what options are available to me or point out what I am overlooking it would be appreciated.</p>

<p>Thanks in advance,</p>

<p>A. Breuer</p>

<h1>Source Code</h1>

<pre><code>#include &lt;cv.hpp&gt; //necessary because this code uses the OpenCV library
#include ""/usr/local/include/opencv2/highgui/highgui.hpp"" //necessary because this code uses the OpenCV library

using namespace cv;
using namespace std;

int main(int argc, char* argv[])
{
// /* for the purpose of exiting via keyboard input////////////////////////////////////////////////
bool loop = true;
Size size(320,240);//the dst image size,e.g.100x100
// /* for the purpose of exiting via keyboard input////////////////////////////////////////////////

// /* storage(memory allocation) for images and data///////////////////////////////////////////////
Mat image, random;
// */ storage for images and data//////////////////////////////////////////////////////////////////

// /* declaration of char to hold input from the keyboard buffer///////////////////////////////////
char KeyStroke;
// */ declaration of char to hold input from the keyboard buffer///////////////////////////////////

//prepare image source/////////////////////////////////////////////////////////////////////////////
VideoCapture cap;//assigning camera and proportions
cap.open(0);//starting webcam feed
//prepare image source/////////////////////////////////////////////////////////////////////////////

/* video input specific////////////////////////////////////////////////////////////////////////////
//cap.set(3, 320);
//cap.set(4, 240);
//cap.set(5,5);
//cap.set(CV_CAP_PROP_FRAME_WIDTH,320);
//cap.set(CV_CAP_PROP_FRAME_HEIGHT,240);
*/// video input specific//////////////////////////////////////////////////////////////////////////

namedWindow(""original"",1);//creating window for unmodified image
namedWindow(""random"",1);//creating window for ""random noise""
namedWindow(""xor"",1);//creating window for obfuscated output
namedWindow(""unxor"",1);//creating window for deobfuscated image



while(loop == true)
{

try
{

// /* //read ""image"" from webcam or video//////////////////////////////////////////////////////////
        cap&gt;&gt;image;
// */ //read ""image"" from webcam or video//////////////////////////////////////////////////////////

// /* //generate Mat full of random noise//////////////////////////////////////////////////////////
        random = Mat(240, 320, CV_8UC3);
        randu(random, Scalar::all(0), Scalar::all(255));
// */ //generate Mat full of random noise//////////////////////////////////////////////////////////

// /* //resize image///////////////////////////////////////////////////////////////////////////////
resize(image,image,size);//resize image
// */ //resize image///////////////////////////////////////////////////////////////////////////////

// /* //recycled code//////////////////////////////////////////////////////////////////////////////
KeyStroke = cvWaitKey(100); //get keyboard input

        if(KeyStroke==' '){
            break;
        }
// */ //recycled code//////////////////////////////////////////////////////////////////////////////

// /* //placeholder creation///////////////////////////////////////////////////////////////////////
Mat imageT, randomT, image2; //placeholders to preserve ""image"" and ""random"" in their original conditions for comparison
vector&lt;Mat&gt; channels; //bitwise_xor placeholder for ""imageT""
vector&lt;Mat&gt; channels2; //bitwise_xor placeholder for ""randomT""
vector&lt;Mat&gt; channels3; //bitwise_xor placeholder for ""image2""
// */ //placeholder creation///////////////////////////////////////////////////////////////////////

// /* //prepare the input Mat(s) for bitwise_xor processing////////////////////////////////////////
cvtColor(image, imageT, CV_BGR2HSV);//cvtColor conversion of ""image""(type: Mat) to HSV colorspace ""imageT""(type: Mat)
cvtColor(random, randomT, CV_BGR2HSV);//cvtColor conversion of ""random""(type: Mat) to HSV colorspace ""randomT""(type: Mat)
cvtColor(image, image2, CV_BGR2HSV);//cvtColor conversion of ""image""(type: Mat) to HSV colorspace ""image2""(type: Mat)
// */ //prepare the input Mat(s) for bitwise_xor processing////////////////////////////////////////

// /* //prepare the necessary vector&lt;mat&gt; for adding the ""random noise"" to the output//////////////
split(imageT, channels);
Mat HueI(channels[0]); //Create ""Hue"" channel
Mat SatI(channels[1]); //Create ""Sat"" channel
Mat VeeI(channels[2]); //Create ""Vee"" channel
// */ //prepare the necessary vector&lt;mat&gt; for adding the ""random noise"" to the output//////////////


// /* //prepare the necessary vector&lt;mat&gt; for adding the ""random noise"" to the output//////////////
split(randomT, channels2);
Mat HueR(channels2[0]); //Create ""Hue"" channel
Mat SatR(channels2[1]); //Create ""Sat"" channel
Mat VeeR(channels2[2]); //Create ""Vee"" channel
// */ //prepare the necessary vector&lt;mat&gt; for adding the ""random noise"" to the output//////////////


// /* //prepare the necessary vector&lt;mat&gt; for holding the output from xor//////////////////////////
split(image2, channels3);
Mat Hue2(channels3[0]); //Create ""Hue"" channel
Mat Sat2(channels3[1]); //Create ""Sat"" channel
Mat Vee2(channels3[2]); //Create ""Vee"" channel
// */ //prepare the necessary vector&lt;mat&gt; for holding the output from xor//////////////////////////

// /* //xor ""random noise"" with the input mat to obfuscate the image from its original appearance//
bitwise_xor(HueI, HueR, Hue2);//xor ""HueI""(type: Mat) from ""channels[0]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""imageT"" split() output] with ""HueR""(type: Mat)&lt;-from ""channels2[0]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""randomT"" split() output]
bitwise_xor(SatI, SatR, Sat2);//xor ""SatI""(type: Mat) from ""channels[0]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""imageT"" split() output] with ""SatR""(type: Mat)&lt;-from ""channels2[1]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""randomT"" split() output]
bitwise_xor(VeeI, VeeR, Vee2);//xor ""VeeI""(type: Mat) from ""channels[0]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""imageT"" split() output] with ""VeeR""(type: Mat)&lt;-from ""channels2[2]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""randomT"" split() output]
// */ //xor ""random noise"" with the input mat to obfuscate the image from its original appearance//

// /* //show the obfuscated output in window ""xor""/////////////////////////////////////////////////
merge(channels3, image2);
cvtColor(image2, image2, CV_HSV2BGR);//GPU namespace cvtColor conversion of ""oclImage""(type: Mat) to HSV colorspace ""oclSrc_hsv""(type: Mat)
imshow(""xor"",image2);//show the obfuscated output in window ""xor""
// */ //show the obfuscated output in window ""xor""/////////////////////////////////////////////////

// /* //prepare the obfuscated output for removal of the ""random noise""////////////////////////////
cvtColor(image2, image2, CV_BGR2HSV);//cvtColor conversion of ""image2""(type: Mat) to HSV colorspace ""image2""(type: Mat)
// */ //prepare the obfuscated output for removal of the ""random noise""////////////////////////////

// /* //prepare the necessary vector&lt;mat&gt; for removing the ""random noise"" from the output//////////
split(image2, channels3);

Mat Hue3(channels3[0]); //Create ""Hue"" channel
Mat Sat3(channels3[1]); //Create ""Sat"" channel
Mat Vee3(channels3[2]); //Create ""Vee"" channel
// */ //prepare the necessary vector&lt;mat&gt; for removing the ""random noise"" from the output//////////

// /* //xor same ""random noise"" with the output mat to return the image to its original appearance/
bitwise_xor(Hue3, HueR, Hue3);//xor ""Hue3""(type: Mat) from ""channels3[0]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""image2"" split() output] with ""HueR""(type: Mat)&lt;-from ""channels2[0]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""randomT"" split() output]

bitwise_xor(Sat3, SatR, Sat3);//xor ""Sat3""(type: Mat) from ""channels3[1]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""image2"" split() output] with ""SatR""(type: Mat)&lt;-from ""channels2[1]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""randomT"" split() output]

bitwise_xor(Vee3, VeeR, Vee3);//xor ""Vee3""(type: Mat) from ""channels3[2]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""image2"" split() output] with ""VeeR""(type: Mat)&lt;-from ""channels2[1]""(type: vector&lt;Mat&gt;)&lt;-[composed of ""randomT"" split() output]
// /* //xor same ""random noise"" with the output mat to return the image to its original appearance/

// /* //show the deobfuscated output in window ""unxor""/////////////////////////////////////////////
merge(channels3, image2); //recombine the 3x HSV Channels of ""channel3""(type: vector&lt;Mat&gt;) into ""image2""(type: Mat)
cvtColor(image2, image2, CV_HSV2BGR);//cvtColor conversion of ""image2""(type: Mat) to BGR colorspace ""image2""(type: Mat)
imshow(""unxor"",image2);//normal window show webcam or video
// */ //show the deobfuscated output in window ""unxor""/////////////////////////////////////////////

// /* //show the original input in window ""original"" and ""random noise"" in window ""random""/////////
cvtColor(imageT, image, CV_HSV2BGR);//cvtColor conversion of ""randomT""(type: Mat) to BGR colorspace ""random""(type: Mat)
cvtColor(randomT, random, CV_HSV2BGR);//cvtColor conversion of ""randomT""(type: Mat) to BGR colorspace ""random""(type: Mat)
imshow(""original"",image);//normal window show webcam or video
imshow(""random"",random);//normal window show webcam or video
// /* //show the original input in window ""original"" and ""random noise"" in window ""random""/////////
}

// /* //recycled code//////////////////////////////////////////////////////////////////////////////
catch (Exception&amp; e)//error checking
{
    const char* err_msg = e.what();
    std::cout &lt;&lt; ""exception caught: imshow:\n"" &lt;&lt; err_msg &lt;&lt; std::endl;
}

char key = waitKey(33) &amp; 0xFF;//checking for key press
if (key == 'q')//press q to quit
        {
                //cap.release();
                image.release();
                loop = false;
        }
// */ //recycled code///////////////////////////////////////////////////////////////////
}
return 0;
}
</code></pre>
",2014-10-23 08:14:13,2014-10-24 00:02:58,OpenCV Mat bitwise_xor with randu(),<c++><opencv><image-processing><encryption>,,,CC BY-SA 3.0,True,True,False,False,True
34681,31965035,2015-08-12 12:19:32,,"<p>How can I install OpenCV and FFMpeg to only one place in the filesystem and link all the other software, which need them, to those installations while compiling? </p>

<p>So far, I always had to build OpenCV and FFMpeg again to satisfy the dependencies of the software since I don't know how to link them externally. </p>

<p>For example, I want to make and install OpenCV only in my <code>/usr/local</code> directory and point other dependent software to this location. </p>
",,2015-08-12 12:19:32,Linking OpenCV and FFMpeg to other software,<opencv><ffmpeg><linker>,,,CC BY-SA 3.0,True,False,False,False,True
34719,32118455,2015-08-20 12:35:53,,"<p>I have been in loop for 5 days trying to implement JavaCV with FFmpegRecorder, Having figured out that i have to use OpenCvFrameConverter to conert IplImage to frame, I finally managed to see some video over the stream. but now the problem seems to be that the audio works perfect and clearly, but video is not displayed properly. </p>

<p><a href=""https://i.stack.imgur.com/QRKYx.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/QRKYx.png"" alt=""enter image description here""></a></p>

<p>Beside that there is a massive delay on the stream, well over 40sec, when i thought RTMP had 2-4sec delay,</p>

<p>Here is some code:</p>

<p><strong>FFmpegFrameRecorder Initialization</strong></p>

<pre><code>recorder = new FFmpegFrameRecorder(ffmpeg_link, screenWidth, screenHeight, 1);
    recorder.setFormat(""flv"");
    recorder.setSampleRate(44100);
    recorder.setAudioCodec(avcodec.AV_CODEC_ID_AAC);
    recorder.setVideoCodec(avcodec.AV_CODEC_ID_FLV1);// AV_CODEC_ID_FLV1
    recorder.setVideoOption(""preset"", ""ultrafast""); 
    recorder.setFrameRate(30);
</code></pre>

<p><strong>And here is my SurfaceChanged and PreviewFrame Methods</strong> </p>

<pre><code> public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

        Camera.Parameters camParams = mCamera.getParameters();
        List&lt;Camera.Size&gt; sizes = camParams.getSupportedPreviewSizes();         

        android.hardware.Camera.Size z = getOptimalPreviewSize(sizes, screenWidth, screenHeight);
        int imageWidth = z.width;
        int imageHeight = z.height;
        camParams.setPreviewSize(imageWidth, imageHeight);
        mCamera.setParameters(camParams);

        for(int[] arr : camParams.getSupportedPreviewFpsRange()){
            Log.e(LOG_TAG, ""Supported range: "" + arr[0] + "" - "" + arr[1]);
        }

        Camera.Parameters framerateAttempts = mCamera.getParameters();
        camParams.setPreviewFrameRate(frameRate);
        Log.v(LOG_TAG,""Preview Framerate: "" + camParams.getPreviewFrameRate());
        Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();

        if(display.getRotation() == Surface.ROTATION_0)
        {
            mCamera.setDisplayOrientation(90);
        }

        if(display.getRotation() == Surface.ROTATION_90)
        {
        }

        if(display.getRotation() == Surface.ROTATION_180)
        {
        }

        if(display.getRotation() == Surface.ROTATION_270)
        {
            mCamera.setDisplayOrientation(180);
        }
        camParams.setFocusMode(Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
        mCamera.setParameters(framerateAttempts);

        startPreview();
    }

 @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        /* get video data */
        if (yuvIplimage != null &amp;&amp; recording) {
            yuvIplimage.getByteBuffer().put(data);

            Log.v(LOG_TAG,""Writing Frame"");
            try {
                long t = 1000 * (System.currentTimeMillis() - startTime);
                if (t &gt; recorder.getTimestamp()) {
                    recorder.setTimestamp(t);
                }

                OpenCVFrameConverter.ToIplImage converterToMat = new OpenCVFrameConverter.ToIplImage();
                Frame f = converterToMat.convert(yuvIplimage);
                recorder.record(f);
            } catch (FFmpegFrameRecorder.Exception e) {
                Log.v(LOG_TAG,e.getMessage());
                e.printStackTrace();
            }
        }
    }
</code></pre>
",,2015-08-20 12:35:53,JavaCV FFMpegRecorder streams video not displayed properly,<android><opencv><ffmpeg><video-streaming><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
34727,31987560,2015-08-13 11:56:48,,"<p>I have next code:</p>

<pre><code>void matToAvPicture(cv::Mat frame, AVPicture *picture)
{
    cv::resize(frame, frame, cv::Size(m_streamWidth, m_streamHeight));
    uint8_t* buf = (uint8_t*)malloc(avpicture_get_size(AV_PIX_FMT_BGR24, m_streamWidth, m_streamHeight)); // 3 bytes per pixel
    for(int i = 0; i &lt; m_streamHeight; i++)
    {
        memcpy(&amp;(buf[i * m_streamWidth * 3]), &amp;(frame.data[i * frame.step]), m_streamWidth * 3);
    }
    AVPicture bgrPicture;
    avpicture_alloc(&amp;bgrPicture, AV_PIX_FMT_BGR24, m_streamWidth, m_streamHeight);
    avpicture_fill(&amp;bgrPicture, buf, AV_PIX_FMT_BGR24, m_streamWidth, m_streamHeight);
    sws_scale(rgbToYuvContext, (const uint8_t * const *)bgrPicture.data, bgrPicture.linesize, 0, m_streamHeight, picture-&gt;data, picture-&gt;linesize);
    avpicture_free(&amp;bgrPicture);
//    free(buf);
}
</code></pre>

<p>But call of <code>avpicture_free(&amp;bgrPicture)</code> doesn't free memory completely. If I commented line  <code>avpicture_fill(&amp;bgrPicture, buf, AV_PIX_FMT_BGR24, m_streamWidth, m_streamHeight);</code>  and uncommented line<br>
<code>free(buf)</code><br>
memory leak doesn't appear.
What is the problem?</p>
",,2015-08-13 12:32:03,OpenCV Mat to ffmpeg AVPicture conversion memory leak,<c++><opencv><memory-leaks><ffmpeg><opencv3.0>,,,CC BY-SA 3.0,True,True,False,False,True
34905,26553659,2014-10-24 18:01:51,,"<p>I am having trouble compiling some code after a OS upgrade (Ubuntu 12.04 to 14.04) and a re-install of opencv.</p>

<p>The general issue is with the ""nonfree"" parts of opencv which I compiled from source using the following procedure:</p>

<pre><code>mkdir ~/OpenCV &amp;&amp; cd ~/OpenCV
wget http://downloads.sourceforge.net/project/opencvlibrary/opencv-unix/2.4.10/opencv-2.4.10.zip
unzip opencv-2.4.10.zip
cd opencv-2.4.10
cmake -D WITH_CUDA=ON -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr .
make
sudo make install
</code></pre>

<p>This installs the nonfree libraries,as verified in the output of cmake:</p>

<pre><code>-- General configuration for OpenCV 2.4.10 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.13.0-37-generic x86_64
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.2)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib python stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda java viz
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.24.23)
--     GThread :                    YES (ver 2.40.0)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/x86_64-linux-gnu/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/x86_64-linux-gnu/libjpeg.so (ver )
--     PNG:                         /usr/lib/x86_64-linux-gnu/libpng.so (ver 1.2.50)
--     TIFF:                        /usr/lib/x86_64-linux-gnu/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/x86_64-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/x86_64-linux-gnu/libImath.so /usr/lib/x86_64-linux-gnu/libIlmImf.so /usr/lib/x86_64-linux-gnu/libIex.so /usr/lib/x86_64-linux-gnu/libHalf.so /usr/lib/x86_64-linux-gnu/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.35.0)
--       format:                    YES (ver 54.20.4)
--       util:                      YES (ver 52.3.0)
--       swscale:                   YES (ver 2.1.1)
--       gentoo-style:              YES
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/YES
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   YES (ver 3.2.0)
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/ian/Downloads/opencv-2.4.10/3rdparty/include/opencl/1.2
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python2 (ver 2.7.6)
--     Libraries:                   /usr/lib/x86_64-linux-gnu/libpython2.7.so (ver 2.7.6)
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.8.2)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java tests:                  NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           /usr/bin/pdflatex
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr
-- 
--   cvconfig.h is in:              /home/ian/Downloads/opencv-2.4.10
-- -----------------------------------------------------------------
-- 
</code></pre>

<p>However, when I try and compile the following code:</p>

<pre><code>#include &lt;opencv2/opencv.hpp&gt;
#include ""opencv2/highgui/highgui.hpp""
#include ""opencv2/imgproc/imgproc.hpp""
#include ""opencv2/nonfree/features2d.hpp""
#include &lt;opencv2/nonfree/nonfree.hpp&gt;
#include ""boost/filesystem.hpp""
#include &lt;iostream&gt;
#include &lt;stdio.h&gt;

using namespace cv;
using namespace std;
using namespace boost::filesystem;

void createDicitonary(Mat &amp; dictionary, string path_positive, string path_negative)
{
    string filename;      
    //to store the current input image
    Mat input;    

    //To store the keypoints that will be extracted by SIFT
    vector&lt;KeyPoint&gt; keypoints;
    //To store the SIFT descriptor of current image
    Mat descriptor;
    //To store all the descriptors that are extracted from all the images.
    Mat featuresUnclustered;
    //The SIFT feature extractor and descriptor
    SiftDescriptorExtractor detector(500);  

    for (directory_iterator itr(path_positive); itr!=directory_iterator(); ++itr)
    {
        filename = path_positive+itr-&gt;path().leaf().string();
        //open the file
        input = imread(filename, CV_LOAD_IMAGE_GRAYSCALE); //Load as grayscale      
        //detect feature points
        detector.detect(input, keypoints);
        //compute the descriptors for each keypoint
        detector.compute(input, keypoints,descriptor);        
        //put the all feature descriptors in a single Mat object 
        featuresUnclustered.push_back(descriptor);        
    }    

    for (directory_iterator itr(path_negative); itr!=directory_iterator(); ++itr)
    {
        filename = path_negative+itr-&gt;path().leaf().string();
        //open the file
        input = imread(filename, CV_LOAD_IMAGE_GRAYSCALE); //Load as grayscale         
        //detect feature points
        detector.detect(input, keypoints);
        //compute the descriptors for each keypoint
        detector.compute(input, keypoints,descriptor);        
        //put the all feature descriptors in a single Mat object 
        featuresUnclustered.push_back(descriptor);        
    }

    //Construct BOWKMeansTrainer
    //the number of bags
    int dictionarySize=10;
    //define Term Criteria
    TermCriteria tc(CV_TERMCRIT_EPS,100,0.001);
    //retries number
    int retries=1;
    //necessary flags
    int flags=KMEANS_PP_CENTERS;
    //Create the BoW (or BoF) trainer
    BOWKMeansTrainer bowTrainer(dictionarySize,tc,retries,flags);
    //cluster the feature vectors
    dictionary=bowTrainer.cluster(featuresUnclustered);
}

void labelSamples(string path,Mat &amp; train,Mat &amp; response,int label, Mat &amp; dictionary)
{
    Ptr&lt;DescriptorMatcher&gt; matcher = DescriptorMatcher::create(""FlannBased"");
    Ptr&lt;DescriptorExtractor&gt; extractor = new SiftDescriptorExtractor();
    BOWImgDescriptorExtractor dextract( extractor, matcher );
    SiftFeatureDetector detector(500);

    for (directory_iterator itr(path); itr!=directory_iterator(); ++itr)
    {
        string filename = path+itr-&gt;path().leaf().string();

        // set training data using BOWImgDescriptorExtractor
        dextract.setVocabulary( dictionary );
        std::vector&lt;KeyPoint&gt; keypoints;
        Mat img = imread( filename, CV_LOAD_IMAGE_GRAYSCALE );
        detector.detect( img, keypoints);
        Mat desc;
        dextract.compute( img, keypoints, desc );
        if ( !desc.empty() )
        {
            train.push_back( desc );            // update training data
            response.push_back( label );        // update response data
        }
    }
}

int main(int argc, char* argv[])
{

  cout &lt;&lt; ""Starting Training"" &lt;&lt; std::endl;

  if (argc != 3)
  {
    std::cout &lt;&lt; ""Error: please use the program as such: cartrainer path-to-positive-director path-to-negative-directory"" &lt;&lt; std::endl;
    return 1;
  }

  std::string pos(argv[1]);
  std::string neg(argv[2]);

  if (!is_directory(pos))
  {
    std::cout &lt;&lt; ""Error: "" &lt;&lt; pos &lt;&lt; ""not a directory"" &lt;&lt; std::endl;
    return 1;    
  }

  if (!is_directory(neg))
  {
    std::cout &lt;&lt; ""Error: "" &lt;&lt; neg &lt;&lt; ""not a directory"" &lt;&lt; std::endl;
    return 1;    
  }

  Mat dictionary;

  createDicitonary(dictionary,pos,neg);
  cout &lt;&lt; ""Created dictionary"" &lt;&lt; std::endl;

  Mat train,response;

  labelSamples(pos,train,response,1,dictionary);
  cout &lt;&lt; ""Labelled Positive Samples"" &lt;&lt; std::endl;

  labelSamples(neg,train,response,-1,dictionary);
  cout &lt;&lt; ""Labelled Negative Samples"" &lt;&lt; std::endl;

  // svm parameters
  CvTermCriteria criteria = cvTermCriteria(CV_TERMCRIT_EPS, 1000, FLT_EPSILON);
  CvSVMParams svm_param = CvSVMParams( CvSVM::EPS_SVR, CvSVM::LINEAR, 10.0, 8.0, 1.0, 10.0, 0.5, 0.0001, NULL, criteria);

  // train svm
  cv::SVM svm;
  svm.train(train, response,cv::Mat(),cv::Mat(),svm_param);
  svm.save(""svm-car-classifier.xml"");

  FileStorage fs(""training_data.yml"", FileStorage::WRITE);

  fs &lt;&lt; ""dictionary"" &lt;&lt; dictionary;
  fs &lt;&lt; ""train"" &lt;&lt; train;
  fs &lt;&lt; ""response"" &lt;&lt; response;
  fs.release();

  return 0;
}
</code></pre>

<p>with the following makefile:</p>

<pre><code>CC = g++
LINK = g++
INSTALL = install
CFLAGS = `pkg-config opencv --cflags` -I /usr/include/boost-1_46 -I.
LFLAGS = `pkg-config opencv --libs` -L /usr/lib -L /opt/ros/indigo/lib -lboost_system -lboost_filesystem -lopencv_features2d -lopencv_nonfree -lopencv_ocl
all: cartrainer

TrainClassifier.o: TrainClassifier.cpp
    $(CC) $(CFLAGS) -o $@ -c $^

cartrainer: TrainClassifier.o
    $(LINK) -o $@ $^ $(LFLAGS)

clean:
    rm -f cartrainer *.o

install:
    cp cartrainer ~/usr/bin/
</code></pre>

<p>In the following way:</p>

<pre><code>make
</code></pre>

<p>I get the following errors:</p>

<pre><code>/usr/lib/libopencv_nonfree.so: undefined reference to `cv::ocl::integral(cv::ocl::oclMat const&amp;, cv::ocl::oclMat&amp;)'
collect2: error: ld returned 1 exit status
make: *** [cartrainer] Error 1
</code></pre>

<p>I tried adding it to my ldconfig in the following way:</p>

<p>/etc/ld.so.conf.d/opencv.conf contains:</p>

<pre><code>/usr/include
/usr/lib
</code></pre>

<p>after which I ran:</p>

<pre><code>sudo ldconfig
</code></pre>

<p>This exact same error also occurs when I compile a similar package in ROS with the following CMakesList.txt:</p>

<pre><code>cmake_minimum_required(VERSION 2.8.3)
project(car_detector)

## Find catkin macros and libraries
## if COMPONENTS list like find_package(catkin REQUIRED COMPONENTS xyz)
## is used, also find other catkin packages
find_package(catkin REQUIRED COMPONENTS 
    roscpp 
    std_msgs
    message_generation
    camera_capture
    cv_bridge
    image_transport
    image_util
    lib_map_interface
)

find_package(OpenCV REQUIRED)

# Generate messages in the 'msg' folder
add_message_files(
    FILES
    CarDetection.msg
    CarDetections.msg
 )

generate_messages(DEPENDENCIES std_msgs geometry_msgs)

catkin_package(CATKIN_DEPENDS message_runtime std_msgs image_util lib_map_interface)

include_directories(${catkin_INCLUDE_DIRS}
    ${lib_map_interface_INCLUDE_DIRS})

add_executable(node_car_detector NodeCarDetector.cpp)
target_link_libraries(node_car_detector ${catkin_LIBRARIES} libimage_util)
add_dependencies(node_car_detector ${catkin_EXPORTED_TARGETS})

add_executable(node_car_classifier NodeCarClassifier.cpp)
target_link_libraries(node_car_classifier ${catkin_LIBRARIES} ${OpenCV_LIBS} libimage_util lib_map_interface)
add_dependencies(node_car_classifier ${catkin_EXPORTED_TARGETS})
</code></pre>

<p>I'm not sure what else to try so I'd really appreciate it if someone had any ideas</p>

<p>Thanks so much!</p>
",,2016-05-23 02:02:39,Linking opencv nonfree components (SIFT features and OCL specifically),<opencv><dynamic-linking><sift><ros><ocl>,,,CC BY-SA 3.0,True,True,False,False,True
34987,32296088,2015-08-30 11:31:56,,"<p>I've a problem with openCV 3 java wrapper.</p>

<p>When i use videocapture, camera.grab() always return false.
I see several subjects on internet about this problem. I succeeded to run opencv 2.4 but not with version 3. </p>

<p>My environnement : </p>

<ul>
<li>windows 10 (64b)</li>
<li>java 8u51 (32b)</li>
<li>eclipse mars (32b)</li>
</ul>

<p>So, I test these methods.
Env :</p>

<ul>
<li>Set windows path : D:\Programs\opencv3x\build\x86\vc12\bin</li>
<li>Add opencv_ffmpeg to  D:\Programs\opencv3x\build\x86\vc12\bin (in opencv 3, this lib is already in with the good name :  opencv_ffmpeg300.dll).</li>
</ul>

<p>Dev env :
In eclipse project :</p>

<ul>
<li>add opencv-300.jar</li>
<li>set the native lib to D:/Programs/opencv3x/build/java/x86</li>
</ul>

<p>With this configuration, I can use opencv 3 without problem...but i can't decode video file! </p>

<p>Does anyone have a solution on this? Thx.</p>
",2015-08-30 13:35:50,2015-09-25 07:09:56,opencv3 videoCapture (windows) doesn't work,<java><eclipse><windows><opencv><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
35080,32187607,2015-08-24 16:51:04,,"<p>Im trying to install openCV on a windows 8 machine. However, I keep on getting linker errors which result in many of the builds to fail. An excerp from the build log:</p>

<pre><code>    16&gt;------ Build started: Project: opencv_highgui, Configuration: Debug x64 ------
16&gt;  Building Custom Rule C:/opencv-2.4/modules/highgui/CMakeLists.txt
16&gt;  CMake does not need to re-run because C:\opencv3\modules\highgui\CMakeFiles\generate.stamp is up-to-date.
16&gt;  opencv_highgui_pch.cpp
16&gt;  cap.cpp
16&gt;  cap_images.cpp
16&gt;  loadsave.cpp
16&gt;  utils.cpp
16&gt;  window.cpp
16&gt;  window_w32.cpp
16&gt;  cap_cmu.cpp
16&gt;  cap_dshow.cpp
16&gt;  cap_vfw.cpp
16&gt;  cap_ffmpeg.cpp
16&gt;  grfmt_base.cpp
16&gt;  grfmt_bmp.cpp
16&gt;  grfmt_exr.cpp
16&gt;  grfmt_imageio.cpp
16&gt;  grfmt_jpeg.cpp
16&gt;  grfmt_jpeg2000.cpp
16&gt;  grfmt_png.cpp
16&gt;  grfmt_pxm.cpp
16&gt;  grfmt_sunras.cpp
16&gt;  grfmt_tiff.cpp
16&gt;  Generating Code...
16&gt;  Compiling...
16&gt;  bitstrm.cpp
16&gt;  Generating Code...
16&gt;LINK : fatal error LNK1104: cannot open file '..\..\lib\Debug\opencv_core2412d.lib'
</code></pre>

<p>Ive attempted to build opencv 3 by pulling the master branch from github and as well attempted to build opencv 2.4, both using once Visual Studios 2012 and Visual Studios 2013. All of these lead to the same results, i.e these .lib files are not getting found. I'm using the newest CMake, although I've tried also using an older CMake version. I'm installing in C:\opencv directory, as was advised in the tutorial. This is not the first time im installing this library, and I've never encountered this problem.</p>

<p>Can anybody see what I am doing wrong?</p>
",,2015-08-24 16:51:04,Trying to build openCV - Linker error,<c++><opencv><visual-studio-2012><visual-studio-2013><linker-errors>,,,CC BY-SA 3.0,True,False,False,False,True
35081,26569180,2014-10-26 02:16:32,,"<p>I am trying to compile OpenCV with ffmpeg support for ARM Platform on a x86 host.</p>

<p>I downloaded and compiled ffmpeg for arm platform (both static - FFMPEG_ARM_LIB and dynamic libs - FFMPEG_ARM_LIB_SO)</p>

<p>When I run cmake in opencv, it gives the following -</p>

<pre><code>--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      **NO**
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              YES
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/YES
--     XIMEA:                       NO
--     Xine:                        NO
</code></pre>

<p>I changed the following flags to point to the lib paths of both ffmpeg static and dynamic libs-</p>

<ol>
<li>LD_LIBRARY_PATH</li>
<li>C_INCLUDE_PATH</li>
<li>CPLUS_INCLUDE_PATH</li>
<li>PKG_CONFIG_PATH</li>
<li>PKG_CONFIG_LIBDIR</li>
<li>PATH</li>
<li>CMAKE_LIBRARY_PATH</li>
<li>CMAKE_INCLUDE_PATH</li>
</ol>

<p>However, the opencv is still not able to recognize the ffmpeg libs.</p>

<p>My FFMPEG compilation command was </p>

<pre><code>./configure --enable-shared --disable-static\
 --cross-prefix=arm-linux-gnueabi- --arch=armv7a\
 --target-os=linux --prefix=&lt;path&gt;
</code></pre>

<p>What am I doing wrong here?<br>
1. Am I compiling the ffmpeg with the wrong option?<br>
2. Am I missing some element in CMake which would make it point to the compiled ffmpeg lib for ARM on my system?</p>
",2014-10-27 20:05:06,2018-02-22 08:25:51,OpenCV Cmake unable to find ffmpeg lib,<linux><opencv><ffmpeg><cmake><arm>,,,CC BY-SA 3.0,True,False,False,False,True
35203,32235441,2015-08-26 19:47:19,,"<p>I hope someone can help me.</p>

<p>I started researching different compression methods to compress Bitmap-Images lossless and lossy. The first methods i used were JPEG, JPEG-2000 and JPEG-XR. Now i want to compare these ""standard"" ones with H.264 and H.265, maybe they perform as well as they do for video compression. </p>

<p>I tried using ffmpeg, but i can't find out which parameters i need, there are plenty... So maybe someone can help me or link me to an Article/Howto or something else?!</p>

<p>Thanks a lot!</p>

<p><strong>EDIT</strong>:</p>

<p>I used the following command: 
ffmpeg -i 01.bmp -c:v libx264 -preset veryslow -crf 40 test.avi</p>

<p>but this created an 7kb file from an 76,8 kb input file... not very good compression ratio... is there any possibility to achieve more?</p>
",2015-08-27 18:58:36,2015-09-03 06:07:28,H.264 / H.265 Compression of a single Bitmap-Image,<image-processing><ffmpeg><compression><h.264><h.265>,,,CC BY-SA 3.0,False,False,False,False,True
35348,26592577,2014-10-27 16:47:33,,"<p>I'm trying to install OpenCV in Ubuntu 14.10 according to <a href=""http://docs.opencv.org/doc/tutorials/introduction/linux_install/linux_install.html"" rel=""nofollow"">instruction</a>.
I installed all mentioned dependencies, but when I'm trying to run <code>make</code> I get such errors:</p>

<pre><code>/home/ilia/opencv-2.4.8/modules/highgui/src/ffmpeg_codecs.hpp:114:7: error: ‘CODEC_ID_H261’ was not declared in this scope
 { CODEC_ID_H261, MKTAG('H', '2', '6', '1') }
</code></pre>

<p>for all codecs, as I think.
And these errors:</p>

<pre><code>    In file included from /home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg.cpp:45:0:
/home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘double CvCapture_FFMPEG::getProperty(int)’:
/home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg_impl.hpp:773:33: error: ‘AVStream’ has no member named ‘r_frame_rate’
         return av_q2d(video_st-&gt;r_frame_rate);
                                 ^
/home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function ‘double CvCapture_FFMPEG::get_fps()’:
/home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg_impl.hpp:820:49: error: ‘AVStream’ has no member named ‘r_frame_rate’
     double fps = r2d(ic-&gt;streams[video_stream]-&gt;r_frame_rate);
                                                 ^
In file included from /home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg.cpp:45:0:
/home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg_impl.hpp: In function ‘int icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)’:
/home/ilia/opencv-2.4.8/modules/highgui/src/cap_ffmpeg_impl.hpp:1236:72: error: ‘avcodec_encode_video’ was not declared in this scope
         out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
                                                                        ^    
</code></pre>

<p>It looks like it can not find some header files, but I installed all necessary dev packages
libswscale-dev, libavdevice-dev, libavfilter-dev, libavformat-dev, libavcodec-dev. What should I do to resolve these problems?</p>
",2014-10-27 17:52:21,2016-11-30 09:13:29,Installing OpenCV in Ubuntu 14.10,<opencv><ubuntu><ubuntu-14.10>,,,CC BY-SA 3.0,True,False,False,False,True
35384,32580869,2015-09-15 08:07:08,,"<p>I want to write MP4 video files using openCV. However, judging by this <a href=""http://code.opencv.org/issues/1934"" rel=""nofollow"">issue</a>, it looks like that is not possible. Currently, I am writing the file as an avi and then a system call to ffmpeg for conversion to MP4. This is obviously slow. 
Is there some way I can speed this up? </p>

<p>One idea I had was to inject the frame I generate using openCV into ffmpeg directly. But to do that I will have to write them to file from openCV and read that file from ffmpeg, which is time consuming. Is there some way I can achieve this?   </p>
",,2015-09-15 08:15:14,Using OpenCV and ffmpeg to write MP4 files,<c++><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
35400,32422809,2015-09-06 11:01:03,,"<p>I am not able to <strong>record webcam video</strong> (i.e. <strong>Capture</strong> and <strong>Save</strong> .avi or .mp4 File) <strong>using JavaCV / OpenCV / FFMPEG</strong>, what am I doing wrong? </p>

<p><strong>Version used</strong>  (all 64-bit)</p>

<p><strong>Win 7 , NetBeans8.0.2 , jdk1.7.0_10 , JavaCV 1.0 , OpenCV 3.0.0 , ffmpeg-2.1.1-win64-shared .</strong></p>

<p><strong>My system variables are set to</strong></p>

<blockquote>
  <p><strong>C:\Program Files\Java\jdk1.7.0_10</strong>;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files (x86)\MySQL\MySQL Fabric 1.5.4 &amp; MySQL Utilities 1.5.4 1.5\;C:\Program Files (x86)\MySQL\MySQL Fabric 1.5.4 &amp; MySQL Utilities 1.5.4 1.5\Doctrine extensions for PHP\;<strong>C:\opencv\build\x64\vc11\bin;C:\ffmpeg\bin</strong></p>
</blockquote>

<p><strong>After downloading and setting path variables I added jar files to Netbeans project</strong></p>

<blockquote>
  <p>C:\opencv\build\java\opencv-300.jar
  C:\javacv-1.0-bin\javacv-bin\videoinput.jar
  C:\javacv-1.0-bin\javacv-bin\videoinput-windows-x86_64.jar
  C:\javacv-1.0-bin\javacv-bin\videoinput-windows-x86.jar
  C:\javacv-1.0-bin\javacv-bin\opencv.jar
  C:\javacv-1.0-bin\javacv-bin\opencv-windows-x86_64.jar
  C:\javacv-1.0-bin\javacv-bin\opencv-windows-x86.jar
  C:\javacv-1.0-bin\javacv-bin\libfreenect.jar
  C:\javacv-1.0-bin\javacv-bin\libfreenect-windows-x86_64.jar
  C:\javacv-1.0-bin\javacv-bin\libfreenect-windows-x86.jar
  C:\javacv-1.0-bin\javacv-bin\libdc1394.jar
  C:\javacv-1.0-bin\javacv-bin\junit.jar
  C:\javacv-1.0-bin\javacv-bin\javacv.jar
  C:\javacv-1.0-bin\javacv-bin\javacpp.jar
  C:\javacv-1.0-bin\javacv-bin\hamcrest-core.jar
  C:\javacv-1.0-bin\javacv-bin\flycapture.jar
  C:\javacv-1.0-bin\javacv-bin\flycapture-windows-x86_64.jar
  C:\javacv-1.0-bin\javacv-bin\flycapture-windows-x86.jar
  C:\javacv-1.0-bin\javacv-bin\flandmark.jar
  C:\javacv-1.0-bin\javacv-bin\flandmark-windows-x86_64.jar
  C:\javacv-1.0-bin\javacv-bin\flandmark-windows-x86.jar
  C:\javacv-1.0-bin\javacv-bin\ffmpeg.jar
  C:\javacv-1.0-bin\javacv-bin\ffmpeg-windows-x86_64.jar
  C:\javacv-1.0-bin\javacv-bin\ffmpeg-windows-x86.jar
  C:\javacv-1.0-bin\javacv-bin\artoolkitplus.jar
  C:\javacv-1.0-bin\javacv-bin\artoolkitplus-windows-x86_64.jar
  C:\javacv-1.0-bin\javacv-bin\artoolkitplus-windows-x86.jar</p>
</blockquote>

<p><strong>Problem 1:</strong><br>
First program to capture webcam video (display and save to output.avi file) is as given below.</p>

<p>It displays webcam and creates output.avi. But after terminating program when I open file output.avi in Media Player it doesn't display anything :) </p>

<p>It doesn't work </p>

<pre><code>import java.io.File;
import java.net.URL;
import org.bytedeco.javacv.*;
import org.bytedeco.javacpp.*;
import org.bytedeco.javacpp.indexer.*;
import static org.bytedeco.javacpp.opencv_core.*;
import static org.bytedeco.javacpp.opencv_imgproc.*;
import static org.bytedeco.javacpp.opencv_calib3d.*;
import static org.bytedeco.javacpp.opencv_objdetect.*;

public class JCVdemo3 {
    public static void main(String[] args) throws Exception {

        // Preload the opencv_objdetect module to work around a known bug.
        Loader.load(opencv_objdetect.class);

        // The available FrameGrabber classes include OpenCVFrameGrabber (opencv_videoio),
        // DC1394FrameGrabber, FlyCaptureFrameGrabber, OpenKinectFrameGrabber,
        // PS3EyeFrameGrabber, VideoInputFrameGrabber, and FFmpegFrameGrabber.
        FrameGrabber grabber = FrameGrabber.createDefault(0);
        grabber.start();

        // CanvasFrame, FrameGrabber, and FrameRecorder use Frame objects to communicate image data.
        // We need a FrameConverter to interface with other APIs (Android, Java 2D, or OpenCV).
        OpenCVFrameConverter.ToIplImage converter = new OpenCVFrameConverter.ToIplImage();


        IplImage grabbedImage = converter.convert(grabber.grab());
        int width  = grabbedImage.width();
        int height = grabbedImage.height();


        FrameRecorder recorder = FrameRecorder.createDefault(""output.avi"", width, height);
        recorder.start();


        CanvasFrame frame = new CanvasFrame(""Some Title"");

        while (frame.isVisible() &amp;&amp; (grabbedImage = converter.convert(grabber.grab())) != null) {
           // cvWarpPerspective(grabbedImage, rotatedImage, randomR);

            Frame rotatedFrame = converter.convert(grabbedImage);

            //opencv_core.IplImage grabbedImage = grabber.grab();
            frame.showImage(rotatedFrame);
            recorder.record(rotatedFrame);
        }
        frame.dispose();
        recorder.stop();
        grabber.stop();
    }
}
</code></pre>

<p><strong>Problem 2:</strong>  When I run following code</p>

<pre><code>opencv_core.IplImage grabbedImage = grabber.grab();  
</code></pre>

<p><strong>incompatible types: Frame cannot be converted to IplImage</strong>  message appears</p>

<pre><code>import java.io.File;
import java.net.URL;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.bytedeco.javacv.*;
import org.bytedeco.javacpp.*;
import org.bytedeco.javacpp.indexer.*;
import static org.bytedeco.javacpp.opencv_core.*;
import static org.bytedeco.javacpp.opencv_imgproc.*;
import static org.bytedeco.javacpp.opencv_calib3d.*;
import static org.bytedeco.javacpp.opencv_objdetect.*;

public class Demo {
    public static void main(String[] args) {  
     try {  
       OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);  
       grabber.start();  
       opencv_core.IplImage grabbedImage = grabber.grab();  
       CanvasFrame canvasFrame = new CanvasFrame(""Video with JavaCV"");  
       canvasFrame.setCanvasSize(grabbedImage.width(), grabbedImage.height());  
       grabber.setFrameRate(grabber.getFrameRate());  

       FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(""mytestvideo.mp4"", grabber.getImageWidth(), grabber.getImageHeight());
       recorder.setFormat(""mp4"");  
       recorder.setFrameRate(30);  
       recorder.setVideoBitrate(10 * 1024 * 1024);  


       recorder.start();  
       while (canvasFrame.isVisible() &amp;&amp; (grabbedImage = grabber.grab()) != null) {  
         canvasFrame.showImage(grabbedImage);  
         recorder.record(grabbedImage);  
       }  
       recorder.stop();  
       grabber.stop();  
       canvasFrame.dispose();  

     } catch (FrameGrabber.Exception ex) {  
       Logger.getLogger(JCVdemo.class.getName()).log(Level.SEVERE, null, ex);  
     } catch (FrameRecorder.Exception ex) {  
       Logger.getLogger(JCVdemo.class.getName()).log(Level.SEVERE, null, ex);  
     }  
   }
}  
</code></pre>

<p><strong>Question is:</strong> what am i doing wrong?</p>

<p>I am not able to record any sort of video; no matter what version of JavaCV/OPenCv I use.</p>

<p>Please tell me working example to record video from webcam and also the working JavaCV/OpenCV /FFmpeg compatible versions.</p>
",2015-12-04 11:45:37,2015-12-04 11:45:37,Java CV 1.0 Webcam video capture :Frame cannot be converted to IplImage,<swing><ffmpeg><webcam><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
35435,32427619,2015-09-06 19:48:03,,"<p>So I've been trying to run the command </p>

<pre><code>opencv_traincascade -data HandsData -vec hands.vec -bg HandsNeg.txt -numPos 3641 -numNeg 2578 -numStages 20 -w 27 -h 48 -mode ALL -minHitRate 0.999 -maxFalseAlarmRate 0.5 -precalcValBufSize 1024 -precalcIdxBufSize 1024
</code></pre>

<p>and I get the error </p>

<pre><code>===== TRAINING 0-stage =====
&lt;BEGIN
POS count : consumed   3641 : 3641
OpenCV Error: Assertion failed (_img.cols == winSize.width) in get, file /builddir/build/BUILD/OpenCV-2.0.0/apps/traincascade/imagestorage.cpp, line 86
terminate called after throwing an instance of 'cv::Exception'
Aborted
</code></pre>

<p>I've seen <a href=""https://stackoverflow.com/questions/10863560/haar-training-opencv-assertion-failed"">suggestions</a> around to change the positive image number, where I use 1043 instead and still get the same error. Then I also see <a href=""http://answers.opencv.org/question/10725/is-there-a-bug-in-the-traincascade-of-opencv-243/"" rel=""nofollow"">suggestions</a> of editing the source code. The problem is that I built OpenCV with yum and would like to not have to rebuild from source. </p>

<pre><code>sudo find / -name imagestorage.cpp
</code></pre>

<p>turns up nothing.</p>

<p>I'm at a complete loss of what to do.</p>

<p><strong>Additional info:</strong> Steps I took to get to this point</p>

<p>I created everything from some videos using ffmpeg. These were from a phone and VLC lists the info as </p>

<pre><code>Resolution: 1920x1090
Display resolution: 1920x1080
</code></pre>

<p>The ffmpeg command was (replacing input/output with respective videos and locations)</p>

<pre><code>steven ~/computer_vision $ ffmpeg -i videos/Not\ hands\ stuff.mp4 -y -r 40 -s 27x48 -f image2 NotHandsorFists/Negs-%4d.png
</code></pre>

<p>Files in Hands.txt are of the form</p>

<pre><code>steven ~/computer_vision $ cat Hands.txt | head -n 1
Hands/LeftHand-0001.png 1 0 0 27 48
</code></pre>

<p>I compiled the vec file with </p>

<pre><code>steven ~/computer_vision $ opencv_createsamples -info Hands.txt -num 3641 -w 27 -h 48 -vec hands.vec
</code></pre>

<p>The negative file is in the form </p>

<pre><code>steven ~/computer_vision $ cat HandsNeg.txt | head -n 1
Fists/LeftFist-0001.png
</code></pre>

<p>and the working directory is</p>

<pre><code>steven ~/computer_vision $ ls
Fists  fists.txt  Hands  HandsData  HandsNeg.txt  Hands.txt  hands.vec  NotHandsorFists  NotHandsorFists.txt  videos
</code></pre>

<p>Edit:
I've tried changing png to jpg and bmp to get rid of the channels. No help.</p>
",2015-09-17 01:24:05,2015-09-17 01:24:05,OpenCV Error: Assertion failed (_img.cols == winSize.width),<opencv><centos>,,,CC BY-SA 3.0,True,False,False,False,True
35462,26605069,2014-10-28 09:42:04,,"<p>I am working on a Windows 7 64 bit platform.</p>

<p><strong>Before:</strong>
I was using OpenCV 2.4.6, compiled by myself with CodeBlocks and a MinGW compiler. When recording a video, I was able to select the Cinepak Radius Codec (CVID) and all my world was shinny. I don't remember tweaking a lot the configuration of CMAKE when creating the CodeBlocks project to compile OpenCV.</p>

<p><strong>Now:</strong>
I download the last stable version OpenCV 2.4.10 and I have to use this one. So I applied the same recipe: CMAKE, CodeBlocks project, compile. But then I cannot choose the Cinepak Radius Coded while creating a new video.</p>

<p><strong>Questions:</strong>
Did the Codec disappears from OpenCV or did I miss one flag in the CMAKE configuration?</p>

<p>Of course I tried other config, but to me, I just had to activate WITH_FFMPEG and WITH_VFW flags. Do you have any tips on that?</p>

<p>Thanks !</p>
",,2014-10-28 12:37:43,openCV 2.4.10 lost cinepak radius codec,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
35594,32598237,2015-09-16 01:23:02,,"<p>I have an error when I try to start the webcam:
System.TypeInitializationException</p>

<p>When try to:</p>

<pre><code>Dim capWebcam As Capture


 Try
            capWebcam = New Capture()   &lt;&lt;&lt;&lt;&lt;&lt;&lt;here
        Catch ex As Exception
            Me.Text = ex.Message
            Return
        End Try
</code></pre>

<p>I have this DLL added to the project:</p>

<pre><code>opencv -
calib3d240
contrib240
core240
features2d240
ffmpeg240_64
flann240
gpu240
highgui240
imgproc240
legacy240
ml240
nonfree240
objdetect240
photo240
stitching240
videostab240

 And ENGU:
 CV.Stitching
 CV.UI
 CV.GPU
 CV.DebuggerVIsualizers.VS2010
 CV.ML
 CV.OCR
 Util
 CV
</code></pre>

<p>I tried one hundred possibilities and nothing :(</p>

<p>The project has a form that the person can choose an image file or a webcam, choosing colors RGB options and will detect circles, lines and polys.
It is a Big code, but is here (EDIT -> I try to make the code smaller so I delete the code that have no changes in the webcam, if appear some IF that is not closed, maybe is because I edited it):</p>

<pre><code>Option Strict On

Imports Emgu.CV
Imports Emgu.CV.CvEnum
Imports Emgu.CV.Structure
Imports Emgu.CV.UI


Public Class frmForm

'Variaveis

Dim capWebcam As Capture
Dim blnWebcamCapturingInProcess As Boolean = False


'Construtor 
Sub New()
    InitializeComponent()        ' Metodo necessario para instanciar o Design

    intOrigFormWidth = Me.Width
    intOrigFormHeight = Me.Height
    intOrigTableLayoutPanelWidth = tlpLabelsAndImageBoxes.Width
    intOrigTableLayoutPanelHeight = tlpLabelsAndImageBoxes.Height


End Sub


' Metodos dos componentes _____

Private Sub frmForm_Load(sender As Object, e As EventArgs) Handles MyBase.Load, MyBase.Resize


End Sub

Private Sub frmForm_Resize(sender As System.Object, e As System.EventArgs) Handles MyBase.Resize
    'This If Else statement is necessary to throw out the first time the Form1_Resize event is called.
    'For some reason, in VB.NET the Resize event is called once before the constructor, then the constructor is called,
    'then the Resize event is called each time the form is resized.  The first time the Resize event is called
    '(i.e. before the constructor is called) the coordinates of the components on the form all read zero,
    'therefore we have to throw out this first call, then the constructor will run and get the correct initial
    'component location data, then every time after that we can let the Resize event run as expected
    If (blnFirstTimeInResizeEvent = True) Then
        blnFirstTimeInResizeEvent = False
    Else
        tlpLabelsAndImageBoxes.Width = Me.Width - (intOrigFormWidth - intOrigTableLayoutPanelWidth)
        tlpLabelsAndImageBoxes.Height = Me.Height - (intOrigFormHeight - intOrigTableLayoutPanelHeight)
    End If
End Sub


Private Sub rdoImageFile_CheckedChanged(sender As Object, e As EventArgs) Handles rdoImageFile.CheckedChanged
    If (rdoImageFile.Checked = True) Then
        If (blnWebcamCapturingInProcess = True) Then
            RemoveHandler Application.Idle, New EventHandler(AddressOf Me.ProcessImageAndUpdateGUI)
            blnWebcamCapturingInProcess = False
        End If

        ibOriginal.Image = Nothing
        ibGrayColorFiltered.Image = Nothing
        ibCanny.Image = Nothing
        ibCircles.Image = Nothing
        ibLines.Image = Nothing
        ibTrisRectsPolys.Image = Nothing

        lblFile.Visible = True
        txtFile.Visible = True
        btnFile.Visible = True
    End If
End Sub

Private Sub rdoWebCam_CheckedChanged(sender As Object, e As EventArgs) Handles rdoWebCam.CheckedChanged
    If (rdoWebCam.Checked = True) Then
        Try
            capWebcam = New Capture()
        Catch ex As Exception
            Me.Text = ex.Message
            Return
        End Try

        AddHandler Application.Idle, New EventHandler(AddressOf Me.ProcessImageAndUpdateGUI)
        blnWebcamCapturingInProcess = True

        lblFile.Visible = False
        txtFile.Visible = False
        btnFile.Visible = False
    End If
End Sub

Private Sub frmForm_FormClosed(sender As Object, e As FormClosedEventArgs) Handles MyBase.FormClosed
    If (Not capWebcam Is Nothing) Then
        capWebcam.Dispose()
    End If
End Sub

Private Sub btnFile_Click(sender As Object, e As EventArgs) Handles btnFile.Click
    Dim drDialogResult As DialogResult = ofdFile.ShowDialog()

    If (drDialogResult = Windows.Forms.DialogResult.OK Or drDialogResult = Windows.Forms.DialogResult.Yes) Then
        txtFile.Text = ofdFile.FileName
        If (txtFile.Text &lt;&gt; String.Empty) Then
            ProcessImageAndUpdateGUI(New Object(), New EventArgs())
        End If
    End If
End Sub


End Sub


End Class
</code></pre>
",2015-09-16 01:37:06,2015-09-16 01:37:06,System.TypeInitializationException when try -> capWebcam = New Capture(),<vb.net><opencv><visual-studio-2013><64-bit><emgucv>,,,CC BY-SA 3.0,True,False,True,False,True
35598,32479249,2015-09-09 12:12:09,,"<p>I'm using OpenCV 2.4.8 on Ubuntu 14.04 to read in some MP4 videos. The program works on Macs and other Linux machines, but for some reason when I compile and run the program it gives me these errors before exiting:</p>

<pre><code>[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
[h264 @ 0x1d0dcc0] missing picture in access unit
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d0dcc0] decode_slice_header error
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1d8a5c0] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
Non-reference picture received and no reference available
[h264 @ 0x1cf8f40] decode_slice_header error
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
[h264 @ 0x1d0dcc0] missing picture in access unit
</code></pre>

<p>The main parts of the code that are reading in the files look like this (they're split between some methods so I've included the lines that do all the work to do with opening and reading the frames:</p>

<pre><code>cv::VideoCapture cap;
cap.open (input_path);
success = cap.read (data.frames[i]);
</code></pre>

<p>Does anyone know how I can get my program to correctly read in these videos? I tried to add ""cap.set(CV_CAP_PROP_FOURCC, CV_FOURCC('H', '2', '6', '4'));"" before ""cap.open"" but that didn't seem to work.</p>
",,2015-09-09 12:31:29,OpenCV cannot read MP4 videos,<c++><opencv><ubuntu><image-processing><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
35618,32564958,2015-09-14 12:34:22,,"<p>I am using an ip camera which has mainstream (with resolution 1920x1080) and substream (with resolution 720x576). My aim is to detect the motion by using the substream, if motion occurs I take a snopshot from the mainstream and do some processing on this image. Here is my code'</p>

<pre><code>    VideoCapture cap;   //video capture device captures the pal stream
    VideoCapture cap2;  //video capture device captures the main stream

    // cap.set(CV_CAP_PROP_BUFFERSIZE,1);
    // cap2.set(CV_CAP_PROP_BUFFERSIZE,1);
    //cap.set(CV_CAP_GSTREAMER_QUEUE_LENGTH,1);
    //cap2.set(CV_CAP_GSTREAMER_QUEUE_LENGTH,1);
    cap.open(""rtsp://usr:pass@x.x.x.x:554/Streaming/Channels/2?transportmode=unicast&amp;profile=Profile_2"",CAP_FFMPEG);  //open substream
    cap2.open(""rtsp:///usr:pass@x.x.x.x:554/Streaming/Channels/1?transportmode=unicast&amp;profile=Profile_1"",CAP_FFMPEG);  //open mainstream
    bool frame_read = false;
    int motion val;

    while (true) {
        frame_read = cap.read(rgb_im); //read the frame from substream
        //cap2.grab();
        if (!frame_read) {
            break;
        }
        cvtColor(rgb_im, gray_im, CV_BGR2GRAY);
        motion_val = detect_motion(gray_im);   //find the motion value

        if (motion_val &gt; MOTION_OCCURRED)    //check if motion occurs
        {
            cap2&gt;&gt;frame_big;    //get one frame from the main stream
            process(frame_big);  //do processing
        }
        imshow(""1"", rgb_im);
            if (waitKey(1) &gt;= 0)
                break;
    }`
</code></pre>

<p>When, I open the stream with CAP_FFMPEG flag latency is very low (under 1 sec). As seen above I regularly read the substream and if motion occurs I read the mainstream. But the frames which I read from the mainstream is not synchronous with the substream. Most probably I grab the frames which waits in the buffer. So I miss the frame with motion and I get an older frame. How can I handle this issue? Somehow I have to make buffer size 1 frame but I cannot find any way.</p>

<p>I have tried 
<code>cap.set(CV_CAP_PROP_BUFFERSIZE,1);</code> but since it needs DC1394 support it does not solve my problem.</p>

<p>Secondly, I have tried <code>cap2.grab()</code> after I read the substream but it increases the latency(make latency about 3 seconds).</p>

<p>Thirdly, I have tried to open videocapture objects with cv_cap_gstreamer flag <code>cap.open(""rtsp://usr:pass@x.x.x.x:554/Streaming/Channels/2transportmode=unicast&amp;profile=Profile_2"",CV_CAP_GSTREAMER);</code> . It solves my buffering problem. In other words, when I detect the motion from the substream, I am able to capture the same instant from the mainstream. But with the gstreamer I have huge delay about 3 seconds which is not desirable for my case.(with gstreamer I tried to read several rtsp streams with different resolutions and latency remains the same) How can I solve the latency issue when I am using gstreamer with opencv?</p>
",,2015-09-14 12:34:22,Opencv RTSP streaming with ffmpeg and gstreamer,<opencv><ffmpeg><gstreamer><rtsp>,,,CC BY-SA 3.0,True,False,False,False,True
35708,32741883,2015-09-23 14:08:26,,"<p>I'm trying to build an android app with buildozer (python-for-android). The app uses OpenCV for image processing and works like a charm on Ubuntu 14.01 LTS and Windows 7 and 8.1.</p>

<p>The building process with buildozer works fine and I can deploy the app on an Android device but the app crashes when I try to launch it on the device.</p>

<p>Here's the trace I get with adb logcat :</p>

<pre><code>I/python  ( 9066): Initialize Python for Android
I/python  ( 9066): Android kivy bootstrap done. __name__ is __main__
I/python  ( 9066): Run user program, change dir and execute main.py
I/python  ( 9066): [WARNING           ] [Config      ] Older configuration version detected (0 instead of 13)
I/python  ( 9066): [WARNING           ] [Config      ] Upgrading configuration in progress.
I/python  ( 9066): [INFO              ] [Kivy        ] v1.9.0
I/python  ( 9066): [INFO              ] [Python      ] v2.7.2 (default, Sep 23 2015, 14:05:23) 
I/python  ( 9066): [GCC 4.8]
I/python  ( 9066): [INFO              ] [Factory     ] 173 symbols loaded
I/python  ( 9066): [INFO              ] [ImageLoaderFFPy] Using ffpyplayer 3.2-dev
I/python  ( 9066): [INFO              ] [Image       ] Providers: img_tex, img_dds, img_gif, img_pygame, img_ffpyplayer (img_pil ignored)
I/python  ( 9066): [INFO              ] [VideoFFPy   ] Using ffpyplayer 3.2-dev
I/python  ( 9066): [INFO              ] [Video       ] Provider: ffpyplayer(['video_pygst', 'video_ffmpeg'] ignored)
I/python  ( 9066): [INFO              ] [Text        ] Provider: pygame
I/python  ( 9066): [INFO              ] [Window      ] Provider: pygame
I/libSDL  ( 9066): SDL_SetVideoMode(): application requested mode 1280x800
I/python  ( 9066): [INFO              ] [GL          ] OpenGL version &lt;OpenGL ES 3.0 V@84.0 AU@  (CL@)&gt;
I/python  ( 9066): [INFO              ] [GL          ] OpenGL vendor &lt;Qualcomm&gt;
I/python  ( 9066): [INFO              ] [GL          ] OpenGL renderer &lt;Adreno (TM) 305&gt;
I/python  ( 9066): [INFO              ] [GL          ] OpenGL parsed version: 3, 0
I/python  ( 9066): [INFO              ] [GL          ] Texture max size &lt;4096&gt;
I/python  ( 9066): [INFO              ] [GL          ] Texture max units &lt;16&gt;
I/python  ( 9066): [INFO              ] [Shader      ] program: &lt;--From Vertex Shader:
I/python  ( 9066): --From Fragment Shader:
I/python  ( 9066): Link was successful.&gt;
I/python  ( 9066): [INFO              ] [Support     ] Android install hooks
I/python  ( 9066): [INFO              ] [Window      ] virtual keyboard not allowed, single mode, not docked
I/python  ( 9066):  ImportError: numpy.core.multiarray failed to import
I/python  ( 9066):  Traceback (most recent call last):
I/python  ( 9066):    File ""/home/florian/camtest/takepicture/android/.buildozer/android/app/main.py"", line 27, in &lt;module&gt;
I/python  ( 9066):  ImportError: numpy.core.multiarray failed to import
I/python  ( 9066): Python for android ended.
</code></pre>

<p>The python line where it crashes is when opencv is imported :</p>

<pre><code>import cv2
</code></pre>

<p>The OpenCV version used is 2.4.11 (I also tried 2.4.9 and 2.4.10 by modifying the recipe.sh file in python-for-android's recipes folder)</p>

<p>The Numpy version used is 1.9.2 (I also tried 1.7.1 and 1.9.3 with no luck)</p>

<p>I honestly don't know what to do anymore, so any help would be very appreciated.</p>
",,2015-09-23 14:08:26,ImportError: numpy.core.multiarray failed to import on Android,<android><opencv><numpy><kivy><buildozer>,,,CC BY-SA 3.0,True,False,False,False,True
35725,32743016,2015-09-23 14:59:21,,"<p>I have a rtsp, udp multicast stream. I read frames by calling  <a href=""http://ffmpeg.org/doxygen/trunk/group__lavf__decoding.html#ga4fdb3084415a82e3810de6ee60e46a61"" rel=""nofollow"">av_read_frame()</a> method in a loop and it works as expected. My problem is, If I sleep my loop (let's say) for 500 ms, I'm not receiving recent frames.</p>

<p>Since, I'm not reading a regular video file, is there any way to get recent frames ? (For e.g. which buffer should I disable or resize... I focused on ffmpeg internal buffers which may be wrong approach ?) </p>
",,2015-09-23 14:59:21,Getting recent frames using FFMPEG,<ffmpeg><rtsp><javacv><rtsp-client><javacpp>,,,CC BY-SA 3.0,False,False,False,False,True
35787,32749454,2015-09-23 21:04:43,,"<p>I am trying to build OpenCV on Ubuntu 14.04 for ARM using <a href=""http://docs.opencv.org/doc/tutorials/introduction/crosscompilation/arm_crosscompile_with_cmake.html"" rel=""nofollow"">this guide</a>. I have tried to install every package, but it is providing me these error on CMAKE. </p>

<pre class=""lang-none prettyprint-override""><code>checking for module 'gstreamer-base-1.0'
package 'gstreamer-base-1.0' not found
checking for module 'gstreamer-video-1.0'
package 'gstreamer-video-1.0' not found
checking for module 'gstreamer-app-1.0'
package 'gstreamer-app-1.0' not found
checking for module 'gstreamer-riff-1.0'
package 'gstreamer-riff-1.0' not found
checking for module 'gstreamer-pbutils-1.0'
package 'gstreamer-pbutils-1.0' not found
Looking for linux/videodev.h
Looking for linux/videodev.h - found
Looking for linux/videodev2.h
Looking for linux/videodev2.h - found
Looking for sys/videoio.h
Looking for sys/videoio.h - not found
checking for module 'libavresample'
package 'libavresample' not found
Looking for libavformat/avformat.h    
Looking for libavformat/avformat.h - found
Looking for ffmpeg/avformat.h
Looking for ffmpeg/avformat.h - not found
checking for module 'libgphoto2'
package 'libgphoto2' not found  
CMake Warning at 3rdparty/ippicv/downloader.cmake:54 (message):ICV: Local copy of ICV package has invalid MD5 hash:d41d8cd98f00b204e9800998ecf8427e (expected:
8b449a536a2157bcad08a2b9f266828b)
Call Stack (most recent call first):3rdparty/ippicv/downloader.cmake:108 (_icv_downloader)cmake/OpenCVFindIPP.cmake:235 (include)cmake/OpenCVFindLibsPerf.cmake:12 (include)CMakeLists.txt:526 (include)
ICV: Downloading ippicv_linux_20141027.tgz...
CMake Error at 3rdparty/ippicv/downloader.cmake:71 (file):
file DOWNLOAD HASH mismatch for file: [/home/akash/Downloads/opencv-3.0.0/3rdparty/ippicv/downloads/linux-8b449a536a2157bcad08a2b9f266828b/ippicv_linux_20141027.tgz]expected hash: [8b449a536a2157bcad08a2b9f266828b]actual hash: [d41d8cd98f00b204e9800998ecf8427e]
Call Stack (most recent call first):3rdparty/ippicv/downloader.cmake:108 (_icv_downloader)cmake/OpenCVFindIPP.cmake:235 (include)cmake/OpenCVFindLibsPerf.cmake:12 (include)CMakeLists.txt:526 (include)
CMake Error at 3rdparty/ippicv/downloader.cmake:75 (message):ICV: Failed to download ICV package: ippicv_linux_20141027.tgz.Status=7;""Couldn't connect to server""
Call Stack (most recent call first):3rdparty/ippicv/downloader.cmake:108 (_icv_downloader)cmake/OpenCVFindIPP.cmake:235 (include)cmake/OpenCVFindLibsPerf.cmake:12 (include)CMakeLists.txt:526 (include)
Configuring incomplete, errors occurred!
</code></pre>
",2015-09-23 22:10:38,2017-09-22 02:59:31,Opencv installation error ubuntu 14.04,<opencv><cmake><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
35865,32683807,2015-09-20 20:10:41,,"<p>I'm trying connect to my IP Camera as follows:</p>

<pre><code>const string sourceIPcam = ""http://192.168.25.112:202/videostream.cgi? user=admin&amp;pwd=admin&amp;resolution=32"";

Mat frame;
VideoCapture cap(sourceIPcam);

namedWindow(""IP Video Camera"", CV_WINDOW_AUTOSIZE);

if (!cap.isOpened())
{
    cout &lt;&lt; ""Could not open the camera "" &lt;&lt; sourceIPcam &lt;&lt; endl;
    return -1;
}
</code></pre>

<p>When running the above code I get the following error:</p>

<pre><code>[mp3 @ 023f3980] Header missing
[mp3 @ 023f3980] Header missing
[mp3 @ 023f3980] Header missing
[mp3 @ 023f3980] Header missing
warning: Could not find codec parameters (../../modules/highgui/src/cap_ffmpeg_i
mpl.hpp:556)
init done
opengl support available
</code></pre>

<p>Any help would be appreciated.</p>
",,2016-12-20 11:35:50,OpenCV Could not find codec parameters,<c++><qt><opencv3.0>,,,CC BY-SA 3.0,True,True,False,False,True
35950,32920347,2015-10-03 08:10:51,,"<p>I want to Create video using Image and mp3 or m4a file. 
I try to use ffmpeg library but that library still not working for me.
I’m also try to use Media-codec and MediaMuxer.</p>

<p>if you have any new library or code then please suggest me.</p>

<p>Thanks in advance.</p>
",,2015-10-03 08:10:51,how to Create Video using Image And mp3 file?,<android><image-processing><video><video-processing>,,,CC BY-SA 3.0,False,False,False,False,True
35965,32806247,2015-09-27 09:01:54,,"<p>I am using an OpenSUSE 13.2-X86-64 and a Geforce 940M GPU. I want to work with it on the Qt5 IDE. 
For this purpose, i have installed my GPU Driver with the Cuda7.5 toolkit rpm from the cudazone. Everything is nearly fine. 
It detects everything I have made and executed a couple of the cuda samples.</p>

<p>As next step, i have installed the current FFmpeg version with nvenc and other libraries like Xvid and many of
 the other usefull stuff which would be to much to list it here. After that i have downloaded the current 
OpenCV-3.0.0 source code and ran cmake-gui where i have added cuda, ffmpeg, Qt5 etc and maked it.  </p>

<p>On different points of the make session (make -j4) i get this kind of mistake from my console (The list of the Multiple definition
error is much longer). This is the first one.</p>

<pre><code>.
.
.
.
.
.
nvlink error   : Multiple definition of '_ZN2cv5cudev16color_cvt_detail15c_HlsSectorDataE' in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_arithm_func.cu.o', first defined in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_lut.cu.o'
nvlink error   : Multiple definition of '_ZN2cv5cudev16color_cvt_detail16c_sRGBGammaTab_bE' in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_arithm_func.cu.o', first defined in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_lut.cu.o'
nvlink error   : Multiple definition of '_ZN2cv5cudev16color_cvt_detail14c_sRGBGammaTabE' in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_arithm_func.cu.o', first defined in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_lut.cu.o'
nvlink error   : Multiple definition of '_ZN2cv5cudev16color_cvt_detail17c_sRGBInvGammaTabE' in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_arithm_func.cu.o', first defined in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_lut.cu.o'
nvlink error   : Multiple definition of '_ZN2cv5cudev16color_cvt_detail12c_LabCbrtTabE' in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_arithm_func.cu.o', first defined in '/home/peter/Programme/opencv/build/modules/cudev/test/CMakeFiles/opencv_test_cudev.dir//./opencv_test_cudev_generated_test_lut.cu.o'
modules/cudev/test/CMakeFiles/opencv_test_cudev.dir/build.make:5302: recipe for target 'modules/cudev/test/CMakeFiles/opencv_test_cudev.dir/./opencv_test_cudev_intermediate_link.o' failed
make[2]: *** [modules/cudev/test/CMakeFiles/opencv_test_cudev.dir/./opencv_test_cudev_intermediate_link.o] Error 255
CMakeFiles/Makefile2:1182: recipe for target 'modules/cudev/test/CMakeFiles/opencv_test_cudev.dir/all' failed
make[1]: *** [modules/cudev/test/CMakeFiles/opencv_test_cudev.dir/all] Error 2
Makefile:137: recipe for target 'all' failed
make: *** [all] Error 2
</code></pre>

<p>And I have no idea how to fix that. </p>

<p>Thx!</p>

<p>Edit: added cmake configuration</p>

<pre><code>~/Programme/opencv/build&gt; cmake /home/peter/Programme/opencv-3.0.0
CMake Error: The source ""/home/peter/Programme/opencv-3.0.0/CMakeLists.txt"" does not match the source ""/home/peter/Programme/opencv/CMakeLists.txt"" used to generate cache.  Re-run cmake with a different source directory.
peter@linux-3mgc:~/Programme/opencv/build&gt; cmake /home/peter/Programme/opencv
-- Detected version of GNU GCC: 48 (408)
-- Found ZLIB: /usr/lib64/libz.so (found suitable version ""1.2.8"", minimum required is ""1.2.3"") 
-- Found ZLIB: /usr/lib64/libz.so (found version ""1.2.8"") 
-- checking for module 'gstreamer-video-0.10'
--   package 'gstreamer-video-0.10' not found
-- checking for module 'gstreamer-app-0.10'
--   package 'gstreamer-app-0.10' not found
-- checking for module 'gstreamer-riff-0.10'
--   package 'gstreamer-riff-0.10' not found
-- checking for module 'gstreamer-pbutils-0.10'
--   package 'gstreamer-pbutils-0.10' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavresample'
--   package 'libavresample' not found
-- Looking for libavformat/avformat.h 
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- found IPP (ICV version): 8.2.1 [8.2.1]
-- at: /home/peter/Programme/opencv/3rdparty/ippicv/unpack/ippicv_lnx
-- CUDA detected: 7.5
-- CUDA NVCC target flags: -gencode;arch=compute_50,code=sm_50
-- To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR=&lt;filepath&gt; option to cmake
-- Found PythonInterp: /usr/bin/python2.7 (found suitable version ""2.7.8"", minimum required is ""2.7"") 
-- Found PythonLibs: /usr/lib64/libpython2.7.so (found suitable exact version ""2.7.8"") 
-- Found PythonInterp: /usr/bin/python3.4 (found suitable version ""3.4.1"", minimum required is ""3.4"") 
-- Found PythonLibs: /usr/lib64/libpython3.4m.so (found suitable exact version ""3.4.1"") 
Traceback (most recent call last):
File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named 'numpy'
-- Found apache ant 1.8.0: /usr/bin/ant
-- Could NOT find JNI (missing:  JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) 
-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT      MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT MATLAB_ARCH MATLAB_BIN) 
-- VTK support is disabled. Incompatible combination: OpenCV + Qt5 and VTK ver.6.1.0 + Qt4
-- 
-- General configuration for OpenCV 3.0.0-dev =====================================
--   Version control:               3.0.0-528-g3a3f403-dirty
-- 
--   Platform:
--     Host:                        Linux 3.16.7-24-desktop x86_64
--     CMake:                       3.0.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/gmake
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.3)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -fopenmp -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -fopenmp -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fopenmp -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fopenmp -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
--     Extra dependencies:          /usr/lib64/libcuda.so /usr/lib64/libnvcuvid.so Qt5::Core Qt5::Gui Qt5::Widgets Qt5::Test Qt5::Concurrent Qt5::OpenGL /usr/lib64/libwebp.so /usr/lib64/libpng.so /usr/lib64/libz.so /usr/lib64/libtiff.so /usr/lib64/libjasper.so /usr/lib64/libjpeg.so gstbase-0.10 gstreamer-0.10 gobject-2.0 gmodule-2.0 gthread-2.0 xml2 ucil glib-2.0 unicap dc1394 xine v4l1 v4l2 avcodec avformat avutil swscale gphoto2 gphoto2_port exif /usr/lib64/libbz2.so dl m pthread rt /usr/lib64/libGLU.so /usr/lib64/libGL.so /usr/lib64/libSM.so /usr/lib64/libICE.so /usr/lib64/libX11.so /usr/lib64/libXext.so cudart nppc nppi npps cublas cufft
--     3rdparty dependencies:       IlmImf ippicv
-- 
--   OpenCV modules:
--     To be built:                 cudev hal core cudaarithm flann imgproc ml video cudabgsegm cudafilters cudaimgproc cudawarping imgcodecs photo shape videoio cudacodec highgui objdetect ts features2d calib3d cudafeatures2d cudalegacy cudaobjdetect cudaoptflow cudastereo stitching superres videostab python2
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 java python3 viz
-- 
--   GUI: 
--     QT 5.x:                      YES (ver 5.4.2)
--     QT OpenGL support:           YES (Qt5::OpenGL 5.4.2)
--     OpenGL support:              YES (/usr/lib64/libGLU.so /usr/lib64/libGL.so /usr/lib64/libSM.so /usr/lib64/libICE.so /usr/lib64/libX11.so /usr/lib64/libXext.so)
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib64/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib64/libjpeg.so (ver )
--     WEBP:                        /usr/lib64/libwebp.so (ver encoder: 0x0202)
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.51)
--     TIFF:                        /usr/lib64/libtiff.so (ver 42 - 4.0.4)
--     JPEG 2000:                   /usr/lib64/libjasper.so (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--     GDAL:                        NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.2)
--     FFMPEG:                      YES
--       codec:                     YES (ver 57.3.100)
--       format:                    YES (ver 57.2.100)
--       util:                      YES (ver 55.2.100)
--       swscale:                   YES (ver 4.0.100)
--       resample:                  NO
--       gentoo-style:              YES
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      YES (ver 0.9.12)
--     UniCap ucil:                 YES (ver 0.9.10)
--     V4L/V4L2:                    Using libv4l1 (ver 1.2.1) / libv4l2 (ver 1.2.1)
--     XIMEA:                       NO
--     Xine:                        YES (ver 1.2.6)
--     gPhoto2:                     YES
-- 
--   Parallel framework:            OpenMP
-- 
--   Other third-party libraries:
--     Use IPP:                     8.2.1 [8.2.1]
--          at:                     /home/peter/Programme/opencv/3rdparty/ippicv/unpack/ippicv_lnx
--     Use IPP Async:               NO
--     Use VA:                      NO
--     Use Intel VA-API/OpenCL:     NO
--     Use Eigen:                   YES (ver 3.2.2)
--     Use Cuda:                    YES (ver 7.5)
--     Use OpenCL:                  YES
-- 
--   NVIDIA CUDA
--     Use CUFFT:                   YES
--     Use CUBLAS:                  YES
--     USE NVCUVID:                 YES
--     NVIDIA GPU arch:             50
--     NVIDIA PTX archs:
--     Use fast math:               YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/peter/Programme/opencv/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 
--   Python 2:
--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.8)
--     Libraries:                   /usr/lib64/libpython2.7.so (ver 2.7.8)
--     numpy:                       /usr/lib64/python2.7/site-packages/numpy/core/include (ver 1.9.0)
--     packages path:               lib/python2.7/site-packages
-- 
--   Python 3:
--     Interpreter:                 /usr/bin/python3.4 (ver 3.4.1)
-- 
--   Python (for build):            /usr/bin/python2.7
-- 
--   Java:
--     ant:                         /usr/bin/ant (ver 1.8.0)
--     JNI:                         NO
--     Java wrappers:               NO
--     Java tests:                  NO
-- 
--   Matlab:
--     mex:                         NO
-- 
--   Documentation:
--     Doxygen:                     /usr/bin/doxygen (ver 1.8.8)
--     PlantUML:                    NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/peter/Programme/opencv/build
--        
-----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/peter/Programme/opencv/build
</code></pre>
",2015-09-27 10:32:01,2016-01-23 04:08:29,Compile OpenCV3 with Cuda7.5 ffmpeg (latest) issue OpenSUSE 13.2,<opencv><cuda><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
36036,32988843,2015-10-07 09:37:56,,"<p>I am trying to record video using <code>OpenCV</code> with some overlayed data. I have added <code>OpenCV</code> to my project and get camera preview successfully. While searching for how can I record video I came across to <code>JavaCV</code>. <code>JavaCV</code> has a sapmle activity called <code>RecordActivity</code> to demostrate video recording. It adds a <code>CameraView</code> dynamically with code and get camera frames and record them in <code>onPreviewFrame</code> method of the <code>CameraView</code>. You can see the full code here:</p>

<p><a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow noreferrer"">RecordAvtivity.java</a></p>

<p>What I want to do is record video in <code>onCameraFrame</code> metod of the <code>CvCameraViewListener2</code> interface instead of <code>onPreviewFrame</code> metod of the <code>PreviewCallback</code>.</p>

<pre><code>public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
    final Mat rgba = inputFrame.rgba();
    Core.flip(rgba, rgba, 1);
    // Overlay some text and record video here.
    return rgba;
}
</code></pre>

<p>JavaCV record code block from RecordAvtivity.java</p>

<pre><code>public void onPreviewFrame(byte[] data, Camera camera) {

    if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
        startTime = System.currentTimeMillis();
        return;
    }

    int i = imagesIndex++ % images.length;
    Frame yuvImage = images[i];
    timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);

    /* get video data */
    if (yuvImage != null &amp;&amp; recording) {
        ((ByteBuffer) yuvImage.image[0].position(0)).put(data);

        try {
            Log.v(TAG, ""Writing Frame"");
            long t = 1000 * (System.currentTimeMillis() - startTime);

            if (t &gt; recorder.getTimestamp()) {
                recorder.setTimestamp(t);
            }

            recorder.record(yuvImage);
        } catch (FFmpegFrameRecorder.Exception e) {
            Log.v(TAG, e.getMessage());
            e.printStackTrace();
        }
    }
}
</code></pre>

<p><code>JavaCV</code> needs data as <code>byte[]</code> but I have <code>Mat</code> object. I need to cenvert between them efficiently.</p>

<p>How can I do that?</p>

<p><strong>UPDATE:</strong></p>

<p>I have used following solution to solve my initial problem</p>

<pre><code>public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
    final Mat rgba = inputFrame.rgba();
    Core.flip(rgba, rgba, 1);

    if (data == null) {
        data = new byte[(int)rgba.total() * rgba.channels()];
    }

    rgba.get(0,0, data);
    record(data);
    return rgba;
}

public void record(byte[] data) {

    if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
        startTime = System.currentTimeMillis();
        return;
    }

    int i = imagesIndex++ % images.length;
    Frame yuvImage = images[i];
    timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);

    /* get video data */
    if (yuvImage != null &amp;&amp; recording) {
        ((ByteBuffer) yuvImage.image[0].position(0)).put(data);

        try {
            Log.v(TAG, ""Writing Frame"");
            long t = 1000 * (System.currentTimeMillis() - startTime);

            if (t &gt; recorder.getTimestamp()) {
                recorder.setTimestamp(t);
            }

            recorder.record(yuvImage);
        } catch (FFmpegFrameRecorder.Exception e) {
            Log.v(TAG, e.getMessage());
            e.printStackTrace();
        }
    }
}
</code></pre>

<p>but now I am getting following error:</p>

<pre><code>FATAL EXCEPTION: main
E/AndroidRuntime: Process: com.yceo.anlatbana, PID: 17622
E/AndroidRuntime: java.lang.UnsatisfiedLinkError: org.bytedeco.javacpp.avutil
E/AndroidRuntime:     at java.lang.Class.classForName(Native Method)
E/AndroidRuntime:     at java.lang.Class.forName(Class.java:309)
E/AndroidRuntime:     at org.bytedeco.javacpp.Loader.load(Loader.java:390)
E/AndroidRuntime:     at org.bytedeco.javacpp.Loader.load(Loader.java:358)
E/AndroidRuntime:     at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1407)
E/AndroidRuntime:     at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
E/AndroidRuntime:     at com.yceo.anlatbana.GameFragment.initRecorder(GameFragment.java:267)
E/AndroidRuntime:     at com.yceo.anlatbana.GameFragment.onCreate(GameFragment.java:98)
E/AndroidRuntime:     at android.support.v4.app.Fragment.performCreate(Fragment.java:1939)
E/AndroidRuntime:     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:988)
E/AndroidRuntime:     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1207)
E/AndroidRuntime:     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:738)
E/AndroidRuntime:     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1572)
E/AndroidRuntime:     at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:493)
E/AndroidRuntime:     at android.os.Handler.handleCallback(Handler.java:739)
E/AndroidRuntime:     at android.os.Handler.dispatchMessage(Handler.java:95)
E/AndroidRuntime:     at android.os.Looper.loop(Looper.java:135)
E/AndroidRuntime:     at android.app.ActivityThread.main(ActivityThread.java:5310)
E/AndroidRuntime:     at java.lang.reflect.Method.invoke(Native Method)
E/AndroidRuntime:     at java.lang.reflect.Method.invoke(Method.java:372)
E/AndroidRuntime:     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:904)
E/AndroidRuntime:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:699)
</code></pre>

<p>I have tried solution from below question but it didn't work:</p>

<p><a href=""https://stackoverflow.com/questions/25660828/javacv-configuration-in-android-studio"">JavaCV configuration in Android Studio</a></p>

<p>I have also tried both manual and gradle install for JavaCV but none of them worked.</p>

<p>I am using:</p>

<ul>
<li>Android Studio 1.4</li>
<li>OpenCV 3.0</li>
<li>JavaCV 1.0</li>
</ul>
",2017-05-23 11:52:20,2015-12-07 06:20:50,Android : FFmpegFrameRecorder (JavaCV) UnsatisfiedLinkError,<android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,True,False,False,True
36083,32932915,2015-10-04 11:24:35,,"<p>I get the following error when trying to configure OpenCV using CMAKE on windows:</p>

<pre><code>CMake Warning at cmake/OpenCVUtils.cmake:865 (message):
Download: Local copy of opencv_ffmpeg.dll has invalid MD5 hash:
d41d8cd98f00b204e9800998ecf8427e (expected:
89c783eee1c47bfc733f08334ec2e31c)

Call Stack (most recent call first):
3rdparty/ffmpeg/ffmpeg.cmake:10 (ocv_download)
cmake/OpenCVFindLibsVideo.cmake:193 (include)
CMakeLists.txt:527 (include)


Downloading opencv_ffmpeg.dll...
CMake Error at cmake/OpenCVUtils.cmake:888 (file):
file DOWNLOAD MD5 mismatch

for file: [C:/research/opencv300/sources/3rdparty/ffmpeg/downloads/89c783eee1c47bfc733f08334ec2e31c/opencv_ffmpeg.dll]
expected MD5 sum: [89c783eee1c47bfc733f08334ec2e31c]
actual MD5 sum: [d41d8cd98f00b204e9800998ecf8427e]

Call Stack (most recent call first):
3rdparty/ffmpeg/ffmpeg.cmake:10 (ocv_download)
cmake/OpenCVFindLibsVideo.cmake:193 (include)
CMakeLists.txt:527 (include)


CMake Error at cmake/OpenCVUtils.cmake:892 (message):
Failed to download opencv_ffmpeg.dll.  Status=1;""unsupported protocol""
Call Stack (most recent call first):
3rdparty/ffmpeg/ffmpeg.cmake:10 (ocv_download)
cmake/OpenCVFindLibsVideo.cmake:193 (include)
CMakeLists.txt:527 (include)


Configuring incomplete, errors occurred!
</code></pre>

<p>I tried downloading opencv_ffmpeg.dll manually, but the configure process didn't work.</p>

<p>Can you help me, how to fix that?</p>
",,2017-04-19 08:47:10,"OpenCV 3.0.0 ""configure"" fails, ffmpeg not downloaded",<c++><windows><opencv><ffmpeg><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
36096,32818053,2015-09-28 07:49:28,,"<p>I am trying to use a cursor to seek a specific frame in stream.</p>

<p><em>main.cpp</em> code follows:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;opencv2/opencv.hpp&gt;

int main()
{
  cv::VideoCapture cap;

  if (!cap.open(""8%d.jpg""))
    return 1;

  double index = cap.get(CV_CAP_PROP_POS_FRAMES);

  index += 10.0;    
  std::cout &lt;&lt; ""Seek to index: "" &lt;&lt; std::endl;

  if ( !(index &lt; cap.get(CV_CAP_PROP_FRAME_COUNT)) )
    return 1;

  bool retval = cap.set(CV_CAP_PROP_POS_FRAMES, index);
  assert(retval);

  std::cout &lt;&lt; cap.get(CV_CAP_PROP_POS_FRAMES) &lt;&lt; std::endl;

  cap.release();
  return 0;
}
</code></pre>

<p>Command line on Ubuntu 14.4.3 LTS with OpenCV 2.4.11:</p>

<pre><code>g++ main.cpp `pkg-config --cflags --libs opencv`
</code></pre>

<p>Command to check returning value:</p>

<pre><code>echo ""$#""
</code></pre>

<p>Output:</p>

<pre><code>Seek to index: 10
-9.223377e+18
</code></pre>

<p><code>cv::VideoCapture::set</code> function on an image sequence seems to break the stream, can you tell me why ?</p>

<p>Note: It works for a video as input but not an image sequence!</p>

<p>PS: I prefer asking before looking inside OpenCV-FFmpeg source code (it could take a while).</p>
",2015-09-28 08:30:41,2015-09-28 08:30:41,cv::VideoCapture::set failed on image sequence,<c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
36109,32995766,2015-10-07 15:02:11,,"<p>I have two h264 videos of different length but same resolution (640,480). I want to combine them frame by frame such that frame f1 of video1 at time T and frame f2 of video2 at time T appear in one frame sideways. So finally you have a video formed by combining sequence of frames from video1 and video2.</p>

<p>How can I do this using any of these solution:</p>

<ul>
<li>programming</li>
<li>softwares</li>
<li>ffmpeg</li>
</ul>
",2015-10-07 15:09:41,2015-10-08 10:15:42,"combine two different length videos frame by frame so as they appear in one frame, kind of like video tiling",<opencv><ffmpeg><video-capture><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
36155,32935415,2015-10-04 15:57:47,,"<p>I have an application written in visual studio, utilizing OpenCV 2.4.10.  The program executes flawlessly in debug mode, but in release mode it crashes on the first command following a VideoCapture::open() call, regardless of whether the call was completed in the constructor or with the method call.  I recognize that this is a pretty common occurrence, and that a dll linkage may be the issue, but have been unable to fully identify the problem.  Any assistance is greatly appreciated.  </p>

<p>Here is the error message:</p>

<pre><code>Unhandled exception at 0x03DE7D43 (opencv_ffmpeg2410.dll) in OpenCVLaserDot.exe: 0xC0000005: Access violation reading location 0x00000000.
</code></pre>

<p>Here is the segment of code surrounding the VideoCapture instantiation:</p>

<pre><code>const string DEFAULT_INPUT_FILE = ""C:/Users/Tyler/Documents/Visual Studio 2013/Projects/OpenCVLaserDot/Release/a.avi"";

VideoCapture cap; 
if (inputFile == ""1"" || inputFile == """"){
    cap.open(DEFAULT_INPUT_FILE);
} else {
    cap.open(inputFile);
}
if (!cap.isOpened()){ 
    printf(""Failed to open video\n"");
    return -1; 
}
</code></pre>
",,2015-10-04 15:57:47,Access violation when opening OpenCV VideoCapture (release only),<c++><visual-studio><opencv><visual-studio-2013><access-violation>,,,CC BY-SA 3.0,True,False,False,False,True
36191,32961382,2015-10-06 03:47:37,,"<p>I am trying to make a live streaming app and i have followed the below link to add javacv into my project 
<a href=""https://github.com/bytedeco/javacv"" rel=""nofollow"">https://github.com/bytedeco/javacv</a> . I created jniLibs folder in my app 
(app->src->main) but my app crashes without any error.When i tried to debug i found out that the code is breaking at this line in FFmpegFrameRecorder.class </p>

<pre><code>public static void tryLoad() throws Exception {
    if(loadingException != null) {
        throw loadingException;
    } else {
        try {
            Loader.load(avutil.class); // exception here
            Loader.load(swresample.class);
            Loader.load(avcodec.class);
            Loader.load(avformat.class);
            Loader.load(swscale.class);
            avformat.av_register_all();
            avformat.avformat_network_init();
        } catch (Throwable var1) {
            if(var1 instanceof Exception) {
                throw loadingException = (Exception)var1;
            } else {
                throw loadingException = new Exception(""Failed to load "" + FFmpegFrameRecorder.class, var1);
            }
        }
    }
}
</code></pre>

<p>I don't know how to resolve this error.Please help me to figure this out.Thanks in advance</p>

<p>Edit this is the stack trace:</p>

<pre><code>    10-06 10:14:56.242  15946-15946/triptam.go.testopencv E/AndroidRuntime﹕ FATAL EXCEPTION: main
    java.lang.NoClassDefFoundError: java.lang.ClassNotFoundException: org.bytedeco.javacpp.avutil
            at org.bytedeco.javacpp.Loader.load(Loader.java:392)
            at org.bytedeco.javacpp.Loader.load(Loader.java:358)
            at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1407)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
            at triptam.go.testopencv.MainActivity.initRecorder(MainActivity.java:411)
            at triptam.go.testopencv.MainActivity.access$1000(MainActivity.java:85)
            at triptam.go.testopencv.MainActivity$startInit$1.run(MainActivity.java:780)
            at android.os.Handler.handleCallback(Handler.java:800)
            at android.os.Handler.dispatchMessage(Handler.java:100)
            at android.os.Looper.loop(Looper.java:194)
            at android.app.ActivityThread.main(ActivityThread.java:5410)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:525)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
            at dalvik.system.NativeStart.main(Native Method)
     Caused by: java.lang.ClassNotFoundException: org.bytedeco.javacpp.avutil
            at java.lang.Class.classForName(Native Method)
            at java.lang.Class.forName(Class.java:217)
            at org.bytedeco.javacpp.Loader.load(Loader.java:390)
            at org.bytedeco.javacpp.Loader.load(Loader.java:358)
            at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1407)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
            at triptam.go.testopencv.MainActivity.initRecorder(MainActivity.java:411)
            at triptam.go.testopencv.MainActivity.access$1000(MainActivity.java:85)
            at triptam.go.testopencv.MainActivity$startInit$1.run(MainActivity.java:780)
            at android.os.Handler.handleCallback(Handler.java:800)
            at android.os.Handler.dispatchMessage(Handler.java:100)
            at android.os.Looper.loop(Looper.java:194)
            at android.app.ActivityThread.main(ActivityThread.java:5410)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:525)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
            at dalvik.system.NativeStart.main(Native Method)
     Caused by: java.lang.NoClassDefFoundError: org/bytedeco/javacpp/avutil
            at java.lang.Class.classForName(Native Method)
            at java.lang.Class.forName(Class.java:217)
            at org.bytedeco.javacpp.Loader.load(Loader.java:390)
            at org.bytedeco.javacpp.Loader.load(Loader.java:358)
            at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1407)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
            at triptam.go.testopencv.MainActivity.initRecorder(MainActivity.java:411)
            at triptam.go.testopencv.MainActivity.access$1000(MainActivity.java:85)
            at triptam.go.testopencv.MainActivity$startInit$1.run(MainActivity.java:780)
            at android.os.Handler.handleCallback(Handler.java:800)
            at android.os.Handler.dispatchMessage(Handler.java:100)
            at android.os.Looper.loop(Looper.java:194)
            at android.app.ActivityThread.main(ActivityThread.java:5410)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:525)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)

            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
            at dalvik.system.NativeStart.main(Native Method)
 Caused by: java.lang.ClassNotFoundException: Didn't find class ""org.bytedeco.javacpp.avutil"" on path: DexPathList[[zip file ""/data/app/triptam.go.testopencv-2.apk"", zip file ""/data/data/triptam.go.testopencv/code_cache/secondary-dexes/triptam.go.testopencv-2.apk.classes2.zip""],nativeLibraryDirectories=[/data/app-lib/triptam.go.testopencv-2, /vendor/lib, /system/lib]]
        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:53)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
            at java.lang.Class.classForName(Native Method)
            at java.lang.Class.forName(Class.java:217)
            at org.bytedeco.javacpp.Loader.load(Loader.java:390)
            at org.bytedeco.javacpp.Loader.load(Loader.java:358)
            at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1407)
            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
            at triptam.go.testopencv.MainActivity.initRecorder(MainActivity.java:411)
            at triptam.go.testopencv.MainActivity.access$1000(MainActivity.java:85)
            at triptam.go.testopencv.MainActivity$startInit$1.run(MainActivity.java:780)
            at android.os.Handler.handleCallback(Handler.java:800)
            at android.os.Handler.dispatchMessage(Handler.java:100)
            at android.os.Looper.loop(Looper.java:194)
            at android.app.ActivityThread.main(ActivityThread.java:5410)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:525)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:833)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
            at dalvik.system.NativeStart.main(Native Method)
</code></pre>

<p>And this is my build.gradle    :</p>

<pre><code>compile group: 'org.bytedeco', name: 'javacv', version: '1.0'
compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '2.4.9-1.0', classifier:    'android-arm'
compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.3-1.0', classifier: 'android-arm'
</code></pre>
",2015-10-06 07:45:46,2015-10-06 07:45:46,Javacv android loading avutil error,<android><javacv><google-code><javacpp>,,,CC BY-SA 3.0,True,False,False,False,True
36219,33157592,2015-10-15 20:08:10,,"<p>I've previously compiled OpenCV 3.0 successfully following <a href=""http://blogs.wcode.org/2014/10/howto-install-build-and-use-opencv-macosx-10-10/"" rel=""nofollow"">this guide</a>, which essentially consists of the following steps:</p>

<ul>
<li>Download all the prerequisites (XCode, Command Line Tools, CMake and OpenCV source)</li>
<li>Build static libs by configuring CMake (via gui) with:

<ul>
<li>Uncheck BUILD_SHARED_LIBS  </li>
<li>Uncheck BUILD_TESTS  </li>
<li>Add an SDK path to CMAKE_OSX_SYSROOT (if it matters, I used <code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk</code>).  </li>
<li><strong>Add x86_64 to CMAKE_OSX_ARCHITECTURES</strong> (emphasis mine, this seems to be the issue, I'm sure I've followed this step)  </li>
<li>Uncheck WITH_1394  </li>
<li>Uncheck WITH_FFMPEG  </li>
</ul></li>
<li>Configure and generate via CMake, then <code>make</code> and <code>sudo make install</code> from the CLI.</li>
</ul>

<p>All of the above alone works fine.  </p>

<hr>

<p>I'm now looking to compile OpenCV with <a href=""https://github.com/itseez/opencv_contrib"" rel=""nofollow"">the extra modules</a>. According to their read-me it should be as simple as filling out <code>OPENCV_EXTRA_MODULES_PATH</code> to <code>&lt;opencv_contrib&gt;/modules</code> in CMake and then building as usual.</p>

<p>I followed the steps outlined above with the added parameter and building OpenCV succeeds, however, when trying to use one of the extra modules in a program (namely <code>cv::ximgproc::createStructuredEdgeDetection</code>, if it matters), I'm getting the following error when compiling:</p>

<blockquote>
  <p>Undefined symbols for architecture x86_64:<br>
  <code>""cv::ximgproc::createStructuredEdgeDetection(cv::String const&amp;, cv::Ptr&lt;cv::ximgproc::RFFeatureGetter const&gt;)""</code>, referenced from:<br>
  _main in main.o<br>
  ld: symbol(s) not found for architecture x86_64<br>
  clang: error: linker command failed with exit code 1 (use -v to see invocation)</p>
</blockquote>

<p>I've included the header which should include the above:</p>

<pre><code>#include &lt;opencv2/ximgproc.hpp&gt;
</code></pre>

<p>I'm compiling via XCode, where I've set an additional header search path of <code>/usr/local/include</code> and a library search path of <code>/usr/local/lib</code> for the project, am I missing something here?  </p>

<p>Standard OpenCV functionality works fine.</p>

<p>What could be the issue and how would I go about solving it?</p>
",,2016-04-22 02:30:32,How to compile OpenCV with extra modules on OS X?,<c++><xcode><macos><opencv><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
36350,33014488,2015-10-08 11:30:21,,"<p>I have a very annoying OpenCV error, that i can't understand, and handle with.
I write an application which gets mjpg's stream from ip camera, and process it, but when i try to load image from stream, sometimes i have </p>

<pre><code>[mjpeg @ 0000000000428480] overread 8
</code></pre>

<p>error, and i don't know why.
Even if i try to skip this issue, and try to load next frame from the stream, the application stucks on </p>

<pre><code>frameStatus = cameraHandler-&gt;read(mat);
</code></pre>

<p>This is code for connection establishing:</p>

<pre><code>void ImageProcessor::connectWithCamera(VideoCapture * cameraHandler) {
    if (cameraHandler != nullptr) {
        Logger::log(""Closing existing camera stream."");
        cameraHandler-&gt;release();
        delete cameraHandler;
    }
    Logger::log(""Camera configuration and connection establishing."");
    cameraHandler = new VideoCapture();
    cameraHandler-&gt;set(CV_CAP_PROP_FRAME_WIDTH, config.RESOLUTION_WIDTH);
    cameraHandler-&gt;set(CV_CAP_PROP_FRAME_HEIGHT, config.RESOLUTION_HEIGHT);
    cameraHandler-&gt;set(CV_CAP_PROP_FPS, config.CAMERA_FPS);
    cameraHandler-&gt;set(CV_CAP_PROP_FOURCC, CV_FOURCC('M', 'J', 'P', 'G'));
    while (!cameraHandler-&gt;open(config.LINK)) {
        Logger::log(""Cannot connect to camera! Trying again."");
    }
}
</code></pre>

<p>And this is code for capturing images:</p>

<pre><code>void ImageProcessor::start() {

    VideoCapture * cameraHandler = new VideoCapture();
    this-&gt;connectWithCamera(cameraHandler);
    this-&gt;connectWithServer(this-&gt;serverConnection);

    Logger::log(""Id sending."");
    serverConnection-&gt;send(config.TOKEN + ""\n"");
    Logger::log(""Computations starting."");

    Mat mat;
    Result * result = nullptr;
    int delta = 1000 / cameraHandler-&gt;get(CV_CAP_PROP_FPS);
    char frameErrorCounter = 0;
    bool frameStatus;

    while (true) {
        frameStatus = false;
        cv::waitKey(delta);

        try {
            frameStatus = cameraHandler-&gt;read(mat);
        } catch (std::exception&amp; e) {
            std::string message = e.what();
            Logger::log(""Critical camera error! : "" + message);
        }

        if (!frameStatus) {
            Logger::log(""Cannot read a frame from source. "");
            ++frameErrorCounter;
            if (!cameraHandler-&gt;isOpened() || frameErrorCounter &gt;= this-&gt;GET_FRAME_ERROR_COUNTER) {
                Logger::log(""Probably camera is disconnected. Trying to establish connection again."");
                frameErrorCounter = 0;
                this-&gt;connectWithCamera(cameraHandler);
                Logger::log(""Computations starting."");
            }
            continue;
        }

        result = processImage(mat);

        std::string stringResult;
        if (result == nullptr) {
            stringResult = this-&gt;NO_RESULT;
            delete result;
            result = nullptr;
        } else {
            stringResult = result-&gt;toJson();
        }

        if (!serverConnection-&gt;send(stringResult)) {
            Logger::log(""Server connection lost, trying to establish it again."");
            serverConnection-&gt;close();
            while (!serverConnection-&gt;isOpen()) {
                this-&gt;connectWithServer(serverConnection);
            }
        }

        mat.release();
    }

}
</code></pre>

<p>Thanks in advance!</p>
",,2015-10-08 11:30:21,OpenCV [[mjpeg @ 0000000000428480] overread 8] during reading a frame from camera,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
36557,33281022,2015-10-22 12:26:22,,"<p>I am using the following code to display a sample image but no windows shows up despite imread actually returns a cv::Mat object. After debugging I realized namedWindow actually doesn't create any window and gives no error message in the terminal.</p>

<pre><code>cv::Mat dst;
dst=imread(""/home/user/catkin_ws/sample.jpg"");
std::cout &lt;&lt; cv::getBuildInformation() &lt;&lt; std::endl;
cv::namedWindow(""test"");
cv::imshow(""test"", dst);
</code></pre>

<p>Here is the configuration information of my OpenCV</p>

<pre><code>General configuration for OpenCV 2.4.8 =====================================
  Version control:               unknown

  Platform:
    Host:                        Linux 3.2.0-58-generic x86_64
    CMake:                       2.8.12.2
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/make
    Configuration:               Release

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                /usr/bin/x86_64-linux-gnu-g++  (ver 4.8.2)
    C++ flags (Release):         -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2    -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security  -DNDEBUG
    C++ flags (Debug):           -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2    -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
    C Compiler:                  /usr/bin/x86_64-linux-gnu-gcc
    C flags (Release):           -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2    -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security  -DNDEBUG
    C flags (Debug):             -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security -D_FORTIFY_SOURCE=2    -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
    Linker flags (Release):      -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now
    Linker flags (Debug):        -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now
    Precompiled headers:         YES

  OpenCV modules:
    To be built:                 core flann imgproc highgui features2d calib3d ml objdetect video contrib legacy photo gpu java ocl python stitching superres ts videostab
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 androidcamera dynamicuda

  GUI: 
    QT:                          NO
    GTK+ 2.x:                    YES (ver 2.24.22)
    GThread :                    YES (ver 2.39.90)
    GtkGlExt:                    YES (ver 1.2.0)
    OpenGL support:              YES (/usr/lib/x86_64-linux-gnu/libGLU.so /usr/lib/x86_64-linux-gnu/libGL.so /usr/lib/x86_64-linux-gnu/libSM.so /usr/lib/x86_64-linux-gnu/libICE.so /usr/lib/x86_64-linux-gnu/libX11.so /usr/lib/x86_64-linux-gnu/libXext.so)

  Media I/O: 
    ZLib:                        /usr/lib/x86_64-linux-gnu/libz.so (ver 1.2.8)
    JPEG:                        /usr/lib/x86_64-linux-gnu/libjpeg.so (ver )
    PNG:                         /usr/lib/x86_64-linux-gnu/libpng.so (ver 1.2.50)
    TIFF:                        /usr/lib/x86_64-linux-gnu/libtiff.so (ver 42 - 4.0.3)
    JPEG 2000:                   /usr/lib/x86_64-linux-gnu/libjasper.so (ver 1.900.1)
    OpenEXR:                     /usr/lib/x86_64-linux-gnu/libImath.so /usr/lib/x86_64-linux-gnu/libIlmImf.so /usr/lib/x86_64-linux-gnu/libIex.so /usr/lib/x86_64-linux-gnu/libHalf.so /usr/lib/x86_64-linux-gnu/libIlmThread.so (ver 1.6.1)

  Video I/O:
    DC1394 1.x:                  NO
    DC1394 2.x:                  YES (ver 2.2.1)
    FFMPEG:                      YES
      codec:                     YES (ver 54.35.0)
      format:                    YES (ver 54.20.3)
      util:                      YES (ver 52.3.0)
      swscale:                   YES (ver 2.1.1)
      gentoo-style:              YES
    GStreamer:                   NO
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    UniCap:                      NO
    UniCap ucil:                 NO
    V4L/V4L2:                    Using libv4l (ver 1.0.1)
    XIMEA:                       NO
    Xine:                        NO

  Other third-party libraries:
    Use IPP:                     NO
    Use Eigen:                   YES (ver 3.2.0)
    Use TBB:                     YES (ver 4.2 interface 7000)
    Use OpenMP:                  NO
    Use GCD                      NO
    Use Concurrency              NO
    Use C=:                      NO
    Use Cuda:                    NO
    Use OpenCL:                  YES

  OpenCL:
    Version:                     dynamic
    Use AMD FFT:                 NO
    Use AMD BLAS:                NO

  Python:
    Interpreter:                 /usr/bin/python2 (ver 2.7.6)
    Libraries:                   /usr/lib/x86_64-linux-gnu/libpython2.7.so (ver 2.7.6)
    numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.8.0.dev-95f7a46)
    packages path:               lib/python2.7/dist-packages

  Java:
    ant:                         /usr/bin/ant (ver 1.9.3)
    JNI:                         /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include
    Java tests:                  NO

  Documentation:
    Build Documentation:         YES
    Sphinx:                      /usr/bin/sphinx-build (ver 1.2.1)
    PdfLaTeX compiler:           /usr/bin/pdflatex

  Tests and samples:
    Tests:                       NO
    Performance tests:           YES
    C/C++ Examples:              YES

  Install path:                  /usr

  cvconfig.h is in:              /build/buildd/opencv-2.4.8+dfsg1/obj-x86_64-linux-gnu
-----------------------------------------------------------------
</code></pre>
",,2015-10-27 10:29:02,namedWindow function doesn't create window,<c++><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
36571,33325679,2015-10-25 02:52:33,,"<p>I am using OpenCV 3.0 with Qt 5.5.0 using MinGW 4.9.2 as the compiler. Everytime cv::VideoCapture is initialized with an int, it causes a segfault. Below is as much relevant info as I could think of.</p>

<p>OpenCVViewer.h</p>

<pre><code>    #pragma once

    #include &lt;QWidget&gt;
    #include &lt;QTimer&gt;
    #include &lt;opencv2/opencv.hpp&gt;

    class OpenCVViewer : public QWidget
    {
        Q_OBJECT
    public:
        OpenCVViewer(QWidget *parent = 0);

    public slots:
        void display_scene();

    protected:
        void paintEvent(QPaintEvent *event) Q_DECL_OVERRIDE;

    private:
        QImage      render_img;     /// Qt image to be rendered
        cv::Mat     original_img;   /// original OpenCV image to be shown
        bool    showImage( cv::Mat image ); /// Used to set the image to be viewed
        QTimer *timer;

        cv::VideoCapture cap;
    };
</code></pre>

<p>OpenCVViewer.cpp</p>

<pre><code>#include ""OpenCVViewer.h""
#include &lt;QtWidgets&gt;
#include &lt;opencv2/opencv.hpp&gt;
#include &lt;stdexcept&gt;

OpenCVViewer::OpenCVViewer(QWidget *parent) :
    QWidget(parent),
    cap(0)
{
    timer = new QTimer(this);
    QObject::connect(timer, SIGNAL(timeout()), this, SLOT(display_scene()));

    if (!cap.isOpened())  // if not success, throw exception
    {
        throw std::runtime_error(""Cannot open the web cam"");
    }
    timer-&gt;start(30);
}

/** Rest of file not included */
</code></pre>

<p>Qt .pro file. OpenCV was compiled with MinGW 4.9.2.</p>

<pre><code> QT       += core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = Humanactivity
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp \
    OpenCVViewer.cpp

HEADERS  += mainwindow.h \
    OpenCVViewer.h

FORMS    += mainwindow.ui

win32: LIBS += -L$$PWD/../lib/opencv/build/mingw32/bin/ -lopencv_calib3d300 \
                                                        -lopencv_core300 \
                                                        -lopencv_features2d300 \
                                                        -lopencv_flann300 \
                                                        -lopencv_highgui300 \
                                                        -lopencv_imgcodecs300 \
                                                        -lopencv_imgproc300 \
                                                        -lopencv_ml300 \
                                                        -lopencv_objdetect300 \
                                                        -lopencv_photo300 \
                                                        -lopencv_shape300 \
                                                        -lopencv_stitching300 \
                                                        -lopencv_superres300 \
                                                        -lopencv_video300 \
                                                        -lopencv_videoio300 \
                                                        -lopencv_videostab300 \
                                                        -lopencv_ffmpeg300
INCLUDEPATH += $$PWD/../lib/opencv/build/include
DEPENDPATH += $$PWD/../lib/opencv/build/include
</code></pre>

<p>And the stack trace</p>

<blockquote>
  <p>0 QEdit!DllRegisterServer         0x14006cda<br>
  1 videoInput::start(int,
  videoDevice *)            0x6bd84c6b<br>
  2 videoInput::setup(int)          0x6bd848be<br>
  3 cv::VideoCapture_DShow::open(int)           0x6bd8bfd5<br>
  4 cv::VideoCapture_DShow::VideoCapture_DShow(int)         0x6bd8c0b5<br>
  5 cv::VideoCapture::open(int)         0x6bd89e86<br>
  6 cv::VideoCapture::VideoCapture(int)         0x6bd8a2b7<br>
  7 ??          0x401901<br>
  8 ??          0x403d22<br>
  9 ??          0x4016f7<br>
  10    ??          0x401647<br>
  11    ??          0x4032f2<br>
  12    ??          0x404cfd<br>
  13    ??          0x4013de<br>
  14    KERNEL32!BaseThreadInitThunk            0x7557337a<br>
  15    ntdll!RtlInitializeExceptionChain           0x779f9882<br>
  16    ntdll!RtlInitializeExceptionChain           0x779f9855   17 ??</p>
</blockquote>
",2015-10-25 15:01:43,2015-10-25 15:01:43,Seg Fault when initializing cv::VideoCapture in Qt,<c++><qt><opencv><mingw>,,,CC BY-SA 3.0,True,True,False,False,True
36598,33109402,2015-10-13 17:53:55,,"<p>I'm using a custom AVIOContext to bridge FFMpeg with java IO. The function <code>avformat_open_input()</code> never returns. I have searched the web for similar problems, all of which were caused by faulty network or wrong server configurations. However, I'm not using network at all, as you can see in the following little program:</p>

<pre><code>package com.example;

import org.bytedeco.javacpp.*;
import java.io.File;
import java.io.IOException;
import java.io.RandomAccessFile;
import static org.bytedeco.javacpp.avcodec.*;
import static org.bytedeco.javacpp.avformat.*;
import static org.bytedeco.javacpp.avutil.*;
import static org.bytedeco.javacpp.avdevice.*;
import static org.bytedeco.javacpp.avformat.AVFormatContext.*;

public class Test {

    public static void main(String[] args) throws Exception {
        File dir = new File(System.getProperty(""user.home""), ""Desktop"");
        File file = new File(dir, ""sample.3gp"");
        final RandomAccessFile raf = new RandomAccessFile(file, ""r"");

        Loader.load(avcodec.class);
        Loader.load(avformat.class);
        Loader.load(avutil.class);
        Loader.load(avdevice.class);
        Loader.load(swscale.class);
        Loader.load(swresample.class);

        avcodec_register_all();
        av_register_all();
        avformat_network_init();
        avdevice_register_all();

        Read_packet_Pointer_BytePointer_int reader = new Read_packet_Pointer_BytePointer_int() {
            @Override
            public int call(Pointer pointer, BytePointer buf, int bufSize) {
                try {
                    byte[] data = new byte[bufSize]; // this is inefficient, just use as a quick example
                    int read = raf.read(data);

                    if (read &lt;= 0) {
                        System.out.println(""EOF found."");
                        return AVERROR_EOF;
                    }

                    System.out.println(""Successfully read "" + read + "" bytes of data."");
                    buf.position(0);
                    buf.put(data, 0, read);
                    return read;
                } catch (Exception ex) {
                    ex.printStackTrace();
                    return -1;
                }
            }
        };

        Seek_Pointer_long_int seeker = new Seek_Pointer_long_int() {
            @Override
            public long call(Pointer pointer, long offset, int whence) {
                try {
                    raf.seek(offset);
                    System.out.println(""Successfully seeked to position "" + offset + ""."");
                    return offset;
                } catch (IOException ex) {
                    return -1;
                }
            }
        };

        int inputBufferSize = 32768;
        BytePointer inputBuffer = new BytePointer(av_malloc(inputBufferSize));
        AVIOContext ioContext = avio_alloc_context(inputBuffer, inputBufferSize, 1, null, reader, null, seeker);
        AVInputFormat format = av_find_input_format(""3gp"");
        AVFormatContext formatContext = avformat_alloc_context();
        formatContext.iformat(format);
        formatContext.flags(formatContext.flags() | AVFMT_FLAG_CUSTOM_IO);
        formatContext.pb(ioContext);

        // This never returns. And I can never get result.
        int result = avformat_open_input(formatContext, """", format, null);

        // all clean-up code omitted for simplicity
    }

}
</code></pre>

<p>And below is my sample console output:</p>

<pre><code>Successfully read 32768 bytes of data.
Successfully read 32768 bytes of data.
Successfully read 32768 bytes of data.
Successfully read 32768 bytes of data.
Successfully read 32768 bytes of data.
Successfully read 7240 bytes of data.
EOF found.
</code></pre>

<p>I've checked the sum of bytes, which corresponds to the file size; EOF is also hit, meaning the file is completely read. Actually I am a bit skeptical as why <code>avformat_open_input()</code> would even read the entire file and still without returning? There must be something wrong with what I am doing. Can any expert shed some lights or point me to the right direction? I'm new to <code>javacv</code> and <code>ffmpeg</code> and especially to programming with <code>Buffer</code>s and stuff. Any help, suggestion or criticism is welcome. Thanks in advance.</p>
",,2015-10-14 06:15:58,"JavaCV: avformat_open_input() hangs (not network, but with custom AVIOContext)",<ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
36614,33267651,2015-10-21 19:29:22,,"<p>I have a C# program that has been crashing after a variable amount of time.   I've tracked it down to OpenALPR and have now duplicated the problem in a test program.   </p>

<p>I basically ask to get the plates from an image in a while loop.   It fails after a bunch of iterations.  Failed after Iterations : 179, 221, 516, 429, 295, 150</p>

<p>Program output:</p>

<pre><code>...
  Iter (219)  No Plates Found in image 71197e9d829d4d429e74a71c983380dc_09032015
134103267.jpg
Config file location provided via API
LBP Time: 0.005ms.
Total Time to process image: 1.916ms.
  Iter (220)  No Plates Found in image 71197e9d829d4d429e74a71c983380dc_09032015
134103267.jpg
Config file location provided via API
LBP Time: 0.003ms.
Total Time to process image: 4.071ms.
  Iter (221)  No Plates Found in image 71197e9d829d4d429e74a71c983380dc_09032015
134103267.jpg
Config file location provided via API
</code></pre>

<p>Failure message:</p>

<pre><code>Unhandled Exception:
Unhandled Exception: System.AccessViolationException: Attempted to read or write
 protected memory. This is often an indication that other memory is corrupt.
   at openalprnet.AlprNet.Dispose(Boolean )
System.AccessViolationException: Attempted to read or write protected memory. Th
is is often an indication that other memory is corrupt.
   at alpr.Alpr.{ctor}(Alpr* , basic_string&lt;char\,std::char_traits&lt;char&gt;\,std::a
llocator&lt;char&gt; &gt;* , basic_string&lt;char\,std::char_traits&lt;char&gt;\,std::allocator&lt;ch
ar&gt; &gt;* , basic_string&lt;char\,std::char_traits&lt;char&gt;\,std::allocator&lt;char&gt; &gt;* )
   at openalprnet.AlprNet..ctor(String country, String configFile, String runtim
eDir)
   at AlprTest.Program.Main(String[] args) in C:\Users\foo\Desktop\c#LPR\A
lprTest\Program.cs:line 25
</code></pre>

<p>One time, I also got part of another error message(not sure if its related or not) : <code>Unable to load regex: @###@@</code>.   Although the error above is pointing to the CTOR, I have, in my normal application, had it fail during the recognize call.   I've also seen (not sure how accurate these stack traces are) it in <code>openalprnet.AlprNet.Dispose(Boolean)</code> which was called from <code>alpr.Alpr.{ctor}(...</code></p>

<p>My test program :</p>

<pre><code>using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using openalprnet;

namespace AlprTest
{
    class Program
    {
        static void Main(string[] args)
        {
            string chipPath = ""71197e9d829d4d429e74a71c983380dc_09032015134103267.jpg"";
            string confPath = Path.GetFullPath("".\\openalpr.conf"");
            string runtimeDirPath = Path.GetFullPath("".\\runtime_data"");
            int i = 0;
            while (true)
            {
                ++i;
                try
                {
                    // Look at target velocity and pick a conf file to use.
                    //
                    AlprNet alpr = new AlprNet(""us"", confPath, runtimeDirPath);

                    if (!alpr.isLoaded())
                    {
                        return;
                    }
                    // Optionally apply pattern matching for a particular region
                    alpr.DefaultRegion = ""va""; // was md
                    alpr.DetectRegion = true;

                    AlprResultsNet results = alpr.recognize(chipPath);

                    if (results.plates.Count &lt; 1)
                    {
                        Console.WriteLine(""  Iter ({1})  No Plates Found in image {0}"", chipPath, i);
                    }
                    else
                    {
                        int j = 0;
                        foreach (var result in results.plates)
                        {
                            Console.WriteLine(""Plate {0}: {1} result(s)"", ++j, result.topNPlates.Count);
                            Console.WriteLine(""  Processing Time: {0} msec(s)"", result.processing_time_ms);
                            foreach (var plate in result.topNPlates)
                            {
                                Console.WriteLine(""  - {0}\t Confidence: {1}\tMatches Template: {2}"", plate.characters,
                                                    plate.overall_confidence, plate.matches_template);
                            }
                        }
                    }
                }
                catch (Exception ex)
                {
                    Console.WriteLine(""Exception caught in LPR processing.  Ex={0}"", ex);
                    return;
                }
            }
        }
    }
}
</code></pre>

<p>The program depends on the openalpr distribution and corresponding opencv dlls.   <code>openalpr-net.dll, liblept170.dll, opencv_core248.dll, opencv_features2d248.dll, opencv_ffmpeg248.dll, opencv_flann248.dll, opencv_highgui248.dll, opencv_imgproc248.dll, opencv_objdetect248.dll, opencv_video248.dll</code>.   It also uses a runtime_data directory (which I simply copied from the sample app) which seems to contain training data and such.</p>

<p>So, obviously, I'm using C#.  I'm using Visual Studio 2010 and .NET 4.0</p>

<p>I'm assuming that I'm using OpenALPR wrong and that there is, in fact, nothing wrong with it.   This would seem to be a pretty basic function.   Aside from fixing it... why does this crash my program and how can I catch this and recover?   You notice my try-catch totally fails to catch it and it crashes the whole application.</p>

<p>EDIT : 
While running the test app, it starts with like 2gig of memory, but it just grows and grows and grows.   It crashed with 7.7 gig after 147 loops.   </p>

<p>EDIT EDIT : 
Added in call to Dispose after each iteration and now the program sits pretty steady at 50-75 megs of memory.   </p>
",2015-10-21 20:02:29,2015-10-21 20:02:29,OpenALPR crash - Attempted to read or write protected memory,<c#><opencv><exception-handling><openalpr>,,,CC BY-SA 3.0,True,False,False,False,True
36695,33530168,2015-11-04 19:14:09,,"<p>I'm trying to get VideoCapture working with OpenCV. The video I'm trying to load is in XVID format (checked it with <code>VideoCapture::get(CV_CAP_PROP_FOURCC)</code>). It works fine, but whenever I try to get the video framerate (<code>VideoCapture::get(CV_CAP_PROP_FPS)</code>) I get <code>-nan</code>.</p>

<p>I've used the same video and the same code on another computer (at uni, they have a custom Debian installation) and I can confirm that the framerate info is there (it works fine there). I read somewhere that Ubuntu recently removed ffmpeg from their repositories (I use Linux Mint 17.2), so I installed the <code>ffmpeg</code> package from the <code>ppa:kirillshkrogalev/ffmpeg-next</code> repositories. After that I recompiled OpenCV and installed again, without any change.</p>

<p>I'm using OpenCV 2.4.11 with C++ under Linux Mint 17.2.</p>
",2015-11-04 19:19:19,2016-03-16 14:04:50,OpenCV (C++) Can't get XVID video file framerate,<c++><linux><opencv><video>,,,CC BY-SA 3.0,True,False,False,False,True
36744,33455752,2015-10-31 19:34:30,,"<p>I need to use javacv for ffmpeg which isn't supported with opencv for android, I want to use the official opencv library for the rest of the project, any ideas on converting the mat objects</p>
",2018-06-09 16:02:36,2018-06-09 16:02:36,Convert opencv java mat to javacv mat and vice versa,<opencv><javacv><mat>,,,CC BY-SA 4.0,True,True,False,False,True
36758,33277378,2015-10-22 09:12:37,,"<p>I was given two inputs one is an image (image from .mp4 video file)and the other one is video(mostly in .ts format). Mostly the video is lossy encoding. I need to find the image in the video. Here I can't compare the raw frames of video and image as they are different in encoding . To my knowledge,  I need to find same alike image/frame in the video with respect to image. Is there any tools/api to find the image in the video. </p>
",2016-10-12 06:33:32,2016-10-12 06:33:32,To detect the image/frame in the video,<image><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
36761,33573312,2015-11-06 18:28:11,,"<p>I'm using OpenCV in python on OSX(10.10.5). I'm fairly new to OpenCV. Right now I'm just trying to find the frame number where a certain event happens in a video. I'm navigating the video using a trackbar. </p>

<p>The problem I'm having is that OpenCV is reporting non-integer frame numbers. My program should set the frame number to the trackbar position. The trackbar position is always an integer, but the frame number is not. The problem seems to be worse with longer videos: with shorter videos, the frame number, if not an integer, is something like 253.99999999999994 when the trackbar position is 254. However, with longer videos, the frame number gets further and further from an integer value (e.g. 11212.20588235294 when the trackbar position is 11212, or 26631.529411764703 when the trackbar position is 26631.) Note that these numbers don't always round or truncate to the same integer as the trackbar position. </p>

<p>The total frame number for each video is also not an integer: 1547.9999999999998 for the shorter video I've been testing with, and 92651.38235294117 for the long video I've been testing. The shorter video is an .mov file and the longer one is .mp4, which I transcoded from .mpg using ffmpeg. </p>

<p>Why is this happening? How can I figure out frame numbers? Thanks for any help! Here's the test code I've been using (note that it's based on the frame grabber from <a href=""http://giusedroid.blogspot.com/2015/05/python-opencv-frame-grabber.html"" rel=""nofollow"">http://giusedroid.blogspot.com/2015/05/python-opencv-frame-grabber.html</a>):</p>

<pre><code>import numpy as np
import cv2

video_path = '#set video path here'

# grab a VideoCapture object
cap = cv2.VideoCapture(video_path)

#set some shorthand names
current_frame_flag = cv2.cv.CV_CAP_PROP_POS_FRAMES
total_frames_flag = cv2.cv.CV_CAP_PROP_FRAME_COUNT
win_name = ""Frameshift calculator""
pos_trackbar='pos_trackbar'

cv2.namedWindow(win_name)


def seek_callback(x): 

    # we want to change the value of the frame variable globally
    global frame
    # by getting the position of the trackbar
    i = cv2.getTrackbarPos(pos_trackbar, win_name)
    # and skipping to the selected frame
    cap.set(current_frame_flag, i)
    _, frame = cap.read()
    # and then update the window
    cv2.imshow(win_name, frame)
    #print out the current frame flag and the trackbar position
    print(cap.get(current_frame_flag), i)

cv2.createTrackbar(pos_trackbar, win_name, 0, int(cap.get(total_frames_flag)), seek_callback)

while True:
    # shows the image
    cv2.imshow(win_name, frame)
    # waits for keystroke
    if cv2.waitKey(0) &amp; 0xFF == ord('q'):
        break
    key = cv2.waitKey(0)

cap.release
cv2.destroyAllWindows()
</code></pre>

<p>Some sample (frame number, trackbar position) pairs:</p>

<p>Shorter video (.mov):
(1.0, 0)
(171.99999999999997, 172)
(842.9999999999999, 843)
(1141.0, 1141)
(1330.0, 1330)
(111.99999999999999, 112)
(235.99999999999997, 236)
(590.9999999999999, 591)
(1546.9999999999998, 1547)</p>

<p>Longer video (.mp4):
(1.0, 0)
(6642.911764705882, 6642)
(27496.11764705882, 27496)
(49707.529411764706, 49707)
(64786.294117647056, 64786)
(84065.38235294117, 84065)</p>
",2015-11-06 19:45:37,2015-11-06 19:45:37,Non-integer frame numbers in OpenCV?,<python><opencv><video-capture><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
36794,33300789,2015-10-23 11:03:12,,"<p>Is it possible to compare pragmatically, two look alike videos of different codec, size and resolution. I went through the some tools like <code>ffmpeg</code> <code>opencv</code>. </p>

<p>Or in the another context, Lets an image should be compared with video and find out the exact time where the image visually present in the given video. The codecs, size and resolution of video and image may vary.   </p>
",2015-11-18 07:11:58,2015-11-18 07:11:58,"How to compare visually two look alike videos of different codec, size, resolution",<opencv><ffmpeg><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
36813,33537284,2015-11-05 05:25:55,,"<p>I am having difficulty when I am trying to live stream from android device to RTMP. First it was streaming good however, it was tilted so got a code to rotate the image.</p>

<pre><code> public  IplImage rotateImage(IplImage img) {
        IplImage img_rotate = IplImage.create(img.height(), img.width(),
                img.depth(), img.nChannels());
        //acctually, I don't know how to use these two methods properly
        cvTranspose(img, img_rotate);
        cvFlip(img_rotate, img_rotate, 1);   //?????90?

        return img_rotate;
    }
</code></pre>

<p>My code where I call the rotate from onPreviewFrame():</p>

<pre><code>    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {

        if (yuvIplimage != null &amp;&amp; recording) {
         videoTimestamp = 1000 * (System.currentTimeMillis() - startTime);

         // Put the camera preview frame right into the yuvIplimage object
         yuvIplimage.getByteBuffer().put(data);
        try {

             // Get the correct time
                recorder.setTimestamp(videoTimestamp);

                // Record the image into FFmpegFrameRecorder
                recorder.record(rotateImage(yuvIplimage));

            } catch (FFmpegFrameRecorder.Exception e) {
                Log.v(LOG_TAG,e.getMessage());
                e.printStackTrace();
            }
        }
    }
</code></pre>

<p>As a result of this, I am getting the below image</p>

<p><a href=""https://i.stack.imgur.com/BmKqM.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/BmKqM.png"" alt=""Rotated Image however distorted ""></a></p>

<p>In some other post, I came to know that we have to use </p>

<pre><code>    rgbimage = IplImage.create(imageWidth, imageHeight, IPL_DEPTH_8U, 3);
    opencv_imgproc.cvCvtColor(yuvimage, rgbimage, opencv_imgproc.CV_YUV2BGR_NV21);
</code></pre>

<p>Then we can rotate however when ever I use this, I get exception BufferOverflow sometimes and sometimes RuntimeException </p>
",2017-10-22 16:54:11,2017-10-22 16:54:11,Rotating IplImage creating distorted image using OpenCV,<android><ffmpeg><javacv><iplimage>,,,CC BY-SA 3.0,True,False,False,False,True
36816,33460823,2015-11-01 09:33:42,,"<p>I'm trying to record a video in Android using the JavaCV lib. My problem is, I am trying to make something like touch to record project. But I want user to be able to delete the frames.</p>

<p>So my question is, <strong>how I can remove last 10 seconds that I record with FFmpegFrameRecorder ?</strong></p>
",,2015-11-01 09:33:42,Remove Frames With FFmpegFrameRecorder,<android><video><ffmpeg><record><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
36865,33581192,2015-11-07 09:30:33,,"<pre class=""lang-none prettyprint-override""><code>[ 40%] Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o

In file included from /home/liuge/opencv-3.0.0/modules/videoio/src/cap_ffmpeg.cpp:45:0:

/home/liuge/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp: In member function ‘void CvCapture_FFMPEG::close()’:

/home/liuge/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp:317:36: 
error: ‘avcodec_free_frame’ was not declared in this scope
         avcodec_free_frame(&amp;picture);
                                    ^
/home/liuge/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp: In member function ‘bool CvCapture_FFMPEG::open(const char*)’:

/home/liuge/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp:632:43: error: ‘avcodec_alloc_frame’ was not declared in this scope
             picture = avcodec_alloc_frame();
                                           ^

/home/liuge/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp:635:41: error: ‘PIX_FMT_BGR24’ was not declared in this scope
                     avpicture_get_size( PIX_FMT_BGR24,
                                         ^

/home/liuge/opencv-3.0.0/modules/videoio/src/cap_ffmpeg_impl.hpp: In member function ‘bool CvCapture_FFMPEG::retrieveFrame(int, unsigned char**, int*, int*, int*, int*)’:

.......
</code></pre>

<p>it works when i type <code>-D WITH_FFMPEG=OFF</code>
how do i build CV with FFmpeg?</p>
",2015-11-07 09:31:12,2015-11-07 09:31:12,Building opencv3 with ffmpeg,<c++><c><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
36871,33352098,2015-10-26 17:37:36,,"<p>I have an opencv application in cpp. </p>

<p>It captures video stream and saves it to video files with the simple constructs from opencv.</p>

<p>It works perfectly with my webcam.</p>

<p>But, it crashes maybe after about ten seconds, while I run it to capture the stream from IP Camara. </p>

<p>My compile command is:</p>

<pre><code>g++ -O3 IP_Camera_linux.cpp -o IP_Camera `pkg-config --cflags --libs opencv`
</code></pre>

<p>My Stream from IP cam is accessed like this: </p>

<pre><code>const string Stream = ""rtsp://admin:xxxx@192.168.0.101/"";
</code></pre>

<p>It does run perfectly, shows video and saves it until the displayed video freezes and the application crashes. While the error message on the terminal is: </p>

<pre><code>[h264 @ 0x15e6f60] error while decoding MB 59 31, bytestream (-20)
[h264 @ 0x15e8200] error while decoding MB 61 27, bytestream (-3)
[h264 @ 0x109c880] missing picture in access unit
[h264 @ 0x109c000] no frame!
</code></pre>

<p>To my understanding, the fist two lines in the above error message might have something to do but does not actually crash the application. The last two lines are probably the reasons or the cause?</p>

<p>Any help?</p>
",2015-10-27 12:26:58,2016-11-09 13:42:25,OpenCV IP camera application crashes [h264 @ 0xxxxx] missing picture in access unit,<c++><opencv><ffmpeg><h.264><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
36954,33315787,2015-10-24 07:45:04,,"<p>Hi i am using <a href=""https://github.com/bytedeco/javacv/"">https://github.com/bytedeco/javacv/</a> for recording video.
When using landscape mode orientation is fine but when i change the orientation to portrait mode the video is rotated -90 degree.
Any body have an idea what i may be doing wrong. Here is the code.</p>

<pre><code>package org.bytedeco.javacv_android_example.record;

import android.app.Activity;
import android.content.Context;
import android.content.pm.ActivityInfo;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.os.PowerManager;
import android.util.Log;
import android.view.Display;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;

import org.bytedeco.javacpp.opencv_core;
import org.bytedeco.javacpp.opencv_imgproc;
import org.bytedeco.javacv.FFmpegFrameRecorder;
import org.bytedeco.javacv.Frame;
import org.bytedeco.javacv.OpenCVFrameConverter;
import org.bytedeco.javacv_android_example.R;

import java.io.File;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.ShortBuffer;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class RecordActivity extends Activity implements OnClickListener {

    private final static String CLASS_LABEL = ""RecordActivity"";
    private final static String LOG_TAG = CLASS_LABEL;
    /* The number of seconds in the continuous record loop (or 0 to disable loop). */
    final int RECORD_LENGTH = 10;
    /* layout setting */
    private final int bg_screen_bx = 232;
    private final int bg_screen_by = 128;
    private final int bg_screen_width = 700;
    private final int bg_screen_height = 500;
    private final int bg_width = 1123;
    private final int bg_height = 715;
    private final int live_width = 640;
    private final int live_height = 480;
    long startTime = 0;
    boolean recording = false;
    volatile boolean runAudioThread = true;
    Frame[] images;
    long[] timestamps;
    ShortBuffer[] samples;
    int imagesIndex, samplesIndex;
    private PowerManager.WakeLock mWakeLock;
    private File ffmpeg_link = new File(Environment.getExternalStorageDirectory(), ""stream.mp4"");
    private FFmpegFrameRecorder recorder;
    private boolean isPreviewOn = false;
    private int sampleAudioRateInHz = 44100;
    private int imageWidth = 320;
    private int imageHeight = 240;
    private int frameRate = 30;
    /* audio data getting thread */
    private AudioRecord audioRecord;
    private AudioRecordRunnable audioRecordRunnable;
    private Thread audioThread;
    /* video data getting thread */
    private Camera cameraDevice;
    private CameraView cameraView;
    private Frame yuvImage = null;
    private int screenWidth, screenHeight;
    private Button btnRecorderControl;
    OpenCVFrameConverter.ToIplImage converter = new OpenCVFrameConverter.ToIplImage();


    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        setContentView(R.layout.activity_record);

        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, CLASS_LABEL);
        mWakeLock.acquire();

        initLayout();
    }

    @Override
    protected void onResume() {
        super.onResume();

        if(mWakeLock == null) {
            PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
            mWakeLock = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, CLASS_LABEL);
            mWakeLock.acquire();
        }
    }

    @Override
    protected void onPause() {
        super.onPause();

        if(mWakeLock != null) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();

        recording = false;

        if(cameraView != null) {
            cameraView.stopPreview();
        }

        if(cameraDevice != null) {
            cameraDevice.stopPreview();
            cameraDevice.release();
            cameraDevice = null;
        }

        if(mWakeLock != null) {
            mWakeLock.release();
            mWakeLock = null;
        }
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {

        if(keyCode == KeyEvent.KEYCODE_BACK) {
            if(recording) {
                stopRecording();
            }

            finish();

            return true;
        }

        return super.onKeyDown(keyCode, event);
    }

    private void initLayout() {

        /* get size of screen */
        Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
        RelativeLayout.LayoutParams layoutParam = null;
        LayoutInflater myInflate = null;
        myInflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        RelativeLayout topLayout = new RelativeLayout(this);
        setContentView(topLayout);
        LinearLayout preViewLayout = (LinearLayout) myInflate.inflate(R.layout.activity_record, null);
        layoutParam = new RelativeLayout.LayoutParams(screenWidth, screenHeight);
        topLayout.addView(preViewLayout, layoutParam);

        /* add control button: start and stop */
        btnRecorderControl = (Button) findViewById(R.id.recorder_control);
        btnRecorderControl.setText(""Start"");
        btnRecorderControl.setOnClickListener(this);

        /* add camera view */
        int display_width_d = (int) (1.0 * bg_screen_width * screenWidth / bg_width);
        int display_height_d = (int) (1.0 * bg_screen_height * screenHeight / bg_height);
        int prev_rw, prev_rh;
        if(1.0 * display_width_d / display_height_d &gt; 1.0 * live_width / live_height) {
            prev_rh = display_height_d;
            prev_rw = (int) (1.0 * display_height_d * live_width / live_height);
        } else {
            prev_rw = display_width_d;
            prev_rh = (int) (1.0 * display_width_d * live_height / live_width);
        }
        layoutParam = new RelativeLayout.LayoutParams(prev_rw, prev_rh);
        layoutParam.topMargin = (int) (1.0 * bg_screen_by * screenHeight / bg_height);
        layoutParam.leftMargin = (int) (1.0 * bg_screen_bx * screenWidth / bg_width);

        cameraDevice = Camera.open();
        Log.i(LOG_TAG, ""cameara open"");
        cameraView = new CameraView(this, cameraDevice);
        topLayout.addView(cameraView, layoutParam);
        Log.i(LOG_TAG, ""cameara preview start: OK"");
    }

    //---------------------------------------
    // initialize ffmpeg_recorder
    //---------------------------------------
    private void initRecorder() {

        Log.w(LOG_TAG, ""init recorder"");

        if(RECORD_LENGTH &gt; 0) {
            imagesIndex = 0;
            images = new Frame[RECORD_LENGTH * frameRate];
            timestamps = new long[images.length];
            for(int i = 0; i &lt; images.length; i++) {
                images[i] = new Frame(imageWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
                timestamps[i] = -1;
            }
        } else if(yuvImage == null) {
            yuvImage = new Frame(imageWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
            Log.i(LOG_TAG, ""create yuvImage"");
        }

        Log.i(LOG_TAG, ""ffmpeg_url: "" + ffmpeg_link.getAbsolutePath());
        recorder = new FFmpegFrameRecorder(ffmpeg_link, imageWidth, imageHeight, 1);
        recorder.setFormat(""mp4"");
        recorder.setSampleRate(sampleAudioRateInHz);
        // Set in the surface changed method
        recorder.setFrameRate(frameRate);

        Log.i(LOG_TAG, ""recorder initialize success"");

        audioRecordRunnable = new AudioRecordRunnable();
        audioThread = new Thread(audioRecordRunnable);
        runAudioThread = true;
    }

    public void startRecording() {
        initRecorder();

        try {
            recorder.start();
            startTime = System.currentTimeMillis();
            recording = true;
            audioThread.start();
        } catch(FFmpegFrameRecorder.Exception e) {
            e.printStackTrace();
        }
    }

    public void stopRecording() {

        runAudioThread = false;
        try {
            audioThread.join();
        } catch(InterruptedException e) {
            e.printStackTrace();
        }
        audioRecordRunnable = null;
        audioThread = null;

        if(recorder != null &amp;&amp; recording) {
            if(RECORD_LENGTH &gt; 0) {
                Log.v(LOG_TAG, ""Writing frames"");
                try {
                    int firstIndex = imagesIndex % samples.length;
                    int lastIndex = (imagesIndex - 1) % images.length;
                    if(imagesIndex &lt;= images.length) {
                        firstIndex = 0;
                        lastIndex = imagesIndex - 1;
                    }
                    if((startTime = timestamps[lastIndex] - RECORD_LENGTH * 1000000L) &lt; 0) {
                        startTime = 0;
                    }
                    if(lastIndex &lt; firstIndex) {
                        lastIndex += images.length;
                    }
                    for(int i = firstIndex; i &lt;= lastIndex; i++) {
                        long t = timestamps[i % timestamps.length] - startTime;
                        if(t &gt;= 0) {
                            if(t &gt; recorder.getTimestamp()) {
                                recorder.setTimestamp(t);
                            }
                            recorder.record(images[i % images.length]);
                        }
                    }

                    firstIndex = samplesIndex % samples.length;
                    lastIndex = (samplesIndex - 1) % samples.length;
                    if(samplesIndex &lt;= samples.length) {
                        firstIndex = 0;
                        lastIndex = samplesIndex - 1;
                    }
                    if(lastIndex &lt; firstIndex) {
                        lastIndex += samples.length;
                    }
                    for(int i = firstIndex; i &lt;= lastIndex; i++) {
                        recorder.recordSamples(samples[i % samples.length]);
                    }
                } catch(FFmpegFrameRecorder.Exception e) {
                    Log.v(LOG_TAG, e.getMessage());
                    e.printStackTrace();
                }
            }

            recording = false;
            Log.v(LOG_TAG, ""Finishing recording, calling stop and release on recorder"");
            try {
                recorder.stop();
                recorder.release();
            } catch(FFmpegFrameRecorder.Exception e) {
                e.printStackTrace();
            }
            recorder = null;
        }
    }

    @Override
    public void onClick(View v) {
        if(!recording) {
            startRecording();
            Log.w(LOG_TAG, ""Start Button Pushed"");
            btnRecorderControl.setText(""Stop"");
        } else {
            // This will trigger the audio recording loop to stop and then set isRecorderStart = false;
            stopRecording();
            Log.w(LOG_TAG, ""Stop Button Pushed"");
            btnRecorderControl.setText(""Start"");
        }
    }

    //---------------------------------------------
    // audio thread, gets and encodes audio data
    //---------------------------------------------
    class AudioRecordRunnable implements Runnable {

        @Override
        public void run() {
            android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

            // Audio
            int bufferSize;
            ShortBuffer audioData;
            int bufferReadResult;

            bufferSize = AudioRecord.getMinBufferSize(sampleAudioRateInHz,
                                                      AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
            audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleAudioRateInHz,
                                          AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);

            if(RECORD_LENGTH &gt; 0) {
                samplesIndex = 0;
                samples = new ShortBuffer[RECORD_LENGTH * sampleAudioRateInHz * 2 / bufferSize + 1];
                for(int i = 0; i &lt; samples.length; i++) {
                    samples[i] = ShortBuffer.allocate(bufferSize);
                }
            } else {
                audioData = ShortBuffer.allocate(bufferSize);
            }

            Log.d(LOG_TAG, ""audioRecord.startRecording()"");
            audioRecord.startRecording();

            /* ffmpeg_audio encoding loop */
            while(runAudioThread) {
                if(RECORD_LENGTH &gt; 0) {
                    audioData = samples[samplesIndex++ % samples.length];
                    audioData.position(0).limit(0);
                }
                //Log.v(LOG_TAG,""recording? "" + recording);
                bufferReadResult = audioRecord.read(audioData.array(), 0, audioData.capacity());
                audioData.limit(bufferReadResult);
                if(bufferReadResult &gt; 0) {
                    Log.v(LOG_TAG, ""bufferReadResult: "" + bufferReadResult);
                    // If ""recording"" isn't true when start this thread, it never get's set according to this if statement...!!!
                    // Why?  Good question...
                    if(recording) {
                        if(RECORD_LENGTH &lt;= 0) {
                            try {
                                recorder.recordSamples(audioData);
                                //Log.v(LOG_TAG,""recording "" + 1024*i + "" to "" + 1024*i+1024);
                            } catch(FFmpegFrameRecorder.Exception e) {
                                Log.v(LOG_TAG, e.getMessage());
                                e.printStackTrace();
                            }
                        }
                    }
                }
            }
            Log.v(LOG_TAG, ""AudioThread Finished, release audioRecord"");

            /* encoding finish, release recorder */
            if(audioRecord != null) {
                audioRecord.stop();
                audioRecord.release();
                audioRecord = null;
                Log.v(LOG_TAG, ""audioRecord released"");
            }
        }
    }

    //---------------------------------------------
    // camera thread, gets and encodes video data
    //---------------------------------------------
    class CameraView extends SurfaceView implements SurfaceHolder.Callback, PreviewCallback {

        private SurfaceHolder mHolder;
        private Camera mCamera;

        public CameraView(Context context, Camera camera) {
            super(context);
            Log.w(""camera"", ""camera view"");
            mCamera = camera;
            mHolder = getHolder();
            mHolder.addCallback(CameraView.this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            mCamera.setPreviewCallback(CameraView.this);
        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            try {
                stopPreview();
                mCamera.setPreviewDisplay(holder);
            } catch(IOException exception) {
                mCamera.release();
                mCamera = null;
            }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            Camera.Parameters camParams = mCamera.getParameters();
            List&lt;Camera.Size&gt; sizes = camParams.getSupportedPreviewSizes();
            // Sort the list in ascending order
            Collections.sort(sizes, new Comparator&lt;Camera.Size&gt;() {

                public int compare(final Camera.Size a, final Camera.Size b) {
                    return a.width * a.height - b.width * b.height;
                }
            });

            // Pick the first preview size that is equal or bigger, or pick the last (biggest) option if we cannot
            // reach the initial settings of imageWidth/imageHeight.
            for(int i = 0; i &lt; sizes.size(); i++) {
                if((sizes.get(i).width &gt;= imageWidth &amp;&amp; sizes.get(i).height &gt;= imageHeight) || i == sizes.size() - 1) {
                    imageWidth = sizes.get(i).width;
                    imageHeight = sizes.get(i).height;
                    Log.v(LOG_TAG, ""Changed to supported resolution: "" + imageWidth + ""x"" + imageHeight);
                    break;
                }
            }
            camParams.setPreviewSize(imageWidth, imageHeight);

            Log.v(LOG_TAG, ""Setting imageWidth: "" + imageWidth + "" imageHeight: "" + imageHeight + "" frameRate: "" + frameRate);

            camParams.setPreviewFrameRate(frameRate);
            Log.v(LOG_TAG, ""Preview Framerate: "" + camParams.getPreviewFrameRate());

            mCamera.setParameters(camParams);
            startPreview();
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            try {
                mHolder.addCallback(null);
                mCamera.setPreviewCallback(null);
            } catch(RuntimeException e) {
                // The camera has probably just been released, ignore.
            }
        }

        public void startPreview() {
            if(!isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = true;
                mCamera.startPreview();
            }
        }

        public void stopPreview() {
            if(isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = false;
                mCamera.stopPreview();
            }
        }

        @Override
        public void onPreviewFrame(byte[] data, Camera camera) {
            if(audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
                startTime = System.currentTimeMillis();
                return;
            }
            if(RECORD_LENGTH &gt; 0) {
                int i = imagesIndex++ % images.length;
                yuvImage = images[i];
                timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);
            }
            /* get video data */
            if(yuvImage != null &amp;&amp; recording) {
                ((ByteBuffer) yuvImage.image[0].position(0)).put(data);

                if(RECORD_LENGTH &lt;= 0) {
                    try {
                        Log.v(LOG_TAG, ""Writing Frame"");
                        long t = 1000 * (System.currentTimeMillis() - startTime);
                        if(t &gt; recorder.getTimestamp()) {
                            recorder.setTimestamp(t);
                        }
                        opencv_core.IplImage toBeRotated = converter.convert(yuvImage);
                        toBeRotated = rotate(toBeRotated, -90);
                        Frame newFrame = converter.convert(toBeRotated);
                        opencv_core.cvReleaseImage(toBeRotated);
                        recorder.record(newFrame);
//                        recorder.record(yuvImage);
                    } catch(FFmpegFrameRecorder.Exception e) {
                        Log.v(LOG_TAG, e.getMessage());
                        e.printStackTrace();
                    }
                }
            }
        }
    }

    public static opencv_core.IplImage rotate(opencv_core.IplImage image, double angle) {
        opencv_core.IplImage copy = opencv_core.cvCloneImage(image);

        double radians = Math.toRadians(angle);
        double sin = Math.abs(Math.sin(radians));
        double cos = Math.abs(Math.cos(radians));

        int newWidth = (int) (copy.width() * cos + copy.height() * sin);
        int newHeight = (int) (copy.width() * sin + copy.height() * cos);

        int[] newWidthHeight = {newWidth, newHeight};

        opencv_core.CvSize size = new opencv_core.CvSize(copy.height(), copy.width());

        opencv_core.IplImage rotatedImage = opencv_core.cvCreateImage(size, copy.depth(), copy.nChannels());
        opencv_core.CvMat mapMatrix = opencv_core.cvCreateMat( 2, 3, opencv_core.CV_32FC1 );

        //Define Mid Point
        opencv_core.CvPoint2D32f centerPoint = new opencv_core.CvPoint2D32f();
        centerPoint.x(copy.width()/2);
        centerPoint.y(copy.width()/2);

        //Get Rotational Matrix
        opencv_imgproc.cv2DRotationMatrix(centerPoint, angle, 1, mapMatrix);

        opencv_imgproc.cvWarpAffine(copy, rotatedImage, mapMatrix, opencv_imgproc.CV_INTER_CUBIC +  opencv_imgproc.CV_WARP_FILL_OUTLIERS, opencv_core.cvScalarAll(170));
        opencv_core.cvReleaseImage(copy);
        opencv_core.cvReleaseMat(mapMatrix);
        return rotatedImage;
    }
}
</code></pre>
",,2017-02-14 09:00:14,JavaCV video recorder orientation is not proper in portrait mode,<android><rotation><android-camera><video-capture><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
37011,33556182,2015-11-05 22:41:33,,"<p>I am looking for a lossless video compression in OpenCL. It has to be lossless as it is a project requirement. Found a few lossless algorithm written in OpenCV and ffmpeg but none of them supports OpenCL encoding/decoding. I am using Apple computers and they come with ATI graphics card which does not support CUDA.</p>

<p>Any help would be most appreciated.</p>
",2015-11-06 11:33:25,2015-11-06 17:58:54,OpenCL lossless video compression,<opencv><opencl><gpu><video-encoding><lossless-compression>,,,CC BY-SA 3.0,True,False,False,False,True
37019,33517665,2015-11-04 09:06:18,,"<p>Any one know any solution or library which helps to merge an image with video file? I researched some libraries as OpenCV, FFmpeg, but they seem not help my case. </p>
",,2015-11-04 09:33:49,Merge Image with Video in Android,<android><image-processing><video>,,,CC BY-SA 3.0,True,False,False,False,True
37187,33700404,2015-11-13 19:29:11,,"<p>I get reports of this crash from users of my app on Galaxy Note devices running Android Lollipop (might happen on other devices but the majority of my users have Galaxy Note because it's a drawing app). Below is the relevant code from my ASyncTask which exports a series of images (plus audio) to a video file using JavaCV/FFmpeg, and the stack trace from the reported crash. It works fine on my Note 8.0 running KitKat (there's no Lollipop update available for that device), and works fine in Lollipop on the emulator, so I'm having a hard time tracking down the cause and don't know what to do.</p>

<pre><code>@Override
protected String doInBackground(final File... params) {
    FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(params[0],canvas_width,canvas_height, 0);
    FrameGrabber audiograbber = null;
    if(audio!=null) audiograbber = new FFmpegFrameGrabber(audio);
    Frame audioframe;
    Frame image;
    AndroidFrameConverter converter = new AndroidFrameConverter();

    try {
        recorder.setVideoCodec(avcodec.AV_CODEC_ID_H264);
        recorder.setFrameRate(framerate);
        recorder.setPixelFormat(0);
        if(audio!=null) {
            audiograbber.setFrameRate(framerate);
            audiograbber.start();
            recorder.setAudioChannels(audiograbber.getAudioChannels());
            recorder.setSampleRate(audiograbber.getSampleRate());
        }
        recorder.start();

        Bitmap drawframe = createBitmap(canvas_width, canvas_height, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(drawframe);
        Paint p = new Paint();

        for(int frame=0; frame&lt;movielength; frame++) {
            if(isCancelled()) break;
            publishProgress(frame);

            //code to draw image

            image = converter.convert(drawframe);
            recorder.record(image);
        }

        if(isCancelled()) {
            bgbitmap.recycle();
            drawframe.recycle();
            return ""Cancelled"";
        }

        if(audio!=null) {
            while((audioframe = audiograbber.grabFrame()) != null) {
                recorder.record(audioframe);
            }
        }

        recorder.stop();
        bgbitmap.recycle();
        drawframe.recycle();
        if(audio!=null) audiograbber.stop();
        return ""Saved ""+params[0];
    } catch (Exception e) {
        e.printStackTrace();
    }
    return ""Failed"";
}
</code></pre>

<p>-</p>

<pre><code>*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
Build fingerprint: 'samsung/treltexx/trelte:5.1.1/LMY47X/N910CXXU1COH4:user/release-keys'
Revision: '21'
ABI: 'arm'
pid: 12039, tid: 12053, name: GCDaemon  &gt;&gt;&gt; com.weirdhat.roughanimator &lt;&lt;&lt;
signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------
Abort message: 'sart/runtime/gc/collector/mark_sweep.cc:381] Can't mark invalid object'
    r0 00000000  r1 00002f15  r2 00000006  r3 00000000
    r4 b366bdb8  r5 00000006  r6 00000002  r7 0000010c
    r8 00000001  r9 b446f550  sl b4429000  fp 9a975c60
    ip 00002f15  sp b366b008  lr b6db9cb9  pc b6ddd3ac  cpsr 60070010

backtrace:
    #00 pc 0003b3ac  /system/lib/libc.so (tgkill+12)
    #01 pc 00017cb5  /system/lib/libc.so (pthread_kill+52)
    #02 pc 000188c7  /system/lib/libc.so (raise+10)
    #03 pc 00015165  /system/lib/libc.so (__libc_android_abort+36)
    #04 pc 00012fac  /system/lib/libc.so (abort+4)
    #05 pc 00242f17  /system/lib/libart.so (art::Runtime::Abort()+170)
    #06 pc 000ad991  /system/lib/libart.so (art::LogMessage::~LogMessage()+1360)
    #07 pc 0013ec53  /system/lib/libart.so (bool art::gc::accounting::HeapBitmap::AtomicTestAndSet&lt;art::gc::collector::MarkSweepMarkObjectSlowPath&gt;(art::mirror::Object const*, art::gc::collector::MarkSweepMarkObjectSlowPath const&amp;)+422)
    #08 pc 0013ed27  /system/lib/libart.so (art::gc::collector::MarkSweep::MarkObjectParallel(art::mirror::Object const*)+142)
    #09 pc 0013ff23  /system/lib/libart.so (art::gc::collector::MarkSweep::MarkRootParallelCallback(art::mirror::Object**, void*, art::RootInfo const&amp;)+26)
    #10 pc 0025893d  /system/lib/libart.so (art::ReferenceMapVisitor&lt;art::RootCallbackVisitor&gt;::VisitQuickFrame()+1024)
    #11 pc 00258cad  /system/lib/libart.so (art::ReferenceMapVisitor&lt;art::RootCallbackVisitor&gt;::VisitFrame()+224)
    #12 pc 0024c8e9  /system/lib/libart.so (art::StackVisitor::WalkStack(bool)+276)
    #13 pc 0024e617  /system/lib/libart.so (art::Thread::VisitRoots(void (*)(art::mirror::Object**, void*, art::RootInfo const&amp;), void*)+994)
    #14 pc 0013ef9f  /system/lib/libart.so (art::gc::collector::CheckpointMarkThreadRoots::Run(art::Thread*)+126)
    #15 pc 0025b44d  /system/lib/libart.so (art::ThreadList::RunCheckpoint(art::Closure*)+296)
    #16 pc 0013dc0d  /system/lib/libart.so (art::gc::collector::MarkSweep::MarkRootsCheckpoint(art::Thread*, bool)+96)
    #17 pc 0014165d  /system/lib/libart.so (art::gc::collector::MarkSweep::PreCleanCards()+172)
    #18 pc 001417d3  /system/lib/libart.so (art::gc::collector::MarkSweep::MarkingPhase()+126)
    #19 pc 001418b9  /system/lib/libart.so (art::gc::collector::MarkSweep::RunPhases()+176)
    #20 pc 00138527  /system/lib/libart.so (art::gc::collector::GarbageCollector::Run(art::gc::GcCause, bool)+246)
    #21 pc 0015865b  /system/lib/libart.so (art::gc::Heap::CollectGarbageInternal(art::gc::collector::GcType, art::gc::GcCause, bool)+1426)
    #22 pc 00159af5  /system/lib/libart.so (art::gc::Heap::ConcurrentGC(art::Thread*)+56)
    #23 pc 000003ef  /system/framework/arm/boot.oat
</code></pre>
",,2015-11-13 19:29:11,JavaCV/FFmpeg causes crash only on Lollipop,<android><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
37192,33669457,2015-11-12 10:36:03,,"<p>I am trying to record video in 480*480 resolution like in vine using javacv. As a starting point I used the sample provided in <a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow noreferrer"">https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java</a> Video is getting recorded (but not in the desired resolution) and saved.</p>

<p>But the issue is that 480*480 resolution is not supported natively in android. So some pre processing needs to be done to get the video in desired resolution.</p>

<p>So once I was able to record video using code sample provided by javacv, next challenge was on how to pre process the video. On research it was found that efficient cropping is possible when final image width required is same as recorded image width. Such a solution was provided in the SO question,<a href=""https://stackoverflow.com/questions/20510130/recording-video-on-android-using-javacv-updated-2014-02-17"">Recording video on Android using JavaCV (Updated 2014 02 17)</a>. I changed onPreviewFrame method as suggested in that answer.</p>

<pre><code>    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
            startTime = System.currentTimeMillis();
            return;
        }
        if (RECORD_LENGTH &gt; 0) {
            int i = imagesIndex++ % images.length;
            yuvImage = images[i];
            timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);
        }
        /* get video data */
        imageWidth = 640;
        imageHeight = 480    
        int finalImageHeight = 360;
        if (yuvImage != null &amp;&amp; recording) {
            ByteBuffer bb = (ByteBuffer)yuvImage.image[0].position(0); // resets the buffer
            final int startY = imageWidth*(imageHeight-finalImageHeight)/2;
            final int lenY = imageWidth*finalImageHeight;
            bb.put(data, startY, lenY);
            final int startVU = imageWidth*imageHeight + imageWidth*(imageHeight-finalImageHeight)/4;
            final int lenVU = imageWidth* finalImageHeight/2;
            bb.put(data, startVU, lenVU);
            try {
                long t = 1000 * (System.currentTimeMillis() - startTime);
                if (t &gt; recorder.getTimestamp()) {
                    recorder.setTimestamp(t);
                }
                recorder.record(yuvImage);
            } catch (FFmpegFrameRecorder.Exception e) {
                Log.e(LOG_TAG, ""problem with recorder():"", e);
            }
        }


    }
}
</code></pre>

<p>Please also note that this solution was provided for an older version of javacv. The resulting video had a yellowish overlay covering 2/3rd part. Also there was empty section on left side as the video was not cropped correctly. </p>

<p>So my question is what is the most appropriate solution for cropping videos using latest version of javacv?</p>

<p><strong>Code after making change as suggested by Alex Cohn</strong></p>

<pre><code>    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
            startTime = System.currentTimeMillis();
            return;
        }
        if (RECORD_LENGTH &gt; 0) {
            int i = imagesIndex++ % images.length;
            yuvImage = images[i];
            timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);
        }
        /* get video data */
        imageWidth = 640;
        imageHeight = 480;       
        destWidth = 480;

        if (yuvImage != null &amp;&amp; recording) {
            ByteBuffer bb = (ByteBuffer)yuvImage.image[0].position(0); // resets the buffer
            int start = 2*((imageWidth-destWidth)/4); // this must be even
            for (int row=0; row&lt;imageHeight*3/2; row++) {
                bb.put(data, start, destWidth);
                start += imageWidth;
            }
            try {
                long t = 1000 * (System.currentTimeMillis() - startTime);
                if (t &gt; recorder.getTimestamp()) {
                    recorder.setTimestamp(t);
                }
                recorder.record(yuvImage);
            } catch (FFmpegFrameRecorder.Exception e) {
                Log.e(LOG_TAG, ""problem with recorder():"", e);
            }
        }


    }
</code></pre>

<p>Screen shot from video generated with this code (destWidth 480) is </p>

<p><a href=""https://i.stack.imgur.com/J1qP7.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/J1qP7.png"" alt=""video resolution 480*480""></a></p>

<p>Next I tried capturing a video with destWidth speciified as 639. The result is </p>

<p><a href=""https://i.stack.imgur.com/wTswU.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/wTswU.png"" alt=""639*480""></a></p>

<p>When destWidth is 639 video is repeating contents twice. When it is 480, contents are repeated 5 times and the green overlay and distortion is more.</p>

<p>Also When the destWidth = imageWidth, video is captured properly. ie, for 640*480 there is no repetition of video contents and no green overlay.</p>

<p><strong>Converting frame to IplImage</strong></p>

<p>When this question was asked first, I missed to mention that the record method in FFmpegFrameRecorder is now accepting object of type Frame whereas earlier it was IplImage object. So I tried to apply Alex Cohn's solution by converting Frame to IplImage.</p>

<pre><code>//---------------------------------------
// initialize ffmpeg_recorder
//---------------------------------------
private void initRecorder() {

    Log.w(LOG_TAG,""init recorder"");

    imageWidth = 640;
    imageHeight = 480; 

    if (RECORD_LENGTH &gt; 0) {
        imagesIndex = 0;
        images = new Frame[RECORD_LENGTH * frameRate];
        timestamps = new long[images.length];
        for (int i = 0; i &lt; images.length; i++) {
            images[i] = new Frame(imageWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
            timestamps[i] = -1;
        }
    } else if (yuvImage == null) {
        yuvImage = new Frame(imageWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
        Log.i(LOG_TAG, ""create yuvImage"");
        OpenCVFrameConverter.ToIplImage converter = new OpenCVFrameConverter.ToIplImage();
        yuvIplimage = converter.convert(yuvImage);

    }

    Log.i(LOG_TAG, ""ffmpeg_url: "" + ffmpeg_link);
    recorder = new FFmpegFrameRecorder(ffmpeg_link, imageWidth, imageHeight, 1);
    recorder.setFormat(""flv"");
    recorder.setSampleRate(sampleAudioRateInHz);
    // Set in the surface changed method
    recorder.setFrameRate(frameRate);

    Log.i(LOG_TAG, ""recorder initialize success"");

    audioRecordRunnable = new AudioRecordRunnable();
    audioThread = new Thread(audioRecordRunnable);
    runAudioThread = true;
}



@Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
            startTime = System.currentTimeMillis();
            return;
        }
        if (RECORD_LENGTH &gt; 0) {
            int i = imagesIndex++ % images.length;
            yuvImage = images[i];
            timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);
        }
        /* get video data */
        int destWidth = 640;

        if (yuvIplimage != null &amp;&amp; recording) {
            ByteBuffer bb = yuvIplimage.getByteBuffer(); // resets the buffer
            int start = 2*((imageWidth-destWidth)/4); // this must be even
            for (int row=0; row&lt;imageHeight*3/2; row++) {
                bb.put(data, start, destWidth);
                start += imageWidth;
            }
            try {
                long t = 1000 * (System.currentTimeMillis() - startTime);
                if (t &gt; recorder.getTimestamp()) {
                    recorder.setTimestamp(t);
                }
                recorder.record(yuvImage);
            } catch (FFmpegFrameRecorder.Exception e) {
                Log.e(LOG_TAG, ""problem with recorder():"", e);
            }
        }


    }
</code></pre>

<p>But the videos generated with this method contained only green frames.</p>
",2015-11-13 12:22:21,2015-11-16 10:40:36,Issue in recording video,<android><opencv><video><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
37451,33647145,2015-11-11 08:59:10,,"<p>I have created a Unity Plugin for all the major platforms, but I am having an issue with the Windows version, which was built using <code>OpenCV 2411</code> on windows 10.  I pass an <code>cv:Mat Ptr()</code> to a <code>ID3D11Texture2D</code>, and it works splendidly when opencv is installed on the system.</p>

<p>I then began to remove any environment variables pointing to OpenCV, and dropped all of the dlls into the <code>Plugins/x86_64</code> folder as this is for the 64 bit Unity Editor.  I also renamed my OpenCV folder so that any pathing to it would be broken.  I wanted to see what someone that doesn't have OpenCV installed would experience.  When I hit play, everything was gray, but no Dll Exceptions!  So I then renamed my OpenCV installation folder back to it's original name, closed and opened unity, and then hit play and it worked. Once a dll is loaded in unity, you have to close and re-open it, to see changes.</p>

<p>It was time to start removing files and see which was still dependent.  I have narrowed it down to one file, <code>opencv_ffmpeg2411_64.dll</code>.  Every other file can be removed related to opencv and it will work using the dlls in the unity plugin folder.  <code>opencv_ffmpeg2411_64.dll</code> is in the same folder as the rest of the dlls, but it will only work if <code>opencv_ffmpeg2411_64.dll</code> is in <code>c:\opencv\2411\...</code></p>

<p>Any ideas on why this one file has to be in the original installation directory and ignored in the <code>Plugins/x86_64</code> folder where the other opencv dlls are?</p>

<p>I have read every site related the the subject that I can find.  Some suggest static libraries, some have other solutions.  I see many opencv plugins using Dlls as opposed to static libs because of the order unity searches for the libraries in.</p>

<p>I am very close and would appreciate a nudge.  I have never really learned much about dll dependencies.</p>
",2015-11-11 15:06:02,2015-11-11 15:06:02,Unity OpenCV 2.4.x plugin portability issue,<opencv><dll><plugins><unity3d><unity5>,,,CC BY-SA 3.0,True,True,False,False,True
37530,33915200,2015-11-25 11:21:30,,"<p>I am trying to build a video capture application. As a reference I am using <a href=""https://github.com/sourab-sharma/TouchToRecord"" rel=""nofollow"">https://github.com/sourab-sharma/TouchToRecord</a>. In this ffmpeg commands are run from ""<a href=""https://github.com/sourab-sharma/TouchToRecord/blob/master/JavaCvVideoRecorder/src/co/vine/android/recorder/FFmpegInvoke.java"" rel=""nofollow"">FFmpegInvoke</a>"" class. When this project is run without any modification it is working as expected.</p>

<p>But it is using older version of JavaCV. On using latest JavaCV(1.1), build fails saying that libffmpeginvoke could not be found. In ""TouchToRecord"" project he seems to be using libffmpeginvoke from vine.</p>

<p>So my question is, can we run ffmpeg commands directly using JavaCV? Please note that in the reference project ffmpeg commands are invoked by creating an instance of <a href=""https://github.com/sourab-sharma/TouchToRecord/blob/master/JavaCvVideoRecorder/src/co/vine/android/recorder/FFmpegInvoke.java"" rel=""nofollow"">FFmpegInvoke</a> in <a href=""https://github.com/sourab-sharma/TouchToRecord/blob/d8d629e89d30c1a8588f404c4f40c56dd1565716/JavaCvVideoRecorder/src/com/javacv/recorder/Processor.java"" rel=""nofollow"">Processor</a> class and command is executed from process method of Processor class.</p>
",2015-11-25 13:19:02,2016-01-18 18:36:39,Invoke ffmpeg commands from javacv,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
37568,33917679,2015-11-25 13:25:48,,"<p>""make opencv_modules"" command gives this error:</p>

<p>cannot convert ‘uint8_t* {aka unsigned char*}’ to ‘AVPacket*’ for argument ‘2’ to ‘int avcodec_encode_video2(AVCodecContext*, AVPacket*, const AVFrame*, int*)’</p>
",,2015-11-25 13:25:48,What are the arguments i need to add in avcodec_encode_video2() in order to obtain the same result like the previous one(avcodec_encode_video),<opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
37635,33733144,2015-11-16 10:30:07,,"<p>I'm using OpenCV with Python, but actually can switch to C++, so if it's matter please answer question considering it.</p>

<p>I'm writing .avi file(joining multiple avi files into one) using </p>

<pre><code>cv2.VideoWriter([filename, fourcc, fps, frameSize[, isColor]]) 
</code></pre>

<p>but recently found out that I can't write .avi file larger than 2 GB with it. It even mentioned there: <a href=""http://docs.opencv.org/2.4/doc/tutorials/highgui/video-write/video-write.html"" rel=""nofollow"">Due to this OpenCV for video containers supports only the avi extension, its first version. A direct limitation of this is that you cannot save a video file larger than 2 GB.</a></p>

<p>But right now I've got no time to learn new library like ffmpeg, I need to do it very fast.</p>

<p>How can I write this file, using C++ or Python with knowledge of OpenCV, or at least with input part - using</p>

<pre><code>cv::Mat 
</code></pre>

<p>as frames</p>
",2015-11-16 10:38:37,2016-08-12 17:35:51,How to write avi file with OpenCV larger than 2 GB?,<python><c++><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
37637,33734167,2015-11-16 11:22:18,,"<p>How to use JavaCV on Android ? My main objective is to apply grayscale/other image effect on video.I am aware of ffmpeg to apply the commands but that requires NDK and I don't want to use NDK.</p>
",,2015-11-16 11:37:01,JavaCV on Android,<android><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
37682,34063847,2015-12-03 10:43:13,,"<p>I am trying to implement a tap to record feature like in vine. A sample for handling recording (not touch to record) provided in javacv is <a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow"">https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java</a>. I am trying to modify it so that in onPreviewFrame method frames are added to buffer only when user has his finger placed on screen. These frames are then tried to be combined into final video in stopRecording method. </p>

<p>The issue is that if I set the timestamp as given in below code snippet (in stopRecording method)</p>

<pre><code>if (t &gt; recorder.getTimestamp()) 
{
    recorder.setTimestamp(t);
}
</code></pre>

<p>the behavior is as below</p>

<p><strong>Case 1</strong></p>

<p>If I tap on screen to record for 2 seconds and take the finger away from screen for 3 seconds and then again place finger back on screen to record for another 4 seconds the resulting video is like,</p>

<p>For 1st 2 seconds video has recorded content. For next 3 seconds (time when finger is put away from screen). video just shows the last frame recorded when finger was placed on screen last. Then the video has recorded video content for next 4 seconds. So there seems to be an issue in handling video recording when finger is removed from screen.</p>

<p><strong>Case 2</strong></p>

<p>Next I removed the code setting time stamp to recorder(the code snippet given above) in stopRecording method. </p>

<p>Now the resulting video (for the same steps tried in case 1) does not contain the middle 3 seconds(which is what is required) when finger was taken away from screen. But video is playing at a faster rate. So it seems that we need to set time stamp so that video plays at normal rate.</p>

<p>Full code of my activity is given below. (Please note that video recording is mainly handled from onPreviewFrame and stopRecording methods)</p>

<pre><code>public class TouchToRecordActivity extends Activity implements OnClickListener, View.OnTouchListener {

private final static String CLASS_LABEL = ""TouchToRecordActivity"";
private final static String LOG_TAG = CLASS_LABEL;

private String ffmpeg_link = ""/mnt/sdcard/stream.mp4"";

long startTime = 0;
boolean recording = false;
boolean rec = false;

private FFmpegFrameRecorder recorder;

private boolean isPreviewOn = false;

private int sampleAudioRateInHz = 44100;
private int imageWidth = 640;
private int imageHeight = 480;
private int destWidth = 480;
private int frameRate = 30;

/* audio data getting thread */
private AudioRecord audioRecord;
private AudioRecordRunnable audioRecordRunnable;
private Thread audioThread;
volatile boolean runAudioThread = true;

/* video data getting thread */
private Camera cameraDevice;
private CameraView cameraView;

private Frame yuvImage = null;

/* layout setting */
private final int bg_screen_bx = 232;
private final int bg_screen_by = 128;
private final int bg_screen_width = 700;
private final int bg_screen_height = 500;
private final int bg_width = 1123;
private final int bg_height = 715;
private final int live_width = 640;
private final int live_height = 480;
private int screenWidth, screenHeight;
private Button btnRecorderControl;

/* The number of seconds in the continuous record loop (or 0 to disable loop). */
final int RECORD_LENGTH = 20;
Frame[] images;
long[] timestamps;
ShortBuffer[] samples;
int imagesIndex, samplesIndex;

long firstTime = 0;
long startPauseTime = 0;
long totalPauseTime = 0;
long pausedTime = 0;
long stopPauseTime = 0;
long totalTime = 0;

long totalRecordedTS = 0;

private TextView txtTimer;
private Handler mHandler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    setContentView(R.layout.touch_main);

    initLayout();
}

@Override
protected void onDestroy() {
    super.onDestroy();

    recording = false;

    if (cameraView != null) {
        cameraView.stopPreview();
    }

    if (cameraDevice != null) {
        cameraDevice.stopPreview();
        cameraDevice.release();
        cameraDevice = null;
    }
}


private void initLayout() {

    /* get size of screen */
    Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    screenWidth = display.getWidth();
    screenHeight = display.getHeight();
    RelativeLayout.LayoutParams layoutParam = null;
    LayoutInflater myInflate = null;
    myInflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    RelativeLayout topLayout = new RelativeLayout(this);
    setContentView(topLayout);
    LinearLayout preViewLayout = (LinearLayout) myInflate.inflate(R.layout.touch_main, null);
    layoutParam = new RelativeLayout.LayoutParams(screenWidth, screenHeight);
    topLayout.addView(preViewLayout, layoutParam);

    txtTimer = (TextView) preViewLayout.findViewById(R.id.txtTimer);

    /* add control button: start and stop */
    btnRecorderControl = (Button) findViewById(R.id.recorder_control);
    btnRecorderControl.setText(""Start"");
    btnRecorderControl.setOnClickListener(this);

    /* add camera view */
    int display_width_d = (int) (1.0 * bg_screen_width * screenWidth / bg_width);
    int display_height_d = (int) (1.0 * bg_screen_height * screenHeight / bg_height);
    int prev_rw, prev_rh;
    if (1.0 * display_width_d / display_height_d &gt; 1.0 * live_width / live_height) {
        prev_rh = display_height_d;
        prev_rw = (int) (1.0 * display_height_d * live_width / live_height);
    } else {
        prev_rw = display_width_d;
        prev_rh = (int) (1.0 * display_width_d * live_height / live_width);
    }
    layoutParam = new RelativeLayout.LayoutParams(prev_rw, prev_rh);
    layoutParam.topMargin = (int) (1.0 * bg_screen_by * screenHeight / bg_height);
    layoutParam.leftMargin = (int) (1.0 * bg_screen_bx * screenWidth / bg_width);

    cameraDevice = Camera.open();
    Log.i(LOG_TAG, ""cameara open"");
    cameraView = new CameraView(this, cameraDevice);
    topLayout.addView(cameraView, layoutParam);
    topLayout.setOnTouchListener(this);
    Log.i(LOG_TAG, ""cameara preview start: OK"");
}

//---------------------------------------
// initialize ffmpeg_recorder
//---------------------------------------
private void initRecorder() {

    Log.w(LOG_TAG, ""init recorder"");

    if (RECORD_LENGTH &gt; 0) {
        imagesIndex = 0;
        images = new Frame[RECORD_LENGTH * frameRate];
        timestamps = new long[images.length];
        for (int i = 0; i &lt; images.length; i++) {
            images[i] = new Frame(destWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
            timestamps[i] = -1;
        }
    } else if (yuvImage == null) {
        yuvImage = new Frame(destWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
        Log.i(LOG_TAG, ""create yuvImage"");
    }
    Log.i(LOG_TAG, ""ffmpeg_url: "" + ffmpeg_link);
    recorder = new FFmpegFrameRecorder(ffmpeg_link, destWidth, imageHeight, 1);
    recorder.setFormat(""mp4"");
    recorder.setVideoCodecName(""libx264"");
    recorder.setSampleRate(sampleAudioRateInHz);
    // Set in the surface changed method
    recorder.setFrameRate(frameRate);

    Log.i(LOG_TAG, ""recorder initialize success"");

    audioRecordRunnable = new AudioRecordRunnable();
    audioThread = new Thread(audioRecordRunnable);
    runAudioThread = true;
}

public void startRecording() {

    initRecorder();

    mHandler.removeCallbacks(mUpdateTimeTask);
    mHandler.postDelayed(mUpdateTimeTask, 100);

    try {
        recorder.start();
        startTime = System.currentTimeMillis();
        recording = true;
        audioThread.start();

    } catch (FFmpegFrameRecorder.Exception e) {
        e.printStackTrace();
    }
}

public void stopRecording() {

    runAudioThread = false;
    try {
        audioThread.join();
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    audioRecordRunnable = null;
    audioThread = null;

    if (recorder != null &amp;&amp; recording) {
        if (RECORD_LENGTH &gt; 0) {
            Log.v(LOG_TAG, ""Writing frames"");
            try {
                int firstIndex = imagesIndex % samples.length;
                int lastIndex = (imagesIndex - 1) % images.length;
                if (imagesIndex &lt;= images.length) {
                    firstIndex = 0;
                    lastIndex = imagesIndex - 1;
                }
                if ((startTime = timestamps[lastIndex] - RECORD_LENGTH * 1000000L) &lt; 0) {
                    startTime = 0;
                }
                if (lastIndex &lt; firstIndex) {
                    lastIndex += images.length;
                }
                int videoCounter = 0;
                for (int i = firstIndex; i &lt;= lastIndex; i++) {
                    if (timestamps[i] == -1) {
                        Log.v(LOG_TAG, ""frame not recorded"");
                    }
                    if (timestamps[i] != -1) {
                        long t = timestamps[i % timestamps.length] - startTime;
                        if (t &gt;= 0) {

                            videoCounter++;

                            /*if (((i % images.length) != 0) &amp;&amp; images[i % images.length] != images[(i % images.length) - 1]) {
                                if (t &gt; recorder.getTimestamp()) {
                                    recorder.setTimestamp(t);
                                }*/
                                Log.v(LOG_TAG, ""imageIndex="" + (i % images.length));
                                recorder.record(images[i % images.length]);
                        /*    }*/
                            Log.v(LOG_TAG, ""videoCounter="" + videoCounter);
                        }
                    }
                }

                firstIndex = samplesIndex % samples.length;
                lastIndex = (samplesIndex - 1) % samples.length;
                if (samplesIndex &lt;= samples.length) {
                    firstIndex = 0;
                    lastIndex = samplesIndex - 1;
                }
                if (lastIndex &lt; firstIndex) {
                    lastIndex += samples.length;
                }
                for (int i = firstIndex; i &lt;= lastIndex; i++) {
                    if (timestamps[i] != -1) {
                        recorder.recordSamples(samples[i % samples.length]);
                    }
                }
            } catch (FFmpegFrameRecorder.Exception e) {
                Log.v(LOG_TAG, e.getMessage());
                e.printStackTrace();
            }
        }

        recording = false;
        Log.v(LOG_TAG, ""Finishing recording, calling stop and release on recorder"");
        try {
            recorder.stop();
            recorder.release();
        } catch (FFmpegFrameRecorder.Exception e) {
            e.printStackTrace();
        }
        recorder = null;

    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_BACK) {
        if (recording) {
            stopRecording();
        }

        finish();

        return true;
    }

    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onTouch(View view, MotionEvent motionEvent) {
    switch (motionEvent.getAction()) {
        case MotionEvent.ACTION_DOWN:
            Log.v(LOG_TAG, ""ACTION_DOWN"" + recording);

            if (!recording) {
                startRecording();
            } else {
                stopPauseTime = System.currentTimeMillis();
                totalPauseTime = stopPauseTime - startPauseTime - ((long) (1.0 / (double) frameRate) * 1000);
                pausedTime += totalPauseTime;
            }
            rec = true;
            setTotalVideoTime();
            btnRecorderControl.setText(getResources().getString(R.string.stop));
            break;
        case MotionEvent.ACTION_MOVE:
            rec = true;
            setTotalVideoTime();
            break;
        case MotionEvent.ACTION_UP:
            Log.v(LOG_TAG, ""ACTION_UP"");
            rec = false;
            startPauseTime = System.currentTimeMillis();
            break;
    }
    return true;
}

private Runnable mUpdateTimeTask = new Runnable() {
    public void run() {
        if (recording) {
            setTotalVideoTime();
        }
        mHandler.postDelayed(this, 500);
    }
};

private synchronized void setTotalVideoTime() {
    totalTime = System.currentTimeMillis() - firstTime - pausedTime - ((long) (1.0 / (double) frameRate) * 1000);
    if (totalTime &gt; 0)
        txtTimer.setText(getRecordingTimeFromMillis(totalTime));
}

private String getRecordingTimeFromMillis(long millis) {
    String strRecordingTime = null;
    int seconds = (int) (millis / 1000);
    int minutes = seconds / 60;
    int hours = minutes / 60;

    if (hours &gt;= 0 &amp;&amp; hours &lt; 10)
        strRecordingTime = ""0"" + hours + "":"";
    else
        strRecordingTime = hours + "":"";

    if (hours &gt; 0)
        minutes = minutes % 60;

    if (minutes &gt;= 0 &amp;&amp; minutes &lt; 10)
        strRecordingTime += ""0"" + minutes + "":"";
    else
        strRecordingTime += minutes + "":"";

    seconds = seconds % 60;

    if (seconds &gt;= 0 &amp;&amp; seconds &lt; 10)
        strRecordingTime += ""0"" + seconds;
    else
        strRecordingTime += seconds;

    return strRecordingTime;

}


//---------------------------------------------
// audio thread, gets and encodes audio data
//---------------------------------------------
class AudioRecordRunnable implements Runnable {

    @Override
    public void run() {
        android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

        // Audio
        int bufferSize;
        ShortBuffer audioData;
        int bufferReadResult;

        bufferSize = AudioRecord.getMinBufferSize(sampleAudioRateInHz,
                AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
        audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleAudioRateInHz,
                AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);

        if (RECORD_LENGTH &gt; 0) {
            samplesIndex = 0;
            samples = new ShortBuffer[RECORD_LENGTH * sampleAudioRateInHz * 2 / bufferSize + 1];
            for (int i = 0; i &lt; samples.length; i++) {
                samples[i] = ShortBuffer.allocate(bufferSize);
            }
        } else {
            audioData = ShortBuffer.allocate(bufferSize);
        }

        Log.d(LOG_TAG, ""audioRecord.startRecording()"");
        audioRecord.startRecording();

        /* ffmpeg_audio encoding loop */
        while (runAudioThread) {
            if (RECORD_LENGTH &gt; 0) {
                audioData = samples[samplesIndex++ % samples.length];
                audioData.position(0).limit(0);
            }
            //Log.v(LOG_TAG,""recording? "" + recording);
            bufferReadResult = audioRecord.read(audioData.array(), 0, audioData.capacity());
            audioData.limit(bufferReadResult);
            if (bufferReadResult &gt; 0) {
                Log.v(LOG_TAG, ""bufferReadResult: "" + bufferReadResult);
                // If ""recording"" isn't true when start this thread, it never get's set according to this if statement...!!!
                // Why?  Good question...
                if (recording &amp;&amp; rec) {
                    Log.v(LOG_TAG, ""Recording audio"");
                    if (RECORD_LENGTH &lt;= 0) try {
                        recorder.recordSamples(audioData);
                        //Log.v(LOG_TAG,""recording "" + 1024*i + "" to "" + 1024*i+1024);
                    } catch (FFmpegFrameRecorder.Exception e) {
                        Log.v(LOG_TAG, e.getMessage());
                        e.printStackTrace();
                    }
                }
            }
        }
        Log.v(LOG_TAG, ""AudioThread Finished, release audioRecord"");

        /* encoding finish, release recorder */
        if (audioRecord != null) {
            audioRecord.stop();
            audioRecord.release();
            audioRecord = null;
            Log.v(LOG_TAG, ""audioRecord released"");
        }
    }
}

//---------------------------------------------
// camera thread, gets and encodes video data
//---------------------------------------------
class CameraView extends SurfaceView implements SurfaceHolder.Callback, PreviewCallback {

    private SurfaceHolder mHolder;
    private Camera mCamera;

    public CameraView(Context context, Camera camera) {
        super(context);
        Log.w(""camera"", ""camera view"");
        mCamera = camera;
        mHolder = getHolder();
        mHolder.addCallback(CameraView.this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        mCamera.setPreviewCallback(CameraView.this);
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            stopPreview();
            mCamera.setPreviewDisplay(holder);
        } catch (IOException exception) {
            mCamera.release();
            mCamera = null;
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        stopPreview();

        Camera.Parameters camParams = mCamera.getParameters();
        List&lt;Camera.Size&gt; sizes = camParams.getSupportedPreviewSizes();
        // Sort the list in ascending order
        Collections.sort(sizes, new Comparator&lt;Camera.Size&gt;() {

            public int compare(final Camera.Size a, final Camera.Size b) {
                return a.width * a.height - b.width * b.height;
            }
        });

        camParams.setPreviewSize(imageWidth, imageHeight);

        Log.v(LOG_TAG, ""Setting imageWidth: "" + imageWidth + "" imageHeight: "" + imageHeight + "" frameRate: "" + frameRate);

        camParams.setPreviewFrameRate(frameRate);
        Log.v(LOG_TAG, ""Preview Framerate: "" + camParams.getPreviewFrameRate());

        mCamera.setParameters(camParams);

        List&lt;Camera.Size&gt; videoSizes = mCamera.getParameters().getSupportedVideoSizes();

        // Set the holder (which might have changed) again
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.setPreviewCallback(CameraView.this);
            startPreview();
        } catch (Exception e) {
            Log.e(LOG_TAG, ""Could not set preview display in surfaceChanged"");
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        try {
            mHolder.addCallback(null);
            mCamera.setPreviewCallback(null);
        } catch (RuntimeException e) {
            // The camera has probably just been released, ignore.
        }
    }

    public void startPreview() {
        if (!isPreviewOn &amp;&amp; mCamera != null) {
            isPreviewOn = true;
            mCamera.startPreview();
        }
    }

    public void stopPreview() {
        if (isPreviewOn &amp;&amp; mCamera != null) {
            isPreviewOn = false;
            mCamera.stopPreview();
        }
    }

    @Override
    public void onPreviewFrame(byte[] data, Camera camera) {
        if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
            startTime = System.currentTimeMillis();
            return;
        }
        if (RECORD_LENGTH &gt; 0) {
            int i = imagesIndex++ % images.length;
            Log.v(LOG_TAG, ""recording:"" + recording + ""rec:"" + rec);
            if (recording &amp;&amp; rec) {
                yuvImage = images[i];
                timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);
                totalRecordedTS++;
            } else {
                Log.v(LOG_TAG, ""recording is paused"");
                yuvImage = null;
                timestamps[i] = -1;
            }
        }

        /* get video data */
        if (yuvImage != null &amp;&amp; recording &amp;&amp; rec) {
            if (data.length != imageWidth * imageHeight) {
                Camera.Size sz = camera.getParameters().getPreviewSize();
                imageWidth = sz.width;
                imageHeight = sz.height;
                destWidth = imageHeight;
                Log.v(LOG_TAG, ""data length:"" + data.length);
            }

            ByteBuffer bb = (ByteBuffer) yuvImage.image[0].position(0); // resets the buffer
            int start = 2 * ((imageWidth - destWidth) / 4); // this must be even
            for (int row = 0; row &lt; imageHeight * 3 / 2; row++) {
                bb.put(data, start, destWidth);
                start += imageWidth;
            }

        }
    }
}

@Override
public void onClick(View v) {
    if (!recording) {
        startRecording();
        Log.w(LOG_TAG, ""Start Button Pushed"");
        btnRecorderControl.setText(""Stop"");
    } else {
        // This will trigger the audio recording loop to stop and then set isRecorderStart = false;
        stopRecording();
        Log.w(LOG_TAG, ""Stop Button Pushed"");
        btnRecorderControl.setText(""Start"");
    }
}}
</code></pre>

<p><strong>Changes made as per Alex Cohn's suggestions</strong></p>

<p><strong>Suggestion 1 - Estimate average frame rate</strong></p>

<pre><code>    public void stopRecording() {

   ..............................

                            if (((i % images.length) != 0) &amp;&amp; images[i % images.length] != images[(i % images.length) - 1]) {
                                if (t &gt; recorder.getTimestamp()) {
                                    t += 1000000 / frameRate;
                                    recorder.setTimestamp(t);
                                }

                                recorder.record(images[i % images.length]);
                            }
             ..........................................


}
</code></pre>

<p>Change made was adding t += 1000000 / frameRate; But this caused the video to freeze (as in case 1 described above) in portions when finger was placed away from screen.</p>

<p><strong>Suggestion 2 - Modification in onPreviewFrame()</strong></p>

<pre><code>long[] timestampsForRecorder;
private void initRecorder() {

    Log.w(LOG_TAG, ""init recorder"");

    if (RECORD_LENGTH &gt; 0) {
       .......................................................
        timestampsForRecorder = new long[images.length];
        for (int i = 0; i &lt; images.length; i++) {
            images[i] = new Frame(destWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
            timestamps[i] = -1;
            timestampsForRecorder[i] = -1;
        }
    } else if (yuvImage == null) {
        yuvImage = new Frame(destWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
        Log.i(LOG_TAG, ""create yuvImage"");
    }
    ...................................................
}

@Override
public void onPreviewFrame(byte[] data, Camera camera) {
        if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
            startTime = SystemClock.elapsedRealtime();
            return;
        }
        if (RECORD_LENGTH &gt; 0) {
            int i = imagesIndex++ % images.length;
            Log.v(LOG_TAG, ""recording:"" + recording + ""rec:"" + rec);
            if (recording &amp;&amp; rec) {
                yuvImage = images[i];
                long thisFrameTime = SystemClock.elapsedRealtime();
                timestamps[i] = thisFrameTime;
                long lastFrameTime = timestamps[(int) (imagesIndex == 0 ? startTime : ((imagesIndex-1) % images.length))];
                Log.v(LOG_TAG, ""lastFrameTime:"" + lastFrameTime+"",stopPauseTime:"" + stopPauseTime);
                if (lastFrameTime &gt; stopPauseTime) {
                    timestampsForRecorder[i] = 1000 * (thisFrameTime - Math.max(stopPauseTime, lastFrameTime));
                }
            }
        }

       .....................................................
    }

public void stopRecording() {

    .......................................................

    if (recorder != null &amp;&amp; recording) {
        if (RECORD_LENGTH &gt; 0) {
            Log.v(LOG_TAG, ""Writing frames"");
            try {
                int firstIndex = imagesIndex % samples.length;
                int lastIndex = (imagesIndex - 1) % images.length;
                if (imagesIndex &lt;= images.length) {
                    firstIndex = 0;
                    lastIndex = imagesIndex - 1;
                }
                if ((startTime = timestampsForRecorder[lastIndex] - RECORD_LENGTH * 1000000L) &lt; 0) {
                    startTime = 0;
                }
                if (lastIndex &lt; firstIndex) {
                    lastIndex += images.length;
                }
                for (int i = firstIndex; i &lt;= lastIndex; i++) {

                    if (timestampsForRecorder[i] != -1) {
                        long t = timestampsForRecorder[i % timestampsForRecorder.length] - startTime;
                        if (t &gt;= 0) {

                            if (((i % images.length) != 0) &amp;&amp; images[i % images.length] != images[(i % images.length) - 1]) {
                                if (t &gt; recorder.getTimestamp()) {
                                    recorder.setTimestamp(t);
                                }
                                Log.v(LOG_TAG, ""imageIndex="" + (i % images.length));
                                recorder.record(images[i % images.length]);
                            }
                        }
                    }
                }
                .............................................
            } catch (FFmpegFrameRecorder.Exception e) {
               .................................
            }
        }

        ...........................................

    }
}
</code></pre>

<p>The video recorded using this was having the issue in case 2 mentioned above. ie,It was playing at a faster rate</p>
",2015-12-04 13:49:33,2015-12-08 13:33:14,Tap to record like in vine using javacv,<android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
37689,34024041,2015-12-01 15:31:42,,"<p>I'm having trouble writing h264 video with OpenCV 3 via FFmpeg (""'X','2','6','4'"" FOURCC). I've seen all the related posts so far on SO, but nothing helps. Code:</p>

<pre><code>cv::VideoWriter writer(output_path.string(),    CV_FOURCC('X','2','6','4'), 60, frame_size);
</code></pre>

<p>Output:</p>

<blockquote>
  <p>OpenCV: FFMPEG: tag 0x34363258/'X264' is not supported with codec id
  28 and format 'mp4 / MP4 (MPEG-4 Part 14)' OpenCV: FFMPEG: fallback to
  use tag 0x00000021/'!???'</p>
</blockquote>

<p>The resulting video is extremely small (byte-wise) and unreadable. Setting the four_cc to -1 results in ""unknown tag"" from FFmpeg, I don't get any prompt to choose codec as others suggested.</p>

<p>The OpenCV 3 doc states: </p>

<blockquote>
  <p>FFMPEG backend with MP4 container natively uses other values as fourcc
  code: see <a href=""http://www.mp4ra.org/codecs.html"" rel=""noreferrer"">ObjectType</a>, so you may receive a warning message from OpenCV
  about fourcc code conversion.</p>
</blockquote>

<p>That page they refrence doesn't have h264 / x264 listed, and I'm not sure how to interpret that statement, since <a href=""https://stackoverflow.com/questions/28163201/writing-a-video-file-using-h-264-compression-in-opencv"">earlier SO posts</a> seem to all list X.2.6.4 as the appropriate code. Using H.2.6.4 actually gives identical output.</p>

<p>Any suggestions / workarounds?</p>

<p>P.S. the ffmpeg is most up-to-date from Ubuntu maintainers, it lists that it was configured with <code>--enable-libx264</code></p>

<p><strong>EDIT:</strong> I tried to use the mkv container instead of mp4. The warning about tag not being supported went away, but the resulting video is still unreadable.</p>
",2017-05-23 11:47:24,2018-09-07 17:49:54,Writing x264 from OpenCV 3 with FFmpeg on Linux,<c++><linux><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
37720,34103544,2015-12-05 10:00:24,,"<p>I got to the stage where I successfully populated the build file via CMake (configure and generate).</p>

<p>Once i run <code>make</code> when in the build directory via terminal, I get a fatal error at 48%, along with some others before.</p>

<pre><code>[ 47%] Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_mjpeg_decoder.cpp.o
[ 47%] Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o
[ 48%] Building CXX object modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_qtkit.mm.o
/Users/casparwylie/Desktop/Stuff/Programming/opencv/modules/videoio/src/cap_qtkit.mm:297:14: warning: null passed to a callee that requires a non-null argument [-Wnonnull]
    [NSTimer scheduledTimerWithTimeInterval:100 target:nil selector:@selector(doFireTimer:) userInfo:nil repeats:YES];
             ^                                         ~~~
1 warning generated.
[ 48%] Linking CXX shared library ../../lib/libopencv_videoio.dylib
Undefined symbols for architecture x86_64:
  ""_CMBlockBufferCreateWithMemoryBlock"", referenced from:
      _videotoolbox_common_end_frame in libavcodec.a(videotoolbox.o)
  ""_CMSampleBufferCreate"", referenced from:
      _videotoolbox_common_end_frame in libavcodec.a(videotoolbox.o)
  ""_CMVideoFormatDescriptionCreate"", referenced from:
      _av_videotoolbox_default_init2 in libavcodec.a(videotoolbox.o)
  ""_ModPlug_GetCurrentOrder"", referenced from:
</code></pre>

<p>What does this error mean, and are there any fixes or work arounds?</p>
",2015-12-05 14:39:41,2016-08-12 03:45:28,Error while building openCV 3.0.0 on Mac,<macos><qt><opencv><terminal><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
37732,34026589,2015-12-01 17:39:30,,"<p>I have a requirement of splitting a video into a series of frames (images) that must work on both Windows and Mac systems (using Mono). Originally I developed this for Windows using AForge.Net but unfortunately it looks like Mono does not support AForge.Net. </p>

<p>The error I get when running this on Mono is</p>

<pre><code>AForge.Video.FFMPEG.dll contains native code that cannot be executed by Mono
in modules loaded from byte arrays. The assembly was probably created using C++/CLI.
</code></pre>

<p>So my question is if anyone knew of a similar framework to AForge that can split videos into images that is supported on Mono as well. </p>
",,2015-12-01 17:39:30,Is there a way of splitting a video into images that is supported on Mono?,<c#><image-processing><video><mono><aforge>,,,CC BY-SA 3.0,False,False,False,False,True
37741,33891552,2015-11-24 10:47:26,,"<p>I am trying to process recorded videos for feature point recognition. When I process the video at it's full resolution (1280*720) the video playback is slower than it should be. Whenever I reduce the resolution down to 640*360 the fps drops dramatically. What would be the cause of this?</p>

<pre><code>  if(captureOpen == false){
    img_scene = cvCaptureFromFile(""20151115_154042_582.mp4"");
  }
  while(1) {
    image = cvQueryFrame(img_scene);
    if(image.empty()) {
      cout &lt;&lt; ""IMAGE EMPTY"" &lt;&lt; endl;
      continue;
    }
    else {
      frameCount++;
    }
    cvtColor(image, gray, CV_BGR2GRAY);
    captureOpen = true;
    processingThread(gray, imageIndex);
    myfile &lt;&lt; cvGetCaptureProperty(img_scene, CV_CAP_PROP_POS_FRAMES) &lt;&lt; endl;
    imshow(""Output"", gray);
    key = cvWaitKey(5);
</code></pre>

<p>I've tried reducing <code>cvWaitKey();</code> to <code>1</code> but it doesn't seem to have any noticeable effect on fps, I've also tried removing the gray scale conversion but that does not have a noticeable effect either.</p>

<p>(I've tried both handbrake and ffmpeg to reduce the resolution)</p>
",2015-11-24 10:56:13,2015-11-24 10:56:13,OpenCV fps reduced when video resized,<c++><opencv><video><frame-rate>,,,CC BY-SA 3.0,True,False,False,False,True
37918,34041665,2015-12-02 11:30:06,,"<p>I have installed Opencv 3.0.0 on centos referred  <a href=""http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/"" rel=""nofollow"">http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/</a> ,and after having some building package issue i have reached and installed successfully but not able to find cv2.so.</p>

<p>I have searched using sudo find / -name ""cv2.so""</p>

<p>In centos i have Python 2.6 and in virtualenv Python 2.7.5 .</p>

<p>I have tried using git clone <a href=""https://github.com/Itseez/opencv.git"" rel=""nofollow"">https://github.com/Itseez/opencv.git</a>.</p>

<p>when it won't work then i have installed beta version.</p>

<pre><code>-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /path/to/opencv-build/opencv-3.0.0-beta/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 

cmake -D CMAKE_BUILD_TYPE=RELEASE \
    -D CMAKE_INSTALL_PREFIX=/usr/local \
    -D INSTALL_C_EXAMPLES=ON \
    -D INSTALL_PYTHON_EXAMPLES=ON \
    -D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib/modules \
    -D BUILD_EXAMPLES=ON ..

output : 

Detected version of GNU GCC: 44 (404)
-- Found ZLIB: /usr/lib64/libz.so (found suitable version ""1.2.3"", minimum required is ""1.2.3"") 
-- Found ZLIB: /usr/lib64/libz.so (found version ""1.2.3"") 
-- Found OpenEXR: /usr/lib64/libIlmImf.so
-- checking for module 'gtk+-3.0'
--   package 'gtk+-3.0' not found
-- checking for module 'gstreamer-base-1.0'
--   package 'gstreamer-base-1.0' not found
-- checking for module 'gstreamer-video-1.0'
--   package 'gstreamer-video-1.0' not found
-- checking for module 'gstreamer-app-1.0'
--   package 'gstreamer-app-1.0' not found
-- checking for module 'gstreamer-riff-1.0'
--   package 'gstreamer-riff-1.0' not found
-- checking for module 'gstreamer-pbutils-1.0'
--   package 'gstreamer-pbutils-1.0' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- found IPP (ICV version): 8.2.1 [8.2.1]
-- at: /path/to/opencv-build/opencv-3.0.0-beta/3rdparty/ippicv/unpack/ippicv_lnx
-- Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (Required is exact version ""2.7.5"")
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named numpy.distutils
-- Could NOT find PythonInterp: Found unsuitable version ""2.6.6"", but required is at least ""3.4"" (found /usr/bin/python)
-- Could NOT find PythonInterp: Found unsuitable version ""2.6.6"", but required is at least ""3.2"" (found /usr/bin/python)
-- Could NOT find JNI (missing:  JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH) 
-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT MATLAB_ARCH MATLAB_BIN) 
-- VTK is not found. Please set -DVTK_DIR in CMake to VTK build directory, or to VTK install subdirectory with VTKConfig.cmake file
-- 
-- General configuration for OpenCV 3.0.0-beta =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 2.6.32-042stab092.2 x86_64
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/gmake
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.4.7)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -msse3 -ffunction-sections -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc imgcodecs videoio highgui ml features2d calib3d objdetect photo video shape stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera cuda cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaoptflow cudastereo cudawarping cudev java python2 python3 viz
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.24.23)
--     GThread :                    YES (ver 2.28.8)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib64/libz.so (ver 1.2.3)
--     JPEG:                        /usr/lib64/libjpeg.so (ver )
--     WEBP:                        /usr/lib64/libwebp.so (ver encoder: 0x0202)
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.49)
--     TIFF:                        /usr/lib64/libtiff.so (ver 42 - 3.9.4)
--     JPEG 2000:                   /usr/lib64/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib64/libImath.so /usr/lib64/libIlmImf.so /usr/lib64/libIex.so /usr/lib64/libHalf.so /usr/lib64/libIlmThread.so (ver 1.6.1)
--     GDAL:                        NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.1.2)
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       gentoo-style:              NO
--     GStreamer:                   
--       base:                      YES (ver 0.10.29)
--       video:                     YES (ver 0.10.29)
--       app:                       YES (ver 0.10.29)
--       riff:                      YES (ver 0.10.29)
--       pbutils:                   YES (ver 0.10.29)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l (ver 0.6.3)
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     8.2.1 [8.2.1]
--          at:                     /path/to/opencv-build/opencv-3.0.0-beta/3rdparty/ippicv/unpack/ippicv_lnx
--     Use IPP Async:               NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /path/to/opencv-build/opencv-3.0.0-beta/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 
--   Python 2:
--     Interpreter:                 /path/to/venv/bin/python2.7 (ver 2.7.5)
-- 
--   Python 3:
--     Interpreter:                 NO
-- 
--   Python (for build):            /path/to/venv/bin/python2.7
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java wrappers:               NO
--     Java tests:                  NO
-- 
--   Matlab:
--     mex:                         NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
--     PlantUML:                    NO
--     Doxygen:                     YES (/usr/bin/doxygen)
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /path/to/opencv-build/opencv-3.0.0-beta/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /path/to/opencv-build/opencv-3.0.0-beta/build
</code></pre>

<p>How to fix this issue.
Thanks</p>
",2015-12-03 05:47:53,2015-12-03 06:28:40,Install Opencv 3.0.0 on centos 6,<python><opencv><centos6>,,,CC BY-SA 3.0,True,True,False,False,True
38012,33975245,2015-11-28 19:02:07,,"<p>I want to run a simple <code>.flv</code> to <code>.mp4</code> conversion on a Linux machine</p>

<p>Till now I was including the following dependencies and it was working fine on Ubuntu 12.x and CentOS</p>

<pre><code>&lt;dependency&gt;
   &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
   &lt;artifactId&gt;ffmpeg&lt;/artifactId&gt;
   &lt;version&gt;2.7.1-1.0&lt;/version&gt;
   &lt;classifier&gt;linux-x86_64&lt;/classifier&gt;
&lt;/dependency&gt;
</code></pre>

<p>Red Hat uname -a </p>

<pre><code>x86_64 #1 SMP Tue Sep 16 01:56:35 EDT 2014 x86_64 x86_64 x86_64 GNU/Linux

Red Hat lsb_release -a
LSB Version:    :base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-noarch
Distributor ID: RedHatEnterpriseServer
Description:    Red Hat Enterprise Linux Server release 6.6 (Santiago)
Release:        6.6
Codename:       Santiago
</code></pre>

<p>CentOS uname -a</p>

<pre><code>.x86_64 #1 SMP Tue Nov 3 19:10:07 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
</code></pre>

<p>However when trying it in RedHat Linux I get the following exceptions</p>

<p>Application startup failed</p>

<pre><code>java.lang.NoClassDefFoundError: Could not initialize class org.bytedeco.javacpp.avutil
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:270)
    at org.bytedeco.javacpp.Loader.load(Loader.java:390)
    at org.bytedeco.javacpp.Loader.load(Loader.java:358)
    at org.bytedeco.javacpp.avformat$AVFormatContext.&lt;clinit&gt;(avformat.java:2539)
    at org.bytedeco.javacv.FFmpegFrameGrabber.startUnsafe(FFmpegFrameGrabber.java:383)
    at org.bytedeco.javacv.FFmpegFrameGrabber.start(FFmpegFrameGrabber.java:377)
    at com.example.Application.convert(Application.java:53)
    at com.example.Application.run(Application.java:103)
    at org.springframework.boot.SpringApplication.runCommandLineRunners(SpringApplication.java:674)
    at org.springframework.boot.SpringApplication.afterRefresh(SpringApplication.java:693)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:322)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:969)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:958)
    at com.example.Application.main(Application.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:606)
    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:53)
    at java.lang.Thread.run(Thread.java:745)
</code></pre>

<p>I tried with 32 bit version:</p>

<pre><code>&lt;dependency&gt;
   &lt;groupId&gt;org.bytedeco.javacpp-presets&lt;/groupId&gt;
   &lt;artifactId&gt;ffmpeg&lt;/artifactId&gt;
   &lt;version&gt;2.7.1-1.0&lt;/version&gt;
   &lt;classifier&gt;linux-x86&lt;/classifier&gt;
&lt;/dependency&gt;
</code></pre>

<p>Same result.</p>

<p>Then I tried with simply </p>

<p>
   org.bytedeco
   javacv
   1.0
</p>

<p>and <code>mvn package -Dplatform.dependencies=true</code> so I got ALL dependencies. </p>

<p>Still the same. Any one have an idea what I'm doing wrong?</p>
",,2015-11-28 19:33:15,JavaCV RedHat Linux 6.6 x64 NoClassDefFound: Could not initialize class org.bytedeco.javacpp.avutil,<java><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
38014,34167691,2015-12-08 22:58:00,,"<p>How can I pipe openCV images to ffmpeg (running ffmpeg as a subprocess)?
(I am using spyder/anaconda)</p>

<p>I am reading frames from a video file and do some processing on each frame.</p>

<pre><code>import cv2   
cap = cv2.VideoCapture(self.avi_path)
img = cap.read()
gray = cv2.cvtColor(img[1], cv2.COLOR_BGR2GRAY)
bgDiv=gray/vidMed #background division
</code></pre>

<p>then, to pipe the processed frame to ffmpeg, I found this command in a related question:</p>

<pre><code>sys.stdout.write( bgDiv.tostring() )
</code></pre>

<p>next, I am trying to run ffmpeg as a subprocess:</p>

<pre><code>cmd='ffmpeg.exe -f rawvideo -pix_fmt gray -s 2048x2048 -r 30 -i - -an -f avi -r 30 foo.avi'
sp.call(cmd,shell=True)
</code></pre>

<p>(this also from the mentioned post)
However, this fills my IPython console with cryptic hieroglyphs and then crashes it. any advice?</p>

<p>ultimately, I would like to pipe out 4 streams and have ffmpeg encode those 4 streams in parallel.</p>
",,2020-07-02 14:36:03,Pipe opencv images to ffmpeg using python,<python><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
38084,34095957,2015-12-04 19:24:29,,"<p>I can't get opencv 3.0.0 (the pre-compiled version from the opencv website) to even compile when trying to open files using VideoCapture.</p>

<p>I pared my code down to just this:</p>

<pre><code>#include ""stdafx.h""
#include &lt;opencv/cxcore.h&gt;
#include &lt;opencv2/core/mat.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;iostream&gt;
#include &lt;opencv/cxcore.h&gt;
#include &lt;opencv/highgui.h&gt;
#include &lt;opencv/cv.h&gt;
#include &lt;opencv2/opencv.hpp&gt;
#include &lt;opencv2/core/core.hpp&gt;

#include &lt;string&gt;
#include &lt;cmath&gt;
#include &lt;time.h&gt;

using namespace cv;
using namespace std;
int main() {
   VideoCapture inputCap(""C:/Users/user.name/Desktop/Video0022.mp4"");
}
</code></pre>

<p>And compiling it yields: <code>opencv_ffmpeg300_64.dll : fata error LNK1107: invalid or corrupt file: cannot read at 0x408</code>, in the file opencv_ffmpeg300_64.dll, line 1, col 1.</p>

<p>This is using Visual Studio Express 2012, on a Win 7 machine, compiling in x64, in C++. I've tried compiling the code in Release mode, and Debug mode, and it gives the same error. The dll is in the linker additional dependencies, and I have the library it's in in the additional library directories.</p>

<p>That didn't work, and looking around I saw that in the Java and Python versions, adding the directory to the path variable sometimes worked. So did that, rebooted, tried again, same error.</p>

<p>Then I just started adding the dll everywhere it could possibly be useful - all through the My Documents/Visual Studio 12/Projects/ProjectName folder, in multiple places in the opencv folder, and still the same error.  </p>

<p>I also tried turning off the enabling incremental linking, and that didn't work either. </p>

<p>I'm pretty sure it's not a codec problem, as this was working in opencv 2.4.7/visual studio 10 (I renamed the folder opencv 2 folder to not mess with the opencv 3.0.0 install). </p>

<p>The video itself is fine, I'm able to open it in VLC and windows media player no problem, and with the older opencv stuff.</p>

<p>If I remove the dll from the linker additional dependencies, I can actually compile the .cpp, but then it never actually opens the file (<code>inputCap.isOpened()</code> always returns false). However, I can open webcams with no problem. </p>

<p>--</p>

<p>Edit: I changed the release runtime library to /MT instead of /MD, removed the opencv_ffmpeg300_64.dll on both the debug and the release versions of the linker additional dependencies and now both the release and the debug compile and work fine for that video file. </p>
",2015-12-04 19:56:48,2015-12-18 00:52:53,Can't read mp4 files in opencv 3,<c++><opencv><visual-studio-2012>,,,CC BY-SA 3.0,True,False,False,False,True
38120,34312534,2015-12-16 12:48:59,,"<p><strong>Development Environment</strong></p>

<pre><code>Development OS : Windows 8.1 Pro
VS : 2013
App: Winform &amp; WPF
MSSQL : 2012
EF : 6.0
EMGU.CV : 3.0.0
ffmpeg, Nreco, office.interop and several other plugins installed with app.
</code></pre>

<p>We have developed a vehicle tracking system with the help of emgu.cv for image processing. we are using capture method to grab images from the input video file and process images. Any way, the application is almost done. To test the application, we are trying it in several machines. Like with different cores / different OS (w7/w8/w8.1/w10) etc. </p>

<p>we are installing MSSQL express 2012, .net fw 4.5, 4.5.1, before using the app in pc's where vs is not installed.</p>

<p>in most of the case, our test pc has VS 2013, and in those pc, there are no problem running this application.</p>

<p>Some pc have adobe products but not VS. But they are running the application too.</p>

<p>But those pc, just have installed or dont have any adobe product or VS, they are crashing at the same point( in 5 pc).</p>

<pre><code>    Application: VehicleTrackingSystem.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.TypeInitializationException
Stack:
   at Emgu.CV.CvInvoke.cvReleaseCapture(IntPtr ByRef)
   at Emgu.CV.Capture.DisposeObject()
   at Emgu.Util.DisposableObject.Dispose(Boolean)
   at Emgu.Util.DisposableObject.Finalize()
</code></pre>

<p>Same solution is running in several pc as mentioned before. But in some cases, it shows (basically in win 7) <code>System.dllnotfoundexception</code>.</p>

<p>Its assumed that, some dlls are mismatching, may be because of VS installation or adobe product installation. I have tried <strong>Dependency Walker</strong> but in Positive PC and negetive PC all dll is similar. But the dll's file version is not same though.</p>

<p>how to solve this?</p>
",,2015-12-16 12:48:59,DLL dependency in different system or OS,<c#><.net><winforms><dll><emgucv>,,,CC BY-SA 3.0,False,False,True,False,True
38250,34225060,2015-12-11 13:49:22,,"<p>I am using <code>CV::VideoCapture</code> to capture frames from an IP camera. It works most of time, however, sometimes it reports the error:</p>

<pre><code>[mjpeg @ 0x233aea0] overread 8
</code></pre>

<p>And when this error occurred, my program just stuck there. <a href=""https://superuser.com/questions/559973/ffmpeg-convert-jpeg-images-to-video"">This</a> might explain why. But how can I solve it in C++ code? Can OpenCV handle this error without terminate the program?</p>

<p>p.s. I found that if I didn't call <code>CV::VideoCapture::read()</code> immediately, but wait for a while, like 60 seconds, after <code>CV::VideoCapture::open()</code>, this error occurred everytime! Is it a bug of OpenCV?</p>

<pre><code>#include &lt;unistd.h&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;iostream&gt;

int main(int argc, char* argv[]) {
  // argv[1] is a valid url, like ""http://xxxx/mjpg/video.mjpg""
  cv::VideoCapture cap(argv[1]);
  if (!cap.isOpened()) {
    std::cout &lt;&lt; ""Cannot Open Camera!"" &lt;&lt; std::endl;
    return -1;
  }
  // The error occures if I pause for a while.
  // But it is okay when I capture frames from video files intead of IP camera.
  sleep(60);
  while (static_cast&lt;char&gt;(cv::waitKey(1)) != 'q') {
    cv::Mat frame;
    cap &gt;&gt; frame;
    if (frame.empty()) break;
    cv::imshow(""frame"", frame);
  }
}
</code></pre>
",2017-03-20 10:18:21,2015-12-12 11:30:06,A bug in CV::VideoCapture::open()?,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
38267,34284325,2015-12-15 08:34:20,,"<p>I am creating a video from images via FFMPEG and I am able to get the video from images. I am also making use of JavaCV to merge two videos and I am able to join videos using JavaCV without any issues provided both the videos are taken via camera, i.e, a video actually recorded via mobile camera. </p>

<p><strong>Issue that I'm facing :</strong></p>

<p>I am not able to merge the video that was generated from FFMPEG using the images along with the video user has chosen which will mostly be a video that was not generated and taken via mobile camera. </p>

<p><strong>CODE :</strong>
<strong>Code to generate Video via Images :</strong></p>

<pre><code>                  FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(path + ""/"" + ""dec16.mp4"", 800, 400);
                            try {
                                recorder.setVideoCodec(avcodec.AV_CODEC_ID_MPEG4);
                                //recorder.setVideoCodec(avcodec.AV_CODEC_ID_H264);
                                recorder.setVideoCodecName(""H264"");
                                recorder.setVideoOption(""preset"", ""ultrafast"");
                                recorder.setFormat(""mp4"");
                                recorder.setFrameRate(frameRate);
                                recorder.setVideoBitrate(60);
                                recorder.setPixelFormat(avutil.AV_PIX_FMT_YUV420P);
                                startTime = System.currentTimeMillis();
                                recorder.start();
                                for(int j=0;j&lt;MomentsGetStarted.chosen_images_uri.size();j++)
                                {
                                    if(MomentsGetStarted.chosen_images_uri.get(j).video_id==0)
                                    {
                                        chosen_images.add(MomentsGetStarted.chosen_images_uri.get(j));
                                    }

                                }
                                for (int i = 0; i &lt; chosen_images.size(); i++) {

                                    opencv_core.IplImage image = cvLoadImage(chosen_images.get(i).sdcardPath);

                                    long t = 3000 * (System.currentTimeMillis() - startTime);
                                    if (t &gt; recorder.getTimestamp()) {

                                        recorder.setTimestamp(t);
                                        recorder.record(image);
                                    }
                                }
                                recorder.stop();
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
</code></pre>

<p><strong>Code to merge Videos :</strong></p>

<pre><code> int count = file_path.size();
            System.out.println(""final_joined_list size "" + file_path.size());
            if (file_path.size() != 1) {
                try {
                    Movie[] inMovies = new Movie[count];
                    mediaStorageDir = new File(
                            Environment.getExternalStorageDirectory()
                                    + ""/Pictures"");

                    for (int i = 0; i &lt; count; i++) {
                        File file = new File(file_path.get(i));
                        System.out.println(""fileeeeeeeeeeeeeeee "" + file);
                        System.out.println(""file exists!!!!!!!!!!"");

                        FileInputStream fis = new FileInputStream(file);
                        FileChannel fc = fis.getChannel();
                        inMovies[i] = MovieCreator.build(fc);
                        fis.close();
                        fc.close();

                    }
                    List&lt;Track&gt; videoTracks = new LinkedList&lt;Track&gt;();
                    List&lt;Track&gt; audioTracks = new LinkedList&lt;Track&gt;();
                    Log.d(""Movies length"", ""isss  "" + inMovies.length);
                    if (inMovies.length != 0) {

                        for (Movie m : inMovies) {

                            for (Track t : m.getTracks()) {
                                if (t.getHandler().equals(""soun"")) {
                                    audioTracks.add(t);
                                }
                                if (t.getHandler().equals(""vide"")) {
                                    videoTracks.add(t);
                                }
                                if (t.getHandler().equals("""")) {

                                }
                            }

                        }
                    }

                    Movie result = new Movie();

                    System.out.println(""audio and videoo tracks : ""
                            + audioTracks.size() + "" , "" + videoTracks.size());
                    if (audioTracks.size() &gt; 0) {
                        result.addTrack(new AppendTrack(audioTracks
                                .toArray(new Track[audioTracks.size()])));
                    }
                    if (videoTracks.size() &gt; 0) {
                        result.addTrack(new AppendTrack(videoTracks
                                .toArray(new Track[videoTracks.size()])));
                    }
                    IsoFile out = null;
                    try {
                        out = (IsoFile) new DefaultMp4Builder().build(result);
                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    long timestamp = new Date().getTime();
                    String timestampS = """" + timestamp;

                    File storagePath = new File(mediaStorageDir
                            + File.separator);
                    storagePath.mkdirs();
                    File myMovie = new File(storagePath, String.format(""%s.mp4"", timestampS));
                    FileOutputStream fos = new FileOutputStream(myMovie);
                    FileChannel fco = fos.getChannel();
                    fco.position(0);
                    out.getBox(fco);
                    fco.close();
                    fos.close();

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                String mFileName = Environment.getExternalStorageDirectory()
                        .getAbsolutePath();
                // mFileName += ""/output.mp4"";

                File sdCardRoot = Environment.getExternalStorageDirectory();
                File yourDir = new File(mediaStorageDir + File.separator);
                for (File f : yourDir.listFiles()) {
                    if (f.isFile())
                        name = f.getName();
                    // make something with the name
                }
                mFileName = mediaStorageDir.getPath() + File.separator
                        + ""output-%s.mp4"";
                System.out.println(""final filename : ""
                        + mediaStorageDir.getPath() + File.separator
                        + ""output-%s.mp4"" + ""names of files : "" + name);
                single_video = false;
                return name;
            } else {
                single_video = true;
                name = file_path.get(0);
                return name;
            }
</code></pre>

<p><strong>Error :</strong></p>

<p>The Error that I am facing while trying to merge the videos generated via Images and a normal video is </p>

<pre><code>12-15 12:26:06.155  26022-26111/? W/System.err﹕ java.io.IOException: Cannot append com.googlecode.mp4parser.authoring.Mp4TrackImpl@45417c38 to com.googlecode.mp4parser.authoring.Mp4TrackImpl@44ffac60 since their Sample Description Boxes differ
12-15 12:26:06.155  26022-26111/? W/System.err﹕ at com.googlecode.mp4parser.authoring.tracks.AppendTrack.&lt;init&gt;(AppendTrack.java:48)
</code></pre>

<p><strong>Fix that I tried :</strong></p>

<p>Google advised me to change the CODEC in JavaCV from <code>avcodec.AV_CODEC_ID_MPEG4</code> to <code>avcodec.AV_CODEC_ID_H264</code>. But when I did that, I am not able to get the video from images thereby throwing the following error :</p>

<pre><code>12-15 12:26:05.840  26022-26089/? W/linker﹕ libavcodec.so has text relocations. This is wasting memory and is a security risk. Please fix.
12-15 12:26:05.975  26022-26089/? W/System.err﹕ com.googlecode.javacv.FrameRecorder$Exception: avcodec_open2() error -1: Could not open video codec.
12-15 12:26:05.975  26022-26089/? W/System.err﹕ at com.googlecode.javacv.FFmpegFrameRecorder.startUnsafe(FFmpegFrameRecorder.java:492)
12-15 12:26:05.975  26022-26089/? W/System.err﹕ at com.googlecode.javacv.FFmpegFrameRecorder.start(FFmpegFrameRecorder.java:267)
</code></pre>

<p><strong>What I need :</strong></p>

<p>Creating video from Images is inevitable and that video will definitely be used to merge with other videos which might have any Codec Formats. So I need to find a way to merge any kind of videos irrespective of their Codecs or any other parameters. I am trying to keep it simple by just using the Jars and SO files and I dont want to drive myself crazy by going on a full scale implementation of FFMPEG Library. That being said, I am also ready to look into that library if I dont have any other ways to achieve what I want but a solid resource with an ALMOST working code would be much appreciated. Cheers. </p>

<p><strong>Update :</strong>
I looked upon the issues mentioned at GitHub of OpenCV, but didnt find anything solid from it.
<a href=""https://github.com/bytedeco/javacv/issues/237"" rel=""nofollow"">OpenCV Issues</a></p>
",2015-12-15 08:59:06,2015-12-15 11:30:01,"Unable to merge videos in Android using JavaCV (""Sample Description"" Error)",<android><video><merge><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
38281,34363652,2015-12-18 20:42:45,,"<p>This is the code that I have used to open a video file in Visual Studio 2015 community. I am getting errors when I debug them. The open video screen shuts off immediately after it opens just in a fraction of a second.</p>

<pre><code>#include &lt;opencv2/highgui/highgui.hpp&gt;                                              
#include &lt;opencv2/imgproc/imgproc.hpp&gt;
#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/imgproc/imgproc_c.h&gt;
//#include ""opencv2/contrib/contrib.hpp""
#include &lt;iostream&gt;                                                                 
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;math.h&gt;

using namespace cv;
using namespace std;

   int main(int argc, char **argv)
{
Mat frame;
 VideoCapture vid(""D:\\Projects\\Visual Tries\\OpenCV_try\\OpenCV_try\\Dinner.avi"");
if (!vid.isOpened())
    return -1;
int fps = (int)vid.get(CAP_PROP_FPS);
namedWindow(""Showing Film"");
while (1)
{
    if (!vid.read(frame))
        break;
    imshow(""Showing Film"", frame);
    if (waitKey(1000 / fps) &gt;= 0)
        break;
}
waitKey();
return 0;


}
</code></pre>

<p>It compiles perfectly but when I debug it.. It displays the following errors:</p>

<pre><code>'OpenCV_try.exe' (Win32): Loaded 'C:\opencv\build\x64\vc12\bin\opencv_ffmpeg300_64.dll'. Module was built without symbols.
The thread 0x2dc0 has exited with code -1 (0xffffffff).
The thread 0x514 has exited with code -1 (0xffffffff).
The thread 0x2184 has exited with code -1 (0xffffffff).
The program '[1616] OpenCV_try.exe' has exited with code -1 (0xffffffff).
</code></pre>

<p>Can someone help me out Solving the error?</p>
",,2017-05-24 11:03:58,Unable to open a Video in Visual Studio using openCV,<c++><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
38287,34266681,2015-12-14 12:07:22,,"<p>I would like to install a new option to an existing installed formula, i.e I already installed the formula like this</p>

<pre><code>brew install opencv3 --with-qt --with-java --with-ffmpeg
</code></pre>

<p>but now I wan't to have </p>

<pre><code>brew install opencv3 --with-qt --with-java --with-ffmpeg --with-python3
</code></pre>

<p>but doing this gives me the error ""opencv3 is already installed"" and same thing for an upgrade attempt.</p>

<p>Does somebody know how to do it without re-installing everything ?</p>

<p>Thank you!</p>
",2016-01-26 10:35:00,2016-01-26 10:35:00,brew : install new option to existing formula,<opencv><homebrew><option><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
38318,34481366,2015-12-27 14:27:06,,"<p>I am running the following code:</p>

<pre><code>import numpy as np
import cv2
import os

count = 0

cap = cv2.VideoCapture(""/home/simon/PROJECT/real_data/00000020.mp4"")

while not cap.isOpened():
    cap = cv2.VideoCapture(""./00000020.mp4"")
    cv2.waitKey(1000)
    print ""Wait for the header""

pos_frame = cap.get(cv2.cv.CV_CAP_PROP_POS_FRAMES)
while True:
    flag, frame = cap.read()
    if flag:
        # The frame is ready and already captured
        cv2.imshow('video', frame)
        pos_frame = cap.get(cv2.cv.CV_CAP_PROP_POS_FRAMES)
        print str(pos_frame)+"" frames""
    else:
        # The next frame is not ready, so we try to read it again
        cap.set(cv2.cv.CV_CAP_PROP_POS_FRAMES, pos_frame-1)
        print ""frame is not ready""
        # It is better to wait for a while for the next frame to be ready
        cv2.waitKey(1000)

    if cv2.waitKey(10) &amp; 0xFF == 27:
        break
    if cap.get(cv2.cv.CV_CAP_PROP_POS_FRAMES) ==       cap.get(cv2.cv.CV_CAP_PROP_FRAME_COUNT):
    # If the number of captured frames is equal to the total number of frames,
    # we stop
    break


if ret == True:
    frame = cv2.VideoCapture.grab()
    frame = 'frame%d' % count 

    cv2.imwrite('frame%d.png', frame)

    count += 1
else:
    print 'stopped at' + count
    break
</code></pre>

<p>And whenever I run it, it loops on the while not loop, printing ""wait for header"".
There is never an error code or anything like that either.</p>

<p>I have tried to run it as a more simple piece of code, where it doesnt have all these checks, and again that doesn't throw any errors.</p>

<p>I am attempting to run this code to open a video, and then save the frames as png files throughout the video.</p>

<p>Does anyone spot any particular problems with the code?
Or alternatively does anyone know a piece of code that would do what i want more efficiently, as I have trawled through google searches and stack overflow a lot recently and haven't found anything</p>

<p>Thanks in advance
Panda</p>
",,2015-12-27 19:33:27,cv2.VideoCapture on python,<python><loops><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
38493,34455453,2015-12-24 16:24:35,,"<p>I need to compute the frame differences between a source video and a compressed one.
For now I'm using <em>OpenCV</em> with <em>Java</em>, by extracting each frame and doing a simple difference, but it's quite slow (working a 0.5 fps, meaning that a 500 frames video will take more than 15 mins) so I was thinking to move to <em>FFMPEG</em>.</p>

<p><em>FFMPEG</em> feels a lot faster (everything's done under 1 minute) but it has one big issue that makes the results useless: when compressing the source file, done with <em>FFMPEG</em> too, an extra gray frame is added at the beginning and this fakes the results because different frames are compared.</p>

<p>This is what I'm doing now (knowing that the extra frame messes it all):</p>

<pre><code>ffmpeg -y -i src.avi -i compressed.avi -filter_complex ""blend=all_mode=difference,hue=s=0"" -c:v libx264 -crf 18 -c:a copy difference.avi
</code></pre>

<p>To fix the frame issue I was trying to remove the first frame by re-encoding the compressed video with this command</p>

<pre><code>ffmpeg -y -ss 0.02 -i compressed.mpg -an -f mpeg2video compressed-cut.mpg""
</code></pre>

<p>(Note that <code>-ss</code> is <em>0.02</em> because it's a <em>50 fps</em> video, so I did <code>1/FPS</code> as suggested <a href=""http://ffmpeg-users.933282.n4.nabble.com/delete-1st-frame-from-a-video-file-tp3001083p3001712.html"" rel=""nofollow"">here</a>)</p>

<p>But I get this response</p>

<blockquote>
  <p>Output file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)</p>
</blockquote>

<p>So, finally, the question is: since extracting all the frames and then compute differences with <em>OpenCV</em> is really slow, how can I use <em>FFMPEG</em> to produce a video containing the difference between two sources while keeping in mind that one of them has an extra frame at the beginning?</p>

<p>EDIT: I wanted to avoid posting endless console outputs but since you asked for it, here we go.</p>

<p><strong>1) Encoding</strong></p>

<p><em>Input</em></p>

<pre><code>ffmpeg -i ""720p50_mobcal_ter.avi"" -an -f mpeg2video -y ""720p50_mobcal_ter.mpg""
</code></pre>

<p><em>Output</em></p>

<pre><code>ffmpeg version N-76684-g1fe82ab Copyright (c) 2000-2015 the FFmpeg developers
  built with gcc 5.2.0 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libdcadec --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib
  libavutil      55.  6.100 / 55.  6.100
  libavcodec     57. 15.100 / 57. 15.100
  libavformat    57. 14.100 / 57. 14.100
  libavdevice    57.  0.100 / 57.  0.100
  libavfilter     6. 15.100 /  6. 15.100
  libswscale      4.  0.100 /  4.  0.100
  libswresample   2.  0.101 /  2.  0.101
  libpostproc    54.  0.100 / 54.  0.100
Input #0, avi, from '720p50_mobcal_ter.avi':
  Metadata:
    encoder         : Lavf57.14.100
  Duration: 00:00:10.08, start: 0.000000, bitrate: 552974 kb/s
    Stream #0:0: Video: rawvideo (I420 / 0x30323449), yuv420p, 1280x720, 554059 kb/s, SAR 1:1 DAR 16:9, 50 fps, 50 tbr, 50 tbn, 50 tbc
Output #0, mpeg2video, to '720p50_mobcal_ter.mpg':
  Metadata:
    encoder         : Lavf57.14.100
    Stream #0:0: Video: mpeg2video, yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 50 fps, 50 tbn, 50 tbc
    Metadata:
      encoder         : Lavc57.15.100 mpeg2video
Stream mapping:
  Stream #0:0 -&gt; #0:0 (rawvideo (native) -&gt; mpeg2video (native))
Press [q] to stop, [?] for help
frame=   41 fps=0.0 q=31.0 size=     984kB time=00:00:00.78 bitrate=10330.5kbits/frame=   80 fps= 78 q=31.0 size=    1323kB time=00:00:01.56 bitrate=6948.1kbits/frame=  124 fps= 80 q=31.0 size=    1725kB time=00:00:02.44 bitrate=5790.0kbits/frame=  168 fps= 81 q=31.0 size=    2084kB time=00:00:03.32 bitrate=5142.8kbits/frame=  212 fps= 81 q=31.0 size=    2482kB time=00:00:04.20 bitrate=4841.4kbits/frame=  255 fps= 82 q=31.0 size=    2840kB time=00:00:05.06 bitrate=4597.2kbits/frame=  296 fps= 82 q=31.0 size=    3133kB time=00:00:05.88 bitrate=4364.5kbits/frame=  338 fps= 82 q=24.8 size=    3453kB time=00:00:06.72 bitrate=4209.2kbits/frame=  382 fps= 82 q=31.0 size=    3723kB time=00:00:07.60 bitrate=4013.4kbits/frame=  426 fps= 83 q=31.0 size=    4005kB time=00:00:08.48 bitrate=3869.1kbits/frame=  470 fps= 83 q=24.8 size=    4276kB time=00:00:09.36 bitrate=3742.5kbits/frame=  504 fps= 83 q=31.0 Lsize=    4469kB time=00:00:10.06 bitrate=3639.3kbits/s
video:4469kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%
</code></pre>

<p><em>This adds the extra grey frame at the beginning, it just duplicates the first one</em></p>

<p><strong>2) Removing first frame</strong></p>

<p><em>Input</em></p>

<pre><code>ffmpeg -y -i ""720p50_mobcal_ter.mpg"" -an -f mpeg2video -vf select=gte(n\,1) ""CUT-720p50_mobcal_ter.mpg""
</code></pre>

<p><em>Output</em></p>

<pre><code>ffmpeg version N-76684-g1fe82ab Copyright (c) 2000-2015 the FFmpeg developers
  built with gcc 5.2.0 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libdcadec --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib
  libavutil      55.  6.100 / 55.  6.100
  libavcodec     57. 15.100 / 57. 15.100
  libavformat    57. 14.100 / 57. 14.100
  libavdevice    57.  0.100 / 57.  0.100
  libavfilter     6. 15.100 /  6. 15.100
  libswscale      4.  0.100 /  4.  0.100
  libswresample   2.  0.101 /  2.  0.101
  libpostproc    54.  0.100 / 54.  0.100
Input #0, mpegvideo, from '720p50_mobcal_ter.mpg':
  Duration: N/A, bitrate: N/A
    Stream #0:0: Video: mpeg2video (Main), yuv420p(tv), 1280x720 [SAR 1:1 DAR 16:9], max. 104857 kb/s, 50 fps, 50 tbr, 1200k tbn, 100 tbc
Output #0, mpeg2video, to 'CUT-720p50_mobcal_ter.mpg':
  Metadata:
    encoder         : Lavf57.14.100
    Stream #0:0: Video: mpeg2video, yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=2-31, 200 kb/s, 50 fps, 50 tbn, 50 tbc
    Metadata:
      encoder         : Lavc57.15.100 mpeg2video
Stream mapping:
  Stream #0:0 -&gt; #0:0 (mpeg2video (native) -&gt; mpeg2video (native))
Press [q] to stop, [?] for help
frame=  255 fps=0.0 q=31.0 size=    2781kB time=00:00:05.10 bitrate=4467.3kbits/frame=  503 fps=0.0 q=31.0 Lsize=    4415kB time=00:00:10.08 bitrate=3588.5kbits/s
video:4415kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.000000%
</code></pre>

<p><strong>3) Frame difference</strong></p>

<p><em>Input</em></p>

<pre><code>ffmpeg -y -i ""720p50_mobcal_ter.avi"" -i ""CUT-720p50_mobcal_ter.mpg"" -filter_complex ""blend=all_mode=difference,hue=s=0"" -c:v libx264 -crf 18 -c:a copy ""DIFF-720p50_mobcal_ter.mpg""
</code></pre>

<p><em>Output</em></p>

<pre><code>ffmpeg version N-76684-g1fe82ab Copyright (c) 2000-2015 the FFmpeg developers
  built with gcc 5.2.0 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libdcadec --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-libzimg --enable-lzma --enable-decklink --enable-zlib
  libavutil      55.  6.100 / 55.  6.100
  libavcodec     57. 15.100 / 57. 15.100
  libavformat    57. 14.100 / 57. 14.100
  libavdevice    57.  0.100 / 57.  0.100
  libavfilter     6. 15.100 /  6. 15.100
  libswscale      4.  0.100 /  4.  0.100
  libswresample   2.  0.101 /  2.  0.101
  libpostproc    54.  0.100 / 54.  0.100
Input #0, avi, from '720p50_mobcal_ter.avi':
  Metadata:
    encoder         : Lavf57.14.100
  Duration: 00:00:10.08, start: 0.000000, bitrate: 552974 kb/s
    Stream #0:0: Video: rawvideo (I420 / 0x30323449), yuv420p, 1280x720, 554059 kb/s, SAR 1:1 DAR 16:9, 50 fps, 50 tbr, 50 tbn, 50 tbc
Input #1, mpegvideo, from 'CUT-720p50_mobcal_ter.mpg':
  Duration: N/A, bitrate: N/A
    Stream #1:0: Video: mpeg2video (Main), yuv420p(tv), 1280x720 [SAR 1:1 DAR 16:9], max. 104857 kb/s, 50 fps, 50 tbr, 1200k tbn, 100 tbc
[libx264 @ 000002784dbeb980] using SAR=1/1
[libx264 @ 000002784dbeb980] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 AVX FMA3 AVX2 LZCNT BMI2
[libx264 @ 000002784dbeb980] profile High, level 3.2
[mpeg @ 000002784dbeaf20] VBV buffer size not set, using default size of 130KB
If you want the mpeg file to be compliant to some specification
Like DVD, VCD or others, make sure you set the correct buffer size
Output #0, mpeg, to 'D:\DOWNLOADS\TMP\Video TDI\AVI\DIFF-720p50_mobcal_ter.mpg':
  Metadata:
    encoder         : Lavf57.14.100
    Stream #0:0: Video: h264 (libx264), yuv420p, 1280x720 [SAR 1:1 DAR 16:9], q=-1--1, 50 fps, 90k tbn, 50 tbc (default)
    Metadata:
      encoder         : Lavc57.15.100 libx264
Stream mapping:
  Stream #0:0 (rawvideo) -&gt; blend:top
  Stream #1:0 (mpeg2video) -&gt; blend:bottom
  hue -&gt; Stream #0:0 (libx264)
Press [q] to stop, [?] for help
frame=  504 fps= 39 q=-1.0 Lsize=   32182kB time=00:00:10.04 bitrate=26258.5kbits/s
video:32061kB audio:0kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.377054%
[libx264 @ 000002784dbeb980] frame I:30    Avg QP:19.69  size:149974
[libx264 @ 000002784dbeb980] frame P:299   Avg QP:23.28  size: 69423
[libx264 @ 000002784dbeb980] frame B:175   Avg QP:24.48  size: 43280
[libx264 @ 000002784dbeb980] consecutive B-frames: 30.6% 69.4%  0.0%  0.0%
[libx264 @ 000002784dbeb980] mb I  I16..4: 18.3% 51.4% 30.4%
[libx264 @ 000002784dbeb980] mb P  I16..4:  0.6%  5.6%  2.4%  P16..4: 35.9% 22.9% 15.6%  0.0%  0.0%    skip:17.0%
[libx264 @ 000002784dbeb980] mb B  I16..4:  0.2%  0.5%  0.3%  B16..8: 49.5% 12.4%  5.6%  direct:15.5%  skip:16.1%  L0:47.8% L1:42.1% BI:10.1%
[libx264 @ 000002784dbeb980] 8x8 transform intra:57.5% inter:38.5%
[libx264 @ 000002784dbeb980] coded y,uvDC,uvAC intra: 90.7% 0.0% 0.0% inter: 50.3% 0.0% 0.0%
[libx264 @ 000002784dbeb980] i16 v,h,dc,p: 32% 23% 35% 10%
[libx264 @ 000002784dbeb980] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 11% 11% 41%  7%  5%  6%  5%  6%  8%
[libx264 @ 000002784dbeb980] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 14% 23%  8%  7%  7%  7%  7%  8%
[libx264 @ 000002784dbeb980] i8c dc,h,v,p: 100%  0%  0%  0%
[libx264 @ 000002784dbeb980] Weighted P-Frames: Y:33.8% UV:0.0%
[libx264 @ 000002784dbeb980] ref P L0: 58.1% 16.3% 14.2%  9.4%  2.0%
[libx264 @ 000002784dbeb980] ref B L0: 79.3% 20.7%
[libx264 @ 000002784dbeb980] kb/s:26056.02
</code></pre>

<p>The second command made everything work while the second one in the first part didn't (the one with the <code>-ss</code> option), so I could be quite happy about it but I'm not that sure if <em>FFMPEG</em> duplicates the first frame for every video or if it's just related to the one I'm using now, so it could be better to start off with a compressed video that has the same frame count of the original one.</p>

<p>So let's get to one final question: why does <em>FFMPEG</em> add a duplicated first frame at the beginning of the compressed video and how can I avoid that?</p>
",2015-12-25 10:50:51,2018-10-18 13:23:03,Video frame difference with FFMPEG,<opencv><video><ffmpeg><compression>,,,CC BY-SA 3.0,True,False,False,False,True
38511,34534202,2015-12-30 17:28:12,,"<p>The current stable (V3.0.0) and unstable (V3.1.0) version of openCV is mixing shared and non shared libraries if compiled on an Ubuntu 14.04.3 LTS.</p>

<pre><code>Linking CXX shared library ../../lib/libopencv_videoio.so
/usr/bin/ld: /usr/local/lib/libavcodec.a(avpacket.o): relocation R_X86_64_32 against `.rodata.str1.1' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libavcodec.a: error adding symbols: Bad value
collect2: error: ld returned 1 exit status
make[2]: *** [lib/libopencv_videoio.so.3.1.0] Error 1
make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>Trying to create <code>libopencv_videoio.so</code> using <code>libavcodec.a</code> seems to be the problem. There is a <a href=""http://code.opencv.org/issues/4053"" rel=""nofollow noreferrer"">bug report</a> about that, but it is only giving the advice to check if <code>libavcodec.so</code> is installed (which is) and a workaround to use <code>-DBUILD_SHARED_LIBS=OFF</code> to prevent creation of shared libraries. Does anyone knows the reason for this problem. The openCV people just state the Ubuntu packaged ffmpeg library to be not correct. Any idea?</p>

<p>The problem seems to be old. I just found a very <a href=""https://stackoverflow.com/questions/29953209"">similar question</a> not answered but commented with the advice of compiling ffmpeg with <code>./configure --enable-shared</code>. But there is already a shared library <code>/usr/lib/x86_64-linux-gnu/libavcodec.so</code> which obviously is not found. I am not a <code>cmake</code> expert but couldn't it be a problem of a miss leaded build process?</p>
",2017-05-23 12:04:02,2015-12-31 18:18:37,opencv V3 mixing shared and non shared,<build><ffmpeg><cmake><ubuntu-14.04><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
38530,34308740,2015-12-16 09:53:11,,"<p><code>VideoCapture.isOpened()</code> always returns zero whatever the video format is. I can play videos on the RPi but the OpenCV program closes silently without any error. I have the same code running on VS2010  on windows without problems.</p>

<ul>
<li>code compiles with no error, reaches the video read point and close</li>
<li>ffmpeg in 3rdpart  folder is available </li>
<li>code could read images without the need for the full path </li>
</ul>
",2015-12-16 11:06:11,2015-12-17 09:10:28,OpenCV VideoCapture always fails on Raspberry Pi 2,<c++><opencv><raspberry-pi>,,,CC BY-SA 3.0,True,False,False,False,True
38538,34346713,2015-12-18 00:25:23,,"<p>I am coding OpenCV with Python. I can't figure out how to read a video with <code>cv2.VideoCapture()</code>.</p>

<p>It is working fine with my webcam but doesn't return anything not even any error messages when I run the code below:</p>

<pre><code>import numpy as np
import cv2
cap = cv2.VideoCapture('vtest.avi')
while(cap.isOpened()):
    ret, frame = cap.read()
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    cv2.imshow('frame',gray)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break
cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>For what I did to solve this was:</p>

<p>1.used 
<code>cap = cv2.VideoCapture(""C:\vtest.avi"")</code> (nothing happened)</p>

<p>2.copied 
The <code>opencv_ffmpeg_64.dll</code> to the <code>base location(C:\Python27)</code> even in<br>
the folder called <code>DLLs(C:\Python27\DLLs)</code> but nothing is working .</p>
",2019-11-25 19:26:01,2019-11-25 19:26:01,why can't i read any video with openCV 3 and python2.7?,<python-2.7><opencv3.0>,,,CC BY-SA 4.0,True,False,False,False,True
38557,34597324,2016-01-04 18:18:00,,"<p>I want to create a video (mp4) from a set of images and want to add a background sound to it. The background sound can either be recorded or a file may be browsed using a content chooser in android.
The following code creates the video when a  new audio is recorded in 3gp format. However when i browse an audio file (mp3 for example), it shows this error and the video recorded cannot be played.</p>

<p>the error shown is:    </p>

<pre><code>org.bytedeco.javacv.FrameRecorder$Exception: avcodec_encode_video2() error -1: Could not encode video packet. :at video_settings$Generate.doInBackground(video_settings.java:298)
</code></pre>

<p>the code at video_settings.java:298 is    </p>

<pre><code>                    recorder.record(frame2);
</code></pre>

<p>relevant code is:    </p>

<pre><code>protected Void doInBackground(Void... arg0) {


        try {
            FrameGrabber grabber1 = new FFmpegFrameGrabber(paths.get(0));
            FrameGrabber grabber2 = new FFmpegFrameGrabber(backgroundSoundPath);
            Log.d(""hgbj"", backgroundSoundPath);
            grabber1.start();
            grabber2.start();

            FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(video, 320,
                    240, grabber2.getAudioChannels());// 320, 240
            recorder.setVideoCodec(avcodec.AV_CODEC_ID_MPEG4);//
            recorder.setPixelFormat(avutil.AV_PIX_FMT_YUV420P);
            recorder.setFormat(""mp4"");
            recorder.setFrameRate(2);
            recorder.setVideoBitrate(10 * 1024 * 1024);

            recorder.start();
            Frame frame1, frame2;
            long timeLength = grabber2.getLengthInTime();
            System.out.println(""total time = "" + timeLength);


            for (int i = 0; i &lt; paths.size(); i++) {
                // record this frame and then record (numFrames*percentageTime[i]/100) number of frames of the audio.
                frame1 = grabber1.grabFrame();
                long startTime = System.currentTimeMillis();
                recorder.setTimestamp(startTime * 1000);
                recorder.record(frame1);
                boolean first = true;
                // while current time - start time &lt; percentage time * total time / 100: record frame2
                long temp = timeLength * percentageTime[i] / 100000 + startTime;
                while (System.currentTimeMillis() &lt;= temp) {
                    frame2 = grabber2.grabFrame();
                    if (frame2 == null) break;
                    if (first) {
                        recorder.setTimestamp(startTime * 1000);
                        first = false;
                    }
                    recorder.record(frame2);
                }
                if (i &lt; paths.size() - 1) {
                    grabber1.stop();
                    grabber1 = new FFmpegFrameGrabber(paths.get(i + 1));
                    grabber1.start();
                }
            }
</code></pre>

<p>My question is: if its working for 3gp recorded files why isn't it working for browsed mp3 files and what should I do to make it work?
I have tried changing the codecs, frame height width, video bitrate but dont know any way to determine what bitrate etc is compatible with a given codec/format.
I am changing the content uri obtained from file browser into the real path so that's not the issue.</p>
",,2016-03-07 00:29:45,avcodec_encode_video2() error -1: Could not encode video packet - javacv,<android><audio><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
38600,34428436,2015-12-23 03:59:42,,"<p>I am trying to install opencv3 like this:</p>

<p><code>brew install opencv3 --with-qt5 --with-opengl --with-cuda --with-ffmpeg --with-contrib</code></p>

<p>I am getting this error:</p>

<pre><code>/tmp/opencv320151222-25898-1l53234/opencv-3.1.0/modules/core/src/opengl.cpp:1646:14: error: use of undeclared identifier 'clGetGLContextInfoKHR'; did you mean 'clGetContextInfo'?
        if (!clGetGLContextInfoKHR)
             ^~~~~~~~~~~~~~~~~~~~~
             clGetContextInfo
/System/Library/Frameworks/OpenCL.framework/Headers/cl.h:633:1: note: 'clGetContextInfo' declared here
clGetContextInfo(cl_context         /* context */, 
^
/tmp/opencv320151222-25898-1l53234/opencv-3.1.0/modules/core/src/opengl.cpp:1669:52: error: use of undeclared identifier 'CL_CURRENT_DEVICE_FOR_GL_CONTEXT_KHR'
        status = clGetGLContextInfoKHR(properties, CL_CURRENT_DEVICE_FOR_GL_CONTEXT_KHR, sizeof(cl_device_id), (void*)&amp;device, NULL);
</code></pre>

<p>What am I doing wrong?</p>
",2015-12-23 04:47:46,2016-01-03 20:53:43,homebrew installing opencv3 --with-contrib fails with use of undeclared identifier `clGetGLContextInfoKHR`,<opencv><homebrew>,,,CC BY-SA 3.0,True,False,False,False,True
38682,34645103,2016-01-06 23:56:42,,"<p>I created a <code>nodejs</code> app that gets an <code>rtsp</code> streaming with <code>FFMPEG</code> to analyse it with <code>Opencv3</code>. It is working if I install <code>FFMPEG</code> and <code>opencv</code> in my local.</p>

<p>But now I created a docker image that contains the installation of those libraries and I'm using it as a base to create another image &amp; container where I'm trying to run my app. When I run it inside that container I get this error over and over again when trying to get the <code>rtsp</code> stream with an <code>FFMPEG</code> instruction for <strong><em>""method SETUP failed: 455 Method Not Valid in This State""</em></strong>.</p>

<p>This is how I am installing FFMPEG in the image:</p>

<pre><code># ---------------------- OpenCV ffmpeg ---------------------------#
RUN mkdir -p /opt/src \
 &amp;&amp; curl -Lo /opt/src/ffmpeg-${FFMPEG_VERSION}.tar.gz \
    http://ffmpeg.org/releases/ffmpeg-${FFMPEG_VERSION}.tar.bz2 \
  &amp;&amp; tar -xvf /opt/src/ffmpeg-${FFMPEG_VERSION}.tar.gz -C /opt/src \
  &amp;&amp; cd /opt/src/ffmpeg-${FFMPEG_VERSION} \
  &amp;&amp; ./configure --enable-gpl --enable-avresample --enable-libopencore-amrnb \
  --enable-libx264 --enable-libxvid --enable-postproc --enable-version3 \
  --enable-shared --enable-pic --extra-ldexeflags=-pie \
  &amp;&amp; make -j $(nproc) \
  &amp;&amp; make install \
  &amp;&amp; ldconfig -v \
  &amp;&amp; rm -rf /opt/src

# ---------------------- OpenCV stuff ---------------------------#
RUN mkdir -p /opt/src/opencv-${OPENCV_VERSION}/build \
  &amp;&amp; curl -sLo /opt/src/opencv3.tar.gz \
     https://github.com/Itseez/opencv/archive/${OPENCV_VERSION}.tar.gz \
  &amp;&amp; tar -xzvf /opt/src/opencv3.tar.gz -C /opt/src \
  &amp;&amp; cd /opt/src/opencv-${OPENCV_VERSION}/build \
  &amp;&amp; cmake -D CMAKE_BUILD_TYPE=RELEASE \
    -D CMAKE_INSTALL_PREFIX=/usr/local \
    -D WITH_TBB=ON \
    -D WITH_OPENMP=ON \
    -D WITH_FFMPEG=ON .. \
  &amp;&amp; make -j ""$(nproc)"" \
  &amp;&amp; make install \
  &amp;&amp; ldconfig -v \
  &amp;&amp; rm -rf /opt/src
</code></pre>

<p>Do you have any idea what this error is and how to fix it? I think it might have to do with the initial configuration on the installation of either of them (<code>FFMPEG</code> or <code>OPENCV</code>).</p>

<p>Thanks for your help</p>
",2016-12-03 14:58:32,2016-12-03 14:58:32,ffmpeg failed - 455 Method Not Valid in This State,<opencv><ffmpeg><docker><streaming><rtsp>,,,CC BY-SA 3.0,True,False,False,False,True
38689,34508033,2015-12-29 09:20:11,,"<p>I am using ubuntu 15.04 and I have installed anaconda2 in it. I have edited the ~/.profile 's PATH variable to anaconda's bin directory.I have also installed default version of conda's opencv using <code>conda install opencv</code>  , but the problem is it doesn't work for videocapture. I tried various solution like installing <a href=""https://stackoverflow.com/questions/29249611/videocapture-does-not-work-in-anaconda"">ffmpeg</a> and tried every possible solution on internet, nothing worked. </p>

<p>Previously when I didn't have anaconda I was able to do videocapture and other computer vision stuff through official opencv version from website and my default ubuntu python(<code>/usr/bin/python</code>) so I am planning to reinstall opencv from website and link it with anaconda's python, how can I do it? </p>

<p>P.S. I will be needing anaconda packages so can't remove it and I am using a 64 bit ubuntu 15.04.  </p>
",2017-05-23 11:45:14,2015-12-29 09:20:11,link opencv with anaconda's python in ubuntu,<python><opencv><ubuntu>,,,CC BY-SA 3.0,True,False,False,False,True
38699,34605330,2016-01-05 06:16:56,,"<p>I'm trying to build a static OpenCV Python with ffmpeg enabled to run on AWS Lambda. I Need to upload OpenCV my cv2.so in a zip file.</p>

<p>To do so I set the <code>BUILD_SHARED_LIBS=OFF</code> and <code>WITH_FFPMEG=YES</code>. But when doing import cv2 in the Python shell, I get the error:</p>

<pre><code>ImportError: libavcodec.so.53: cannot open shared object file: No such file or directory
</code></pre>

<p>If I set <code>WITH_FFPMEG=NO</code> I don't get this error anymore but I need ffmpeg to read a video.</p>

<p>What I would like to do is OpenCV to use the static libavcodec library not the shared one. I thought setting up BUILD_SHARE_LIBS to off would be enough but it's not. T</p>

<p>here are no flags in the cmake file which let you specified the path to libavcodec. I've been looking for sometimes but I can't find a solution.</p>

<p>Any ideas?</p>
",2016-01-05 06:18:42,2016-01-05 06:18:42,Building static OpenCV with ffmpeg is still looking for shared libavcodec,<python><opencv><ffmpeg><static-linking><libavcodec>,,,CC BY-SA 3.0,True,False,False,False,True
38872,34851707,2016-01-18 09:52:23,,"<p>There are already many questions exist regarding <code>cv2.VideoCapture</code> but it doesn't help me.
I am using OpenCV 2.4.10 and python 2.7.9 , I am trying to capture video from built-in webcam (Toshiba ,Windows 7) . I am using this code</p>
<pre><code>import numpy as np 
import cv2

cap = cv2.VideoCapture(1)
print cap.isOpened()
print cap.get(3)
print cap.get(4)
while(True):
    ret,frame=cap.read()
    cv2.imshow('frame',frame)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break
cap.release()
cv2.destroyAllWindows()
</code></pre>
<p>And the problem is , When i first run this code it throws error : <code>error: (-215) size.width&gt;0 &amp;&amp; size.height&gt;0 in function cv::imshow</code></p>
<p><a href=""https://i.stack.imgur.com/YDok2.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YDok2.jpg"" alt=""error"" /></a></p>
<p>and just after waiting for hardly one minute , i again run this code and this time it's fine
<a href=""https://i.stack.imgur.com/7AZz9.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7AZz9.jpg"" alt=""fine"" /></a></p>
<p>And this is happening again and again , sometimes it's work good but sometimes fails and give error. Any solution to this ?</p>
<p>I copied the <code>opencv_ffmpeg2410.dll</code> file from <code>C:\Applications\opencv\build\x86\vc10\bin</code> into the python path <code>C:\Python27</code>(<a href=""https://stackoverflow.com/questions/11699298/opencv-2-4-videocapture-not-working-on-windows"">OpenCV 2.4 VideoCapture not working on Windows</a>)</p>
<p>I tried cv2.VideoCapture(0) but in this case web-camera didn't even start (web-camera light did not blink)</p>
",2020-06-20 09:12:55,2016-01-18 10:10:03,cv2.VideoCapture error,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
39065,34868454,2016-01-19 04:20:53,,"<p>Currently i am trying to play with image processing in Android studio using javacv. i have add these five code in dependency:</p>

<pre><code>compile 'org.bytedeco:javacv:+'
compile 'org.bytedeco.javacpp-presets:opencv:3.0.0-1.1:android-x86'
compile 'org.bytedeco.javacpp-presets:ffmpeg:2.8.1-1.1:android-x86'
compile 'org.bytedeco.javacpp-presets:opencv:3.0.0-1.1:android-arm'
compile 'org.bytedeco.javacpp-presets:ffmpeg:2.8.1-1.1:android-arm'
</code></pre>

<p>I have found that the systax is totally different from the one in Eclipse.
For example:</p>

<pre><code>opencv_core.Mat img = imread( dir + ""mountain.jpg"");
opencv_core.Mat temp = new opencv_core.Mat(img.rows() , img.cols());
opencv_core.flip(img, temp, 1);
imwrite(dir + ""123.jpg"", temp );
</code></pre>

<p>However nothing is written in my dir.
Anyone know how to write it in my specified dir.
Please give me a helping hand</p>
",,2016-01-19 04:20:53,Android studio javacv fail on writting image using imwrite,<android><javacv>,,,CC BY-SA 3.0,True,True,False,False,True
39168,34974781,2016-01-24 10:43:29,,"<p>i used the below code from 
<a href=""http://docs.opencv.org/master/db/d5c/tutorial_py_bg_subtraction.html#gsc.tab=0"" rel=""nofollow"">http://docs.opencv.org/master/db/d5c/tutorial_py_bg_subtraction.html#gsc.tab=0</a></p>

<pre><code>import numpy as np
import cv2

cap = cv2.VideoCapture(0)

fgbg = cv2.createBackgroundSubtractorMOG2()

while(1):
    ret, frame = cap.read()

    fgmask = fgbg.apply(frame)

    cv2.imshow('frame',fgmask)
    k = cv2.waitKey(30) &amp; 0xff
    if k == 27:
        break

cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>I have added opencv_ffmpeg310.dll to PATH too. Please help</p>
",,2016-01-24 10:43:29,Python program crashes on executing opencv code with videocapture in windows,<python><windows><opencv><background-subtraction>,,,CC BY-SA 3.0,True,False,False,False,True
39205,34978351,2016-01-24 16:33:53,,"<p>Hi I a have a question I have openCV and ffmpeg on the Raspberry Pi and I am trying to stream live video from the raspberry pi. At the moment I have the output output of openCV saving as a .avi file and I have a command for ffmpeg 
<code>ffmpeg -i out.avi -hls_segment_filename '%03d.ts' stream.m3u8</code> 
This Command take the output creates the playlist(.m3u8) and the segments(.ts).</p>

<p>At present I have openCV programmed in C++ (this can not change) I have an executable programmed from this and I have both the executable C++ and the above ffmpeg in a Bash Script. </p>

<pre><code>#!/bin/bash

while true; do
./OpenCV
ffmpeg -i out.avi -hls_segment_filename '%03d.ts' stream.m3u8
done
</code></pre>

<p>This does allow me to stream the processed openCV video my issue is as the Bash script is in a while loop it keeps resetting the playlist and the .ts files, so i have to constantly press play on the client connection. </p>

<p>Is there anyway around this?</p>

<p>I tried including a variable that would increment every loop but if i replace '%03d' with this i get an error. </p>
",2016-01-24 20:50:29,2016-01-25 10:09:09,Passing processed Video from OpenCV to FFmpeg for HLS streaming (Raspberry PI),<linux><bash><opencv><ffmpeg><http-live-streaming>,,,CC BY-SA 3.0,True,False,False,False,True
39211,35016316,2016-01-26 14:33:52,,"<p>I am trying to install OpenCV 3.0.0 on eclipse. I followed <a href=""http://rodrigoberriel.com/2014/10/installing-opencv-3-0-0-on-ubuntu-14-04/"" rel=""nofollow"">this</a> guide to build OpenCV and now I am trying to install it on eclipse using <a href=""http://docs.opencv.org/3.0-beta/doc/tutorials/introduction/java_eclipse/java_eclipse.html"" rel=""nofollow"">this guide</a>.</p>

<p>The problem is, there is no Java folder inside the build folder. What am I doing wrong?</p>

<p><strong>Output of cmake:</strong></p>

<pre><code> cmake -DBUILD_SHARED_LIBS=OFF ..
-- The CXX compiler identification is GNU 4.8.4
-- The C compiler identification is GNU 4.8.4
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detected version of GNU GCC: 48 (408)
-- Performing Test HAVE_CXX_FSIGNED_CHAR
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Success
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Success
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Success
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Success
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_CXX_WERROR_ADDRESS
-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success
-- Performing Test HAVE_C_WERROR_ADDRESS
-- Performing Test HAVE_C_WERROR_ADDRESS - Success
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_CXX_WFORMAT
-- Performing Test HAVE_CXX_WFORMAT - Success
-- Performing Test HAVE_C_WFORMAT
-- Performing Test HAVE_C_WFORMAT - Success
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WMISSING_DECLARATIONS
-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
-- Performing Test HAVE_C_WMISSING_PROTOTYPES
-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WUNDEF
-- Performing Test HAVE_CXX_WUNDEF - Success
-- Performing Test HAVE_C_WUNDEF
-- Performing Test HAVE_C_WUNDEF - Success
-- Performing Test HAVE_CXX_WINIT_SELF
-- Performing Test HAVE_CXX_WINIT_SELF - Success
-- Performing Test HAVE_C_WINIT_SELF
-- Performing Test HAVE_C_WINIT_SELF - Success
-- Performing Test HAVE_CXX_WPOINTER_ARITH
-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success
-- Performing Test HAVE_C_WPOINTER_ARITH
-- Performing Test HAVE_C_WPOINTER_ARITH - Success
-- Performing Test HAVE_CXX_WSHADOW
-- Performing Test HAVE_CXX_WSHADOW - Success
-- Performing Test HAVE_C_WSHADOW
-- Performing Test HAVE_C_WSHADOW - Success
-- Performing Test HAVE_CXX_WSIGN_PROMO
-- Performing Test HAVE_CXX_WSIGN_PROMO - Success
-- Performing Test HAVE_C_WSIGN_PROMO
-- Performing Test HAVE_C_WSIGN_PROMO - Failed
-- Performing Test HAVE_CXX_WNO_NARROWING
-- Performing Test HAVE_CXX_WNO_NARROWING - Success
-- Performing Test HAVE_C_WNO_NARROWING
-- Performing Test HAVE_C_WNO_NARROWING - Success
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_CXX_PTHREAD
-- Performing Test HAVE_CXX_PTHREAD - Success
-- Performing Test HAVE_C_PTHREAD
-- Performing Test HAVE_C_PTHREAD - Success
-- Performing Test HAVE_CXX_MARCH_I686
-- Performing Test HAVE_CXX_MARCH_I686 - Success
-- Performing Test HAVE_C_MARCH_I686
-- Performing Test HAVE_C_MARCH_I686 - Success
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_CXX_MSSE
-- Performing Test HAVE_CXX_MSSE - Success
-- Performing Test HAVE_C_MSSE
-- Performing Test HAVE_C_MSSE - Success
-- Performing Test HAVE_CXX_MSSE2
-- Performing Test HAVE_CXX_MSSE2 - Success
-- Performing Test HAVE_C_MSSE2
-- Performing Test HAVE_C_MSSE2 - Success
-- Performing Test HAVE_CXX_MNO_AVX
-- Performing Test HAVE_CXX_MNO_AVX - Success
-- Performing Test HAVE_C_MNO_AVX
-- Performing Test HAVE_C_MNO_AVX - Success
-- Performing Test HAVE_CXX_MSSE3
-- Performing Test HAVE_CXX_MSSE3 - Success
-- Performing Test HAVE_C_MSSE3
-- Performing Test HAVE_C_MSSE3 - Success
-- Performing Test HAVE_CXX_MNO_SSSE3
-- Performing Test HAVE_CXX_MNO_SSSE3 - Success
-- Performing Test HAVE_C_MNO_SSSE3
-- Performing Test HAVE_C_MNO_SSSE3 - Success
-- Performing Test HAVE_CXX_MNO_SSE4_1
-- Performing Test HAVE_CXX_MNO_SSE4_1 - Success
-- Performing Test HAVE_C_MNO_SSE4_1
-- Performing Test HAVE_C_MNO_SSE4_1 - Success
-- Performing Test HAVE_CXX_MNO_SSE4_2
-- Performing Test HAVE_CXX_MNO_SSE4_2 - Success
-- Performing Test HAVE_C_MNO_SSE4_2
-- Performing Test HAVE_C_MNO_SSE4_2 - Success
-- Performing Test HAVE_CXX_MFPMATH_SSE
-- Performing Test HAVE_CXX_MFPMATH_SSE - Success
-- Performing Test HAVE_C_MFPMATH_SSE
-- Performing Test HAVE_C_MFPMATH_SSE - Success
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_C_FFUNCTION_SECTIONS
-- Performing Test HAVE_C_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN - Failed
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Check if the system is big endian
-- Searching 16 bit integer
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of unsigned short
-- Check size of unsigned short - done
-- Using unsigned short
-- Check if the system is big endian - little endian
-- Found ZLIB: /usr/lib/i386-linux-gnu/libz.so (found suitable version ""1.2.8"", minimum required is ""1.2.3"") 
-- Found TIFF: /usr/lib/i386-linux-gnu/libtiff.so (found version ""4.0.3"") 
-- Found JPEG: /usr/lib/i386-linux-gnu/libjpeg.so  
-- Performing Test HAVE_C_WNO_UNUSED_VARIABLE
-- Performing Test HAVE_C_WNO_UNUSED_VARIABLE - Success
-- Performing Test HAVE_C_WNO_SHADOW
-- Performing Test HAVE_C_WNO_SHADOW - Success
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Success
-- Found Jasper: /usr/lib/i386-linux-gnu/libjasper.so (found version ""1.900.1"") 
-- Found ZLIB: /usr/lib/i386-linux-gnu/libz.so (found version ""1.2.8"") 
-- Found PNG: /usr/lib/i386-linux-gnu/libpng.so (found version ""1.2.50"") 
-- Looking for /usr/include/libpng/png.h
-- Looking for /usr/include/libpng/png.h - found
-- Found OpenEXR: /usr/lib/i386-linux-gnu/libIlmImf.so
-- checking for module 'gtk+-3.0'
--   package 'gtk+-3.0' not found
-- checking for module 'gtk+-2.0'
--   found gtk+-2.0, version 2.24.23
-- checking for module 'gthread-2.0'
--   found gthread-2.0, version 2.40.2
-- checking for module 'gstreamer-base-1.0'
--   package 'gstreamer-base-1.0' not found
-- checking for module 'gstreamer-video-1.0'
--   package 'gstreamer-video-1.0' not found
-- checking for module 'gstreamer-app-1.0'
--   package 'gstreamer-app-1.0' not found
-- checking for module 'gstreamer-riff-1.0'
--   package 'gstreamer-riff-1.0' not found
-- checking for module 'gstreamer-pbutils-1.0'
--   package 'gstreamer-pbutils-1.0' not found
-- checking for module 'gstreamer-base-0.10'
--   found gstreamer-base-0.10, version 0.10.36
-- checking for module 'gstreamer-video-0.10'
--   found gstreamer-video-0.10, version 0.10.36
-- checking for module 'gstreamer-app-0.10'
--   found gstreamer-app-0.10, version 0.10.36
-- checking for module 'gstreamer-riff-0.10'
--   found gstreamer-riff-0.10, version 0.10.36
-- checking for module 'gstreamer-pbutils-0.10'
--   found gstreamer-pbutils-0.10, version 0.10.36
-- checking for module 'libdc1394-2'
--   found libdc1394-2, version 2.2.1
-- checking for module 'libv4l1'
--   found libv4l1, version 1.0.1
-- checking for module 'libv4l2'
--   found libv4l2, version 1.0.1
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   found libavcodec, version 54.35.0
-- checking for module 'libavformat'
--   found libavformat, version 54.20.4
-- checking for module 'libavutil'
--   found libavutil, version 52.3.0
-- checking for module 'libswscale'
--   found libswscale, version 2.1.1
-- checking for module 'libavresample'
--   package 'libavresample' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'libgphoto2'
--   package 'libgphoto2' not found
-- ICV: Removing previous unpacked package: /home/newton/Desktop/Java/Projects/Video/Jars/opencv-3.0.0/3rdparty/ippicv/unpack
-- ICV: Unpacking ippicv_linux_20141027.tgz to /home/newton/Desktop/Java/Projects/Video/Jars/opencv-3.0.0/3rdparty/ippicv/unpack...
-- ICV: Package successfully downloaded
-- found IPP (ICV version): 8.2.1 [8.2.1]
-- at: /home/newton/Desktop/Java/Projects/Video/Jars/opencv-3.0.0/3rdparty/ippicv/unpack/ippicv_lnx
-- Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) 
-- To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR=&lt;filepath&gt; option to cmake
-- Found PythonInterp: /usr/bin/python2.7 (found suitable version ""2.7.6"", minimum required is ""2.7"") 
-- Found PythonLibs: /usr/lib/i386-linux-gnu/libpython2.7.so (found suitable exact version ""2.7.6"") 
-- Found PythonInterp: /usr/bin/python3.4 (found suitable version ""3.4.3"", minimum required is ""3.4"") 
-- Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (Required is exact version ""3.4.3"")
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named 'numpy'
-- Found JNI: /usr/lib/jvm/default-java/jre/lib/i386/libjawt.so  
-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT MATLAB_ARCH MATLAB_BIN) 
-- VTK is not found. Please set -DVTK_DIR in CMake to VTK build directory, or to VTK install subdirectory with VTKConfig.cmake file
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_SHADOW
-- Performing Test HAVE_CXX_WNO_SHADOW - Success
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
--   videoio: Removing WinRT API headers by default
-- 
-- General configuration for OpenCV 3.0.0 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.14.2-031402-generic i686
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      NO
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.4)
--     C++ flags (Release):         -fPIC   -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -mfpmath=sse -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -O2 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fPIC   -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -mfpmath=sse -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fPIC   -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -mfpmath=sse -ffunction-sections -fvisibility=hidden -O2 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fPIC   -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -march=i686 -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -mfpmath=sse -ffunction-sections -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
--     Extra dependencies:          /usr/lib/i386-linux-gnu/libpng.so /usr/lib/i386-linux-gnu/libz.so /usr/lib/i386-linux-gnu/libtiff.so /usr/lib/i386-linux-gnu/libjasper.so /usr/lib/i386-linux-gnu/libjpeg.so /usr/lib/i386-linux-gnu/libImath.so /usr/lib/i386-linux-gnu/libIlmImf.so /usr/lib/i386-linux-gnu/libIex.so /usr/lib/i386-linux-gnu/libHalf.so /usr/lib/i386-linux-gnu/libIlmThread.so gtk-x11-2.0 gdk-x11-2.0 atk-1.0 gio-2.0 pangoft2-1.0 pangocairo-1.0 gdk_pixbuf-2.0 cairo pango-1.0 fontconfig freetype gstvideo-0.10 gstapp-0.10 gstbase-0.10 gstriff-0.10 gstpbutils-0.10 gstreamer-0.10 gobject-2.0 gmodule-2.0 gthread-2.0 xml2 glib-2.0 dc1394 v4l1 v4l2 avcodec avformat avutil swscale stdc++ dl m pthread rt
--     3rdparty dependencies:       libwebp ippicv
-- 
--   OpenCV modules:
--     To be built:                 hal core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab python2
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python3 viz
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.24.23)
--     GThread :                    YES (ver 2.40.2)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/i386-linux-gnu/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/i386-linux-gnu/libjpeg.so (ver )
--     WEBP:                        build (ver 0.3.1)
--     PNG:                         /usr/lib/i386-linux-gnu/libpng.so (ver 1.2.50)
--     TIFF:                        /usr/lib/i386-linux-gnu/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/i386-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/i386-linux-gnu/libImath.so /usr/lib/i386-linux-gnu/libIlmImf.so /usr/lib/i386-linux-gnu/libIex.so /usr/lib/i386-linux-gnu/libHalf.so /usr/lib/i386-linux-gnu/libIlmThread.so (ver 1.6.1)
--     GDAL:                        NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.35.0)
--       format:                    YES (ver 54.20.4)
--       util:                      YES (ver 52.3.0)
--       swscale:                   YES (ver 2.1.1)
--       resample:                  NO
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 0.10.36)
--       video:                     YES (ver 0.10.36)
--       app:                       YES (ver 0.10.36)
--       riff:                      YES (ver 0.10.36)
--       pbutils:                   YES (ver 0.10.36)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l1 (ver 1.0.1) / libv4l2 (ver 1.0.1)
--     XIMEA:                       NO
--     Xine:                        NO
--     gPhoto2:                     NO
-- 
--   Other third-party libraries:
--     Use IPP:                     8.2.1 [8.2.1]
--          at:                     /home/newton/Desktop/Java/Projects/Video/Jars/opencv-3.0.0/3rdparty/ippicv/unpack/ippicv_lnx
--     Use IPP Async:               NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use pthreads for parallel for:
--                                  YES
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/newton/Desktop/Java/Projects/Video/Jars/opencv-3.0.0/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 
--   Python 2:
--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.6)
--     Libraries:                   /usr/lib/i386-linux-gnu/libpython2.7.so (ver 2.7.6)
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.8.2)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Python 3:
--     Interpreter:                 /usr/bin/python3.4 (ver 3.4.3)
-- 
--   Python (for build):            /usr/bin/python2.7
-- 
--   Java:
--     ant:                         NO
--     JNI:                         /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include
--     Java wrappers:               NO
--     Java tests:                  NO
-- 
--   Matlab:
--     mex:                         NO
-- 
--   Documentation:
--     Doxygen:                     NO
--     PlantUML:                    NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/newton/Desktop/Java/Projects/Video/Jars/opencv-3.0.0/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/newton/Desktop/Java/Projects/Video/Jars/opencv-3.0.0/build
</code></pre>

<p>** <strong>Update</strong> **</p>

<p>It seems that I was missing the ant in the Java section:</p>

<pre><code>--   Java:
--     ant:                         NO
--     JNI:                         /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include
--     Java wrappers:               NO
--     Java tests:                  NO
</code></pre>

<p>After running:</p>

<pre><code>sudo apt-get install ant
</code></pre>

<p>I got the output:</p>

<pre><code>--     ant:                         /usr/bin/ant (ver 1.9.3)
--     JNI:                         /usr/lib/jvm/default-java/include/usr/lib/jvm/default-java/include /usr/lib/jvm/default-java/include
--     Java wrappers:               YES
--     Java tests:                  YES
</code></pre>

<p>but still, there is no Java folder in build folder.</p>
",2016-01-26 15:19:26,2016-01-27 13:01:19,Install OpenCV 3.0.0 on eclipse - Ubuntu 14.04 32bit,<java><eclipse><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
39301,35133982,2016-02-01 15:15:04,,"<p>I need to capture images from a webcam livestream that is provided <a href=""http://www.ag-wanderfalken.de/index.php?option=com_wrapper&amp;Itemid=78"" rel=""nofollow noreferrer"">here</a></p>

<p>Has anyone an idea how to do it?</p>

<p>I found <a href=""https://stackoverflow.com/questions/3090885/is-it-possible-to-retrieve-frames-as-images-out-of-fms-live-stream"">this</a> answer but it doesn't help me. When I enter  </p>

<pre><code>ffmpeg -i rtmp://85.126.233.214/heidelberg-live/stream1.flv -r 1 -f image2 -vcodec mjpeg captured%d.jpg
</code></pre>

<p>It returns </p>

<pre><code>[rtmp @ 0xc45f40] Cannot open connection tcp://85.126.233.214:1935
rtmp://85.126.233.214/heidelberg-live/stream1.flv: Connection timed out
Conversion failed!
</code></pre>

<p>This is what the livestream part of the website looks like:  </p>

<pre><code>&lt;embed type=""application/x-shockwave-flash""  
src=""http://www.blitzvideoserver06.de/blitzvideoplayer4.swf""  
width=""480"" 
height=""420"" 
style=""undefined"" 
id=""blitzvideoplayer"" 
name=""blitzvideoplayer"" 
bgcolor=""#ffffff"" 
quality=""high"" 
allowfullscreen=""true""  
flashvars=""videofile1=rtmp://85.126.233.214/heidelberg-live/stream1.flv&amp;amp;

live=1&amp;amp;
keinlogo=1&amp;amp;
mitstartbutton=1&amp;amp;
bgc=ffffff""&gt;
</code></pre>
",2017-05-23 11:44:58,2016-02-01 19:46:43,How to catch images from a http webcam livestream,<image-processing><ffmpeg><webcam><http-live-streaming><live-streaming>,,,CC BY-SA 3.0,False,False,False,False,True
39347,35066470,2016-01-28 16:14:04,,"<p>I have recently been getting the following error by attempting to start an instance of JavaCV's FFmpegFrameGrabber:</p>

<pre><code>java.lang.UnsatisfiedLinkError: org.bytedeco.javacpp.avutil
    at java.lang.Class.classForName(Native Method)
    at java.lang.Class.forName(Class.java:324)
    at org.bytedeco.javacpp.Loader.load(Loader.java:413)
    at org.bytedeco.javacpp.Loader.load(Loader.java:381)
    at org.bytedeco.javacpp.avformat$AVFormatContext.&lt;clinit&gt;(avformat.java:2597)
    at org.bytedeco.javacv.FFmpegFrameGrabber.startUnsafe(FFmpegFrameGrabber.java:386)
    at org.bytedeco.javacv.FFmpegFrameGrabber.start(FFmpegFrameGrabber.java:380)...
</code></pre>

<p>While solutions to this problem exist, none worked for me. </p>

<p>Through many trials i have discovered that weirdly enough, if i do not include Realm in my project, i no longer receive this error.</p>

<p>Here is the part of my build.gradle file in which I include all of these libraries:</p>

<pre><code>compile group: 'org.bytedeco', name: 'javacv', version: '1.1'
compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '3.0.0-1.1', classifier: 'android-arm'
compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '3.0.0-1.1', classifier: 'android-x86'
compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.8.1-1.1', classifier: 'android-arm'
compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.8.1-1.1', classifier: 'android-x86'

// ORM
compile 'io.realm:realm-android:0.87.2' // Tested NOT OK - Causes JavaCV to crash
//
</code></pre>

<p>I am thinking that there may be a solution to this problem that i am not aware of. I found no mention anywhere on the internet about library incompatibility or why this behaviour may occur.</p>

<p>I will edit this post with any additional details that anyone might need.</p>

<p>Any help would be greatly appreciated.</p>

<p><strong>EDIT</strong></p>

<p>I attempted to apply the fix described <a href=""https://realm.io/docs/java/latest/#faq"">here</a>.
Now my packaging options look like this: </p>

<pre><code>packagingOptions {
    exclude 'META-INF/LICENSE.txt'
    exclude 'META-INF/NOTICE.txt'
    exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.properties'
    exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.xml'
    exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.properties'
    exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.xml'

    exclude ""lib/arm64-v8a/librealm-jni.so""
}
</code></pre>

<p>Unfortunately, this change has no effect. I'm still stuck.</p>
",2016-01-28 16:59:47,2017-02-08 15:37:15,"Using JavaCV and Realm together causes ""java.lang.UnsatisfiedLinkError""",<java><android><realm><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
39359,35183580,2016-02-03 17:18:30,,"<p>My goal is to analyze a video file (in this case an mp4 file) for the occurrence of certain features and create a new video file that just contains the video and audio from slightly before and slightly after those features occurring. </p>

<p>I'm using Python/OpenCV and can correctly identify the features in the video and can create the new video file that I want.</p>

<p>I can also use the <code>subprocess</code> module and <code>ffmpeg</code> to extract the full audio from the original file and I can use the <code>wave</code> module to iterate over the audio frames. I'm also planning to use <code>ffmpeg</code> to combine the resulting audio and video files.</p>

<p>My issue is extracting the audio that matches up with the frames in the new, condensed video file. The number of frames in the original video file (according to OpenCV) doesn't equal the number of frames returned from <code>Wave.getnframes()</code>, so I'm not sure how to extract just the audio that I need.</p>
",2016-02-03 21:35:20,2018-07-18 04:33:46,Python - How do I extract audio and video from the same parts of a file?,<python><opencv><audio><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
39496,35232123,2016-02-05 19:35:42,,"<p>I am stuck trying to open a mpeg4 video file in openCV. The video file was generated in ffmpeg using this command:</p>

<pre><code>ffmpeg -y -f rawvideo -vcodec rawvideo -s 2048x2048 -r 30 -pix_fmt gray -i \\.\pipe\pipe1 -qv 5 -vcodec mpeg4 out.avi
</code></pre>

<p>now I am trying to open the file like this</p>

<pre><code>import cv2
#avi_path is full path to avi
cap = cv2.VideoCapture(avi_path)
img1=cap.read()
</code></pre>

<p>but this returns: False, none</p>

<p>The same procedure works fine if I use libxvid for encoding instead but I want to use mpeg4 because it encodes faster (I need to encode several streams simultaneously).</p>

<p>Should openCV be able to open the mpeg4 encoded avi file?</p>

<p>I am using openCV3 and python 2.7 under Windows 64bit</p>

<p>I am also attaching GSpot panels of one video encoded in xvid (left) which I can open. And one video encoded in mpeg4 (right) which I cannot open.
<a href=""https://i.stack.imgur.com/1UVRj.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/1UVRj.jpg"" alt=""enter image description here""></a>
I have a suspicion that some LAV splitter/decoder settings may interfere ?! - but I don't understand enough of that to get to the bottom of it.</p>

<p>This is my ffprobe output for the mpeg4 file encoded with the additional ffmpeg parameter '-vtag xvid' as suggested in a comment by Mulvya</p>

<pre><code>  ffprobe version N-75474-g74e4948 Copyright (c) 2007-2015 the FFmpeg developers
  built with gcc 4.9.3 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libdcadec --enable-libfreetype --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs --enable-libxvid --enable-lzma --enable-decklink --enable-zlib
  libavutil      55.  2.100 / 55.  2.100
  libavcodec     57.  3.100 / 57.  3.100
  libavformat    57.  2.100 / 57.  2.100
  libavdevice    57.  0.100 / 57.  0.100
  libavfilter     6.  6.100 /  6.  6.100
  libswscale      4.  0.100 /  4.  0.100
  libswresample   2.  0.100 /  2.  0.100
  libpostproc    54.  0.100 / 54.  0.100
Input #0, avi, from 'out1b.avi':
  Metadata:
    encoder         : Lavf57.2.100
  Duration: 00:00:23.50, start: 0.000000, bitrate: 2049 kb/s
    Stream #0:0: Video: mpeg4 (Simple Profile) (xvid / 0x64697678), yuv420p, 2048x2048 [SAR 1:1 DAR 1:1], 2044 kb/s, 30 fps, 30 tbr, 30 tbn, 30 tbc
</code></pre>
",2016-02-08 09:17:45,2016-02-08 09:42:52,opening ffmpeg/mpeg-4 avi in openCV 3 python 2.7,<python><python-2.7><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
39601,35340437,2016-02-11 13:18:26,,"<p>I have bought a <code>HD HDMI to UVC</code> device which has HDMI video source input and UVC for video output <a href=""https://rads.stackoverflow.com/amzn/click/com/B00NI9ORGI"" rel=""nofollow noreferrer"" rel=""nofollow noreferrer"">here</a>.<br>
I connect it from laptop A (input source HDMI) to laptop B (output USB).<br>
I have installed Ubuntu 14.04 desktop on Laptop B and Win 8.1 on Laptop A.<br>
B also have ffmpeg, opencv and sdl library installed.<br>
My target is to capture video and audio from A via <code>HD HDMI to UVC</code> on B.<br>
So I have decided to use libav of <code>ffmpeg</code>.<br>
I saw <a href=""https://stackoverflow.com/questions/27463337/using-ffmpeg-to-capture-frames-from-webcam-and-audio-from-micro-and-saving-to-fi"">this</a> and used <code>avformat_open_input</code> function but this function returned error.<br>
I thought that the error was occurred because the second parameter of <code>avformat_open_input</code> (<code>const char * url</code>) was invalid.<br>
I know that the <code>url</code> should be like <code>video:video device name:audio:audio card name</code>.<br>
How can I indicate the device names?    </p>

<p>Here's the result of <code>v4l2-ctl --list-devices</code> command in terminal.    </p>

<pre><code>HD WebCam (usb-0000:02:03.0-1):   
    /dev/video0
HD TV CAM (usb-0000:03:00.0-2.1):   
    /dev/video1
</code></pre>

<p>And the result of <code>arecord -l</code> in terminal.  </p>

<pre><code>**** List of CAPTURE Hardware Devices ****  
card 0: AudioPCI [Ensoniq AudioPCI], device 0: ES1371/1 [ES1371 DAC2/ADC]  
Subdevices: 1/1  
Subdevice #0: subdevice #0    
card 1: CAM [HD TV CAM], device 0: USB Audio [USB Audio]    
Subdevices: 1/1  
Subdevice #0: subdevice #0  
</code></pre>

<p>Thank you.</p>
",2017-05-23 12:23:56,2016-05-05 09:46:41,How can I use avformat_open_input function (ffmpeg),<c++><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
39644,35242735,2016-02-06 15:27:03,,"<pre><code>import cv2
import numpy as np

cap = cv2.VideoCapture('traffic.avi')

retval, frame = cap.read()

print retval

================ RESTART: J:\Python For DIP\traffic_video.py ================
False
&gt;&gt;&gt; 
</code></pre>

<p>The Value of retval is always False, which means the video is not read by the command. It must be True to read frames. I don't know what to do. However when I use my default webcam it turns to be True. I tried many videos and the same problem appears. Note: I have installed the ffmpeg correctly.</p>

<p>Note: This is not the full code, in this step I am only validating cap.read() either True or False</p>
",2016-02-06 17:42:29,2020-04-07 09:32:18,Can not Read or Play a Video in OpenCV+Python using VideoCapture,<python-2.7><opencv><video-capture><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
39700,35268536,2016-02-08 11:26:53,,"<p>Is there a way OpenCV can read large (>2GB) .avi video files?</p>

<p>I am using openCV 3.0 and python 2.7 on Windows 7 64 bit.</p>

<p>I have mpeg4 compressed .avi files, often > 2GB. These are created using ffmpeg.
Such files read fine up to some point using the following commands:</p>

<pre><code>import cv2
#avi_path is full path to avi
cap = cv2.VideoCapture(avi_path)
img1=cap.read()
</code></pre>

<p>but at some frame number, read() returns 'false'</p>

<p>Using Gspot, I found that such problematic videos are 'Multipart OpenDML AVI' and read() seems to only be able to read the first part. Doing some google searches, it seems other people are having similar issues but no obvious solution.</p>

<p>apparently, openCV VideoWriter is also limited to 2 GB videos:
<a href=""http://docs.opencv.org/2.4/doc/tutorials/highgui/video-write/video-write.html"" rel=""nofollow"">openCV documentation</a>
Is the limitation in VideoCapture by design also?</p>

<p>Is there a workaround perhaps to read large video files?
Alternatively, can I avoid creating multipart avi files in ffmpeg?</p>
",,2016-02-08 13:22:20,opencv and ffmpeg multipart avi files > 2GB,<opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
39743,35421232,2016-02-15 23:48:33,,"<p>I am passing a processed video from openCV to ffmpeg via a pipe here is the code</p>

<pre><code>./OpenCV &amp; \
 tail -n +0 -f out.avi  | ffmpeg -i pipe:0  -hls_time 1 -hls_list_size 0 -hls_wrap 10 -hls_segment_filename '%03d.ts' stream.m3u8 
</code></pre>

<p>My issue is the output .ts files are not in a uniformed duration they change from file to file.</p>

<p>These are mostly long say 60 seconds. This means the connecting client has to wait for the first stream to finish before the playlist file (.m3u8) file is created. Therefor in this example they are 60 seconds or so behind live video and if the next .ts file is larger the streaming stops until this is finished. If the client tries to play before the next .ts file is created they are played the first .ts file. </p>

<p>The frame rate from openCV is 1 frame per second.</p>

<p>tail changes the output file of openCV called (out.avi) to a stdout.</p>

<p>Any help would be great.</p>
",,2016-03-06 14:45:21,Setting HLS segment times,<linux><bash><opencv><ffmpeg><http-live-streaming>,,,CC BY-SA 3.0,True,False,False,False,True
39957,35480961,2016-02-18 12:02:55,,"<p>I am using the following bash script to pipe the output of OpenCV which is an out.avi file converting that file to a stdout using the tail command and piping the output to ffmpeg</p>

<pre><code>./OpenCV &amp; \
tail -n +0 -f out.avi  | ffmpeg -i pipe:0  -hls_time 1 -hls_list_size 0 -hls_wrap 10 -hls_segment_filename '%03d.ts' stream.m3u8 
</code></pre>

<p>This works but causes latency issues.</p>

<p>I have tried to change the C++ code so that the frame gets written to a stdout using <code>cout &lt;&lt; frame;</code> here is some of the code.</p>

<pre><code>imshow( window_name, frame );//show frame
video.write(frame);//rec to avi
cout &lt;&lt; frame;
</code></pre>

<p>From the above code I get the window to display the processed image, the frame is saved in avi format and from the last line i get printed to the command line the pixel values of the frames. </p>

<p>Now I have tried the following Bash script to pipe this stdout to ffmpeg with no success.</p>

<pre><code>./OpenCV | ffmpeg -i pipe:0  -hls_time 1 -hls_list_size 0 -hls_wrap 10 -hls_segment_filename '%03d.ts' stream.m3u8 
</code></pre>

<p>I also tried</p>

<p><code>./OpenCV | ffmpeg -i pipe:0 -f rawvideo -pix_fmt bgr24 -s 480x320  -hls_time 1 -hls_list_size 0 -hls_wrap 10 -hls_segment_filename '%03d.ts' stream.m3u8</code></p>

<p>Anybody got any ideas?</p>
",,2016-02-18 19:49:53,OpenCV(programmed in C++) stdout piped to ffmpeg(in bashscript)?,<c++><bash><opencv><ffmpeg><pipe>,,,CC BY-SA 3.0,True,False,False,False,True
39969,35370360,2016-02-12 19:07:02,,"<p>I have a few OpenCV projects that analyze video over USB, and in certain conditions must record the video stream to a file. People using my software complain that 10+ minute recordings yield video files that are about 20 seconds longer than they should be. </p>

<p>I'm using openCV's VideoWriter. Iv'e tried things like setting CV2_CAP_PROP_FPS to a very low setting, and iv'e tried getting the average frame rate over a few seconds to find a good setting for my frame rate of the output file. Still not close enough to real time for my needs. </p>

<p>Does anyone know of a good way to make sure my video is recording close to real time? Should I use something like time.sleep (in python) to cap my framerate? Or is there a better way to do this?</p>
",2016-02-12 20:33:48,2016-02-19 10:28:36,recording video in real-time with OpevCV VideoWriter,<opencv><ffmpeg><video-capture><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
40045,35587499,2016-02-23 20:28:24,,"<p>I spent a lot of time trying to find answer, but I've failed. I have an IP Camera with RTSP access (h.264). If I open the stream from OpenCV it tries to decode (as I understand) via ffmpeg and currupts frames.</p>

<pre><code>[h264 @ 0x1821f20] error while decoding MB 3 35, bytestream -14
</code></pre>

<p>As I understood, I should use gstreamer for hardware acceleration (with NVIDIA GPU), but I can't find a real solution. What I should do?</p>

<ol>
<li>run gstreamer from console and get frames from buffer (RAM?) via OpenCV app?</li>
<li>do something in OpenCV app?</li>
<li>re-compile OpenCV with gstreamer and without ffmpeg?</li>
</ol>
",,2016-02-23 22:58:15,"IP camera (h.264, rstp) + GStreamer + OpenCV (Ubuntu, Jetson TK1\Desktop)",<opencv><gstreamer><h.264><ip-camera>,,,CC BY-SA 3.0,True,False,False,False,True
40065,35629738,2016-02-25 14:13:28,,"<p>I am writing a video processing application and have hit a bit of a snag.</p>

<p>The idea is to extract frames (images) from a video file, process them on the GPU and then write them back to a new video file.</p>

<p>So far i have been successful in doing this using <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow"">JavaCV</a>.</p>

<p>The only problem is that extracting the frames takes a <strong>very long time</strong> (in the 200ms region). This is way to much, as added to the GPU processing time and the time it takes to write to a new file, it results in a total process duration of about 700ms per frame.</p>

<p>This is how i grab the frames:</p>

<pre><code> FFmpegFrameGrabber frameGrabber = new FFmpegFrameGrabber(videoLocation);
 frameGrabber.start();

 frameGrabber.setFrameNumber(frameNumber);
 frame = frameGrabber.grabImage();
</code></pre>

<p>Pretty standard, nothing special, and it works. I am able to process the frame, convert it to a bitmap, etc...</p>

<p>As i have said before, the bottom two instructions (setting the frame number and grabbing the image) take a very very long time. Writing the frames also takes a fair bit.</p>

<p>I would greatly appreciate if anyone has any input regarding this issue. Maybe i'm not setting up something correctly, maybe there is another solution that is faster. </p>
",,2016-02-25 14:13:28,Low performance when extracting frames from video,<android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
40076,35569830,2016-02-23 05:49:38,,"<p>I am filling a <code>Frame</code> with a BGR image for encoding, and I am getting a memory leak. I think I got to the source of the problem but it appears to be a library issue instead. Since FFmpeg is such a mature library, I think I am misusing it and I would like to be instructed on how to do it correctly.</p>

<p>I am allocating a <code>Frame</code> using:</p>

<pre><code>AVFrame *bgrFrame = av_frame_alloc();
</code></pre>

<p>And later I allocate the image in the <code>Frame</code> using:</p>

<pre><code>av_image_alloc(bgrFrame-&gt;data, bgrFrame-&gt;linesize, bgrFrame-&gt;width, bgrFrame-&gt;height, AV_PIX_FMT_BGR24, 32);
</code></pre>

<p>Then I fill the image allocated using:</p>

<pre><code>av_image_fill_pointers(bgrFrame-&gt;data, AV_PIX_FMT_BGR24, bgrFrame-&gt;height, originalBGRImage.data, bgrFrame-&gt;linesize);
</code></pre>

<p>Where <code>originalBGRImage</code> is an OpenCV <code>Mat</code>. </p>

<p>And this has a memory leak, apparently, <code>av_image_alloc()</code> allocates memory, and <code>av_image_fill_pointers()</code> also allocates memory, on the same pointers (I can see <code>bgrFrame-&gt;data[0]</code> changing between calls).</p>

<p>If I call</p>

<pre><code>av_freep(&amp;bgrFrame-&gt;data[0]);
</code></pre>

<p>After <code>av_image_alloc()</code>, it's fine, but if I call it after <code>av_image_fill_pointers()</code>, the program crashes, even though <code>bgrFrame-&gt;data[0]</code> is not <code>NULL</code>, which I find very curious.</p>

<p>Looking FFmpeg's <code>av_image_alloc()</code> <a href=""https://www.ffmpeg.org/doxygen/2.6/imgutils_8c_source.html#l00192"" rel=""nofollow"">source code</a>, I see it calls <code>av_image_fill_pointers()</code> twice inside it, once allocating a buffer <code>buff</code>....and later in <code>av_image_fill_pointers()</code> <a href=""https://www.ffmpeg.org/doxygen/2.6/imgutils_8c_source.html#l00110"" rel=""nofollow"">source code</a>, <code>data[0]</code> is substituted by the image pointer, which is (I think) the source of the memory leak, since <code>data[0]</code> was holding <code>buf</code> from the previous <code>av_image_alloc()</code> call.</p>

<p>So this brings the final question: <strong>What's the correct way of filling a frame with an image?</strong>.</p>
",,2016-02-24 16:05:24,Correctly Allocate And Fill Frame In FFmpeg,<c><opencv><memory-leaks><ffmpeg><video-encoding>,,,CC BY-SA 3.0,True,False,False,False,True
40099,35631287,2016-02-25 15:17:56,,"<p>I'm trying to receive and display a udp live mjpeg - network video stream from a network cam. 
I can play the video stream by starting VLC with the Argument <code>--demux=mjpeg</code> and then typing <code>udp://@:1234</code> in the network stream field. Or with gstreamer by the console line: <code>gst-launch -v udpsrc port=1234 ! jpegdec ! autovideosink</code>. My Cam has the IP Address <code>192.168.1.2</code> and it sends the stream to the address <code>192.168.1.1:1234</code>.</p>

<p>I've tried to capture the stream with OpenCV with:</p>

<pre><code>cv::VideoCapture cap;
cap.open(""udp://@192.168.1.1:1234"");
</code></pre>

<p>I tried also:</p>

<pre><code>cap.open(""udp://@:1234"")

cap.open(""udp://@localhost:1234"")

cap.open(""udp://192.168.1.1:1234"")

cap.open(""udp://192.168.1.1:1234/"")
</code></pre>

<p>But the function hangs until I press <code>ctrl+C</code>. I have the same problem when I use ffmpeg with: <code>ffmpeg -i udp://@192.168.1.1:1234 -vcodec mjpeg</code></p>

<p>What did I do wrong? When i installed ffmpeg i couldn't install the dependency <code>libsdl1.2-dev</code>. Is that the problem?</p>

<p>If so, there is any way to read the udp-frames from the socket and then decode the JPEG pictures and display it with OpenCV? </p>

<p>I have the OS Ubuntu linaro oneiric 11.10 with the kernel 3.0.35 from Freescale</p>
",2016-02-26 08:03:57,2016-03-03 15:57:04,Capture and play MJPEG - Network Video stream over UDP with OpenCV and ffmpeg,<c++><opencv><ffmpeg><networkstream>,,,CC BY-SA 3.0,True,False,False,False,True
40117,35632174,2016-02-25 15:55:30,,"<p>I use application <em>IPCamera</em> on my mobile phone with Android to output (share) video image from it's camera to LAN. I can access it on PC browser - that is ok.</p>

<p>However, I want to make OpenCV capture this video stream from IP address by typing</p>

<pre><code>VideoCapture cap(""http://admin:admin@192.168.0.11:8081/?action=stream?dummy=param.mjpg"");
 while( cap.isOpened() )
 {
    Mat frame;
    if ( ! cap.read(frame) )
        break;

    cout &lt;&lt; ""Connected!!"";

    imshow(""lalala"",frame);
    int k = waitKey(10);
    if ( k==27 )
        break;
}
</code></pre>

<p>and i got error:</p>

<p><a href=""https://i.stack.imgur.com/fpmJ2.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/fpmJ2.png"" alt=""enter image description here""></a></p>

<p>Actual codec, which is used by phone is <strong>mjpeg</strong> (i read it from application on my mobile). I don't know if OpenCV supports this, but is that about mobile application uses some kind of unique codec, or my PC lacks it, or maybe C++/OpenCV code is wrong?</p>
",,2016-02-25 22:13:13,OpenCV cannot connect to video stream - lack of some codec?,<c++><opencv><video><ffmpeg><mjpeg>,,,CC BY-SA 3.0,True,True,False,False,True
40166,35534292,2016-02-21 09:12:01,,"<p>I am trying to use OpenCV3 for video file reading.</p>

<pre><code>string packageRootPath = ros::package::getPath(""visensor_dgem"");
string videoFullPath = packageRootPath + ""/dump/Video.avi"";
cout &lt;&lt; videoFullPath &lt;&lt; endl;
cv::VideoCapture cap;
bool flag = cap.open( videoFullPath );
if( flag )
    cout &lt;&lt; ""flag true\n"";
else
    cout &lt;&lt; ""flag false\n"";
</code></pre>

<p>The path to the video file is correct. I am guessing my issue has to do with the video codecs. The program compiles file, however when I run the code I get <code>flag false</code>. I have tried to open the file with <code>fstream</code> and it opens successfully, so I am sure of the path and permissions etc. </p>

<p>I am on ubuntu 14.04. I have installed opencv3 from source code. Here is the config of my opencv:
(even more details of my installation here : <a href=""https://kusemanohar.wordpress.com/2015/10/23/opencv-pro-built/"" rel=""nofollow"">https://kusemanohar.wordpress.com/2015/10/23/opencv-pro-built/</a>)</p>

<pre><code>-- General configuration for OpenCV 3.0.0 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 3.19.0-25-generic x86_64
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.4)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -fopenmp -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -fopenmp -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fopenmp -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fopenmp -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):      
--     Linker flags (Debug):        
--     Precompiled headers:         YES
--     Extra dependencies:          Qt5::Core Qt5::Gui Qt5::Widgets Qt5::Test Qt5::Concurrent /usr/lib/x86_64-linux-gnu/libwebp.so /usr/lib/x86_64-linux-gnu/libpng.so /usr/lib/x86_64-linux-gnu/libz.so /usr/lib/x86_64-linux-gnu/libtiff.so /usr/lib/x86_64-linux-gnu/libjasper.so /usr/lib/x86_64-linux-gnu/libjpeg.so /usr/lib/x86_64-linux-gnu/libImath.so /usr/lib/x86_64-linux-gnu/libIlmImf.so /usr/lib/x86_64-linux-gnu/libIex.so /usr/lib/x86_64-linux-gnu/libHalf.so /usr/lib/x86_64-linux-gnu/libIlmThread.so dc1394 avcodec avformat avutil swscale /usr/lib/x86_64-linux-gnu/libbz2.so vtkCharts vtkCommon vtkFiltering vtkGenericFiltering vtkGeovis vtkGraphics vtkHybrid vtkIO vtkImaging vtkInfovis vtkParallel vtkRendering vtkViews vtkVolumeRendering vtkWidgets dl m pthread rt tbb cudart nppc nppi npps cufft
--     3rdparty dependencies:       ippicv
-- 
--   OpenCV modules:
--     To be built:                 hal cudev core cudaarithm flann imgproc ml video viz cudabgsegm cudafilters cudaimgproc cudawarping imgcodecs photo shape videoio cudacodec highgui objdetect ts features2d calib3d cudafeatures2d cudalegacy cudaobjdetect cudaoptflow cudastereo stitching superres videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 java python2 python3
-- 
--   GUI: 
--     QT 5.x:                      YES (ver 5.2.1)
--     QT OpenGL support:           NO
--     OpenGL support:              NO
--     VTK support:                 YES (ver 5.8.0)
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/x86_64-linux-gnu/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/x86_64-linux-gnu/libjpeg.so (ver )
--     WEBP:                        /usr/lib/x86_64-linux-gnu/libwebp.so (ver encoder: 0x0202)
--     PNG:                         /usr/lib/x86_64-linux-gnu/libpng.so (ver 1.2.50)
--     TIFF:                        /usr/lib/x86_64-linux-gnu/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/x86_64-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/x86_64-linux-gnu/libImath.so /usr/lib/x86_64-linux-gnu/libIlmImf.so /usr/lib/x86_64-linux-gnu/libIex.so /usr/lib/x86_64-linux-gnu/libHalf.so /usr/lib/x86_64-linux-gnu/libIlmThread.so (ver 1.6.1)
--     GDAL:                        NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.35.0)
--       format:                    YES (ver 54.20.4)
--       util:                      YES (ver 52.3.0)
--       swscale:                   YES (ver 2.1.1)
--       resample:                  NO
--       gentoo-style:              YES
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/YES
--     XIMEA:                       NO
--     Xine:                        NO
--     gPhoto2:                     NO
-- 
--   Other third-party libraries:
--     Use IPP:                     8.2.1 [8.2.1]
--          at:                     /home/mpkusex/Downloads/opencv-3.0.0/3rdparty/ippicv/unpack/ippicv_lnx
--     Use IPP Async:               NO
--     Use Eigen:                   YES (ver 3.2.6)
--     Use TBB:                     YES (ver 4.2 interface 7000)
--     Use OpenMP:                  YES
--     Use GCD                      NO
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use pthreads for parallel for:
--                                  NO
--     Use Cuda:                    YES (ver 7.5)
--     Use OpenCL:                  YES
-- 
--   NVIDIA CUDA
--     Use CUFFT:                   YES
--     Use CUBLAS:                  NO
--     USE NVCUVID:                 NO
--     NVIDIA GPU arch:             20 21 30 35
--     NVIDIA PTX archs:            30
--     Use fast math:               NO
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/mpkusex/Downloads/opencv-3.0.0/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 
--   Python 2:
--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.6)
-- 
--   Python 3:
--     Interpreter:                 /usr/bin/python3.4 (ver 3.4)
-- 
--   Python (for build):            /usr/bin/python2.7
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java wrappers:               NO
--     Java tests:                  NO
-- 
--   Matlab:
--     mex:                         NO
-- 
--   Documentation:
--     Doxygen:                     /usr/bin/doxygen (ver 1.8.6)
--     PlantUML:                    NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/mpkusex/Downloads/opencv-3.0.0/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/mpkusex/Downloads/opencv-3.0.0/buil
</code></pre>

<p>Relevant section of my CMakeLists.txt. I am using opencv with catkin (ros - ros.org) which is essentially same as cmake. I can run my other opencv stuff like edge detection, image reading etc. </p>

<pre><code>    cmake_minimum_required(VERSION 2.8.3)
    project(visensor_dgem)

    ## Find catkin macros and libraries
    ## if COMPONENTS list like find_package(catkin REQUIRED COMPONENTS xyz)
    ## is used, also find other catkin packages
    find_package(catkin REQUIRED COMPONENTS
      cv_bridge
      image_transport
      roscpp
      tf
      message_generation    
        )
    find_package( message_generation )

    find_package( OpenCV 3.0 REQUIRED COMPONENTS core highgui flann calib3d video )

add_executable( videoReader
    src/videoReader.cpp
)

target_link_libraries( videoReader
  ${Boost_THREAD_LIBRARY}
  ${catkin_LIBRARIES}
    )
</code></pre>

<p>How can I resolve this?</p>
",2016-02-24 03:13:57,2016-02-24 03:13:57,Cannot read Video File OpenCV3,<opencv3.0>,,,CC BY-SA 3.0,True,True,False,False,True
40171,35596630,2016-02-24 08:13:23,,"<p>I'm trying to use JavaCV to live-stream to RTMP nginx server. I'm using this example :
<a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow"">https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java</a></p>

<p>I want to use that example to live-stream in fullscreen portrait mode. I tried  changing some things around, but the video result became like <a href=""http://i.stack.imgur.com/eziJi.jpg"" rel=""nofollow"">this</a> </p>

<p>This is my initialization for the layout, recorder and the FFmpegFrameFilter :</p>

<pre><code>private int imageWidth = 720;
private int imageHeight = 1280;

private void initFilter() {
        filter = new FFmpegFrameFilter(""transpose=clock"", imageWidth-1, imageHeight-1);
        filter.setPixelFormat(avutil.AV_PIX_FMT_NV21); // default camera format on Android
        try {
            filter.start();
        } catch (FrameFilter.Exception e) {
            e.printStackTrace();
        }
    }

private void initLayout() {
        /* get size of screen */
        Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();

        RelativeLayout.LayoutParams layoutParam = null;
        LayoutInflater myInflate = null;
        myInflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        topLayout = (FrameLayout)findViewById(R.id.record_layout);
        RelativeLayout preViewLayout = (RelativeLayout) myInflate.inflate(R.layout.activity_main, null);
        layoutParam = new RelativeLayout.LayoutParams(screenWidth, screenHeight);
        topLayout.addView(preViewLayout, layoutParam);

        /* add camera view */

        layoutParam = new RelativeLayout.LayoutParams(screenWidth, screenHeight);

        cameraDevice = Camera.open();
        Log.i(LOG_TAG, ""cameara open"");
        cameraView = new CameraView(this, cameraDevice);
        topLayout.addView(cameraView, layoutParam);
        Log.i(LOG_TAG, ""cameara preview start: OK"");
    }

private void initRecorder() {

        Log.w(LOG_TAG, ""init recorder"");

        if (RECORD_LENGTH &gt; 0) {
            imagesIndex = 0;
            images = new Frame[RECORD_LENGTH * frameRate];
            timestamps = new long[images.length];
            for (int i = 0; i &lt; images.length; i++) {
                images[i] = new Frame(imageWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
                timestamps[i] = -1;
            }
        } else if (yuvImage == null) {
            yuvImage = new Frame(imageWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
            Log.i(LOG_TAG, ""create yuvImage"");
        }

        Log.i(LOG_TAG, ""ffmpeg_url: "" + ffmpeg_link);
        recorder = new FFmpegFrameRecorder(ffmpeg_link, imageWidth, imageHeight, 1);
        recorder.setFormat(""flv"");
        recorder.setSampleRate(sampleAudioRateInHz);
        // Set in the surface changed method
        recorder.setFrameRate(frameRate);

        Log.i(LOG_TAG, ""recorder initialize success"");

        audioRecordRunnable = new AudioRecordRunnable();
        audioThread = new Thread(audioRecordRunnable);
        runAudioThread = true;
    }
</code></pre>

<p>And here's the code for the surfaceView</p>

<pre><code>class CameraView extends SurfaceView implements SurfaceHolder.Callback, PreviewCallback {

        private SurfaceHolder mHolder;
        private Camera mCamera;

        public void addCallback()
        {
            mHolder.addCallback(CameraView.this);
        }

        public void removeCallback()
        {
            mHolder.removeCallback(CameraView.this);
        }

        public CameraView(Context context, Camera camera) {
            super(context);
            Log.w(""camera"",""camera view"");
            mCamera = camera;
            mHolder = getHolder();
            mHolder.addCallback(CameraView.this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
            mCamera.setPreviewCallback(CameraView.this);
        }

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            Log.v(""StreamActivity"",""Surface Created"");
            if (!paused) {
                try {
                    stopPreview();
                    mCamera.setPreviewDisplay(holder);
                    mCamera.setDisplayOrientation(90);
                } catch (IOException exception) {
                    mCamera.release();
                    mCamera = null;
                }
            }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            Log.v(""StreamActivity"", ""surfaceChanged"");
            stopPreview();

            Camera.Parameters camParams = mCamera.getParameters();
            List&lt;Camera.Size&gt; sizes = camParams.getSupportedPreviewSizes();
            // Sort the list in ascending order
            Collections.sort(sizes, new Comparator&lt;Camera.Size&gt;() {

                public int compare(final Camera.Size a, final Camera.Size b) {
                    return a.width * a.height - b.width * b.height;
                }
            });
            int imageWidth2 = imageHeight;
            int imageHeight2 = imageWidth;
            // Pick the first preview size that is equal or bigger, or pick the last (biggest) option if we cannot
            // reach the initial settings of imageWidth/imageHeight.
            for (int i = 0; i &lt; sizes.size(); i++) {
                if ((sizes.get(i).width &gt;= imageWidth2 &amp;&amp; sizes.get(i).height &gt;= imageHeight2) || i == sizes.size() - 1) {
                    imageWidth2 = sizes.get(i).width;
                    imageHeight2 = sizes.get(i).height;
                    Log.v(LOG_TAG, ""Changed to supported resolution: "" + imageWidth2 + ""x"" + imageHeight2);
                    break;
                }
            }

            //
            // camParams.set(""rotation"",90);

            camParams.setPreviewSize(imageWidth2, imageHeight2);
            camParams.setPreviewFrameRate(frameRate);
            mCamera.setParameters(camParams);

            // Set the holder (which might have changed) again
            try {
                mCamera.setPreviewDisplay(holder);
                mCamera.setPreviewCallback(CameraView.this);
                startPreview();
            } catch (Exception e) {
                Log.e(LOG_TAG, ""Could not set preview display in surfaceChanged"");
            }
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {
            Log.v(""StreamActivity"",""Surface Destroyed"");
            try {
                mHolder.addCallback(null);
                mCamera.setPreviewCallback(null);
            } catch (RuntimeException e) {
                // The camera has probably just been released, ignore.
            }
        }

        public void startPreview() {
            if (!isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = true;
                mCamera.startPreview();
            }
        }

        public void stopPreview() {
            if (isPreviewOn &amp;&amp; mCamera != null) {
                isPreviewOn = false;
                mCamera.stopPreview();
            }
        }

        @Override
        public void onPreviewFrame(byte[] data, Camera camera) {
            //Log.v(""StreamActivity"",""onPreviewFrame"");
            if (audioRecord == null || audioRecord.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
                startTime = System.currentTimeMillis();
                return;
            }
            if (RECORD_LENGTH &gt; 0) {
                int i = imagesIndex++ % images.length;
                yuvImage = images[i];
                timestamps[i] = 1000 * (System.currentTimeMillis() - startTime);
            }
            /* get video data */
            if (yuvImage != null &amp;&amp; recording) {
                ((ByteBuffer)yuvImage.image[0].position(0)).put(data);

                if (RECORD_LENGTH &lt;= 0) try {
                    Log.v(LOG_TAG,""Writing Frame"");
                    long t = 1000 * (System.currentTimeMillis() - startTime);
                    if (t &gt; recorder.getTimestamp()) {
                        recorder.setTimestamp(t);
                    }

                    filter.push(yuvImage);

                    Frame frame;
                    while ((frame = filter.pull()) != null) {
                        recorder.record(frame,avutil.AV_PIX_FMT_NV21);
                    }

                    //recorder.record(yuvImage);1
                } catch (FFmpegFrameRecorder.Exception e) {
                    Log.v(LOG_TAG, e.getMessage());
                    e.printStackTrace();
                } catch (FrameFilter.Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
</code></pre>

<p>What should I do so I can record video in portrait mode and fullscreen? Thanks in advance. </p>
",,2016-02-24 08:13:23,JavaCV - Recording video in portrait mode,<android><video><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
40190,35461019,2016-02-17 15:32:21,,"<p>I have problem with code, which is functional only for Genymotion device (Android 4.1.1), but for Genymotion device 5.0.1 and real device Huawei honor 4c Android 4.4.2 not.</p>

<p>I have imported OpenCV 3.1 to Android studio by: <a href=""https://stackoverflow.com/a/27421494/4244605"">https://stackoverflow.com/a/27421494/4244605</a><br>
I added JavaCV with FFmpeg by: <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow noreferrer"">https://github.com/bytedeco/javacv</a></p>

<p>Android studio 1.5.1<br>
minSdkVersion 15<br>
compileSdkVersion 23</p>

<p>Code is only for test.<br>
<strong>OpenCVCameraActivity.java:</strong></p>

<pre><code>import android.app.Activity;
import android.hardware.Camera;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.SubMenu;
import android.view.SurfaceView;
import android.view.View;
import android.view.WindowManager;
import android.widget.Toast;

import org.bytedeco.javacv.FFmpegFrameRecorder;
import org.bytedeco.javacv.Frame;
import org.opencv.android.BaseLoaderCallback;
import org.opencv.android.CameraBridgeViewBase;
import org.opencv.android.LoaderCallbackInterface;
import org.opencv.android.OpenCVLoader;
import org.opencv.core.Mat;

import java.io.File;
import java.nio.ShortBuffer;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;
import java.util.ListIterator;

@SuppressWarnings(""ALL"")
public class OpenCVCameraActivity extends Activity implements
        CameraBridgeViewBase.CvCameraViewListener2,
        View.OnTouchListener {

    //name of activity, for DEBUGGING
    private static final String TAG = OpenCVCameraActivity.class.getSimpleName();

    private OpenCVCameraPreview mOpenCvCameraView;
    private List&lt;Camera.Size&gt; mResolutionList;
    private MenuItem[] mEffectMenuItems;
    private SubMenu mColorEffectsMenu;
    private MenuItem[] mResolutionMenuItems;
    private SubMenu mResolutionMenu;

    private static long frameCounter = 0;

    long startTime = 0;
    private Mat edgesMat;
    boolean recording = false;
    private int sampleAudioRateInHz = 44100;
    private int imageWidth = 1920;
    private int imageHeight = 1080;
    private int frameRate = 30;
    private Frame yuvImage = null;
    private File ffmpeg_link;
    private FFmpegFrameRecorder recorder;

    /* audio data getting thread */
    private AudioRecord audioRecord;
    private AudioRecordRunnable audioRecordRunnable;
    private Thread audioThread;
    volatile boolean runAudioThread = true;
    ShortBuffer[] samples;


    private BaseLoaderCallback mLoaderCallback = new BaseLoaderCallback(this) {
        @Override
        public void onManagerConnected(int status) {
            switch (status) {
                case LoaderCallbackInterface.SUCCESS:
                    Log.i(TAG, ""OpenCV loaded successfully"");
                    mOpenCvCameraView.enableView();
                    mOpenCvCameraView.setOnTouchListener(OpenCVCameraActivity.this);
                break;
                default:
                    super.onManagerConnected(status);
                break;
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(Static.DEBUG) Log.i(TAG, ""onCreate()"");

        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

        try {
            setContentView(R.layout.activity_opencv);

            mOpenCvCameraView = (OpenCVCameraPreview) findViewById(R.id.openCVCameraPreview);
            mOpenCvCameraView.setVisibility(SurfaceView.VISIBLE);
            mOpenCvCameraView.setCvCameraViewListener(this);

            //mOpenCvCameraView.enableFpsMeter();

            ffmpeg_link = new File(Environment.getExternalStorageDirectory(), ""stream.mp4"");
        } catch (Exception e){
            e.printStackTrace();
        }
    }

    @Override
    protected void onRestart() {
        if (Static.DEBUG) Log.i(TAG, ""onRestart()"");
        super.onRestart();
    }

    @Override
    protected void onStart() {
        if (Static.DEBUG) Log.i(TAG, ""onStart()"");
        super.onStart();
    }

    @Override
    protected void onResume() {
        if (Static.DEBUG) Log.i(TAG, ""onResume()"");
        super.onResume();

        if (!OpenCVLoader.initDebug()) {
            Log.i(TAG, ""Internal OpenCV library not found. Using OpenCV Manager for initialization"");
            OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_11, this, mLoaderCallback);
        } else {
            Log.i(TAG, ""OpenCV library found inside package. Using it!"");
            mLoaderCallback.onManagerConnected(LoaderCallbackInterface.SUCCESS);
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        if (Static.DEBUG) Log.i(TAG, ""onCreateOptionsMenu()"");
        super.onCreateOptionsMenu(menu);

        List&lt;String&gt; effects = mOpenCvCameraView.getEffectList();

        if (effects == null) {
            Log.e(TAG, ""Color effects are not supported by device!"");
            return true;
        }

        mColorEffectsMenu = menu.addSubMenu(""Color Effect"");
        mEffectMenuItems = new MenuItem[effects.size()];

        int idx = 0;
        ListIterator&lt;String&gt; effectItr = effects.listIterator();
        while(effectItr.hasNext()) {
            String element = effectItr.next();
            mEffectMenuItems[idx] = mColorEffectsMenu.add(1, idx, Menu.NONE, element);
            idx++;
        }

        mResolutionMenu = menu.addSubMenu(""Resolution"");
        mResolutionList = mOpenCvCameraView.getResolutionList();
        mResolutionMenuItems = new MenuItem[mResolutionList.size()];

        ListIterator&lt;Camera.Size&gt; resolutionItr = mResolutionList.listIterator();
        idx = 0;
        while(resolutionItr.hasNext()) {
            Camera.Size element = resolutionItr.next();
            mResolutionMenuItems[idx] = mResolutionMenu.add(2, idx, Menu.NONE,
                    Integer.valueOf(element.width).toString() + ""x"" + Integer.valueOf(element.height).toString());
            idx++;
        }

        return true;
    }

    @Override
    protected void onPause() {
        if (Static.DEBUG) Log.i(TAG, ""onPause()"");
        super.onPause();

        if (mOpenCvCameraView != null)
            mOpenCvCameraView.disableView();

    }

    @Override
    protected void onStop() {
        if (Static.DEBUG) Log.i(TAG, ""onStop()"");
        super.onStop();
    }

    @Override
    protected void onDestroy() {
        if (Static.DEBUG) Log.i(TAG, ""onDestroy()"");
        super.onDestroy();

        if (mOpenCvCameraView != null)
            mOpenCvCameraView.disableView();
    }

    public Mat onCameraFrame(CameraBridgeViewBase.CvCameraViewFrame inputFrame) {

        ++frameCounter;
        //Log.i(TAG, ""Frame number: ""+frameCounter);

        return inputFrame.rgba();
    }


    @Override
    public void onCameraViewStarted(int width, int height) {
        edgesMat = new Mat();
    }

    @Override
    public void onCameraViewStopped() {
        if (edgesMat != null)
            edgesMat.release();

        edgesMat = null;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        Log.i(TAG, ""called onOptionsItemSelected; selected item: "" + item);
        if (item.getGroupId() == 1)
        {
            mOpenCvCameraView.setEffect((String) item.getTitle());
            Toast.makeText(this, mOpenCvCameraView.getEffect(), Toast.LENGTH_SHORT).show();
        } else if (item.getGroupId() == 2) {
            int id = item.getItemId();
            Camera.Size resolution = mResolutionList.get(id);
            mOpenCvCameraView.setResolution(resolution);
            resolution = mOpenCvCameraView.getResolution();
            String caption = Integer.valueOf(resolution.width).toString() + ""x"" + Integer.valueOf(resolution.height).toString();
            Toast.makeText(this, caption, Toast.LENGTH_SHORT).show();
        }

        return true;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        Log.i(TAG,""onTouch event"");
        SimpleDateFormat sdf = new SimpleDateFormat(""yyyy-MM-dd_HH-mm-ss"");
        String currentDateandTime = sdf.format(new Date());
        String fileName = Environment.getExternalStorageDirectory().getPath() +
                ""/sample_picture_"" + currentDateandTime + "".jpg"";
        mOpenCvCameraView.takePicture(fileName);
        Toast.makeText(this, fileName + "" saved"", Toast.LENGTH_SHORT).show();
        return false;
    }

    /**
     * Click to ImageButton to start recording.
     */
    public void onClickBtnStartRecord2(View v) {
        if (Static.DEBUG) Log.i(TAG, ""onClickBtnStartRecord()"");

        if(!recording)
            startRecording();
        else
            stopRecording();
    }

    private void startRecording() {
        if (Static.DEBUG) Log.i(TAG, ""startRecording()"");
        initRecorder();

        try {
            recorder.start();
            startTime = System.currentTimeMillis();
            recording = true;
            audioThread.start();
        } catch(FFmpegFrameRecorder.Exception e) {
            e.printStackTrace();
        }
    }

    private void stopRecording() {
        if (Static.DEBUG) Log.i(TAG, ""stopRecording()"");

        runAudioThread = false;
        try {
            audioThread.join();
        } catch(InterruptedException e) {
            e.printStackTrace();
        }
        audioRecordRunnable = null;
        audioThread = null;

        if(recorder != null &amp;&amp; recording) {

            recording = false;
            Log.v(TAG, ""Finishing recording, calling stop and release on recorder"");
            try {
                recorder.stop();
                recorder.release();
            } catch(FFmpegFrameRecorder.Exception e) {
                e.printStackTrace();
            }
            recorder = null;
        }
    }


    //---------------------------------------
    // initialize ffmpeg_recorder
    //---------------------------------------
    private void initRecorder() {

        Log.w(TAG, ""init recorder"");
        try {

            if (yuvImage == null) {
                yuvImage = new Frame(imageWidth, imageHeight, Frame.DEPTH_UBYTE, 2);
                Log.i(TAG, ""create yuvImage"");
            }

            Log.i(TAG, ""ffmpeg_url: "" + ffmpeg_link.getAbsolutePath());
            Log.i(TAG, ""ffmpeg_url: "" + ffmpeg_link.exists());
            recorder = new FFmpegFrameRecorder(ffmpeg_link, imageWidth, imageHeight, 1);
            recorder.setFormat(""mp4"");
            recorder.setSampleRate(sampleAudioRateInHz);
            // Set in the surface changed method
            recorder.setFrameRate(frameRate);

            Log.i(TAG, ""recorder initialize success"");

            audioRecordRunnable = new AudioRecordRunnable();
            audioThread = new Thread(audioRecordRunnable);
            runAudioThread = true;
        } catch (Exception e){
            e.printStackTrace();
        }
    }

    //---------------------------------------------
    // audio thread, gets and encodes audio data
    //---------------------------------------------
    class AudioRecordRunnable implements Runnable {

        @Override
        public void run() {
            android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);

            // Audio
            int bufferSize;
            ShortBuffer audioData;
            int bufferReadResult;

            bufferSize = AudioRecord.getMinBufferSize(sampleAudioRateInHz,
                    AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT);
            audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleAudioRateInHz,
                    AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSize);

            audioData = ShortBuffer.allocate(bufferSize);

            Log.d(TAG, ""audioRecord.startRecording()"");
            audioRecord.startRecording();

            /* ffmpeg_audio encoding loop */
            while(runAudioThread) {
                //Log.v(TAG,""recording? "" + recording);
                bufferReadResult = audioRecord.read(audioData.array(), 0, audioData.capacity());
                audioData.limit(bufferReadResult);
                if(bufferReadResult &gt; 0) {
                    Log.v(TAG, ""bufferReadResult: "" + bufferReadResult);
                    // If ""recording"" isn't true when start this thread, it never get's set according to this if statement...!!!
                    // Why?  Good question...
                    if(recording) {
                            try {
                                recorder.recordSamples(audioData);
                                //Log.v(TAG,""recording "" + 1024*i + "" to "" + 1024*i+1024);
                            } catch(FFmpegFrameRecorder.Exception e) {
                                Log.v(TAG, e.getMessage());
                                e.printStackTrace();
                            }
                    }
                }
            }
            Log.v(TAG, ""AudioThread Finished, release audioRecord"");

            /* encoding finish, release recorder */
            if(audioRecord != null) {
                audioRecord.stop();
                audioRecord.release();
                audioRecord = null;
                Log.v(TAG, ""audioRecord released"");
            }
        }
    }
}
</code></pre>

<p><strong>OpenCVCameraPreview.java:</strong></p>

<pre><code>import android.content.Context;
import android.hardware.Camera;
import android.util.AttributeSet;
import android.util.Log;

import org.opencv.android.JavaCameraView;

import java.io.FileOutputStream;
import java.util.List;

public class OpenCVCameraPreview extends JavaCameraView implements Camera.PictureCallback {

    private static final String TAG =  OpenCVCameraPreview.class.getSimpleName();
    private String mPictureFileName;

    public OpenCVCameraPreview(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public List&lt;String&gt; getEffectList() {
        return mCamera.getParameters().getSupportedColorEffects();
    }

    public boolean isEffectSupported() {
        return (mCamera.getParameters().getColorEffect() != null);
    }

    public String getEffect() {
        return mCamera.getParameters().getColorEffect();
    }

    public void setEffect(String effect) {
        Camera.Parameters params = mCamera.getParameters();
        params.setColorEffect(effect);
        mCamera.setParameters(params);
    }

    public List&lt;Camera.Size&gt; getResolutionList() {
        return mCamera.getParameters().getSupportedPreviewSizes();
    }

    public void setResolution(Camera.Size resolution) {
        disconnectCamera();
        mMaxHeight = resolution.height;
        mMaxWidth = resolution.width;
        connectCamera(getWidth(), getHeight());
    }

    public Camera.Size getResolution() {
        return mCamera.getParameters().getPreviewSize();
    }

    public void takePicture(final String fileName) {
        Log.i(TAG, ""Taking picture"");
        this.mPictureFileName = fileName;
        // Postview and jpeg are sent in the same buffers if the queue is not empty when performing a capture.
        // Clear up buffers to avoid mCamera.takePicture to be stuck because of a memory issue
        mCamera.setPreviewCallback(null);

        // PictureCallback is implemented by the current class
        mCamera.takePicture(null, null, this);
    }

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        Log.i(TAG, ""Saving a bitmap to file"");
        // The camera preview was automatically stopped. Start it again.
        mCamera.startPreview();
        mCamera.setPreviewCallback(this);

        // Write the image in a file (in jpeg format)
        try {
            FileOutputStream fos = new FileOutputStream(mPictureFileName);

            fos.write(data);
            fos.close();

        } catch (java.io.IOException e) {
            Log.e(""PictureDemo"", ""Exception in photoCallback"", e);
        }

    }
}
</code></pre>

<p><strong>Gradle:</strong></p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion ""23.0.2""

    defaultConfig {
        applicationId ""co.example.example""
        minSdkVersion 15
        targetSdkVersion 23
        versionCode 1
        versionName ""1.0""
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    packagingOptions {
        exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.properties'
        exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.xml'
        exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.properties'
        exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.xml'
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.1.1'
    compile 'com.google.android.gms:play-services-appindexing:8.1.0'

    compile group: 'org.bytedeco', name: 'javacv', version: '1.1'
    compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '3.0.0-1.1', classifier: 'android-arm'
    compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '3.0.0-1.1', classifier: 'android-x86'
    compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.8.1-1.1', classifier: 'android-arm'
    compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.8.1-1.1', classifier: 'android-x86'

    compile project(':openCVLibrary310')
}
</code></pre>

<p><strong>proguard-rules.pro</strong>
Edited by: <a href=""https://github.com/bytedeco/javacv/wiki/Configuring-Proguard-for-JavaCV"" rel=""nofollow noreferrer"">link</a></p>

<p><strong>jniLibs:</strong>
app/src/main/jniLibs:</p>

<pre><code>armeabi armeabi-v7a arm64-v8a mips mips64 x86 x86_64
</code></pre>

<p><strong>Problem</strong> </p>

<pre><code>02-19 11:57:37.684 1759-1759/ I/OpenCVCameraActivity: onClickBtnStartRecord()
02-19 11:57:37.684 1759-1759/ I/OpenCVCameraActivity: startRecording()
02-19 11:57:37.684 1759-1759/ W/OpenCVCameraActivity: init recorder
02-19 11:57:37.691 1759-1759/ I/OpenCVCameraActivity: create yuvImage
02-19 11:57:37.691 1759-1759/ I/OpenCVCameraActivity: ffmpeg_url: /storage/emulated/0/stream.mp4
02-19 11:57:37.696 1759-1759/ I/OpenCVCameraActivity: ffmpeg_url: false
02-19 11:57:37.837 1759-1759/ W/linker: libjniavutil.so: unused DT entry: type 0x1d arg 0x18cc3
02-19 11:57:37.837 1759-1759/ W/linker: libjniavutil.so: unused DT entry: type 0x6ffffffe arg 0x21c30
02-19 11:57:37.837 1759-1759/ W/linker: libjniavutil.so: unused DT entry: type 0x6fffffff arg 0x1
02-19 11:57:37.838 1759-1759/co.example.example E/art: dlopen(""/data/app/co.example.example-2/lib/x86/libjniavutil.so"", RTLD_LAZY) failed: dlopen failed: cannot locate symbol ""av_version_info"" referenced by ""libjniavutil.so""...
02-19 11:57:37.843 1759-1759/co.example.example I/art: Rejecting re-init on previously-failed class java.lang.Class&lt;org.bytedeco.javacpp.avutil&gt;
02-19 11:57:37.844 1759-1759/co.example.example E/AndroidRuntime: FATAL EXCEPTION: main
                                        Process: co.example.example, PID: 1759
                                        java.lang.IllegalStateException: Could not execute method of the activity
                                            at android.view.View$1.onClick(View.java:4020)
                                            at android.view.View.performClick(View.java:4780)
                                            at android.view.View$PerformClick.run(View.java:19866)
                                            at android.os.Handler.handleCallback(Handler.java:739)
                                            at android.os.Handler.dispatchMessage(Handler.java:95)
                                            at android.os.Looper.loop(Looper.java:135)
                                            at android.app.ActivityThread.main(ActivityThread.java:5254)
                                            at java.lang.reflect.Method.invoke(Native Method)
                                            at java.lang.reflect.Method.invoke(Method.java:372)
                                            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)
                                            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)
                                         Caused by: java.lang.reflect.InvocationTargetException
                                            at java.lang.reflect.Method.invoke(Native Method)
                                            at java.lang.reflect.Method.invoke(Method.java:372)
                                            at android.view.View$1.onClick(View.java:4015)
                                            at android.view.View.performClick(View.java:4780) 
                                            at android.view.View$PerformClick.run(View.java:19866) 
                                            at android.os.Handler.handleCallback(Handler.java:739) 
                                            at android.os.Handler.dispatchMessage(Handler.java:95) 
                                            at android.os.Looper.loop(Looper.java:135) 
                                            at android.app.ActivityThread.main(ActivityThread.java:5254) 
                                            at java.lang.reflect.Method.invoke(Native Method) 
                                            at java.lang.reflect.Method.invoke(Method.java:372) 
                                            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903) 
                                            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698) 
                                         Caused by: java.lang.UnsatisfiedLinkError: org.bytedeco.javacpp.avutil
                                            at java.lang.Class.classForName(Native Method)
                                            at java.lang.Class.forName(Class.java:309)
                                            at org.bytedeco.javacpp.Loader.load(Loader.java:413)
                                            at org.bytedeco.javacpp.Loader.load(Loader.java:381)
                                            at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1650)
                                            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
                                            at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:129)
                                            at co.example.example.OpenCVCameraActivity.initRecorder(OpenCVCameraActivity.java:320)
                                            at co.example.example.OpenCVCameraActivity.startRecording(OpenCVCameraActivity.java:266)
                                            at co.example.example.OpenCVCameraActivity.onClickBtnStartRecord2(OpenCVCameraActivity.java:259)
                                            at java.lang.reflect.Method.invoke(Native Method) 
                                            at java.lang.reflect.Method.invoke(Method.java:372) 
                                            at android.view.View$1.onClick(View.java:4015) 
                                            at android.view.View.performClick(View.java:4780) 
                                            at android.view.View$PerformClick.run(View.java:19866) 
                                            at android.os.Handler.handleCallback(Handler.java:739) 
                                            at android.os.Handler.dispatchMessage(Handler.java:95) 
                                            at android.os.Looper.loop(Looper.java:135) 
                                            at android.app.ActivityThread.main(ActivityThread.java:5254) 
                                            at java.lang.reflect.Method.invoke(Native Method) 
                                            at java.lang.reflect.Method.invoke(Method.java:372) 
                                            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903) 
                                            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698) 
</code></pre>
",2018-07-11 11:35:07,2018-07-11 11:35:26,Android studio + OpenCV + FFmpeg,<java><android><opencv><ffmpeg><opencv3.0>,,,CC BY-SA 4.0,True,True,False,False,True
40195,35677716,2016-02-28 01:39:35,,"<p>I am triyng to capture IP camera video stream by using OpenCV Java. But I got this warning: </p>

<blockquote>
  <p>warning: Error opening file
  (../../modules/highgui/src/cap_ffmpeg_impl.hpp:537)</p>
</blockquote>

<p>I tried <a href=""https://stackoverflow.com/questions/12279833/videocapture-opencv-2-4-2-error-in-windows"">this solution</a>.But it did not work.</p>

<p>I am using openCV 2.4.11 on Windows 10.
My settings are:</p>

<blockquote>
  <p>I loaded the library: C:\opencv2411\opencv\build\java\opencv-2411.jar</p>
  
  <p>Java library path:
  -Djava.library.path=""C:\opencv2411\opencv\build\java\x64""
  C:\opencv2411\opencv\build\x64\vc12\bin and
  C:\opencv2411\opencv\sources\3rdparty\ffmpeg are added to PATH</p>
</blockquote>

<pre><code>package opencvApp;

import org.opencv.core.Core;
import org.opencv.core.Mat;
import org.opencv.highgui.Highgui;
import org.opencv.highgui.VideoCapture;

public class OpencvApp{

    public static void main(String[] args) {
        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);
        VideoCapture cap=new VideoCapture();
        cap.set(Highgui.CV_CAP_PROP_FRAME_WIDTH,640);
        cap.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT,360);
        cap.open(""‪C:\\Users\\Berkan\\Videos\\vidm1453499924.mp4"");
        //cap.open(0);
        Mat foto = new Mat();
        if (cap.isOpened())
        {
            System.out.println(""Video is opened"");
            cap.read(foto);
            Highgui.imwrite(""C:\\Users\\Berkan\\Desktop\\ada\\foto.png"", foto);
            cap.release();
        }

        else
        {
            System.out.println(""Fail"");
        }

    }

}
</code></pre>
",2017-05-23 11:45:17,2016-02-28 01:52:16,Opencv VideoCapture: Error opening file,<java><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
40305,35687984,2016-02-28 20:40:38,,"<p>I'm trying to write code to extract 16 frames from a video file using ffmpeg (or openCV - open to suggestions) and python but I'm having a lot of trouble figuring out how to get started.<br>
Can I use ffmpeg command lines directly in python? If so, are there commands to get the length of the clip and frame rate? How can I pull frames at equal intervals?</p>

<p>Any help would be appreciated! Thank you!</p>
",,2016-02-28 23:53:07,extracting frames using FFMPEG?,<python><opencv><video><ffmpeg><frame>,,,CC BY-SA 3.0,True,False,False,False,True
40360,35841067,2016-03-07 10:17:08,,"<p>Can anyone please tell what is the easiest way to complete topic task in android studio?
I found some solutions but was unable to set to work any of them.</p>

<ol>
<li><p>One suggestion was to use FFmpeg recorder like it's described <a href=""https://stackoverflow.com/a/13643182/5991151"">here</a>. Problem is recorder takes only <code>IplImage</code> type. I tried to create <code>IplImage</code> with <code>javacv.cpp.opencv_core</code>, but it refers to <code>java.awt.*</code> stuff, which is not supported by android, so i catch crash. Moreover, using <code>IplImage</code> is highly unlikely because it is old format and because transformations of <code>Mat</code> (that's type that i have) to <code>IplImage</code> takes a lot of formating steps with <code>byte[]</code>, <code>BufferedImage</code> and other types of one to another.</p></li>
<li><p>Another way i tried from <a href=""https://stackoverflow.com/questions/20463719/ffmpegmultiple-image-frames-1-audio-1-video/21304505#21304505"">here</a>. It looked acceptable - to process multiple <code>.jpeg</code> to video stream with codecs. But as far as i understand problem is that FFmpeg is not provided as complete stand-alone SDK lib for android. And almost all web-links to source FFmpeg-files which could contain methods (like <code>execFFMPEG</code>) are already dead.</p></li>
</ol>

<p>In general, topic task must not be hard: to combine simple video stream with given set of images, fixed fps and video coder (i don't even need audio stream). In practice, i'm already overheaded with tones of infos and still not a step closer to solution.
Thanks in advance.</p>
",2017-05-23 12:31:11,2016-03-08 12:13:36,Combine images to video stream,<opencv><android-studio><image-processing><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
40495,35890628,2016-03-09 11:40:54,,"<p>I'm merging audio with video by compiling <strong>compile group: 'org.bytedeco', name: 'javacv', version: '1.1'</strong> and everything works fine. </p>

<p>But when i try to compile <code>compile 'com.google.android.gms:play-services:8.4.0'</code> with it ,its giving this error </p>

<blockquote>
  <p>Error:Execution failed for task ':app:dexDebug'.
  com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process 'command
  'C:\Program Files\Java\jdk1.7.0_75\bin\java.exe'' finished with
  non-zero exit value 2</p>
</blockquote>

<p>Build.gradle</p>

<blockquote>
  <p></p>
</blockquote>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion '23.0.2'

    defaultConfig {
        applicationId ""com.app.id""
        minSdkVersion 14
        targetSdkVersion 23
    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
        }
    }

    sourceSets.main {
        jni.srcDirs = []
        jniLibs.srcDir 'src/main/jniLibs'
    }
}

dependencies {
    compile group: 'org.bytedeco', name: 'javacv', version: '1.1'
    compile 'com.android.support:appcompat-v7:23.2.0'
    compile 'com.google.android.gms:play-services:8.4.0'
}
</code></pre>
",2016-03-09 12:20:42,2016-03-09 12:20:42,"Error:Execution failed for task ':app:dexDebug' when compiling GooglePlayServices with 'org.bytedeco', name: 'javacv'",<android><ffmpeg><javacv><javacpp>,,,CC BY-SA 3.0,False,False,False,False,True
40538,35779370,2016-03-03 17:48:42,,"<p>I have a simple piece of code, written in Python (version 2.7.11) designed to do things to a video file as follows:</p>

<pre><code>import cv2

cap = cv2.VideoCapture('MyVideo.mov')
print(cap)
print(cap.isOpened())

while(cap.isOpened()):
    #Do some stuff
</code></pre>

<p>The result of print(cap) is a 8 digit hex number, so I don't know if that means that the video has been found.</p>

<p>However, the print statement for cap.isOpened() returns False. I have tried several fixes, but none of them worked. Any help or insight would be very helpful.</p>

<p>Things to note/things I have tried</p>

<ul>
<li>I am running Windows 8.1, Python 2.7.11 and OpenCV 3.1.0</li>
<li>The location of the video file is in the same directory as the Python script</li>
<li><p>I have the following directories appended to my PATH variable: </p>

<pre><code>C:\Users\MyName\OpenCV3\opencv\build\x64\vc14\bin; 
C:\Users\MyName\OpenCV3\opencv\sources\3rdparty\ffmpeg;
C:\Python27\;
C:\Python27\Scripts
</code></pre></li>
<li><p>I have checked that I have opencv_ffmpeg.dll in the OpenCV vc14 bin directory</p></li>
<li><p>I have checked that said dll file is titled opencv_ffmpeg310_64.dll</p></li>
<li><p>I have tried redownloading said dll file, and renaming it to include the version of OpenCV and the fact that my system is a 64-bit one</p></li>
<li><p>I have tried placing the dll file in the Python27 directory</p></li>
<li><p>The code above works on Mac, but not on Windows (tried the code on 2 different Macs and it worked, tried it on 2 different Windows machines and it returned false both times)</p></li>
</ul>
",2016-03-04 10:41:09,2018-09-05 11:45:24,Python - OpenCV VideoCapture = False (Windows),<python><windows><python-2.7><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
40666,35749895,2016-03-02 14:25:12,,"<p>I'm trying to install OpenCV 3.1.0 with MSVC2015 compiler using CMake. I get an error saying that the file hash is different from the expected hash. I have no access to internet on the PC this needs to be installed on. I tired to install it successfully on a PC with internet to see if I could copy those files to the PC without internet. But that didn't work as CMake deletes the files, and tries to do it it's own way. I also tried <a href=""https://stackoverflow.com/questions/32932915/opencv-3-0-0-configure-fails-ffmpeg-not-downloaded"">this</a> solution, but it didn't work. </p>

<p>Here is the error message:</p>

<pre><code>CMake Warning at cmake/OpenCVUtils.cmake:872 (message):
  Download: Local copy of opencv_ffmpeg.dll has invalid MD5 hash:
  d41d8cd98f00b204e9800998ecf8427e (expected:
  89c783eee1c47bfc733f08334ec2e31c)
Call Stack (most recent call first):
  3rdparty/ffmpeg/ffmpeg.cmake:10 (ocv_download)
  cmake/OpenCVFindLibsVideo.cmake:206 (include)
  CMakeLists.txt:536 (include)

Downloading opencv_ffmpeg.dll...
CMake Error at cmake/OpenCVUtils.cmake:895 (file):
  file DOWNLOAD HASH mismatch

    for file: [C:/OpenCV/opencv/sources/3rdparty/ffmpeg/downloads/89c783eee1c47bfc733f08334ec2e31c/opencv_ffmpeg.dll]
      expected hash: [89c783eee1c47bfc733f08334ec2e31c]
        actual hash: [d41d8cd98f00b204e9800998ecf8427e]
             status: [6;""Couldn't resolve host name""]

Call Stack (most recent call first):
  3rdparty/ffmpeg/ffmpeg.cmake:10 (ocv_download)
  cmake/OpenCVFindLibsVideo.cmake:206 (include)
  CMakeLists.txt:536 (include)


CMake Error at cmake/OpenCVUtils.cmake:899 (message):
  Failed to download opencv_ffmpeg.dll.  Status=6;""Couldn't resolve host
  name""
Call Stack (most recent call first):
  3rdparty/ffmpeg/ffmpeg.cmake:10 (ocv_download)
  cmake/OpenCVFindLibsVideo.cmake:206 (include)
  CMakeLists.txt:536 (include)
</code></pre>

<p>I would like to be able to install this without internet, but it proves very diffucult. Does anyone have any solutions to this?</p>

<p>Thanks in advance. </p>
",2017-05-23 12:33:48,2016-11-21 14:49:07,"Installing OpenCV 3.1.0 with CMake on Windows 7, opencv_ffmpeg.dll invalid hash",<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
40706,35907094,2016-03-10 03:35:56,,"<p>I am trying to convert BGR image into YUV420P, but when I try to view each of the YUV planes separately,  <a href=""https://drive.google.com/file/d/0B86c5YDIwBtUdll0ZVJWSGgwck0/view?usp=sharing"" rel=""nofollow"">this is what I see.</a> </p>

<p>Shouldn't <em>cv::Mat::data</em> and  <em>AVFrame::data[0]</em> be packed in the same way? I should be able to do a direct memcpy. Am I missing something?</p>

<p>Any ideas?</p>

<pre><code>Mat frame;
VideoCapture cap;
if(!cap.open(0)){
    return 0;
}

// capture a frame
cap &gt;&gt; frame;
if( frame.empty() ) return 0;

cv::Size s = frame.size();
int height = s.height;
int width = s.width;

// Creating two frames for conversion
AVFrame *pFrameYUV =av_frame_alloc();
AVFrame *pFrameBGR =av_frame_alloc();

// Determine required buffer size and allocate buffer for YUV frame 
int numBytesYUV=av_image_get_buffer_size(AV_PIX_FMT_YUV420P, width,
                height,1);          

// Assign image buffers
avpicture_fill((AVPicture *)pFrameBGR, frame.data,      AV_PIX_FMT_BGR24,
    width, height);

uint8_t* bufferYUV=(uint8_t *)av_malloc(numBytesYUV*sizeof(uint8_t));
avpicture_fill((AVPicture *)pFrameYUV, bufferYUV, AV_PIX_FMT_YUV420P,
        width, height);

// Initialise Software scaling context
struct SwsContext *sws_ctx = sws_getContext(width,
    height,
    AV_PIX_FMT_BGR24,
    width,
    height,
    AV_PIX_FMT_YUV420P,
    SWS_BILINEAR,
    NULL,
    NULL,
    NULL
    );

// Convert the image from its BGR to YUV
sws_scale(sws_ctx, (uint8_t const * const *)pFrameBGR-&gt;data,
      pFrameYUV-&gt;linesize, 0, height,
      pFrameYUV-&gt;data, pFrameYUV-&gt;linesize);



// Trying to see the different planes of YUV
Mat MY = Mat(height, width, CV_8UC1);
memcpy(MY.data,pFrameYUV-&gt;data[0], height*width);
  imshow(""Test1"", MY); // fail
Mat MU = Mat(height/2, width/2, CV_8UC1);
memcpy(MU.data,pFrameYUV-&gt;data[1], height*width/4);
  imshow(""Test2"", MU); // fail
Mat MV = Mat(height/2, width/2, CV_8UC1);
memcpy(MV.data,pFrameYUV-&gt;data[2], height*width/4);
  imshow(""Test3"", MV); // fail  

waitKey(0); // Wait for a keystroke in the window
</code></pre>
",2016-03-10 03:42:44,2016-03-10 09:26:24,Converting cv::Mat image from BGR to YUV using ffmpeg,<opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
40716,35793281,2016-03-04 10:11:29,,"<p>I'm trying to make an application than can stream live video to RTMP server (I'm using <a href=""https://github.com/bytedeco/javacv/blob/master/samples/RecordActivity.java"" rel=""nofollow"">this</a> example) and a way to play the video (I'm using the vitamio library).</p>

<p>I tried the JavaCV example and it was running just fine. But, after I added the vitamio library to my project, the application now gives this error.</p>

<pre><code>java.lang.UnsatisfiedLinkError: org.bytedeco.javacpp.avutil
</code></pre>

<p>at this line:</p>

<pre><code>recorder = new FFmpegFrameRecorder(ffmpeg_link, imageHeight, imageWidth, 1);
</code></pre>

<p>What's the reason for this is to happen? Removing the vitamio library will solve the problem, but I want to use these two libraries together if possible.</p>
",,2016-03-04 10:11:29,JavaCV - UnsatisfiedLinkError when used together with Vitamio library,<android><javacv><vitamio>,,,CC BY-SA 3.0,False,False,False,False,True
40725,35831013,2016-03-06 18:50:20,,"<p>I'm trying to install locally and compile my program, with that. I have installed OpenCV-2.4.10 with cmake configuration:</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=~/opencv/installation/ -D CUDA_GENERATION=Kepler -D CMAKE_CXX_COMPILER=/usr/bin/g++-4.9 -D CMAKE_C_COMPILER=/usr/bin/gcc-4.9 -DWITH_FFMPEG=OFF .. 
</code></pre>

<p>in folder <code>~/opencv/opencv-2.4.10/build</code></p>

<p>Then I have set environment variable <code>export OpenCV_DIR=/lhome/home/golda/opencv/opencv-2.4.10/build</code></p>

<p>And was trying to compile my programm with running cmake before. After setting <code>OpenCV_DIR</code> cmake has return no errors. Here's a fragment of CMakeCache.txt connected with OpenCV (With full path to my home directory. I replaced it with 
'~'):</p>

<pre><code>//Path where debug 3rdpaty OpenCV dependencies are located
OpenCV_3RDPARTY_LIB_DIR_DBG:PATH=

//Path where release 3rdpaty OpenCV dependencies are located
OpenCV_3RDPARTY_LIB_DIR_OPT:PATH=

OpenCV_CONFIG_PATH:FILEPATH=~/opencv/opencv-2.4.10/build

//The directory containing a CMake configuration file for OpenCV.
OpenCV_DIR:PATH=~/opencv/opencv-2.4.10/build

//Path where debug OpenCV libraries are located
OpenCV_LIB_DIR_DBG:PATH=

//Path where release OpenCV libraries are located
OpenCV_LIB_DIR_OPT:PATH=
</code></pre>

<p>And finally after <code>make</code> i got the errors like <code>undefined reference to 'cv::imread'</code></p>

<p>I have tried adding paths:</p>

<pre><code>~/opencv/opencv-2.4.10/build/lib:
~/opencv/opencv-2.4.10/include/opencv:
</code></pre>

<p>respectively to variables: <code>LD_LIBRARY_PATH</code> and <code>INCLUDE_PATH</code></p>

<p>My question is what should I do to fix this? I'm lack of ideas now.</p>
",,2016-03-06 18:50:20,Installing OpenCV locally,<c++><opencv><compilation><cmake><makefile>,,,CC BY-SA 3.0,True,False,False,False,True
40848,36095424,2016-03-18 22:40:35,,"<p>Here is part of the code where I am getting the error;</p>

<pre><code>private static void Main(string[] args)
    {
        #region Extract Model Face Detections From Video Clips

        var modelVideos = Directory.GetFiles(@""ModelsVideos\"", ""*.MOV"");

        foreach (var modelVideo in modelVideos)
        {
            var capture = new Capture(modelVideo);

            var framesQueue = new Queue&lt;Image&lt;Gray, byte&gt;&gt;();

            capture.ImageGrabbed += (sender, eventArgs) =&gt;
            {
                var currentFrame = capture.RetrieveGrayFrame();
                framesQueue.Enqueue(currentFrame);
            };
</code></pre>

<p>I tried many different formats and codecs, such as .mov, .avi, .mp4.
I also tried updating emgucv to version 3.0.
It won't even work when I try to read an image file. I also made sure I have all my binaries and .dll files. I saw all the solutions with opencv_ffmpeg300.dll and I made sure I have that as well. </p>

<p>This is the full error I am getting;</p>

<pre><code>An unhandled exception of type 'System.NullReferenceException' occurred in Emgu.CV.dll Additional information: Unable to create capture from ModelsVideos\video.MOV
</code></pre>

<p>Any help would be appreciated!</p>
",,2016-04-07 20:22:46,"emgucv won't read video/image files, getting an System.NullReferenceException error",<video><emgucv>,,,CC BY-SA 3.0,True,False,True,False,True
40879,36097883,2016-03-19 04:35:02,,"<p>I need to record a video within a moving rectangular area on the image.</p>

<p>Now I simply create bitmaps for each frame while moving the rectangle. Then I pick a video file from images using ffmpeg.</p>

<p>This requires a lot of time and memory especially for temporary storage of frames (about 100MB for 5s video).</p>

<p>Is there a quick and easy way for this purpose?</p>
",2016-03-19 10:32:39,2016-03-19 10:32:39,Screen recording for a specific area in Android application,<android><image-processing><ffmpeg><screenshot><video-capture>,,,CC BY-SA 3.0,False,False,False,False,True
40955,36180834,2016-03-23 14:23:41,,"<p>I am trying to use OpenCV2 with my Conda environment for Python 2.7. </p>

<p>My installation was basically the same as what was described in 
<a href=""https://stackoverflow.com/questions/36023220/how-do-i-resolve-debug-release-conflict-after-installing-opencv-under-anaconda/36050284"">this question</a>.</p>

<p>I retrieved OpenCV like so: </p>

<pre><code>conda install --channel https://conda.anaconda.org/menpo opencv3
</code></pre>

<p>I can import the library cv2 and print the version, which is 3.1.0. So far so good. I can even load an image and display it:</p>

<pre><code>import cv2

img = cv2.imread('desertfloor.jpg')
cv2.imshow('foo',img)
cv2.waitKey(0)
cv2.destroyAllWindows()
</code></pre>

<p>This works just fine. But when I go to load a video in the same directory: </p>

<pre><code>vid = cv2.VideoCapture('bbb.avi') # Big Buck Bunny
returnval,frame = vid.read()
print returnval
</code></pre>

<p>The returned value is False, which tells me that the frame wasn't returned correctly. When I check <code>vid.isOpened()</code>, it is False as well.  Since it doesn't return an error, it's really hard to tell what's going on. I've heard that ffmpeg can cause some issues if it's not installed properly (whatever that means), but I can't tell if that's what's going on here. </p>

<p>Can anyone tell me why the video isn't opening properly?</p>
",2017-05-23 12:25:55,2017-06-28 05:23:45,Opening video from file using OpenCV in Python,<python><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
41039,35955105,2016-03-12 07:45:18,,"<p>I am trying to run the example of LicensePlateRecognition in EmguCV 3.1. But I always get the error System.DllNotFoundException and the message is that ""cvextern.dll cannot be loaded"". I am running Windows 7 with Visual Studio 2013 (the computer is provided by my company).</p>

<p>I copied the said dll and some other dlls in the folder to the debug folder (the profile is set to debug mode, and I tried both x86 and x64 versions). After getting the error again and again I started to suspect that it's because of my video card driver (some Google results suggested so). I updated that and the error persisted.</p>

<p>After some more Googling, I found the Dependency Walker. One file ""IEShims.dll"" is missing. I downloaded that and put it into the debug folder with no luck.</p>

<p>Some output I think might be relevant.</p>

<blockquote>
  <p>Loading open cv binary from C:\Emgu\emgucv-windesktop 3.1.0.2282\bin\x64</p>
  
  <p>LoadLibraryEx C:\Emgu\emgucv-windesktop 3.1.0.2282\bin\x64\opencv_ffmpeg310_64.dll failed with error code 87: The parameter is incorrect.</p>
  
  <p>File C:\Emgu\emgucv-windesktop 3.1.0.2282\bin\x64\opencv_ffmpeg310_64.dll cannot be loaded.</p>
  
  <p>LoadLibraryEx C:\Emgu\emgucv-windesktop 3.1.0.2282\bin\x64\cvextern.dll failed with error code 87: The parameter is incorrect.</p>
  
  <p>File C:\Emgu\emgucv-windesktop 3.1.0.2282\bin\x64\cvextern.dll cannot be loaded.</p>
</blockquote>

<p>Does anyone know what's wrong with that?</p>

<p>The error seems to be stemmed from</p>

<pre><code>#if !UNITY_IPHONE
     //Use the custom error handler
     RedirectError(CvErrorHandlerThrowException, IntPtr.Zero, IntPtr.Zero);
#endif
</code></pre>

<p>Which is in the method</p>

<pre><code>  /// &lt;summary&gt;
  /// Attempts to load opencv modules from the specific location
  /// &lt;/summary&gt;
  /// &lt;param name=""modules""&gt;The names of opencv modules. e.g. ""opencv_cxcore.dll"" on windows.&lt;/param&gt;
  /// &lt;returns&gt;True if all the modules has been loaded successfully&lt;/returns&gt;
  public static bool DefaultLoadUnmanagedModules(String[] modules)
</code></pre>

<p>I tried a whole day to find the solution but I really don't know what I can do now. Any help is appreciated.</p>

<p>EDIT: I also tried TlbImp with no luck.</p>

<blockquote>
  <p>TlbImp : error TI1002 : The input file 'D:\Resources\cvextern.dll' is not a valid type library.</p>
</blockquote>
",2016-03-12 07:56:11,2018-03-08 15:08:45,EmguCV cvextern System.DllNotFoundException,<.net><dll><emgucv>,,,CC BY-SA 3.0,True,False,True,False,True
41085,35999301,2016-03-14 22:26:52,,"<p>Environment:</p>

<ul>
<li>centos 6.7</li>
<li>opencv 2.4.12</li>
<li>python 2.7</li>
<li>GNU libc 2.12</li>
<li>gcc version 4.4.7 20120313 (Red Hat 4.4.7-16)</li>
</ul>

<p>uname output:</p>

<pre><code>Linux xxxx 2.6.32-573.18.1.el6.x86_64 #1 SMP xxx x86_64 x86_64 x86_64 GNU/Linux
</code></pre>

<p>Clean download of 2.4.12 release and compiles fine with the following commands:</p>

<pre><code>export PYTHON_EXECUTABLE=/usr/bin/python2.7
export PYTHON_INCLUDE_PATH=/usr/include/python2.7/
export PYTHON_LIBRARY=/usr/lib64/libpython2.7.so
export PYTHON_NUMPY_INCLUDE_DIR=/home/centos/.local/lib/python2.7/site-packages/numpy/core/include/numpy
export PYTHON_PACKAGES_PATH=/home/centos/.local/lib/python2.7/site-packages
cmake  \
-DCMAKE_BUILD_TYPE=Debug \
-DCMAKE_INSTALL_PREFIX=/usr/local \
-DBUILD_WITH_DEBUG_INFO=ON \
-DPYTHON_EXECUTABLE=$PYTHON_EXECUTABLE  \
-DPYTHON_INCLUDE_PATH=$PYTHON_INCLUDE_PATH \
-DPYTHON_LIBRARY=$PYTHON_LIBRARY \
-DPYTHON_NUMPY_INCLUDE_DIR=$PYTHON_NUMPY_INCLUDE_DIR \
-DPYTHON_PACKAGES_PATH=$PYTHON_PACKAGES_PATH \
-DINSTALL_C_EXAMPLES=OFF \
-DINSTALL_PYTHON_EXAMPLES=OFF \
-DBUILD_EXAMPLES=OFF \
-DWITH_FFMPEG=OFF ..
</code></pre>

<p>Output snippet from running make</p>

<pre><code>--   Media I/O: 
--     ZLib:                        /usr/lib64/libz.so (ver 1.2.3)
--     JPEG:                        /usr/lib64/libjpeg.so (ver )
--     PNG:                         /usr/lib64/libpng.so (ver 1.2.49)
--     TIFF:                        /usr/lib64/libtiff.so (ver 42 - 3.9.4)
--     JPEG 2000:                   /usr/lib64/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib64/libImath.so /usr/lib64/libIlmImf.so /usr/lib64/libIex.so /usr/lib64/libHalf.so /usr/lib64/libIlmThread.so (ver 1.6.1)
-- 
</code></pre>

<p>However. This runs fine:</p>

<pre><code>&gt;$ python2.7 -c ""import cv2; cv2.imread('test.png')""
</code></pre>

<p>But this does not:</p>

<blockquote>
  <p>$ python2.7 -c ""import cv2; cv2.imread('test.tif')""</p>
</blockquote>

<pre><code>OpenCV Error: Assertion failed (udata &lt; (uchar*)ptr &amp;&amp; ((uchar*)ptr -
udata) &lt;= (ptrdiff_t)(sizeof(void*)+16)) in fastFree, file
/fleuron-data/opencv-2.4.12/modules/core/src/alloc.cpp, line 78
terminate called after throwing an instance of 'cv::Exception'
  what():  /fleuron-data/opencv-2.4.12/modules/core/src/alloc.cpp:78:
error: (-215) udata &lt; (uchar*)ptr &amp;&amp; ((uchar*)ptr - udata) &lt;=
(ptrdiff_t)(sizeof(void*)+16) in function fastFree

Aborted
</code></pre>

<p>And has me lost..</p>
",2016-03-16 11:21:49,2016-03-16 14:45:53,Segmentation fault on reading TIF file with python / opencv,<python-2.7><opencv><segmentation-fault><tiff><libtiff>,,,CC BY-SA 3.0,True,False,False,False,True
41118,36157194,2016-03-22 14:30:23,,"<p>I'm using this command to count frames in video.</p>

<pre><code>FRAME_COUNT=`./ffprobe -v error -count_frames -select_streams v:0 -show_entries stream=nb_read_frames -of default=nokey=1:noprint_wrappers=1 $VIDEO_NAME`
</code></pre>

<p>and this command for video splitting:</p>

<pre><code>ffmpeg -i $VIDEO_NAME -qscale:v 1 $DIRNAME$SEPARATOR'image%d.jpg'
</code></pre>

<p>but last command produce much more images then expected for some videos, for example calculated number of frames is 597 and produces number of images > 100,000.</p>

<p>What can be the case of such behaviour?</p>
",2016-03-22 15:12:31,2016-03-22 15:12:31,ffmpeg produce not expected number of frames,<video><image-processing><ffmpeg><ffprobe>,,,CC BY-SA 3.0,False,False,False,False,True
41223,36301937,2016-03-30 07:08:42,,"<p>I want to resize an image. I used ffmpeg for that. I used the following command</p>

<p>ffmpeg -i in.jpg -vf scale=200:200 -sws_flags lanczos out.png</p>

<p>Whether this command runs in CPU or GPU?? If the command is not running in GPU, how can i set it to run in GPU (NVIDIA) ??</p>
",,2016-03-30 07:41:53,FFMPEG GPU Image Processing,<image-processing><ffmpeg><gpu><nvidia>,,,CC BY-SA 3.0,False,False,False,False,True
41240,36126482,2016-03-21 08:52:08,,"<p>I have installed OpenCV 3.1.0 from the <code>sourfage</code> site. It is pre-built. I've followed this <a href=""http://docs.opencv.org/3.1.0/d5/de5/tutorial_py_setup_in_windows.html#gsc.tab=0"" rel=""nofollow"">site</a>'s tutorial. Tried to read a <code>mp4</code> video at first, but got negative result. After did some searching, I've included a path to the <code>opencv_ffmpeg310.dll</code> (at the same time, also to the <code>opencv_ffmpeg310_64.dll</code>) which is in the directory of <code>C:\opencv\build\bin\</code>. But I can't play some <code>avi</code> videos (not all). I have installed <code>Xvid</code> but still got no any positive results. Whenever I've tried to play this <code>avi</code> video, I will get message that said <code>python.exe has stopped working</code>. </p>

<p>Any ideas how to solve this? </p>
",,2016-03-21 08:52:08,Problems with reading some avi videos (OpenCV with Python),<python><opencv><video>,,,CC BY-SA 3.0,True,False,False,False,True
41252,36087678,2016-03-18 15:00:30,,"<p>I'm writing a simple software to capture and record webcam images to a compressed video file. I'm using OpenCV ""VideoCapture read(frame)"" and  ""VideoWriter write(frame)"" in a C++ software.</p>

<p>I'm on Ubuntu 14.04 LTS operating system.</p>

<p>I would like to know which library OpenCV is using under the hood. 
Is it ffmpeg or gstreamer or V4L2 or its own low level source code ?
It seems to be changing depending of the OpenCV version I'm using. (Ex 2.4.1, 2.4.11, 3.x)</p>

<p>Can somebody give me a overview of what OpenCV is doing to decode/encode  video ?</p>

<p>What is the typical path of the video data coming from the webcam up to my program in user space ?
What is the typical path of the video data coming from program up to the file system ?</p>

<p>Right now, this is confusing for me.</p>
",2016-03-19 22:43:17,2016-03-19 22:43:17,Which video library is OpenCV using under the hood on linux?,<c++><opencv><gstreamer><video-capture><v4l2>,2016-03-19 03:47:21,,CC BY-SA 3.0,True,False,False,False,True
41256,36262340,2016-03-28 12:29:56,,"<p>Is there any way to read frames from an mp4 video using <strong>JavaCV</strong> in parallel?
I know that we could grab frames using <code>FFmpegFrameGrabber</code> but is there any other efficient method like using <code>FrameGrabber.Array</code> ?, I tried the below code but its not working.</p>

<pre><code>frames = new Frame[grabber.getLengthInFrames()];
                frameGrabbers = new FFmpegFrameGrabber[grabber.getLengthInFrames()];
                *//*for (FFmpegFrameGrabber grabber : frameGrabbers) {
                    grabber = new FFmpegFrameGrabber(path);
                }*//*
                for (int i = 0; i &lt; grabber.getLengthInFrames(); i++) {
                    frameGrabbers[i] = new FFmpegFrameGrabber(path);
                }
                grabberArray = grabber.createArray(frameGrabbers);

                grabberArray.start();

                frames = grabberArray.grab();
                grabberArray.release(); 
</code></pre>

<p>The app crashes when I call <code>grabberArray.start()</code>.<br/>
Thanks.</p>
",2016-03-28 12:40:31,2016-05-07 14:18:46,Android FFmpeg grab frames in parallel from a video,<android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
41282,36422211,2016-04-05 09:24:32,,"<p>Output video:
<a href=""https://youtu.be/VxfoBQjoY6E"" rel=""nofollow"">https://youtu.be/VxfoBQjoY6E</a></p>

<p><strong>Explanation:</strong></p>

<p>I want to: Process camera stream in Opencv and push it over to RTMP server. I already have NGINX (RTMP module) set up and I have tested streaming videos with both RTMP (Flash Player) and HLS.</p>

<p>I am reading the frames in a loop and using 'subprocess' in python to execute ffmpeg command. Here's the command I am using:</p>

<pre><code>command = [ffmpeg,
    '-y',
    '-f', 'rawvideo',
    '-vcodec','rawvideo',
    '-pix_fmt', 'bgr24',
    '-s', dimension,
    '-i', '-',
    '-c:v', 'libx264',
    '-pix_fmt', 'yuv420p',
    '-preset', 'ultrafast',
    '-f', 'flv',
    'rtmp://10.10.10.80/live/mystream']


import subprocess as sp
...
proc = sp.Popen(command, stdin=sp.PIPE,shell=False)
...
proc.stdin.write(frame.tostring()) #frame is read using opencv
</code></pre>

<p><strong>Problem:</strong></p>

<p>I can see the stream fine but it freezes and resumes frequently. Here's the output of FFMPEG terminal log:</p>

<pre><code>Stream mapping:
  Stream #0:0 -&gt; #0:0 (rawvideo (native) -&gt; h264 (libx264))
frame=  117 fps= 16 q=22.0 size=     344kB time=00:00:04.04 bitrate= 697.8kbits/s speed=0.543x   
</code></pre>

<p>It mentions speed at the end. I believe it should be close to 1x. I am not sure how to achieve that.</p>

<p>And I am on the same network as server, I can post my python code if required. Need some ffmpeg guru to give me some advise.  </p>

<p><strong>EDIT</strong></p>

<p>My input fps is actually ~3.
With <code>'-use_wallclock_as_timestamps', '1'</code> I can see in the log that speed is close to 1x.
But HLS is not streaming live there's ~2 min delay, it halts and . Chris's advise partially worked. I am not sure where exactly is the problem, I am starting to believe it has something to do with nginx-rtmp module.</p>

<p>Here's the final output, on left it's flash and on right it's hls. I am showing the ffmpeg options at the end.
<a href=""https://youtu.be/jsm6XNFOUE4"" rel=""nofollow"">https://youtu.be/jsm6XNFOUE4</a></p>
",2016-04-19 11:28:51,2019-08-12 03:27:58,"Processing Camera stream in Opencv, pushing it over RTMP (NGINX RTMP Module) using FFMPEG",<opencv><nginx><ffmpeg><rtmp><http-live-streaming>,,,CC BY-SA 3.0,True,False,False,False,True
41303,36463903,2016-04-06 23:09:30,,"<p>I am compiling and installing OpenCV using the steps in <a href=""http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html"" rel=""nofollow"">http://docs.opencv.org/2.4/doc/tutorials/introduction/linux_install/linux_install.html</a></p>

<p>But during ""making"" it, it has error when it reaches 45%. The error message is </p>

<pre><code>...
[ 43%] Built target pch_Generate_opencv_video
[ 44%] Built target opencv_video
[ 44%] Built target opencv_perf_video_pch_dephelp
[ 45%] Built target pch_Generate_opencv_perf_video  
Linking CXX executable ../../bin/opencv_perf_video
../../lib/libopencv_videoio.so.3.1.0: undefined reference to `avcodec_alloc_frame'
../../lib/libopencv_videoio.so.3.1.0: undefined reference to `avcodec_encode_video'
collect2: error: ld returned 1 exit status
make[2]: *** [bin/opencv_perf_video] Error 1
make[1]: *** [modules/video/CMakeFiles/opencv_perf_video.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I downloaded and installed the latest version of ffmpeg from <a href=""https://www.ffmpeg.org/"" rel=""nofollow"">https://www.ffmpeg.org/</a>. </p>

<p>Anyone knows how can I fix the errors?</p>

<p>Thank you. </p>
",,2016-04-06 23:09:30,"""Undefined reference to `avcodec_alloc_frame"" Error when compile and install Opencv on linux",<linux><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
41310,36307591,2016-03-30 11:33:59,,"<p>I am using OpenCV 3.1 with Visual Studio 2010 in Windows 64 bits. I have rebuilt OpenCV by means of Cmake recently and it appears the next error when I try to compile:</p>

<blockquote>
  <p>No se encuentra el punto de entrada del procedimiento 
  __vcrt_cleanup_type_info_names en la biblioteca de vínculos dinámicos VCRUNTIME140D.dll</p>
</blockquote>

<p>I am using </p>

<ul>
<li>opencv_world310d.dll</li>
<li>opencv_ffmpeg310_64.dll</li>
</ul>

<p>I didn't have this problem when I compiled the same code with the official version of OpenCV 3.0. Any thoughts on this?</p>

<p>Thanks in advance.</p>
",2016-03-30 14:18:10,2016-03-31 10:36:48,VisualStudio 2010 - Dll error: __vcrt_cleanup_type_info_names,<c++><visual-studio-2010><opencv><dll><opencv3.1>,,,CC BY-SA 3.0,True,False,False,False,True
41318,36207756,2016-03-24 18:43:37,,"<p>Basically I already have opencv 2.4.8 on my laptop which I have downloaded through anaconda python. But now I need C++ to code a computer vision module, so I have tried installing opencv 2.4.11 first but I got compiling error when I compiled the c++ program.</p>

<p>The same error occurs when I deleted opencv 2.4.11 and installed opencv 2.4.10. Below is just the last part of the huge error that I get.</p>

<pre><code>/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro._ZTV15DefaultViewPort[_ZTV15DefaultViewPort]+0x1e0): undefined reference to `QGraphicsView::drawItems(QPainter*, int, QGraphicsItem**, QStyleOptionGraphicsItem const*)'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro._ZTV15DefaultViewPort[_ZTV15DefaultViewPort]+0x268): undefined reference to `non-virtual thunk to QWidget::devType() const'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro._ZTV15DefaultViewPort[_ZTV15DefaultViewPort]+0x270): undefined reference to `non-virtual thunk to QWidget::paintEngine() const'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro._ZTV15DefaultViewPort[_ZTV15DefaultViewPort]+0x278): undefined reference to `non-virtual thunk to QWidget::metric(QPaintDevice::PaintDeviceMetric) const'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro._ZTV15DefaultViewPort[_ZTV15DefaultViewPort]+0x280): undefined reference to `non-virtual thunk to QWidget::initPainter(QPainter*) const'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro._ZTV15DefaultViewPort[_ZTV15DefaultViewPort]+0x288): undefined reference to `non-virtual thunk to QWidget::redirected(QPoint*) const'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro._ZTV15DefaultViewPort[_ZTV15DefaultViewPort]+0x290): undefined reference to `non-virtual thunk to QWidget::sharedPainter() const'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x0): undefined reference to `QGraphicsView::staticMetaObject'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x40): undefined reference to `QWidget::staticMetaObject'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x80): undefined reference to `QWidget::staticMetaObject'

 /usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0xc0): undefined reference to `QHBoxLayout::staticMetaObject'

     /usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x100): undefined reference to `QRadioButton::staticMetaObject'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x140): undefined reference to `QCheckBox::staticMetaObject'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x180): undefined reference to `QPushButton::staticMetaObject'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x1c0): undefined reference to `QHBoxLayout::staticMetaObject'

/usr/local/lib/libopencv_highgui.a(opencv_highgui_automoc.cpp.o):(.data.rel.ro+0x200): undefined reference to `QObject::staticMetaObject'

collect2: error: ld returned 1 exit status
</code></pre>

<p>I am not sure whether it is a problem with the opencv libraries or some other software dependencies.
This is the cmake command which I  used to build opencv 2.4.10.</p>

<pre><code>cmake -G ""Unix Makefiles"" -D CMAKE_CXX_COMPILER=/usr/bin/g++ CMAKE_C_COMPILER=/usr/bin/gcc -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON -D BUILD_FAT_JAVA_LIB=ON -D INSTALL_TO_MANGLED_PATHS=ON -D INSTALL_CREATE_DISTRIB=ON -D INSTALL_TESTS=ON -D ENABLE_FAST_MATH=ON -D WITH_IMAGEIO=ON -D BUILD_SHARED_LIBS=OFF -D WITH_GSTREAMER=ON -DPYTHON_LIBRARY=/usr/lib/x86_64-linux-gnu/libpython2.7.so -D WITH_FFMPEG=OFF ..
</code></pre>

<p>I can't find any solution to this problem. Would using a higher level program like codeblocks to link to opencv libraries solve the problem?</p>
",2016-03-24 23:32:17,2016-03-24 23:32:17,Weird compilation error c++ opencv 2.4.10 on ubuntu 14.04lts,<c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
41339,36310291,2016-03-30 13:27:47,,"<p>I'm working on my MSc project which is researching automated deletion of low value content in digital file stores. I'm specifically looking at the sort of long shots that often occur in natural history filming whereby a static camera is left rolling in order to capture the rare snow leopard or whatever. These shots may only have some 60s of useful content with perhaps several hours of worthless content either side. </p>

<p>As a first step I have a simple motion detection program from Adrian Rosebrock's tutorial [<a href=""http://www.pyimagesearch.com/2015/05/25/basic-motion-detection-and-tracking-with-python-and-opencv/#comment-393376]"" rel=""nofollow noreferrer"">http://www.pyimagesearch.com/2015/05/25/basic-motion-detection-and-tracking-with-python-and-opencv/#comment-393376]</a>. Next I intend to use FFMPEG to split the video. </p>

<p>What I would like help with is how to get in and out points based on the first and last points that motion is detected in the video. </p>

<p>Here is the code should you wish to see it...</p>

<pre><code># import the necessary packages
import argparse
import datetime
import imutils
import time
import cv2

# construct the argument parser and parse the arguments
ap = argparse.ArgumentParser()
ap.add_argument(""-v"", ""--video"", help=""path to the video file"")
ap.add_argument(""-a"", ""--min-area"", type=int, default=500, help=""minimum area size"")
args = vars(ap.parse_args())

# if the video argument is None, then we are reading from webcam
if args.get(""video"", None) is None:
camera = cv2.VideoCapture(0)
time.sleep(0.25)

# otherwise, we are reading from a video file
else:
    camera = cv2.VideoCapture(args[""video""])

# initialize the first frame in the video stream
firstFrame = None

# loop over the frames of the video
while True:
    # grab the current frame and initialize the occupied/unoccupied
    # text
    (grabbed, frame) = camera.read()
    text = ""Unoccupied""

    # if the frame could not be grabbed, then we have reached the end
    # of the video
    if not grabbed:
        break

    # resize the frame, convert it to grayscale, and blur it
    frame = imutils.resize(frame, width=500)
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    gray = cv2.GaussianBlur(gray, (21, 21), 0)

    # if the first frame is None, initialize it
    if firstFrame is None:
        firstFrame = gray
        continue

    # compute the absolute difference between the current frame and
    # first frame
    frameDelta = cv2.absdiff(firstFrame, gray)
    thresh = cv2.threshold(frameDelta, 25, 255, cv2.THRESH_BINARY)[1]

    # dilate the thresholded image to fill in holes, then find contours
    # on thresholded image
    thresh = cv2.dilate(thresh, None, iterations=2)
    (_, cnts, _) = cv2.findContours(thresh.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)

    # loop over the contours
    for c in cnts:
        # if the contour is too small, ignore it
        if cv2.contourArea(c) &lt; args[""min_area""]:
            continue

        # compute the bounding box for the contour, draw it on the frame,
        # and update the text
        (x, y, w, h) = cv2.boundingRect(c)
        cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 2)
        text = ""Occupied""

    # draw the text and timestamp on the frame
    cv2.putText(frame, ""Room Status: {}"".format(text), (10, 20),
        cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 0, 255), 2)
    cv2.putText(frame, datetime.datetime.now().strftime(""%A %d %B %Y %I:%M:%S%p""),
        (10, frame.shape[0] - 10), cv2.FONT_HERSHEY_SIMPLEX, 0.35, (0, 0, 255), 1)

    # show the frame and record if the user presses a key
    cv2.imshow(""Security Feed"", frame)
    cv2.imshow(""Thresh"", thresh)
    cv2.imshow(""Frame Delta"", frameDelta)
    key = cv2.waitKey(1) &amp; 0xFF

    # if the `q` key is pressed, break from the lop
    if key == ord(""q""):
        break

# cleanup the camera and close any open windows
camera.release()
cv2.destroyAllWindows()
</code></pre>
",2018-11-10 10:12:08,2018-11-10 10:12:08,How to obtain time markers for video splitting using python/OpenCV,<python><opencv><video><ffmpeg>,,,CC BY-SA 4.0,True,False,False,False,True
41370,36467579,2016-04-07 05:41:22,,"<p>Opencv(2.4.9) to capture video,but the program is slower when I put it on the centos(ffmpeg 1.1.3) than on the windows,what's wrong?</p>

<p><img src=""https://i.stack.imgur.com/woe6L.png"" alt=""Screenshot of the code""></p>
",2016-04-07 21:55:53,2016-04-07 21:55:53,"Opencv(2.4.9) to capture video,but the program is slower when I put it on the centos(ffmpeg 1.1.3) than on the windows,what's wrong?",<opencv><video><ffmpeg><centos>,,,CC BY-SA 3.0,True,False,False,False,True
41462,36552904,2016-04-11 15:25:42,,"<p>I've installed opencv3.1.0 through anaconda along with the ffmpeg package. opencv still gives </p>

<pre><code>Failed to parse avi: index was not found
</code></pre>

<p>when I try to read an .avi file.
Is it possible to have .avi files work straight out of anaconda or do I have to compile everything manually (a process I have not have had much luck with so far).</p>
",,2016-04-11 15:25:42,Opencv failed to parse AVI,<python><python-2.7><opencv><anaconda><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
41486,36435356,2016-04-05 19:27:16,,"<p>Morning,</p>

<p>i have problem with opening stream at my IP Cam D-Link DSC-935L. All works good in VLC, but when i try open stream at Java over the OpenCV (with opencv_ffmpeg310_64.dll) &amp; VideoCapture - i get only this error:</p>

<blockquote>
  <p>[rtsp @ 000000002defd160] method DESCRIBE failed: 401 Unauthorized</p>
</blockquote>

<p>My code snippet</p>

<pre><code>videoCapture = new VideoCapture();
videoCapture.open(""rtsp://admin@10.0.0.20:554/upceSource.mjpg"");

if (!videoCapture.isOpened()) {
    System.out.println(""FAILED"");
}else{
    System.out.println(""OK"");
}
</code></pre>

<p>How i can pass username by another way? I have no password set. </p>

<p>Login: admin</p>

<p>Password: <strong>unused</strong></p>

<p>Thanks for all help.</p>
",,2016-04-05 19:27:16,JAVA RTSP Opening IP Cam failed on 401 - Unauthorized,<java><opencv><ffmpeg><authorization><rtsp>,,,CC BY-SA 3.0,True,False,False,False,True
41501,36396984,2016-04-04 07:39:42,,"<p>I am testing an opencv video capture code on my BBB (running Debian Wheezy: Linux beaglebone 3.8.13-bone79 #1 SMP Tue Oct 13 20:44:55 UTC 2015 armv7l GNU/Linux) but getting a select timeout error everytime i run the program. Now i am behind schedule of my final year Iris recognition system Project. (In case you want to know why i am going through this video capture code, it is for tracking the eyes then capture an image that will be processed to obtain an IrisCode.)</p>

<p>I installed opencv 3.0.0 following instructions on <a href=""http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/#comment-393561"" rel=""nofollow noreferrer"">http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/#comment-393561</a> , but had to turn off ffmpeg (suggested on one of the forums: <a href=""https://stackoverflow.com/questions/31663498/opencv-3-0-0-make-error-with-ffmpeg/31818445#31818445"">OpenCV 3.0.0 make error with FFMPEG</a> ) after obtaining a compilation errors but firstly i had compiled ffmpeg from source.</p>

<p>Below is the Video_Capturing code i tested with;</p>

<pre><code>import numpy as np
import cv2

cap = cv2.VideoCapture(0)

while(True):
     # Capture frame-by-frame
     ret, frame = cap.read()

 # Our operations on the frame come here
 gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

 # Display the resulting frame
 cv2.imshow('frame',gray)
 if cv2.waitKey(1) &amp; 0xFF == ord('q'):
     break

# When everything done, release the capture
cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>After running the code i am obtaining the following information  (Note: The frame is only opening when i run the python script in LXTerminal accessed through tightvnc. It is failing to run through ssh);</p>

<pre><code>root@beaglebone:~/Project/Testing# python Video_Streaming.py

(process:1488): Gtk-WARNING **: Locale not supported by C library.
        Using the fallback 'C' locale.
Xlib:  extension ""RANDR"" missing on display "":1"".
select timeout
select timeout
select timeout
select timeout
^Cselect timeout
Traceback (most recent call last):
  File ""Video_Streaming.py"", line 8, in &lt;module&gt;
    ret, frame = cap.read()
KeyboardInterrupt
root@beaglebone:~/Project/Testing#
</code></pre>

<p>I'm stuck i need your help.</p>
",2017-05-23 12:17:21,2016-08-23 08:33:02,Select timeout error on BeagleBone Black,<python><linux><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
41589,36519600,2016-04-09 16:28:58,,"<p>I am scaling and rotating a transparent (spade.png) image and placing it as overlay on an input image and save the output.png. This is my command:</p>

<blockquote>
  <p>ffmpeg -y -i input.png -i spade.png -filter_complex [1]scale=120:114,setsar=1,format=bgra,rotate=0.78:<strong>c=none</strong>:ow=rotw(0.78):oh=roth(0.78)[s];[0][s]overlay=728-114*sin(0.78):177[out] -pix_fmt bgra -strict experimental -s 640x360 -map [out] output.png</p>
</blockquote>

<p>shovel.png (250x238) :</p>

<h2><img src=""https://i.gyazo.com/f937e9d8d34dc53b92912026beecc398.png"" alt=""shovel""></h2>

<p>When i don't scale spade.png, it is displaying ok:</p>

<h2><img src=""https://i.gyazo.com/ca6adccf2ae21fde3438a20bf5354a9f.png"" alt=""ok""></h2>

<p>But when i <strong>scale + rotate spade.png</strong>, the <strong>colorfill</strong> is not working properly:</p>

<h2><img src=""https://i.gyazo.com/1c393f955952d59e2a93907352eafdfb.png"" alt=""problem""></h2>

<p>Is this a known ffmpeg bug? Or am I using the <strong>-filter_complex</strong> parameters in the wrong order? Should I use another pix_frmt? Any idea's? Thanks</p>
",,2016-08-18 06:21:03,FFmpeg rotated transparent images colorfill not working properly,<image><image-processing><ffmpeg><rotation><image-rotation>,,,CC BY-SA 3.0,False,False,False,False,True
41640,36524781,2016-04-10 01:41:00,,"<p>there are a lot of questions asked regarding opencv + H.264 but
none of them gave detailed explanation.<Br><Br>
i am using openh264(openh264-1.4.0-win32msvc.dll) along with opencv 3.1(custom build with cmake having ffmpeg enabled) in visual studio, i wanted to save video coming from webcam in mp4 format with H.264 compression</p>

<blockquote>
  <p>VideoWriter write = VideoWriter(""D:/movie.mp4"", CV_FOURCC('H', '2',
  '6', '4'), 10.0, cv::Size(192, 144), true);</p>
</blockquote>

<p>before using openh264, in console window i was seeing an warning message
""Failed to load openh264 library : openh264-1.4.0-win32msvc.dll
please check your environment and/or download from here:
<a href=""https://github.com/cisco/openh264/releases"" rel=""nofollow"">https://github.com/cisco/openh264/releases</a>""
(also video was not been saved)</p>

<p>so i downloaded the dll &amp; kept in a folder with my program file(exe)
now when i run the program, i'm seeing different error
""[OpenH264] this = 0x0DE312C0, warning: bEnabledFrameSkip=0, bitrate can't be controlled for RC_QUALITY_MODE and RC_TIMESTAMP_MODE without enabling skip frame""
(now video is saved, but size is very high! bit rate is around 1200 Kbps)</p>

<p>for me, the sole purpose of using h264 is to reduce the file size.. i think i may have to build openh264 myself with some changes to remove this error, can anyone guide me how? or tell me if there is a way to reduce bit rate somehow through code?</p>

<p>P.S: I tried giving -1 instead of CV_FOURCC(), 'installed codecs' window in my system showed up, i couldn't find h264  or  x264  or  h264vfw even though i have installed variety of codec packs &amp; h264 from <a href=""http://www.fourcc.org/x264/"" rel=""nofollow"">here</a></p>

<p>Thanks &amp; regards</p>
",,2016-07-19 09:06:52,"openh264 - bEnableFrameSkip=0, bitrate can't be controlled",<c++><opencv><codec><opencv3.1><openh264>,,,CC BY-SA 3.0,True,False,False,False,True
41761,36497169,2016-04-08 10:20:41,,"<p>I'm planning to develop a simple solution that would able me to perform a very basic video stream analysis on the fly. I've never done anything like that before, hence the very general and open question. The main focus is on checking if the stream is going without problems like - freeze frames, black screens and if the audio is there. Sync is out of scope. I read about open libraries like OpenCV and Xuggler, but they seem more complex than for my needs. FFmpeg is able to detect black screens, but not on the fly. </p>

<p>Is there any other open lib I could look into? Could you advise me anything? I'm thinking about using Java or Python. Or maybe both. Efficiency of the solution is out of scope, I'm focusing now only on freeze frames and black screens detection. </p>

<p>Any advise is welcome!</p>

<p>Best regards, 
Peter</p>
",,2020-08-12 08:14:27,Video stream analysis on the fly - advise?,<opencv><video><ffmpeg><video-streaming><xuggler>,,,CC BY-SA 3.0,True,False,False,False,True
41801,36535607,2016-04-10 21:11:23,,"<p>I am trying to pass a video to the OpenCV VideoCapture class. However when I call the <code>VideoCapture.isOpened()</code> method it always returns <code>false</code>. I have tried two methods: </p>

<ol>
<li><p>Saving the video file to the internal memory, <code>context.getFilesDir()</code> => /data/data/package_name/files/VideoToAnalyze/Recording.mp4</p></li>
<li><p>and also one to <code>environment.getExternalStorageDirectory()</code> => sdcard/appName/Recording.mp4. </p></li>
</ol>

<p>Nothing seems to work here. My question is how do I pass a video file (or what is the correct file path) to a VideoCapture OpenCV object? I've posted some code below as an example. Note that I don't get an error. The file is always found/exists, but when I call <code>isOpened()</code> I always get <code>false</code>.</p>

<p>UPDATE:
So it looks like everyone on the web is saying that OpenCV (I'm using 3.10) is lacking a ffmpeg backend and thus cannot process videos. I'm wondering does anyone know this as a fact ?? And is there a work around. Almost all other alternatives to process videos frame by frame is deathly slow.</p>

<pre><code>String x = getApplicationContext().getFilesDir().getAbsolutePath();
File dir = new File(x + ""/VideoToAnalyze"");
if(dir.isDirectory()) {
       videoFile = new File(dir.getAbsolutePath() + ""/Recording1.mp4"");
} else {
      // handle error
}

if(videoFile.exits(){

     String absPath = videoFile.getAbsolutePath();
     VideoCapture vc = new VideoCapture();
     try{
           vc.open(absPath);
     } catch (Exception e) {
       /// handle error
     }

     if(!vc.isOpened(){
         // this code is always hit
         Log.v(""VideoCapture"", ""failed"");
     } else {
         Log.v(""VideoCapture"", ""opened"");


    .....
</code></pre>
",2016-04-11 00:23:08,2017-02-16 09:45:41,How To: Android OpenCV VideoCapture with File,<android><c++><opencv><video><video-capture>,,,CC BY-SA 3.0,True,False,False,False,True
41833,36579542,2016-04-12 16:53:46,,"<p>This has been keeping me busy for a good part of the afternoon and I haven't been able to get it to work but I feel like I'm really close.</p>

<p>I've got openCV set up which takes the videofeed from a webcam. To be able to access this video feed (with openCV overlay) I want to pipe the output of the openCV python script to a VLC stream. I managed to get the stream up and running and can connect to it. VLC resizes to the correct aspect ratio and resolution so it gets some correct data but the image I get is just <strong>Jitter</strong>;</p>

<pre><code>python opencv.py | cvlc --demux=rawvideo --rawvid-fps=30 --rawvid-width=320 --rawvid-height=240  --rawvid-chroma=RV24 - --sout ""#transcode{vcodec=h264,vb=200,fps=30,width=320,height=240}:std{access=http{mime=video/x-flv},mux=ffmpeg{mux=flv},dst=:8081/stream.flv}"" &amp;
</code></pre>

<p>The output of the script is a constant video feed sent to stdout as follows</p>

<pre><code>from imutils.video import WebcamVideoStream

vs = WebcamVideoStream(src=0)

while True: 
  frame = vs.read()
  sys.stdout.write(frame.tostring())
</code></pre>

<p>Above example is a dumbed down version of the script I'm using; Also as seen I'm making use of the imutils library; <a href=""https://github.com/jrosebr1/imutils"" rel=""noreferrer"">https://github.com/jrosebr1/imutils</a></p>

<p>If anyone could give me a nudge in the right direction I would appreciate it greatly. My guess is the stdout.write(frame.tostring()) is not what vlc expects but I haven't been able to figure it out myself.</p>
",2016-05-05 14:26:52,2018-09-25 20:59:40,Sending OpenCV output to VLC stream,<python><opencv><vlc>,,,CC BY-SA 3.0,True,False,False,False,True
41848,36675136,2016-04-17 10:04:25,,"<p>I am using javacv version-1.1 on android studio and it is working perfectly.</p>

<p>I want to crop and apply overlay to a video using FFmpegFrameFilter. I am not an expert in ffmpeg commands so can you help me please to achieve it.</p>

<p>Overlay should be same size of the frame. I am able to crop but also wants an image overlay of the size of video frame.</p>

<p>Thanks</p>
",,2016-04-17 10:04:25,Crop and Overlay on a video simultaneously using JavaCV for Android,<android><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
41890,36761173,2016-04-21 06:20:22,,"<ul>
<li>I have one cv::Mat image.Now i want to convert this mat to AVFrame in ffmpeg.</li>
<li><p>I have trie below code,</p>

<pre><code>void matToAVFrame(cv::Mat frame)
{
    AVFrame *dst, *yuv422_final_frame;
      cv::Size frameSize = frame.size();
      AVCodec *encoder = avcodec_find_encoder(AV_CODEC_ID_H264);
      AVFormatContext* outContainer = avformat_alloc_context();
      AVStream *outStream = avformat_new_stream(outContainer, encoder);
      avcodec_get_context_defaults3(outStream-&gt;codec, encoder);
      dst = av_frame_alloc();
      outStream-&gt;codec-&gt;pix_fmt = AV_PIX_FMT_YUV420P;
      outStream-&gt;codec-&gt;width = frame.cols;
      outStream-&gt;codec-&gt;height = frame.rows;
      avpicture_fill((AVPicture*)dst, frame.data, AV_PIX_FMT_BGR24, outStream-&gt;codec-&gt;width, outStream-&gt;codec-&gt;height);
      dst-&gt;width = frameSize.width;
      dst-&gt;height = frameSize.height;

//      av_image_alloc((uint8_t**)frame.data, dst-&gt;linesize,dst-&gt;width, dst-&gt;height,
//            AV_PIX_FMT_BGR24, 32);

      yuv422_final_frame = av_frame_alloc();
      int yuv422_num_bytes = avpicture_get_size( AV_PIX_FMT_YUV420P,  dst-&gt;width, dst-&gt;height );
      uint8_t* final_frame2_buffer = (uint8_t *)av_malloc(yuv422_num_bytes*sizeof(uint8_t));


      yuv422_final_frame-&gt;width = frameSize.width;
      yuv422_final_frame-&gt;height = frameSize.height;
      avpicture_fill((AVPicture*)yuv422_final_frame, (uchar*)dst-&gt;data, AV_PIX_FMT_YUV420P,  dst-&gt;width, dst-&gt;height);

     SwsContext *final_sws_ctx = sws_getContext(dst-&gt;width , dst-&gt;height,
         AV_PIX_FMT_BGR24, dst-&gt;width, dst-&gt;height,
         AV_PIX_FMT_YUV420P, SWS_FAST_BILINEAR, 0, 0, 0);

//     avpicture_fill((AVPicture*)dst, frame.data, AV_PIX_FMT_RGB24, dst-&gt;width, dst-&gt;height);
     sws_scale(final_sws_ctx, dst-&gt;data,
             dst-&gt;linesize,
               0, dst-&gt;height,
               yuv422_final_frame-&gt;data,
               yuv422_final_frame-&gt;linesize);

     Mat cvmImage = cv::Mat( yuv422_final_frame-&gt;height, yuv422_final_frame-&gt;width, CV_8UC3, yuv422_final_frame-&gt;data[2],
             yuv422_final_frame-&gt;linesize[2]);

     imwrite(""/home/radix/Desktop/OpenCV/cvmImage.png"", cvmImage);
}
int main()
{
    av_register_all();
    Mat frame = imread(""path to image"");
    matToAVFrame(frame);
}
</code></pre></li>
</ul>

<p>but it is giving me some bad image, and in some cases it is not giving any image.
* So please anybody tell me where i am doing wrong.Thanks!!</p>

<ul>
<li><strong>EDIT:</strong></li>
<li><p>Sometimes it gives me error like <code>[swscaler @ 0x1c9a6e0] bad src image pointers</code></p></li>
<li><p>So i am getting this type of output from above code.</p></li>
<li><p><strong>Input Image:</strong></p></li>
</ul>

<p><a href=""https://i.stack.imgur.com/j4cpq.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/j4cpq.png"" alt=""InputImage""></a></p>

<ul>
<li><strong>output image:</strong></li>
</ul>

<p><a href=""https://i.stack.imgur.com/vO5Oz.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/vO5Oz.png"" alt=""outputImage""></a></p>
",2016-04-22 04:52:08,2016-04-22 04:52:08,How to convert cv::Mat to AVFrame in ffmpeg,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
41891,36643139,2016-04-15 09:19:41,,"<p>I have a code like this:</p>

<pre><code>import numpy as np
import cv2


cap = cv2.VideoCapture('C:/Users/Hilman/haatsu/drive_recorder/sample/3.mov')

# Define the codec and create VideoWriter object
fourcc = cv2.VideoWriter_fourcc(*'XVID')
out = cv2.VideoWriter('output.avi', fourcc, 20.0, (640,480))

while(cap.isOpened()):
    ret, frame = cap.read()
    if ret==True:
        frame = cv2.flip(frame,0)

        # write the flipped frame
        out.write(frame)

        cv2.imshow('frame',frame)
        if cv2.waitKey(1) &amp; 0xFF == ord('q'):
            break
    else:
        break

# Release everything if job is finished
cap.release()
out.release()
cv2.destroyAllWindows()
</code></pre>

<p>But the <code>output.avi</code> cannot be played. </p>

<p>Tried also change the <code>out = cv2.VideoWriter('output.avi', fourcc, 20.0, (640,480))</code> to something like this (as suggested by some people) <code>out = cv2.VideoWriter('output.avi', -1, 20.0, (640,480))</code>. But when I did this, I got this message </p>

<p><code>OpenCV: FFMPEG: tag 0xffffffff/'    ' is not found (format 'avi / AVI (Audio Video Interleaved)')'</code>.</p>

<p>What could be the problem? I am using Windows 10 by the way.</p>
",2016-04-19 12:03:32,2016-04-19 12:03:32,Python and OpenCV - Cannot write readable avi video files,<python><opencv><ffmpeg><windows-10><avi>,,,CC BY-SA 3.0,True,False,False,False,True
41974,36884604,2016-04-27 08:41:49,,"<p>I have to process frames from a distant camera using OpenCV.</p>

<p>I need to stream the processed frames to be accessible over network as a live video.</p>

<p>How to make the processed frames (cv::Mat objects) be passed to the RTSP streaming server in real time?</p>
",2016-04-28 13:11:34,2016-04-28 13:11:34,Building an RTSP streaming server from processed frames in OpenCV,<c++><opencv><ffmpeg><gstreamer><rtsp>,,,CC BY-SA 3.0,True,True,False,False,True
41978,36805695,2016-04-23 01:45:11,,"<p>I have problem in video processing in Android.</p>

<p>To merging multiple videos, I'm now using ffmpeg c++ library and JavaCV.</p>

<p>Here is my code:</p>

<pre><code>protected Void doInBackground(String... params) {
    String firstVideo = params[0];
    String secondVideo = params[1];
    String outPutVideo = params[2];

    try {
        FrameGrabber grabber1 = new FFmpegFrameGrabber(firstVideo);
        grabber1.start();
        FrameGrabber grabber2 = new FFmpegFrameGrabber(secondVideo);
        grabber2.start();
        FrameRecorder recorder2 = new FFmpegFrameRecorder(outPutVideo, grabber2.getImageWidth(),
                grabber2.getImageHeight(), grabber1.getAudioChannels());

        recorder2.setVideoCodec(grabber2.getVideoCodec());
        recorder2.setFrameRate(grabber2.getFrameRate());
        recorder2.setSampleFormat(grabber2.getSampleFormat());
        recorder2.setSampleRate(grabber2.getSampleRate());
        recorder2.setAudioChannels(2);
        recorder2.start();
        Frame frame;
        int j = 0;

        while ((frame = grabber1.grabFrame()) != null) {
            j++;
            recorder2.record(frame);
        }
        while ((frame = grabber2.grabFrame()) != null) {
            recorder2.record(frame);
        }
        recorder2.stop();
        grabber2.stop();
        grabber1.stop();
    } catch (Exception e) {
        e.printStackTrace();
        success = false;
    }
    return null;
} 
</code></pre>

<p>First video has no sound, and second video has audio tack.</p>

<p>Audio of second video starts from start of result video.</p>

<p>I tried and had search many hours, but cannot find solution. Please give me advise if you have experience!!!</p>
",,2016-04-23 01:45:11,Audio tracks while merging multiple videos using FFMPEG in Android?,<android><c++><video><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
42161,36778042,2016-04-21 18:47:44,,"<p>I just upgraded to <code>Ubuntu 16.04</code>, installed <code>anaconda3</code> and installed <code>opencv3</code> from <code>conda install -c https://conda.anaconda.org/menpo opencv3</code>. So I tried reading from an <code>avi</code> file, with <code>cap = cv2.VideoCapture('/path/to/avi')</code> but <code>cap.read()</code> returns with <code>(False,None)</code>. Capturing from the webcam works fine. Does anybody have an idea what could be causing the problem? I read it might have to do with <code>ffmpeg</code>, but I have it:</p>

<pre><code>$ ffmpeg -version
ffmpeg version N-79139-gde1a0d4 Copyright (c) 2000-2016 the FFmpeg developers
built with gcc 4.8 (Ubuntu 4.8.4-2ubuntu1~14.04.1)
configuration: --extra-libs=-ldl --prefix=/opt/ffmpeg --mandir=/usr/share/man --enable-avresample --disable-debug --enable-nonfree --enable-gpl --enable-version3 --enable-libopencore-amrnb --enable-libopencore-amrwb --disable-decoder=amrnb --disable-decoder=amrwb --enable-libpulse --enable-libfreetype --enable-gnutls --enable-libx264 --enable-libx265 --enable-libfdk-aac --enable-libvorbis --enable-libmp3lame --enable-libopus --enable-libvpx --enable-libspeex --enable-libass --enable-avisynth --enable-libsoxr --enable-libxvid --enable-libvidstab
libavutil      55. 19.100 / 55. 19.100
libavcodec     57. 30.100 / 57. 30.100
libavformat    57. 29.101 / 57. 29.101
libavdevice    57.  0.101 / 57.  0.101
libavfilter     6. 40.102 /  6. 40.102
libavresample   3.  0.  0 /  3.  0.  0
libswscale      4.  0.100 /  4.  0.100
libswresample   2.  0.101 /  2.  0.101
libpostproc    54.  0.100 / 54.  0.100
</code></pre>
",,2016-04-21 18:47:44,opencv VideoCapture doesn't read from avi,<python-3.x><opencv><anaconda>,,,CC BY-SA 3.0,True,False,False,False,True
42162,36779739,2016-04-21 20:24:43,,"<p>I am compiling OpenCV on a Raspberry 2
and I am jammed on this step,</p>

<pre><code>[ 18%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o
</code></pre>

<p>with returned a lot of error, I take only 2 of the begining, other of them look the same
but different on <code>{ CODEC_ID_H264, MKTAG('h', '2', '6', '4') },</code></p>

<pre><code>In file included from /home/pi/opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:60:0,
                 from /home/pi/opencv/modules/highgui/src/cap_ffmpeg.cpp:45:
/home/pi/opencv/modules/highgui/src/ffmpeg_codecs.hpp:104:7: error: 'CODEC_ID_H264' was not     declared in this scope
     { CODEC_ID_H264, MKTAG('H', '2', '6', '4') },
       ^
/home/pi/opencv/modules/highgui/src/ffmpeg_codecs.hpp:105:7: error: 'CODEC_ID_H264' was not     declared in this scope
     { CODEC_ID_H264, MKTAG('h', '2', '6', '4') },
       ^
</code></pre>

<p>and the final part is about</p>

<pre><code>/home/pi/opencv/modules/highgui/src/cap_ffmpeg_impl.hpp: In member function 'double     CvCapture_FFMPEG::get_fps()':
/home/pi/opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:821:49: error: 'AVStream' has no member named 'r_frame_rate'
     double fps = r2d(ic-&gt;streams[video_stream]-&gt;r_frame_rate);
                                             ^
In file included from /home/pi/opencv/modules/highgui/src/cap_ffmpeg.cpp:45:0:
/home/pi/opencv/modules/highgui/src/cap_ffmpeg_impl.hpp: In function 'int         icv_av_write_frame_FFMPEG(AVFormatContext*, AVStream*, uint8_t*, uint32_t, AVFrame*)':
/home/pi/opencv/modules/highgui/src/cap_ffmpeg_impl.hpp:1237:72: error: 'avcodec_encode_video'     was not declared in this scope
         out_size = avcodec_encode_video(c, outbuf, outbuf_size, picture);
                                                                    ^
modules/highgui/CMakeFiles/opencv_highgui.dir/build.make:215: recipe for target     'modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o' failed
make[2]: ** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o] Error 1
CMakeFiles/Makefile2:1823: recipe for target 'modules/highgui/CMakeFiles/opencv_highgui.dir/all'     failed
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
Makefile:137: recipe for target 'all' failed
</code></pre>

<p>Please help me for this while I get stucked on it for a long time after tried few times, thank you</p>
",2016-04-22 05:13:34,2016-04-22 05:29:15,Compiling OpenCV on Raspberry Pi 2,<c++><opencv><raspberry-pi><raspberry-pi2>,,,CC BY-SA 3.0,True,False,False,False,True
42180,36663122,2016-04-16 10:47:25,,"<p>I want to take picture with my Dynacolor IP camera using opencv  2.45 in Microsoft Visual Studio.</p>

<p>I've found its ip with iSpy. and here is my code.</p>

<pre><code>#include ""opencv2/highgui/highgui.hpp""
#include ""opencv2/core/core.hpp""
#include ""opencv2/opencv.hpp""

int main()
{
    cv::VideoCapture vcap;
    const std::string videoStreamAddress = ""http://Admin:1234@192.168.0.250:80/cgi-bin/jpg/image.cgi"";
    if (!vcap.open(videoStreamAddress))
    {
        printf(""Camera is null\n"");
        return -1;
    }
    else
    {
        cv::Mat image;
        vcap.read(image);
        cv::imshow(""image"",image);
    }
    cv::waitKey(100);
    return 0
}
</code></pre>

<p>This take me a warning: Could not find codec parameters &lt;.../.../modules/highgui/src/cap_ffmpeg_impl.hpp:540>, and also Camera is null.</p>

<p>I have read many threads about this issue but I couldn't fix this problems.</p>

<p>Any help would be appreciated.</p>
",2016-04-16 10:58:46,2016-04-16 11:45:57,connect to IP camera using opencv,<c++><opencv><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
42247,36824897,2016-04-24 15:08:28,,"<p>I'm using opencv with python to truncate input video based on when motion is detected. </p>

<p>Once the motion detection part of the code works the next step is to find the in/out edit points on which to make the cuts (I'm using ffmpeg).</p>

<p>The method that I've used works well for when there is only one period of motion:</p>

<pre><code>    If motion occurs:
       append list with time information
</code></pre>

<p>Then min(list) and max(list) are used to find the cut times.</p>

<p>However, this method falls down if there are two or more isolated periods of motion. Say if the list reads [2,3,4,34,35,36], the edit points would be:</p>

<pre><code>min(list) = 2
max(list) = 36
</code></pre>

<p>where I want a way of extracting the continuous timing information, so in this example: 2-4 and 34-36.</p>

<p>It's this logic that I'm stuck with!</p>

<p>I have tried appending a new list to a list of lists when there is no action but a new list is created on each iteration of the while loop (or each frame that registers as no motion) where I only want a new list on the transition from motion to no motion. </p>

<pre><code>    If motion occurs:
       append list with time information

    else:
      append list_of_list #but only once. not every iteration without motion
</code></pre>

<p>Another way of doing it might be to add 0 to the list when no motion occurs:</p>

<pre><code>    If motion occurs:
       append list with time information

    else:
      append list with 0
</code></pre>

<p>Using the previous example, this would instead give: </p>

<p>[0,0,2,3,4,0,0,0,0,0, ...,0,0,0,0,0,34,35,36,0,0,0,0,0,0...]</p>

<p>Is there a convenient way of extracting the sequences 2-4 and 34-36 out of a single list?</p>

<p>I hope that's clear. Any suggestions would be greatly appreciated.</p>

<p>Thanks</p>
",,2016-04-25 16:59:48,Append list only when change is detected in while true loop. Or extract sequences from list,<python><list><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
42342,36791800,2016-04-22 10:50:45,,"<ul>
<li>I am trying to create video using QTRLE format with RGB24 or ARGB pixel format in ffmpeg library.But video is not played.</li>
<li>But is i use H264 format with yuv format then it's working fine.</li>
<li><p>Is QTRLE is not supported by ffmpeg or i m doing any mistake?</p>

<pre><code>static void video_encode_example(const char *filename, int codec_id)
{
        AVCodec *codec;
        AVCodecContext *c = NULL;
        int i, ret, x, y, got_output;
        FILE *f;
        AVFrame *frame;
        AVPacket pkt;
        uint8_t endcode[] = { 0, 0, 1, 0xb7 };

        printf(""Encode video file %s\n"", filename);

        /* find the mpeg1 video encoder */

        codec = avcodec_find_encoder((AVCodecID) codec_id);
        //  codec = 28;
        if (!codec) {
            fprintf(stderr, ""Codec not found : %d\n"", codec_id);
            exit(1);
        }

        c = avcodec_alloc_context3(codec);

        if (!c) {
            fprintf(stderr, ""Could not allocate video codec context\n"");
            exit(1);
        }

        /* put sample parameters */
        c-&gt;bit_rate = 400000;
        /* resolution must be a multiple of two */
        c-&gt;width = 352;
        c-&gt;height = 288;
        /* frames per second */
        c-&gt;time_base = (AVRational ) { 1, 25 };
        /* emit one intra frame every ten frames
         * check frame pict_type before passing frame
         * to encoder, if frame-&gt;pict_type is AV_PICTURE_TYPE_I
         * then gop_size is ignored and the output of encoder
         * will always be I frame irrespective to gop_size
         */
        c-&gt;gop_size = 10;
        c-&gt;max_b_frames = 1;
        c-&gt;pix_fmt = AV_PIX_FMT_RGB24;

        if (codec_id == AV_CODEC_ID_H264)
            av_opt_set(c-&gt;priv_data, ""preset"", ""slow"", 0);

        /* open it */
        if (avcodec_open2(c, codec, NULL) &lt; 0) {
            fprintf(stderr, ""Could not open codec\n"");
            exit(1);
        }

        f = fopen(filename, ""wb"");
        if (!f) {
            fprintf(stderr, ""Could not open %s\n"", filename);
            exit(1);
        }

        frame = av_frame_alloc();
        if (!frame) {
            fprintf(stderr, ""Could not allocate video frame\n"");
            exit(1);
        }
        frame-&gt;format = c-&gt;pix_fmt;
        frame-&gt;width = c-&gt;width;
        frame-&gt;height = c-&gt;height;

        /* the image can be allocated by any means and av_image_alloc() is
         * just the most convenient way if av_malloc() is to be used */
        ret = av_image_alloc(frame-&gt;data, frame-&gt;linesize, c-&gt;width, c-&gt;height,
                c-&gt;pix_fmt, 32);
        if (ret &lt; 0) {
            fprintf(stderr, ""Could not allocate raw picture buffer\n"");
            exit(1);
        }
        ////////////////////////////////////
        cv::Mat input = imread(""image for creating video(image.png)"");
        Mat output;
        resize(input, input, Size(c-&gt;width, c-&gt;height));
        cvtColor(input, input, CV_BGR2RGB);

        av_image_fill_arrays(frame-&gt;data, frame-&gt;linesize, input.data,
                c-&gt;pix_fmt, c-&gt;width, c-&gt;height, 1);

        ////////////////////////////////////

        for (i = 0; i &lt; 250; i++) {
            av_init_packet(&amp;pkt);
            pkt.data = NULL;    // packet data will be allocated by the encoder
            pkt.size = 0;

            fflush(stdout);

            frame-&gt;pts = i;

            /* encode the image */
            ret = avcodec_encode_video2(c, &amp;pkt, frame, &amp;got_output);
            if (ret &lt; 0) {
                fprintf(stderr, ""Error encoding frame\n"");
                exit(1);
            }

            if (got_output) {
                printf(""Write frame %3d (size=%5d)\n"", i, pkt.size);
                fwrite(pkt.data, 1, pkt.size, f);
                av_packet_unref(&amp;pkt);
            }
        }

        /* get the delayed frames */
        for (got_output = 1; got_output; i++) {
            fflush(stdout);

            ret = avcodec_encode_video2(c, &amp;pkt, NULL, &amp;got_output);
            if (ret &lt; 0) {
                fprintf(stderr, ""Error encoding frame\n"");
                exit(1);
            }

            if (got_output) {
                printf(""Write frame %3d (size=%5d)\n"", i, pkt.size);
                fwrite(pkt.data, 1, pkt.size, f);
                av_packet_unref(&amp;pkt);
            }
        }

        /* add sequence end code to have a real mpeg file */
        fwrite(endcode, 1, sizeof(endcode), f);
        fclose(f);

        avcodec_close(c);
        av_free(c);
    //  av_freep(&amp;frame-&gt;data[0]);
        av_frame_free(&amp;frame);
        printf(""\n"");
}

int main() {
    av_register_all();
    video_encode_example(""test.mov"", AV_CODEC_ID_QTRLE);
}
</code></pre></li>
</ul>
",2016-04-22 13:59:01,2016-04-22 15:12:55,QTRLE is supported by ffmpeg?,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
42382,36794048,2016-04-22 12:37:15,,"<p>I have a program that has to edit several videos based off of data in a separate json-file. These videos are sequential and they have metadata in their own json file. The program edits them with a frame-by-frame overlay (eye-tracking data).</p>

<p>What I'd like to do is compare individual mp4 metadata with the json-file metadata so I can compare timestamps, making sure everything is synchronized. </p>

<p>If possible, how would I get to the mp4 metadata? </p>
",,2016-04-22 12:43:52,mp4 metadata extraction in Python,<python><json><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
42386,36795267,2016-04-22 13:30:59,,"<p>I have a Binary string of mp4 video file and want to convert it back to mp4 file, to get single frame out of there with <a href=""http://opencv-python-tutroals.readthedocs.org/en/latest/py_tutorials/py_gui/py_video_display/py_video_display.html"" rel=""nofollow"">openCV</a> library</p>

<pre><code>import cv2
import tempfile

temp_path = tempfile.gettempdir()
video_binary_string = 'AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAQC0ttZGF0AQIUGRQmM...'

with open(temp_path+'/video.mp4', 'wb') as wfile:
   wfile.write(video_binary_string)
cap = cv2.VideoCapture(temp_path+'/video.mp4')
success, frame = cap.read()

print success
&gt;&gt;&gt; False
</code></pre>

<p>If frame was read correctly, it would be <strong>True</strong></p>

<p>I understand that this is not the correct way of writing video file. I tried to do it with <a href=""http://zulko.github.io/blog/2013/09/27/read-and-write-video-frames-in-python-using-ffmpeg/"" rel=""nofollow"">FFMPEG</a> but I can't understand it's documentation.</p>

<p>Please give an example with simple explanations how to convert binary string back to video, with this or other way.</p>
",2019-06-29 14:27:12,2019-06-29 14:27:12,writing mp4 file from binary string python,<python><opencv><video><ffmpeg><binary>,,,CC BY-SA 4.0,True,False,False,False,True
42404,36911465,2016-04-28 10:09:11,,"<p>the problem is installation of opencv with brew has crashed with errors:</p>

<blockquote>
  <p>Command: brew install opencv3 --HEAD  --with-contrib --with-cuda --with-ffmpeg --with-tbb --with-qt5 </p>
</blockquote>

<p><a href=""https://i.stack.imgur.com/oYACM.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/oYACM.png"" alt=""enter image description here""></a></p>
",2016-05-12 20:35:46,2016-05-12 20:35:46,Error with install opencv 3 on OS X,<qt><homebrew><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
42499,37011450,2016-05-03 18:12:56,,"<p>We're trying to recompile ffmpeg project using javacpp and with the <code>--enable-libfdk-aac</code> enabled, the build works, but we can't use libfdk_aac to decode an audio_stream. </p>

<p>We are calling : <code>avcodec_find_decoder_by_name(""libfdk_aac"")</code> and getting the following result: </p>

<p><code>Exception: avcodec_find_decoder() error: Unsupported audio format or codec not found: 86018.</code></p>

<p>We've modified the ccpbuild.sh in the ffmpeg directory in the following way:</p>

<ol>
<li><p>Adding the instruction: <code>--enable-libfdk-aac</code>  in the ENABLE variable</p></li>
<li><p>Getting the dependency : <code>download https://github.com/mstorsjo/fdk-aac/tarball/master fdk-aac.tar.gz</code></p></li>
<li><p>Unpacking it: <code>tar -xzvf ../fdk-aac.tar.gz</code></p></li>
<li><p>Installing it:
<code>
cd ../mstorsjo-fdk-aac*
autoreconf -fiv
./configure --prefix=$INSTALL_PATH --disable-shared --with-pic
make -j $MAKEJ
make install
</code></p></li>
</ol>

<p>I'm running all this on a macosx platform. </p>

<p>The process seems to be ok, and I can compile the project properly with maven, but then it does not work when I'm calling the codec ""libfdk_aac"".
I was wondering if I'm doing something wrong, or is there any other place where I need to register this codec ? (especially since this is an external library)</p>

<p>Many Thanks</p>
",2016-05-04 09:49:33,2016-07-04 12:53:31,Javacpp: Can't manage to add libfdk_aac to ffmpeg presets,<java><maven><ffmpeg><javacv><javacpp>,,,CC BY-SA 3.0,False,False,False,False,True
42561,37135362,2016-05-10 10:07:43,,"<p>I am in need of a idea to apply filters to video like Instagram, video trimming and fetching images from the video. I have researched a lot and all I can come up with is the following ways to achieve what I want : </p>

<ol>
<li><a href=""http://androidwarzone.blogspot.in/2011/12/ffmpeg4android.html"" rel=""nofollow"">FFMPEG</a></li>
<li><a href=""http://docs.opencv.org/2.4/doc/tutorials/introduction/android_binary_package/O4A_SDK.html"" rel=""nofollow"">Open CV</a></li>
<li><a href=""https://www.youtube.com/watch?v=Xtp3tH27OFs"" rel=""nofollow"">Camera2 API</a></li>
</ol>

<p><strong>FFMPEG :</strong></p>

<p>As far as FFMPEG is considered, majority of the average level droid devs feel that its a pain cause it involves NDK and compiling the FFMPEG commands.The above mentioned link is self-explanatory and it saves me the pain of setting up the NDK but the biggest drawback in this is that its not stable and its REALLY slow. 
My query on this topic is that how do I compile FFMPEG into my project. I have gone through several links to integrate FFMPEG as follows :</p>

<p><a href=""http://jonhall.info/how_to/setup_and_use_ffmpeg_on_windows"" rel=""nofollow"">One</a></p>

<p><a href=""http://www.wikihow.com/Install-FFmpeg-on-Windows"" rel=""nofollow"">Two</a></p>

<p><a href=""http://www.roman10.net/2013/08/18/how-to-build-ffmpeg-with-ndk-r9/"" rel=""nofollow"">Three</a></p>

<p>The third link seemed to make sense but ultimately I couldn't understand completely and go where,do what after following those steps.</p>

<p><strong>Question 1 :</strong></p>

<p>Is there is a solid Android - FFMPEG Integration Document that can help a beginner like me ? </p>

<p><strong>Open CV</strong></p>

<p><strong>Question 2 :</strong></p>

<p>I haven't tried Open CV yet but will it be worth it ?</p>

<p><strong>Camera2 API</strong></p>

<p><strong>Question 3:</strong></p>

<p>As far as I researched, I can see that the Camera2 API can help us shoot videos and images with effects added to it but will it be useful for me to process the already existing videos and images ? I don't have the requirement to add effects to the camera while its captured, its aftermath is where I want to add my effects. </p>

<p>If someone is kind enough to accept my stupidity and help me out, I am thankful to them. </p>

<p>Will going ahead with FFMPEG be good or OpenCV or Camera2 API will be better ?</p>
",2016-05-10 10:15:52,2017-11-07 13:30:46,Android - Adding Effects to Videos like Instagram,<android><opencv><video><ffmpeg><android-ndk>,,,CC BY-SA 3.0,True,False,False,False,True
42691,37144225,2016-05-10 16:32:20,,"<p>I have the following ffmpeg-cli command which does not produce the described effect in documentation. Could this be a bug, or I have something wrong with the command. </p>

<pre><code>ffmpeg \
    -y \
    -i small.mp4 \
    -i monkey/monkey_%04d.png \
    -filter_complex ""[0:v][1:v]overlay=enable='between(t,1,5)'[out1]"" \
    -map '[out1]' \
    output.mp4
</code></pre>

<p>I expect it to overlay the #1 stream on top of #0 between seconds 1 and 5.</p>

<p>You may download the test tarball from this link:</p>

<ul>
<li><a href=""https://drive.google.com/file/d/0BxIQVP1zErDPYXRveG9hN0c0Qjg/view?usp=sharing"" rel=""nofollow"">https://drive.google.com/file/d/0BxIQVP1zErDPYXRveG9hN0c0Qjg/view?usp=sharing</a></li>
</ul>

<p>It includes assets for the test case.</p>

<p>The build I tried with:</p>

<ul>
<li>ffmpeg-3.0.2-64bit-static (available online)</li>
</ul>
",2016-05-10 16:49:19,2016-05-10 18:40:37,Overlaying alpha images on a video using ffmpeg,<image-processing><ffmpeg><overlay><libav>,,,CC BY-SA 3.0,False,False,False,False,True
42709,37104111,2016-05-08 19:46:20,,"<p>I am looking for a way to programmatically stream opencv frames to a flash player (using RTMP). I am running nginx at the backend. </p>

<p>So far, I am able to find a way to stream flv file sitting on disk to flash player (note again programmatically): <a href=""https://github.com/Akagi201/rtmp-push"" rel=""nofollow"">https://github.com/Akagi201/rtmp-push</a></p>

<p>I am also able to encode cv::Mat to AVFrame using libavcodec but I am not sure how can I encode push into RTMPPacket. Basically, I am not sure what should be the content of Data field of FLV tags. 
Refer:<a href=""https://www.adobe.com/content/dam/Adobe/en/devnet/flv/pdfs/video_file_format_spec_v10.pdf"" rel=""nofollow"">https://www.adobe.com/content/dam/Adobe/en/devnet/flv/pdfs/video_file_format_spec_v10.pdf</a></p>

<p>Does anyone know how bgr content of cv::Mat be converted to AVCVIDEOPACKET, explained on the above link? </p>
",,2016-05-08 19:46:20,Streaming opencv mat to flash player,<flash><opencv><nginx><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
42806,37030023,2016-05-04 13:59:39,,"<p>I am using opencv-2.4-10 in my use case.</p>

<p>I want to compile opencv with ffmpeg support for android platform. I have enable ffmpeg option from cmake but still i can't enable opencv with ffmpeg support.</p>

<p>Actually my application going to open avi file but it's give me error like ""Cannot open the video file""</p>

<p>Here is the my code:</p>

<pre><code>VideoCapture cap(""test.avi"");


if ( !cap.isOpened() )  // if not success, exit program
{
cout &lt;&lt; ""Cannot open the video file"" &lt;&lt; endl;
return -1;
}
</code></pre>
",,2016-11-04 16:50:51,Opencv compile with ffmpeg for android,<linux><opencv><ffmpeg><opencv4android>,,,CC BY-SA 3.0,True,False,False,False,True
42867,37074473,2016-05-06 14:06:00,,"<p>I am trying to write a processed mat to STDOUT so that I can pipe it into ffmpeg, but I can't understand what the difference is exactly between </p>

<p>imencode and imread.</p>

<p>According to the opencv documentation </p>

<pre><code>imencode : Encodes an image into a memory buffer.

imread : Loads an image from a file.
</code></pre>

<p>Isn't imread loading image data into a memory buffer as well? Can an opencv window be piped to another application?</p>

<p>Instead of using raspvid I would like to pipe ffmpeg my program's output, which would be the window that displays the processed window.</p>

<p><a href=""http://www.valmueller.net/stream-video-with-raspberry-pi-to-youtube/"" rel=""nofollow"">http://www.valmueller.net/stream-video-with-raspberry-pi-to-youtube/</a></p>
",,2016-05-06 14:25:53,Writing opencv mat to stdout,<c++><opencv><stdout>,,,CC BY-SA 3.0,True,True,False,False,True
42922,37120650,2016-05-09 16:16:35,,"<p>I am totally newbie in OpenCV, C++. Trying to read an <code>mp4</code> video but found OpenCV does not support <code>mp4</code>, it only reads <code>avi</code>(I am not sure whether I am write or wrong). After an online research came to know <code>ffmpeg</code> is the best option to convert <code>mp4</code> to <code>avi</code> for further processing. </p>

<p>I am using <strong>OpenCV 3.0</strong> with <strong>visual studio 2012</strong>. I saw there is a <code>dll</code> file, <code>opencv_ffmpeg300.dll</code> in OpenCV <code>C:\opencv\build\x86\vc11\bin</code> folder. Is there any way I can use this <code>dll</code> file to read and convert my video?</p>

<p>It will be really appreciating if someone can provide me some guidelines, I am lost in the OpenCV world totally. </p>

<p>For video,</p>

<pre><code>Video I/O:
   Video for Windows:           YES
   DC1394 1.x:                  NO
   DC1394 2.x:                  NO
   FFMPEG:                      YES (prebuilt binaries)
     codec:                     YES (ver 55.18.102)
     format:                    YES (ver 55.12.100)
     util:                      YES (ver 52.38.100)
     swscale:                   YES (ver 2.3.100)
     resample:                  NO
     gentoo-style:              YES
   OpenNI:                      NO
   OpenNI PrimeSensor Modules:  NO
   OpenNI2:                     NO
   PvAPI:                       NO
   GigEVisionSDK:               NO
   DirectShow:                  YES
   Media Foundation:            NO
   XIMEA:                       NO
   Intel PerC:                  NO
</code></pre>
",2016-05-09 17:24:18,2016-05-09 17:24:18,How to read .mp4 files in opencv,<c++><opencv><ffmpeg><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
42973,37121393,2016-05-09 16:56:36,,"<p>I am a newbie to <code>python</code>. I a trying to install <code>OpenCV 3.0</code> in <code>OSX</code> (el capitan). The python version is <code>2.7.10</code></p>

<p>I downloaded the source. When I try to build, I get get this message  </p>

<pre><code>ImportError: No module named numpy.distutils
-- Could NOT find PythonInterp: Found unsuitable version ""1.4"", but required is at least ""3.4"" (found /home/myusername/.pyenv/shims/python3)
-- Could NOT find PythonInterp: Found unsuitable version ""1.4"", but required is at least ""3.2"" (found /home/myusername/.pyenv/shims/python3)
</code></pre>

<p>Could someone help ? </p>

<p>EDIT : the output of the <code>cmake</code></p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local \
&gt; -D PYTHON2_PACKAGES_PATH=/Library/Python/2.7/site-packages \
&gt; -D PYTHON2_LIBRARY=/home/username/.pyenv/shims/python \
&gt; -D PYTHON2_INCLUDE_DIR=/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 \
&gt; -D INSTALL_C_EXAMPLES=ON -D INSTALL_PYTHON_EXAMPLES=ON \
&gt; -D BUILD_EXAMPLES=ON \
&gt; -D OPENCV_EXTRA_MODULES_PATH=/home/username/Desktop/Sites/echopen/py_opencv/opencv_contrib ..
-- The CXX compiler identification is AppleClang 7.3.0.7030031
-- The C compiler identification is AppleClang 7.3.0.7030031
-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++
-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Performing Test HAVE_CXX_FSIGNED_CHAR
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Success
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Success
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Failed
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Failed
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_CXX_WERROR_ADDRESS
-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success
-- Performing Test HAVE_C_WERROR_ADDRESS
-- Performing Test HAVE_C_WERROR_ADDRESS - Success
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_CXX_WFORMAT
-- Performing Test HAVE_CXX_WFORMAT - Success
-- Performing Test HAVE_C_WFORMAT
-- Performing Test HAVE_C_WFORMAT - Success
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WMISSING_DECLARATIONS
-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_C_WMISSING_PROTOTYPES
-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WUNDEF
-- Performing Test HAVE_CXX_WUNDEF - Success
-- Performing Test HAVE_C_WUNDEF
-- Performing Test HAVE_C_WUNDEF - Success
-- Performing Test HAVE_CXX_WINIT_SELF
-- Performing Test HAVE_CXX_WINIT_SELF - Success
-- Performing Test HAVE_C_WINIT_SELF
-- Performing Test HAVE_C_WINIT_SELF - Success
-- Performing Test HAVE_CXX_WPOINTER_ARITH
-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success
-- Performing Test HAVE_C_WPOINTER_ARITH
-- Performing Test HAVE_C_WPOINTER_ARITH - Success
-- Performing Test HAVE_CXX_WSHADOW
-- Performing Test HAVE_CXX_WSHADOW - Success
-- Performing Test HAVE_C_WSHADOW
-- Performing Test HAVE_C_WSHADOW - Success
-- Performing Test HAVE_CXX_WSIGN_PROMO
-- Performing Test HAVE_CXX_WSIGN_PROMO - Success
-- Performing Test HAVE_C_WSIGN_PROMO
-- Performing Test HAVE_C_WSIGN_PROMO - Success
-- Performing Test HAVE_CXX_WNO_NARROWING
-- Performing Test HAVE_CXX_WNO_NARROWING - Success
-- Performing Test HAVE_C_WNO_NARROWING
-- Performing Test HAVE_C_WNO_NARROWING - Success
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Success
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Success
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_CXX_WNO_LONG_LONG
-- Performing Test HAVE_CXX_WNO_LONG_LONG - Success
-- Performing Test HAVE_C_WNO_LONG_LONG
-- Performing Test HAVE_C_WNO_LONG_LONG - Success
-- Performing Test HAVE_CXX_QUNUSED_ARGUMENTS
-- Performing Test HAVE_CXX_QUNUSED_ARGUMENTS - Success
-- Performing Test HAVE_C_QUNUSED_ARGUMENTS
-- Performing Test HAVE_C_QUNUSED_ARGUMENTS - Success
-- Performing Test HAVE_CXX_WNO_SEMICOLON_BEFORE_METHOD_BODY
-- Performing Test HAVE_CXX_WNO_SEMICOLON_BEFORE_METHOD_BODY - Success
-- Performing Test HAVE_C_WNO_SEMICOLON_BEFORE_METHOD_BODY
-- Performing Test HAVE_C_WNO_SEMICOLON_BEFORE_METHOD_BODY - Success
-- Performing Test HAVE_CXX_FNO_OMIT_FRAME_POINTER
-- Performing Test HAVE_CXX_FNO_OMIT_FRAME_POINTER - Success
-- Performing Test HAVE_C_FNO_OMIT_FRAME_POINTER
-- Performing Test HAVE_C_FNO_OMIT_FRAME_POINTER - Success
-- Performing Test HAVE_CXX_MSSE
-- Performing Test HAVE_CXX_MSSE - Success
-- Performing Test HAVE_C_MSSE
-- Performing Test HAVE_C_MSSE - Success
-- Performing Test HAVE_CXX_MSSE2
-- Performing Test HAVE_CXX_MSSE2 - Success
-- Performing Test HAVE_C_MSSE2
-- Performing Test HAVE_C_MSSE2 - Success
-- Performing Test HAVE_CXX_MNO_AVX
-- Performing Test HAVE_CXX_MNO_AVX - Success
-- Performing Test HAVE_C_MNO_AVX
-- Performing Test HAVE_C_MNO_AVX - Success
-- Performing Test HAVE_CXX_MSSE3
-- Performing Test HAVE_CXX_MSSE3 - Success
-- Performing Test HAVE_C_MSSE3
-- Performing Test HAVE_C_MSSE3 - Success
-- Performing Test HAVE_CXX_MNO_SSSE3
-- Performing Test HAVE_CXX_MNO_SSSE3 - Success
-- Performing Test HAVE_C_MNO_SSSE3
-- Performing Test HAVE_C_MNO_SSSE3 - Success
-- Performing Test HAVE_CXX_MNO_SSE4_1
-- Performing Test HAVE_CXX_MNO_SSE4_1 - Success
-- Performing Test HAVE_C_MNO_SSE4_1
-- Performing Test HAVE_C_MNO_SSE4_1 - Success
-- Performing Test HAVE_CXX_MNO_SSE4_2
-- Performing Test HAVE_CXX_MNO_SSE4_2 - Success
-- Performing Test HAVE_C_MNO_SSE4_2
-- Performing Test HAVE_C_MNO_SSE4_2 - Success
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN - Success
-- Check if the system is big endian
-- Searching 16 bit integer
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of unsigned short
-- Check size of unsigned short - done
-- Using unsigned short
-- Check if the system is big endian - little endian
-- Looking for fseeko
-- Looking for fseeko - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Check size of off64_t
-- Check size of off64_t - failed
-- Performing Test HAVE_C_WNO_SHORTEN_64_TO_32
-- Performing Test HAVE_C_WNO_SHORTEN_64_TO_32 - Success
-- Performing Test HAVE_C_WNO_ATTRIBUTES
-- Performing Test HAVE_C_WNO_ATTRIBUTES - Success
-- Performing Test HAVE_C_WNO_STRICT_PROTOTYPES
-- Performing Test HAVE_C_WNO_STRICT_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES
-- Performing Test HAVE_C_WNO_MISSING_PROTOTYPES - Success
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_C_WNO_MISSING_DECLARATIONS - Success
-- Looking for assert.h
-- Looking for assert.h - found
-- Looking for fcntl.h
-- Looking for fcntl.h - found
-- Looking for io.h
-- Looking for io.h - not found
-- Looking for jbg_newlen
-- Looking for jbg_newlen - not found
-- Looking for mmap
-- Looking for mmap - found
-- Looking for search.h
-- Looking for search.h - found
-- Looking for string.h
-- Looking for string.h - found
-- Looking for unistd.h
-- Looking for unistd.h - found
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_VARIABLE - Failed
-- Performing Test HAVE_C_WNO_UNDEF
-- Performing Test HAVE_C_WNO_UNDEF - Success
-- Performing Test HAVE_C_WNO_UNUSED
-- Performing Test HAVE_C_WNO_UNUSED - Success
-- Performing Test HAVE_C_WNO_SIGN_COMPARE
-- Performing Test HAVE_C_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_C_WNO_CAST_ALIGN
-- Performing Test HAVE_C_WNO_CAST_ALIGN - Success
-- Performing Test HAVE_C_WNO_SHADOW
-- Performing Test HAVE_C_WNO_SHADOW - Success
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED
-- Performing Test HAVE_C_WNO_MAYBE_UNINITIALIZED - Failed
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST
-- Performing Test HAVE_C_WNO_POINTER_TO_INT_CAST - Success
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST
-- Performing Test HAVE_C_WNO_INT_TO_POINTER_CAST - Success
-- Performing Test HAVE_C_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_C_WNO_UNUSED_PARAMETER - Success
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER
-- Performing Test HAVE_CXX_WNO_UNUSED_PARAMETER - Success
-- Performing Test HAVE_C_WNO_UNUSED_VARIABLE
-- Performing Test HAVE_C_WNO_UNUSED_VARIABLE - Success
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION
-- Performing Test HAVE_C_WNO_IMPLICIT_FUNCTION_DECLARATION - Success
-- Performing Test HAVE_C_WNO_UNINITIALIZED
-- Performing Test HAVE_C_WNO_UNINITIALIZED - Success
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER
-- Performing Test HAVE_C_WNO_UNUSED_BUT_SET_PARAMETER - Failed
-- Performing Test HAVE_C_WNO_STRICT_OVERFLOW
-- Performing Test HAVE_C_WNO_STRICT_OVERFLOW - Success
-- Looking for semaphore.h
-- Looking for semaphore.h - found
-- Performing Test HAVE_CXX_WNO_SHADOW
-- Performing Test HAVE_CXX_WNO_SHADOW - Success
-- Performing Test HAVE_CXX_WNO_UNUSED
-- Performing Test HAVE_CXX_WNO_UNUSED - Success
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED - Success
-- Performing Test HAVE_CXX_WNO_SWITCH
-- Performing Test HAVE_CXX_WNO_SWITCH - Success
-- Performing Test HAVE_CXX_WNO_PARENTHESES
-- Performing Test HAVE_CXX_WNO_PARENTHESES - Success
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS - Success
-- Performing Test HAVE_CXX_WNO_EXTRA
-- Performing Test HAVE_CXX_WNO_EXTRA - Success
-- checking for module 'gstreamer-base-1.0'
--   package 'gstreamer-base-1.0' not found
-- checking for module 'gstreamer-video-1.0'
--   package 'gstreamer-video-1.0' not found
-- checking for module 'gstreamer-app-1.0'
--   package 'gstreamer-app-1.0' not found
-- checking for module 'gstreamer-riff-1.0'
--   package 'gstreamer-riff-1.0' not found
-- checking for module 'gstreamer-pbutils-1.0'
--   package 'gstreamer-pbutils-1.0' not found
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'gstreamer-video-0.10'
--   package 'gstreamer-video-0.10' not found
-- checking for module 'gstreamer-app-0.10'
--   package 'gstreamer-app-0.10' not found
-- checking for module 'gstreamer-riff-0.10'
--   package 'gstreamer-riff-0.10' not found
-- checking for module 'gstreamer-pbutils-0.10'
--   package 'gstreamer-pbutils-0.10' not found
-- checking for module 'libdc1394-2'
--   package 'libdc1394-2' not found
-- checking for module 'libdc1394'
--   package 'libdc1394' not found
-- checking for module 'libv4l1'
--   package 'libv4l1' not found
-- checking for module 'libv4l2'
--   package 'libv4l2' not found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - not found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- checking for module 'libavcodec'
--   package 'libavcodec' not found
-- checking for module 'libavformat'
--   package 'libavformat' not found
-- checking for module 'libavutil'
--   package 'libavutil' not found
-- checking for module 'libswscale'
--   package 'libswscale' not found
-- checking for module 'libavresample'
--   package 'libavresample' not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- checking for module 'libgphoto2'
--   package 'libgphoto2' not found
-- ICV: Removing previous unpacked package: /home/username/Desktop/Sites/echopen/py_opencv/opencv/3rdparty/ippicv/unpack
-- ICV: Unpacking ippicv_macosx_20141027.tgz to /home/username/Desktop/Sites/echopen/py_opencv/opencv/3rdparty/ippicv/unpack...
-- ICV: Package successfully downloaded
-- found IPP (ICV version): 8.2.1 [8.2.1]
-- at: /home/username/Desktop/Sites/echopen/py_opencv/opencv/3rdparty/ippicv/unpack/ippicv_osx
-- Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) 
-- To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR=&lt;filepath&gt; option to cmake
-- Found PythonInterp: /home/username/.pyenv/shims/python2.7 (found suitable version ""2.7.10"", minimum required is ""2.7"") 
-- Found PythonLibs: /home/username/.pyenv/shims/python (found suitable exact version ""2.7.10"") 
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named numpy.distutils
-- Could NOT find PythonInterp: Found unsuitable version ""1.4"", but required is at least ""3.4"" (found /home/username/.pyenv/shims/python3)
-- Could NOT find PythonInterp: Found unsuitable version ""1.4"", but required is at least ""3.2"" (found /home/username/.pyenv/shims/python3)
-- Found JNI: /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/jre/lib/libjawt.dylib  
-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT MATLAB_ARCH MATLAB_BIN) 
-- VTK is not found. Please set -DVTK_DIR in CMake to VTK build directory, or to VTK install subdirectory with VTKConfig.cmake file
-- Assume that non-module dependency is available: -framework OpenCL (for module opencv_core)
-- Performing Test HAVE_OBJCXX_FOBJC_EXCEPTIONS
-- Performing Test HAVE_OBJCXX_FOBJC_EXCEPTIONS - Success
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
--   videoio: Removing WinRT API headers by default
-- 
-- General configuration for OpenCV 3.0.0 =====================================
--   Version control:               3.0.0
-- 
--   Platform:
--     Host:                        Darwin 15.3.0 x86_64
--     CMake:                       3.2.3
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /opt/local/bin/gmake
--     Configuration:               RELEASE
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++  (ver 7.3.0.7030031)
--     C++ flags (Release):         -fsigned-char -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):
--     Linker flags (Debug):
--     Precompiled headers:         NO
--     Extra dependencies:          -framework OpenCL -framework Cocoa -framework QTKit -framework QuartzCore -framework AppKit
--     3rdparty dependencies:       libjpeg libwebp libpng libtiff libjasper IlmImf zlib ippicv
-- 
--   OpenCV modules:
--     To be built:                 hal core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python2 python3 viz
-- 
--   GUI: 
--     QT:                          NO
--     Cocoa:                       YES
--     OpenGL support:              NO
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        build (ver 1.2.8)
--     JPEG:                        build (ver 90)
--     WEBP:                        build (ver 0.3.1)
--     PNG:                         build (ver 1.5.12)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--     GDAL:                        NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       resample:                  NO
--       gentoo-style:              NO
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     QuickTime:                   NO
--     QTKit:                       YES
--     V4L/V4L2:                    NO/NO
--     XIMEA:                       NO
--     gPhoto2:                     NO
-- 
--   Other third-party libraries:
--     Use IPP:                     8.2.1 [8.2.1]
--          at:                     /home/username/Desktop/Sites/echopen/py_opencv/opencv/3rdparty/ippicv/unpack/ippicv_osx
--     Use IPP Async:               NO
--     Use Eigen:                   YES (ver 3.2.7)
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      YES
--     Use Concurrency              NO
--     Use C=:                      NO
--     Use pthreads for parallel for:
--                                  NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     static
--     libraries:                   -framework OpenCL
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 
--   Python 2:
--     Interpreter:                 /home/username/.pyenv/shims/python2.7 (ver 2.7.10)
-- 
--   Python 3:
--     Interpreter:                 NO
-- 
--   Python (for build):            /home/username/.pyenv/shims/python2.7
-- 
--   Java:
--     ant:                         NO
--     JNI:                         /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/include /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/include/darwin /Library/Java/JavaVirtualMachines/jdk1.7.0_79.jdk/Contents/Home/include
--     Java wrappers:               NO
--     Java tests:                  NO
-- 
--   Matlab:
--     mex:                         NO
-- 
--   Documentation:
--     Doxygen:                     NO
--     PlantUML:                    NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/username/Desktop/Sites/echopen/py_opencv/opencv/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/username/Desktop/Sites/echopen/py_opencv/opencv/build
</code></pre>
",2016-05-09 18:50:38,2016-05-09 19:49:57,unfound package after python package installation on OSX,<python><macos><opencv><numpy>,,,CC BY-SA 3.0,True,True,False,False,True
43156,37254687,2016-05-16 13:07:46,,"<p>I'm working with javacv and when I try run my app with Android 6, it crashes.
The app only crash with android 6. I tested with android N, android 5 and android 4.4
the app crash when do a instance of <code>FFmpegFrameRecorder</code> class.
This is the code of my class:</p>

<pre><code>public class MainActivity extends Activity{

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    new FFmpegFrameRecorder("""", 320, 240, 1);
  }
}
</code></pre>

<p>this is my log error:</p>

<pre><code>                                          --------- beginning of crash
05-16 14:46:15.845 6144-6144/com.example.pedro.ffmpeg30 A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0 in tid 6144 (.pedro.ffmpeg30)
05-16 14:46:15.902 371-371/? A/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
05-16 14:46:15.905 371-371/? A/DEBUG: Build fingerprint: 'google/shamu/shamu:6.0.1/MMB29K/2419427:user/release-keys'
05-16 14:46:15.910 371-371/? A/DEBUG: Revision: '0'
05-16 14:46:15.910 371-371/? A/DEBUG: ABI: 'arm'
05-16 14:46:15.915 371-371/? A/DEBUG: pid: 6144, tid: 6144, name: .pedro.ffmpeg30  &gt;&gt;&gt; com.example.pedro.ffmpeg30 &lt;&lt;&lt;
05-16 14:46:15.915 371-371/? A/DEBUG: signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0
05-16 14:46:15.912 371-371/? W/debuggerd: type=1400 audit(0.0:525): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.912 371-371/? W/debuggerd: type=1400 audit(0.0:526): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.912 371-371/? W/debuggerd: type=1400 audit(0.0:527): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.912 371-371/? W/debuggerd: type=1400 audit(0.0:528): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:529): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:530): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:531): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:532): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:533): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:534): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:535): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.922 371-371/? W/debuggerd: type=1400 audit(0.0:536): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.940 371-371/? A/DEBUG:     r0 00000000  r1 00000002  r2 b6811031  r3 a0f5de7c
05-16 14:46:15.940 371-371/? A/DEBUG:     r4 a0f59594  r5 b67c1a61  r6 b362f1a4  r7 00000001
05-16 14:46:15.940 371-371/? A/DEBUG:     r8 b6f4c6ec  r9 0000000b  sl b362f1a4  fp b6f452fc
05-16 14:46:15.941 371-371/? A/DEBUG:     ip fffffe8c  sp bea86820  lr a0efcec1  pc a0efe58a  cpsr 000d0030
05-16 14:46:15.932 371-371/? W/debuggerd: type=1400 audit(0.0:537): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.964 371-371/? A/DEBUG: backtrace:
05-16 14:46:15.965 371-371/? A/DEBUG:     #00 pc 0001a58a  /data/data/com.example.pedro.ffmpeg30/cache/javacpp23106072121027/libc.so
05-16 14:46:15.965 371-371/? A/DEBUG:     #01 pc 00016695  /data/data/com.example.pedro.ffmpeg30/cache/javacpp23106072121027/libc.so
05-16 14:46:15.965 371-371/? A/DEBUG:     #02 pc 00002465  /system/bin/linker (__dl__ZN6soinfo13call_functionEPKcPFvvE+48)
05-16 14:46:15.965 371-371/? A/DEBUG:     #03 pc 0000252f  /system/bin/linker (__dl__ZN6soinfo10call_arrayEPKcPPFvvEjb+134)
05-16 14:46:15.965 371-371/? A/DEBUG:     #04 pc 000026f5  /system/bin/linker (__dl__ZN6soinfo17call_constructorsEv+160)
05-16 14:46:15.965 371-371/? A/DEBUG:     #05 pc 00006115  /system/bin/linker (__dl__Z9do_dlopenPKciPK17android_dlextinfo+224)
05-16 14:46:15.966 371-371/? A/DEBUG:     #06 pc 00001c95  /system/bin/linker (__dl_dlopen+20)
05-16 14:46:15.966 371-371/? A/DEBUG:     #07 pc 0025b13b  /system/lib/libart.so (art::JavaVMExt::LoadNativeLibrary(_JNIEnv*, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, _jobject*, std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt;*)+650)
05-16 14:46:15.966 371-371/? A/DEBUG:     #08 pc 002d13d7  /system/lib/libart.so (art::Runtime_nativeLoad(_JNIEnv*, _jclass*, _jstring*, _jobject*, _jstring*)+194)
05-16 14:46:15.962 371-371/? W/debuggerd: type=1400 audit(0.0:538): avc: denied { search } for name=""com.example.pedro.ffmpeg30"" dev=""dm-1"" ino=742565 scontext=u:r:debuggerd:s0 tcontext=u:object_r:app_data_file:s0:c512,c768 tclass=dir permissive=0
05-16 14:46:15.966 371-371/? A/DEBUG:     #09 pc 738b0105  /data/dalvik-cache/arm/system@framework@boot.oat (offset 0x1ec9000)
05-16 14:46:16.339 863-6279/? W/ActivityManager:   Force finishing activity com.example.pedro.ffmpeg30/.MainActivity
05-16 14:46:16.339 371-371/? A/DEBUG: Tombstone written to: /data/tombstones/tombstone_07
05-16 14:46:16.339 371-371/? E/DEBUG: AM write failed: Broken pipe
</code></pre>

<p>I'm using the last version downloaded here:
<a href=""http://search.maven.org/#search|ga|1|bytedeco"" rel=""nofollow"">http://search.maven.org/#search|ga|1|bytedeco</a></p>

<p>my gradle dependencies:</p>

<pre><code>dependencies {
  compile fileTree(dir: 'libs', include: ['*.jar'])
  testCompile 'junit:junit:4.12'
  compile 'com.android.support:appcompat-v7:23.3.0'

  compile files('libs/javacv-1.2.jar')
  compile files('libs/javacpp-1.2.jar')
  compile files('libs/ffmpeg-3.0.2-1.2.jar')
  compile files('libs/ffmpeg-3.0.2-1.2-android-arm.jar')
}
</code></pre>
",2016-05-16 13:46:39,2016-05-16 13:46:39,"A/libc: Fatal signal 11 (SIGSEGV), code 1, fault addr 0x0",<android><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
43201,37349484,2016-05-20 14:34:10,,"<p>Im trying compile OpenCV 3.1.0 on a EC2 instance with ubuntu 14.04. </p>

<p>But I log this error:</p>

<pre><code>Scanning dependencies of target opencv_python2
[100%] Building CXX object    modules/python2/CMakeFiles/opencv_python2.dir/__/src2/cv2.cpp.o
/home/ubuntu/opencv/modules/python/src2/cv2.cpp:6:20: fatal error: Python.h: No such file or directory
#include &lt;Python.h&gt;
                ^
compilation terminated.
make[2]: *** [modules/python2/CMakeFiles/opencv_python2.dir/__/src2/cv2.cpp.o] Error 1
make[1]: *** [modules/python2/CMakeFiles/opencv_python2.dir/all] Error 2
make: *** [all] Error 2
</code></pre>

<p>I've compile OpenCV via SSH and nohup:</p>

<pre><code>nohup sudo make &gt; file.log &amp;
</code></pre>

<p>I've generated the make file for OpenCV in this way:</p>

<pre><code>cmake -D BUILD_opencv_gpu=OFF -D WITH_CUDA=OFF -D WITH_1394=OFF -D 
BUILD_opencv_gpu=OFF -D WITH_CUDA=OFF -D WITH_1394=OFF -D 
BUILD_opencv_video=OFF -D BUILD_opencv_calib3d=OFF -D 
BUILD_opencv_flann=OFF -D BUILD_opencv_photo=OFF -D 
BUILD_opencv_stitching=OFF -D BUILD_opencv_cudaarithm=OFF -D 
BUILD_opencv_cudabgsegm=OFF -D BUILD_opencv_cudacodec=OFF -D 
BUILD_opencv_cudafeatures2d=OFF -D BUILD_opencv_cudafilters=OFF -D 
BUILD_opencv_cudaimgproc=OFF -D BUILD_opencv_cudalegacy=OFF -D       
BUILD_opencv_cudaobjdetect=OFF -D BUILD_opencv_cudaoptflow=OFF -D
BUILD_opencv_cudastereo=OFF -D BUILD_opencv_cudawarping=OFF -D 
BUILD_opencv_cudev=OFF -D BUILD_opencv_superres=OFF -D 
BUILD_opencv_videostab=OFF -D BUILD_opencv_viz=OFF -D 
BUILD_opencv_aruco=OFF -D BUILD_opencv_bioinspired=OFF -D 
BUILD_opencv_dnn=OFF -D BUILD_opencv_dpm=OFF -D BUILD_opencv_face=OFF -D 
BUILD_opencv_fuzzy=OFF -D BUILD_opencv_saliency=OFF -D BUILD_opencv_sfm=OFF -D 
BUILD_opencv_stereo=OFF -D BUILD_opencv_structured_light=OFF -D 
BUILD_opencv_tracking=OFF -D BUILD_opencv_ximgproc=OFF -D 
BUILD_opencv_xobjdetect=OFF -D BUILD_opencv_xphoto=OFF -D 
BUILD_EXAMPLES=OFF -D WITH_OPENCL=OFF -D WITH_FFMPEG=OFF -D WITH_QT=OFF -D 
CMAKE_BUILD_TYPE=RELEASE -D INSTALL_C_EXAMPLES=OFF -D 
INSTALL_PYTHON_EXAMPLES=OFF  -D 
OPENCV_EXTRA_MODULES_PATH=/home/ubuntu/opencv_contrib/modules/ -D 
PYTHON2_INCLUDE_DIR=/usr/include/python2.7 -D 
PYTHON2_LIBRARY=/usr/lib/x86_64-linux-gnu/libpython2.7.so -D 
PYTHON2_NUMPY_INCLUDE_DIRS=/usr/lib/python2.7/dist-packages/numpy/core/include/ ../
</code></pre>

<p>I have already installed <strong>python-dev</strong>. Any Suggestions?</p>
",2016-05-20 19:28:15,2016-07-30 20:35:09,Compile OpenCV - Python.h - Can't find Python.h,<python><opencv><cmake><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
43204,37353250,2016-05-20 18:11:35,,"<p>I am new to FFMPEG and OpenCV. I hope to overlay a heatmap video on top of a video. There could be two solutions:
(1) Make a customized FFMPEG filter. When looping over each frame, calculate the heatmap for that frame and overlay it with the video frame. Here, I need some matrix operations to calculate the heatmap. May I use OpenCV for these operations inside the FFMPEG filter?
(2) Generate the heatmap, using OpenCV, as a video and then use FFMPEG to overly the heatmap video on top of the original video.</p>

<p>Looks like the first one fits the FFMPEG workflow, but I am still not sure which solution is better, or if there are better solutions. Especially, I am not sure if I can use OpenCV inside FFMPEG.</p>

<p>Thanks.</p>
",,2017-10-25 15:01:46,May I use OpenCV in a customized FFMPEG filter?,<opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
43266,37558187,2016-06-01 01:46:43,,"<p>This has been driving me nuts. I have been working on this non stop for a week. I have looked at many tutorials online they did not help.</p>

<p>I have tried so much I don't even remember what I tried. I can say the last thing I tried though.. which is this video <a href=""https://www.youtube.com/watch?v=U49CVY8yOxw"" rel=""nofollow"">https://www.youtube.com/watch?v=U49CVY8yOxw</a>.</p>

<p>So I download opencv2.4.13, create the build folder, open cmake, configure, generate and then go to terminal and type in make.</p>

<p>I get this:</p>

<pre><code>Richie's Macbook Air:build Richie$ make
[  2%] Built target zlib
[  6%] Built target libtiff
[ 10%] Built target libjpeg
[ 14%] Built target libjasper
[ 16%] Built target libpng
[ 23%] Built target IlmImf
[ 26%] Built target opencv_core
[ 31%] Built target opencv_imgproc
[ 32%] Built target opencv_video
[ 32%] Built target opencv_flann
[ 32%] Building CXX object modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o
In file included from /Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg.cpp:45:
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:71:6: error: 
      ""libswscale is necessary to build the newer OpenCV ffmpeg wrapper""
    #error ""libswscale is necessary to build the newer OpenCV ffmpeg wrapper""
     ^
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:481:9: error: 
      use of undeclared identifier 'sws_freeContext'
        sws_freeContext(img_convert_ctx);
        ^
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:965:17: error: 
      use of undeclared identifier 'SWS_BICUBIC'
                SWS_BICUBIC,
                ^
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:998:5: error: 
      use of undeclared identifier 'sws_scale'
    sws_scale(
    ^
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:1639:46: error: 
      use of undeclared identifier 'SWS_BICUBIC'
                                             SWS_BICUBIC,
                                             ^
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:1645:14: error: 
      use of undeclared identifier 'sws_scale'
        if ( sws_scale(img_convert_ctx, input_picture-&gt;data,
             ^
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:1693:9: error: 
      use of undeclared identifier 'sws_freeContext'
        sws_freeContext(img_convert_ctx);
        ^
/Users/Richie/Downloads/opencv-2.4.13/modules/highgui/src/cap_ffmpeg_impl.hpp:2290:9: warning: 
      ignoring return value of function declared with warn_unused_result
      attribute [-Wunused-result]
        avformat_write_header(oc_, NULL);
        ^~~~~~~~~~~~~~~~~~~~~ ~~~~~~~~~
1 warning and 7 errors generated.
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/cap_ffmpeg.cpp.o] Error 1
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2
make: *** [all] Error 2
Richie's Macbook Air:build Richie$ 
</code></pre>

<p>From what I can see, it says</p>

<pre><code>""libswscale is necessary to build the newer OpenCV ffmpeg wrapper""
</code></pre>

<p>I have tried googling though to no avail, does anyone know?</p>

<p>EDIT: I do have ffmpeg installed... (brew).</p>
",,2016-06-01 01:46:43,I can't seem to install opencv2.4.13 for Python3.4 on Mac El Capitan,<python><opencv><ffmpeg><installation>,,,CC BY-SA 3.0,True,False,False,False,True
43398,37337660,2016-05-20 03:53:00,,"<p>I m trying to send the processed opencv Mat as video to ffmpeg. I m encoding the frame and writing it to std output and then piping it to ffmpeg. Here is my code.</p>

<p><strong>C++:</strong></p>

<pre><code>if(!cap.isOpened()) {
    cout &lt;&lt; ""Video not accessible"" &lt;&lt; endl;
    return -1;
} else {
    cout &lt;&lt; ""Video is accessible"" &lt;&lt; endl;
}

while (true) {

    cap &gt;&gt; frame;

    //some processing

    cv::imencode("".jpg"", frame, buff);
    for (i = buff.begin(); i != buff.end(); ++i)
        std::cout &lt;&lt; *i ;
}
</code></pre>

<p>My input video resolution is 640x418. I do not alter the video size</p>

<p>After building, I use following command to execute.</p>

<p><code>./a.out | ffmpeg -f rawvideo -pix_fmt bgr24 -s 640x418 -r 30 -i - -an -f mpegts udp://0.0.0.0:8182</code></p>

<p>and also this</p>

<p><code>./a.out | ffmpeg -i pipe:0 -f rawvideo -pix_fmt bgr24 -s 640x418 -r 30 -i - -an -f mpegts udp://0.0.0.0:8182</code></p>

<p>However none of this seems to work.</p>

<p>Kindly help.</p>
",2016-05-20 03:58:52,2018-01-15 16:35:01,How to send opencv video's to ffmpeg,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
43405,37370096,2016-05-22 02:59:49,,"<p>I'm using <strong>Ubuntu-14.04</strong> and I have installed <strong>OpenCV-3.1.0</strong> according to the commands given in <a href=""https://udallascs.wordpress.com/2014/03/30/adding-opencv-and-configuring-to-work-with-eclipse-and-java/"" rel=""nofollow"">this link</a>. I was able to build the <strong>jar properly</strong>. I'm using it in a NetBeans project.</p>

<p>I want to add the location of java <strong>x64 folder</strong> in to the <strong>VM options of the IDE</strong>. But It seems like I haven't built that folder to add the path and I'm getting the exception as ""Exception in thread ""main"" java.lang.UnsatisfiedLinkError: no opencv_java310 in java.library.path""</p>

<p>I had already installed ""Apache Ant"" and these required packages before installing OpenCV.</p>

<pre><code>    GCC 4.4.x or later
    CMake 2.6 or higher
    Git
    GTK+2.x or higher, including headers (libgtk2.0-dev)
    pkg-config
    Python 2.6 or later and Numpy 1.5 or later with developer packages (python-dev, python-numpy)
    ffmpeg or libav development packages: libavcodec-dev, libavformat-dev, libswscale-dev
    libtbb2 libtbb-dev
    libdc1394 2.x
    libjpeg-dev, libpng-dev, libtiff-dev, libjasper-dev, libdc1394-22-dev
</code></pre>

<p>But I couldn't build that native library folder. Please mention how should I proceed. Your help is highly appreciated.</p>
",,2016-05-22 02:59:49,"How to make OpenCV-3.1.0 Java ""x64"" native library folder in Ubuntu?",<java><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
43419,37569630,2016-06-01 13:08:10,,"<p>I want to use both <code>javacv</code> and <code>gpuimage</code>in my android application. Everything works fine if i only include <code>javacv</code> in my app. When i include <code>gpuimage</code> in my app, it crashes and shows this message.</p>

<pre><code>java.lang.UnsatisfiedLinkError: org.bytedeco.javacpp.avutil
    at java.lang.Class.classForName(Native Method)
    at java.lang.Class.forName(Class.java:308)
    at org.bytedeco.javacpp.Loader.load(Loader.java:413)
    at org.bytedeco.javacpp.Loader.load(Loader.java:381)
    at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1650)
    at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
    at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:126)
    at com.example.app.ShareActivity.initRecorder(ShareActivity.java:351)
    at com.example.app.ShareActivity.access$1000(ShareActivity.java:49)
    at com.example.app.ShareActivity$8.run(ShareActivity.java:398)
    at java.lang.Thread.run(Thread.java:818)
</code></pre>

<p>This my <code>build.gradle</code></p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion ""23.0.2""

    defaultConfig {
        applicationId ""com.example.app""
        minSdkVersion 15
        targetSdkVersion 22
        versionCode 1
        versionName ""1.0""

    }

    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    testCompile 'junit:junit:4.12'
    compile 'com.android.support:appcompat-v7:23.4.0'
    compile 'com.android.support:support-v4:23.4.0'
    compile 'jp.co.cyberagent.android.gpuimage:gpuimage-library:1.4.1'
    compile 'com.android.support:design:23.4.0'
    compile 'org.bytedeco:javacv:1.1'
    compile 'com.google.android.gms:play-services-ads:8.4.0'
    compile 'com.googlecode.mp4parser:isoparser:1.1.18'
}
</code></pre>

<p>i extracted <code>ffmpeg-android-arm.jar</code> and kept all <code>*.so</code> files inside <code>app\src\jniLibs\armeabi</code>. App works properly without <code>gpuimage</code>.</p>
",2016-06-01 13:11:24,2017-06-09 01:37:08,"java.lang.UnsatisfiedLinkError: org.bytedeco.javacpp.avutil while using ""gpuImage"" with ""javacv"" in android",<java><android><javacv><android-gpuimageview><android-ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
43528,37641459,2016-06-05 11:42:39,,"<p>I have amended a script from <a href=""https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/2.4/opencv2_4_10.sh"" rel=""nofollow"">https://github.com/jayrambhia/Install-OpenCV/blob/master/Ubuntu/2.4/opencv2_4_10.sh</a> to try to install OpenCV 2.4.13  onto a vm running Ubuntu 14.04 where I have sudo permission. I'm new to openCV, cmake &amp; make so any help getting this script to work would be appreciated as I have to install it on 20 vm's.</p>

<p>After a few minutes of running the script returns with an error saying can't </p>

<p><code>/bin/sh: 1: cd: can't cd to /home/myaccount/setups/OpenCV/opencv-2.4.13/build</code></p>

<p>and</p>

<pre><code>make[2]: *** [3rdparty/libtiff/CMakeFiles/libtiff.dir/depend] Error 2
make[1]: *** [3rdparty/libtiff/CMakeFiles/libtiff.dir/all] Error 2
</code></pre>

<p>The last few lines of the output is included below and the script is before that.</p>

<p><strong>Any ideas why the script wont complete successfully or how to correct the permissions issue?</strong></p>

<p><strong>Extra Details</strong></p>

<p>I'm not sure if these are relevant but as I dig into the problem I'll update this section</p>

<ul>
<li>cmake version 2.8</li>
<li>Makerfile mentions # The shell in which to execute make rules. SHELL
= /bin/sh but my terminal reports echo $0 as bash</li>
<li>when I run <code>make install V=1</code> it builds 100% but then reports
<em>-- Install configuration: ""RELEASE"" CMake Error at cmake_install.cmake:36 (FILE): file cannot create directory: /usr/local/include/opencv2.  Maybe need administrative privileges</em></li>
<li>But when I run <code>sudo make install V=1</code> I get can't cd error above</li>
<li>Adding Shebang <code>#!/bin/bash</code> to the start of my script didn't solve it</li>
<li>Running the script on a fresh ubuntu local machine alows the script to run but I need to get it running on the hosted vm </li>
<li><code>umask</code> of setups folder (where script runs and creates a directory is <code>0022</code> . Permissions for setups folder is <code>755</code>, group = <code>Domain Users</code>, Owner = <code>myaccount</code> Thats where the source files folder gets created as well as the build folder which is also <code>755</code> after it is created </li>
</ul>

<p><strong>Script</strong></p>

<pre><code>arch=$(uname -m)
if [ ""$arch"" == ""i686"" -o ""$arch"" == ""i386"" -o ""$arch"" == ""i486"" -o ""$arch"" == ""i586"" ]; then
flag=1
else  
flag=0
fi
echo ""Installing OpenCV 2.4.13""
mkdir OpenCV
cd OpenCV
echo ""Removing any pre-installed ffmpeg and x264""
sudo apt-get -y remove ffmpeg x264 libx264-dev
echo ""Installing unzip""
sudo apt-get -y install unzip
echo ""Installing Dependenices""
sudo apt-get -y install libopencv-dev
sudo apt-get -y install build-essential checkinstall cmake pkg-config yasm
sudo apt-get -y install libtiff4-dev libjpeg-dev libjasper-dev
sudo apt-get -y install libavcodec-dev libavformat-dev libswscale-dev libdc1394-22-dev libxine-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev libv4l-dev
sudo apt-get -y install python-dev python-numpy
sudo apt-get -y install libtbb-dev libeigen3-dev
sudo apt-get -y install libqt4-dev libgtk2.0-dev
sudo apt-get -y install libfaac-dev libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev libxvidcore-core-dev
sudo apt-get -y install x264 v4l-utils ffmpeg
sudo apt-get -y install libgtk2.0-dev
echo ""Downloading OpenCV 2.4.13""
if ! [ -f ""OpenCV-2.4.13.zip"" ]; then
  wget -O OpenCV-2.4.13.zip http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.13/opencv-2.4.13.zip/download
fi
echo ""Installing OpenCV 2.4.13""
if ! [ -d ""opencv-2.4.13"" ]; then
  unzip OpenCV-2.4.13.zip
fi
rm OpenCV-2.4.13.zip
cd opencv-2.4.13
rm -rf build
mkdir build
cd build
cmake -D CUDA_ARCH_BIN=3.2 -D CUDA_ARCH_PTX=3.2 -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D BUILD_TIFF=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..
make -j$(nproc)
sudo make install
sudo sh -c 'echo ""/usr/local/lib"" &gt; /etc/ld.so.conf.d/opencv.conf'
sudo ldconfig
echo ""OpenCV 2.4.13 ready to be used""
</code></pre>

<p><strong>Command Output</strong></p>

<pre><code>[100%] Build Java tests
Buildfile: /home/myaccount/setups/OpenCV/opencv-2.4.13/build/modules/java/test/.build/build.xml

build:

compile:
    [mkdir] Created dir: /home/myaccount/setups/OpenCV/opencv-2.4.13/build/modules/java/test/.build/build/classes
    [javac] Compiling 104 source files to /home/myaccount/setups/OpenCV/opencv-2.4.13/build/modules/java/test/.build/build/classes

jar:
    [mkdir] Created dir: /home/myaccount/setups/OpenCV/opencv-2.4.13/build/modules/java/test/.build/build/jar
      [jar] Building jar: /home/myaccount/setups/OpenCV/opencv-2.4.13/build/modules/java/test/.build/build/jar/opencv-test.jar

BUILD SUCCESSFUL
Total time: 6 seconds
[100%] Built target opencv_test_java
[sudo] password for myaccount: 
Sorry, try again.
[sudo] password for myaccount: 
/bin/sh: 1: cd: can't cd to /home/myaccount/setups/OpenCV/opencv-2.4.13/build
make[2]: *** [3rdparty/libtiff/CMakeFiles/libtiff.dir/depend] Error 2
make[1]: *** [3rdparty/libtiff/CMakeFiles/libtiff.dir/all] Error 2
make: *** [all] Error 2
OpenCV 2.4.13 ready to be used
myaccount@vm-20161023-002:~/setups$
</code></pre>
",2016-06-06 15:31:48,2016-06-07 15:21:17,Sudo make install permissions issue on Ubuntu 14.04,<opencv><makefile><ubuntu-14.04>,,,CC BY-SA 3.0,True,False,False,False,True
43633,37645018,2016-06-05 17:54:39,,"<p>trying to record video from camera by using javaCV, </p>

<pre><code>  // recoder settings:
  private int imageWidth  = 320;  
  private int imageHeight = 240;
  private int frameRate   = 30;

  recorder = new FFmpegFrameRecorder(ffmpeg_link, imageWidth, imageHeight, 1);
  recorder.setFormat(""mp4"");
  recorder.setFrameRate(frameRate);

  // frame settings:
  IplImage yuvIplimage = null;
  yuvIplimage = IplImage.create(320, 320, IPL_DEPTH_16U, 1); //32 not supported

  //image reader:
  private ImageReader mImageReader;
  mImageReader = ImageReader.newInstance(320, 320, ImageFormat.YUV_420_888, 10);  
  mImageReader.setOnImageAvailableListener(
                    mOnImageAvailableListener, mBackgroundHandler);

private final ImageReader.OnImageAvailableListener mOnImageAvailableListener
        = new ImageReader.OnImageAvailableListener() {

    @Override  
    public void onImageAvailable(ImageReader reader) {
        Image image = reader.acquireNextImage();// acquireLatestImage(); - also tried
        if (image == null)
            return; 

        final ByteBuffer buffer = image.getPlanes()[0].getBuffer();
        byte[] bytes = new byte[buffer.remaining()];
        buffer.get(bytes, 0, bytes.length); 


        if (yuvIplimage != null ) {
            // OPTION 1
            yuvIplimage.getByteBuffer().put(convertYUV420ToNV21(image)); 
            // OPTION 2
            //yuvIplimage.getByteBuffer().put(decodeYUV420SP(bytes,320,320));
            try {
                if (started)  {
                recorder.record(yuvIplimage);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }  

        image.close();
    }
}; 
</code></pre>

<p>Option 1 is to decode image to NV21 by using code:</p>

<pre><code> private byte[] convertYUV420ToNV21(Image imgYUV420) {
    byte[] rez;

    ByteBuffer buffer0 = imgYUV420.getPlanes()[0].getBuffer();
    ByteBuffer buffer2 = imgYUV420.getPlanes()[2].getBuffer();
    int buffer0_size = buffer0.remaining();
    int buffer2_size = buffer2.remaining();
    rez = new byte[buffer0_size + buffer2_size]; 

    buffer0.get(rez, 0, buffer0_size);  
    buffer2.get(rez, buffer0_size, buffer2_size);

    return rez;
}
</code></pre>

<p><a href=""https://i.stack.imgur.com/9REd6.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/9REd6.png"" alt=""enter image description here""></a></p>

<p>option 2 is to convert to rgb as if i understand corect:</p>

<pre><code>public byte[] decodeYUV420SP( byte[] yuv420sp, int width, int height) {
    final int frameSize = width * height;
    byte rgb[]=new byte[width*height];
    for (int j = 0, yp = 0; j &lt; height; j++) {
        int uvp = frameSize + (j &gt;&gt; 1) * width, u = 0, v = 0;
        for (int i = 0; i &lt; width; i++, yp++) {
            int y = (0xff &amp; ((int) yuv420sp[yp])) - 16;
            if (y &lt; 0) y = 0;
            if ((i &amp; 1) == 0) {
                v = (0xff &amp; yuv420sp[uvp++]) - 128;
                u = (0xff &amp; yuv420sp[uvp++]) - 128;
            }
            int y1192 = 1192 * y;
            int r = (y1192 + 1634 * v);
            int g = (y1192 - 833 * v - 400 * u);
            int b = (y1192 + 2066 * u);
            if (r &lt; 0) r = 0; else if (r &gt; 262143) r = 262143;
            if (g &lt; 0) g = 0; else if (g &gt; 262143) g = 262143;
            if (b &lt; 0) b = 0; else if (b &gt; 262143) b = 262143;
            rgb[yp] = (byte) (0xff000000 | ((r &lt;&lt; 6) &amp; 0xff0000)
                    | ((g &gt;&gt; 2) &amp; 0xff00) | ((b &gt;&gt; 10) &amp; 0xff));
        }
    }
    return rgb;   }
</code></pre>

<p><a href=""https://i.stack.imgur.com/KKyas.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/KKyas.png"" alt=""enter image description here""></a></p>

<p>it looks incorect also.
wisch is the correct way to conert camera2 image to IplImage?
and is it possible to do it on fly?</p>
",2016-11-22 13:45:30,2016-11-22 13:45:30,Android JavaCV + Camera2,<android><javacv><iplimage><camera2>,,,CC BY-SA 3.0,False,False,False,False,True
43642,37678324,2016-06-07 11:37:10,,"<p>I want to build opencv with GStreamer support.</p>

<p>I built the GStreamer from source (version 1.8.1) following this guide:
<a href=""http://kacianka.at/?p=145"" rel=""noreferrer"">http://kacianka.at/?p=145</a>
I have 'gstreamer_build' folder at my home directory and it contains 'bin' folder with these:</p>

<blockquote>
  <p>gst-device-monitor-1.0 
  gst-discoverer-1.0  gst-inspect-1.0 
  gst-launch-1.0  gst-play-1.0 
  gst-stats-1.0  gst-typefind-1.0 
  orc-bugreport  orcc</p>
</blockquote>

<p>I have this path added to my environment variable PATH.</p>

<p>When I use cmake like:</p>

<blockquote>
  <p>cmake -D CMAKE_BUILD_TYPE=RELEASE -D
  CMAKE_INSTALL_PREFIX=/usr/local -D
  OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib/modules -D BUILD_opencv_python3=ON -D WITH_GSTREAMER=ON -D WITH_FFMPEG=OFF
  ..</p>
</blockquote>

<p>I get the following output clearly indicating that gstreamer is not found:</p>

<pre><code>-- checking for module 'gstreamer-base-1.0'
--   package 'gstreamer-base-1.0' not found
-- checking for module 'gstreamer-video-1.0'
--   package 'gstreamer-video-1.0' not found
-- checking for module 'gstreamer-app-1.0'
--   package 'gstreamer-app-1.0' not found
-- checking for module 'gstreamer-riff-1.0'
--   package 'gstreamer-riff-1.0' not found
-- checking for module 'gstreamer-pbutils-1.0'
--   package 'gstreamer-pbutils-1.0' not found
-- checking for module 'gstreamer-base-0.10'
--   package 'gstreamer-base-0.10' not found
-- checking for module 'gstreamer-video-0.10'
--   package 'gstreamer-video-0.10' not found
-- checking for module 'gstreamer-app-0.10'
--   package 'gstreamer-app-0.10' not found
-- checking for module 'gstreamer-riff-0.10'
--   package 'gstreamer-riff-0.10' not found
-- checking for module 'gstreamer-pbutils-0.10'
--   package 'gstreamer-pbutils-0.10' not found
</code></pre>

<p>and this:</p>

<pre><code>Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       resample:                  NO
--       gentoo-style:              NO
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l1 (ver 1.0.1) / libv4l2 (ver 1.0.1)
--     XIMEA:                       NO
--     Xine:                        NO
--     gPhoto2:                     NO
</code></pre>

<p>Can anyone help me with this?</p>
",2016-06-09 07:28:33,2020-08-18 04:02:24,"Compiling Opencv with Gstreamer, cmake not finding GStreamer",<opencv><compilation><cmake><gstreamer>,,,CC BY-SA 3.0,True,False,False,False,True
43752,37610926,2016-06-03 09:39:40,,"<pre><code>import cv2 
cap = cv2.VideoCapture(""StopMoti2001.mpeg"")
if cap.isOpened():
    print 'fine'
else:
    print 'not fine'
</code></pre>

<p>output is 'not fine' I have checked for various videos and I also moved the ffmpeg file moving to PATH and still the problem remains same. can you please suggest a solution</p>
",,2016-06-06 04:37:20,Video file not opening?(opencv 3.1.0 windows),<opencv><ffmpeg><video-capture><opencv3.0>,,,CC BY-SA 3.0,True,False,False,False,True
43791,37850248,2016-06-16 05:03:50,,"<p>I'm trying to deploy my java application that uses opencv library, but when I run it from another computer I get an error message saying:</p>

<pre><code>libopencv_java310.so: libavcodec-ffmpeg.so.56: cannot open shared object file: No such file or directory
</code></pre>

<p>but I have the ffmpeg installed correctly from official repo with no errors occurred but it still didn't install ""libavcodec-ffmpeg.so.56"".</p>

<p>Suspicions:
Is it possible that the machine that I've compiled opencv library got a different directory pointing to ffmpeg, and when I try to run the java app from another computer the pre-compiled opencv library doesn't find ffmpeg?</p>

<p>PS: actually before getting the error from ffmpeg I got an error saying that ""libjpeg.so.8"" ins't installed but I ""fixed"" linking with ""libjpeg.so"" that I had.</p>
",,2016-06-16 05:03:50,Deploying Java app with OpenCV library,<java><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
43792,37850576,2016-06-16 05:32:24,,"<p>My program is</p>

<pre><code>int main(){
    cout &lt;&lt; ""Start the process"" &lt;&lt; endl;
    cv::VideoCapture vcap(""rtsp://root:pass@192.168.0.90/axis-media/media.amp?camera=1"");
    cout &lt;&lt; ""Camera connection done!"" &lt;&lt; endl;
    cv::Mat image, small;
    //Output video
    cv::Size S = cv::Size((int) vcap.get(CV_CAP_PROP_FRAME_WIDTH), (int) vcap.get(CV_CAP_PROP_FRAME_HEIGHT));
    int ex = static_cast&lt;int&gt;(vcap.get(CV_CAP_PROP_FOURCC));
    int fps = vcap.get(CV_CAP_PROP_FPS);
    cout &lt;&lt; ""fps "" &lt;&lt; fps &lt;&lt; "" ex "" &lt;&lt; ex &lt;&lt; endl;
    cv::VideoWriter outputVideo;
    outputVideo.open(""TEST.avi"", ex/*CV_FOURCC('X', '2', '6', '4')*/, vcap.get(CV_CAP_PROP_FPS), S, true);
    if(!outputVideo.isOpened()){
        cout &lt;&lt; ""Could not open the output video for write"" &lt;&lt; endl;
        return -1;
    }

    for(;;){
        if(!vcap.read(image)){
            std::cout &lt;&lt; ""No frame"" &lt;&lt; std::endl;
            cv::waitKey(0);
        }

        cv::resize(image, small, image.size()/2, 0, 0 , cv::INTER_LINEAR);
        cv::imshow(""Display"", small);
        cv::waitKey(1);
        outputVideo.write(small);
        if(getkey() == '\n')
            break;
    }
    cout &lt;&lt; ""Camera release"" &lt;&lt; endl;
    outputVideo.release();
    vcap.release();
    image.release();
    small.release();
    return 0;
}
</code></pre>

<p><code>int ex = static_cast&lt;int&gt;(vcap.get(CV_CAP_PROP_FOURCC));</code> ex is 0 here.</p>

<p>I can record the TEST.avi, but can't be read by cv::VideoCapture vcap(""TEST.avi""); or VLC player or Videos in Ubuntu.
The error is <code>""Could not demultiplex stream""</code>.</p>

<p>If I changed to </p>

<pre><code>outputVideo.open(""TEST.avi"", CV_FOURCC('X', '2', '6', '4'), vcap.get(CV_CAP_PROP_FPS), S, true);
outputVideo.open(""TEST.avi"", CV_FOURCC('P','I','M','1'), vcap.get(CV_CAP_PROP_FPS), S, true);
outputVideo.open(""TEST.avi"", CV_FOURCC('M', 'P', '4', '2'), vcap.get(CV_CAP_PROP_FPS), S, true);
etc.
</code></pre>

<p>all have same problem.</p>

<p>If I set </p>

<pre><code>outputVideo.open(""TEST.avi"", CV_FOURCC('i', 'Y', 'U', 'V'), vcap.get(CV_CAP_PROP_FPS), S, true);
</code></pre>

<p>I have error as <code>Opencv: FFMPEG iYUV is not supported with codec id 14</code></p>

<p>For</p>

<pre><code>outputVideo.open(""TEST.avi"", CV_FOURCC('M', 'J', 'P', 'G'), vcap.get(CV_CAP_PROP_FPS), S, true);


OpenCV Error: Assertion failed (img.cols == width &amp;&amp; img.rows == height &amp;&amp; chann
els == 3) in write, file /home/Softwares/opencv/opencv/modules/videoio/src/
cap_mjpeg_encoder.cpp, line 829
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/Softwares/opencv/opencv/modules/videoio/src/cap_mjpeg_enco
der.cpp:829: error: (-215) img.cols == width &amp;&amp; img.rows == height &amp;&amp; channels =
= 3 in function write
</code></pre>

<p>What could be wrong? Is that my FFMPEG has problem?</p>
",2016-06-16 05:39:34,2020-10-02 11:31:15,"""Could not demultiplex stream"" in loading Video recorded by Opencv's VideoWriter",<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
43815,37774279,2016-06-12 12:30:10,,"<p>javacv has a sample for android ""RecordActivity.java"" which I tested and works perfect with Samsung devices but doesn't work with Huawei honor 6.
I'm using javacv version 1.2 and latest binaries.
error:</p>

<pre><code>06-12 16:00:37.595 10778-11036/com.example.example E/dalvikvm: dlopen(""/data/app-lib/com.example.example-1/libjniavutil.so"") failed: dlopen failed: cannot locate symbol ""av_version_info"" referenced by ""libjniavutil.so""...
</code></pre>

<p>I tried this <a href=""https://github.com/bytedeco/javacv/issues/333"" rel=""nofollow noreferrer"">https://github.com/bytedeco/javacv/issues/333</a> but still getting error</p>

<p>I'm using android studio 2.1.2 and here's my Gradle.Build:</p>

<pre><code>apply plugin: 'com.android.application'

android {
compileSdkVersion 23
buildToolsVersion ""23.0.1""
lintOptions { abortOnError false }


defaultConfig {
    applicationId ""com.example.example""
    minSdkVersion 15
    targetSdkVersion 18
    versionCode 1
    versionName ""1.0""
}
buildTypes {
    release {
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
}
packagingOptions {

    pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.properties'
    pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.xml'
    pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.properties'
    pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.xml'
    pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/flandmark/pom.properties'
    pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/flandmark/pom.xml'
}


dependencies {
compile fileTree(include: ['*.jar'], dir: 'libs')
compile 'com.android.support:appcompat-v7:23.1.1'
compile files('libs/ffmpeg.jar')
compile files('libs/javacpp.jar')
compile files('libs/javacv.jar')

}
</code></pre>

<p>here is my libs folder:</p>

<p><a href=""https://i.stack.imgur.com/Am0ct.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Am0ct.jpg"" alt=""enter image description here""></a></p>
",2016-06-12 13:00:44,2016-06-20 07:03:37,"dlopen failed: cannot locate symbol ""av_version_info"" referenced by ""libjniavutil.so""",<android><javacv><javacpp>,,,CC BY-SA 3.0,True,False,False,False,True
43828,37815371,2016-06-14 14:49:51,,"<p>This is my first time posting a question here as most of my questions have already been answered by someone else!  I am working on a GUI application in python and am attempting to use pyinstaller to package it into a single folder and .exe for easier portability.  Currently, I am using windows 10 and anaconda3 to manage my python packages.  The application relies on tkinter, pillow, numpy, scikit-learn, opencv, ffmpeg, and matplotlib.  The application is formatted with a main GUI.py file that creates objects of a number of other files (many of which are stored in a subfolder as this GUI is replacing a command line utility that served the same purpose).  The issue I am running into (as you can see in the title) is that the .exe is throwing the error block:</p>

<blockquote>
  <p>Traceback (most recent call last):
    File ""site-packages\PyInstaller\loader\rthooks\pyi_rth_pkgres.py"", line 11, in 
    File ""c:\users\gurnben\anaconda3\envs\opencv\lib\site-packages\PyInstaller\loader\pyimod03_importers.py"", line 389, in load_module
      exec(bytecode, module.<strong>dict</strong>)
    File ""site-packages\setuptools-20.7.0-py3.5.egg\pkg_resources__init__.py"", line 68, in 
    File ""site-packages\setuptools-20.7.0-py3.5.egg\pkg_resources\extern__init__.py"", line 60, in load_module
  ImportError: The 'packaging' package is required; normally this is bundled with this package so if you get this warning, consult the packager of your distribution.
  Failed to execute script pyi_rth_pkgres</p>
</blockquote>

<p>When I look at the warn.txt it gives a massive list of missing packages including parts of some packages that are actually in the single folder package.<br>
I have, however, successfully gotten it to recognize the dll files from opencv and it is not listed among the missing (nor is ffmpeg however I did not see any ffmpeg files in the folder).  I had to pass in a custom path to get it to include the opencv files as they are not in anaconda at this time.  </p>

<p>Any hints or ideas for next troubleshooting steps?  I am overly greatful for all of the help you an offer and I can upload any code, files, etc. that would help you diagnose the issue.  In the meantime I will continue searching for a solution myself!</p>
",,2020-07-12 10:06:09,"Pyinstaller ""Failed to execute script pyi_rth_pkgres"" and missing packages",<python><opencv><ffmpeg><pyinstaller>,,,CC BY-SA 3.0,True,False,False,False,True
43920,37667745,2016-06-06 22:22:57,,"<p>The sony camcorder recorded video in MP4 format. I am reading the file by</p>

<pre><code>import cv2
vid = cv2.VideoCapture('sample.MP4')
</code></pre>

<p>my OpenCV version is 2.4.8, as a Python module.</p>

<p><strong>The codec of the 'sample.MP4' is H.264, Linear PCM.</strong></p>

<pre><code>ffprobe sample.MP4
</code></pre>

<p>returns:</p>

<pre><code>&gt; Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C0004.mp4':   Metadata:
&gt;     major_brand     : XAVC
&gt;     minor_version   : 16785407
&gt;     compatible_brands: XAVCmp42iso2
&gt;     creation_time   : 2016-06-06 13:41:51   Duration: 00:00:15.02, start: 0.000000, bitrate: 50439 kb/s
&gt;     Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(tv, bt709/bt709/iec61966-2-4), 1920x1080 [SAR 1:1 DAR 16:9],
&gt; 48655 kb/s, 29.97 fps, 29.97 tbr, 30k tbn, 59.94 tbc (default)
&gt;     Metadata:
&gt;       creation_time   : 2016-06-06 13:41:51
&gt;       handler_name    : Video Media Handler
&gt;       encoder         : AVC Coding
&gt;     Stream #0:1(und): Audio: pcm_s16be (twos / 0x736F7774), 48000 Hz, 2 channels, s16, 1536 kb/s (default)
&gt;     Metadata:
&gt;       creation_time   : 2016-06-06 13:41:51
&gt;       handler_name    : Sound Media Handler
&gt;     Stream #0:2(und): Data: none (rtmd / 0x646D7472), 245 kb/s (default)
&gt;     Metadata:
&gt;       creation_time   : 2016-06-06 13:41:51
&gt;       handler_name    : Timed Metadata Media Handler 
&gt; Unsupported codec with id 0 for input stream 2
</code></pre>

<p>It seems that the codec for <code>h.264</code> is missing. The version of my <code>FFmpeg</code> is <code>3.0</code>. </p>

<p><strong>I tried <code>avconv -i sample.MP4 -c:a copy -c:v copy sample_converted.mp4</code> to convert the sample.MP4 to sample_converted.mp4, this command line did not work.</strong> The command <strong><code>ffmpeg -i sample.mp4 sample_converted.mp4</code></strong> worked; however, it compromised the video quality badly.I used an online video converter: <a href=""http://www.online-convert.com/"" rel=""nofollow"">http://www.online-convert.com/</a> (which output nice quality video in mp4 format, but it has size limitation for free users)
to convert the MP4 to mp4, the command in Terminal as below:</p>

<pre><code>ffprobe 'sample_converted.mp4'
</code></pre>

<p>returns</p>

<pre><code>&gt; Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'C0001_converted.mp4':  
&gt; Metadata:
&gt;     major_brand     : isom
&gt;     minor_version   : 512
&gt;     compatible_brands: isomiso2avc1mp41
&gt;     encoder         : Lavf57.36.100   Duration: 00:00:02.02, start: 0.000000, bitrate: 16777 kb/s
&gt;     Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 16801 kb/s, 59.94
&gt; fps, 59.94 tbr, 60k tbn, 119.88 tbc (default)
&gt;     Metadata:
&gt;       handler_name    : VideoHandler
&gt;     Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 127 kb/s (default)
&gt;     Metadata:
&gt;       handler_name    : SoundHandler
</code></pre>

<p>Obviously, the <strong>encoders, handler_names etc.</strong> of the sample.MP4 and sample_converted.mp4 are different. <strong>Any idea using FFmpeg or OpenCV to convert this raw video from camcorder to the readable format without compromising the video quality?</strong></p>
",,2016-06-07 20:01:27,opencv cannot read MP4 file from sony camcorder,<python><opencv><video><ffmpeg><mp4>,,,CC BY-SA 3.0,True,False,False,False,True
43933,37783999,2016-06-13 07:29:39,,"<p>I am trying to access AXIS IP camera from my program using OpenCV.
My OpenCV version is 3.1. I follow this tutorial <a href=""http://funvision.blogspot.sg/2015/11/opencv-300-videocapture-file-web-camera.html"" rel=""nofollow"">link</a>.</p>

<p>I have all libraries installed.
My following program can load mp4 video successfully. That means ffmpeg and necessary libraries are working fine.</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;opencv2/opencv.hpp&gt;

using namespace std;
int main() {
    cv::VideoCapture vcap(""test.mp4"");
    cv::Mat image;
//    const string address = ""rtsp://root:pass@192.168.0.90/axis-media/media.amp?camera=1"";
//    if(!vcap.open(address)){
//      std::cout &lt;&lt; ""Error opening video stream or file "" &lt;&lt; std::endl;
//      return -1;
//    }
    for(;;){
        if(!vcap.read(image)){
            std::cout &lt;&lt; ""No frame"" &lt;&lt; std::endl;
            cv::waitKey(0);
        }
        cv::imshow(""Display"", image);
        cv::waitKey(1);
    }
    return 0;
}
</code></pre>

<p>When I tried to access the IP Camera as follow</p>

<pre><code>cv::VideoCapture vcap(""rtsp://root:pass@192.168.0.90/axis-media/media.amp?camera=1"");
</code></pre>

<p>I have the following error</p>

<pre><code>GStreamer Plugin: Embedded video playback halted; module source reported: Could 
not open resource for reading and writing.
OpenCV Error: Unspecified error (GStreamer: unable to start pipeline
) in cvCaptureFromCAM_GStreamer, file /home/Softwares/opencv/opencv/modules
/videoio/src/cap_gstreamer.cpp, line 818
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/Softwares/opencv/opencv/modules/videoio/src/cap_gstreamer.
cpp:818: error: (-2) GStreamer: unable to start pipeline
 in function cvCaptureFromCAM_GStreamer
</code></pre>

<p>User is root and password is pass and ip 192.168.0.90 are all defaults.</p>

<p>My if config gave me</p>

<pre><code>ifconfig
eth0      Link encap:Ethernet  HWaddr b8:2a:72:c6:b8:13  
          inet6 addr: fe80::ba2a:72ff:fec6:b813/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:723959 errors:0 dropped:0 overruns:0 frame:0
          TX packets:116637 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:199422245 (199.4 MB)  TX bytes:13701699 (13.7 MB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:24829 errors:0 dropped:0 overruns:0 frame:0
          TX packets:24829 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:2502903 (2.5 MB)  TX bytes:2502903 (2.5 MB)

wlan0     Link encap:Ethernet  HWaddr a0:a8:cd:99:92:60  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
</code></pre>

<p>What could be the problem for this access to the camera?</p>

<p>Thanks</p>
",,2016-06-14 04:05:02,Reading images from AXIS ip camera using OpenCV,<opencv><ffmpeg><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
44001,37827008,2016-06-15 05:42:48,,"<p>While converting a video feed from a GigE Cam into '.mp4' using FFmpeg(x264) with Opencv 2.4.9 ,I was getting error message as below.</p>

<pre><code>  [libx264 @ 0x6a586e0] broken ffmpeg default settings detected
  [libx264 @ 0x6a586e0] use an encoding preset (e.g. -vpre medium)
  [libx264 @ 0x6a586e0] preset usage: -vpre &lt;speed&gt; -vpre &lt;profile&gt;
  [libx264 @ 0x6a586e0] speed presets are listed in x264 --help
  [libx264 @ 0x6a586e0] profile is optional; x264 defaults to high
  Could not open codec 'libx264': Unspecified error
</code></pre>

<p>So I did purge and auto-remove FFmpeg without knowing that Ubuntu 12.04 and 14.04 uses libav instead of FFmpeg.While uninstalling, it did not show any error message.</p>

<p>Now should i install libav or FFmpeg. Can someone please provide a link on the steps that I can follow.(Googling gave a number of links to install FFmpeg, but did not match with my requirement of compiling Opencv with FFmpeg enabled)</p>
",,2016-10-02 05:09:23,Installing FFmpeg in Ubuntu 14.04 (64 bit),<opencv><ffmpeg><ubuntu-14.04><libav>,,,CC BY-SA 3.0,True,False,False,False,True
44002,37827121,2016-06-15 05:52:25,,"<p>I am trying to convert a Frame of size 1280x720 into Bitmap using javacv AndroidFrameConverter and it takes long time to convert. Here is the sample code of converting.</p>

<pre><code>FrameGrabber grabber = new FFmpegFrameGrabber(videoUrl);
frame = grabber.grab();
AndroidFrameConverter converter = new AndroidFrameConverter();
Bitmap originalBitmap = converter.convert(frame);
</code></pre>

<p>is there any other solution which is faster than this?</p>
",,2016-06-24 09:23:04,Convert a javacv Frame Into Bitmap using AndroidFrameConverter,<android><bitmap><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
44055,37632962,2016-06-04 17:14:28,,"<p>I need to use OpenCV+FFMPEG in a Xeon Phi without root permission.</p>

<p>My environment is:</p>

<p>OpenCV version: 3.1.0
Host OS: Linux
Target OS: Phi Co-Processor
Compiler &amp; CMake: ICC 15.0.2 &amp; CMake 3.5.2 (installed in my home)</p>

<p>When I compile OpenCV with GCC in my home, it works fine. I compile with </p>

<pre><code>cmake -D CMAKE_INSTALL_PREFIX=$HOME/lib/opencv-3.1.0 -D WITH_GTK=ON ..
</code></pre>

<p>all works fine by setting LD_CONFIG_PATH and PKG_CONFIG_PATH env variables od ffmpeg and opencv.</p>

<p>Now, i need to use my code in a PHi CoProcessor, so I compile my code with</p>

<pre><code>icc -mmic -Wall -std=c++11 -DNO_DEFAULT_MAPPING -I /home/spm1407/lib/opencv-3.1.0/include/ -I /home/spm1501/fastflow/ -O3 -o farm farm.cpp -pthread -L/home/spm1407/lib/opencv-3.1.0/lib -lopencv_core -lopencv_highgui -lopencv_imgcodecs -lopencv_videoio -lopencv_video -lopencv_imgproc -lpthread
</code></pre>

<p>(Please ignore FastFlow)</p>

<p>Compiler returns</p>

<pre><code>x86_64-k1om-linux-ld: skipping incompatible /home/spm1407/lib/opencv-3.1.0/lib/libopencv_core.so when searching for -lopencv_core
x86_64-k1om-linux-ld: cannot find -lopencv_core
x86_64-k1om-linux-ld: skipping incompatible /home/spm1407/lib/opencv-3.1.0/lib/libopencv_highgui.so when searching for -lopencv_highgui
x86_64-k1om-linux-ld: cannot find -lopencv_highgui
x86_64-k1om-linux-ld: skipping incompatible /home/spm1407/lib/opencv-3.1.0/lib/libopencv_imgcodecs.so when searching for -lopencv_imgcodecs
x86_64-k1om-linux-ld: cannot find -lopencv_imgcodecs
x86_64-k1om-linux-ld: skipping incompatible /home/spm1407/lib/opencv-3.1.0/lib/libopencv_videoio.so when searching for -lopencv_videoio
x86_64-k1om-linux-ld: cannot find -lopencv_videoio
x86_64-k1om-linux-ld: skipping incompatible /home/spm1407/lib/opencv-3.1.0/lib/libopencv_video.so when searching for -lopencv_video
x86_64-k1om-linux-ld: cannot find -lopencv_video
x86_64-k1om-linux-ld: skipping incompatible /home/spm1407/lib/opencv-3.1.0/lib/libopencv_imgproc.so when searching for -lopencv_imgproc
x86_64-k1om-linux-ld: cannot find -lopencv_imgproc
</code></pre>

<p>if i omit mmic flag, compiler works fine.</p>

<p>How can i resolve this issue? Any suggest? 
Thanks.</p>
",2016-06-04 17:19:54,2016-06-04 17:19:54,Compile OpenCV code with icc and mmic flag,<opencv><icc>,,,CC BY-SA 3.0,True,False,False,False,True
44082,37677016,2016-06-07 10:36:14,,"<p>Im trying to write a video to file using OpenCV on ROS to MP4 container using H264 encoding for web, but I keep getting:</p>

<pre><code>Could not find encoder for codec id 28: Encoder not found
</code></pre>

<p>This is my code:</p>

<pre><code>frame_writer.open(pathfile, CV_FOURCC('X','2','6','4'),framerate, cv::Size(vpre[0].cols, vpre[0].rows),true);
</code></pre>

<p>I tried CV_FOURCC('X','2','6','4'), CV_FOURCC('H','2','6','4') and it didn't work. </p>

<p>I reinstalled my ffmpeg from source, and when I run ffmpeg -codecs I get:</p>

<pre><code> DEV.LS h264   H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (decoders: h264 h264_vdpau ) (encoders: libx264 libx264rgb )
</code></pre>

<p>I don't understand why Im still getting the error.</p>
",2016-06-07 13:12:12,2016-06-07 13:12:12,OpenCV could not find H264 Encoder,<c++><opencv><encoding><ffmpeg><ros>,,,CC BY-SA 3.0,True,False,False,False,True
44144,37976665,2016-06-22 19:26:21,,"<p>I'm trying to add the fix referenced <a href=""https://github.com/Itseez/opencv/pull/6053"" rel=""nofollow"">here</a> to fix the timeout issue with an IP camera. </p>

<p>As I understood, the fix was added with the new release of Opencv, but the ffmpeg binaries are not up to date. Thus the fix is ignored in the conditional compilation. </p>

<p>The project linked in the comments of the above link fixes everything, but it doesn't generate the dll needed to use with Opencv (or I don't know how to..)</p>

<p>I've tried to recompile Opencv with <a href=""https://github.com/Itseez/opencv/compare/Itseez:master...alalek:ffmpeg_20160207?expand=1"" rel=""nofollow"">this patch</a>, and then copied newly generated opencv_ffmpeg310_64.dll to my project. So far so good..</p>

<p>Now, my project uses 2 cameras: one is avc, the other is mjpg. With the old opencv_ffmpeg310_64.dll file, both were working properly. With the new file, I get the warning ""could not find codec parameters"" and the mjpg camera never connects.</p>

<p>So my guess would be that something went wrong while building Opencv with CMake? But I received no error in the process.</p>

<p>I'm stuck here, and out of ideas on what to do next. Any help would be greatly appreciated.</p>

<p>I'm using Windows 7 64 bit. IDE is Visual Studio 2013 and OpenCV 3.10.</p>
",,2016-06-22 19:26:21,Opencv VideoCapture interruption callback,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
44155,37799847,2016-06-13 22:01:40,,"<p>This is probably a stupid question, and I have searched for this but didn't find a straightforward answer:</p>

<p>Can you play a video with audio using OpenCV and FFMPEG?</p>

<p>If not, what is the best way to do this? It seems so simple but I'm so new to Python that I don't know what to expect/what to search for.</p>

<p>Thank you!</p>
",,2019-02-08 10:16:50,Python - Playing a video with audio (with OpenCV?),<python><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
44160,37717996,2016-06-09 06:04:15,,"<p>I am trying to make a video <code>.mp4</code> file out of a group of images using FFmpegFrameRecorder as a part of a bigger program, so I set up a test project in which I try to make a video out of 100 instances of the same frame at 25fps. The program seems to work. However, every time I run it the image seems to be reddish. As if a red filter had been applied to it.</p>

<p>Here's the code snippet:</p>

<pre><code>public static void main(String[] args) {
    File file = new File(""C:/Users/Diego/Desktop/tc-images/image0.jpg"");
    BufferedImage img = null;
    try {
        img = ImageIO.read(file);
    } catch (IOException e1) {
        e1.printStackTrace();
    }
    IplImage image = IplImage.createFrom(img); 
    FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(""C:/Users/Diego/Desktop/tc-images/test.mp4"",1920,1080); 
    try { 
    recorder.setVideoCodec(13);
    recorder.setFormat(""mp4"");
    recorder.setPixelFormat(0);
    recorder.setFrameRate(25);
    recorder.start(); 
    for (int i=0;i&lt;100;i++){ 
    recorder.record(image); 
    } 
    recorder.stop(); 
    } 
    catch (Exception e){ 
    e.printStackTrace(); 
    } 
}
</code></pre>

<p>I'd appreciate it if anybody told me what's wrong. Thanks in advance for any help.</p>
",,2016-06-14 00:08:32,JavaCV FFmpegFrameRecorder Video output reddish color,<java><video><colors><ffmpeg><javacv>,,,CC BY-SA 3.0,False,False,False,False,True
44225,37981686,2016-06-23 03:10:57,,"<p>In my project, several bytedeco javaCV libraries were pulled in through a gradle dependency:</p>

<pre><code>dependencies {
 compile fileTree(dir: 'libs', include: ['*.jar'])
 compile 'org.bytedeco:javacv:1.2'
 compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '3.1.0-1.2', classifier: 'windows-x86_64'
 compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '3.0.2-1.2', classifier: 'windows-x86_64'
 compile group: 'org.bytedeco.javacpp-presets', name: 'tesseract', version: '3.04.01-1.2', classifier: 'windows-x86_64'
 compile group: 'org.bytedeco.javacpp-presets', name: 'leptonica', version: '1.73-1.2', classifier: 'windows-x86_64'
}
</code></pre>

<p>The application compiles, and all of the libraries are present under my 'External Libraries':
<a href=""https://i.stack.imgur.com/oKbi5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/oKbi5.png"" alt=""enter image description here""></a></p>

<p>For some reason, I can access all of the namespaces for the imported bytedeco projects EXCEPT for the Tesseract.</p>

<p><a href=""https://i.stack.imgur.com/8s5J2.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/8s5J2.png"" alt=""enter image description here""></a></p>

<p>Any help would be greatly appreciated! <a href=""https://github.com/bytedeco/javacpp-presets/tree/master/tesseract"" rel=""nofollow noreferrer"">bytedeco-tesseract</a></p>
",,2016-06-25 15:31:44,"Bytedeco's Tesseract library was added through gradle dependency, but not found",<android><android-studio><gradle><tesseract><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
44320,38104404,2016-06-29 15:45:50,,"<p>I'm importing a C++/OpenCV code to an Android app with NDK. First of all, I have to say that I don't have studies in programming, I'm just an amateur developer, so there're many things that I don't manage (specially, things out of coding).</p>

<p>I use QtCreator for my C++/OpenCV code and I wrote this line in my Project.pro:</p>

<pre><code>INCLUDEPATH += path/to/OpenCV/main/dir #OpenCV-3.1.0
LIBS += -lopencv_core -lopencv_highgui -lopencv_imgcodecs -lopencv_imgproc
</code></pre>

<p>Now, I'm trying to make a ""Hello World!"" app only to be sure that I can compile with my C++ sources.</p>

<p>According to <a href=""https://developer.android.com/ndk/guides/android_mk.html"" rel=""nofollow noreferrer"">https://developer.android.com/ndk/guides/android_mk.html</a>, I wrote this simple Android.mk file:</p>

<pre><code>LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)

LOCAL_MODULE := myModule
LOCAL_CFLAGS += -I /path/to/OpenCV/main/dir
LOCAL_LDLIBS := -lopencv_core
LOCAL_SRC_FILES := bar.cpp

include $(BUILD_SHARED_LIBRARY)
</code></pre>

<p>In bar.cpp, I have:</p>

<pre><code>#include &lt;opencv2/core/core.hpp&gt;
</code></pre>

<p>Just for checking that the compiler can found the sources. When I try to build my C++/OpenCV native code using ndk-build, I get:</p>

<pre><code>non-system libraries in linker flags: -lopencv_core
Android NDK:     This is likely to result in incorrect builds. Try using LOCAL_STATIC_LIBRARIES or LOCAL_SHARED_LIBRARIES instead to list the library dependencies of the current module
</code></pre>

<p>I tryed to use LOCAL_STATIC_LIBRARIES and LOCAL_SHARED_LIBRARIES, but no succed. Any ideas?</p>

<hr>

<p>P.S.:</p>

<p>It's important to say that I compiled a simple Hello world using NDK (wthout including any OpenCV header) following this example <a href=""https://gist.github.com/gnuanu/252fd406f48f7da2c1c7"" rel=""nofollow noreferrer"">https://gist.github.com/gnuanu/252fd406f48f7da2c1c7</a>.</p>

<p>There is a post here <a href=""https://stackoverflow.com/questions/14559034/android-mk-how-to-include-ffmpeg-and-opencv"">Android.mk: how to include ffmpeg and Opencv</a>, but it has not answers and I can't solve with the info...</p>
",2017-05-23 12:02:06,2016-06-29 16:35:48,Android.mk - Include OpenCV directory for native C++ compliation with NDK,<c++><opencv><android-ndk><android.mk>,,,CC BY-SA 3.0,True,False,False,False,True
44427,38114999,2016-06-30 05:56:49,,"<p>I  have tried installing opencv 3 in anaconda virtual env.I used the following binstar package..</p>

<pre><code>conda

source activate (envname)

conda install -c https://conda.binstar.org/menpo opencv

conda list 
</code></pre>

<p><strong>cv__version__ also  gives the correct output 3.1.0</strong></p>

<p>This is my first sample code</p>

<pre><code> import numpy as np
 import cv2

cap = cv2.VideoCapture(0)

  while(True):
# Capture frame-by-frame
ret, frame = cap.read()

# Our operations on the frame come here
gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)

# Display the resulting frame
cv2.imshow('frame',gray)
if cv2.waitKey(1) &amp; 0xFF == ord('q'):
    break

# When everything done, release the capture
 cap.release()
 cv2.destroyAllWindows()
</code></pre>

<p>I get the following errors on run ./fp.py: line 1: import: command not found
./fp.py: line 2: import: command not found
./fp.py: line 4: syntax error near unexpected token <code>('
./fp.py: line 4:</code>cap = cv2.VideoCapture(0)'</p>

<p>Whenever i used import video as video, i get errors saying error:video module not found.I think this has something todo with ffmpeg not being present in the binstar package i downloaded.</p>
",2016-07-01 01:54:32,2016-07-01 01:54:32,OpenCV 3 Python 3.5 Anaconda,<python><ffmpeg><anaconda><opencv3.0><python-3.5>,,,CC BY-SA 3.0,True,False,False,False,True
44463,38193082,2016-07-04 22:46:57,,"<p>I need to dynamically add images to a video template with place holders for photos in order to generate a slide-show.
I need something of 
<a href=""http://videohive.net/item/watercolor-frames/15594607?s_rank=1"" rel=""nofollow"">this format</a>. Basically I will have a video template and images as my input. And the output has to be in <strong>mp4</strong>  format.
Any suggestions on which python libraries to use and how I can go about this?</p>
",,2016-07-04 22:55:00,create a dynamic image slideshow with python,<python><opencv><ffmpeg><pillow>,,,CC BY-SA 3.0,True,False,False,False,True
44507,38038490,2016-06-26 12:23:15,,"<p>i am tring to compile OpenCV on BeagleBone Black with CMake, but it can't find some libraries like gstream. I run cmake natively on BBB and it showed 
that rootfs has gstream. how can i tell CMake to search in Correct path ?</p>

<blockquote>
  <p>My toolchane.cmake</p>
</blockquote>

<pre><code>    set(CMAKE_SYSTEM_NAME Linux)
    set(CMAKE_SYSTEM_VERSION 4.4.9-ti-r25)
    set(CMAKE_SYSTEM_PROCESSOR armv7l)

    set(GCC_COMPILER_VERSION ""4.7"" CACHE STRING ""GCC Compiler version"")

####### Architecture ################
set(FLOAT_ABI_SUFFIX ""hf"")
set(ENABLE_NEON TRUE)

###### Link Compile Path ##############
set(ARM_SYS_ROOT_PATH /mnt/BBB) 

set(ARM_STD_USR_PATH ${ARM_SYS_ROOT_PATH}/usr )
set(ARM_STD_LIB_PATH ${ARM_SYS_ROOT_PATH}/usr/lib )
set(ARM_SYS_LIB_PATH ${ARM_SYS_ROOT_PATH}/lib )
set(ARM_STD_INC_PATH ${ARM_SYS_ROOT_PATH}/usr/include )
set(GCC_MACHINE_DUMP arm-linux-gnueabihf)
set(CMAKE_INSTALL_PREFIX ${ARM_SYS_ROOT_PATH}/usr/local/OpenCV ) ## install Path

set(CMAKE_SYSROOT ${ARM_LINUX_SYSROOT})


set(CMAKE_FIND_ROOT_PATH  ${CMAKE_SYSROOT}) ##searchs in X/lib and X/usr/lib
set(CMAKE_INCLUDE_PATH  ${ARM_STD_INC_PATH} ; ${ARM_STD_INC_PATH}/${GCC_MACHINE_DUMP} )
set(CMAKE_LIBRARY_PATH  ${ARM_STD_LIB_PATH} ; ${ARM_STD_LIB_PATH}/${GCC_MACHINE_DUMP} ; ${ARM_SYS_LIB_PATH} ; ${ARM_SYS_LIB_PATH}/${GCC_MACHINE_DUMP})
set(CMAKE_PROGRAM_PATH  ${ARM_SYS_ROOT_PATH}/usr/bin})
##### Install path ##############
set(CMAKE_INSTALL_PREFIX ${ARM_STD_USR_PATH})

##### Other ###########
set(CMAKE_COLOR_MAKEFILE ON)
set(PKG_CONFIG_EXECUTABLE /usr/bin/pkg-config)
################# Compiler ##########
set(CMAKE_C_COMPILER ""/usr/gcc-linaro-arm-linux-gnueabihf-4.7/bin/arm-linux-gnueabihf-gcc"")
set(CMAKE_CXX_COMPILER ""/usr/gcc-linaro-arm-linux-gnueabihf-4.7/bin/arm-linux-gnueabihf-g++"")
set(CMAKE_AR ""/usr/gcc-linaro-arm-linux-gnueabihf-4.7/bin/arm-linux-gnueabihf-ar"")
set(CMAKE_RANLIB ""/usr/gcc-linaro-arm-linux-gnueabihf-4.7/bin/arm-linux-gnueabihf-ranlib"")
set(CMAKE_LINKER ""/usr/gcc-linaro-arm-linux-gnueabihf-4.7/bin/arm-linux-gnueabihf-ld"")

###  C and Cxx Flags ########################
set(DCMAKE_BUILD_TYPE Release)
set(CMAKE_CXX_FLAGS           ""-isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf""                    CACHE STRING ""c++ flags"")
set(CMAKE_C_FLAGS             ""-isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf""                    CACHE STRING ""c flags"")
set(CMAKE_SHARED_LINKER_FLAGS ""-isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf""                    CACHE STRING ""shared linker flags"")
set(CMAKE_MODULE_LINKER_FLAGS ""-isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf""                    CACHE STRING ""module linker flags"")
set(CMAKE_EXE_LINKER_FLAGS    ""-Wl,-z,-rpath-link""  CACHE STRING ""executable linker flags"")

set(CMAKE_CXX_FLAGS ""${CMAKE_CXX_FLAGS} -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi"")
set(CMAKE_C_FLAGS   ""${CMAKE_C_FLAGS} -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi"")

set(CMAKE_SHARED_LINKER_FLAGS ""-Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now ${CMAKE_SHARED_LINKER_FLAGS}"")
set(CMAKE_MODULE_LINKER_FLAGS ""-Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now ${CMAKE_MODULE_LINKER_FLAGS}"")
set(CMAKE_EXE_LINKER_FLAGS    ""-Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now ${CMAKE_EXE_LINKER_FLAGS}"")

########### Macro to Limit Find path in host and targert ###################
# search for programs in the build host directories
SET(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
# for libraries and headers in the target directories
SET(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
SET(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)
</code></pre>

<blockquote>
  <p>Result of Cross Compile CMake</p>
</blockquote>

<pre><code>General configuration for OpenCV 2.4.11 =====================================
  Version control:               unknown

  Platform:
    Host:                        Linux 3.16.0-38-generic x86_64
    Target:                      Linux 4.4.9-ti-r25 armv7l
    CMake:                       2.8.12.2
    CMake generator:             Unix Makefiles
    CMake build tool:            /usr/bin/make
    Configuration:               Release

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                /usr/gcc-linaro-arm-linux-gnueabihf-4.7/bin/arm-linux-gnueabihf-g++  (ver 4.7.3)
    C++ flags (Release):         -isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi   -O3 -DNDEBUG  -DNDEBUG
    C++ flags (Debug):           -isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi   -g  -O0 -DDEBUG -D_DEBUG
    C Compiler:                  /usr/gcc-linaro-arm-linux-gnueabihf-4.7/bin/arm-linux-gnueabihf-gcc
    C flags (Release):           -isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi   -O3 -DNDEBUG  -DNDEBUG
    C flags (Debug):             -isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf -mthumb -fdata-sections -Wa,--noexecstack -fsigned-char -Wno-psabi   -g  -O0 -DDEBUG -D_DEBUG
    Linker flags (Release):      -Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf
    Linker flags (Debug):        -Wl,--fix-cortex-a8 -Wl,--no-undefined -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -isystem /mnt/BBB/lib:/mnt/BBB/lib/arm-linux-gnueabihf:/mnt/BBB/usr/lib/arm-linux-gnueabihf
    Precompiled headers:         YES

  OpenCV modules:
    To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib stitching superres ts videostab
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 androidcamera dynamicuda java python viz

  GUI: 
    QT:                          NO
    GTK+ 2.x:                    YES (ver 2.24.23)
    GThread :                    YES (ver 2.40.2)
    GtkGlExt:                    NO
    OpenGL support:              NO
    VTK support:                 NO

  Media I/O: 
    ZLib:                        /mnt/BBB/usr/lib/arm-linux-gnueabihf/libz.so (ver 1.2.8)
    JPEG:                        /mnt/BBB/usr/lib/arm-linux-gnueabihf/libjpeg.so (ver )
    PNG:                         /mnt/BBB/usr/lib/arm-linux-gnueabihf/libpng.so (ver 1.2.50)
    TIFF:                        /mnt/BBB/usr/lib/arm-linux-gnueabihf/libtiff.so (ver 42 - 4.0.3)
    JPEG 2000:                   /mnt/BBB/usr/lib/arm-linux-gnueabihf/libjasper.so (ver 1.900.1)
    OpenEXR:                     /mnt/BBB/usr/lib/arm-linux-gnueabihf/libImath.so /mnt/BBB/usr/lib/arm-linux-gnueabihf/libIlmImf.so /mnt/BBB/usr/lib/arm-linux-gnueabihf/libIex.so /mnt/BBB/usr/lib/arm-linux-gnueabihf/libHalf.so /mnt/BBB/usr/lib/arm-linux-gnueabihf/libIlmThread.so (ver 1.6.1)

  Video I/O:
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      YES
      codec:                     YES (ver 54.35.0)
      format:                    YES (ver 54.20.4)
      util:                      YES (ver 52.3.0)
      swscale:                   YES (ver 2.1.1)
      gentoo-style:              YES
    GStreamer:                   NO
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    UniCap:                      NO
    UniCap ucil:                 NO
    V4L/V4L2:                    NO/YES
    XIMEA:                       NO
    Xine:                        NO

  Other third-party libraries:
    Use IPP:                     NO
    Use Eigen:                   NO
    Use TBB:                     NO
    Use OpenMP:                  NO
    Use GCD                      NO
    Use Concurrency              NO
    Use C=:                      NO
    Use Cuda:                    NO
    Use OpenCL:                  YES

  OpenCL:
    Version:                     dynamic
    Include path:                /home/arash/Desktop/opencv-2.4.11/3rdparty/include/opencl/1.2
    Use AMD FFT:                 NO
    Use AMD BLAS:                NO

  Python:
    Interpreter:                 /usr/bin/python2 (ver 2.7.6)

  Java:
    ant:                         NO
    JNI:                         NO
    Java tests:                  NO

  Documentation:
    Build Documentation:         NO
    Sphinx:                      NO
    PdfLaTeX compiler:           NO
    Doxygen:                     NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    C/C++ Examples:              NO

  Install path:                  /mnt/BBB/usr

  cvconfig.h is in:              /home/arash/Desktop/opencv-2.4.11/buildBBBnew
</code></pre>

<blockquote>
  <p>Result of Native CMake On BBB Target</p>
</blockquote>

<pre><code>-- General configuration for OpenCV 2.4.11 =====================================
--   Version control:               unknown
-- 
--   Platform:
--     Host:                        Linux 4.4.9-ti-r25 armv7l
--     CMake:                       3.4.1
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               Release
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.9.2)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -pthread -fomit-frame-pointer -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):
--     Linker flags (Debug):
--     Precompiled headers:         YES
-- 
--   OpenCV modules:
--     To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib python stitching superres ts videostab
--     Disabled:                    world
--     Disabled by dependency:      -
--     Unavailable:                 androidcamera dynamicuda java viz
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.24.25)
--     GThread :                    YES (ver 2.42.1)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/arm-linux-gnueabihf/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/arm-linux-gnueabihf/libjpeg.so (ver )
--     PNG:                         /usr/lib/arm-linux-gnueabihf/libpng.so (ver 1.2.50)
--     TIFF:                        /usr/lib/arm-linux-gnueabihf/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/arm-linux-gnueabihf/libjasper.so (ver 1.900.1)
--     OpenEXR:                     /usr/lib/arm-linux-gnueabihf/libImath.so /usr/lib/arm-linux-gnueabihf/libIlmImf.so /usr/lib/arm-linux-gnueabihf/libIex.so /usr/lib/arm-linux-gnueabihf/libHalf.so /usr/lib/arm-linux-gnueabihf/libIlmThread.so (ver 1.6.1)
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.3)
--     FFMPEG:                      YES
--       codec:                     YES (ver 56.1.0)
--       format:                    YES (ver 56.1.0)
--       util:                      YES (ver 54.3.0)
--       swscale:                   YES (ver 3.0.0)
--       gentoo-style:              YES
--     GStreamer:                   
--       base:                      YES (ver 1.4.4)
--       video:                     YES (ver 1.4.4)
--       app:                       YES (ver 1.4.4)
--       riff:                      YES (ver 1.4.4)
--       pbutils:                   YES (ver 1.4.4)
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l1 (ver 1.6.0) / libv4l2 (ver 1.6.0)
--     XIMEA:                       NO
--     Xine:                        NO
-- 
--   Other third-party libraries:
--     Use IPP:                     NO
--     Use Eigen:                   NO
--     Use TBB:                     NO
--     Use OpenMP:                  NO
--     Use GCD                      NO /mnt/BBB/usr/lib/mnt/BBB/usr/lib/arm-linux-gnueabihf/mnt/BBB/lib/mnt/BBB/lib/arm-linux-gnueabihf

--     Use Concurrency              NO
--     Use C=:                      NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/debian/Desktop/opencv-2.4.11/3rdparty/include/opencl/1.2
--     Use AMD FFT:                 NO
--     Use AMD BLAS:                NO
-- 
--   Python:
--     Interpreter:                 /usr/bin/python2 (ver 2.7.9)
--     Libraries:                   /usr/lib/arm-linux-gnueabihf/libpython2.7.so (ver 2.7.9)
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.8.2)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java tests:                  NO
-- 
--   Documentation:
--     Build Documentation:         NO
--     Sphinx:                      NO
--     PdfLaTeX compiler:           NO
--     Doxygen:                     NO
-- 
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              NO
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/debian/Desktop/opencv-2.4.11/build
-- -----------------------------------------------------------------
-- 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/debian/Desktop/opencv-2.4.11/build
</code></pre>
",,2016-06-28 07:30:20,Cmake cross compile cant find library,<opencv><cmake><cross-compiling><beagleboneblack>,,,CC BY-SA 3.0,True,False,False,False,True
44555,38161301,2016-07-02 14:41:11,,"<p>I just found out about Openbr and started to install required libraries like OpenCV and QT. I followed these instructions for windows(win10 64bit):
<a href=""http://openbiometrics.org/docs/install/#windows"" rel=""nofollow"">http://openbiometrics.org/docs/install/#windows</a>
but unfortionatly got stuck when executing the following command:</p>

<pre><code>cmake -G ""NMake Makefiles"" -DBUILD_PERF_TESTS=OFF -DBUILD_TESTS=OFF -DWITH_FFMPEG=OFF -DCMAKE_BUILD_TYPE=Debug ..
</code></pre>

<p>with this output:</p>

<pre><code>CMake Error at C:/opencv-2.4.11/build-msvc2013/win-install/OpenCVConfig.cmake:71 (include):
include could not find load file:

C:/opencv-2.4.11/build-msvc2013/win-install/OpenCVModules.cmake
Call Stack (most recent call first):
CMakeLists.txt:87 (find_package)


-- adding C:/openbr/openbr/plugins/classification
-- adding C:/openbr/openbr/plugins/cluster
-- adding C:/openbr/openbr/plugins/cmake
-- adding C:/openbr/openbr/plugins/core
-- importing C:/openbr/openbr/plugins/cuda/module.cmake
-- adding C:/openbr/openbr/plugins/distance
-- adding C:/openbr/openbr/plugins/format
-- adding C:/openbr/openbr/plugins/gallery
-- adding C:/openbr/openbr/plugins/gui
-- adding C:/openbr/openbr/plugins/imgproc
-- adding C:/openbr/openbr/plugins/io
-- adding C:/openbr/openbr/plugins/metadata
-- adding C:/openbr/openbr/plugins/output
-- adding C:/openbr/openbr/plugins/representation
-- adding C:/openbr/openbr/plugins/video
CMake Error at openbr/CMakeLists.txt:52 (add_subdirectory):
  The source directory

    C:/openbr/openbr/janus

  does not contain a CMakeLists.txt file.


CMake Warning at C:/Program Files/CMake/share/cmake-3.6/Modules    /InstallRequiredSystemLibraries.cmake:463 (message):
  system runtime library file does not exist:
  'MSVC12_REDIST_DIR-NOTFOUND/x64/Microsoft.VC120.CRT/msvcp120.dll'
Call Stack (most recent call first):
  share/openbr/cmake/InstallDependencies.cmake:135 (include)
  openbr/CMakeLists.txt:67 (install_compiler_libraries)


CMake Warning at C:/Program Files/CMake/share/cmake-3.6/Modules/InstallRequiredSystemLibraries.cmake:463 (message):
  system runtime library file does not exist:
  'MSVC12_REDIST_DIR-NOTFOUND/x64/Microsoft.VC120.CRT/msvcr120.dll'
Call Stack (most recent call first):
  share/openbr/cmake/InstallDependencies.cmake:135 (include)
  openbr/CMakeLists.txt:67 (install_compiler_libraries)


-- Configuring incomplete, errors occurred!
See also ""C:/openbr/build-msvc2013/CMakeFiles/CMakeOutput.log"".
</code></pre>
",,2016-07-02 14:41:11,Openbr - system runtime library file does not exist: msvcp120.dll,<c++><qt><opencv><biometrics><openbr>,,,CC BY-SA 3.0,True,False,False,False,True
44639,38304556,2016-07-11 10:22:47,,"<p>I am able to stream and receive webcam feed in two terminal via udp</p>

<p>command for streaming:</p>

<pre><code>ffmpeg -i /dev/video0 -b 50k -r 20 -s 858x500 -f mpegts udp://127.0.0.1:2000  
</code></pre>

<p>command for recieving:</p>

<pre><code>ffplay  udp://127.0.0.1:2000 
</code></pre>

<p>Now i have to use this received video stream as input in python/opencv how can i do that.
I will be doing this using rtp and rstp as well.
But in case of rtsp it is essential to initiate the receiving terminal, but if I do that then port will become busy and my program will not be able to take the feed.How could it be resolved. 
I am currently using opencv 2.4.13, python 2.7 in ubuntu 14.04</p>
",2016-07-11 12:15:02,2016-07-11 12:15:02,how to use a video stream as input in python/opencv programme,<python-2.7><opencv><ffmpeg><ubuntu-14.04>,,,CC BY-SA 3.0,True,False,False,False,True
44739,38277863,2016-07-09 03:03:49,,"<p>So I am trying to use JavaCV with Android Studio. I am trying to use the wrapper for the FaceRecognizer class. I have tried getting this code running for hours but no luck so far. I keep getting a build error:</p>

<pre><code>     Error:A problem occurred configuring project ':app'.
     &gt; Could not find javacpp-presets-Mac OS X-x86_64.jar
      (org.bytedeco:javacpp-presets:1.2).
      Searched in the following locations:
      https://jcenter.bintray.com/org/bytedeco/javacpppresets/1.2/javacpp-presets-1.2-Mac OS X-x86_64.jar'
</code></pre>

<p>I unzipped the .so files for opencv and split into two files: armeabi and x86, so thats fine.</p>

<p>Here is my build.gradle file:</p>

<pre><code>apply plugin: 'com.android.application'

android {
    compileSdkVersion 23
    buildToolsVersion ""23.0.3""
    sourceSets.main.jni.srcDirs = []

    //task ndkBuild(type: Exec, description: 'Compile JNI source via NDK') {
    //    ndkDir = project.plugins.findPlugin('com.android.application').sdkHandler.getNdkFolder()
    //    //on Windows, you need to add "".cmd"" after ""ndk-build"" below
    //    commandLine ""$ndkDir/ndk-build"",
    //            'NDK_PROJECT_PATH=build/intermediates/ndk',
    //            'NDK_LIBS_OUT=src/main/jniLibs',
    //            'APP_BUILD_SCRIPT=src/main/jniLibs/Android.mk',
    //            'NDK_APPLICATION_MK=src/main/jniLibs/Application.mk'
    //}
    //task ndkLibsToJar(type: Zip, dependsOn: 'ndkBuild', description: 'Create a JAR of the native libs') {
    //    destinationDir new File(buildDir, 'libs')
    //    baseName 'ndk-libs'
    //    extension 'jar'
    //    from(new File(buildDir, 'libs')) { include '**/*.so' }
    //    into 'lib/'
    //}
    //tasks.withType(JavaCompile) {
    //    compileTask -&gt; compileTask.dependsOn ndkBuild
    //}
    defaultConfig {
        applicationId ""com.example.manavdutta1.affdexdemo""
        minSdkVersion 19
        targetSdkVersion 23
        versionCode 1
        versionName ""1.0""
    }
    packagingOptions {
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/NOTICE.txt'
        //exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.properties'
        //exclude 'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.xml'

        //might need these if you use openCV
        exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.properties'
        exclude 'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.xml'
    }
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}
    dependencies {
        compile fileTree(include: ['*.jar'], dir: 'libs')
        compile fileTree(dir: new File(buildDir, 'libs'), include: '*.jar')
        testCompile 'junit:junit:4.12'
        compile project(path: ':openCVLibrary2411')
        compile files('src/main/libs/faceapi.jar')
        compile files('src/main/libs/faceppsdk.jar')
        //compile files('src/main/libs/artoolkitplus.jar')
        //compile files('src/main/libs/ffmpeg.jar')
        //compile files('src/main/libs/flandmark.jar')
        //compile files('src/main/libs/flycapture.jar')
        //compile files('src/main/libs/javacpp.jar')
        //compile files('src/main/libs/javacv.jar')
        //compile files('src/main/libs/arm/opencv-android-arm.jar')
        //compile files('src/main/libs/x86/opencv-android-x86.jar')
        //compile files('src/main/libs/libdc1394.jar')
        //compile files('src/main/libs/libfreenect.jar')
        //compile files('src/main/libs/opencv.jar')
        //compile files('src/main/libs/videoinput.jar')
        compile 'com.android.support:appcompat-v7:23.3.0'
        compile 'com.affectiva.android:affdexsdk:3.0.1'
        compile 'com.microsoft.projectoxford:face:1.0.0'
        compile 'com.microsoft.projectoxford:emotion:1.0.0'
        compile 'com.android.support:design:23.3.0'
        compile 'org.bytedeco:javacv:1.2'
        compile 'org.bytedeco.javacpp-presets:opencv:3.0.0-1.1:android-x86'
        compile 'org.bytedeco.javacpp-presets:opencv:3.0.0-1.1:android-arm'
        //compile group: 'org.bytedeco', name: 'javacv', version: '1.2'

        //compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '2.4.10-0.10', classifier: 'android-arm'
        //compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '2.5.1-0.10', classifier: 'android-arm'

    }
</code></pre>

<p>Im not sure how to proceed from here. What modifications do I need to make to build.gradle to get this compiling? I tried using javacv 1.1 but I got an error at runtime, and the .so files all come from javacv 1.2.  </p>
",,2016-07-18 13:41:59,Issue with using JavaCV Android Studio,<android><opencv><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
44824,38397964,2016-07-15 13:57:17,,"<p>I'm trying to process frames from a video stream, and it as a new video.</p>

<p>This is what I'm doing : </p>

<pre><code>fourcc = cv2.VideoWriter_fourcc(*'XVID')
out = cv2.VideoWriter('Videos/output.mp4',fourcc, fps, (1080,1080))
</code></pre>

<p>I keep getting : </p>

<pre><code>OpenCV: FFMPEG: tag 0x44495658/'XVID' is not supported with codec id 13 and format 'mp4 / MP4 (MPEG-4 Part 14)'
OpenCV: FFMPEG: fallback to use tag 0x00000020/' ???'
</code></pre>

<p>I think I'm using the wrong fourcc value... Which one should I use ? I've been trying a lot of them.</p>

<p>I'm using Ubuntu 16.04, Python 2.7.11 and OpenCV 3.1.0</p>
",2017-06-14 08:39:37,2020-04-02 19:07:30,Can't write and save a video file using OpenCV and Python,<python><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
44852,38357319,2016-07-13 16:39:44,,"<p>I'm working on a CentOS cluster right now and have Python2.7 installed. I've managed to get OpenCV 2.4 installed (using <a href=""https://superuser.com/questions/678568/install-opencv-in-centos"">these</a> helpful instructions) but it does not have all of the functionality of 3 (I need the connectedComponents function and a couple others not available). Omitting the ""checkout tags"" step results in errors during ""cmake"". Something else to note is when I attempt to install the ffmpeg package it tells me no such package is available. Error:</p>

<pre><code>CMake Error at 3rdparty/ippicv/downloader.cmake:77 (message):
  ICV: Failed to download ICV package: ippicv_linux_20151201.tgz.
  Status=6;""Couldn't resolve host name""
Call Stack (most recent call first):
  3rdparty/ippicv/downloader.cmake:110 (_icv_downloader)
  cmake/OpenCVFindIPP.cmake:237 (include)
...
</code></pre>
",,2016-07-13 21:16:42,How do I install OpenCV 3 on Centos 6.8?,<python><linux><opencv><cmake><centos>,,,CC BY-SA 3.0,True,False,False,False,True
44936,38365051,2016-07-14 03:37:05,,"<p>OpenCV has the <a href=""http://docs.opencv.org/master/d8/dfe/classcv_1_1VideoCapture.html#ab5b7391cd5ec50e7237e575a758f6f05"" rel=""noreferrer"">VideoCapture</a> class to load video from external sources. I have a network camera on my network that I'm accessing with RTSP (using the FFMPEG plugin). </p>

<p>The sad thing is that it seems the open method and the constructor block on opening the video stream. This means if the stream is down, the program is stuck there forever. </p>

<p>Is there any sort of timeout ability? I tried looking in the source code, but in the end it calls external FFMPEG functions I believe and I'm unable to go further.</p>

<p>If there isn't timeout, is there any sort of library for a nonblocking VideoCapture method for RTSP or HTTP?</p>
",,2018-01-02 12:37:59,OpenCV VideoCapture timeout on Open or Constructor?,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
45054,38535782,2016-07-22 21:54:33,,"<h2>Problem Outline</h2>

<p>I have an h264 real-time video stream (I'll call this ""<strong>the stream</strong>"") being captured in Process1. My goal is to extract each frame from the stream as it comes through and use Process2 to analyze it with OpenCV. (Process1 is nodejs, Process2 is Python)</p>

<h2>Things I've tried, and their failure modes:</h2>

<ul>
<li><em>Send the stream directly from one Process1 to Process2 over a named fifo pipe</em>:  </li>
</ul>

<p>I succeeded in directing the stream from Process1 into the pipe. However, in Process2 (which is Python) I could not (a) extract individual frames from the stream, and (b) convert any extracted data from h264 into an OpenCV format (e.g. JPEG, numpy array). </p>

<p>I had hoped to use OpenCV's VideoCapture() method, but it does not allow you to pass a FIFO pipe as an input. I was able to use VideoCapture by saving the h264 stream to a .h264 file, and then passing that as the file path. This doesn't help me, because I need to do my analysis in real time (i.e. I can't save the stream to a file before reading it in to OpenCV). </p>

<ul>
<li><em>Pipe the stream from Process1 to FFMPEG, use FFMPEG to change the stream format from h264 to MJPEG, then pipe the output to Process2</em>: </li>
</ul>

<p>I attempted this using the command: </p>

<p>cat pipeFromProcess1.fifo | ffmpeg -i pipe:0 -f h264 -f mjpeg pipe:1 | cat > pipeToProcess2.fifo</p>

<p>The biggest issue with this approach is that FFMPEG takes inputs from Process1 until Process1 is killed, and only then does Process2 begin to receive the data.</p>

<p>Additionally, on the Process2 side, I still don't understand how to extract individual frames from the data coming over the pipe. I open the pipe for reading (as ""f"") and then execute data = f.readline(). The size of data varies drastically (some reads have length on the order of 100, others length on the order of 1,000). When I use f.read() instead of f.readline(), the length is much larger, on the order of 100,000. </p>

<p>If I were to know that I was getting the correct size chunk of data, I would still not know how to transform it into an OpenCV-compatible array because I don't understand the format it's coming over in. It's a string, but when I print it out it looks like this: </p>

<p>��_M~0A0����tQ,\%��e���<em>f/�H�#Y�p�f#�Kus�} F����ʳa�G������+$x�%V�� }[����Wo �1'̶A���c����*�&amp;=Z^�o'��Ͽ� SX-ԁ涶V&amp;H|��$
~��&lt;�E�� ��>�����u���7�����cR� �f�=�9 ��fs�q�ڄߧ�9v�]�Ӷ���&amp; gr]�n�IRܜ�檯����</em>
� ����+ �I��w�}� ��9�o��� �w��M�m���Ĳ ��� �m�=�Soՙ}S �>j �,�ƙ�'���tad =i ��WY�FeC֓z �2�g�;EXX��S��Ҁ*, ���w� _|�&amp;�y��H��=<em>��)� ���Ɗ3@   �h���Ѻ�Ɋ��ZzR`��)�y�� c�ڋ.��v�!u�</em>��� �S�I#�$9R�Ԯ0py z ��8 #��A�q�� �͕� ĳc �bp=��۹ c SqH</p>

<p>Converting from base64 doesn't seem to help. I also tried:</p>

<pre><code>array = np.fromstring(data, dtype=np.uint8)
</code></pre>

<p>which does convert to an array, but not one of a size that makes sense based on the 640x368x3 dimensions of the frames I'm trying to decode. </p>

<ul>
<li><em>Using decoders such as Broadway.js to convert the h264 stream</em>:</li>
</ul>

<p>These seem to be focused on streaming to a website, and I did not have success trying to re-purpose them for my goal.</p>

<h2>Clarification about what I'm NOT trying to do:</h2>

<p>I've found many related questions about streaming h264 video to a website. This is a solved problem, but none of the solutions help me extract individual frames and put them in an OpenCV-compatible format. </p>

<p>Also, I need to use the extracted frames in real time on a continual basis. So saving each frame as a .jpg is not helpful. </p>

<h2>System Specs</h2>

<p>Raspberry Pi 3 running Raspian Jessie </p>

<h2>Additional Detail</h2>

<p>I've tried to generalize the problem I'm having in my question. If it's useful to know, Process1 is using the node-bebop package to pull down the h264 stream (using drone.getVideoStream()) from a Parrot Bebop 2.0. I tried using the other video stream available through node-bebop (getMjpegStream()). This worked, but was not nearly real-time; I was getting very intermittent data streams. I've entered that specific problem as an Issue in the node-bebop repository. </p>

<p>Thanks for reading; I really appreciate any help anyone can give!</p>
",,2020-03-11 20:32:53,Extracting each individual frame from an H264 stream for real-time analysis with OpenCV,<python><node.js><opencv><ffmpeg><h.264>,,,CC BY-SA 3.0,True,False,False,False,True
45120,38461033,2016-07-19 14:13:55,,"<p>The following code compiles with no error, but when I try to execute it i got ""<strong><em>The procedure entry point _ZSt24__throw_out_of_range_fmtPKcz could not be located in the dynamic link library libopencv_core2413.dll</em></strong>"", original message in portuguese.</p>

<pre><code>#include ""opencv2/highgui.hpp""
#include ""opencv2/core.hpp""
#include ""opencv2/imgproc.hpp""
#include ""opencv2/opencv.hpp""
#include ""opencv2/opencv_modules.hpp""

int main()
{
  cv::Mat a;
  return 0;
}
</code></pre>

<p>Well, initially I built it from the source, downloaded at the sourceforge link <a href=""https://sourceforge.net/projects/opencvlibrary/"" rel=""nofollow"">https://sourceforge.net/projects/opencvlibrary/</a> The cmake version is 3.5.0-rc2, the mingw version is 4.9.3, the opencv version is 2.4.13. I have installed the ghc for haskell and allegro5 libraries on my mingw.</p>

<p>After downloading it, I extracted it at C:/opencv. Using the cmake-gui I set the source folder as C:/opencv/sources and the build as C:/opencv/build. About the configuration flags, I just unmark the BUILD_opencv_pyhon, since I don't have python installed. This is the log of the configure and generate steps:</p>

<pre><code>Detected version of GNU GCC: 49 (409)
CUDA compilation is disabled (due to only Visual Studio compiler supported on your platform).

General configuration for OpenCV 2.4.13 =====================================
  Version control:               unknown

  Platform:
    Host:                        Windows 10.0.10586 AMD64
    CMake:                       3.5.0-rc2
    CMake generator:             MinGW Makefiles
    CMake build tool:            C:/MinGW/bin/mingw32-make.exe
    Configuration:               Release

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                C:/MinGW/bin/g++.exe  (ver 4.9.3)
    C++ flags (Release):         -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-array-bounds -Wno-aggressive-loop-optimizations -fdiagnostics-show-option -march=i686 -fomit-frame-pointer -msse -msse2 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
    C++ flags (Debug):           -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-array-bounds -Wno-aggressive-loop-optimizations -fdiagnostics-show-option -march=i686 -fomit-frame-pointer -msse -msse2 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
    C Compiler:                  C:/MinGW/bin/gcc.exe
    C flags (Release):           -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -Wno-array-bounds -Wno-aggressive-loop-optimizations -fdiagnostics-show-option -march=i686 -fomit-frame-pointer -msse -msse2 -mfpmath=sse -ffunction-sections -O2 -DNDEBUG  -DNDEBUG
    C flags (Debug):             -fsigned-char -mstackrealign -W -Wall -Werror=return-type -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -Wno-array-bounds -Wno-aggressive-loop-optimizations -fdiagnostics-show-option -march=i686 -fomit-frame-pointer -msse -msse2 -mfpmath=sse -ffunction-sections -g  -O0 -DDEBUG -D_DEBUG
    Linker flags (Release):      
    Linker flags (Debug):        
    Precompiled headers:         YES

  OpenCV modules:
    To be built:                 core flann imgproc highgui features2d calib3d ml video legacy objdetect photo gpu ocl nonfree contrib stitching superres ts videostab
    Disabled:                    python world
    Disabled by dependency:      -
    Unavailable:                 androidcamera dynamicuda java viz

  Windows RT support:            NO

  GUI: 
    QT:                          NO
    Win32 UI:                    YES
    OpenGL support:              NO
    VTK support:                 NO

  Media I/O: 
    ZLib:                        build (ver 1.2.7)
    JPEG:                        build (ver 62)
    PNG:                         build (ver 1.5.12)
    TIFF:                        build (ver 42 - 4.0.2)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     build (ver 1.7.1)

  Video I/O:
    Video for Windows:           YES
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      YES (prebuilt binaries)
      codec:                     YES (ver 55.18.102)
      format:                    YES (ver 55.12.100)
      util:                      YES (ver 52.38.100)
      swscale:                   YES (ver 2.3.100)
      resample:                  NO
      gentoo-style:              YES
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    DirectShow:                  YES
    Media Foundation:            NO
    XIMEA:                       NO
    Intel PerC:                  NO

  Other third-party libraries:
    Use IPP:                     NO
    Use Eigen:                   NO
    Use TBB:                     NO
    Use OpenMP:                  NO
    Use GCD                      NO
    Use Concurrency              NO
    Use C=:                      NO
    Use Cuda:                    NO
    Use OpenCL:                  YES

  OpenCL:
    Version:                     dynamic
    Include path:                C:/opencv/sources/3rdparty/include/opencl/1.2
    Use AMD FFT:                 NO
    Use AMD BLAS:                NO

  Python:
    Interpreter:                 D:/Ferramentas/[Ferramenta]_Phyton/python.exe (ver 2.7.10)

  Java:
    ant:                         NO
    JNI:                         C:/Program Files/Java/jdk1.8.0_91/include C:/Program Files/Java/jdk1.8.0_91/include/win32 C:/Program Files/Java/jdk1.8.0_91/include
    Java tests:                  NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    C/C++ Examples:              NO

  Install path:                  C:/opencv/build/install

  cvconfig.h is in:              C:/opencv/build
-----------------------------------------------------------------

CMake Warning at cmake/OpenCVPackaging.cmake:23 (message):
  CPACK_PACKAGE_VERSION does not match version provided by version.hpp
  header!
Call Stack (most recent call first):
  CMakeLists.txt:1105 (include)


Configuring done
Generating done
</code></pre>

<p>I have tried the other versions of opencv, the most recent, the 2.4.7, and so on. Everytime I just build it and get the same error after trying execute a compiled program. I have tried to specify the compiler (I have others versions of mingw installed), for gcc C:\mingw\bin\gcc.exe and for g++ C:\mingw\bin\g++.exe. No luck, same error. I tried install a new version of mingw, and put that in C:\mingwnew and I specifyied the compiler, for gcc C:\mingwnew\bin\gcc.exe and for g++ C:\mingwnew\bin\g++.exe. No luck.</p>

<p>After generated, I just get to the folder c:\opencv\build and type C:\mingw\bin\mingw32-make.exe (or C:\mingwnew\bin\mingw32-make.exe in the other try). There were a few warnings about the opencv code itself (I have tried some different versions). After that, it ends up without any error. I type, C:\mingw\bin\mingw32-make.exe install. After that, I have a new folder C:\opencv\build\install\x86\mingw. In C:\opencv\build\install\x86\mingw\bin there are a few examples, tried to execute them. Same error.</p>

<p>Things I tried after that:</p>

<ul>
<li><p>Copied the C:\opencv\build\install\x86\mingw folder to my mingw. Copied the libs and dlls to my project folder directory (That has no spaces in the path), copied the dlls to the system32 folder. And tried to compile with -Wall, no errors, but when try to execute, same error.</p></li>
<li><p>Compiled with </p>

<p>c:/mingw/bin/g++.exe -Wall -I""C:/opencv/build/install/include"" loadimg.cpp libopencv_core2413.dll.a libopencv_highgui2413.dll.a -o loadimg, trying to compile statically.</p></li>
<li><p>Compiled with</p>

<p>c:/mingw/bin/g++.exe -Wall -I""C:/opencv/build/install/include"" -L""C:/opencv/build/install/x86/mingw/lib"" loadimg.cpp -lopencv_core2413 -lopencv_highgui2413 -o loadimg</p></li>
<li><p>Tried the dependency Walker, but got just some errors expected in using it in new SO's (windows 10), I found it in another thread here, but it gave me no clues.</p></li>
<li><p>Tried precompiled binaries of old versions of opencv. Same error.</p></li>
<li><p>Tried the mingw64, I can't even compile a hello world. Seems like it is full of bugs yet. But I think mingw32 is not the problem since I compiled other  libraries before in same way with the mingw32 (allegro5), and it worked. </p></li>
</ul>

<p>I searched a lot, and try a lot of things, including trying other sample codes provided by opencv docs. I can't install linux, or user another computer, so this is my only one option, and after build opencv dozen times, and after two weeks, I just can't solve the error by myself.</p>

<p>Any clues, or any more piece of information needed? Thanks in advance.</p>
",2016-07-19 14:22:59,2017-05-21 19:46:53,"Can't execute a simple program using opencv, error ""Can't find the entry point of the procedure""",<c++><opencv><64-bit><mingw><windows-10>,,,CC BY-SA 3.0,True,True,False,False,True
45158,38424225,2016-07-17 17:52:50,,"<p>I am trying to pipe opencv frames to ffmpeg using rawvideo format, which should accept the input as BGRBGRBGR... encoding the frame before piping is not an option.</p>

<pre><code>cv::Mat frame;
cv::VideoCapture cap(""cap.avi"");

while(1)
{
    cap &gt;&gt; frame;
    if(!frame.data) break;

    // some processing

    cv::Mat array = frame.reshape(0, 1); // to make continuous
    std::string output((char*) array.data, array.total() * array.elemSize());
    std::cout &lt;&lt; output;
}
</code></pre>

<p>with command</p>

<pre><code>cap.exe | ffplay -f rawvideo -pixel_format bgr24 -video_size 1920x1080 -framerate 10 -i -
</code></pre>

<p>gives <a href=""http://imgur.com/BoMuq2R"" rel=""nofollow"">this kind of</a> distorted result</p>

<p>I think problem is not related to ffmpeg/ffplay, but something is wrong with my frame to raw conversion</p>

<p>how to convert mat with 3 channels to rawvideo bgr24 format ?</p>
",2016-07-17 18:07:34,2016-07-17 18:07:34,Pipe opencv frames to ffmpeg,<c++><opencv><ffmpeg><pipe><mat>,,,CC BY-SA 3.0,True,True,False,False,True
45242,38681912,2016-07-31 07:51:50,,"<p>When following the <a href=""https://gist.github.com/ranveeraggarwal/f1499a586dabafb63392"" rel=""nofollow"">below tutorial</a>:</p>

<blockquote>
  <p>brew install python3 pip3 install numpy brew install cmake git clone
  --depth=1 <a href=""https://github.com/Itseez/opencv.git"" rel=""nofollow"">https://github.com/Itseez/opencv.git</a> cd opencv mkdir build cd build</p>
  
  <h1>note: in the next line, adjust paths to point to the correct python version cmake -DBUILD_opencv_python3=YES -DBUILD_opencv_python2=NO</h1>
  
  <p>-DINSTALL_PYTHON_EXAMPLES=YES -DPYTHON3_EXECUTABLE=/usr/local/bin/python3 -DPYTHON3_INCLUDE_DIR=/usr/local/Cellar/python3/3.5.0/Frameworks/Python.framework/Versions/3.5/include/python3.5m/
  -DPYTHON3_LIBRARY=/usr/local/Cellar/python3/3.5.0/Frameworks/Python.framework/Versions/3.5/lib/libpython3.5.dylib
  -DPYTHON3_NUMPY_INCLUDE_DIRS=/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/numpy/core/include/
  -DPYTHON3_PACKAGES_PATH=/Library/Frameworks/Python.framework/Versions/3.5/lib/python3.5/site-packages/
  .. make -j8 make install python3 -c ""import cv2;
  print(cv2.<strong>version</strong>)""</p>
</blockquote>

<p>I get this error for line 10 <code>$ make -j8</code>:</p>

<pre><code>[ 39%] Built target opencv_shape
In file included from /Users/mona/Downloads/opencv/modules/videoio/src/cap_ffmpeg.cpp:47:
In file included from /Users/mona/Downloads/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:65:
/Users/mona/Downloads/opencv/modules/videoio/src/ffmpeg_codecs.hpp:77:12: fatal error: 
      'libavformat/avformat.h' file not found
  #include &lt;libavformat/avformat.h&gt;
           ^
1 error generated.
make[2]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/src/cap_ffmpeg.cpp.o] Error 1
make[2]: *** Waiting for unfinished jobs....
[ 40%] Linking CXX shared library ../../lib/libopencv_photo.dylib
[ 40%] Built target opencv_photo
make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2
make: *** [all] Error 2
Monas-MacBook-Pro:build mona$ 
</code></pre>

<p>Why is this tutorial not passing on my OSX?</p>
",,2016-08-04 03:38:39,'libavformat/avformat.h' file not found #include <libavformat/avformat.h>,<python><macos><python-3.x><opencv><cmake>,,,CC BY-SA 3.0,True,False,False,False,True
45250,38256563,2016-07-07 22:58:00,,"<p>I would like to compile a C++ program that uses openCV statically, so that I can use it on other computers without having to install openCV.</p>

<p>I compiled openCV 2.4.5 with following flags in order to get static libraries and to install it besides my main installation which is version 3.1.</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/opt/openCV_2_4_5 -D WITH_FFMPEG=OFF -DBUILD_SHARED_LIBS=NO ..

ls /opt/openCV_2_4_5/lib
libopencv_calib3d.a     libopencv_flann.a    libopencv_legacy.a     libopencv_photo.a      libopencv_video.a
libopencv_contrib.a     libopencv_gpu.a      libopencv_ml.a         libopencv_stitching.a  libopencv_videostab.a
libopencv_core.a        libopencv_highgui.a  libopencv_nonfree.a    libopencv_superres.a   pkgconfig
libopencv_features2d.a  libopencv_imgproc.a  libopencv_objdetect.a  libopencv_ts.a         python2.7
</code></pre>

<p>After installing, I tried to compile a c++ program for face detection like this:</p>

<pre><code>g++ -std=c++11 -L/opt/openCV_2_4_5/lib -I/opt/openCV_2_4_5/include -o ex2 ex2.cpp -L. -lpthread -lz -lopencv_stitching -lopencv_superres -lopencv_videostab -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_ccalib -lopencv_dnn -lopencv_dpm -lopencv_fuzzy -lopencv_line_descriptor -lopencv_optflow -lopencv_plot -lopencv_reg -lopencv_saliency -lopencv_stereo -lopencv_structured_light -lopencv_rgbd -lopencv_surface_matching -lopencv_tracking -lopencv_datasets -lopencv_text -lopencv_face -lopencv_xfeatures2d -lopencv_shape -lopencv_video -lopencv_ximgproc -lopencv_calib3d -lopencv_features2d -lopencv_flann -lopencv_xobjdetect -lopencv_objdetect -lopencv_ml -lopencv_xphoto -lopencv_videoio -lopencv_imgcodecs -lopencv_photo -lopencv_imgproc -lopencv_core
</code></pre>

<p>From that I got the error: </p>

<pre><code>/tmp/cct4prBn.o: In function `main':
ex2.cpp:(.text+0x141): undefined reference to `cv::imread(std::string const&amp;, int)'
ex2.cpp:(.text+0x2bc): undefined reference to `cv::imread(std::string const&amp;, int)'
ex2.cpp:(.text+0x4f3): undefined reference to `cv::imwrite(std::string const&amp;, cv::_InputArray const&amp;, std::vector&lt;int, std::allocator&lt;int&gt; &gt; const&amp;)'
collect2: error: ld returned 1 exit status
make_2_4_5:9: recipe for target 'ex2' failed
make: *** [ex2] Error 1
</code></pre>

<p>I used the same library flags as my installation of OpenCV 3.1 has. I got them from:</p>

<pre><code>pkg-config --cflags --libs opencv
</code></pre>

<p>The -L and -I flags point to the openCV 2.4.5 installation in the /opt directory.</p>

<p>Why doesn't it compile? All OpenCV libraries are listed in the section where the static libraries should be.</p>
",,2018-09-13 10:28:20,Statically Link OpenCV,<c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
45276,38804931,2016-08-06 13:45:52,,"<p>I've been trying to trying to write MP4 video files using OpenCV, in python.</p>

<p>AVI creation works fine, both on linux and windows, when I use both:</p>

<pre><code>out = cv2.VideoWriter('x.avi', 0, 30, (640, 480))
</code></pre>

<p>and</p>

<pre><code>fourcc = cv2.VideoWriter_fourcc(*""XVID"")
out = cv2.VideoWriter('x.avi', fourcc, 30, (640, 480))
</code></pre>

<p>and even</p>

<pre><code>fourcc = cv2.VideoWriter_fourcc(*""XVID"")
out = cv2.VideoWriter('x', fourcc, 30, (640, 480))
</code></pre>

<p>.</p>

<p>When I try to save an MP4 however nothing ever saves - using:</p>

<pre><code>fourcc = cv2.VideoWriter_fourcc(*""H264"")
out = cv2.VideoWriter('x.mp4', fourcc, 30, (640, 480))
</code></pre>

<p>and </p>

<pre><code>fourcc = cv2.VideoWriter_fourcc(*""AVC1"")
out = cv2.VideoWriter('x.mp4', fourcc, 30, (640, 480))
</code></pre>

<p>No errors occur, just nothing saves.</p>

<p>I've tried everything over the past few days, doing everything to avoid creating the AVI and then converting it to MP4 using ffmpeg as I find that to be horrible practice.</p>
",,2017-03-07 20:11:15,OpenCV MP4 Creation,<python><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
45297,38846405,2016-08-09 09:04:04,,"<p>I am building a simple decoding application using FFMPEG API. I know there are solutions available in OpenCV but for specific reason I am refraining myself from using that. Since I am very new to FFMPEG (and to this community as well), I would like to know if there is any mistake that I might have done while building FFMPEG. </p>

<p><strong>Compiler</strong>: I am using gcc 5.3.0 for compilation and building.</p>

<p>Following are the steps that I followed: </p>

<ol>
<li><p>I have build FFMPEG library using following configuration:  </p>

<blockquote>
  <p>./configure --prefix=/home/dep/ffmpeg/install/ --pkg-config-flags=--static --enable-gpl --disable-yasm</p>
</blockquote></li>
<li><p>My compiling command is for the application: </p>

<blockquote>
  <p>g++ -std=c++11 -I/home/dep/ffmpeg/install/include/ Queue.cpp Image.cpp CaptureFFMPEGFrame.cpp Object.cpp main.cpp -o main  -L/home/dep/ffmpeg/install/lib -lavutil -lavcodec -lavformat -lavdevice -lavfilter -lswscale -lswresample -lpostproc -lpthread -lz -lrt -llzma -lbz2</p>
</blockquote></li>
</ol>

<p>The error I am facing is : </p>

<pre><code>CaptureFFMPEGFrame.cpp:203:169: error: ‘PIX_FMT_BGR24’ was not declared in this scope
     mpFrameSwsContext = sws_getContext(mpAVCodecContext-&gt;width, mpAVCodecContext-&gt;height, mpAVCodecContext-&gt;pix_fmt, mpAVCodecContext-&gt;width, mpAVCodecContext-&gt;height, PIX_FMT_BGR24, SWS_BICUBIC, NULL, NULL, NULL)
</code></pre>

<p><strong>My effort and understanding:</strong> </p>

<ol>
<li><p>From my understanding, libavutil/pixfmt.h contains pixel formats which I included along with other includes and the error persists. You can also see libraries I have included along with my application. </p></li>
<li><p>Since my program is cpp code, therefore my headers are already included using extern ""C"", i.e. <code>#include ""libavcodec/avcodec.h""</code>  </p></li>
</ol>

<p>Anything I might have missed?</p>

<p>Many thanks.</p>
",,2016-08-09 21:19:55,FFMPEG: ‘PIX_FMT_BGR24’ was not declared in this scope,<c++><c><opencv><gcc><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
45314,38767949,2016-08-04 12:54:57,,"<p>I am trying to build opencv 3.1 from source, so that I can use it with python while specifying the ""opencv_contrib"" package during the build process, which allows me to use SIFT and SURF functionalities.</p>

<p>I can't get make to generate the python bindings I need for python to be able to use the opencv wrap module.</p>

<p>This is my cmake log (I am using ccmake for options):</p>

<pre><code>lake@LAKE:~/opencv-3.1.0/build$ sudo cmake ../
sudo: unable to resolve host LAKE
-- Detected version of GNU GCC: 48 (408)
-- Could NOT find ZLIB (missing:  ZLIB_LIBRARY ZLIB_INCLUDE_DIR) (Required is at least version ""1.2.3"")
-- Could NOT find TIFF (missing:  TIFF_LIBRARY TIFF_INCLUDE_DIR)
-- Could NOT find JPEG (missing:  JPEG_LIBRARY JPEG_INCLUDE_DIR)
-- Could NOT find Jasper (missing:  JASPER_LIBRARIES JASPER_INCLUDE_DIR)
-- Could NOT find ZLIB (missing:  ZLIB_INCLUDE_DIR) (found version ""1.2.8"")
-- Could NOT find PNG (missing:  PNG_LIBRARY PNG_PNG_INCLUDE_DIR)
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - not found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- found IPP (ICV version): 9.0.1 [9.0.1]
-- at: /home/lake/opencv-3.1.0/3rdparty/ippicv/unpack/ippicv_lnx
-- Found PythonInterp: /usr/bin/python2.7 (found suitable version ""2.7.6"", minimum required is ""2.7"")
-- Could NOT find PythonLibs (missing:  PYTHON_INCLUDE_DIRS) (found suitable exact version ""2.7.6"")
-- Found PythonInterp: /usr/bin/python3.4 (found suitable version ""3.4.3"", minimum required is ""3.4"")
-- Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (Required is exact version ""3.4.3"")
Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
ImportError: No module named 'numpy'
-- Could NOT find JNI (missing:  JAVA_AWT_LIBRARY JAVA_JVM_LIBRARY JAVA_INCLUDE_PATH JAVA_INCLUDE_PATH2 JAVA_AWT_INCLUDE_PATH)
-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT MATLAB_ARCH MATLAB_BIN)
-- VTK is not found. Please set -DVTK_DIR in CMake to VTK build directory, or to VTK install subdirectory with VTKConfig.cmake file
-- Caffe:   NO
-- Protobuf:   NO
-- Glog:   NO
-- Could NOT find HDF5 (missing:  HDF5_LIBRARIES HDF5_INCLUDE_DIRS)
-- Module opencv_sfm disabled because the following dependencies are not found: Eigen Glog/Gflags
-- Tesseract:   NO
-- Could NOT find PROTOBUF (missing:  PROTOBUF_LIBRARY PROTOBUF_INCLUDE_DIR)
-- Build libprotobuf from sources:
--     libprotobuf not found into system
--     The protocol buffer compiler not found
-- Tesseract:   NO
--
-- General configuration for OpenCV 3.1.0 =====================================
--   Version control:               unknown
--
--   Platform:
--     Host:                        Linux 3.4.0+ x86_64
--     CMake:                       2.8.12.2
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               RELEASE
--
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.4)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):
--     Linker flags (Debug):
--     Precompiled headers:         YES
--     Extra dependencies:          dl m pthread rt
--     3rdparty dependencies:       zlib libjpeg libwebp libpng libtiff libjasper IlmImf libprotobuf
--
--   OpenCV modules:
--     To be built:                 core flann imgproc ml photo reg surface_matching video dnn fuzzy imgcodecs shape videoio highgui objdetect plot superres ts xobjdetect xphoto bgsegm bioinspired dpm face features2d line_descriptor saliency text calib3d ccalib datasets rgbd stereo structured_light tracking videostab xfeatures2d ximgproc aruco optflow stitching
--     Disabled:                    world contrib_world
--     Disabled by dependency:      -
--     Unavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python2 python3 viz cvv hdf matlab sfm
--
--   GUI:
--     QT:                          NO
--     GTK+:                        NO
--     GThread :                    NO
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
--
--   Media I/O:
--     ZLib:                        zlib (ver 1.2.8)
--     JPEG:                        libjpeg (ver 90)
--     WEBP:                        build (ver 0.3.1)
--     PNG:                         build (ver 1.6.19)
--     TIFF:                        build (ver 42 - 4.0.2)
--     JPEG 2000:                   build (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--     GDAL:                        NO
--
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  NO
--     FFMPEG:                      NO
--       codec:                     NO
--       format:                    NO
--       util:                      NO
--       swscale:                   NO
--       resample:                  NO
--       gentoo-style:              NO
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    NO/YES
--     XIMEA:                       NO
--     Xine:                        NO
--     gPhoto2:                     NO
--
--   Parallel framework:            pthreads
--
--   Other third-party libraries:
--     Use IPP:                     9.0.1 [9.0.1]
--          at:                     /home/lake/opencv-3.1.0/3rdparty/ippicv/unpack/ippicv_lnx
--     Use IPP Async:               NO
--     Use VA:                      NO
--     Use Intel VA-API/OpenCL:     NO
--     Use Eigen:                   NO
--     Use Cuda:                    NO
--     Use OpenCL:                  YES
--     Use custom HAL:              NO
--
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/lake/opencv-3.1.0/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
--
--   Python 2:
--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.6)
--     Libraries:                   NO
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.11.1)
--     packages path:               /usr/lib/python2.7/dist-packages
--
--   Python 3:
--     Interpreter:                 (ver 3.4.3)
--
--   Python (for build):            /usr/bin/python2.7
--
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java wrappers:               NO
--     Java tests:                  NO
--
--   Matlab:                        Matlab not found or implicitly disabled
--
--   Tests and samples:
--     Tests:                       YES
--     Performance tests:           YES
--     C/C++ Examples:              YES
--
--   Install path:                  /usr/local
--
--   cvconfig.h is in:              /home/lake/opencv-3.1.0/build
-- -----------------------------------------------------------------
--
-- Configuring done
-- Generating done
-- Build files have been written to: /home/lake/opencv-3.1.0/build
</code></pre>

<p>The source correctly compiles and installs, but there are no .py files in the build folder what-so-ever.</p>

<p>What am I missing?</p>
",,2016-08-04 12:54:57,Building python2.7 bindings for openCV 3.1,<python><opencv><opencv3.1>,,,CC BY-SA 3.0,True,True,False,False,True
45329,38808298,2016-08-06 20:08:05,,"<p>I'm developing an application which requests snapshots to DVR and IP Cameras. The device I'm working on just offer RTSP requests to do so. Then I implemented the necessary RTSP methods to start receiving the stream packets and I started receiving then via UDP connection established. My doubt is, how can I save the received data to a jpeg file? Where's the begging and end of the image bytes received?</p>

<p>I searched a lot libraries which implement this type of service in Java, like Xuggler ( which it's maintained no more ), javacpp-presets - has ffmpeg and opencv libraries included - I had some environment problems with it. If someone know an easy and good one which saves snapshots from the streams, let me know.</p>

<p>My code:</p>

<pre><code>final long timeout = System.currentTimeMillis() + 3000;

byte[] fullImage = new byte[ 1024 * 1024 ];
DatagramSocket udpSocket = new DatagramSocket( 8000 );
int lastByte = 0;

// Skip first 2 packets because I think they are HEADERS
// Since I don't know what they mean, I just print then in hexa
for( int i = 0; i &lt; 2; i++ ){

    byte[] buffer = new byte[ 1024 ];
    DatagramPacket dataPacket = new DatagramPacket( buffer, buffer.length );
    udpSocket.receive( dataPacket );

    int dataLenght = dataPacket.getLength();
    buffer = Arrays.copyOf( buffer, dataLenght );

    System.out.println( ""RECEIVED["" + DatatypeConverter.printHexBinary( buffer ) + "" L: "" + dataLenght );

}

do{

    byte[] buffer = new byte[ 1024 ];
    DatagramPacket dataPacket = new DatagramPacket( fullImage, fullImage.length );
    udpSocket.receive( dataPacket );

    System.out.println( ""RECEIVED: "" + new String( fullImage ) );

    for( int i = 0; i &lt; buffer.length; i++ ){
        fullImage[ i + lastByte ] = buffer[ i ];
        lastByte ++;

    }

} while( System.currentTimeMillis() &lt; timeout );
// I know this timeout is wrong, I should stop after getting full image bytes
</code></pre>

<p>The output:</p>

<p>RECEIVED: 80E0000100004650000000006742E01FDA014016C4 L: 21
RECEIVED: 80E00002000046500000000068CE30A480 L: 17
RECEIVED: Tons of data from the streaming...
RECEIVED: Tons of data from the streaming...
RECEIVED: Tons of data from the streaming...
[...]</p>

<p>As you might suppose, the image I'm saving into a file is not readable because I'm doing it wrong. <em>I think</em> the header provide me some info about the next packets the server will sent me telling the start and the end of the image from the streaming. But I don't understood them. Someone know how to solve it? Any tips are welcome!</p>
",,2016-08-09 13:17:06,Java - RTSP save snapshot from Stream Packets,<java><opencv><ffmpeg><rtsp>,,,CC BY-SA 3.0,True,False,False,False,True
45367,38652829,2016-07-29 07:23:04,,"<p>I am building <code>opencv-3.1.0</code> and I want to use <code>ffmpeg</code>, which is installed in custom path <code>/media/sdcard/usr/lib</code>, <code>/media/sdcard/usr/include</code>.
Normally, linker gives me an error:</p>

<pre><code>/usr/lib/gcc/i586-poky-linux/4.9.1/../../../../i586-poky-linux/bin/ld: cannot find -lavcodec 
</code></pre>

<p>So I gave cmake some additional flags: <code>-DCMAKE_SHARED_LINKER_FLAGS=""--library-path /media/sdcard/usr/lib"", DCMAKE_INCLUDE_PATH=/media/sdcard/usr/include</code>.
Include seems not to work at all, but as for linker flags, <code>cmake</code> gave me the following output:</p>

<pre><code>Linker flags (Release):      --library-path /media/sdcard/usr/lib
Linker flags (Debug):        --library-path /media/sdcard/usr/lib
</code></pre>

<p>But when I tried to run <code>make</code>, I got an error:
<code>c++: error: unrecognized command line option '--library-path'</code></p>

<p>My ld knows '--library-path' flag and finds necessary libraries, e.g. if I run </p>

<pre><code>ld -lavcodec --library-path /media/sdcard/usr/lib --verbose
</code></pre>

<p>it gives me </p>

<pre><code>attempt to open /media/sdcard/usr/lib/libavcodec.a succeeded
</code></pre>

<p>I may be missing some ground understanding of the whole process.</p>
",2016-07-29 10:57:56,2016-07-29 10:57:56,How to add linker flags to cmake properly?,<opencv><makefile><ffmpeg><cmake><linker-flags>,,,CC BY-SA 3.0,True,False,False,False,True
45380,38731358,2016-08-02 22:16:54,,"<p>I am basically trying to install OpenCV3 with Python3.5. I have successfully gone through all the steps in <a href=""http://www.pyimagesearch.com/2015/06/29/install-opencv-3-0-and-python-3-4-on-osx/"" rel=""nofollow"">this tutorial</a> for <code>git checkout 3.1.0</code> of opencv. However when I enter this command:</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE \
    -D CMAKE_INSTALL_PREFIX=/usr/local \
    -D PYTHON3_PACKAGES_PATH=~/.virtualenvs/cv3/lib/python3.5/site-packages \
    -D PYTHON3_LIBRARY=/usr/local/Cellar/python3/3.5.2_1/Frameworks/Python.framework/Versions/3.5/lib/libpython3.5.dylib \
    -D PYTHON3_INCLUDE_DIR=/usr/local/Cellar/python3/3.5.2_1/Frameworks/Python.framework/Versions/3.5/include/python3.5m/ \
    -D INSTALL_C_EXAMPLES=ON \
    -D INSTALL_PYTHON_EXAMPLES=ON \
    -D BUILD_EXAMPLES=ON \
    -D BUILD_opencv_python3=ON \
    -D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib/modules ..
</code></pre>

<p>I get this error:</p>

<pre><code>...etc...
-- Checking for module 'gstreamer-base-1.0'
--   No package 'gstreamer-base-1.0' found
-- Checking for module 'gstreamer-video-1.0'
--   No package 'gstreamer-video-1.0' found
-- Checking for module 'gstreamer-app-1.0'
--   No package 'gstreamer-app-1.0' found
-- Checking for module 'gstreamer-riff-1.0'
--   No package 'gstreamer-riff-1.0' found
-- Checking for module 'gstreamer-pbutils-1.0'
--   No package 'gstreamer-pbutils-1.0' found
-- Checking for module 'gstreamer-base-0.10'
--   No package 'gstreamer-base-0.10' found
-- Checking for module 'gstreamer-video-0.10'
--   No package 'gstreamer-video-0.10' found
-- Checking for module 'gstreamer-app-0.10'
--   No package 'gstreamer-app-0.10' found
-- Checking for module 'gstreamer-riff-0.10'
--   No package 'gstreamer-riff-0.10' found
-- Checking for module 'gstreamer-pbutils-0.10'
--   No package 'gstreamer-pbutils-0.10' found
-- Checking for module 'libdc1394-2'
--   No package 'libdc1394-2' found
-- Checking for module 'libdc1394'
--   No package 'libdc1394' found
-- Checking for module 'libv4l1'
--   No package 'libv4l1' found
-- Checking for module 'libv4l2'
--   No package 'libv4l2' found
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - not found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- Checking for module 'libavcodec'
--   Found libavcodec, version 57.48.101
-- Checking for module 'libavformat'
--   Found libavformat, version 57.41.100
-- Checking for module 'libavutil'
--   Found libavutil, version 55.28.100
-- Checking for module 'libswscale'
--   Found libswscale, version 4.1.100
-- Checking for module 'libavresample'
--   Found libavresample, version 3.0.0
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Checking for module 'libgphoto2'
--   No package 'libgphoto2' found
-- ICV: Removing previous unpacked package: /Users/mona/computer_vision/Face_Recognition/opencv/3rdparty/ippicv/unpack
-- ICV: Unpacking ippicv_macosx_20151201.tgz to /Users/mona/computer_vision/Face_Recognition/opencv/3rdparty/ippicv/unpack...
-- ICV: Package successfully downloaded
-- found IPP (ICV version): 9.0.1 [9.0.1]
-- at: /Users/mona/computer_vision/Face_Recognition/opencv/3rdparty/ippicv/unpack/ippicv_osx
-- Found Doxygen: /usr/local/bin/doxygen (found version ""1.8.11"")
-- To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR=&lt;filepath&gt; option to cmake
-- Found PythonInterp: /usr/local/bin/python2.7 (found suitable version ""2.7.12"", minimum required is ""2.7"")
-- Could NOT find PythonLibs: Found unsuitable version ""2.7.10"", but required is exact version ""2.7.12"" (found /usr/lib/libpython2.7.dylib)
-- Found PythonInterp: /usr/local/bin/python3.4 (found suitable version ""3.4.1"", minimum required is ""3.4"")
-- Could NOT find PythonLibs: Found unsuitable version ""3.5.2"", but required is exact version ""3.4.1"" (found /usr/local/Cellar/python3/3.5.2_1/Frameworks/Python.framework/Versions/3.5/lib/libpython3.5.dylib)
-- Found apache ant 1.9.7: /usr/local/bin/ant
-- Found JNI: /System/Library/Frameworks/JavaVM.framework
-- Could NOT find Matlab (missing:  MATLAB_MEX_SCRIPT MATLAB_INCLUDE_DIRS MATLAB_ROOT_DIR MATLAB_LIBRARIES MATLAB_LIBRARY_DIRS MATLAB_MEXEXT MATLAB_ARCH MATLAB_BIN)
CMake Error at /usr/local/Cellar/vtk/7.0.0_1/lib/cmake/vtk-7.0/vtkModuleAPI.cmake:120 (message):
  Requested modules not available:

    vtkRenderingOpenGL
Call Stack (most recent call first):
  /usr/local/lib/cmake/vtk-7.0/VTKConfig.cmake:88 (vtk_module_config)
  cmake/OpenCVDetectVTK.cmake:6 (find_package)
  CMakeLists.txt:597 (include)
</code></pre>

<p>I have tried it with both <code>ON</code> and <code>OFF</code> for <code>-D INSTALL_C_EXAMPLES=ON \</code> line still no success. Any feedback is really appreciated!</p>

<p>This is the log for flag set to OFF: <a href=""http://pastebin.com/NF1bbpBC"" rel=""nofollow"">http://pastebin.com/NF1bbpBC</a></p>
",,2017-06-19 16:33:14,Requested modules not available: vtkRenderingOpenGL-cmake/OpenCVDetectVTK.cmake:6 (find_package),<python><macos><opencv><cmake><opencv3.0>,,,CC BY-SA 3.0,True,True,False,False,True
45381,38731693,2016-08-02 22:51:15,,"<p>I am trying to read raw avi video of size 2448x2050. Every time I try to read a frame, the program crashes with a seg fault. The same program works properly for smaller sized videos. </p>

<p>Here is a sample program:</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;opencv2/opencv.hpp&gt;

int main( int argc, char** argv )
{
    cv::VideoCapture cap(argv[1]);
    if(!cap.isOpened())
        return -1;
    cv::Mat frames;
    cv::namedWindow(""Window"", CV_WINDOW_NORMAL);

    for(;;)
    {
        // error here
        cap &gt;&gt; frames;
        // ........
        cv::imshow(""Window"", frames);
        cv::waitKey(33);
    }
    return 0;
}
</code></pre>

<p>Here is the output for valgrind:</p>

<pre><code>==30166== Invalid read of size 1
==30166==    at 0x9ECD550: sws_convertPalette8ToPacked24 (in /usr/lib/x86_64-linux-gnu/libswscale.so.2.1.1)
==30166==    by 0x9ED13AA: ??? (in /usr/lib/x86_64-linux-gnu/libswscale.so.2.1.1)
==30166==    by 0x9ED385A: sws_scale (in /usr/lib/x86_64-linux-gnu/libswscale.so.2.1.1)
==30166==    by 0x4E5066D: CvCapture_FFMPEG::retrieveFrame(int, unsigned char**, int*, int*, int*, int*) (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E5071A: cvRetrieveFrame_FFMPEG (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4FB88: CvCapture_FFMPEG_proxy::retrieveFrame(int) (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4E4BA: cv::VideoCapture::retrieve(cv::Mat&amp;, int) (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4E2A6: cv::VideoCapture::read(cv::Mat&amp;) (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4E209: cv::VideoCapture::operator&gt;&gt;(cv::Mat&amp;) (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x401330: main (in /home/rumman/temp/Video)
==30166==  Address 0x18897a10 is 5,015,952 bytes inside a block of size 5,018,408 free'd
==30166==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==30166==    by 0x8CD0113: av_destruct_packet (in /usr/lib/x86_64-linux-gnu/libavcodec.so.54.35.0)
==30166==    by 0x8CD04B3: av_free_packet (in /usr/lib/x86_64-linux-gnu/libavcodec.so.54.35.0)
==30166==    by 0x4E50BB8: CvCapture_FFMPEG::grabFrame() (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E50C38: cvGrabFrame_FFMPEG (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4F934: CvCapture_FFMPEG_proxy::grabFrame() (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4E450: cvGrabFrame (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4E46C: cv::VideoCapture::grab() (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4E241: cv::VideoCapture::read(cv::Mat&amp;) (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x4E4E209: cv::VideoCapture::operator&gt;&gt;(cv::Mat&amp;) (in /usr/lib/x86_64-linux-gnu/libopencv_highgui.so.2.4.8)
==30166==    by 0x401330: main (in /home/rumman/temp/Video)
</code></pre>
",2016-08-02 22:57:46,2016-08-09 20:36:48,OpenCV VideoCapture Crashes on Large Video Size,<c++><opencv><video-capture>,,,CC BY-SA 3.0,True,True,False,False,True
45417,38731972,2016-08-02 23:22:59,,"<p>Why there's no python3.5 in the following path? I have installed OpenCV3 for Python3 using homebrew. You can find the complete homebrew gist for this <a href=""https://gist.github.com/monajalal/fae307db63c777fefe3ac496ec328465"" rel=""nofollow"">here</a>.</p>

<p>According to this tutorial I should have it after following the steps (so bad I don't know the language the tutorial is written in):
<a href=""http://qiita.com/HirofumiYashima/items/eb697b1e359586b538e6"" rel=""nofollow"">http://qiita.com/HirofumiYashima/items/eb697b1e359586b538e6</a></p>

<pre><code>ls /usr/local/Cellar/opencv3/3.1.0_3/lib/python2.7/site-packages/cv2.so
</code></pre>

<p>I expect to have the following:</p>

<pre><code>ls /usr/local/Cellar/opencv3/3.1.0_3/lib/python3.5/site-packages/cv2.cpython-35m-darwin.so 
</code></pre>

<p>Any insight would be super useful!</p>

<pre><code>bash-4.3$ python
Python 3.5.2 (default, Jul 28 2016, 21:28:07)
[GCC 4.2.1 Compatible Apple LLVM 7.0.2 (clang-700.1.81)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
</code></pre>

<p>and </p>

<pre><code>bash-4.3$ brew info opencv3 | grep python3
  Built from source on 2016-07-30 at 22:49:10 with: --with-python3 --with-contrib
--with-python3
    Build with python3 support
bash-4.3$ brew install opencv3 --with-python3
Warning: homebrew/science/opencv3-3.1.0_3 already installed

bash-4.3$ brew install opencv3
Warning: homebrew/science/opencv3-3.1.0_3 already installed

bash-4.3$ pyenv versions
* system (set by /Users/mona/.pyenv/cache/.python-version)
  3.5.0
  3.5.2
</code></pre>

<p>Just a little extra information:</p>

<pre><code>bash-4.3$ uname -a
Darwin Monas-MacBook-Pro.local 15.6.0 Darwin Kernel Version 15.6.0: Thu Jun 23 18:25:34 PDT 2016; root:xnu-3248.60.10~1/RELEASE_X86_64 x86_64
</code></pre>

<p>Thanks a lot!</p>

<hr>

<p>My bash_profile:</p>

<pre><code> ~/.bash_profile
  1 export PATH=$PATH:/usr/local/go/bin
  2
  3 [[ -s ""$HOME/.profile"" ]] &amp;&amp; source ""$HOME/.profile"" # Load the default .profile
  4
  5 [[ -s ""$HOME/.rvm/scripts/rvm"" ]] &amp;&amp; source ""$HOME/.rvm/scripts/rvm"" # Load RVM into a shell session *as a function*
  6
  7 # Setting PATH for Python 3.4
  8 # The orginal version is saved in .bash_profile.pysave
  9 PATH=""/Library/Frameworks/Python.framework/Versions/3.4/bin:${PATH}""
 10 export PATH
 11
 12 # added by Anaconda2 2.4.1 installer
 13 export PATH=""/Users/mona/anaconda/bin:$PATH""
 14
 15 compresspdf() {
 16       gs -sDEVICE=pdfwrite -dNOPAUSE -dQUIET -dBATCH -dPDFSETTINGS=/${3:-""screen""} -dCompatibilityLevel=1.4 -sOutputFile=$2 $1
 17     }
 18
 19
 20 export PATH=""/usr/local/sbin:$PATH""
 21 export PATH=/usr/local/bin:$PATH
 22 export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python3
 23 source /usr/local/bin/virtualenvwrapper.sh
 24 export PYENV_ROOT=""$HOME/.pyenv""
 25 export PATH=""$PYENV_ROOT/bin:$PATH""
 26 export PATH=""~/.pyenv/bin:$PATH""
 27 eval ""$(pyenv init -)""
 28 eval ""$(pyenv virtualenv-init -)""
</code></pre>

<p>UPDATE: I installed opencv3 and installed it again with python3. However as you see only Python2.7 shows in the installed lib:</p>

<pre><code>bash-4.3$ brew install opencv3 --with-python3
==&gt; Installing opencv3 from homebrew/science
==&gt; Downloading https://github.com/Itseez/opencv/archive/3.1.0.tar.gz
==&gt; Downloading from https://codeload.github.com/opencv/opencv/tar.gz/3.1.0
######################################################################## 100.0%
==&gt; Downloading https://github.com/Itseez/opencv/commit/a2bda999211e8be9fbc5d40038fdfc9399de31fc.diff
==&gt; Downloading from https://github.com/opencv/opencv/commit/a2bda999211e8be9fbc5d40038fdfc9399de31fc.diff
######################################################################## 100.0%
==&gt; Downloading https://github.com/Itseez/opencv/commit/c7bdbef5042dadfe032dfb5d80f9b90bec830371.diff
==&gt; Downloading from https://github.com/opencv/opencv/commit/c7bdbef5042dadfe032dfb5d80f9b90bec830371.diff
######################################################################## 100.0%
==&gt; Downloading https://github.com/Itseez/opencv/commit/cdb9c60dcb65e04e7c0bd6bef9b86841191c785a.diff
==&gt; Downloading from https://github.com/opencv/opencv/commit/cdb9c60dcb65e04e7c0bd6bef9b86841191c785a.diff
######################################################################## 100.0%
==&gt; Patching
==&gt; Applying a2bda999211e8be9fbc5d40038fdfc9399de31fc.diff
patching file modules/videoio/src/cap_qtkit.mm
==&gt; Applying c7bdbef5042dadfe032dfb5d80f9b90bec830371.diff
patching file modules/core/include/opencv2/core/opencl/runtime/autogenerated/opencl_gl.hpp
Hunk #1 succeeded at 45 (offset 4 lines).
Hunk #2 succeeded at 58 (offset 4 lines).
patching file modules/core/include/opencv2/core/opencl/runtime/autogenerated/opencl_gl_wrappers.hpp
patching file modules/core/src/opencl/runtime/autogenerated/opencl_gl_impl.hpp
patching file modules/core/src/opencl/runtime/generator/common.py
patching file modules/core/src/opencl/runtime/generator/template/opencl_gl.hpp.in
Hunk #1 succeeded at 12 (offset 4 lines).
patching file modules/core/src/opencl/runtime/generator/template/opencl_gl_impl.hpp.in
patching file modules/core/src/opencl/runtime/generator/template/opencl_gl_wrappers.hpp.in
patching file modules/core/src/opencl/runtime/opencl_core.cpp
Hunk #1 succeeded at 283 (offset -3 lines).
Hunk #2 succeeded at 305 (offset -3 lines).
patching file modules/core/src/opengl.cpp
==&gt; Applying cdb9c60dcb65e04e7c0bd6bef9b86841191c785a.diff
patching file samples/gpu/CMakeLists.txt
==&gt; Downloading https://raw.githubusercontent.com/Itseez/opencv_3rdparty/81a676001ca8075ada498583e4166079e5744668/ippicv/ippicv_macosx_20151201.tgz
######################################################################## 100.0%
==&gt; cmake .. -DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG -DCMAKE_INSTALL_PREFIX=/usr/local/Cellar/opencv3/3.1.0_3 -DCMAKE_BUILD_TYPE=Release -D
==&gt; make
==&gt; make install
==&gt; Caveats
This formula is keg-only, which means it was not symlinked into /usr/local.

opencv3 and opencv install many of the same files.

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/opencv3/lib
    CPPFLAGS: -I/usr/local/opt/opencv3/include


If you need Python to find bindings for this keg-only formula, run:
  echo /usr/local/opt/opencv3/lib/python2.7/site-packages &gt;&gt; /usr/local/lib/python2.7/site-packages/opencv3.pth
==&gt; Summary
🍺  /usr/local/Cellar/opencv3/3.1.0_3: 281 files, 119M, built in 6 minutes 12 seconds
</code></pre>

<p>and I have:</p>

<pre><code>bash-4.3$ ls /usr/local/Cellar/opencv3/3.1.0_3/lib/
libopencv_calib3d.3.1.0.dylib       libopencv_highgui.3.1.dylib     libopencv_objdetect.dylib       libopencv_video.3.1.0.dylib
libopencv_calib3d.3.1.dylib     libopencv_highgui.dylib         libopencv_photo.3.1.0.dylib     libopencv_video.3.1.dylib
libopencv_calib3d.dylib         libopencv_imgcodecs.3.1.0.dylib     libopencv_photo.3.1.dylib       libopencv_video.dylib
libopencv_core.3.1.0.dylib      libopencv_imgcodecs.3.1.dylib       libopencv_photo.dylib           libopencv_videoio.3.1.0.dylib
libopencv_core.3.1.dylib        libopencv_imgcodecs.dylib       libopencv_shape.3.1.0.dylib     libopencv_videoio.3.1.dylib
libopencv_core.dylib            libopencv_imgproc.3.1.0.dylib       libopencv_shape.3.1.dylib       libopencv_videoio.dylib
libopencv_features2d.3.1.0.dylib    libopencv_imgproc.3.1.dylib     libopencv_shape.dylib           libopencv_videostab.3.1.0.dylib
libopencv_features2d.3.1.dylib      libopencv_imgproc.dylib         libopencv_stitching.3.1.0.dylib     libopencv_videostab.3.1.dylib
libopencv_features2d.dylib      libopencv_ml.3.1.0.dylib        libopencv_stitching.3.1.dylib       libopencv_videostab.dylib
libopencv_flann.3.1.0.dylib     libopencv_ml.3.1.dylib          libopencv_stitching.dylib       pkgconfig
libopencv_flann.3.1.dylib       libopencv_ml.dylib          libopencv_superres.3.1.0.dylib      python2.7
libopencv_flann.dylib           libopencv_objdetect.3.1.0.dylib     libopencv_superres.3.1.dylib
libopencv_highgui.3.1.0.dylib       libopencv_objdetect.3.1.dylib       libopencv_superres.dylib
</code></pre>

<p>Here's what brew info tells about opencv3:</p>

<pre><code>bash-4.3$ brew info opencv3
homebrew/science/opencv3: stable 3.1.0 (bottled), HEAD [keg-only]
Open source computer vision library, version 3
http://opencv.org/
/usr/local/Cellar/opencv3/3.1.0_3 (281 files, 119M)
  Built from source on 2016-08-02 at 18:54:26 with: --with-python3
From: https://github.com/Homebrew/homebrew-science/blob/master/opencv3.rb
==&gt; Dependencies
Build: cmake ✔, pkg-config ✔
Required: jpeg ✔, libpng ✔, libtiff ✔
Recommended: eigen ✔, openexr ✔, homebrew/python/numpy ✔
Optional: ffmpeg ✔, gphoto2 ✘, gstreamer ✘, jasper ✘, libdc1394 ✘, openni ✘, openni2 ✘, qt ✔, qt5 ✘, tbb ✔, vtk ✔
==&gt; Options
--32-bit
    Build 32-bit only
--c++11
    Build using C++11 mode
--with-contrib
    Build ""extra"" contributed modules
--with-cuda
    Build with CUDA v7.0+ support
--with-examples
    Install C and python examples (sources)
--with-ffmpeg
    Build with ffmpeg support
--with-gphoto2
    Build with gphoto2 support
--with-gstreamer
    Build with gstreamer support
--with-jasper
    Build with jasper support
--with-java
    Build with Java support
--with-libdc1394
    Build with libdc1394 support
--with-opengl
    Build with OpenGL support (must use --with-qt5)
--with-openni
    Build with openni support
--with-openni2
    Build with openni2 support
--with-python3
    Build with python3 support
--with-qt
    Build the Qt4 backend to HighGUI
--with-qt5
    Build the Qt5 backend to HighGUI
--with-quicktime
    Use QuickTime for Video I/O instead of QTKit
--with-static
    Build static libraries
--with-tbb
    Enable parallel code in OpenCV using Intel TBB
--with-vtk
    Build with vtk support
--without-eigen
    Build without eigen support
--without-numpy
    Use a numpy you've installed yourself instead of a Homebrew-packaged numpy
--without-opencl
    Disable GPU code in OpenCV using OpenCL
--without-openexr
    Build without openexr support
--without-python
    Build without Python support
--without-test
    Build without accuracy &amp; performance tests
--HEAD
    Install HEAD version
==&gt; Caveats
This formula is keg-only, which means it was not symlinked into /usr/local.

opencv3 and opencv install many of the same files.

Generally there are no consequences of this for you. If you build your
own software and it requires this formula, you'll need to add to your
build variables:

    LDFLAGS:  -L/usr/local/opt/opencv3/lib
    CPPFLAGS: -I/usr/local/opt/opencv3/include
</code></pre>
",2016-08-03 00:25:35,2016-08-03 00:25:35,Python3.5 is not in the /usr/local/Cellar/opencv3/3.1.0_3/lib path as expected,<python><python-3.x><opencv><opencv3.0><pyenv>,,,CC BY-SA 3.0,True,False,False,False,True
45419,38733047,2016-08-03 01:48:08,,"<p>I was trying out the example on <a href=""http://docs.opencv.org/3.1.0/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56"" rel=""nofollow"" title=""OpenCV documentation"">OpenCV Documentation</a> on imwrite, and I seem to have sporadic problems with it. The code below runs most of the time, but every now and then it fails with the exception message:</p>

<blockquote>
  <p>Access violation reading location 0x010B3000.</p>
</blockquote>

<pre><code>#include ""stdafx.h""
#include &lt;opencv2/opencv.hpp&gt;
using namespace cv;
using namespace std;
void createAlphaMat(Mat &amp;mat)
{
    CV_Assert(mat.channels() == 4);
    for (int i = 0; i &lt; mat.rows; ++i) {
        for (int j = 0; j &lt; mat.cols; ++j) {
            Vec4b&amp; bgra = mat.at&lt;Vec4b&gt;(i, j);
            bgra[0] = UCHAR_MAX; // Blue
            bgra[1] = saturate_cast&lt;uchar&gt;((float (mat.cols - j)) / ((float)mat.cols) * UCHAR_MAX); // Green
            bgra[2] = saturate_cast&lt;uchar&gt;((float (mat.rows - i)) / ((float)mat.rows) * UCHAR_MAX); // Red
            bgra[3] = saturate_cast&lt;uchar&gt;(0.5 * (bgra[1] + bgra[2])); // Alpha
        }
    }
}
int main(int argv, char **argc)
{
    std::cout &lt;&lt; cv::getBuildInformation().c_str() &lt;&lt; std::endl; 
    // Create mat with alpha channel
    Mat mat(480, 640, CV_8UC4);
    createAlphaMat(mat);
    vector&lt;int&gt; compression_params;
    compression_params.push_back(IMWRITE_PNG_COMPRESSION);
    compression_params.push_back(9);
    try {
        imwrite(""alpha.png"", mat, compression_params);
    }
    catch (cv::Exception&amp; ex) {
        fprintf(stderr, ""Exception converting image to PNG format: %s\n"", ex.what());
        return 1;
    }
    fprintf(stdout, ""Saved PNG file with alpha data.\n"");
    return 0;
}
</code></pre>

<p>When I look into the call stack of imwrite, it seems that the params variable passed from my main function is corrupted (params.size() becomes 1073741810)</p>

<p>Has anyone experienced the same issue? </p>

<p>Here is my build information:</p>

<pre><code>General configuration for OpenCV 3.1.0 
=====================================
  Version control:               unknown

  Platform:
    Host:                        Windows 10.0.10586 AMD64
    CMake:                       3.5.0-rc3
    CMake generator:             Visual Studio 14 2015
    CMake build tool:            C:/Program Files (x86)/MSBuild/14.0/bin/MSBuild.exe
    MSVC:                        1900

  C/C++:
    Built as dynamic libs?:      YES
    C++ Compiler:                C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/cl.exe  (ver 19.0.23918.0)
    C++ flags (Release):         /DWIN32 /D_WINDOWS /W4 /GR /EHa  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /wd4324 /wd4275 /wd4589 /MP4  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C++ flags (Debug):           /DWIN32 /D_WINDOWS /W4 /GR /EHa  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast  /wd4251 /wd4324 /wd4275 /wd4589 /MP4  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1
    C Compiler:                  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/cl.exe
    C flags (Release):           /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP4  /MD /O2 /Ob2 /D NDEBUG  /Zi
    C flags (Debug):             /DWIN32 /D_WINDOWS /W3  /D _CRT_SECURE_NO_DEPRECATE /D _CRT_NONSTDC_NO_DEPRECATE /D _SCL_SECURE_NO_WARNINGS /Gy /bigobj /arch:SSE2 /Oi /fp:fast    /MP4  /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1
    Linker flags (Release):      /machine:X86  /INCREMENTAL:NO  /debug
    Linker flags (Debug):        /machine:X86  /debug /INCREMENTAL
    Precompiled headers:         YES
    Extra dependencies:          comctl32 gdi32 ole32 setupapi ws2_32 vfw32
    3rdparty dependencies:       zlib libjpeg libwebp libpng libtiff libjasper IlmImf

  OpenCV modules:
    To be built:                 core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab
    Disabled:                    world
    Disabled by dependency:      -
    Unavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python2 python3 viz

  Windows RT support:            NO

  GUI:
    QT:                          NO
    Win32 UI:                    YES
    OpenGL support:              NO
    VTK support:                 NO

  Media I/O:
    ZLib:                        build (ver 1.2.8)
    JPEG:                        build (ver 90)
    WEBP:                        build (ver 0.3.1)
    PNG:                         build (ver 1.6.19)
    TIFF:                        build (ver 42 - 4.0.2)
    JPEG 2000:                   build (ver 1.900.1)
    OpenEXR:                     build (ver 1.7.1)
    GDAL:                        NO

  Video I/O:
    Video for Windows:           YES
    DC1394 1.x:                  NO
    DC1394 2.x:                  NO
    FFMPEG:                      YES (prebuilt binaries)
      codec:                     YES (ver 56.41.100)
      format:                    YES (ver 56.36.101)
      util:                      YES (ver 54.27.100)
      swscale:                   YES (ver 3.1.101)
      resample:                  NO
      gentoo-style:              YES
    GStreamer:                   NO
    OpenNI:                      NO
    OpenNI PrimeSensor Modules:  NO
    OpenNI2:                     NO
    PvAPI:                       NO
    GigEVisionSDK:               NO
    DirectShow:                  YES
    Media Foundation:            NO
    XIMEA:                       NO
    Intel PerC:                  NO

  Parallel framework:            Concurrency

  Other third-party libraries:
    Use IPP:                     9.0.1 [9.0.1]
         at:                     E:/Dev/opencv/sources/3rdparty/ippicv/unpack/ippicv_win
    Use IPP Async:               NO
    Use Eigen:                   NO
    Use Cuda:                    NO
    Use OpenCL:                  YES
    Use custom HAL:              NO

  OpenCL:
    Version:                     dynamic
    Include path:                E:/Dev/opencv/sources/3rdparty/include/opencl/1.2
    Use AMDFFT:                  NO
    Use AMDBLAS:                 NO

  Python 2:
    Interpreter:                 NO

  Python 3:
    Interpreter:                 C:/Python34/python.exe (ver 3.4.3)

  Python (for build):            C:/Python34/python.exe

  Java:
    ant:                         NO
    JNI:                         NO
    Java wrappers:               NO
    Java tests:                  NO

  Matlab:
    mex:                         C:/Program Files/MATLAB/R2016a/bin/mex.bat
    Compiler/generator:          Not working (bindings will not be generated)

  Documentation:
    Doxygen:                     NO
    PlantUML:                    NO

  Tests and samples:
    Tests:                       YES
    Performance tests:           YES
    C/C++ Examples:              NO

  Install path:                  E:/Dev/opencv/x86_v140_xp/install

  cvconfig.h is in:              E:/Dev/opencv/x86_v140_xp
-----------------------------------------------------------------
</code></pre>
",,2016-08-25 01:18:28,cv::imwrite causes access violation... sometimes,<c++><opencv>,,,CC BY-SA 3.0,True,True,False,False,True
45509,38786232,2016-08-05 09:47:12,,"<p>I have a method that takes screenshots on absolute intervals (25%, 50%, 75% and 100%) from a video-file and save each of them to a separate .png-file. I use openCV with the JavaCV-Wrapper library to do that. The class/method of interest is:</p>

<pre class=""lang-java prettyprint-override""><code>package de.stal.videoreporter;

import org.bytedeco.javacpp.opencv_core;
import static org.bytedeco.javacpp.opencv_imgcodecs.cvSaveImage;
import org.bytedeco.javacv.FFmpegFrameGrabber;
import org.bytedeco.javacv.Frame;
import org.bytedeco.javacv.FrameGrabber;
import org.bytedeco.javacv.OpenCVFrameConverter;

class VideoThumbnailer {
public void createThumbnails(String videoname) throws FrameGrabber.Exception {

    FFmpegFrameGrabber g = new FFmpegFrameGrabber(""videos/"" + videoname);
    g.start();
    OpenCVFrameConverter.ToIplImage converterToIplImage = new OpenCVFrameConverter.ToIplImage();
    int length = g.getLengthInFrames();
    int fifty = length / 2;
    int twentyfive = fifty / 2;
    int seventyfive = fifty + twentyfive;
    int hundred = length - 1;

    //each frame of video
    for (int j = 0; j &lt; length; j++) {

        if (j == twentyfive || j == fifty || j == seventyfive || j == hundred) {
            String ss = """";
            if (j == twentyfive) {
                ss = ""25"";
            } else if (j == fifty) {
                ss = ""50"";
            } else if (j == seventyfive) {
                ss = ""75"";
            } else if (j == hundred) {
                ss = ""100"";
            }

            g.setFrameNumber(j);

            Frame f = g.grabImage();

            opencv_core.IplImage image = converterToIplImage.convert(f);
            String img_path = ""thumbnails/"" + videoname + ""."" + ss + "".png"";
            cvSaveImage(img_path, image);
        }

    }
    g.stop();
}
}
</code></pre>

<p>That works fine on environment: Ubuntu 15.10 x64, Java v.1.7.0_101 and Netbeans 8.0.2 with Maven. So I exported the project to a runnable jar-file(with all dependencies included) and tried to start it on Windows 10 x64 via:</p>

<pre><code>java -jar VideoReporter-1.0-SNAPSHOT-jar-with-dependencies.jar
</code></pre>

<p>On Windows an exception will be thrown when executing the .jar-file:</p>

<pre><code>Error putting member offsets for class org/bytedeco/javacpp/avutil$Pool_free_Pointer.
Exception in thread ""main"" java.lang.NoClassDefFoundError: Could not initialize class org.bytedeco.javacpp.avutil
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.bytedeco.javacpp.Loader.load(Loader.java:472)
    at org.bytedeco.javacpp.Loader.load(Loader.java:417)
    at org.bytedeco.javacpp.avformat$AVFormatContext.&lt;clinit&gt;(avformat.java:2719)
    at org.bytedeco.javacv.FFmpegFrameGrabber.startUnsafe(FFmpegFrameGrabber.java:391)
    at org.bytedeco.javacv.FFmpegFrameGrabber.start(FFmpegFrameGrabber.java:385)
    at de.stal.videoreporter.VideoThumbnailer.createThumbnails(VideoThumbnailer.java:15)
    at de.stal.videoreporter.MetaReader.slurpMetadata(MetaReader.java:67)
    at de.stal.videoreporter.VideoReporter.main(VideoReporter.java:19)
</code></pre>

<p></p>

<p>My pom.xml is:</p>

<pre class=""lang-xml prettyprint-override""><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;project xmlns=""http://maven.apache.org/POM/4.0.0"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xsi:schemaLocation=""http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd""&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
&lt;groupId&gt;de.stal&lt;/groupId&gt;
&lt;artifactId&gt;VideoReporter&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;packaging&gt;jar&lt;/packaging&gt;
&lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;
&lt;/properties&gt;
&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
            &lt;configuration&gt;
                &lt;archive&gt;
                    &lt;manifest&gt;
                        &lt;mainClass&gt;de.stal.videoreporter.VideoReporter&lt;/mainClass&gt;
                    &lt;/manifest&gt;
                &lt;/archive&gt;
                &lt;descriptorRefs&gt;
                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;
                &lt;/descriptorRefs&gt;
            &lt;/configuration&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;make-assembly&lt;/id&gt;
                    &lt;phase&gt;package&lt;/phase&gt; 
                    &lt;goals&gt;
                        &lt;goal&gt;single&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
        &lt;artifactId&gt;commons-csv&lt;/artifactId&gt;
        &lt;version&gt;1.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;
        &lt;artifactId&gt;javacpp&lt;/artifactId&gt;
        &lt;version&gt;1.2.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.bytedeco&lt;/groupId&gt;
        &lt;artifactId&gt;javacv&lt;/artifactId&gt;
        &lt;version&gt;1.2&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;
        &lt;artifactId&gt;jackson-dataformat-csv&lt;/artifactId&gt;
        &lt;version&gt;2.8.0.rc2&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;javassist&lt;/groupId&gt;
        &lt;artifactId&gt;javassist&lt;/artifactId&gt;
        &lt;version&gt;3.12.1.GA&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;commons-collections&lt;/groupId&gt;
        &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;
        &lt;version&gt;3.2.1&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.opencsv&lt;/groupId&gt;
        &lt;artifactId&gt;opencsv&lt;/artifactId&gt;
        &lt;version&gt;3.3&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

<p></p>

<p>What might be the problem on Windows? In my opinion there shouldn't be a problem with access to openCV/FFMPEG-classes because they all have been included the .jar-file? Is this a problem with the classpath?</p>

<p>Thanks, Peter</p>
",2016-08-06 01:51:40,2016-08-06 01:51:40,Using openCV library with Java works well on Linux but not on Windows,<java><opencv><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
45671,38880740,2016-08-10 18:15:21,,"<p>I'm trying to export the data coming from a thermal camera but I get an error message that says</p>

<pre><code>error: /build/opencv-ISmtkH/opencv-2.4.9.1+dfsg/modules/highgui/src/cap_ffmpeg.cpp:238: error: (-215) image-&gt;depth == 8 in function writeFrame
</code></pre>

<p>Can someone look at what I'm doing and tell me what I'm doing wrong? I followed and example pretty closely so I don't understand what this error means or why it's happening.</p>

<pre><code>o = camera.add_overlay(np.getbuffer(a), size=(320,240), layer=3, alpha=int(alpha), crop=(0,0,80,60), vflip=flip_v)

filename = time.strftime(""%Y.%m.%d  %H.%M.%S"", time.localtime()) + "".avi""
fourcc =  cv2.cv.CV_FOURCC('I','4','2','0')
out = cv2.VideoWriter(filename, fourcc, fps, (width, height))

try:
  time.sleep(0.2) # give the overlay buffers a chance to initialize
  with Lepton(device) as l:
    last_nr = 0
    while True:
      _,nr = l.capture(lepton_buf)

      out.write(lepton_buf)

      if nr == last_nr:
        # no need to redo this frame
        continue
      last_nr = nr
      cv2.normalize(lepton_buf, lepton_buf, 0, 65535, cv2.NORM_MINMAX)
      np.right_shift(lepton_buf, 8, lepton_buf)
      a[:lepton_buf.shape[0], :lepton_buf.shape[1], :] = lepton_buf
      o.update(np.getbuffer(a))
except Exception:
  traceback.print_exc()
finally:
  camera.remove_overlay(o)
</code></pre>
",,2020-03-04 17:26:59,Python OpenCV cv2.VideoWriter Error,<python><opencv><camera><thermal-printer>,,,CC BY-SA 3.0,True,False,False,False,True
45753,39177566,2016-08-27 04:47:32,,"<p>I'm trying to do some research for a new application which is surveillance-based and has to be able to handle the output for up to 64 different cameras. While I don't think the end result should be to view them all at the same time (that'd be nice), the goal would be to record the data/video feed from all cameras to whatever directory, and either stream from 4-8 or so at a time, or read the video files and do the same, to be able to see them ""live"". </p>

<p>Does anyone have any knowledge into this space? Any advice on whether I should stick with OpenCV to do this? I have read that OpenCV gets a little cranky after 2 camera feeds. I could run the OpenCV processing in parallel for the currently shown 4-8 cameras or something, maybe. Will I be forced to use lower-level libraries like ffmpeg to do the video communication more directly?</p>

<p>With more than 4 cameras or so, most people will be using external video capture or DVR card. With 64, a 64 Port PoE switch. Does anyone have experience with this space? Can I get these outputs through to OpenCV, or at that point maybe it doesn't matter if OpenCV is reading from a file stream instead of the cameras directly? I'm thinking I could at least have OpenCV working on 2 cameras at a time, so you could live view 1 or 2. If I want to incorporate motion detection onto all 64 cameras, I'd have to post-process the video feeds/files into parallel threads running OpenCV algorithms, I'm just guessing...</p>

<p>Any advice into this space would be helpful!</p>
",2016-08-27 04:49:13,2016-08-27 04:49:13,"Reading many camera streams (16, 32, 64) with C++ and OpenCV",<opencv><video><video-capture>,,,CC BY-SA 3.0,True,False,False,False,True
46134,39207771,2016-08-29 13:41:19,,"<p>A project I was working on suddenly started giving segmentation faults, even with a version I saved and knew was working.</p>

<p>I investigated a bit, and constructed a small example of what's happening :
</p>

<pre><code>#include &lt;opencv2/opencv.hpp&gt;

int main()
{
  cv::VideoCapture capture(""drop.avi"");
  return 0;
}
</code></pre>

<p>According to the <a href=""http://docs.opencv.org/2.4.13/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-videocapture"" rel=""nofollow"">documentation</a>, I should be able to do this :</p>

<blockquote>
  <p>C++: VideoCapture::VideoCapture(const string&amp; filename)</p>
</blockquote>

<p>with </p>

<blockquote>
  <p>filename – name of the opened video file (eg. video.avi) or image sequence</p>
</blockquote>

<p>The following compilation command</p>

<pre><code>g++ `pkg-config --cflags opencv` `pkg-config --libs opencv` main.cpp
</code></pre>

<p>produces the executable without any warning.
However, when I execute the program :</p>

<pre><code>./a.out 
zsh: segmentation fault (core dumped)  ./a.out
</code></pre>

<p>According to users of the Interwebs, the issue could be related to <code>ffmpeg</code> and <code>opencv</code> having incompatible versions. The problem is, I don't see that documented anywhere, and I don't want to spend days compiling random versions of opencv, perhaps to no avail.</p>

<p>Does anyone have a clue what's going on ?</p>

<h2>Useful information</h2>

<p>I am, of course, willing to provide any complementary information that would be needed.</p>

<h3>Software versions</h3>

<ul>
<li>Opencv2 2.4.13-1</li>
<li>ffmpeg 1:3.1.3-1</li>
<li>ffmpeg 2.8.7-3</li>
</ul>

<p>(okay, so apparently I have two versions of ffmpeg ?)</p>

<h3>System Information</h3>

<ul>
<li>OS : Archlinux</li>
<li>Linux kernel 4.7.2-1</li>
</ul>
",,2016-08-30 10:51:28,Minimalist VideoCapture example produces a Segmentation Fault,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
46340,39439783,2016-09-11 19:20:06,,"<p><br>
I using Elementary OS and I'm trying to install OpenCV 3.1.0, I follow the instructions of <a href=""http://docs.opencv.org/3.0-beta/doc/tutorials/introduction/linux_install/linux_install.html"" rel=""nofollow"">http://docs.opencv.org/3.0-beta/doc/tutorials/introduction/linux_install/linux_install.html</a> <br>
Also, I have installed libav 11.7 and ffmpeg 3.1.3 <br> 
but, after cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..
I get: <br>
-- Looking for linux/videodev.h <br>
-- Looking for linux/videodev.h - found <br>
-- Looking for linux/videodev2.h <br>
-- Looking for linux/videodev2.h - found <br>
-- Looking for sys/videoio.h <br>
-- <strong>Looking for sys/videoio.h - not found</strong> <br>
-- Looking for libavformat/avformat.h <br>
-- Looking for libavformat/avformat.h - found <br>
-- Looking for ffmpeg/avformat.h <br>
-- <strong>Looking for ffmpeg/avformat.h - not found</strong> <br>
-- checking for module 'libgphoto2' <br>
--   package 'libgphoto2' not found <br>
And after make, <br>
I get: <br>
../../lib/libopencv_videoio.so.3.1.0: referencia a <code>av_frame_alloc' sin definir &lt;br&gt;
../../lib/libopencv_videoio.so.3.1.0: referencia a</code>av_frame_free' sin definir <br>
collect2: error: ld returned 1 exit status <br>
make[2]: <strong>* [bin/opencv_test_video] Error 1 <br>
make[1]: *</strong> [modules/video/CMakeFiles/opencv_test_video.dir/all] Error 2
<br></p>

<p>someone who can help me ?</p>
",,2020-06-09 11:11:12,"Error ""sys/videoio.h - not found"" OpenCV 3.1.0",<linux><opencv><ffmpeg><libav>,,,CC BY-SA 3.0,True,False,False,False,True
46547,39593326,2016-09-20 11:51:44,,"<p>I am using FFmpeg on Windows 7 to create a video from PNG image sequence for Microsoft PowerPoint.</p>

<p>The best results I have achieved so far, is by using the following command:</p>

<pre><code>ffmpeg -framerate 10 -start_number 3 -i .\folder\name_%d.png -q:v 0 -c:v libx264 -pix_fmt yuv420p output-video.avi
</code></pre>

<p>It seems perfect, 50 images of total size 30 MB are converted into ~200 KB video with no loss in the quality. Placing it in PowerPoint also seems right, but there is a slight color shift (yellow appears darker and possibly more orangish). By using some other conversion options, I obtained a video in PowerPoint where the first image of the video (like album cover art) is exactly as the original but the rest of the video plays with the mentioned color shift.</p>

<p>When I play this file in VLC, it's good. Although, if in the settings ""Use hardware YUV->RGB conversions"" is enabled, colors appear a bit washed out, and white color is a bit gray.</p>

<p>I also tried to convert the images to a GIF file and at first it seems good but outer edges and numbers from the left and top side are blurred, and the background has turned from white to a bit gray color, although, white segments not on the background are white. The output size is 18 MB. I ended up with a way better GIF ~600 KB by converting from the first video file; just it is slightly more dotted, and the background again is grayish.</p>

<pre><code>ffmpeg -i output-video.avi output-video.gif
</code></pre>

<p>Could someone help?</p>
",,2016-09-20 11:51:44,FFmpeg: Create a Video Slideshow from PNG Images for MS PowerPoint,<video><image-processing><ffmpeg><powerpoint><animated-gif>,,,CC BY-SA 3.0,False,False,False,False,True
46694,39584354,2016-09-20 01:25:47,,"<p>Sorry for bad English, not a native speaker.</p>

<p>I am using sourab-sharma's TouchToRecord library, available on github, I updated javacv and javacpp and now app crashes on video record with,</p>

<pre><code>java.lang.OutOfMemoryError: Cannot allocate 267850262 + 614403 bytes (&gt; Pointer.maxBytes)
    at org.bytedeco.javacpp.Pointer.deallocator(Pointer.java:446)
    at org.bytedeco.javacpp.Pointer.init(Pointer.java:118)
    at org.bytedeco.javacpp.BytePointer.allocateArray(Native Method)
    at org.bytedeco.javacpp.BytePointer.&lt;init&gt;(BytePointer.java:82)
    at org.bytedeco.javacv.FFmpegFrameFilter.pushImage(FFmpegFrameFilter.java:265)
    at org.bytedeco.javacv.FFmpegFrameFilter.push(FFmpegFrameFilter.java:252)
    at org.bytedeco.javacv.FFmpegFrameFilter.push(FFmpegFrameFilter.java:248)
    at com.dodo.challenger.videorecorder.RecorderThread.processBytesUsingFrame(RecorderThread.java:186)
    at com.dodo.challenger.videorecorder.RecorderThread.processFramesFromList(RecorderThread.java:84)
    at com.dodo.challenger.videorecorder.RecorderThread.run(RecorderThread.java:59)
</code></pre>

<p>this. Have been working on 8 straight hours, no luck yet.</p>

<p>JavaCpp version was: 1.1 - now: 1.2.4,</p>

<p>JavaCv version was: 1.1 - now: 1.2.1</p>

<p>Also this message appears on error trace just in version 1.2.4, below don't have it.</p>

<pre><code>No implementation found for long org.bytedeco.javacpp.Pointer.physicalBytes()
</code></pre>
",2016-09-20 01:32:00,2016-09-20 02:06:25,JavaCPP BytePointer OutOfMemory Error,<android><ffmpeg><javacv><javacpp>,,,CC BY-SA 3.0,False,False,False,False,True
46731,39808290,2016-10-01 15:22:50,,"<p>I am currently trying to load a ultra-HD video (3840 × 2160) frame-by-frame using OpenCV in Python. I am using the <code>VideoCapture</code> object from the OpenCV library, and it seems to work fine except for the fact, that it only loads 26 frames. </p>

<p>The video is a <strong>8:54</strong> minutes long <strong>.mp4</strong> with <strong>30fps</strong> and <strong>H.264</strong> coding. </p>

<p>A simplification of my code looks like the following</p>

<pre><code>import cv2

def get_frames(filepath):
    cap = cv2.VideoCapture(filepath)
    while cap.isOpened():
        success, frame = cap.read()

        if not success: 
            break

        frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
        yield frame
</code></pre>

<p>The code seems to work fine for other videos at lower resolution.
I use Python 3.5.1 and version 3.1.0 of cv2.</p>

<p>Has anyone experienced the same problem or can recommend any other library for fast loading of video frames in Python? </p>

<p>Thanks.</p>

<p><strong>EDIT:</strong></p>

<p>According to VLC's Median Information the video have the following properties:</p>

<pre><code>Codec:              H264 - MPEG-4 AVC (part 10)(avc 1)
Resolution:         3840x2178
Display resolution: 3840x2160
Frame rate:         29.970030
Decoded format:     Planar 4:2:0 YUV full scale
</code></pre>

<p>I tried converting the movie first using <code>ffmpeg</code> with the following command</p>

<pre><code>ffmpeg -i video.mp4 -crf 18 video_converted.mp4
</code></pre>

<p>which actually made the code work even though the properties are exactly the same (according to VLC).</p>
",2016-10-02 09:59:26,2020-07-09 10:23:13,OpenCV-Python VideoCapture only loads part of video,<python><opencv><video><loading><frame>,,,CC BY-SA 3.0,True,False,False,False,True
46751,39767897,2016-09-29 10:33:48,,"<p>I am using ffmpeg for background correction of a video and I would like to improve the intensity scaling of the output.</p>

<p>My gray scale videos have dark moving objects on a light background. In 8 bit pixel intensities, the light background has pixel values around 240, the dark objects have intensities of around 120.</p>

<p>outside of ffmpeg, I generate a background image by taking the median frame over some number of frames.
Then, I use ffmpeg to blend/divide each frame by the background image. (I want to use division, not subtraction of the background).
[there is also some cropping in my ffmpeg command, but it is irrelevant to my question]</p>

<p><code>'ffmpeg.exe', '-i', u'inputVideo.avi', '-i', u'bgMed.tif', '-y', '-r', '160', '-filter_complex', ""[1:0] setsar=sar=1 [1sared]; [0:0][1sared] blend=all_mode='divide':repeatlast=1,format=gray,split=1 [int1];[int1]crop=1097:1097:12:11:[out1]"", '-map', '[out1]', '-c:v', 'libxvid', '-q:v', '5', '-g', '10', u'outputVideo'</code></p>

<p>This procedure is basically working but the resulting video frames look too washed out. This is probably expected? I am guessing ffmpeg does the division and produces an internal float result which it then maps back to an 8 bit output. I would like to stretch the histogram of the result from the division. It would be preferable to stretch before the mapping to 8 bit for a finer dynamic range.</p>

<p>In my example, I am assuming that the background division produces a result frame that has a value close to 1 for the background, and values close to 0.5 for the dark objects. Then, ffmpeg seems to be mapping the full range 0-1 into 8 bit 0-255. I would like it to map the range 0.5-1 of the division result into the 8 bit range of the output. is this possible somehow? Or how else can I achieve a similar result?</p>
",,2016-09-30 08:03:57,ffmpeg intensity histogram adjustment,<video><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
46840,39662283,2016-09-23 13:39:40,,"<p>I would like to extract images from a grayscale <a href=""https://en.wikipedia.org/wiki/Motion_JPEG_2000"" rel=""nofollow"">mj2</a> movie. Each pixel is encoded using 16 bits. Since this is a technical movie, I need to extract the value at each pixel without processing, as those values linearly map to a physical quantity (a heatmap from an infrared camera). I am using Scala, and I do not find any suitable solution for a direct extraction (either in Scala or in Java, but I am a beginner). Therefore I intend to use ffmpeg to extract individual frames on the disk, then load them as BufferedImage in Scala and process them.</p>

<p>Is this a good approach ? Which format should I use to avoid any transformation in the data ? I want each extracted frame to ba as ""raw"" as possible ? Is it possible to directly output a csv containing the aforementionned values ?</p>
",,2016-09-29 15:23:00,Raw extraction of frames from a movie,<java><image><scala><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
46901,39781116,2016-09-29 22:41:37,,"<p>Windows, MSVC 2013. When I run a program in QtCreator that uses OpenCV(2410)'s VideoCapture or VideoWriter, it works. When I debug it, it fails. It's just a test program from the OpenCV website. These functions call on ffmpeg library, but I can't see why it fails/runs in debug mode (there is no error message). </p>

<p>That is, the debug program uses .lib's while the run program uses dll's right?, but I run it with a Debug.Makefile then it works, I debug it with the same Debug.Makefile it fails. </p>

<p>in Project.PRO:</p>

<p><code>INCLUDEPATH += ""C:\Users\me\OPENCV2410\opencv\build\include</code></p>

<p><code>LIBS += -L$(OPENCV_LIB32) -lopencv_videostab2410d -lopencv_highgui2410d \ etc</code></p>

<p>Can OpenCV programs that use these functions not be debugged at all? Should I build a .lib myself, would that work?</p>
",2016-09-30 07:57:40,2016-09-30 07:57:40,"Why Qt debug fails with OpenCV with VideoCapture an Writer (using ffmpeg) , while run works?",<c++><qt><opencv><makefile><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
46974,39713863,2016-09-26 23:27:45,,"<p>I just came into the world of openCV and python, and I'm having a strange issue with opening the video stream. This is the code that I'm using:</p>

<pre><code>import numpy
import cv2

cap = cv2.VideoCapture('SampleVideo.mp4')
print(cap.isOpened())
while(cap.isOpened()):
    ret, frame = cap.read()
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    cv2.imshow('frame',gray)
    if cv2.waitKey(1) &amp; 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()
</code></pre>

<p>This code can successfully open the video stream when i run it in terminal(windows command line) but not in Pycharm. This is the result of the run in Pycharm:</p>

<blockquote>
  <p>False</p>
  
  <p>Process finished with exit code 0</p>
</blockquote>

<p>Any help would be appreciated. Thank you all!</p>

<p>Codec: FFmpeg. OS: Windows 8.1. Python: 3.5.2. OpenCV: 3.1</p>

<p>Update Sep.27:</p>

<p>I noticed that the code runs successfully in IDLE, but not in PyCharm. Now I'm really confused.</p>

<p>I can also confirm that imread and imwrite works properly in PyCharm. So maybe it is the Codec that is not working? How to check my codec in OpenCV?</p>

<p>Update Sep.29:</p>

<p>Now I think I've ruled out the possibility that the terminal and PyCharm are using different interpreter. I really think it's somehow that the default codec is not linked in the PyCharm environment. <strong>How do I check my default system codec either in OpenCV or Python?</strong></p>
",2016-09-29 23:20:31,2016-10-24 06:53:50,How to check the default linked codec used by openCV-Python?,<python><opencv><pycharm>,,,CC BY-SA 3.0,True,False,False,False,True
47032,39932544,2016-10-08 12:47:48,,"<p>I use opencv open camera and obtain video and push stream. Then I want add audio and push it. When I use ffmpeg function</p>

<pre><code>avformat_open_input(&amp;ifmt_ctx, psDevName, ifmt, NULL),
program break.
</code></pre>

<p>So can I use opencv open camera and use ffmepg open Microphone?</p>

<p>I want to write anchor push streaming client and must use opencv open camera.</p>
",2017-01-06 07:35:46,2017-01-06 07:35:46,opencv open camera and ffmpeg open Microphone,<opencv><ffmpeg><live>,,,CC BY-SA 3.0,True,False,False,False,True
47046,39908146,2016-10-07 01:49:07,,"<p>I was following <a href=""https://stackoverflow.com/a/16003545/1078169"">this example</a> and received the following error when running <code>make</code></p>

<pre><code>In file included from /root/src/opencv-3.1.0/modules/videoio/src/cap_ffmpeg.cpp:45:0:
/root/src/opencv-3.1.0/modules/videoio/src/cap_ffmpeg_impl.hpp: In member function ‘bool OutputMediaStream_FFMPEG::open(const char*, int, int, double)’:
/root/src/opencv-3.1.0/modules/videoio/src/cap_ffmpeg_impl.hpp:2207:41: warning: ignoring return value of ‘int avformat_write_header(AVFormatContext*, AVDictionary**)’, declared with attribute warn_unused_result [-Wunused-result]
         avformat_write_header(oc_, NULL);
                                         ^
Linking CXX shared library ../../lib/libopencv_videoio.so
/usr/bin/ld: /usr/local/lib/libx264.a(common.o): relocation R_ARM_MOVW_ABS_NC against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/usr/local/lib/libx264.a: error adding symbols: Bad value
collect2: error: ld returned 1 exit status
modules/videoio/CMakeFiles/opencv_videoio.dir/build.make:215: recipe for target 'lib/libopencv_videoio.so.3.1.0' failed
make[2]: *** [lib/libopencv_videoio.so.3.1.0] Error 1
CMakeFiles/Makefile2:4058: recipe for target 'modules/videoio/CMakeFiles/opencv_videoio.dir/all' failed
make[1]: *** [modules/videoio/CMakeFiles/opencv_videoio.dir/all] Error 2
Makefile:147: recipe for target 'all' failed
make: *** [all] Error 2
</code></pre>
",2017-05-23 12:16:39,2016-10-21 11:37:04,Error building opencv on a raspberry pi 3,<opencv><raspberry-pi>,,,CC BY-SA 3.0,True,False,False,False,True
47061,39795849,2016-09-30 16:15:29,,"<p>I am trying to use OpenCV to apply treatments on an mj2 file encoded as grayscale uint16 per pixel. Unfortunately, a non disclosure agreement covers this file (which I did not generate myself) and I can not post a sample mj2 file.</p>

<p>The description of my .mj2 file as provided by ffmpeg is:</p>

<pre><code>Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'data/DEVISSAGE_181.mj2':
  Metadata:
    major_brand     : mjp2
    minor_version   : 0
    compatible_brands: mjp2
    creation_time   : 2015-10-09 08:07:43
  Duration: 00:01:03.45, start: 0.000000, bitrate: 14933 kb/s
    Stream #0:0: Video: jpeg2000 (mjp2 / 0x32706A6D), gray16le, 1152x288, lossless, 14933 kb/s, SAR 1:4 DAR 1:1, 5.50 fps, 5.50 tbr, 55 tbn, 55 tbc (default)
    Metadata:
      creation_time   : 2015-10-09 08:07:43
      handler_name    : Video
      encoder         : Motion JPEG2000
</code></pre>

<p>I take it that gray16le confirms the uint16 encoding somehow.</p>

<p>Here is my C++ code:</p>

<pre><code>#include&lt;iostream&gt;

#include ""opencv2/opencv.hpp""

int main(int, char**) {
    cv::VideoCapture cap(""data/DEVISSAGE_181.mj2""); // open the video file
    cap.set(CV_CAP_PROP_FORMAT, CV_16UC1);

    cv::Mat frame;
    cap.read(frame); // get a new frame from file

    std::cout &lt;&lt; ""frame.rows: "" &lt;&lt; frame.rows &lt;&lt; "", frame.cols: "" &lt;&lt; frame.cols &lt;&lt; "", frame.channels(): "" &lt;&lt; frame.channels() &lt;&lt; std::endl;

    return 0;
}
</code></pre>

<p>The result of running this code is:</p>

<pre><code>frame.rows: 288, frame.cols: 1152, frame.channels(): 3, frame.depth(): 0
</code></pre>

<p>Which indicates a 3 channels, CV_8U pixel encoding. Why does the <code>cap.set</code> instruction appear to be ignored ? What should I do to get the correct encoding ?</p>
",,2016-09-30 16:15:29,Can not set the number of channels in VideoCapture in OpenCV,<c++><opencv><image-processing><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
47133,39920051,2016-10-07 14:47:49,,"<p>I am trying to install OpenCV 3.1 with Python 3.5 on Mac OS X Sierra. Using the many helpful tutorials around, I managed to use terminal and Homebrew to install it. More specifically, I used the following:</p>

<pre><code>brew install opencv3 --with-ffmpeg --with-tbb --with-contrib
</code></pre>

<p>I also used the following to install python 3.5 and numpy respectively:</p>

<pre><code>brew install python3
brew install numpy --with-python3
</code></pre>

<p>Installation appears to be successful, as when I run the following on terminal, I get no error:</p>

<pre><code>python3
import cv2
</code></pre>

<p>Furthermore, I can see the opencv3 and python3.5 files in my local directory as follows:</p>

<pre><code>/usr/local/Cellar/opencv3 
/usr/local/Cellar/python3
</code></pre>

<p>Now when I tried to install PyDev (experienced trouble in that as well, but eventually succeeded!) with Eclipse, OpenCV appears to fail. Basic commands such as:</p>

<pre><code>print(""hello world"")
</code></pre>

<p>work as expected. When I try the following however, I don't seem to be so lucky.</p>

<pre><code>import numpy as np
import cv2 

img = cv2.imread('obj4_4.jpg',0)

cv2.imshow('image',img)
cv2.waitKey(0)
cv2.destroyAllWindows()
</code></pre>

<p>More specifically, I get the following error:</p>

<p>""OpenCV Error: Unspecified error (The function is not implemented. Rebuild the          library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script) in cvShowImage, file /Users/travis/build/skvark/opencv-python/opencv/modules/highgui/src/window.cpp, line 545
Traceback (most recent call last):""</p>

<p>I tried long and hard to find a workaround, but they all seem to be centered around Linux/Windows. Any help provided would be appreciated, as I think it would help the whole community!</p>
",,2016-12-17 21:12:24,OpenCV 3.1 installation error on PyDev on Mac OSX Sierra,<eclipse><macos><python-3.x><opencv><pydev>,,,CC BY-SA 3.0,True,False,False,False,True
47162,40057851,2016-10-15 10:24:07,,"<p>Error: 
""warning: Error opening file(../../modules/highgui/src/opencv cap_ffmpeg_impl.hpp:545)""</p>

<p>I am trying to access mobile camera via IP in OpenCV Visual Studio in C++.
Having this error.
Anyone Please help me in this regard.
Thanks in advance.</p>
",,2016-10-30 08:47:12,OpenCv IP camera connection,<c++><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
47173,39920815,2016-10-07 15:25:34,,"<p>Is there anyway to use ffmpeg script to normalize a video luma to its complete dynamic range? I have been trying to do this with lutyuv like this:</p>

<p>ffmpeg -i input.mp4 -vf lutyuv=y='((val - minval)*255)/(maxval - minval)' output.mp4</p>

<p>but the output video is just exactly the same as the input. (I am sure the input does not use it's complete dynamic range)</p>

<p>Can anyone help me please?</p>

<p>Thank you a lot</p>
",2016-10-07 16:13:04,2016-10-09 02:49:05,video normalization with ffmpeg,<video><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
47241,40103119,2016-10-18 08:21:31,,"<p>I am able to read an avi file encoded as mjpeg, but I can't succeed when the case for encoding is mpeg4 unfortunately. Any help from you would be really helpful and be appreciated. 
Here is my code snippet:</p>

<pre><code>while(cap.isOpened()):
 ret, frame = cap.read()
 if ret:
      frame=cv2.resize(frame(img_rows,img_cols),interpolation=cv2.INTER_AREA)         
      gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
      frames.append(gray)
      cv2.imshow('frame',gray)
 if cv2.waitKey(1) &amp; 0xFF == ord('q'):
                break
cap.release()
cv2.destroyAllWindows()
</code></pre>
",2016-10-18 10:36:29,2017-07-17 07:17:39,"Trying capture video to read frame by frame with OpenCV on MAC, but my "".avi"" file has been encoded as mpeg4",<python><python-2.7><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
47285,39954231,2016-10-10 08:31:03,,"<p>I'm trying write an OpenCV application. I've statically built OpenCV from source as I don't want dll files and my project compiles as long as I don't use <code>cv::VideoCapture</code>, in which case I get a link error <code>LNK2019</code> unresolved external symbol. </p>

<p>I think this is because the <code>cv::VideoCapture</code> uses ffmpeg to work with video, which, because of it's license, cannot be statically linked in my project. I would be ok with linking the ffmpeg dynamically but I'm having trouble doing this. There is a <code>opencv_ffmpeg310_64.dll</code> file in the <code>%OpenCV_DIR%\bin</code> folder, but I'm clueless about how to dynamically link it to my project. Usually I have <code>.lib</code> files that come with the <code>.dll</code> but I can't find them anywhere.</p>

<p>Is it possible to statically link OpenCV and dynamically link ffmpeg, and how should I go about doing this?</p>

<p>Additional info:</p>

<ul>
<li>Windows 10</li>
<li>Visual Studio 2015</li>
<li>OpenCV 3.1.0 x64 build </li>
</ul>
",,2016-10-11 12:12:19,Building and using OpenCV as a static library with Ffmpeg,<c++><visual-studio><opencv><static><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
47310,40109703,2016-10-18 13:30:44,,"<p>I just started using Affectiva SDK for C#, and after a few runs, I stumbled upon a continuous crash problem.
I am using the Camera processing, on x86 architecture and .Net 4.5.1. I have VS 2013 installed. My OS is Windows 10. I have added ""opencv_ffmpeg248"" and ""affdex-native"" in my output.
The code builds and runs ok, but from time to time, during runtime, it throws this errors and the application closes.</p>

<p>This is the code that I am using:</p>

<pre><code> public class Class1 : Affdex.ImageListener
{
    private Affdex.CameraDetector _detector;

    public event EventHandler&lt;string[]&gt; AllValuesEvent;

    public Class1()
    {
        _detector = new Affdex.CameraDetector();
        _detector.setDetectAllEmotions(true);
        _detector.setDetectAllAppearances(true);

        String classifierPath = @""C:\Program Files (x86)\Affectiva\Affdex SDK\data"";
        _detector.setClassifierPath(classifierPath);
        _detector.setImageListener(this);
        _detector.start();
    }

    public void StopCamera()
    {
        _detector.stop();
    }


    public void onImageCapture(Frame frame)
    {

    }

    public void onImageResults(Dictionary&lt;int, Face&gt; faces, Frame frame)
    {
        if (faces.Count &gt; 0)
        {
            Face face = faces.First().Value;

            Console.WriteLine(""Age: {0} Gender: {1} Glasses: {2}"",
                face.Appearance.Age,
                face.Appearance.Gender,
                face.Appearance.Glasses);

            string[] names = new string[8];
            string[] values = new string[8];

            names[0] = ""Anger"";
            names[1] = ""Contempt"";
            names[2] = ""Disgust"";
            names[3] = ""Engagement"";
            names[4] = ""Fear"";
            names[5] = ""Joy"";
            names[6] = ""Sadness"";
            names[7] = ""Surprise"";

            values[0] = face.Emotions.Anger.ToString(""F2"");
            values[1] = face.Emotions.Contempt.ToString(""F2"");
            values[2] = face.Emotions.Disgust.ToString(""F2"");
            values[3] = face.Emotions.Engagement.ToString(""F2"");
            values[4] = face.Emotions.Fear.ToString(""F2"");
            values[5] = face.Emotions.Joy.ToString(""F2"");
            values[6] = face.Emotions.Sadness.ToString(""F2"");
            values[7] = face.Emotions.Surprise.ToString(""F2"");

            RaiseAllValuesEvent(names, values);
        }
    }

    private void RaiseAllValuesEvent(string[] names, string[] values)
    {
        if (AllValuesEvent != null)
        {
            AllValuesEvent(names, values);
        }
    }
}
</code></pre>

<p>These are the errors that appear:
<a href=""https://i.stack.imgur.com/rnJoU.png"" rel=""nofollow""><img src=""https://i.stack.imgur.com/rnJoU.png"" alt=""enter image description here""></a>
<a href=""https://i.stack.imgur.com/hUU7W.png"" rel=""nofollow""><img src=""https://i.stack.imgur.com/hUU7W.png"" alt=""enter image description here""></a></p>

<p>Anyone has any suggestions?</p>

<p>Thank you very much.</p>
",,2016-11-01 16:46:47,Affectiva C# SDK crashes,<c#><opencv><runtime-error><affdex-sdk>,,,CC BY-SA 3.0,True,False,False,False,True
47451,40237738,2016-10-25 10:37:01,,"<p>Is it possible to use this code in capturing a video stream from an ip camera?</p>

<p><code>Capture cap = new Capture(""rtsp://192.168.42.1:554/live"");
imageBox1.Image = cap.QueryFrame();</code></p>

<p>because my image box is displaying nothing but when i tried viewing it to VLC Media Player the ip address worked. Please help.</p>

<p>I also tried it with VLCPlugin v2 instead of using imageBox and the ip address still work..</p>

<p>I also tried it with iSpy and it worked under ffmpeg(h264), maybe the problem is there? I'm using Visual Studio Ultimate 2010, Emgu CV 3.x. and I'm using Please help. Been working on this for long now.</p>
",,2017-02-01 22:51:03,Is it possible to use Emgu CV 3.0 to open a live stream with rstp protocol with ffmpeg h264,<c#><visual-studio-2010><ffmpeg><h.264><emgucv>,,,CC BY-SA 3.0,False,False,True,False,True
47478,40239109,2016-10-25 11:46:33,,"<p>I am getting the below error when i try to compile my program using opencv to detect blobs:</p>

<pre><code>11:47:34 **** Incremental Build of configuration Debug for project testOpencv 
Info: Internal Builder is used for build
g++ ""-IC:\\Development\\opencv\\build\\include"" -O0 -g3 -Wall -c -fmessage-      length=0 -o ""src\\testOpencv.o"" ""..\\src\\testOpencv.cpp"" 
g++ ""-LC:\\Development\\opencv\\MINGW\\x86\\bin"" -o testOpencv.exe    ""src\\testOpencv.o"" -llibopencv_calib3d2410 -llibopencv_contrib2410 -  llibopencv_core2410 -llibopencv_flann2410 -llibopencv_gpu2410 -   llibopencv_highgui2410 -llibopencv_imgproc2410 -llibopencv_ml2410 -  llibopencv_legacy2410 -llibopencv_nonfree2410 -llibopencv_objdetect2410 -  llibopencv_ocl2410 -llibopencv_photo2410 -llibopencv_stitching2410 -  llibopencv_superres2410 -llibopencv_video2410 -llibopencv_videostab2410 -  lopencv_ffmpeg2410 -llibopencv_ml2410 
src\testOpencv.o: In function `main':
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:98: undefined     reference to `cv::SimpleBlobDetector::Params::Params()'
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:110: undefined reference to     `cv::SimpleBlobDetector::SimpleBlobDetector(cv::SimpleBlobDetector::Params const&amp;)'
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:113:    undefined reference to `cv::FeatureDetector::detect(cv::Mat const&amp;,   std::vector&lt;cv::KeyPoint, std::allocator&lt;cv::KeyPoint&gt; &gt;&amp;, cv::Mat const&amp;) const'
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:117: undefined reference to `cv::drawKeypoints(cv::Mat const&amp;,   std::vector&lt;cv::KeyPoint, std::allocator&lt;cv::KeyPoint&gt; &gt; const&amp;, cv::Mat&amp;,   cv::Scalar_&lt;double&gt; const&amp;, int)'
src\testOpencv.o: In function `ZN2cv18SimpleBlobDetectorD1Ev':
C:/Development/opencv/build/include/opencv2/features2d/features2d.hpp:615: undefined reference to `vtable for cv::SimpleBlobDetector'
C:/Development/opencv/build/include/opencv2/features2d/features2d.hpp:615:undefined reference to `vtable for cv::SimpleBlobDetector'
C:/Development/opencv/build/include/opencv2/features2d/features2d.hpp:615:undefined reference to `VTT for cv::SimpleBlobDetector'
C:/Development/opencv/build/include/opencv2/features2d/features2d.hpp:615:    undefined reference to `cv::FeatureDetector::~FeatureDetector()'collect2.exe: error: ld returned 1 exit status

11:47:38 Build Finished (took 4s.111ms) &gt;
</code></pre>

<p>I am compiling in Eclipse, windows 7 - 64bits and I have tried following the reverse order for including the libraries as in this link- <a href=""https://stackoverflow.com/questions/10234894/opencv-undefined-references"">OpenCV undefined references</a>.
Below are my include files-</p>

<pre><code>#include ""opencv2/calib3d/calib3d.hpp""
#include ""opencv2/features2d/features2d.hpp""
#include ""opencv2/imgproc/imgproc.hpp""
#include ""opencv2/core/core.hpp""
#include ""opencv2/highgui/highgui.hpp""
#include ""opencv/cv.h""
#include ""opencv/highgui.h""
#include &lt;iostream&gt;
string imageName(""image/Picture7.jpg"");
if( argc &gt; 1)
{
    imageName = argv[1];
}

Mat image,grey_image, src;
src = imread(""image/lena512color.jpg"");

image = imread(imageName.c_str(), IMREAD_COLOR);

//resizing to make it a normal size
resize(image, image, src.size());

namedWindow( ""Display window"", WINDOW_AUTOSIZE ); 
imshow( ""Display window"", image ); 
// to display the image in greyscale
cvtColor(image, grey_image, CV_RGB2GRAY);//CV_BGR2GRAY);
imwrite( ""savedImage/Gray_image.jpg"", grey_image );
namedWindow(""Gray window"", WINDOW_AUTOSIZE);
imshow(""Gray window"", grey_image);
// Reduce the noise so we avoid false circle detection
GaussianBlur( grey_image, grey_image, Size(9, 9), 2, 2 );
SimpleBlobDetector::Params params;
 params.maxThreshold= 200;
 params.minThreshold = 10;
 params.filterByArea= true;
 params.minArea = 1500;
 params.filterByCircularity= true;
 params.minCircularity = 0.1;
 params.filterByConvexity= true;
 params.minConvexity = 0.87;
 params.filterByInertia= true;
 params.minInertiaRatio= 0.01;

 SimpleBlobDetector detector(params);

 vector&lt;KeyPoint&gt; keypoints;
 detector.detect(grey_image, keypoints);

 //Draw detected blobs as red circles
 Mat blob_circles;
 drawKeypoints(grey_image, keypoints, blob_circles,Scalar(0,0,255), DrawMatchesFlags:: DRAW_RICH_KEYPOINTS);
 imshow(""Keypoints"", blob_circles);

waitKey(0);
return 0;
}
</code></pre>

<p>How do I avoid these errors?</p>
",2017-05-23 10:32:33,2016-10-25 12:13:27,Undefined reference error while using Opencv: BlobDetector,<c++><eclipse><opencv><blobs>,,,CC BY-SA 3.0,True,True,False,False,True
47616,40274305,2016-10-27 00:39:32,,"<p>I have an animated GIF that shows how to reproduce a bug report.  It's often difficult to tell when the GIF starts and when it ends.</p>

<p>How can I modify the GIF with the following options?</p>

<ol>
<li>the first frame is paused with the words ""Start"" overlaid for 1 second.</li>
<li>the last frame is paused with the words ""End"" overlaid for 1 second.</li>
</ol>
",,2016-10-27 08:40:20,Pause a GIF at start and end with overlaid text to signal start and end,<image><image-processing><ffmpeg><imagemagick><gif>,,,CC BY-SA 3.0,False,False,False,False,True
47647,40278951,2016-10-27 07:42:42,,"<p>How to build opencv_ffmpeg.so like opencv_ffmpeg.dll in Windows for OpenCV use in java app.
I followed build guide of FFmpeg.org but when build completed, it just generated many lib*.so.
How to build opencv_ffmpeg.so for shipping in my java application and load it dynamically when app runs?</p>
",2016-10-27 07:57:16,2016-10-27 07:57:16,How to build opencv_ffmpeg.so for Linux/MacOS,<java><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
47734,40365599,2016-11-01 17:43:17,,"<p>I need to maintain a desktop app written in C++, using Qt and OpenCV for some video processing. As far as I understood, the decoding part of OpenCV is delegated to ffmpeg in a separate DLL for licensing reasons.</p>

<p>The development environment is on Windows 10, using QT Creator and MSVC12 64-bit as compiler. OpenCV version is 3.0, the official distribution. Here, everything runs fine, I am able to decode a video using VideoCapture::open().</p>

<p>Issues arise when I try to run the application in a standalone fashion with all the required DLLs in the same folder as the .exe file. All cases below are 64-bit OSes.</p>

<p>On a Windows 10 computer, not the same as the developement machine and no developer libraries present, the video decoding works fine. I have tested on a Windows 8 machine as well, no issues so far.</p>

<p>On Windows 7, the things get tricky. The same video files that successfully load during the previous tests are not recognized by the app at all i.e. the isOpened call on VideoCapture returns false. For further testing, I stripped the opencv_ffmpeg300_64.dll file to narrow down the issue on Windows 10 and 8; as expected, without this DLL the app is no more able to open the same video files.</p>

<p>It seems that the DLL is simply not recognized on Windows 7.</p>

<p>Edit: Further investigation using Process Explorer clearly shows that the aforementioned DLL is not loaded when the app runs on Windows 7.</p>

<ul>
<li>Is there something specific about how Windows 7 manages the DLL path resolution and eventual security measures? Seems normal that the first search location is the same folder as the executable, which is the case here.</li>
</ul>

<p>I have tried to trace using WinApiOverride32, with no results.</p>
",2016-11-02 15:40:07,2018-04-04 13:49:25,"OpenCV ffmpeg DLL not loaded when running app on Windows 7, works on 8 and 10",<c++><opencv><ffmpeg><windows-7>,,,CC BY-SA 3.0,True,False,False,False,True
47753,40526934,2016-11-10 11:50:40,,"<p>I am trying to cross compile opencv with ffmpeg support for an arm board with a buildroot based custom linux.  The host is an ubuntu PC.</p>

<p>I want static opencv libraries.</p>

<p>I have downloaded ffmpeg source and crosscompiled it with the following configuration</p>

<pre><code>./configure \
--enable-cross-compile \
--cross-prefix=arm-linux-gnueabihf- \
--target-os=linux \
--arch=arm \
--disable-static \
--enable-shared \
--enable-nonfree \
--enable-ffmpeg \
--enable-gpl \
--enable-swscale \
--enable-pthreads \
--disable-yasm \
--disable-stripping \
--prefix=../build \
--extra-cflags=-I../build/include --extra-ldflags=-L../build/lib
</code></pre>

<p>The paths are all correct and ffmpeg is built successfully.  Then when I try to configure opencv with cmake-gui, I have to manually specify all paths.<br>
But despite this, opencv configuration is unable to resolve FFMPEG correctly</p>

<p>I have attached the screen shot below</p>

<p><a href=""https://i.stack.imgur.com/L9bNW.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/L9bNW.png"" alt=""CMAKE-GUI""></a></p>

<p>It cannot resolve ffmpeg versions.  I tried to ignore it and build but it fails with linker error</p>

<pre><code>Linking CXX static library ../../lib/libopencv_features2d.a
[ 49%] Built target opencv_features2d
make: *** [all] Error 2
</code></pre>
",,2016-11-10 11:50:40,Crosscompile OpenCV with FFMPEG support,<c++><opencv><ffmpeg><cmake><arm>,,,CC BY-SA 3.0,True,False,False,False,True
47776,40263839,2016-10-26 13:38:46,,"<p>I am using Eclipse CDT on windows 7 64 bit and trying to work on Image Class using Image Magick but I am getting the below error-</p>

<pre><code>#pragma warning(once: 4459) /* 'identifier' : declaration of 'foo' hides    global declaration */
g++ ""-LC:\\Development\\ImageMagick-7.0.3-Q16\\lib"" ""-     LC:\\Development\\opencv\\MINGW\\x86\\bin"" -o testOpencv.exe ""src\\testOpencv.o""    -llibopencv_features2d2410 -lCORE_RL_Magick++_ -lCORE_RL_MagickCore_ -   lCORE_RL_MagickWand_ -llibopencv_objdetect2410 -llibopencv_contrib2410 -  llibopencv_core2410 -llibopencv_flann2410 -llibopencv_gpu2410 -  llibopencv_highgui2410 -llibopencv_imgproc2410 -llibopencv_ml2410 -  llibopencv_legacy2410 -llibopencv_nonfree2410 -llibopencv_objdetect2410 -  llibopencv_ocl2410 -llibopencv_photo2410 -llibopencv_stitching2410 -  llibopencv_superres2410 -llibopencv_video2410 -llibopencv_videostab2410 - lopencv_ffmpeg2410 -llibopencv_ml2410 
src\testOpencv.o: In function `main':
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:14: undefined  reference to `Magick::Image::Image()'
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:15: undefined  reference to `Magick::Image::read(std::string const&amp;)'
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:16: undefined reference to `Magick::Image::display()'
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:16: undefined reference to `Magick::Image::~Image()'
C:\Development\Workspace\testOpencv\Debug/../src/testOpencv.cpp:16: undefined reference to `Magick::Image::~Image()'
collect2.exe: error: ld returned 1 exit status

14:28:39 Build Finished (took 847ms)
</code></pre>

<p>I have added includes file to compiler and Library files in the linker in Eclipse. The library file in Image magick installed folder look strange to me, as they are not '.dll' files. Please let me know if I am right and how do i rectify this.</p>

<p><img src=""https://i.stack.imgur.com/0XU3p.png"" alt=""lib files""></p>
",2016-10-26 15:21:11,2016-10-26 15:21:11,Undefined reference to Magick::Image ::Image() in eclipse c++,<c++><eclipse><image-processing><imagemagick>,,,CC BY-SA 3.0,True,False,False,False,True
47826,40336363,2016-10-31 03:56:19,,"<p>I am capturing images from <strong>UVC</strong> web cam <i>/dev/video0</i> and convert them to jpeg and send them to my OCR server using Linux (Intel Edison - Yocto linux to be exact)</p>

<p>Currently I am using </p>

<blockquote>
  <p>ffmpeg</p>
</blockquote>

<p>as my capturing software. This is the command I use to capture the image. </p>

<pre><code>./ffmpeg -s 640x640 -f video4linux2 -i /dev/video0 -vframes 1 image.jpeg; 
</code></pre>

<p>This command takes around 2 seconds to complete which is bad for me to implement realtime OCR.</p>

<p>Is there a fast method to capture from my UVC webcam? Is there a way to keep the video device open always and grab a frame faster. Uncompressed images may not be an option because Im sending the photo using WIFI</p>

<p>I have tried different image capturing softwares like <strong>fswebcam</strong> and <strong>MPlayer</strong> ( <a href=""http://www.netinstructions.com/automating-picture-capture-using-webcams-on-linuxubuntu/"" rel=""nofollow"">Found here</a> ) but the time is not improved.</p>
",,2016-10-31 03:56:19,Fastest way to capture from webcams linux,<linux><opencv><video><ffmpeg><webcam>,,,CC BY-SA 3.0,True,False,False,False,True
47888,40454019,2016-11-06 20:12:39,,"<p>I've been working on piping video from OpenCV in C++. I've tried to pipe the image after processing from OpenCV to a named pipe with the end goal of republishing the stream using a webserver either with VLC or a NodeJS server.</p>

<p>Where I'm stuck is that the output from OpenCV doesn't seem to be processing correctly. The video always has artifacts even though it should be the raw video.</p>

<p><a href=""https://i.stack.imgur.com/82qfR.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/82qfR.png"" alt=""enter image description here""></a></p>

<pre class=""lang-cpp prettyprint-override""><code>int main(int argc, char** argv)
{

    VideoCapture camera(argv[1]);

    float fps = 15;

    // VLC raw video
    printf(""Run command:\n\ncat /tmp/myfifo | cvlc --demux=rawvideo --rawvid-fps=%4.2f --rawvid-width=%.0f --rawvid-height=%.0f  --rawvid-chroma=RV24 - --sout \""#transcode{vcodec=h264,vb=200,fps=30,width=320,height=240}:std{access=http{mime=video/x-flv},mux=ffmpeg{mux=flv},dst=:8081/stream.flv}\""""
        ,fps
        ,camera.get(CV_CAP_PROP_FRAME_WIDTH)
        ,camera.get(CV_CAP_PROP_FRAME_HEIGHT)
        );


    // ffplay raw video
    printf(""Run command:\n\ncat /tmp/myfifo | ffplay -f rawvideo -pixel_format bgr24 -video_size %.0fx%.0f -framerate %4.2f -i pipe:""
        ,camera.get(CV_CAP_PROP_FRAME_WIDTH)
        ,camera.get(CV_CAP_PROP_FRAME_HEIGHT)
        ,fps
        );

    int fd;
    int status;

    char const * myFIFO = ""/tmp/myfifo"";

    if ((status = mkfifo(myFIFO, 0666)) &lt; 0) { 
        // printf(""Fifo mkfifo error: %s\n"", strerror(errno)); 
        // exit(EXIT_FAILURE);
    } else {
        cout &lt;&lt; ""Made a named pipe at: "" &lt;&lt; myFIFO &lt;&lt; endl;
    }

    cout &lt;&lt; ""\n\nHit any key to continue after running one of the previously listed commands..."" &lt;&lt; endl;
    cin.get();

    if ((fd = open(myFIFO,O_WRONLY|O_NONBLOCK)) &lt; 0) {
        printf(""Fifo open error: %s\n"", strerror(errno));
        exit(EXIT_FAILURE);
    }   

    while (true)
    {
        if (waitKey(1) &gt; 0)
        {
            break;    
        }

        Mat colorImage;
        camera &gt;&gt; colorImage; 

        // method: named pipe as matrix writes data to the named pipe, but image has glitch
        size_t bytes = colorImage.total() * colorImage.elemSize();

        if (write(fd, colorImage.data, bytes) &lt; 0) {
            printf(""Error in write: %s \n"", strerror(errno)); 
        }            
    }

    close(fd);

    exit(EXIT_SUCCESS);
}
</code></pre>
",,2017-07-13 02:00:31,OpenCV to ffplay from named pipe (fifo),<c++><opencv><ffmpeg><vlc>,,,CC BY-SA 3.0,True,True,False,False,True
47984,40388321,2016-11-02 19:35:33,,"<p>Recently I upgraded my OS from Ubuntu Precise Saucy (13.10) to Trusty (14.04).  After this upgrade, cv::VideoCapture became not working properly.  The program aborts when reading a video file.  For example,</p>

<pre><code>int main(int argc, char**argv)
{
  cv::VideoCapture vin(""sample/vout2l.avi"");
...
</code></pre>

<p>Executing this program, it aborts with a message:</p>

<pre><code>*** Error in `./cv2-videoread.out': malloc(): memory corruption: 0x0000000000e3eff0 ***
Abort (core dumped)
</code></pre>

<p>The backtrace looks like:</p>

<pre><code>[New LWP 15586]
[New LWP 15587]
[Thread debugging using libthread_db enabled]
Using host libthread_db library ""/lib/x86_64-linux-gnu/libthread_db.so.1"".
Core was generated by `./cv2-videoread.out'.
Program terminated with signal SIGABRT, Aborted.
#0  0x00007ff953e61c37 in raise () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) bt
#0  0x00007ff953e61c37 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ff953e65028 in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007ff953e9e2a4 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007ff953eabe26 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#4  0x00007ff953eac1ab in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#5  0x00007ff953eadba4 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#6  0x00007ff953eaf7d2 in posix_memalign () from /lib/x86_64-linux-gnu/libc.so.6
#7  0x00007ff94fa640fe in av_malloc () from /usr/lib/x86_64-linux-gnu/libavutil.so.52
#8  0x00007ff94fa641b1 in av_strdup () from /usr/lib/x86_64-linux-gnu/libavutil.so.52
#9  0x00007ff94fa5e5db in av_dict_set ()
  from /usr/lib/x86_64-linux-gnu/libavutil.so.52
#10 0x00007ff954738574 in CvCapture_FFMPEG::open(char const*) ()
  from /usr/lib/libopencv_highgui.so.2.4
#11 0x00007ff954738719 in cvCreateFileCapture_FFMPEG ()
  from /usr/lib/libopencv_highgui.so.2.4
#12 0x00007ff95473aac9 in cvCreateFileCapture_FFMPEG_proxy(char const*) ()
  from /usr/lib/libopencv_highgui.so.2.4
---Type &lt;return&gt; to continue, or q &lt;return&gt; to quit---
#13 0x00007ff954722d89 in cvCreateFileCapture ()
  from /usr/lib/libopencv_highgui.so.2.4
#14 0x00007ff954723045 in cv::VideoCapture::open(std::string const&amp;) ()
  from /usr/lib/libopencv_highgui.so.2.4
#15 0x00007ff95472315c in cv::VideoCapture::VideoCapture(std::string const&amp;) ()
  from /usr/lib/libopencv_highgui.so.2.4
#16 0x0000000000401281 in main (argc=1, argv=0x7fff1f938388) at cv2-videoread.cpp:30
(gdb)
</code></pre>

<p>NOTE: <code>cv::VideoCapture vin(...</code> is 30th line.</p>

<p>Before upgrading the OS, this code was working with the same input file.</p>

<p>From the backtrace, it seems that the trouble happens at <code>CvCapture_FFMPEG</code> and <code>libavutil</code>.  I upgraded the packages <code>ffmpeg libavutil-dev libavutil51 libavutil52</code> but they were already up-to-date.
Also, OpenCV packages are up-to-date (I checked <code>libopencv-core-dev libopencv-core2.4 libopencv-dev libopencv-highgui-dev libopencv-highgui2.4</code>).</p>

<p>I also tested OpenCV built from source, but got the same results.</p>

<p>Do you have ideas to figure this out?</p>
",,2017-08-09 09:05:04,OpenCV-C++ VideoCapture fails to open video files,<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
48109,40556687,2016-11-11 21:43:26,,"<p>I'm creating C++ Unity plugin in Xcode with OpenCV for OS X. The plugin compiles and works on my Mac, but on other machines it tries to load dynamic libraries (for example, ffmpeg, libtiff, webp) from /usr/local/opt...  (Library not loaded: /usr/local/opt/webp/lib/libwebp.6.dylib etc.)</p>

<p>Brew install  solves the problem, but it is necessary to distribute this plugin ""as is"".</p>

<p>I have 2 questions:
1) how can I know if my project will try to use dynamic libraries (on other machine)?</p>

<p>2) how can I make my project to load them from bundle, not from /usr/local/opt? (I tried link with -static, but there were 136 errors ""Undefined symbols for architecture x86_64 - _OSSpinLockLock, _dispatch_get_global_queue and many others).</p>
",,2016-11-11 22:48:34,How to avoid loading dynamic libraries on other machine in C++ project (XCode)?,<c++><xcode><macos><opencv><dylib>,,,CC BY-SA 3.0,True,False,False,False,True
48179,40619532,2016-11-15 20:55:27,,"<p>Working environment:</p>

<ul>
<li>Ubuntu 14.04 with stock dev. tools (CMake 3.4.3, GCC 4.8.4 ..)</li>
<li>OpenCV 3.1.0</li>
<li>CUDA 7.5</li>
</ul>

<p>OpenCV builds and installs OK build with the following cmake configuration and all ""normal"" functionality works as expected</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=DEBUG -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_CUDA=ON -D ENABLE_FAST_MATH=1 -D CUDA_FAST_MATH=1 -D WITH_CUBLAS=1 -D OPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.1.0/modules -D PYTHON_INCLUDE_DIR=$(python-config --prefix)/include/python2.7 -D BUILD_TESTS=OFF -D BUILD_PERF_TESTS=OFF -D BUILD_DOCS=OFF -D BUILD_EXAMPLES=ON ..
</code></pre>

<p>OpenCV configuration reported by cmake:</p>

<pre><code>-- General configuration for OpenCV 3.1.0 =====================================
--   Version control:               d097d6d
-- 
--   Platform:
--     Host:                        Linux 4.2.0-27-generic x86_64
--     CMake:                       3.4.3
--     CMake generator:             Unix Makefiles
--     CMake build tool:            /usr/bin/make
--     Configuration:               DEBUG
-- 
--   C/C++:
--     Built as dynamic libs?:      YES
--     C++ Compiler:                /usr/bin/c++  (ver 4.8.4)
--     C++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -O3 -DNDEBUG  -DNDEBUG
--     C++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG
--     C Compiler:                  /usr/bin/cc
--     C flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -O3 -DNDEBUG  -DNDEBUG
--     C flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wno-narrowing -fdiagnostics-show-option -Wno-long-long -pthread -fomit-frame-pointer -ffast-math -msse -msse2 -mno-avx -msse3 -mno-ssse3 -mno-sse4.1 -mno-sse4.2 -ffunction-sections -fvisibility=hidden -g  -O0 -DDEBUG -D_DEBUG
--     Linker flags (Release):
--     Linker flags (Debug):
--     Precompiled headers:         YES
--     Extra dependencies:          /usr/lib/x86_64-linux-gnu/libpng.so /usr/lib/x86_64-linux-gnu/libz.so /usr/lib/x86_64-linux-gnu/libtiff.so /usr/lib/x86_64-linux-gnu/libjasper.so /usr/lib/x86_64-linux-gnu/libjpeg.so gtk-x11-2.0 gdk-x11-2.0 atk-1.0 gio-2.0 pangoft2-1.0 pangocairo-1.0 gdk_pixbuf-2.0 cairo pango-1.0 fontconfig gobject-2.0 freetype gthread-2.0 glib-2.0 dc1394 v4l1 v4l2 avcodec avformat avutil swscale dl m pthread rt cudart nppc nppi npps cublas cufft -L/usr/local/cuda/lib64
--     3rdparty dependencies:       libwebp IlmImf libprotobuf
-- 
--   OpenCV modules:
--     To be built:                 cudev core cudaarithm flann imgproc ml reg surface_matching video cudabgsegm cudafilters cudaimgproc cudawarping dnn fuzzy imgcodecs photo shape videoio cudacodec highgui objdetect plot xobjdetect xphoto bgsegm bioinspired dpm face features2d line_descriptor saliency text calib3d ccalib cudafeatures2d cudalegacy cudaobjdetect cudaoptflow cudastereo datasets rgbd stereo structured_light superres tracking videostab xfeatures2d ximgproc aruco optflow stitching python2
--     Disabled:                    world contrib_world
--     Disabled by dependency:      -
--     Unavailable:                 java python3 ts viz cvv hdf matlab sfm
-- 
--   GUI: 
--     QT:                          NO
--     GTK+ 2.x:                    YES (ver 2.24.23)
--     GThread :                    YES (ver 2.40.2)
--     GtkGlExt:                    NO
--     OpenGL support:              NO
--     VTK support:                 NO
-- 
--   Media I/O: 
--     ZLib:                        /usr/lib/x86_64-linux-gnu/libz.so (ver 1.2.8)
--     JPEG:                        /usr/lib/x86_64-linux-gnu/libjpeg.so (ver )
--     WEBP:                        build (ver 0.3.1)
--     PNG:                         /usr/lib/x86_64-linux-gnu/libpng.so (ver 1.2.50)
--     TIFF:                        /usr/lib/x86_64-linux-gnu/libtiff.so (ver 42 - 4.0.3)
--     JPEG 2000:                   /usr/lib/x86_64-linux-gnu/libjasper.so (ver 1.900.1)
--     OpenEXR:                     build (ver 1.7.1)
--     GDAL:                        NO
-- 
--   Video I/O:
--     DC1394 1.x:                  NO
--     DC1394 2.x:                  YES (ver 2.2.1)
--     FFMPEG:                      YES
--       codec:                     YES (ver 54.35.0)
--       format:                    YES (ver 54.20.4)
--       util:                      YES (ver 52.3.0)
--       swscale:                   YES (ver 2.1.1)
--       resample:                  NO
--       gentoo-style:              YES
--     GStreamer:                   NO
--     OpenNI:                      NO
--     OpenNI PrimeSensor Modules:  NO
--     OpenNI2:                     NO
--     PvAPI:                       NO
--     GigEVisionSDK:               NO
--     UniCap:                      NO
--     UniCap ucil:                 NO
--     V4L/V4L2:                    Using libv4l1 (ver 1.0.1) / libv4l2 (ver 1.0.1)
--     XIMEA:                       NO
--     Xine:                        NO
--     gPhoto2:                     NO
-- 
--   Parallel framework:            pthreads
-- 
--   Other third-party libraries:
--     Use IPP:                     9.0.1 [9.0.1]
--          at:                     /home/developer/projects/opencv/3rdparty/ippicv/unpack/ippicv_lnx
--     Use IPP Async:               NO
--     Use VA:                      NO
--     Use Intel VA-API/OpenCL:     NO
--     Use Eigen:                   NO
--     Use Cuda:                    YES (ver 7.5)
--     Use OpenCL:                  YES
--     Use custom HAL:              NO
-- 
--   NVIDIA CUDA
--     Use CUFFT:                   YES
--     Use CUBLAS:                  YES
--     USE NVCUVID:                 NO
--     NVIDIA GPU arch:             20 21 30 35
--     NVIDIA PTX archs:            30
--     Use fast math:               YES
-- 
--   OpenCL:
--     Version:                     dynamic
--     Include path:                /home/developer/projects/opencv/3rdparty/include/opencl/1.2
--     Use AMDFFT:                  NO
--     Use AMDBLAS:                 NO
-- 
--   Python 2:
--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.6)
--     Libraries:                   /usr/lib/x86_64-linux-gnu/libpython2.7.so (ver 2.7.6)
--     numpy:                       /usr/lib/python2.7/dist-packages/numpy/core/include (ver 1.8.2)
--     packages path:               lib/python2.7/dist-packages
-- 
--   Python 3:
--     Interpreter:                 /usr/bin/python3.4 (ver 3.4.3)
-- 
--   Python (for build):            /usr/bin/python2.7
-- 
--   Java:
--     ant:                         NO
--     JNI:                         NO
--     Java wrappers:               NO
--     Java tests:                  NO
-- 
--   Matlab:                        Matlab not found or implicitly disabled
-- 
--   Tests and samples:
--     Tests:                       NO
--     Performance tests:           NO
--     C/C++ Examples:              YES
-- 
--   Install path:                  /usr/local
-- 
--   cvconfig.h is in:              /home/developer/projects/opencv/build
-- -----------------------------------------------------------------
</code></pre>

<p><strong>However</strong> any attempt to call opencv gpu accelerated CUDA functionality results in segmentation faults.  None of the sample projects in samples/gpu will run properly.  It seems that non-trivial CUDA functions seg fault within the initial function call, however have observed a couple of trivial CUDA functions such as getCudaEnabledDeviceCount() and printShortCudaDeviceInfo() do appear to execute OK and return sensible data, however subsequent opencv calls (<strong>not necessarily CUDA functions</strong>) will subsequently seg fault.</p>

<p>I have tried building and running a couple of CUDA library samples from /usr/local/cuda-7.5/samples  (1_utilities/deviceQuery,  1_utilities/bandwithTest) and they seem fine.</p>

<p>Simple program that exhibits problem:</p>

<p>makefile</p>

<pre><code>CFLAGS = `pkg-config --cflags opencv`
LIBS = `pkg-config --libs opencv`

fail : fail.cpp
        g++ $(CFLAGS) $&lt; $(LIBS) -o $@
</code></pre>

<p>fail.cpp</p>

<pre><code>#include ""opencv2/cvconfig.h""
#include ""opencv2/core.hpp""
#include ""opencv2/cudaarithm.hpp""

using namespace std;
using namespace cv;
using namespace cv::cuda;


int main(int argc, const char* argv[])
{
    int i = getCudaEnabledDeviceCount();    

    Mat src(1000, 1000, CV_32F);
    Mat dst;

    printf(""got to here #1\n"");

    cv::transpose(src, dst);   

    printf(""got to here #2\n"");

    return 0;
}
</code></pre>

<p>Program output:</p>

<pre><code>got to here #1
Segmentation fault (core dumped)
</code></pre>

<p>Comment out the getCudaEnabledDeviceCount() statement and it runs to completion as expected.</p>

<p>Sort of smells like a calling convention mismatch between the opencv and CUDA libraries or something similar, but would have thought this should ""just work""...</p>

<p>[edit]</p>

<p>with core dumps enabled get the following call stack in gdb...</p>

<pre><code>developer@odin:~/projects/temp/opencv_CUDA$ gdb -c core -e fail
GNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.2) 7.7.1
Copyright (C) 2014 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type ""show copying""
and ""show warranty"" for details.
This GDB was configured as ""x86_64-linux-gnu"".
Type ""show configuration"" for configuration details.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
Find the GDB manual and other documentation resources online at:
&lt;http://www.gnu.org/software/gdb/documentation/&gt;.
For help, type ""help"".
Type ""apropos word"" to search for commands related to ""word"".

warning: exec file is newer than core file.
[New LWP 28690]
[New LWP 28691]
[Thread debugging using libthread_db enabled]
Using host libthread_db library ""/lib/x86_64-linux-gnu/libthread_db.so.1"".
Core was generated by `./fail'.
Program terminated with signal SIGSEGV, Segmentation fault.
#0  __GI___pthread_mutex_lock (mutex=0x0) at ../nptl/pthread_mutex_lock.c:66
66  ../nptl/pthread_mutex_lock.c: No such file or directory.
(gdb) bt
#0  __GI___pthread_mutex_lock (mutex=0x0) at ../nptl/pthread_mutex_lock.c:66
#1  0x00007f9e85782008 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#2  0x00007f9e85836671 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#3  0x00007f9e858367e5 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#4  0x00007f9e85787cb4 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#5  0x00007f9e857894e7 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#6  0x00007f9e8575cc66 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#7  0x00007f9e8565bf3d in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#8  0x00007f9e8565bed8 in ?? () from /usr/lib/x86_64-linux-gnu/libnvidia-opencl.so.1
#9  0x00007f9e85fe2022 in ?? () from /usr/local/cuda/lib64/libOpenCL.so
#10 0x00007f9e85fe3d42 in ?? () from /usr/local/cuda/lib64/libOpenCL.so
#11 0x00007f9e85fe34d0 in clGetPlatformIDs () from /usr/local/cuda/lib64/libOpenCL.so
#12 0x00007f9e895cea83 in (anonymous namespace)::opencl_fn3&lt;58, int, unsigned int, _cl_platform_id**, unsigned int*&gt;::switch_fn (p1=0, p2=0x0, 
p3=0x7ffe56410aac) at /home/developer/projects/opencv/modules/core/src/opencl/runtime/autogenerated/opencl_core_impl.hpp:127
#13 0x00007f9e8965c452 in cv::ocl::haveOpenCL () at /home/developer/projects/opencv/modules/core/src/ocl.cpp:1466
#14 0x00007f9e8965c4af in cv::ocl::useOpenCL () at /home/developer/projects/opencv/modules/core/src/ocl.cpp:1487
#15 0x00007f9e896a6962 in cv::transpose (_src=..., _dst=...) at /home/developer/projects/opencv/modules/core/src/matrix.cpp:3235
#16 0x0000000000400f3c in ?? ()
#17 0x00007ffe56410e88 in ?? ()
#18 0x0000000156410df8 in ?? ()
#19 0x00007ffe56410dd0 in ?? ()
#20 0x000000018a755d48 in ?? ()
#21 0x0000000001010000 in ?? ()
#22 0x00007ffe56410cd0 in ?? ()
#23 0x0000000000000000 in ?? ()
</code></pre>
",2017-06-27 06:06:53,2017-06-27 06:06:53,Segmentation faults when trying to use any CUDA functionality,<opencv><cuda>,,,CC BY-SA 3.0,True,True,False,False,True
48399,40866606,2016-11-29 13:02:44,,"<p>I built OpenCV binaries(.dll) using Cmake &amp; visual studio which generated .pdb file  which helped me to find the issue in code (Partially!)</p>

<p><strong>How this Crash is being caused. .</strong><Br>
I'm using a software with which we can set internet download speed limit (transfer rate) for any particular program.</p>

<p>Now if i connect IP camera to the code below, i noticed that my app needs around 100Kb/s of internet usage (transfer rate)  - only then i can watch live stream seamlessly.
Lets say i cut down (set) my application internet usage to 10Kb/s <em>[This is the reason behind crash]</em>
in this case, i should be able to see a new frame once in 4+ seconds. </p>

<p>I'm getting access violation error probably because (<code>cap&gt;&gt;img;</code>) cap is trying to reach a location in ram &amp; get the frame but there is no frame YET because its still being downloaded due to low internet speed.<Br>
Clearly the pointer is reaching some location in ram to grab a frame which is not yet present.</p>

<p><strong>Some interesting behaviour . . .</strong></p>

<pre><code>Void OpenCamera()
{
    VideoCapture cap(""http://192.168.1.3:8080/video?x.xmjpeg"");
    Mat img;
    while(true)
    {
      try
      {
        if(cap.isOpened()) //also tried grab + retrieve, crashes at grab
        cap&gt;&gt;img; //code crashes here
      }
      catch(...)
      {
        cout&lt;&lt;""Camera Disconnected""&lt;&lt;endl;
      }
    }
}
</code></pre>

<p>If i use the entire code  in same class (within same header file), there is no problem at all(new frame is displayed after 4+ seconds without crashing the program) but if i put the code into a separate class(different header file), then call the function to open camera from a class object, then it crashes <strong>if</strong> <strong>internet speed is cut down</strong>.<Br>
weird behavior - if i debug step by step, it never crashes!<Br></p>

<p>when i build opencv library with ffmpeg , i get .pdb file only for opencv (opencv_world310.pdb)- so no issue debugging using call stack
but i do not get pdb for ffmpeg (because Opencv_ffmpeg.dll is precompiled and that is where its crashing)</p>

<p>hence its getting hard to debug, <a href=""https://github.com/opencv/opencv/blob/2b2e3ee93c6788b892b084cc04d0ead5ab75c197/3rdparty/ffmpeg/build_win32.txt"" rel=""nofollow noreferrer"">building ffmpeg</a> doesn't produce pdb file cause its built using MSYS<Br> so is it possible to debug with what we have?</p>

<p>I'm including snapshot from visual studio debugging,
some of the variables that will help in understanding:</p>

<pre><code>typedef int (*CvGrabFrame_Plugin)( void* capture_handle );      [cap_ffmpeg_api.cpp]
protected: void* ffmpegCapture;                                 [cap_ffmpeg.cpp]
static CvGrabFrame_Plugin icvGrabFrame_FFMPEG_p = 0;            [cap_ffmpeg.cpp]
</code></pre>

<p><a href=""https://i.stack.imgur.com/7KhhW.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7KhhW.jpg"" alt=""enter image description here""></a></p>

<blockquote>
  <p>Exception thrown at 0x0A0AF6F0 (opencv_ffmpeg310.dll) in Sample.exe:
  0xC0000005: Access violation reading location 0x00000020. If there is
  a handler for this exception, the program may be safely continued.</p>
</blockquote>

<p>in source code i included below line &amp; compiled &amp; used it in project - didn't work, crashed again!
<code>if(ffmpegCapture)</code>       -  null pointer check</p>

<p>can we make some changes at line 214 in <a href=""https://github.com/opencv/opencv/blob/master/modules/videoio/src/cap_ffmpeg.cpp#L181"" rel=""nofollow noreferrer"">[cap_ffmpeg.cpp]</a> to avoid crash?<BR>
other header files are just one folder up. </p>

<p><strong>Update:</strong> I noticed that program crashes immediately when i limit internet consumption speed. I'm using C++/Cli(winforms, target dot net Framework = 4.6), i have CameraClass (in separate header file) &amp; main function in (separate header file)<Br> Main function has below code<Br></p>

<pre><code>CameraClass ^CC = gcnew CameraClass();
CC-&gt;OpenCamera();
</code></pre>

<p>i cannot create non manged object type within managed class, so i put native types(Opencv variables) into separate namespace like below, so that i can use within this class. probably i have to use interior pointers?</p>

<pre><code>#pragma once
#include""opencv2\opencv.hpp""
#include &lt;msclr\marshal_cppstd.h&gt;

namespace SampleApp{

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    using namespace System::Threading;  
    using namespace System::IO;
    using namespace std;

   namespace
    {
        cv::VideoCapture cap[5];  //max 5 instance for this class
        cv::Mat image[5];
        cv::IplImage pic1[5];
        cv::IplImage *pic2[5];
    }

public ref class CamWindow : public WeifenLuo::WinFormsUI::Docking::DockContent
{
    public: CamWindow(void)
    {
            InitializeComponent();
    }
    Void OpenCamera()
    {


    }
.
.
.
.
};
}
</code></pre>

<p>definitely clash between .net memory handling &amp; C++ memory handling?</p>
",2016-12-03 04:45:07,2016-12-09 04:35:26,Debugging in Visual Studio without Pdb files (C++ Access Voilation),<c++><opencv><visual-c++><memory-management><c++-cli>,,,CC BY-SA 3.0,True,True,False,False,True
48406,40902334,2016-12-01 03:51:25,,"<p>Does anyone know how to add text, image while recording video using FFmpegFrameRecorder from JavaCV? I have searched everywhere but got nothing</p>
",,2016-12-01 06:35:13,FFmpegFrameRecorder add text / image while recording,<android><ffmpeg><javacv><android-ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
48434,40832984,2016-11-27 19:27:25,,"<p>I am trying to find the start + end time of a person appears in a video.
My current approach is to find the person using face detection, and then track his face using dlib object tracking (i.e. if the person is turning around in the video, i can't know that he is still in the video using face recognition. Therefore i need both detection and tracking techniques).</p>

<p>The problem is that the object tracking still tracks after an object, even if there was a camera shot cut or scene changed.</p>

<p>So, I tried to initialize the tracking object every shot. But, it's not so easy to detect the shots. even with very high sensitivity, ffmpeg and <a href=""http://mklab.iti.gr/project/video-shot-segm"" rel=""nofollow noreferrer"">http://mklab.iti.gr/project/video-shot-segm</a> don't return all of the shot cuts.</p>

<p>So, it turns out that I need to compare the object rectangle of the previous frame, with the rectangle detected in the current frame.</p>

<p>Any idea of a function that can give me a ""similarity score"" between two rectangles in two frames?</p>
",,2016-11-27 19:27:25,Dlib - Object tracking over several shots,<python><opencv><dlib>,,,CC BY-SA 3.0,True,False,False,False,True
48504,40800489,2016-11-25 08:22:31,,"<p>I want to apply processing to a video clip with sound track, extract and process frame by frame and write result to output file. Number of frames, size of frame and speed remains unchanged in output clip. Also I want to keep the same audio track as I have in source.</p>

<p>I can read clip, decode frames and process then using opencv. Audio packets are also writes fine. I'm stuck on forming output video stream. </p>

<p>The minimal runnable code I have for now (sorry it not so short, but cant do it shorter):</p>

<pre><code>extern ""C"" {
#include &lt;libavutil/timestamp.h&gt;
#include &lt;libavformat/avformat.h&gt;
#include ""libavcodec/avcodec.h""
#include &lt;libavutil/opt.h&gt;
#include &lt;libavdevice/avdevice.h&gt;
#include &lt;libswscale/swscale.h&gt;
}
#include ""opencv2/opencv.hpp""

#if LIBAVCODEC_VERSION_INT &lt; AV_VERSION_INT(55,28,1)
#define av_frame_alloc  avcodec_alloc_frame
#endif

using namespace std;
using namespace cv;

static void log_packet(const AVFormatContext *fmt_ctx, const AVPacket *pkt, const char *tag)
{
    AVRational *time_base = &amp;fmt_ctx-&gt;streams[pkt-&gt;stream_index]-&gt;time_base;

    char buf1[AV_TS_MAX_STRING_SIZE] = { 0 };
    av_ts_make_string(buf1, pkt-&gt;pts);
    char buf2[AV_TS_MAX_STRING_SIZE] = { 0 };
    av_ts_make_string(buf1, pkt-&gt;dts);
    char buf3[AV_TS_MAX_STRING_SIZE] = { 0 };
    av_ts_make_string(buf1, pkt-&gt;duration);

    char buf4[AV_TS_MAX_STRING_SIZE] = { 0 };
    av_ts_make_time_string(buf1, pkt-&gt;pts, time_base);
    char buf5[AV_TS_MAX_STRING_SIZE] = { 0 };
    av_ts_make_time_string(buf1, pkt-&gt;dts, time_base);
    char buf6[AV_TS_MAX_STRING_SIZE] = { 0 };
    av_ts_make_time_string(buf1, pkt-&gt;duration, time_base);

    printf(""pts:%s pts_time:%s dts:%s dts_time:%s duration:%s duration_time:%s stream_index:%d\n"",
        buf1, buf4,
        buf2, buf5,
        buf3, buf6,
        pkt-&gt;stream_index);

}


int main(int argc, char **argv)
{
    AVOutputFormat *ofmt = NULL;
    AVFormatContext *ifmt_ctx = NULL, *ofmt_ctx = NULL;
    AVPacket pkt;
    AVFrame *pFrame = NULL;
    AVFrame *pFrameRGB = NULL;
    int frameFinished = 0;
    pFrame = av_frame_alloc();
    pFrameRGB = av_frame_alloc();

    const char *in_filename, *out_filename;
    int ret, i;
    in_filename = ""../../TestClips/Audio Video Sync Test.mp4"";
    out_filename = ""out.mp4"";

    // Initialize FFMPEG
    av_register_all();
    // Get input file format context
    if ((ret = avformat_open_input(&amp;ifmt_ctx, in_filename, 0, 0)) &lt; 0)
    {
        fprintf(stderr, ""Could not open input file '%s'"", in_filename);
        goto end;
    }
    // Extract streams description
    if ((ret = avformat_find_stream_info(ifmt_ctx, 0)) &lt; 0)
    {
        fprintf(stderr, ""Failed to retrieve input stream information"");
        goto end;
    }
    // Print detailed information about the input or output format,
    // such as duration, bitrate, streams, container, programs, metadata, side data, codec and time base.
    av_dump_format(ifmt_ctx, 0, in_filename, 0);

    // Allocate an AVFormatContext for an output format.
    avformat_alloc_output_context2(&amp;ofmt_ctx, NULL, NULL, out_filename);
    if (!ofmt_ctx)
    {
        fprintf(stderr, ""Could not create output context\n"");
        ret = AVERROR_UNKNOWN;
        goto end;
    }

    // The output container format.
    ofmt = ofmt_ctx-&gt;oformat;

    // Allocating output streams
    for (i = 0; i &lt; ifmt_ctx-&gt;nb_streams; i++)
    {
        AVStream *in_stream = ifmt_ctx-&gt;streams[i];
        AVStream *out_stream = avformat_new_stream(ofmt_ctx, in_stream-&gt;codec-&gt;codec);
        if (!out_stream)
        {
            fprintf(stderr, ""Failed allocating output stream\n"");
            ret = AVERROR_UNKNOWN;
            goto end;
        }
        ret = avcodec_copy_context(out_stream-&gt;codec, in_stream-&gt;codec);
        if (ret &lt; 0)
        {
            fprintf(stderr, ""Failed to copy context from input to output stream codec context\n"");
            goto end;
        }
        out_stream-&gt;codec-&gt;codec_tag = 0;
        if (ofmt_ctx-&gt;oformat-&gt;flags &amp; AVFMT_GLOBALHEADER)
        {
            out_stream-&gt;codec-&gt;flags |= AV_CODEC_FLAG_GLOBAL_HEADER;
        }
    }

    // Show output format info
    av_dump_format(ofmt_ctx, 0, out_filename, 1);

    // Open output file
    if (!(ofmt-&gt;flags &amp; AVFMT_NOFILE))
    {
        ret = avio_open(&amp;ofmt_ctx-&gt;pb, out_filename, AVIO_FLAG_WRITE);
        if (ret &lt; 0)
        {
            fprintf(stderr, ""Could not open output file '%s'"", out_filename);
            goto end;
        }
    }
    // Write output file header
    ret = avformat_write_header(ofmt_ctx, NULL);
    if (ret &lt; 0)
    {
        fprintf(stderr, ""Error occurred when opening output file\n"");
        goto end;
    }

    // Search for input video codec info
    AVCodec *in_codec = nullptr;
    AVCodecContext* avctx = nullptr;

    int video_stream_index = -1;
    for (int i = 0; i &lt; ifmt_ctx-&gt;nb_streams; i++)
    {
        if (ifmt_ctx-&gt;streams[i]-&gt;codec-&gt;coder_type == AVMEDIA_TYPE_VIDEO)
        {
            video_stream_index = i;
            avctx = ifmt_ctx-&gt;streams[i]-&gt;codec;
            in_codec = avcodec_find_decoder(avctx-&gt;codec_id);
            if (!in_codec)
            {
                fprintf(stderr, ""in codec not found\n"");
                exit(1);
            }
            break;
        }
    }

    // Search for output video codec info
    AVCodec *out_codec = nullptr;
    AVCodecContext* o_avctx = nullptr;

    int o_video_stream_index = -1;
    for (int i = 0; i &lt; ofmt_ctx-&gt;nb_streams; i++)
    {
        if (ofmt_ctx-&gt;streams[i]-&gt;codec-&gt;coder_type == AVMEDIA_TYPE_VIDEO)
        {
            o_video_stream_index = i;
            o_avctx = ofmt_ctx-&gt;streams[i]-&gt;codec;
            out_codec = avcodec_find_encoder(o_avctx-&gt;codec_id);
            if (!out_codec)
            {
                fprintf(stderr, ""out codec not found\n"");
                exit(1);
            }
            break;
        }
    }

    // openCV pixel format
    AVPixelFormat pFormat = AV_PIX_FMT_RGB24;
    // Data size
    int numBytes = avpicture_get_size(pFormat, avctx-&gt;width, avctx-&gt;height);
    // allocate buffer 
    uint8_t *buffer = (uint8_t *)av_malloc(numBytes * sizeof(uint8_t));
    // fill frame structure
    avpicture_fill((AVPicture *)pFrameRGB, buffer, pFormat, avctx-&gt;width, avctx-&gt;height);
    // frame area
    int y_size = avctx-&gt;width * avctx-&gt;height;
    // Open input codec
    avcodec_open2(avctx, in_codec, NULL);
    // Main loop
    while (1)
    {
        AVStream *in_stream, *out_stream;
        ret = av_read_frame(ifmt_ctx, &amp;pkt);
        if (ret &lt; 0)
        {
            break;
        }
        in_stream = ifmt_ctx-&gt;streams[pkt.stream_index];
        out_stream = ofmt_ctx-&gt;streams[pkt.stream_index];
        log_packet(ifmt_ctx, &amp;pkt, ""in"");
        // copy packet 
        pkt.pts = av_rescale_q_rnd(pkt.pts, in_stream-&gt;time_base, out_stream-&gt;time_base, AVRounding(AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX));
        pkt.dts = av_rescale_q_rnd(pkt.dts, in_stream-&gt;time_base, out_stream-&gt;time_base, AVRounding(AV_ROUND_NEAR_INF | AV_ROUND_PASS_MINMAX));
        pkt.duration = av_rescale_q(pkt.duration, in_stream-&gt;time_base, out_stream-&gt;time_base);
        pkt.pos = -1;

        log_packet(ofmt_ctx, &amp;pkt, ""out"");
        if (pkt.stream_index == video_stream_index)
        {
            avcodec_decode_video2(avctx, pFrame, &amp;frameFinished, &amp;pkt);
            if (frameFinished)
            {
                struct SwsContext *img_convert_ctx;
                img_convert_ctx = sws_getCachedContext(NULL,
                    avctx-&gt;width,
                    avctx-&gt;height,
                    avctx-&gt;pix_fmt,
                    avctx-&gt;width,
                    avctx-&gt;height,
                    AV_PIX_FMT_BGR24,
                    SWS_BICUBIC,
                    NULL,
                    NULL,
                    NULL);
                sws_scale(img_convert_ctx,
                    ((AVPicture*)pFrame)-&gt;data,
                    ((AVPicture*)pFrame)-&gt;linesize,
                    0,
                    avctx-&gt;height,
                    ((AVPicture *)pFrameRGB)-&gt;data,
                    ((AVPicture *)pFrameRGB)-&gt;linesize);

                sws_freeContext(img_convert_ctx);

                // Do some image processing
                cv::Mat img(pFrame-&gt;height, pFrame-&gt;width, CV_8UC3, pFrameRGB-&gt;data[0],false);
                cv::GaussianBlur(img,img,Size(5,5),3);
                cv::imshow(""Display"", img);
                cv::waitKey(5);
                // --------------------------------
                // Transform back to initial format
                // --------------------------------
                img_convert_ctx = sws_getCachedContext(NULL,
                    avctx-&gt;width,
                    avctx-&gt;height,
                    AV_PIX_FMT_BGR24,
                    avctx-&gt;width,
                    avctx-&gt;height,
                    avctx-&gt;pix_fmt,
                    SWS_BICUBIC,
                    NULL,
                    NULL,
                    NULL);
                sws_scale(img_convert_ctx,
                    ((AVPicture*)pFrameRGB)-&gt;data,
                    ((AVPicture*)pFrameRGB)-&gt;linesize,
                    0,
                    avctx-&gt;height,
                    ((AVPicture *)pFrame)-&gt;data,
                    ((AVPicture *)pFrame)-&gt;linesize);
                    // --------------------------------------------
                    // Something must be here
                    // --------------------------------------------
                    //
                    // Write fideo frame (How to write frame to output stream ?)
                    //
                    // --------------------------------------------
                     sws_freeContext(img_convert_ctx);
            }

        }
        else // write sound frame
        {
            ret = av_interleaved_write_frame(ofmt_ctx, &amp;pkt);
        }
        if (ret &lt; 0)
        {
            fprintf(stderr, ""Error muxing packet\n"");
            break;
        }
        // Decrease packet ref counter
        av_packet_unref(&amp;pkt);
    }
    av_write_trailer(ofmt_ctx);
end:
    avformat_close_input(&amp;ifmt_ctx);
    // close output 
    if (ofmt_ctx &amp;&amp; !(ofmt-&gt;flags &amp; AVFMT_NOFILE))
    {
        avio_closep(&amp;ofmt_ctx-&gt;pb);
    }
    avformat_free_context(ofmt_ctx);
    if (ret &lt; 0 &amp;&amp; ret != AVERROR_EOF)
    {
        char buf_err[AV_ERROR_MAX_STRING_SIZE] = { 0 };
        av_make_error_string(buf_err, AV_ERROR_MAX_STRING_SIZE, ret);
        fprintf(stderr, ""Error occurred: %s\n"", buf_err);
        return 1;
    }

    avcodec_close(avctx);
    av_free(pFrame);
    av_free(pFrameRGB);

    return 0;
}
</code></pre>
",2016-11-26 13:42:14,2016-12-09 12:03:20,"FFMPEG. Read frame, process it, put it to output video. Copy sound stream unchanged",<c++><opencv><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
48538,40804294,2016-11-25 11:44:50,,"<p>I'm using IP webcam android app(It converts mobile camera into IP web camera).<Br> I'm running below code in Visual Studio 2015 with OpenCV 3.1.</p>

<pre><code>VideoCapture cap; Mat img;
cap.open(""http://192.168.0.101:8080/video?x.mjpeg"");
while(waitKey(33)!=27)
{
    try{
        cap&gt;&gt;img;  //code crashes here
        if(img.empty())
        {
         cout&lt;&lt;""camera Closed""&lt;&lt;endl;
         break;
        }
         imshow(""Video"",img);
      } catch(...{}    
}
</code></pre>

<p>Getting below error.cIf the internet connection is slow or if the Wi-Fi is disconnected in my android device the program crashes <Br>
<strong>Error:</strong> </p>

<blockquote>
  <p>Exception thrown at 0x0BF2F6F0 (opencv_ffmpeg310.dll) in test.exe:
  0xC0000005: Access violation reading location 0x00000020.</p>
  
  <p>If there is a handler for this exception, the program may be safely
  continued.</p>
</blockquote>

<p>even if the code is wrapped within try catch block, it crashes!<Br><Br>
Should I use try {} catch (...) block in source file, if yes, then where should I use this?<Br> I referred this <a href=""https://github.com/opencv/opencv/issues/6726"" rel=""nofollow noreferrer"">link</a> but did not find the right answer.</p>
",,2016-11-25 11:44:50,opencv_ffmpeg module crash (IP Camera),<c++><opencv><error-handling><ffmpeg><runtime-error>,,,CC BY-SA 3.0,True,True,False,False,True
48542,40757425,2016-11-23 06:22:49,,"<p>I checked this Topic(<a href=""https://stackoverflow.com/questions/5237175/process-video-stream-from-memory-buffer"">process video stream from memory buffer</a>), and I would like to do the same in this 1st answer.
I tried to create a new class file that inherited from cvCapture_FFMPEG, and to override the ""open"" function.
But I can't find any OpenCV module where there is a class named ""cvCapture_FFMPEG"".</p>

<p>I’m assuming that ""cvCapture_FFMPEG"" is nowhere in OpenCV and their API. Am I right? 
If so, could you tell me the best way to handle a buffer in OpenCV?</p>

<p>Please help.</p>
",2017-05-23 12:30:20,2016-11-23 07:41:42,Where is opencv2's cvcapture and their subclass?,<c++><opencv><ffmpeg><buffer><video-processing>,,,CC BY-SA 3.0,True,False,False,False,True
48576,41015571,2016-12-07 10:54:56,,"<p>I bought 'AVerMedia Capture Card (C985 LITE)' last week, and I connected video camera to this capture card's HDMI input. </p>

<p>When I tested with AVerMedia's RECentral software, Amcap, ffmpeg, it worked.</p>

<p>But, when I tested with AVerMedia's AVerCapSDKDemo, VLC, Windows Movie maker, Windows directshow, it didn't work.</p>

<p>Then, I try to get camera frame(in real time) by internet sample code and my c++ code (with and without using openCV). All of the code work with general USB Webcam, but didn't work with this capture card.
The result showed that every c++ code can see this capture card, but can't see the camera that connected to the card.</p>

<p>The conditions, that I tested and it didn't work, are below:</p>

<ul>
<li>1st PC Spec: Intel core i5, Ram 16 GB, HDD 1 TB, DirectX 11 with windows10 64 bit</li>
<li>2nd PC Spec: Intel core i7, Ram 8 GB, HDD 1 TB, DirectX 11 with windows7 64 bit</li>
<li>IDE: visual studio 2015</li>
<li>Camera: GoPro and SONY Handycam, both full HD with HDMI output</li>
</ul>

<p>About my project, I want to tracking the car on the road in real time, 
therefore I decided to use C985 Capture Card that support full HD.</p>

<p>Does anyone have any advice?</p>

<p>Thank you very much.</p>

<p>Best regards,  </p>

<p>--</p>

<p>Edit: Add Example Code</p>

<p>1.My code with openCV: For this code, it always show ""error: frame not read from webcam\n"".</p>

<pre><code>#include&lt;opencv2/core/core.hpp&gt;
#include&lt;opencv2/highgui/highgui.hpp&gt;
#include&lt;opencv2/imgproc/imgproc.hpp&gt;

#include&lt;iostream&gt;
#include&lt;conio.h&gt;           

int main() {
    cv::VideoCapture capWebcam(0);            // declare a VideoCapture object and associate to webcam, 0 =&gt; use 1st webcam

    if (capWebcam.isOpened() == false) {                                // check if VideoCapture object was associated to webcam successfully
        std::cout &lt;&lt; ""error: capWebcam not accessed successfully\n\n"";      // if not, print error message to std out
        _getch();                                                           // may have to modify this line if not using Windows
        return(0);                                                          // and exit program
    }

    char charCheckForEscKey = 0;

    while (charCheckForEscKey != 27 &amp;&amp; capWebcam.isOpened()) {            // until the Esc key is pressed or webcam connection is lost
        bool blnFrameReadSuccessfully = capWebcam.read(imgOriginal);            // get next frame

        if (!blnFrameReadSuccessfully || imgOriginal.empty()) {                 // if frame not read successfully
            std::cout &lt;&lt; ""error: frame not read from webcam\n"";                 // print error message to std out
            continue;                                                              // and jump out of while loop
        }

        cv::namedWindow(""imgOriginal"", CV_WINDOW_NORMAL);       // note: you can use CV_WINDOW_NORMAL which allows resizing the window
        cv::imshow(""imgOriginal"", imgOriginal);                 // show windows

        charCheckForEscKey = cv::waitKey(1);        // delay (in ms) and get key press, if any
    }   // end while

    return(0);
}
</code></pre>

<p>2.My code without openCV. (Using AForge): For this code, the image show nothing.</p>

<pre><code>private void Form1_Load(object sender, EventArgs e)
{
    FilterInfoCollection  videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
    for (int i = 0; i&lt; videoDevices.Count; i++)
    {
        comboBox1.Items.Add(videoDevices[i].MonikerString);
    }
    // create video source
}

private void video_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
    Bitmap img = (Bitmap)eventArgs.Frame.Clone();
    pictureBox1.Image = img;
}

private void button1_Click(object sender, EventArgs e)
{

    VideoCaptureDeviceForm xx = new VideoCaptureDeviceForm();
    xx.ShowDialog();

    VideoCaptureDevice videoSource = new VideoCaptureDevice(xx.VideoDeviceMoniker);
    //videoSource.Source = ""AVerMedia HD Capture C985 Bus 2"";
    VideoInput input = videoSource.CrossbarVideoInput;
    MessageBox.Show("""" + videoSource.CheckIfCrossbarAvailable());
    MessageBox.Show("" "" + input.Index + "" "" + input.Type);
    // set NewFrame event handler
    videoSource.NewFrame += video_NewFrame;
    foreach(var x in videoSource.AvailableCrossbarVideoInputs)
    {
        MessageBox.Show(""AvailableCrossbarVideoInputs &gt; "" + x.Index);
    }
    videoSource.VideoSourceError += VideoSource_VideoSourceError;
    // start the video source

    videoSource.Start();

    // signal to stop when you no longer need capturing
    videoSource.SignalToStop();
    videoSource.Start();
    MessageBox.Show(""AvailableCrossbarVideoInputs length :"" + videoSource.AvailableCrossbarVideoInputs.Length);

    input = videoSource.CrossbarVideoInput;
    MessageBox.Show("" "" + input.Index + "" "" + input.Type);

    videoSource.SignalToStop();
    videoSource.Start();
}
</code></pre>

<p>3.Code from Internet: I use the code from code project(Capture Live Video from various Video Devices) in link below. It showed ""can't detect Webcam"".</p>

<p><a href=""https://www.codeproject.com/articles/7123/capture-live-video-from-various-video-devices"" rel=""nofollow noreferrer"">https://www.codeproject.com/articles/7123/capture-live-video-from-various-video-devices</a></p>
",2016-12-07 12:23:50,2017-05-09 06:05:51,AVerMedia Capture Card C985 didn't work with C++ and openCV,<c++><visual-studio><opencv><video-capture><opencv3.1>,,,CC BY-SA 3.0,True,False,False,False,True
48636,41100506,2016-12-12 12:03:48,,"<pre><code>public static class AVFormatContext extends Pointer {
    static { Loader.load(); }
    /** Default native constructor. */
    public AVFormatContext() { super((Pointer)null); allocate(); }
    /** Native array allocator. Access with {@link Pointer#position(long)}. */
    public AVFormatContext(long size) { super((Pointer)null); allocateArray(size); }
    /** Pointer cast constructor. Invokes {@link Pointer#Pointer(Pointer)}. */
    public AVFormatContext(Pointer p) { super(p); }
    private native void allocate();
    private native void allocateArray(long size);
    @Override public AVFormatContext position(long position) {
        return (AVFormatContext)super.position(position);
}
</code></pre>

<p>I've tried to run a java application with an FFMmpegFrameGrabber while trying to run on windows. However same jar file runs on linux with no exceptions.</p>

<p>I have included javacpp and javacv jars .</p>

<p>However while running on windows I am getting this error 
<strong>main"" java.lang.NoClassDefFoundError: Could not initialize class org.bytedeco.javacpp.avutil""</strong> </p>

<p>Stacktrace of exception </p>

<blockquote>
  <p></p>
</blockquote>

<pre><code>Exception in thread ""main"" java.lang.NoClassDefFoundError: Could not initialize
class org.bytedeco.javacpp.avutil
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at org.bytedeco.javacpp.Loader.load(Loader.java:413)
        at org.bytedeco.javacpp.Loader.load(Loader.java:381)
        at org.bytedeco.javacpp.avformat$AVFormatContext.&lt;clinit&gt;(avformat.java:
2719)
        at org.bytedeco.javacv.FFmpegFrameGrabber.startUnsafe(FFmpegFrameGrabber
.java:391)
        at org.bytedeco.javacv.FFmpegFrameGrabber.start(FFmpegFrameGrabber.java:
385)
        at testffmpeg.NewStreamer.StartandRestart(NewStreamer.java:191)
        at testffmpeg.NewStreamer.&lt;init&gt;(NewStreamer.java:95)
        at testffmpeg.NewStreamer.main(NewStreamer.java:91)
</code></pre>
",2016-12-12 12:23:16,2016-12-12 12:23:16,"Exception in thread ""main"" java.lang.NoClassDefFoundError: Could not initialize class org.bytedeco.javacpp.avutil""",<java><opencv><image-processing><ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
48693,41028847,2016-12-07 22:54:19,,"<p>I'm trying to use Javafx and OpenCV to access a webcam (Axis M1013) over wireless to run vision processing for my FRC team. When I run my code, I can access the GUI that I made using Scenebuilder, but when I try to start the camera, the program crashes. It seems to me like it's having trouble utilizing the VideoCapture class. I know for a fact that my problem is not with the camera, because i can access the feed through a browser feed, and my laptop's webcam will work fine. I'm using OpevCV version 2.4.13, jdk 8u101x64, and ffmpeg 3.2</p>

<p>I have looked at other posts at:</p>

<p>stackoverflow.com/questions/18625948/opencv-java-unsatisfiedlinkerror</p>

<p>answers.opencv.org/question/21720/java-webcam-capture</p>

<p>answers.opencv.org/question/20071/unsatisfiedlinkerror-given-by-highghuiimread-on-java</p>

<p>I have tried the solutions mentioned in all of these. So far, none have resolved my problem.</p>

<p>My code is based mostly off the tutorials at:</p>

<p>opencv-java-tutorials.readthedocs.io/en/latest/03-first-javafx-application-with-opencv.html</p>

<p>Here is my main java code:</p>

<pre><code>    @Override 
public void start(Stage primaryStage) {
    System.load(""C:\\opencv\\build\\x64\\vc12\\bin\\opencv_ffmpeg_64.dll"");
    try {
        FXMLLoader loader = new FXMLLoader(getClass().getResource(""Sample.fxml""));
        BorderPane root = (BorderPane) loader.load();
        Scene scene = new Scene(root, 400, 400);
        scene.getStylesheets().add(getClass().getResource(""application.css"").toExternalForm());
        primaryStage.setScene(scene);
        primaryStage.show();
    } catch(Exception e) {
        System.out.println(""error opening camera gui"");
    }
}

public static void main(String[] args) {
    launch(args);
}
</code></pre>

<p>And here is my camera controller:</p>

<pre><code>public class SampleController {
@FXML
private Button Start_btn;

@FXML
private ImageView currentFrame;
private ScheduledExecutorService timer;
private VideoCapture capture;
private boolean cameraActive = false;

@FXML
public void startCamera()
{
    System.loadLibrary(""opencv_ffmpeg_64"");
    if (!this.cameraActive)
    {
        try
        {
         capture = new VideoCapture(""http://FRC:FRC@axis-camera-223-catapult.lan:554/mjpg/1/video.mjpg"");
        }
        catch (Exception e)
        {
            System.out.println(""an error occured when attempting to access camera."");
        }
        // is the video stream available?
        if (this.capture.isOpened())
        {
            this.cameraActive = true;

            // grab a frame every 33 ms (30 frames/sec)
            Runnable frameGrabber = new Runnable() {

                @Override
                public void run()
                {
                    // effectively grab and process a single frame
                    Mat frame = grabFrame();
                    // convert and show the frame
                    Image imageToShow = Utils.mat2Image(frame);
                    updateImageView(currentFrame, imageToShow);
                }
            };

            this.timer = Executors.newSingleThreadScheduledExecutor();
            this.timer.scheduleAtFixedRate(frameGrabber, 0, 33, TimeUnit.MILLISECONDS);

            // update the button content
            this.Start_btn.setText(""Stop Camera"");
        }
        else
        {
            // log the error
            System.err.println(""Impossible to open the camera connection..."");
        }
    }
    else
    {
        // the camera is not active at this point
        this.cameraActive = false;
        // update again the button content
        this.Start_btn.setText(""Start Camera"");

        // stop the timer
        this.stopAquisition();
    }

    System.out.println(""Camera is now on."");
}

/**
 * Get frame from open video
 * @return
 */
    private Mat grabFrame()

    {
        Mat frame = new Mat();
        if (this.capture.isOpened())
        {
            try
            {
                this.capture.read(frame);

                }
        catch (Exception e)
        {
            System.err.println(""Exception during the image elaboration: "" + e);
        }
    }
    return frame;
}
    private void stopAquisition()
    {
        if (this.timer!=null &amp;&amp; !this.timer.isShutdown())
        {
            try
            {
                this.timer.shutdown();
                this.timer.awaitTermination(33, TimeUnit.MILLISECONDS);
            }
            catch (InterruptedException e)
            {
                System.err.println(""Exception in stopping the frame capture, trying to release camera now..."" + e);

            }
        }
        if (this.capture.isOpened())
        {
            this.capture.release();
        }
    }
    private void updateImageView(ImageView view, Image image)
    {
        Utils.onFXThread(view.imageProperty(), image);
    }
    protected void setClosed()
    { 
        this.stopAquisition();
    }
}
</code></pre>

<p>When I try and run this as i have said before, the GUI will launch, but when i try and open the camera, i get an error message:</p>

<pre><code>Exception in thread ""JavaFX Application Thread"" java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1774)
at javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1657)
at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
at javafx.event.Event.fireEvent(Event.java:198)
at javafx.scene.Node.fireEvent(Node.java:8411)
at javafx.scene.control.Button.fire(Button.java:185)
at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
at javafx.event.Event.fireEvent(Event.java:198)
at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:380)
at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:294)
at java.security.AccessController.doPrivileged(Native Method)
at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$354(GlassViewEventHandler.java:416)
at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:415)
at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
at com.sun.glass.ui.View.notifyMouse(View.java:937)
at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.reflect.misc.Trampoline.invoke(Unknown Source)
at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
at javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1771)
... 48 more
Caused by: java.lang.UnsatisfiedLinkError:     org.opencv.highgui.VideoCapture.VideoCapture_1(Ljava/lang/String;)J
at org.opencv.highgui.VideoCapture.VideoCapture_1(Native Method)
at org.opencv.highgui.VideoCapture.&lt;init&gt;(VideoCapture.java:128)
at jfxtest1.SampleController.startCamera(SampleController.java:36)
... 58 more
</code></pre>

<p>If anyone can help me, that would be much appreciated.</p>

<p>Thanks in advance.</p>
",,2017-01-03 08:18:55,Unable to Access IP Camera in OpenCV,<java><opencv><ffmpeg><ip-camera>,,,CC BY-SA 3.0,True,True,False,False,True
48766,40995105,2016-12-06 12:11:03,,"<p>I am trying convert a RGB image into YUV.
I am loading image using openCV. </p>

<p>I am calling the function as follows:</p>

<pre><code>//I know IplImage is outdated 
IplImage* im = cvLoadImage(""1.jpg"", 1);
//....
bgr2yuv(im-&gt;imageData, dst, im-&gt;width, im-&gt;height);
</code></pre>

<p>the function to convert Color image to yuv image is given below.
I am using ffmpeg to do that.</p>

<pre><code>void bgr2yuv(unsigned char *src, unsigned char *dest, int w, int h)
{
  AVFrame *yuvIm = avcodec_alloc_frame();
  AVFrame *rgbIm = avcodec_alloc_frame();
  avpicture_fill(rgbIm, src, PIX_FMT_BGR24, w, h);
  avpicture_fill(yuvIm, dest, PIX_FMT_YUV420P, w, h);
  av_register_all();

  struct SwsContext * imgCtx = sws_getCachedContext(imgCtx,
                                         w, h,(::PixelFormat)PIX_FMT_BGR24,
                                         w, h,(::PixelFormat)PIX_FMT_YUV420P,
                                         SWS_BICUBIC, NULL, NULL, NULL);

  sws_scale(imgCtx, rgbIm-&gt;data, rgbIm-&gt;linesize,0, h, yuvIm-&gt;data, yuvIm-&gt;linesize);
  av_free(yuvIm);
  av_free(rgbIm);
}
</code></pre>

<p>I am getting wrong output after conversion.
I am thinking this is due to padding happening in the IplImage.
(My input image width is not multiple of 4).</p>

<p>I updated linesize variable even after that I am not getting correct output.
Its working fine when I am using images whose width is multiple of 4.</p>

<p>Can anybody tell what is the problem in the code.</p>
",,2016-12-07 10:59:12,Error in RGB to YUV conversion in FFmpeg,<c++><opencv><image-processing><colors><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
48808,40997252,2016-12-06 14:06:14,,"<p>I am trying to install OpenCV3.1 on my Ubuntu 16.04 for development in QT5. Sadly, building it from source always errors out due to undefined references (see below). </p>

<p>I used the following:</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D WITH_V4L=ON -D WITH_FFMPEG=ON -D WITH_OPENGL=ON -D BUILD_TIFF=ON -D WITH_VTK=ON..
</code></pre>

<p>And it works fine. But building it always produces this error</p>

<pre><code>../../lib/libopencv_viz.so.3.1.0: undefined reference to `vtkSTLReader::New()'
../../lib/libopencv_viz.so.3.1.0: undefined reference to `vtkOBJReader::New()'
collect2: error: ld returned 1 exit status
modules/viz/CMakeFiles/opencv_test_viz.dir/build.make:232: recipe for target 'bin/opencv_test_viz' failed
make[2]: *** [bin/opencv_test_viz] Error 1
CMakeFiles/Makefile2:3358: recipe for target 'modules/viz/CMakeFiles/opencv_test_viz.dir/all' failed
make[1]: *** [modules/viz/CMakeFiles/opencv_test_viz.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
</code></pre>

<p>Of course I googled and tried everything I found. Tried several different cmake flags (or rather, without any), tried reinstalling libvtk5-dev and also tried libvtk6-dev and even build vtk7.1 from source, since I am assuming something is missing from there. </p>

<p>I also tried adding the opencv_contrib via</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D WITH_V4L=ON -D WITH_FFMPEG=ON -D WITH_OPENGL=ON -D BUILD_TIFF=ON -D WITH_VTK=ON -D BUILD_EXAMPLES=ON -D OPENCV_EXTRA_MODULES_PATH=/home/user/opencv/opencv-3.1.0/opencv_contrib/modules ..
</code></pre>

<p>But that already produced the following error</p>

<pre><code>CMake Error at opencv_contrib/modules/text/CMakeLists.txt:22 (ocv_add_testdata): `Unknown CMake command ""ocv_add_testdata"".
</code></pre>

<p>Also please note that I did upgrade/update all the packages that are listed <a href=""http://rodrigoberriel.com/2014/10/installing-opencv-3-0-0-on-ubuntu-14-04/"" rel=""nofollow noreferrer"">here</a> and <a href=""http://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html"" rel=""nofollow noreferrer"">here</a> </p>

<p>So basically after two days randomly trying all the possible solutions I could find via google, I am now asking here. 
Hopefully someone knows how to fix this, thank you!</p>

<p>Edit: I only get these problems with OpenCV3.1. I do have a working OpenCV 2.4.13</p>
",2016-12-06 14:46:30,2018-08-29 01:21:16,Building OpenCV 3.1 on Ubuntu 16.04 fails (undefined references),<opencv><ubuntu><ubuntu-16.04><opencv3.1>,,,CC BY-SA 3.0,True,False,False,False,True
48854,41073925,2016-12-10 09:12:56,,"<p>I had wrote a program that successfully get raspberry pi camera video and apply some image processing on it like the followings:</p>

<pre><code>#include &lt;opencv2/opencv.hpp&gt;
VideoCapture vcap;
Mat Frame;
...
vcap.open(0);
while(true)
{
    vcap &gt;&gt; Frame;
    ...
    imshow(""Output Window"", Frame); 
    waitKey(1);
}
</code></pre>

<p>Because of limitation of raspberry camera (lux, shutter, etc) I bought an IP camera and try to use its video using rtsp:</p>

<pre><code>vcap.open(""rtsp://admin:123456@192.168.1.65"");
</code></pre>

<p>I get the video but it's distorted like the following picture:</p>

<p><a href=""https://i.stack.imgur.com/lsyeJ.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/lsyeJ.jpg"" alt=""enter image description here""></a></p>

<p>As seen in the picture there are errors in the console:</p>

<pre><code>error while decding MB n, bytestream m 
cabac decode of gscale diff failed at n m
</code></pre>

<p><del>I have test with VLC on raspberry but it only get one single frame and CPU goes 100%, even reducing resolution, bitrate, fps doesn't change.</del> I can view rtsp video in the raspberry using omxplayer. Also there isn't any problem on my PC.</p>

<p>I have installed Raspbian Jessie on my raspberry pi.</p>

<p>I also recompiled OpenCV using GStreamer insted of FFMPEG but didn't change anything:</p>

<pre><code>cmake ... -D WITH_FFMPEG=OFF -D WITH_GSTREAMER=ON ...
</code></pre>
",2017-01-03 17:10:05,2017-01-03 17:10:05,Opencv: Distorted picture when using RTSP from IP cam,<opencv><rtsp>,,,CC BY-SA 3.0,True,True,False,False,True
48878,40965112,2016-12-04 23:45:56,,"<p>I am encountering a particular problem while attempting to read a .yuv video file in opencv. My code is as follows:</p>

<pre><code>#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;opencv2/opencv.hpp&gt;

using namespace cv;
using namespace std;

int main( void )
{

    VideoCapture cap(""video/balloons1.yuv""); // open the video file for reading

    if ( !cap.isOpened() ) // if not success, exit program
    {
        cout &lt;&lt; ""Cannot open the video file"" &lt;&lt; endl;
        return -1;
    }

return 0;
}
</code></pre>

<p>However, I keep encountering the following error:
<a href=""https://i.stack.imgur.com/Ab4Ev.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/Ab4Ev.png"" alt=""enter image description here""></a></p>

<p>I have installed FFMPEG following the instructions from this website: <a href=""http://www.wikihow.com/Install-FFmpeg-on-Windows"" rel=""nofollow noreferrer"">http://www.wikihow.com/Install-FFmpeg-on-Windows</a> and the installation seems to be correct. Does anyone have any ideas of what the problem might be? </p>
",2016-12-04 23:51:54,2016-12-05 00:43:41,Reading YUV file in opencv,<visual-studio-2010><opencv><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
49039,41265729,2016-12-21 14:59:07,,"<p>I am working with a video stream from an ip camera on Ubuntu 14.04. Everything was going great with a camera that has these parameters (from FFMPEG):</p>

<pre><code>    Stream #0:0: Video: h264 (Main), yuv420p(progressive), 352x192, 29.97 tbr, 90k tbn, 180k tbc
</code></pre>

<p>But then i changed to a newer camera, which has these parameters:</p>

<pre><code>    Stream #0:0: Video: h264 (High), yuvj420p(pc, bt709, progressive), 1280x720, 25 fps, 25 tbr, 90k tbn, 50 tbc
</code></pre>

<p>My C++ program uses OpenCV3 to process the stream. By default OpenCV uses ffmpeg to decode and display the stream with function VideoCapture. </p>

<pre><code>VideoCapture vc;
vc.open(input_stream);
while ((vc &gt;&gt; frame), !frame.empty()) {
   *do work*
}
</code></pre>

<p>With the new camera stream i get errors like these (from ffmpeg):</p>

<pre><code>[h264 @ 0x7c6980] cabac decode of qscale diff failed at 41 38
[h264 @ 0x7c6980] error while decoding MB 41 38, bytestream (3572)
[h264 @ 0x7c6980] left block unavailable for requested intra mode at 0 44
[h264 @ 0x7bc2c0] SEI type 25 truncated at 208
</code></pre>

<p>The image sometimes is glitched, sometimes completely frozen. However <strong>on vlc it plays perfectly</strong>. I installed the newest version (3.2.2) of ffmpeg player with</p>

<pre><code>./configure --enable-gpl --enable-libx264
</code></pre>

<p>Now playing directly with ffplay (instead of launching from source code with OpenCV function VideoCapture), the stream plays better, but sometimes still displays warnings:</p>

<pre><code>[NULL @ 0x7f834c008c00] SEI type 25 size 896 truncated at 320=1/1   
[h264 @ 0x7f834c0d5d20] SEI type 25 size 896 truncated at 319=1/1   
[rtsp @ 0x7f834c0008c0] max delay reached. need to consume packet   
[rtsp @ 0x7f834c0008c0] RTP: missed 1 packets
[h264 @ 0x7f834c094740] concealing 675 DC, 675 AC, 675 MV errors in P frame
</code></pre>

<p>Changing the camera hardware is not an option. The camera can be set to encode to h265 or mjpeg. When encoding to mjpeg it can output 5 fps, which is not enough. Decoding to a static video is not an option either, because i need to display real time results about the stream. <a href=""http://docs.opencv.org/trunk/d4/d15/group__videoio__flags__base.html#ga023786be1ee68a9105bf2e48c700294d"" rel=""nofollow noreferrer"">Here</a> is a list of API backends that can be used in function VideoCapture. Maybe i should switch to some other decoder and player?
From my research i conclude that i have these options:</p>

<ul>
<li>Somehow get OpenCV to use libVlc instead of ffmpeg</li>
</ul>

<p>One example of switching to vlc is <a href=""http://study.marearts.com/2015/09/opencv-rtsp-connection-using-vlc-library.html"" rel=""nofollow noreferrer"">here</a>, but i don't understand it well enough to say if that is what i need. Or maybe i should be <a href=""https://stackoverflow.com/questions/30345495/ffmpeg-h264-parsing"">parsing</a> the stream in code?</p>

<ul>
<li>Use vlc to preprocess the stream, as suggested <a href=""https://stackoverflow.com/questions/23529620/opencv-and-network-cameras-or-how-to-spy-on-the-neighbors"">here</a>.</li>
</ul>

<p>This is probably slow, which again is bad for real time results.<br>
Any suggestions and coments will be appreciated.</p>
",2018-05-02 12:12:29,2018-06-05 17:55:57,Decoding a h264 (High) stream with OpenCV's ffmpeg on Ubuntu,<opencv><video><ffmpeg><h.264><rtsp>,,,CC BY-SA 4.0,True,False,False,False,True
49167,41507391,2017-01-06 14:02:31,,"<p>I am trying to get the milliseconds of each video frame in OpenCV and expecting same behavior on windows like on linux:</p>

<p>On Linux/IPython:</p>

<pre><code>In [4]: ret,frame = v.read(); v.get(cv2.cv.CV_CAP_PROP_POS_MSEC)
Out[4]: 41.522491349480966

In [5]: ret,frame = v.read(); v.get(cv2.cv.CV_CAP_PROP_POS_MSEC)
Out[5]: 83.04498269896193

In [6]: ret,frame = v.read(); v.get(cv2.cv.CV_CAP_PROP_POS_MSEC)
Out[6]: 124.5674740484429

In [16]: cv2.__version__
Out[16]: '2.4.8'
</code></pre>

<p>On Win7/IPython:</p>

<pre><code>In [5]: ret,frame = v.read(); v.get(cv2.cv.CV_CAP_PROP_POS_MSEC)
Out[5]: 1.0

In [6]: ret,frame = v.read(); v.get(cv2.cv.CV_CAP_PROP_POS_MSEC)
Out[6]: 2.0

In [7]: ret,frame = v.read(); v.get(cv2.cv.CV_CAP_PROP_POS_MSEC)
Out[7]: 3.0

In [14]: cv2.__version__
Out[14]: '2.4.13'
</code></pre>

<p><em>Note that Windows gets a Anaconda environment with OpenCV 2.4.13 (cv2.pyd) copied to conda/site-packages</em></p>

<p>I guess the only difference in the environment, then is, encoder and/or its library. I have seen that encoder (WMV2) is correctly showed in VLC when I play it in Windows and Ubuntu Linux both.</p>

<p>Any pointers to debug OpenCV (C++) ffmpeg dll calls is appreciated ?</p>

<p><strong>Edit:</strong> For now have contended with this workaround using ffmpeg which IMO is a better solution<br>
<a href=""https://stackoverflow.com/questions/42230269/how-to-fetch-both-live-video-frame-and-timestamp-from-ffmpeg-to-python-on-window/42442914#42442914"">How to fetch both live video frame and timestamp from ffmpeg to python on Windows</a> </p>
",2018-01-13 13:52:01,2018-01-13 13:52:01,Python - OpenCV - VideoCapture: getting incorrect frame timestamps in milliseconds on windows,<windows><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
49183,41276085,2016-12-22 05:05:19,,"<p>Environment: MAC machine, running my code inside virtual machine with guest OS: Ubuntu 14.4 LTS.</p>

<p>I am compiling openCV within tensorflow workspace under examples. My WORKSPACE and opencv.BUILD file look similar to the one mentioned <a href=""https://stackoverflow.com/questions/34984290/building-opencv-code-using-bazel"">here</a></p>

<p>My BUILD file for the opencv + tensorflow project looks like following: </p>

<pre><code>package(default_visibility = [""//tensorflow:internal""])

licenses([""notice""])  # Apache 2.0

exports_files([""LICENSE""])

cc_binary(
    name = ""label_image"",
    srcs = [
        ""main.cc"",
    ],
    linkopts = [""-lm""],
    copts = [""-DWITH_FFMPEG=OFF""],
    deps = [
        ""//tensorflow/cc:cc_ops"",
        ""//tensorflow/core:framework_internal"",
        ""//tensorflow/core:tensorflow"",
        ""@opencv//:opencv""
    ],
)

filegroup(
    name = ""all_files"",
    srcs = glob(
        [""**/*""],
        exclude = [
            ""**/METADATA"",
            ""**/OWNERS"",
            ""bin/**"",
            ""gen/**"",
        ],
    ),
    visibility = [""//tensorflow:__subpackages__""],
)
</code></pre>

<p>If i disable tensorflow dependences (and also comment the tensorflow related code). I can see that the webcam is captures properly. like this:</p>

<pre><code>deps = [
            #""//tensorflow/cc:cc_ops"",
            #""//tensorflow/core:framework_internal"",
            #""//tensorflow/core:tensorflow"",
            ""@opencv//:opencv""
        ],
</code></pre>

<p>But if i still keep the code commented/uncommented and also keep the tensorflow dependences my webcam hangs at VideoCapture::read()</p>

<p>By default, opencv use FFMPEG codec and i tried enabling and disabling FFMPEG. Can someone please help me why when tensorflow library is compiled in the project makes my openCV read() hangs?</p>
",2017-05-23 11:53:09,2018-02-06 03:09:57,tensorflow + opencv webcam hangs,<c++><opencv><tensorflow>,,,CC BY-SA 3.0,True,False,False,False,True
49207,41474573,2017-01-04 22:51:54,,"<p>I downloaded opencv and opencv contrib files, following the tutorial here: <a href=""http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/"" rel=""nofollow noreferrer"">http://www.pyimagesearch.com/2015/06/22/install-opencv-3-0-and-python-2-7-on-ubuntu/</a></p>

<p>I want to install OpenCV3 for Python2.7 in a Conda environment called obj_recog. My OS is Ubuntu 16.04.
I then tried running the Cmake with different options, finally settling on this:</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local \
-D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON \
-D WITH_QT=ON -D WITH_GTK=ON -D WITH_OPENGL=ON -D WITH_CUDA=ON \
-D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-8.0 -D WITH_FFMPEG=ON \
-D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib-3.1.0/modules \
-D PYTHON_EXECUTABLE=~/anaconda3/envs/obj_recog/bin/python \
-D INSTALL_PYTHON_EXAMPLES=ON -D INSTALL_C_EXAMPLES=OFF \
-D BUILD_EXAMPLES=ON -D WITH_CUBLAS=ON ..
</code></pre>

<p>Here is the output I get:</p>

<pre><code>cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON -D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D WITH_QT=ON -D WITH_GTK=ON -D WITH_OPENGL=ON -D WITH_CUDA=ON -D CUDA_TOOLKIT_ROOT_DIR=/usr/local/cuda-8.0 -D WITH_FFMPEG=ON -D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib-3.1.0/modules -D PYTHON_EXECUTABLE=~/anaconda3/envs/obj_recog/bin/python -D INSTALL_PYTHON_EXAMPLES=ON -D INSTALL_C_EXAMPLES=OFF -D BUILD_EXAMPLES=ON -D WITH_CUBLAS=ON ..
-- The CXX compiler identification is GNU 5.4.0
-- The C compiler identification is GNU 5.4.0
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Detected version of GNU GCC: 54 (504)
-- Performing Test HAVE_CXX_FSIGNED_CHAR
-- Performing Test HAVE_CXX_FSIGNED_CHAR - Success
-- Performing Test HAVE_C_FSIGNED_CHAR
-- Performing Test HAVE_C_FSIGNED_CHAR - Success
-- Performing Test HAVE_CXX_W
-- Performing Test HAVE_CXX_W - Success
-- Performing Test HAVE_C_W
-- Performing Test HAVE_C_W - Success
-- Performing Test HAVE_CXX_WALL
-- Performing Test HAVE_CXX_WALL - Success
-- Performing Test HAVE_C_WALL
-- Performing Test HAVE_C_WALL - Success
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE
-- Performing Test HAVE_CXX_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_C_WERROR_RETURN_TYPE
-- Performing Test HAVE_C_WERROR_RETURN_TYPE - Success
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WERROR_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_CXX_WERROR_ADDRESS
-- Performing Test HAVE_CXX_WERROR_ADDRESS - Success
-- Performing Test HAVE_C_WERROR_ADDRESS
-- Performing Test HAVE_C_WERROR_ADDRESS - Success
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_CXX_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT
-- Performing Test HAVE_C_WERROR_SEQUENCE_POINT - Success
-- Performing Test HAVE_CXX_WFORMAT
-- Performing Test HAVE_CXX_WFORMAT - Success
-- Performing Test HAVE_C_WFORMAT
-- Performing Test HAVE_C_WFORMAT - Success
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_CXX_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY
-- Performing Test HAVE_C_WERROR_FORMAT_SECURITY - Success
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_C_WMISSING_DECLARATIONS
-- Performing Test HAVE_C_WMISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES
-- Performing Test HAVE_CXX_WMISSING_PROTOTYPES - Failed
-- Performing Test HAVE_C_WMISSING_PROTOTYPES
-- Performing Test HAVE_C_WMISSING_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES
-- Performing Test HAVE_CXX_WSTRICT_PROTOTYPES - Failed
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES
-- Performing Test HAVE_C_WSTRICT_PROTOTYPES - Success
-- Performing Test HAVE_CXX_WUNDEF
-- Performing Test HAVE_CXX_WUNDEF - Success
-- Performing Test HAVE_C_WUNDEF
-- Performing Test HAVE_C_WUNDEF - Success
-- Performing Test HAVE_CXX_WINIT_SELF
-- Performing Test HAVE_CXX_WINIT_SELF - Success
-- Performing Test HAVE_C_WINIT_SELF
-- Performing Test HAVE_C_WINIT_SELF - Success
-- Performing Test HAVE_CXX_WPOINTER_ARITH
-- Performing Test HAVE_CXX_WPOINTER_ARITH - Success
-- Performing Test HAVE_C_WPOINTER_ARITH
-- Performing Test HAVE_C_WPOINTER_ARITH - Success
-- Performing Test HAVE_CXX_WSHADOW
-- Performing Test HAVE_CXX_WSHADOW - Success
-- Performing Test HAVE_C_WSHADOW
-- Performing Test HAVE_C_WSHADOW - Success
-- Performing Test HAVE_CXX_WSIGN_PROMO
-- Performing Test HAVE_CXX_WSIGN_PROMO - Success
-- Performing Test HAVE_C_WSIGN_PROMO
-- Performing Test HAVE_C_WSIGN_PROMO - Failed
-- Performing Test HAVE_CXX_WNO_NARROWING
-- Performing Test HAVE_CXX_WNO_NARROWING - Success
-- Performing Test HAVE_C_WNO_NARROWING
-- Performing Test HAVE_C_WNO_NARROWING - Success
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_CXX_WNO_DELETE_NON_VIRTUAL_DTOR - Success
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR
-- Performing Test HAVE_C_WNO_DELETE_NON_VIRTUAL_DTOR - Failed
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_CXX_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS
-- Performing Test HAVE_C_WNO_UNNAMED_TYPE_TEMPLATE_ARGS - Failed
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_CXX_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION
-- Performing Test HAVE_C_FDIAGNOSTICS_SHOW_OPTION - Success
-- Performing Test HAVE_CXX_WNO_LONG_LONG
-- Performing Test HAVE_CXX_WNO_LONG_LONG - Success
-- Performing Test HAVE_C_WNO_LONG_LONG
-- Performing Test HAVE_C_WNO_LONG_LONG - Success
-- Performing Test HAVE_CXX_PTHREAD
-- Performing Test HAVE_CXX_PTHREAD - Success
-- Performing Test HAVE_C_PTHREAD
-- Performing Test HAVE_C_PTHREAD - Success
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER
-- Performing Test HAVE_CXX_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER
-- Performing Test HAVE_C_FOMIT_FRAME_POINTER - Success
-- Performing Test HAVE_CXX_MSSE
-- Performing Test HAVE_CXX_MSSE - Success
-- Performing Test HAVE_C_MSSE
-- Performing Test HAVE_C_MSSE - Success
-- Performing Test HAVE_CXX_MSSE2
-- Performing Test HAVE_CXX_MSSE2 - Success
-- Performing Test HAVE_C_MSSE2
-- Performing Test HAVE_C_MSSE2 - Success
-- Performing Test HAVE_CXX_MNO_AVX
-- Performing Test HAVE_CXX_MNO_AVX - Success
-- Performing Test HAVE_C_MNO_AVX
-- Performing Test HAVE_C_MNO_AVX - Success
-- Performing Test HAVE_CXX_MSSE3
-- Performing Test HAVE_CXX_MSSE3 - Success
-- Performing Test HAVE_C_MSSE3
-- Performing Test HAVE_C_MSSE3 - Success
-- Performing Test HAVE_CXX_MNO_SSSE3
-- Performing Test HAVE_CXX_MNO_SSSE3 - Success
-- Performing Test HAVE_C_MNO_SSSE3
-- Performing Test HAVE_C_MNO_SSSE3 - Success
-- Performing Test HAVE_CXX_MNO_SSE4_1
-- Performing Test HAVE_CXX_MNO_SSE4_1 - Success
-- Performing Test HAVE_C_MNO_SSE4_1
-- Performing Test HAVE_C_MNO_SSE4_1 - Success
-- Performing Test HAVE_CXX_MNO_SSE4_2
-- Performing Test HAVE_CXX_MNO_SSE4_2 - Success
-- Performing Test HAVE_C_MNO_SSE4_2
-- Performing Test HAVE_C_MNO_SSE4_2 - Success
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS
-- Performing Test HAVE_CXX_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_C_FFUNCTION_SECTIONS
-- Performing Test HAVE_C_FFUNCTION_SECTIONS - Success
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_HIDDEN - Success
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_CXX_FVISIBILITY_INLINES_HIDDEN - Success
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN
-- Performing Test HAVE_C_FVISIBILITY_INLINES_HIDDEN - Failed
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Check if the system is big endian
-- Searching 16 bit integer
-- Looking for sys/types.h
-- Looking for sys/types.h - found
-- Looking for stdint.h
-- Looking for stdint.h - found
-- Looking for stddef.h
-- Looking for stddef.h - found
-- Check size of unsigned short
-- Check size of unsigned short - done
-- Using unsigned short
-- Check if the system is big endian - little endian
-- Found ZLIB: /home/geoff/anaconda3/envs/obj_recog/lib/libz.so (found suitable version ""1.2.8"", minimum required is ""1.2.3"") 
-- Found TIFF: /home/geoff/anaconda3/envs/obj_recog/lib/libtiff.so (found version ""4.0.6"") 
-- Found JPEG: /home/geoff/anaconda3/envs/obj_recog/lib/libjpeg.so  
-- Found WebP: /usr/lib/x86_64-linux-gnu/libwebp.so  
-- Found Jasper: /usr/lib/x86_64-linux-gnu/libjasper.so (found version ""1.900.1"") 
-- Found ZLIB: /home/geoff/anaconda3/envs/obj_recog/lib/libz.so (found version ""1.2.8"") 
-- Found PNG: /home/geoff/anaconda3/envs/obj_recog/lib/libpng.so (found version ""1.6.22"") 
-- Looking for /home/geoff/anaconda3/envs/obj_recog/include/libpng/png.h
-- Looking for /home/geoff/anaconda3/envs/obj_recog/include/libpng/png.h - not found
-- Looking for semaphore.h
-- Looking for semaphore.h - found
-- Performing Test HAVE_CXX_WNO_SHADOW
-- Performing Test HAVE_CXX_WNO_SHADOW - Success
-- Performing Test HAVE_CXX_WNO_UNUSED
-- Performing Test HAVE_CXX_WNO_UNUSED - Success
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE
-- Performing Test HAVE_CXX_WNO_SIGN_COMPARE - Success
-- Performing Test HAVE_CXX_WNO_UNDEF
-- Performing Test HAVE_CXX_WNO_UNDEF - Success
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_MISSING_DECLARATIONS - Success
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED
-- Performing Test HAVE_CXX_WNO_UNINITIALIZED - Success
-- Performing Test HAVE_CXX_WNO_SWITCH
-- Performing Test HAVE_CXX_WNO_SWITCH - Success
-- Performing Test HAVE_CXX_WNO_PARENTHESES
-- Performing Test HAVE_CXX_WNO_PARENTHESES - Success
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS
-- Performing Test HAVE_CXX_WNO_ARRAY_BOUNDS - Success
-- Performing Test HAVE_CXX_WNO_EXTRA
-- Performing Test HAVE_CXX_WNO_EXTRA - Success
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS
-- Performing Test HAVE_CXX_WNO_DEPRECATED_DECLARATIONS - Success
-- Checking for module 'gstreamer-base-1.0'
--   No package 'gstreamer-base-1.0' found
-- Checking for module 'gstreamer-video-1.0'
--   No package 'gstreamer-video-1.0' found
-- Checking for module 'gstreamer-app-1.0'
--   No package 'gstreamer-app-1.0' found
-- Checking for module 'gstreamer-riff-1.0'
--   No package 'gstreamer-riff-1.0' found
-- Checking for module 'gstreamer-pbutils-1.0'
--   No package 'gstreamer-pbutils-1.0' found
-- Checking for module 'gstreamer-base-0.10'
--   No package 'gstreamer-base-0.10' found
-- Checking for module 'gstreamer-video-0.10'
--   No package 'gstreamer-video-0.10' found
-- Checking for module 'gstreamer-app-0.10'
--   No package 'gstreamer-app-0.10' found
-- Checking for module 'gstreamer-riff-0.10'
--   No package 'gstreamer-riff-0.10' found
-- Checking for module 'gstreamer-pbutils-0.10'
--   No package 'gstreamer-pbutils-0.10' found
-- Checking for module 'libdc1394-2'
--   Found libdc1394-2, version 2.2.4
-- Checking for module 'libv4l1'
--   Found libv4l1, version 1.10.0
-- Checking for module 'libv4l2'
--   Found libv4l2, version 1.10.0
-- Looking for linux/videodev.h
-- Looking for linux/videodev.h - not found
-- Looking for linux/videodev2.h
-- Looking for linux/videodev2.h - found
-- Looking for sys/videoio.h
-- Looking for sys/videoio.h - not found
-- Checking for module 'libavcodec'
--   Found libavcodec, version 57.64.101
-- Checking for module 'libavformat'
--   Found libavformat, version 57.56.100
-- Checking for module 'libavutil'
--   Found libavutil, version 55.34.100
-- Checking for module 'libswscale'
--   Found libswscale, version 4.2.100
-- Checking for module 'libavresample'
--   No package 'libavresample' found
-- Looking for libavformat/avformat.h
-- Looking for libavformat/avformat.h - found
-- Looking for ffmpeg/avformat.h
-- Looking for ffmpeg/avformat.h - not found
-- Checking for module 'libgphoto2'
--   No package 'libgphoto2' found
-- Checking for module 'tbb'
--   Found tbb, version 4.4~20151115
-- ICV: Removing previous unpacked package: /home/geoff/opencv-3.1.0/3rdparty/ippicv/unpack
-- ICV: Unpacking ippicv_linux_20151201.tgz to /home/geoff/opencv-3.1.0/3rdparty/ippicv/unpack...
-- ICV: Package successfully downloaded
-- found IPP (ICV version): 9.0.1 [9.0.1]
-- at: /home/geoff/opencv-3.1.0/3rdparty/ippicv/unpack/ippicv_lnx
-- CUDA detected: 8.0
-- CUDA NVCC target flags: -gencode;arch=compute_20,code=sm_20;-gencode;arch=compute_20,code=sm_21;-gencode;arch=compute_30,code=sm_30;-gencode;arch=compute_35,code=sm_35;-gencode;arch=compute_30,code=compute_30
-- Could NOT find Doxygen (missing:  DOXYGEN_EXECUTABLE) 
-- To enable PlantUML support, set PLANTUML_JAR environment variable or pass -DPLANTUML_JAR=&lt;filepath&gt; option to cmake
-- Found PythonInterp: /home/geoff/anaconda3/envs/obj_recog/bin/python (found suitable version ""2.7.12"", minimum required is ""2.7"") 
</code></pre>

<p>When I execute <code>make j-4</code> as in the tutorial, the make then breaks around 40%.</p>

<p>I also tried installing by using <code>conda install opencv</code>, but then I can't read <code>.avi</code> videos or images, getting the following error: </p>

<pre><code>OpenCV Error: Unspecified error (The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script) in cvShowImage, file /root/mc-x64-2.7/conda-bld/opencv-3_1482256854890/work/opencv-3.1.0/modules/highgui/src/window.cpp, line 545
Traceback (most recent call last):
 File ""find_game.py"", line 24, in &lt;module&gt;
   cv2.imshow(""Image"", image)
cv2.error: /root/mc-x64-2.7/conda-bld/opencv-3_1482256854890/work/opencv-3.1.0/modules/highgui/src/window.cpp:545: error: (-2) The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script in function cvShowImage
</code></pre>

<p>I checked and <code>libgtk2-0-dev</code> is correctly installed.</p>

<p>Before building OpenCV by hand, I also compiled and reinstalled ffmpeg and gstreamer.</p>

<p>During the <code>make</code>, I get this error:</p>

<pre><code>//usr/lib/x86_64-linux-gnu/libsoxr.so.0: undefined reference to `GOMP_parallel@GOMP_4.0'
collect2: error: ld returned 1 exit status
samples/opengl/CMakeFiles/example_opengl_opengl_interop.dir/build.make:107: recipe for target 'bin/opengl-example-opengl_interop' failed
make[2]: *** [bin/opengl-example-opengl_interop] Error 1
CMakeFiles/Makefile2:31556: recipe for target 'samples/opengl/CMakeFiles/example_opengl_opengl_interop.dir/all' failed
make[1]: *** [samples/opengl/CMakeFiles/example_opengl_opengl_interop.dir/all] Error 2
</code></pre>

<p>Any help would be greatly appreciated !</p>
",2017-01-05 00:04:05,2017-04-05 02:57:20,Can't build OpenCV3.1 for Python 2.7,<python><python-2.7><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
49232,41359013,2016-12-28 09:24:36,,"<p>When downloading OpenCV sources, no matter whether it is for Windows or for Linux, the sources directory contains only the Windows already-compiled shared library <code>3rdparty/ffmpeg/opencv_ffmpeg.dll</code>, that is essential for the <code>VideoCapture</code> module to work on the Python portings for OpenCV.</p>

<p>In Linux, as this file is not provided, you'd expect it to be automatically built when you  build OpenCV, especially when in <code>CMakeCache.txt</code>, you can spot the line <code>WITH_FFMPEG:BOOL=ON</code>.</p>

<p>It is of course not built... Any idea?</p>
",,2016-12-28 13:56:47,Building OpenCV 2.4.11 on Linux with `libopencv_ffmpeg.so`,<c++><linux><opencv><ffmpeg><video-capture>,,,CC BY-SA 3.0,True,False,False,False,True
49251,41439684,2017-01-03 08:54:43,,"<p>I'm working on my academic project in which I've to record a video from the webcam.</p>

<p>In my google search, I've found that <strong>FFmpeg</strong> uses <code>pipelining</code> to record the video from the camera while <strong>OpenCV</strong>, <strong>AVbin</strong> use <code>ctypes</code>.</p>

<p>I don't know the pros and cons of either method, and wonder if you can help me decide which one to choose to write such kind of program in Linux. </p>

<p>I need to record 1024x768 30hz video and not experience latency/lag issues. Performance is the high priority.</p>
",2017-01-03 09:10:55,2017-01-03 09:10:55,Opencv Vs FFmpeg performance comparision for web cam feed recording,<c++><linux><opencv><ffmpeg><v4l2>,,,CC BY-SA 3.0,True,False,False,False,True
49343,41447246,2017-01-03 15:49:27,,"<p>I tried to install OpenCV3 for Mac with the following command in terminal:</p>

<pre><code>brew install opencv3 --with-contrib -with-ffmpeg
</code></pre>

<p>It repeatedly gets stuck at this point:</p>

<pre><code>cmake .. -DCMAKE_C_FLAGS_RELEASE=-DNDEBUG -DCMAKE_CXX_FLAGS_RELEASE=-DNDEBUG -DCMAKE
</code></pre>

<p>Can someone please tell me how to fix this?</p>
",2017-01-03 17:32:07,2017-06-06 01:15:12,OpenCV3 installation on Mac,<macos><opencv><computer-vision><opencv3.0><opencv3.1>,,,CC BY-SA 3.0,True,False,False,False,True
49407,41295135,2016-12-23 04:20:05,,"<p>So, I'm working on a project that includes running opencv on the raspberry pi 3B in java. I've followed the instructions on it's website for installation in linux, and uploaded my code:</p>

<pre><code>cap = new VideoCapture();
cap.open(""http://192.168.137.1:8000/video.mjpg"");
System.out.println(cap.isOpened());
</code></pre>

<p>On my Windows computer, it prints out true, but on the Pi, it prints out false. However, I AM able to wget the .mjpg file,  and it downloads fine. Also, I should note that it works with my usb camera (cap.open(0);).
I have found online that it could be ffmpeg, but I do have libav installed, so that should be fine. It worked on my Raspberry Pi model B, but not on my model 3 B. 
<br></p>

<p>Is there a set of libraries I'm missing?
<br></p>

<p>Thanks in advanced, 
Ryan</p>
",,2016-12-25 04:27:53,OpenCV w/ Rapsberry Pi: VideoCapture IP camera not working,<java><opencv><raspberry-pi3>,,,CC BY-SA 3.0,True,False,False,False,True
49428,41527688,2017-01-07 23:20:17,,"<p>I have a gif that I am taking apart frame by frame in order to write text onto it. I used ffmpeg to put the frames (saved as individual <code>.png</code> files) back together and it worked nicely. This is the code I used:</p>

<p><code>ffmpeg -f image2 -i newimg%d.png out.gif</code></p>

<p>But now I want to use the python wrapper <code>ffmpy</code>. Following the docs, I tried a variety of things but I keep getting syntax errors. </p>

<p>Here is one instance of my efforts:</p>

<pre><code>ff = ffmpy(FFmpeg(inputs = {ffmpeg -f image2 -i ""newimg%d.png""}, outputs = {""gif_with_text.gif""}))
ff.run()
</code></pre>

<p>In this attempt, the syntax error points to the ""2"" in <code>image2</code>. Could someone help me out? Note - I'm new to python, let alone ffmpeg and ffmpy.</p>
",,2017-01-07 23:20:17,How do I convert this ffmpeg command to be used in ffmpy?,<python><image><python-3.x><image-processing><ffmpeg>,,,CC BY-SA 3.0,False,False,False,False,True
49477,41567044,2017-01-10 10:52:04,,"<p>I am using Windows 10 and the 2.7.12 32-bit version of Python and Opencv 3.1.0. Below is the code where it goes wrong:</p>

<pre><code>vcap = cv2.VideoCapture(""StraightAhead.avi"")
if not vcap.isOpened():
    print ""File Cannot be Opened""
</code></pre>

<p>First off, all of this code works when using webcam (so <code>VideoCapture(0)</code>).</p>

<p>I have tried a couple of things. First off, it was originally an mp4 so I converted it to avi. I tried a file (.webm) from a friend who is using Linux with python and opencv which worked for him but not for me.</p>

<p>I checked to see if I could move the DLL files from opencv ffmpeg to Python but there are no DLL files for me there. I checked a lot of other questions but most of them give solutions for Linux.</p>

<p>The most relevant question doesn't have any answers or comments so I finally decided to ask it here. I hope someone can help.</p>
",2017-01-10 10:55:05,2017-01-11 19:20:27,OpenCV Python unable to open videofile,<python><windows><opencv>,,,CC BY-SA 3.0,True,False,False,False,True
49567,41670584,2017-01-16 06:26:25,,"<p>Can someone please help me with a working method on how to install <code>FFMPEG</code> on linux, I have followed several tutorials and they seem to work except after everything <code>FFMPEG</code> is never found in the system, even after several system reboots my last try was from this link <a href=""https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu"" rel=""nofollow noreferrer"">Compile FFmpeg on Ubuntu, Debian, or Mint</a></p>

<p>I did everything in the tutorial but when i run the <code>man ffmpeg</code> it tells me no manual found and <code>OpenCV</code> too does not detect it, I tried calling the <code>Core.getBuildInformation()</code> and the output was:</p>

<pre><code>GUI: 
QT:                          NO
GTK+:                        NO
GThread :                    NO
GtkGlExt:                    NO
OpenGL support:              NO
VTK support:                 NO

Media I/O: 
ZLib:                        zlib (ver 1.2.8)
JPEG:                        libjpeg (ver 90)
WEBP:                        build (ver 0.3.1)
PNG:                         build (ver 1.6.24)
TIFF:                        build (ver 42 - 4.0.2)
JPEG 2000:                   build (ver 1.900.1)
OpenEXR:                     build (ver 1.7.1)
GDAL:                        NO
GDCM:                        NO

Video I/O:
DC1394 1.x:                  NO
DC1394 2.x:                  NO
FFMPEG:                      NO
  avcodec:                   NO
  avformat:                  NO
  avutil:                    NO
  swscale:                   NO
  avresample:                NO
GStreamer:                   NO
OpenNI:                      NO
OpenNI PrimeSensor Modules:  NO
OpenNI2:                     NO
PvAPI:                       NO
GigEVisionSDK:               NO
Aravis SDK:                  NO
UniCap:                      NO
UniCap ucil:                 NO
V4L/V4L2:                    NO/YES
XIMEA:                       NO
Xine:                        NO
gPhoto2:                     NO

Parallel framework:            pthreads

Other third-party libraries:
Use IPP:                     9.0.1 [9.0.1]
     at:                     /home/daddy/opencv-3.2.0/build/3rdparty/ippicv/ippicv_lnx
Use IPP Async:               NO
Use VA:                      NO
Use Intel VA-API/OpenCL:     NO
Use Lapack:                  NO
Use Eigen:                   NO
Use Cuda:                    NO
Use OpenCL:                  YES
Use OpenVX:                  NO
Use custom HAL:              NO

OpenCL:                        &lt;Dynamic loading of OpenCL library&gt;
Include path:                /home/daddy/opencv-3.2.0/3rdparty/include/opencl/1.2
Use AMDFFT:                  NO
Use AMDBLAS:                 NO

Python 2:
Interpreter:                 /usr/bin/python2.7 (ver 2.7.12)

Python 3:
Interpreter:                 /usr/bin/python3 (ver 3.5.2)

Python (for build):            /usr/bin/python2.7

Java:
ant:                         /usr/bin/ant (ver 1.9.6)
JNI:                         /usr/lib/jvm/java-8-oracle/include /usr/lib/jvm/java-8-oracle/include/linux /usr/lib/jvm/java-8-oracle/include
Java wrappers:               YES
Java tests:                  YES

Matlab:                        Matlab not found or implicitly disabled

Documentation:
Doxygen:                     NO

Tests and samples:
Tests:                       YES
Performance tests:           YES
C/C++ Examples:              NO

Install path:                  /usr/loca
cvconfig.h is in:              /home/user/opencv-3.2.0/build
</code></pre>
",,2017-01-19 15:29:45,OpenCV linux how to install FFMPEG,<java><linux><opencv><ubuntu><ffmpeg>,,,CC BY-SA 3.0,True,True,False,False,True
49578,41579062,2017-01-10 21:50:25,,"<p>I'm trying to read an udp streaming of a H264 encoded image. The software structure is like follows:</p>

<p>On a BeagleBoneBlack (Ubuntu 16.04) I've an Elp H264 cam (see here: <a href=""https://rads.stackoverflow.com/amzn/click/com/B00VDSBH9G"" rel=""nofollow noreferrer"" rel=""nofollow noreferrer"">https://www.amazon.com/ELP-Support-Android-Windows-Surveillance/dp/B00VDSBH9G</a> ). I stream frames with ffmpeg on a Unicast UDP Stream.</p>

<p>I want to read this images from python and opencv to be able to process them.</p>

<p>I tried with this simple code to see if the cap is opened or not:</p>

<pre><code>import cv2
</code></pre>

<blockquote>
<pre><code>try:
     cap = cv2.VideoCapture(""udp://localhost:1234/"")
    cap.set(CV_CAP_PROP_FOURCC, CV_FOURCC('H', '2', '6', '4'));
except Exception, e:
    print str(e)
</code></pre>
</blockquote>

<p>But when I run this script python says:</p>

<blockquote>
  <p>DtsGetHWFeatures: Create File Failed DtsGetHWFeatures: Create File
  Failed Running DIL (3.22.0) Version DtsDeviceOpen: Opening HW in mode
  0 DtsDeviceOpen: Create File Failed libva info: VA-API version 0.38.1
  libva info: va_getDriverName() returns -1 libva error:
  va_getDriverName() failed with unknown libva error,driver_name=(null)
  libva info: VA-API version 0.38.1 libva info: va_getDriverName()
  returns -1 libva error: va_getDriverName() failed with unknown libva
  error,driver_name=(null) libva info: VA-API version 0.38.1 libva info:
  va_getDriverName() returns -1 libva error: va_getDriverName() failed
  with unknown libva error,driver_name=(null) libva info: VA-API version
  0.38.1 libva info: va_getDriverName() returns -1 libva error: va_getDriverName() failed with unknown libva error,driver_name=(null)
  GStreamer Plugin: Embedded video playback halted; module vaapidecode
  reported: Could not initialize supporting             library. OpenCV
  Error: Unspecified error (GStreamer: unable to start pipeline ) in
  cvCaptureFromCAM_GStreamer, file /builddir/build/BUILD/opencv-<br>
  2.4.12.3/modules/highgui/src/cap_gstreamer.cpp, line 816 /builddir/build/BUILD/opencv-2.4.12.3/modules/highgui/src/cap_gstreamer.cpp:816:
  error: (-2) GStreamer: unable     to start pipeline  in function
  cvCaptureFromCAM_GStreamer</p>
</blockquote>

<p>Can anybody help me?</p>

<p>Thanks,</p>

<p>Francesco.</p>
",2017-02-03 10:32:06,2017-02-03 10:32:06,Read H264 streaming from Elp H264 with OpenCV + Python,<python><opencv><ffmpeg><h.264>,,,CC BY-SA 3.0,True,False,False,False,True
49615,41582205,2017-01-11 03:26:54,,"<p>I'm a beginner to opencv, and I've been trying out some basic things using the library. I've added all the dependencies in VS, so generally the image processing related codes work. However, I am getting the following error on the console for one video-related program:</p>

<blockquote>
  <p>warning: Error opening file
  (/build/opencv/modules/videoio/src/cap_ffmpeg_impl.hpp:578) Press any
  key to continue.</p>
</blockquote>

<p>My code is as follows:</p>

<pre><code>#include ""opencv2\highgui\highgui.hpp""
#include ""opencv2\imgproc\imgproc.hpp""
using namespace cv;

int main(int argc, char** argv) {
namedWindow(""Video"", WINDOW_AUTOSIZE);
VideoCapture cap;
cap.open(argv[1]);

Mat frame;
for (;;) {
    cap &gt;&gt; frame;
    if (frame.empty()) break;
    imshow(""Video"", frame);
    if (waitKey(33) &gt;= 0) break;
}
return 0;
}
</code></pre>

<p>I downloaded ffmpeg, and added it my Path environment variable as well, it did not work.
I've searched quite extensively online for this, but to no avail. Any help is appreciated.</p>
",2017-01-11 03:33:09,2018-08-07 20:25:30,OpenCV C++ using Visual Studio 2015 error,<opencv><visual-studio-2015><opencv3.1>,,,CC BY-SA 3.0,True,True,False,False,True
49622,41596701,2017-01-11 17:08:01,,"<p>I want to record video <strong>quiet</strong> and without preview in Android. So I choice <strong>MediaRecorder</strong> but I could record only without preview but what make me crazy is that when MediaRecorder start or stop it will with <strong>a sound dee...</strong>. I try many methods about <a href=""https://stackoverflow.com/questions/27498092/how-to-mute-the-beep-by-mediarecorder-start"">that</a> . But I think it perhaps sth related to the OS of the mobile. So I try JavaCV because I also want to have a Live function in my app.</p>

<p>But <a href=""https://github.com/bytedeco/javacv"" rel=""nofollow noreferrer""><strong>JavaCV</strong></a> spent me to too much time to solve some strange problems because it's my first time to do sth about C++ src and video.</p>

<p>Just <code>compile group: 'org.bytedeco', name: 'javacv-platform', version: '1.3'</code> as the README.md ,I even can't build my apk.</p>

<pre><code>Error:Execution failed for task ':app:transformResourcesWithMergeJavaResForDebug'.
&gt; com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK org/bytedeco/javacpp/macosx-x86_64/libusb-1.0.dylib
    File1: /Users/wyx/.gradle/caches/modules-2/files-2.1/org.bytedeco.javacpp-presets/libfreenect/0.5.3-1.3/736d65a3ef042258429d8e7742128c411806b432/libfreenect-0.5.3-1.3-macosx-x86_64.jar
    File2: /Users/wyx/.gradle/caches/modules-2/files-2.1/org.bytedeco.javacpp-presets/libdc1394/2.2.4-1.3/f1498dacc46162ab68faeb8d66cf02b96fe41c61/libdc1394-2.2.4-1.3-macosx-x86_64.jar
</code></pre>

<p>And then I modified it according this <a href=""https://github.com/bytedeco/javacv/issues/353"" rel=""nofollow noreferrer"">issuse</a>
use this to repalce. It can build the apk. But the can't run.</p>

<pre><code>  android {
   ..............
    packagingOptions {
        exclude 'META-INF/services/javax.annotation.processing.Processor'
        pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.properties'
        pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/opencv/pom.xml'
        pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.properties'
        pickFirst  'META-INF/maven/org.bytedeco.javacpp-presets/ffmpeg/pom.xml'
    }
}

dependencies {
    compile group: 'org.bytedeco', name: 'javacv', version: '1.3'
    compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '3.2.1-1.3', classifier: 'android-x86'
    compile group: 'org.bytedeco.javacpp-presets', name: 'ffmpeg', version: '3.2.1-1.3', classifier: 'android-arm'
    compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '3.1.0-1.3', classifier: 'android-x86'
    compile group: 'org.bytedeco.javacpp-presets', name: 'opencv', version: '3.1.0-1.3', classifier: 'android-arm'
}
</code></pre>

<p>My demo code  <strong>VideoService</strong> which will invoke in MainActivity</p>

<pre><code>package com.fs.fs.api;

import com.fs.fs.App;
import com.fs.fs.utils.DateUtils;
import com.fs.fs.utils.FileUtils;

import org.bytedeco.javacpp.avcodec;
import org.bytedeco.javacv.FFmpegFrameRecorder;
import org.bytedeco.javacv.FrameRecorder;

import java.util.Date;

/**
 * Created by wyx on 2017/1/11.
 */
public class VideoService {
    private FFmpegFrameRecorder mFrameRecorder;
    private String path;

    private VideoService() {
    }

    private static class SingletonHolder {
        private static final VideoService INSTANCE = new VideoService();
    }

    public static VideoService getInstance() {
        return SingletonHolder.INSTANCE;
    }

    public void startRecordVideo() {
        String fileName = String.format(""%s.%s"", DateUtils.date2String(new Date(), ""yyyyMMdd_HHmmss""), ""mp4"");
        path = FileUtils.getExternalFullPath(App.getInstance(), fileName);
        mFrameRecorder = new FFmpegFrameRecorder(path, 640, 480, 1);
        mFrameRecorder.setVideoCodec(avcodec.AV_CODEC_ID_H264);
        mFrameRecorder.setVideoOption(""tune"", ""zerolatency"");
        mFrameRecorder.setVideoOption(""preset"", ""ultrafast"");
        mFrameRecorder.setVideoOption(""crf"", ""28"");
        mFrameRecorder.setVideoBitrate(300 * 1000);
        mFrameRecorder.setFormat(""mp4"");

        mFrameRecorder.setFrameRate(30);
        mFrameRecorder.setAudioOption(""crf"", ""0"");
        mFrameRecorder.setSampleRate(48 * 1000);
        mFrameRecorder.setAudioBitrate(960 * 1000);
        mFrameRecorder.setAudioCodec(avcodec.AV_CODEC_ID_AAC);
        try {
            mFrameRecorder.start();
        } catch (FrameRecorder.Exception e) {
            e.printStackTrace();
        }
    }

    public void stop() {
        if (mFrameRecorder != null) {
            try {
                mFrameRecorder.stop();
                mFrameRecorder.release();
            } catch (FrameRecorder.Exception e) {
                e.printStackTrace();
            }
            mFrameRecorder = null;
        }
    }

}
</code></pre>

<p><strong>MainActivity</strong></p>

<pre><code>package com.fs.fs.activity;

import android.app.Activity;
import android.os.Bundle;

import com.fs.fs.R;
import com.fs.fs.api.VideoService;

import static java.lang.Thread.sleep;


public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);


        VideoService.getInstance().startRecordVideo();
        try {
            sleep(10 * 1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        VideoService.getInstance().stop();
    }
}
</code></pre>

<p>Error which make me want to cry.</p>

<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main
                  Process: com.fs.fs, PID: 30259
                  java.lang.NoClassDefFoundError: java.lang.ClassNotFoundException: org.bytedeco.javacpp.avutil
                      at org.bytedeco.javacpp.Loader.load(Loader.java:590)
                      at org.bytedeco.javacpp.Loader.load(Loader.java:530)
                      at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1694)
                      at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149)
                      at com.fs.fs.api.VideoService.startRecordVideo(VideoService.java:34)
                      at com.fs.fs.activity.MainActivity.onCreate(MainActivity.java:75)
                      at android.app.Activity.performCreate(Activity.java:5304)
                      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1090)
                      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2245)
                      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2331)
                      at android.app.ActivityThread.access$1000(ActivityThread.java:143)
                      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
                      at android.os.Handler.dispatchMessage(Handler.java:102)
                      at android.os.Looper.loop(Looper.java:136)
                      at android.app.ActivityThread.main(ActivityThread.java:5291)
                      at java.lang.reflect.Method.invokeNative(Native Method)
                      at java.lang.reflect.Method.invoke(Method.java:515)
                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
                      at dalvik.system.NativeStart.main(Native Method)
                   Caused by: java.lang.ClassNotFoundException: org.bytedeco.javacpp.avutil
                      at java.lang.Class.classForName(Native Method)
                      at java.lang.Class.forName(Class.java:251)
                      at org.bytedeco.javacpp.Loader.load(Loader.java:585)
                      at org.bytedeco.javacpp.Loader.load(Loader.java:530) 
                      at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1694) 
                      at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149) 
                      at com.fs.fs.api.VideoService.startRecordVideo(VideoService.java:34) 
                      at com.fs.fs.activity.MainActivity.onCreate(MainActivity.java:75) 
                      at android.app.Activity.performCreate(Activity.java:5304) 
                      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1090) 
                      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2245) 
                      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2331) 
                      at android.app.ActivityThread.access$1000(ActivityThread.java:143) 
                      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244) 
                      at android.os.Handler.dispatchMessage(Handler.java:102) 
                      at android.os.Looper.loop(Looper.java:136) 
                      at android.app.ActivityThread.main(ActivityThread.java:5291) 
                      at java.lang.reflect.Method.invokeNative(Native Method) 
                      at java.lang.reflect.Method.invoke(Method.java:515) 
                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 
                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 
                      at dalvik.system.NativeStart.main(Native Method) 
                   Caused by: java.lang.NoClassDefFoundError: org/bytedeco/javacpp/avutil
                      at java.lang.Class.classForName(Native Method) 
                      at java.lang.Class.forName(Class.java:251) 
                      at org.bytedeco.javacpp.Loader.load(Loader.java:585) 
                      at org.bytedeco.javacpp.Loader.load(Loader.java:530) 
                      at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1694) 
                      at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149) 
                      at com.fs.fs.api.VideoService.startRecordVideo(VideoService.java:34) 
                      at com.fs.fs.activity.MainActivity.onCreate(MainActivity.java:75) 
                      at android.app.Activity.performCreate(Activity.java:5304) 
                      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1090) 
                      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2245) 
                      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2331) 
                      at android.app.ActivityThread.access$1000(ActivityThread.java:143) 
                      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244) 
                      at android.os.Handler.dispatchMessage(Handler.java:102) 
                      at android.os.Looper.loop(Looper.java:136) 
                      at android.app.ActivityThread.main(ActivityThread.java:5291) 
                      at java.lang.reflect.Method.invokeNative(Native Method) 
                      at java.lang.reflect.Method.invoke(Method.java:515) 
                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 
                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 
                      at dalvik.system.NativeStart.main(Native Method) 
                   Caused by: java.lang.ClassNotFoundException: Didn't find class ""org.bytedeco.javacpp.avutil"" on path: DexPathList[[zip file ""/data/app/com.fs.fs-2.apk""],nativeLibraryDirectories=[/data/app-lib/com.fs.fs-2, /vendor/lib, /system/lib, /data/datalib]]
                      at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:56)
                      at java.lang.ClassLoader.loadClass(ClassLoader.java:497)
                      at java.lang.ClassLoader.loadClass(ClassLoader.java:457)
                      at java.lang.Class.classForName(Native Method) 
                      at java.lang.Class.forName(Class.java:251) 
                      at org.bytedeco.javacpp.Loader.load(Loader.java:585) 
                      at org.bytedeco.javacpp.Loader.load(Loader.java:530) 
                      at org.bytedeco.javacpp.avcodec$AVPacket.&lt;clinit&gt;(avcodec.java:1694) 
                      at org.bytedeco.javacv.FFmpegFrameRecorder.&lt;init&gt;(FFmpegFrameRecorder.java:149) 
                      at com.fs.fs.api.VideoService.startRecordVideo(VideoService.java:34) 
                      at com.fs.fs.activity.MainActivity.onCreate(MainActivity.java:75) 
                      at android.app.Activity.performCreate(Activity.java:5304) 
                      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1090) 
                      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2245) 
                      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2331) 
                      at android.app.ActivityThread.access$1000(ActivityThread.java:143) 
                      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244) 
                      at android.os.Handler.dispatchMessage(Handler.java:102) 
                      at android.os.Looper.loop(Looper.java:136) 
                      at android.app.ActivityThread.main(ActivityThread.java:5291) 
                      at java.lang.reflect.Method.invokeNative(Native Method) 
                      at java.lang.reflect.Method.invoke(Method.java:515) 
                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 
                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 
                      at dalvik.system.NativeStart.main(Native Method) 
</code></pre>

<p>So I want to know a comfortable method to achieve my goal : <strong>recode video quiet and without preview. And Live real time</strong> ?</p>

<p>I found <strong>ffmpeg4android</strong> is a prefect library to run ffmpeg command. I just use it to compress videos from MediaRecorder But I don't how to do use it to achieve my goal.</p>
",2017-05-23 11:54:40,2017-01-11 17:08:01,JavaCV record video in Android,<ffmpeg><javacv>,,,CC BY-SA 3.0,True,False,False,False,True
49787,41608505,2017-01-12 08:40:55,,"<p>To get a thumbnail from an image at <code>100</code> seconds I can do <code>ffmpeg -ss 100 -i /tmp/video.mp4 -frames:v 1 -s 200x100 image.jpg</code>. However, if the video is less than <code>100</code> seconds, ffmpeg doesn't create a thumbnail but also doesn't exit with any error code, which is quite unexpected.</p>

<p>The command exits with no error code (exit status of <code>0</code>). It only outputs a message on <code>stderr</code> saying <code>Output file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)</code>.</p>

<p>I would like ffmpeg to exit with an error code under <strong>any situation where a thumbnail hasn't been created</strong>. Otherwise I'll always have to do another check from my application code after the ffmpeg command to ensure that the expected number of thumbnails has been output to the filesystem.</p>

<p>Is there a way around having to do this application-level check, and force ffmpeg to fail whenever it doesn't successfully write a thumbnail to the filesystem?</p>
",,2017-01-12 10:08:39,Force ffmpeg to exit with error code whenever thumbnail isn't successfully created,<image><video><image-processing><ffmpeg><thumbnails>,,,CC BY-SA 3.0,False,False,False,False,True
49812,41649359,2017-01-14 11:17:16,,"<p>Hi want to create a android app in which user can capture video. While capturing the video, a <strong>watermark</strong> should be shown in each frame, such that when the video is played afterwards it has an embedded watermark.</p>

<p>Has anyone worked on this before?</p>
",2017-01-14 15:12:26,2017-01-14 15:12:26,OpenCV - Record video in android with watermark,<android><opencv><video><ffmpeg><opencv4android>,,,CC BY-SA 3.0,True,False,False,False,True
49818,41610167,2017-01-12 10:02:23,,"<p>To get a thumbnail from an image halfway through the video I can do <code>ffmpeg -ss 100 -i /tmp/video.mp4 -frames:v 1 -s 200x100 image.jpg</code>. By using <code>-ss 100</code> it gets a thumbnail at <code>100</code> seconds (which would be halfway through the video assuming the video is <code>200</code> seconds long).</p>

<p>But if I don't know the exact length of the video, in my application code I would need to use something like <code>ffprobe</code> to first determine the length of the video, and then divide it by 2 to get the thumbnail time.</p>

<p>Is there a way to get ffmpeg to get the thumbnail at the percentage of the video you want? So instead of specifying <code>-ss 100</code>, something like <code>-ss 50%</code> or <code>-ss 20%</code> to get a thumbnail from halfway or 20% into the file?</p>

<p>I know I can do this through application code, but it would be more efficient if there's a way for ffmpeg to handle this itself.</p>
",,2019-06-02 02:25:44,Specify percentage instead of time to ffmpeg,<image><video><image-processing><ffmpeg><thumbnails>,,,CC BY-SA 3.0,False,False,False,False,True
49954,41818385,2017-01-24 01:05:56,,"<p>I am trying to save a background subtracted video in python and the following is my code. </p>

<pre><code>import cv2
import numpy as np

capture = cv2.VideoCapture('MAH00119.mp4')
size = (int(capture.get(cv2.CAP_PROP_FRAME_WIDTH)),
int(capture.get(cv2.CAP_PROP_FRAME_HEIGHT)))
fourcc = cv2.VideoWriter_fourcc(*'X264')
out = cv2.VideoWriter('output.mp4', -1 , 20.0 , size)
fgbg= cv2.createBackgroundSubtractorMOG2()

while True:
    ret, img = capture.read()
    if ret==True:
        fgmask = fgbg.apply(img)
        out.write(fgmask)
        cv2.imshow('img',fgmask)

    if(cv2.waitKey(27)!=-1):
        break

capture.release()
out.release()
cv2.destroyAllWindows()
</code></pre>

<p>However, this keeps throwing the following error: ""OpenCV: FFMPEG: tag 0xffffffff/'����' is not found (format 'mp4 / MP4 (MPEG-4 Part 14)')'""</p>

<p>I have FFMPEG installed and have added it to the environment variables. My background subtraction code without having to save to a file works fine, so I know there's nothing wrong with openCV installation. I am stuck at this place. I know that my python doesn't seem to recognize FFMPEG but I don't know what else to do apart from adding FFMPEG to the environment variables.
I am using OpenCV version 3.2 on Windows 10 and Python 2.7.</p>

<p>Any help will be much appreciated!</p>
",,2017-08-02 18:40:54,OpenCV: FFMPEG: tag 0xffffffff/'����' is not found (format 'mp4 / MP4 (MPEG-4 Part 14)')',<python><opencv><video><ffmpeg>,,,CC BY-SA 3.0,True,False,False,False,True
